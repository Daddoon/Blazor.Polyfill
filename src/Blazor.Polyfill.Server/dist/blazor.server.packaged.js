function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _wrapNativeSuper(n){var t=typeof Map=="function"?new Map:undefined;return _wrapNativeSuper=function(n){function i(){return _construct(n,arguments,_getPrototypeOf(this).constructor)}if(n===null||!_isNativeFunction(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,i)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(i,n)},_wrapNativeSuper(n)}function isNativeReflectConstruct(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}function _construct(){return _construct=isNativeReflectConstruct()?Reflect.construct:function(n,t,i){var r=[null],f,u;return r.push.apply(r,t),f=Function.bind.apply(n,r),u=new f,i&&_setPrototypeOf(u,i.prototype),u},_construct.apply(null,arguments)}function _isNativeFunction(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function _arrayWithoutHoles(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}function _slicedToArray(n,t){return _arrayWithHoles(n)||_iterableToArrayLimit(n,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(n,t){var i,o;if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]"){var r=[],u=!0,f=!1,e=undefined;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){f=!0;e=s}finally{try{u||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return r}}function _arrayWithHoles(n){if(Array.isArray(n))return n}function ownKeys(n,t){var r=Object.keys(n),i;return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function _objectSpread(n){for(var i,t=1;t<arguments.length;t++)i=arguments[t]!=null?arguments[t]:{},t%2?ownKeys(Object(i),!0).forEach(function(t){_defineProperty(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function asyncGeneratorStep(n,t,i,r,u,f,e){try{var o=n[f](e),s=o.value}catch(h){i(h);return}o.done?t(s):Promise.resolve(s).then(r,u)}function _asyncToGenerator(n){return function(){var t=this,i=arguments;return new Promise(function(r,u){function f(n){asyncGeneratorStep(e,r,u,f,o,"next",n)}function o(n){asyncGeneratorStep(e,r,u,f,o,"throw",n)}var e=n.apply(t,i);f(undefined)})}}function _defineProperty(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _getRequireWildcardCache(){if(typeof WeakMap!="function")return null;var n=new WeakMap;return _getRequireWildcardCache=function(){return n},n}function _interopRequireWildcard(n){var t,i,f,r,u;if(n&&n.__esModule)return n;if(n===null||_typeof(n)!=="object"&&typeof n!="function")return{"default":n};if(t=_getRequireWildcardCache(),t&&t.has(n))return t.get(n);i={};f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(u=f?Object.getOwnPropertyDescriptor(n,r):null,u&&(u.get||u.set)?Object.defineProperty(i,r,u):i[r]=n[r]);return i.default=n,t&&t.set(n,i),i}function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _classCallCheck(n,t){if(!_instanceof(n,t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}(function(){"use strict";function ho(n){return ut.get(n)}function gr(n){var t=ut.get(n);return(null==t?void 0:t.browserEventName)||n}function a(n,t){n.forEach(function(n){return ut.set(n,t)})}function fi(n){for(var t,r=[],i=0;i<n.length;i++)t=n[i],r.push({identifier:t.identifier,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,pageX:t.pageX,pageY:t.pageY});return r}function pt(n){return{detail:n.detail,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY,pageX:n.pageX,pageY:n.pageY,button:n.button,buttons:n.buttons,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey,type:n.type}}function oi(){if(!wt)throw new Error("Dynamic root components have not been enabled in this application.");return wt}function po(n,t,i){return wo(n,t.eventHandlerId,function(){return ru(n).invokeMethodAsync("DispatchEventAsync",t,i)})}function ru(n){var t=bt.get(n);if(!t)throw new Error("No interop methods are registered for renderer ".concat(n));return t}function su(n){var t={};return n.forEach(function(n){t[n]=!0}),t}function et(n,t){if(n.childNodes.length>0&&!t)throw new Error("New logical elements must start empty, or allowExistingContents must be true");return ft in n||(n[ft]=[]),n}function cu(n,t){var i=document.createComment("!");return ot(i,n,t),i}function ot(n,t,i){var r=n,u,f;if(_instanceof(n,Comment)&&v(r)&&v(r).length>0)throw new Error("Not implemented: inserting non-empty logical container");if(b(r))throw new Error("Not implemented: moving existing logical children");u=v(t);i<u.length?(f=u[i],f.parentNode.insertBefore(n,f),u.splice(i,0,r)):(hi(n,t),u.push(r));r[si]=t;ft in r||(r[ft]=[])}function st(n,t){var i=v(n).splice(t,1)[0],r,u;if(_instanceof(i,Comment)&&(r=v(i),r))for(;r.length>0;)st(i,0);u=i;u.parentNode.removeChild(u)}function b(n){return n[si]||null}function kt(n,t){return v(n)[t]}function lu(n){var t=au(n);return"http://www.w3.org/2000/svg"===t.namespaceURI&&"foreignObject"!==t.tagName}function v(n){return n[ft]}function go(n,t){var i=v(n);t.forEach(function(n){n.moveRangeStart=i[n.fromSiblingIndex];n.moveRangeEnd=yu(n.moveRangeStart)});t.forEach(function(t){var u=t.moveToBeforeMarker=document.createComment("marker"),r=i[t.toSiblingIndex+1];r?r.parentNode.insertBefore(u,r):hi(u,n)});t.forEach(function(n){for(var i=n.moveToBeforeMarker,r=i.parentNode,f=n.moveRangeStart,e=n.moveRangeEnd,t=f,u;t;){if(u=t.nextSibling,r.insertBefore(t,i),t===e)break;t=u}r.removeChild(i)});t.forEach(function(n){i[n.toSiblingIndex]=n.moveRangeStart})}function au(n){if(_instanceof(n,Element)||_instanceof(n,DocumentFragment))return n;if(_instanceof(n,Comment))return n.parentNode;throw new Error("Not a valid logical element");}function vu(n){var t=v(b(n));return t[Array.prototype.indexOf.call(t,n)+1]||null}function hi(n,t){if(_instanceof(t,Element)||_instanceof(t,DocumentFragment))t.appendChild(n);else{if(!_instanceof(t,Comment))throw new Error("Cannot append node because the parent is not a valid logical element. Parent: ".concat(t));var i=vu(t);i?i.parentNode.insertBefore(n,i):hi(n,b(t))}}function yu(n){var i,t;return _instanceof(n,Element)||_instanceof(n,DocumentFragment)?n:(i=vu(n),i)?i.previousSibling:(t=b(n),_instanceof(t,Element)||_instanceof(t,DocumentFragment)?t.lastChild:yu(t))}function ci(n){return"function"==typeof Symbol?Symbol():n}function pu(n){return"_bl_".concat(n)}function ts(n,t){var i=n.frameReader;switch(i.frameType(t)){case s.component:case s.element:case s.region:return i.subtreeLength(t)-1;default:return 0}}function ai(n){if(n.startsWith("on"))return n.substring(2);throw new Error("Attribute should be an event name, but doesn't start with 'on'. Value: '".concat(n,"'"));}function vi(n){return"select-multiple"===n.type}function tf(n,t){n.value=t||""}function rf(n,t){_instanceof(n,HTMLSelectElement)?vi(n)?function(n,t){t||(t=[]);for(var i=0;i<n.options.length;i++)n.options[i].selected=-1!==t.indexOf(n.options[i].value)}(n,t):tf(n,t):n.value=t}function ef(n,t){var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1,r=cf(n),i=_instanceof(t,Object)?t:{forceLoad:t,replaceHistoryEntry:u};!i.forceLoad&&af(r)?sf(r,!1,i.replaceHistoryEntry):function(n,t){if(location.href===n){var i=n+"?";history.replaceState(null,"",i);location.replace(n)}else t?location.replace(n):location.href=n}(n,i.replaceHistoryEntry)}function sf(n,t,i){pi=!0;i?history.replaceState(null,"",n):history.pushState(null,"",n);hf(t)}function hf(){return ki.apply(this,arguments)}function ki(){return ki=_asyncToGenerator(regeneratorRuntime.mark(function n(t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=wi,!n.t0){n.next=4;break}return n.next=4,wi(location.href,t);case 4:case"end":return n.stop()}},n)})),ki.apply(this,arguments)}function cf(n){return dt=dt||document.createElement("a"),dt.href=n,dt.href}function lf(n,t){return n?n.tagName===t?n:lf(n.parentElement,t):null}function af(n){var i=(t=document.baseURI).substr(0,t.lastIndexOf("/")+1),t;return n.startsWith(i)}function vf(n){return n?"visible"!==getComputedStyle(n).overflowY?n:vf(n.parentElement):null}function wf(n,t){var i=n._blazorFilesById[t];if(!i)throw new Error("There is no file with ID ".concat(t,". The file list may have changed."));return i}function bf(){return gi.apply(this,arguments)}function gi(){return gi=_asyncToGenerator(regeneratorRuntime.mark(function n(t,i,r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!_instanceof(t,Blob)){n.next=6;break}return n.next=3,function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,i,r){var u,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=n.slice(i,i+r),t.next=3,u.arrayBuffer();case 3:return f=t.sent,t.abrupt("return",new Uint8Array(f));case 5:case"end":return t.stop()}},t)}));return function(){return n.apply(this,arguments)}}()(t,i,r);case 3:n.t0=n.sent;n.next=7;break;case 6:n.t0=function(n,t,i){return new Uint8Array(n.buffer,n.byteOffset+t,i)}(t,i,r);case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}},n)})),gi.apply(this,arguments)}function lt(n,t){var i="";return rr(n)?(i="Binary data of length ".concat(n.byteLength),t&&(i+=". Content: '".concat(function(n){var i=new Uint8Array(n),t="";return i.forEach(function(n){t+="0x".concat(n<16?"0":"").concat(n.toString(16)," ")}),t.substr(0,t.length-1)}(n),"'"))):"string"==typeof n&&(i="String data of length ".concat(n.length),t&&(i+=". Content: '".concat(n,"'"))),i}function rr(n){return n&&"undefined"!=typeof ArrayBuffer&&(_instanceof(n,ArrayBuffer)||n.constructor&&"ArrayBuffer"===n.constructor.name)}function df(){return ur.apply(this,arguments)}function ur(){return ur=_asyncToGenerator(regeneratorRuntime.mark(function t(i,r,u,f,e,o,s){var h,c,a,l,v,y,p,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h={},!e){t.next=6;break}return t.next=4,e();case 4:c=t.sent;c&&(h={Authorization:"Bearer ".concat(c)});case 6:return a=vt(),l=_slicedToArray(a,2),v=l[0],y=l[1],h[v]=y,i.log(n.Trace,"(".concat(r," transport) sending data. ").concat(lt(o,s.logMessageContent),".")),p=rr(o)?"arraybuffer":"text",t.next=11,u.post(f,{content:o,headers:_objectSpread({},h,{},s.headers),responseType:p,timeout:s.timeout,withCredentials:s.withCredentials});case 11:w=t.sent;i.log(n.Trace,"(".concat(r," transport) request complete. Response status: ").concat(w.statusCode,"."));case 13:case"end":return t.stop()}},t)})),ur.apply(this,arguments)}function vt(){var n="X-SignalR-User-Agent";return y.isNode&&(n="User-Agent"),[n,cs("6.0.2",ls(),y.isNode?"NodeJS":"Browser",as())]}function cs(n,t,i,r){var u="Microsoft SignalR/",f=n.split(".");return u+="".concat(f[0],".").concat(f[1]),u+=" (".concat(n,"; "),u+=t&&""!==t?"".concat(t,"; "):"Unknown OS; ",u+="".concat(i),u+=r?"; ".concat(r):"; Unknown Runtime Version",u+=")",u}function ls(){if(!y.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function as(){if(y.isNode)return process.versions.node}function ne(n){return n.stack?n.stack:n.message?n.message:"".concat(n)}function ie(n,t){var i;switch(t){case"arraybuffer":i=n.arrayBuffer();break;case"text":i=n.text();break;case"blob":case"document":case"json":throw new Error("".concat(t," is not supported."));default:i=n.text()}return i}function ee(n,t,i){var r=Math.floor(i/4294967296),u=i;n.setUint32(t,r);n.setUint32(t+4,u)}function oe(n,t){return 4294967296*n.getInt32(t)+n.getUint32(t+4)}function se(n){for(var t,u,f=n.length,r=0,i=0;i<f;)t=n.charCodeAt(i++),0!=(4294967168&t)?0==(4294965248&t)?r+=2:(t>=55296&&t<=56319&&i<f&&(u=n.charCodeAt(i),56320==(64512&u)&&(++i,t=((1023&t)<<10)+(1023&u)+65536)),r+=0==(4294901760&t)?3:4):r++;return r}function he(n,t,i){for(var u,o,h,e,f=t,c=f+i,r=[],s="";f<c;)u=n[f++],0==(128&u)?r.push(u):192==(224&u)?(o=63&n[f++],r.push((31&u)<<6|o)):224==(240&u)?(o=63&n[f++],h=63&n[f++],r.push((31&u)<<12|o<<6|h)):240==(248&u)?(e=(7&u)<<18|(o=63&n[f++])<<12|(h=63&n[f++])<<6|63&n[f++],e>65535&&(e-=65536,r.push(e>>>10&1023|55296),e=56320|1023&e),r.push(e)):r.push(u),r.length>=4096&&(s+=String.fromCharCode.apply(String,r),r.length=0);return r.length>0&&(s+=String.fromCharCode.apply(String,r)),s}function ii(n){return _instanceof(n,Uint8Array)?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):_instanceof(n,ArrayBuffer)?new Uint8Array(n):Uint8Array.from(n)}function er(n){return(n<0?"-":"")+"0x"+Math.abs(n).toString(16).padStart(2,"0")}function pe(){return cr.apply(this,arguments)}function cr(){return cr=_asyncToGenerator(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=document.querySelector("#blazor-error-ui");t&&(t.style.display="block");ye||(ye=!0,document.querySelectorAll("#blazor-error-ui .reload").forEach(function(n){n.onclick=function(n){location.reload();n.preventDefault()}}),document.querySelectorAll("#blazor-error-ui .dismiss").forEach(function(n){n.onclick=function(n){var t=document.querySelector("#blazor-error-ui");t&&(t.style.display="none");n.preventDefault()}}));case 2:case"end":return n.stop()}},n)})),cr.apply(this,arguments)}function u(n,t){return n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24}function we(n,t){return n[t]+(n[t+1]<<8)+(n[t+2]<<16)+(n[t+3]<<24>>>0)}function be(n,t){var i=we(n,t+4);if(i>kh)throw new Error("Cannot read uint64 with high order part ".concat(i,", because the result would exceed Number.MAX_SAFE_INTEGER."));return i*bh+we(n,t)}function to(n){var i,r,t,u;if(n.nodeType===Node.COMMENT_NODE){var o=n.textContent||"",f=no.exec(o),e=f&&f[1];return e&&(null===(i=n.parentNode)||void 0===i||i.removeChild(n)),e}if(n.hasChildNodes())for(r=n.childNodes,t=0;t<r.length;t++)if(u=to(r[t]),u)return u}function io(n,t){var r,i,f,e,u,o;if(!n.hasChildNodes())return[];for(r=[],i=new cc(n.childNodes);i.next()&&i.currentElement;)if(f=sc(i,t),f)r.push(f);else for(e=io(i.currentElement,t),u=0;u<e.length;u++)o=e[u],r.push(o);return r}function sc(n,t){var i=n.currentElement,r,u,f;if(i&&i.nodeType===Node.COMMENT_NODE&&i.textContent){if(r=yr.exec(i.textContent),u=r&&r[1],!u)return;try{f=function(n){var i=JSON.parse(n),t=i.type;if("server"!==t&&"webassembly"!==t)throw new Error("Invalid component type '".concat(t,"'."));return i}(u);switch(t){case"webassembly":return function(n,t,i){var f=n.type,e=n.assembly,o=n.typeName,r=n.parameterDefinitions,u=n.parameterValues,s=n.prerenderId,h;if("webassembly"===f){if(!e)throw new Error("assembly must be defined when using a descriptor.");if(!o)throw new Error("typeName must be defined when using a descriptor.");if(s){if(h=ro(s,i),!h)throw new Error("Could not find an end component comment for '".concat(t,"'"));return{type:f,assembly:e,typeName:o,parameterDefinitions:r&&atob(r),parameterValues:u&&atob(u),start:t,prerenderId:s,end:h}}return{type:f,assembly:e,typeName:o,parameterDefinitions:r&&atob(r),parameterValues:u&&atob(u),start:t}}}(f,i,n);case"server":return function(n,t,i){var u=n.type,f=n.descriptor,r=n.sequence,e=n.prerenderId,o;if("server"===u){if(!f)throw new Error("descriptor must be defined when using a descriptor.");if(void 0===r)throw new Error("sequence must be defined when using a descriptor.");if(!Number.isInteger(r))throw new Error("Error parsing the sequence '".concat(r,"' for component '").concat(JSON.stringify(n),"'"));if(e){if(o=ro(e,i),!o)throw new Error("Could not find an end component comment for '".concat(t,"'"));return{type:u,sequence:r,descriptor:f,start:t,prerenderId:e,end:o}}return{type:u,sequence:r,descriptor:f,start:t}}}(f,i,n)}}catch(n){throw new Error("Found malformed component comment at ".concat(i.textContent));}}}function ro(n,t){for(var i,r,u;t.next()&&t.currentElement;)if((i=t.currentElement,i.nodeType===Node.COMMENT_NODE)&&i.textContent&&(r=yr.exec(i.textContent),u=r&&r[1],u))return hc(u,n),i}function hc(n,t){var r=JSON.parse(n),i;if(1!==Object.keys(r).length)throw new Error("Invalid end of component comment: '".concat(n,"'"));if(i=r.prerenderId,!i)throw new Error("End of component comment must have a value for the prerendered property: '".concat(n,"'"));if(i!==t)throw new Error("End of component comment prerendered property must match the start comment prerender id: '".concat(t,"', '").concat(i,"'"));}function fo(){return br.apply(this,arguments)}function br(){return br=_asyncToGenerator(regeneratorRuntime.mark(function n(t){var r,s,u,c,l,f,a,e,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!uo){n.next=2;break}throw new Error("Blazor has already started.");case 2:return uo=!0,r=function(n){var t=_objectSpread({},de,{},n);return n&&n.reconnectionOptions&&(t.reconnectionOptions=_objectSpread({},de.reconnectionOptions,{},n.reconnectionOptions)),t}(t),n.next=6,function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var r,u,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("_blazor/initializers",{method:"GET",credentials:"include",cache:"no-cache"});case 2:return r=t.sent,t.next=5,r.json();case 5:return u=t.sent,i=new ac,t.next=9,i.importInitializersAsync(u,[n]);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t)}));return function(){return n.apply(this,arguments)}}()(r);case 6:return s=n.sent,u=new fc(r.logLevel),h.reconnect=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!wr){t.next=2;break}return t.abrupt("return",!1);case 2:if(t.t0=n,t.t0){t.next=7;break}return t.next=6,eo(r,u,f);case 6:t.t0=t.sent;case 7:return e=t.t0,t.next=10,f.reconnect(e);case 10:if(!t.sent){t.next=14;break}t.t1=(r.reconnectionHandler.onConnectionUp(),!0);t.next=15;break;case 14:t.t1=(u.log(i.Information,"Reconnection attempt to the circuit was rejected by the server. This may indicate that the associated state is no longer available on the server."),!1);case 15:return t.abrupt("return",t.t1);case 16:case"end":return t.stop()}},t)}));return function(){return n.apply(this,arguments)}}(),h.defaultReconnectionHandler=new ge(u),r.reconnectionHandler=r.reconnectionHandler||h.defaultReconnectionHandler,u.log(i.Information,"Starting up Blazor server-side application."),c=function(n){return function(n){for(var t,f,r=io(n,"server"),u=[],i=0;i<r.length;i++)t=r[i],f=new lc(t.type,t.start,t.end,t.sequence,t.descriptor),u.push(f);return u.sort(function(n,t){return n.sequence-t.sequence})}(n)}(document),l=to(document),f=new ec(c,l||""),n.next=14,eo(r,u,f);case 14:return a=n.sent,n.next=17,f.startCircuit(a);case 17:if(n.sent){n.next=19;break}return n.abrupt("return",void u.log(i.Error,"Failed to start the circuit."));case 19:e=!1;o=function(){if(!e){var n=new FormData,t=f.circuitId;n.append("circuitId",t);e=navigator.sendBeacon("_blazor/disconnect",n)}};h.disconnect=o;window.addEventListener("unload",o,{capture:!1,once:!0});u.log(i.Information,"Blazor server-side application started.");s.invokeAfterStartedCallbacks(h);case 22:case"end":return n.stop()}},n)})),br.apply(this,arguments)}function eo(){return kr.apply(this,arguments)}function kr(){return kr=_asyncToGenerator(regeneratorRuntime.mark(function n(t,r,u){var o,s,l,a,e,v;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=new ph,l.name="blazorpack",a=(new ih).withUrl("_blazor").withHubProtocol(l),t.configureSignalR(a),e=a.build(),h._internal.navigationManager.listenForNavigationEvents(function(n,t){return e.send("OnLocationChanged",n,t)}),e.on("JS.AttachComponent",function(n,t){return function(n,t,i){var r=yi[0];r||(r=yi[0]=new ns(0));r.attachRootComponentToLogicalElement(i,t,!1)}(0,u.resolveElement(t),n)}),e.on("JS.BeginInvokeJS",c.jsCallDispatcher.beginInvokeJSFromDotNet),e.on("JS.EndInvokeDotNet",c.jsCallDispatcher.endInvokeDotNetFromJS),e.on("JS.ReceiveByteArray",c.jsCallDispatcher.receiveByteArray),e.on("JS.BeginTransmitStream",function(n){var t=new ReadableStream({start:function(t){e.stream("SendDotNetStreamToJS",n).subscribe({next:function(n){return t.enqueue(n)},complete:function(){return t.close()},error:function(n){return t.error(n)}})}});c.jsCallDispatcher.supplyDotNetStream(n,t)}),v=ke.getOrCreate(r),e.on("JS.RenderBatch",function(n,t){r.log(i.Debug,"Received render batch with id ".concat(n," and ").concat(t.byteLength," bytes."));v.processBatch(n,t,e)}),e.onclose(function(n){return!wr&&t.reconnectionHandler.onConnectionDown(t.reconnectionOptions,n)}),e.on("JS.Error",function(n){wr=!0;oo(e,n,r);pe()}),h._internal.forceCloseConnection=function(){return e.stop()},h._internal.sendJSDataStream=function(n,t,i){return function(n,t,i,r){setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function u(){var e,s,h,f,o,c,l,a,v;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=5;s=(new Date).valueOf();u.prev=1;h=_instanceof(t,Blob)?t.size:t.byteLength;f=0;o=0;case 4:if(!(f<h)){u.next=23;break}return c=Math.min(r,h-f),u.next=8,bf(t,f,c);case 8:if(l=u.sent,!(e--,e>1)){u.next=14;break}return u.next=12,n.send("ReceiveJSDataChunk",i,o,l,null);case 12:u.next=20;break;case 14:return u.next=16,n.invoke("ReceiveJSDataChunk",i,o,l,null);case 16:if(u.sent){u.next=18;break}return u.abrupt("break",23);case 18:a=(new Date).valueOf();v=a-s;s=a;e=Math.max(1,Math.round(500/Math.max(1,v)));case 20:f+=c;o++;case 21:u.next=4;break;case 23:u.next=29;break;case 25:return u.prev=25,u.t0=u["catch"](1),u.next=29,n.send("ReceiveJSDataChunk",i,-1,null,u.t0.toString());case 29:case"end":return u.stop()}},u,null,[[1,25]])})),0)}(e,n,t,i)},n.prev=8,n.next=11,e.start();case 11:n.next=18;break;case 13:if(n.prev=13,n.t0=n["catch"](8),!(oo(e,n.t0,r),"FailedToNegotiateWithServerError"===n.t0.errorType)){n.next=17;break}throw n.t0;case 17:pe();n.t0.innerErrors&&(n.t0.innerErrors.some(function(n){return"UnsupportedTransportError"===n.errorType&&n.transport===f.WebSockets})?r.log(i.Error,"Unable to connect, please ensure you are using an updated browser that supports WebSockets."):n.t0.innerErrors.some(function(n){return"FailedToStartTransportError"===n.errorType&&n.transport===f.WebSockets})?r.log(i.Error,"Unable to connect, please ensure WebSockets are available. A VPN or proxy may be blocking the connection."):n.t0.innerErrors.some(function(n){return"DisabledTransportError"===n.errorType&&n.transport===f.LongPolling})&&r.log(i.Error,"Unable to initiate a SignalR connection to the server. This might be because the server is not configured to support WebSockets. For additional details, visit https://aka.ms/blazor-server-websockets-error."));case 18:return n.abrupt("return",((null===(s=null===(o=e.connection)||void 0===o?void 0:o.features)||void 0===s?void 0:s.inherentKeepAlive)&&r.log(i.Warning,"Failed to connect via WebSockets, using the Long Polling fallback transport. This may be due to a VPN or proxy blocking the connection. To troubleshoot this, visit https://aka.ms/blazor-server-using-fallback-long-polling."),c.attachDispatcher({beginInvokeDotNetFromJS:function(n,t,i,r,u){e.send("BeginInvokeDotNetFromJS",n?n.toString():null,t,i,r||0,u)},endInvokeJSFromDotNet:function(n,t,i){e.send("EndInvokeJSFromDotNet",n,t,i)},sendByteArray:function(n,t){e.send("ReceiveByteArray",n,t)}}),e));case 19:case"end":return n.stop()}},n,null,[[8,13]])})),kr.apply(this,arguments)}function oo(n,t,r){r.log(i.Error,t);n&&n.stop()}var c,l,s,ri={},bt,tu,iu,eu,ou,dt,yf,pf,ht,h,k,e,y,gf,at,te,ue,fe,yt,le,ke,ar,ge,vr,no,yr;ri.g=function(){if("object"==(typeof globalThis=="undefined"?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==(typeof window=="undefined"?"undefined":_typeof(window)))return window}}(),function(n){function nt(n){b.push(n)}function y(n){if(n&&"object"==_typeof(n)){i[v]=new g(n);var t=_defineProperty({},k,v);return v++,t}throw new Error("Cannot create a JSObjectReference from the value '".concat(n,"'."));}function tt(n){var t=-1,i,r;if(_instanceof(n,ArrayBuffer)&&(n=new Uint8Array(n)),_instanceof(n,Blob))t=n.size;else{if(!_instanceof(n.buffer,ArrayBuffer))throw new Error("Supplied value is not a typed array or blob.");if(void 0===n.byteLength)throw new Error("Cannot create a JSStreamReference from the value '".concat(n,"' as it doesn't have a byteLength."));t=n.byteLength}i={__jsStreamReferenceLength:t};try{r=y(n);i.__jsObjectId=r.__jsObjectId}catch(u){throw new Error("Cannot create a JSStreamReference from the value '".concat(n,"'."));}return i}function o(n){return n?JSON.parse(n,function(n,t){return b.reduce(function(t,i){return i(n,t)},t)}):null}function it(n,t,i,r){var f=s(),e,u;if(f.invokeDotNetFromJS)return e=l(r),u=f.invokeDotNetFromJS(n,t,i,e),u?o(u):null;throw new Error("The current dispatcher does not support synchronous calls from JS to .NET. Use invokeMethodAsync instead.");}function p(n,t,i,r){var u,e,o;if(n&&i)throw new Error("For instance method calls, assemblyName should be null. Received '".concat(n,"'."));u=ot++;e=new Promise(function(n,t){f[u]={resolve:n,reject:t}});try{o=l(r);s().beginInvokeDotNetFromJS(u,n,t,i,o)}catch(n){rt(u,!1,n)}return e}function s(){if(null!==e)return e;throw new Error("No .NET call dispatcher has been set.");}function rt(n,t,i){if(!f.hasOwnProperty(n))throw new Error("There is no pending async call with ID ".concat(n,"."));var r=f[n];delete f[n];t?r.resolve(i):r.reject(i)}function st(n){return _instanceof(n,Error)?"".concat(n.message,"\n").concat(n.stack):n?n.toString():"null"}function w(n,t){var r=i[t];if(r)return r.findFunction(n);throw new Error("JS object instance with ID ".concat(t," does not exist (has it been disposed?)."));}function ut(n){delete i[n]}function et(n,t){switch(t){case r.Default:return n;case r.JSObjectReference:return y(n);case r.JSStreamReference:return tt(n);case r.JSVoidResult:return null;default:throw new Error("Invalid JS call result type '".concat(t,"'."));}}function l(n){return u=0,JSON.stringify(n,ht)}function ht(n,t){if(_instanceof(t,h))return t.serializeAsArg();if(_instanceof(t,Uint8Array)){e.sendByteArray(u,t);var i=_defineProperty({},d,u);return u++,i}return t}var h,ft,c,u;window.DotNet=n;var b=[],a=new Map,t=new Map,k="__jsObjectId",d="__byte[]",g=function(){function n(t){_classCallCheck(this,n);this._jsObject=t;this._cachedFunctions=new Map}return _createClass(n,[{key:"findFunction",value:function(n){var i=this._cachedFunctions.get(n),r,t;if(i)return i;if(t=this._jsObject,n.split(".").forEach(function(i){if(!(i in t))throw new Error("Could not find '".concat(n,"' ('").concat(i,"' was undefined)."));r=t;t=t[i]}),_instanceof(t,Function))return t=t.bind(r),this._cachedFunctions.set(n,t),t;throw new Error("The value '".concat(n,"' is not a function."));}},{key:"getWrappedObject",value:function(){return this._jsObject}}]),n}(),f={},i={0:new g(window)};i[0]._cachedFunctions.set("import",function(n){return"string"==typeof n&&n.startsWith("./")&&(n=document.baseURI+n.substr(2)),Promise.resolve().then(function(){return _interopRequireWildcard("".concat(n))})});var r,ot=1,v=1,e=null;n.attachDispatcher=function(n){e=n};n.attachReviver=nt;n.invokeMethod=function(n,t){for(var r=arguments.length,u=new Array(r>2?r-2:0),i=2;i<r;i++)u[i-2]=arguments[i];return it(n,t,null,u)};n.invokeMethodAsync=function(n,t){for(var r=arguments.length,u=new Array(r>2?r-2:0),i=2;i<r;i++)u[i-2]=arguments[i];return p(n,t,null,u)};n.createJSObjectReference=y;n.createJSStreamReference=tt;n.disposeJSObjectReference=function(n){var t=n&&n.__jsObjectId;"number"==typeof t&&ut(t)},function(n){n[n.Default=0]="Default";n[n.JSObjectReference=1]="JSObjectReference";n[n.JSStreamReference=2]="JSStreamReference";n[n.JSVoidResult=3]="JSVoidResult"}(r=n.JSCallResultType||(n.JSCallResultType={}));n.jsCallDispatcher={findJSFunction:w,disposeJSObjectReferenceById:ut,invokeJSFromDotNet:function(n,t,i,r){var u=et(w(n,r).apply(null,o(t)),i);return null==u?null:l(u)},beginInvokeJSFromDotNet:function(n,t,i,r,u){var f=new Promise(function(n){n(w(t,u).apply(null,o(i)))});n&&f.then(function(t){return s().endInvokeJSFromDotNet(n,!0,l([n,!0,et(t,r)]))},function(t){return s().endInvokeJSFromDotNet(n,!1,JSON.stringify([n,!1,st(t)]))})},endInvokeDotNetFromJS:function(n,t,i){var r=t?o(i):new Error(i);rt(parseInt(n),t,r)},receiveByteArray:function(n,t){a.set(n,t)},supplyDotNetStream:function(n,i){var u,r;t.has(n)?(u=t.get(n),t.delete(n),u.resolve(i)):(r=new c,r.resolve(i),t.set(n,r))}};h=function(){function n(t){_classCallCheck(this,n);this._id=t}return _createClass(n,[{key:"invokeMethod",value:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return it(null,n,this._id,r)}},{key:"invokeMethodAsync",value:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return p(null,n,this._id,r)}},{key:"dispose",value:function(){p(null,"__Dispose",this._id,null).catch(function(n){return console.error(n)})}},{key:"serializeAsArg",value:function(){return{__dotNetObject:this._id}}}]),n}();n.DotNetObject=h;nt(function(n,t){var u,f,r,e;if(t&&"object"==_typeof(t)){if(t.hasOwnProperty("__dotNetObject"))return new h(t.__dotNetObject);if(t.hasOwnProperty(k)){if(u=t.__jsObjectId,f=i[u],f)return f.getWrappedObject();throw new Error("JS object instance with Id '".concat(u,"' does not exist. It may have been disposed."));}if(t.hasOwnProperty(d)){if(r=t["__byte[]"],e=a.get(r),void 0===e)throw new Error("Byte array index '".concat(r,"' does not exist."));return a.delete(r),e}if(t.hasOwnProperty("__dotNetStream"))return new ft(t.__dotNetStream)}return t});ft=function(){function n(i){var r,u;_classCallCheck(this,n);t.has(i)?(this._streamPromise=null===(r=t.get(i))||void 0===r?void 0:r.streamPromise,t.delete(i)):(u=new c,t.set(i,u),this._streamPromise=u.streamPromise)}return _createClass(n,[{key:"stream",value:function(){return this._streamPromise}},{key:"arrayBuffer",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Response,n.next=3,this.stream();case 3:return n.t1=n.sent,n.abrupt("return",new n.t0(n.t1).arrayBuffer());case 5:case"end":return n.stop()}},t,this)}));return i}()}]),n}();c=function c(){var n=this;_classCallCheck(this,c);this.streamPromise=new Promise(function(t,i){n.resolve=t;n.reject=i})};u=0}(c||(c={})),function(n){n[n.prependFrame=1]="prependFrame";n[n.removeFrame=2]="removeFrame";n[n.setAttribute=3]="setAttribute";n[n.removeAttribute=4]="removeAttribute";n[n.updateText=5]="updateText";n[n.stepIn=6]="stepIn";n[n.stepOut=7]="stepOut";n[n.updateMarkup=8]="updateMarkup";n[n.permutationListEntry=9]="permutationListEntry";n[n.permutationListEnd=10]="permutationListEnd"}(l||(l={})),function(n){n[n.element=1]="element";n[n.text=2]="text";n[n.attribute=3]="attribute";n[n.component=4]="component";n[n.region=5]="region";n[n.elementReferenceCapture=6]="elementReferenceCapture";n[n.markup=8]="markup"}(s||(s={}));var so=function(){function n(t,i){_classCallCheck(this,n);this.componentId=t;this.fieldValue=i}return _createClass(n,null,[{key:"fromEvent",value:function(t,i){var u=i.target,r;return _instanceof(u,Element)&&(r=function(n){return _instanceof(n,HTMLInputElement)?n.type&&"checkbox"===n.type.toLowerCase()?{value:n.checked}:{value:n.value}:_instanceof(n,HTMLSelectElement)||_instanceof(n,HTMLTextAreaElement)?{value:n.value}:null}(u),r)?new n(t,r.value):null}}]),n}(),ut=new Map,ui=new Map,dr=[];a(["input","change"],{createEventArgs:function(n){var t=n.target,i;return function(n){return-1!==co.indexOf(n.getAttribute("type"))}(t)?{value:function(n){var t=n.value,i=n.type;switch(i){case"date":case"month":return t;case"datetime-local":return 16===t.length?t+":00":t;case"time":return 5===t.length?t+":00":t;case"week":return t}throw new Error("Invalid element type '".concat(i,"'."));}(t)}:function(n){return _instanceof(n,HTMLSelectElement)&&"select-multiple"===n.type}(t)?(i=t,{value:Array.from(i.options).filter(function(n){return n.selected}).map(function(n){return n.value})}):{value:function(n){return!!n&&"INPUT"===n.tagName&&"checkbox"===n.getAttribute("type")}(t)?!!t.checked:t.value}}});a(["copy","cut","paste"],{createEventArgs:function(n){return{type:n.type}}});a(["drag","dragend","dragenter","dragleave","dragover","dragstart","drop"],{createEventArgs:function(n){return _objectSpread({},pt(t=n),{dataTransfer:t.dataTransfer?{dropEffect:t.dataTransfer.dropEffect,effectAllowed:t.dataTransfer.effectAllowed,files:Array.from(t.dataTransfer.files).map(function(n){return n.name}),items:Array.from(t.dataTransfer.items).map(function(n){return{kind:n.kind,type:n.type}}),types:t.dataTransfer.types}:null});var t}});a(["focus","blur","focusin","focusout"],{createEventArgs:function(n){return{type:n.type}}});a(["keydown","keyup","keypress"],{createEventArgs:function(n){return{key:(t=n).key,code:t.code,location:t.location,repeat:t.repeat,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,type:t.type};var t}});a(["contextmenu","click","mouseover","mouseout","mousemove","mousedown","mouseup","dblclick"],{createEventArgs:function(n){return pt(n)}});a(["error"],{createEventArgs:function(n){return{message:(t=n).message,filename:t.filename,lineno:t.lineno,colno:t.colno,type:t.type};var t}});a(["loadstart","timeout","abort","load","loadend","progress"],{createEventArgs:function(n){return{lengthComputable:(t=n).lengthComputable,loaded:t.loaded,total:t.total,type:t.type};var t}});a(["touchcancel","touchend","touchmove","touchenter","touchleave","touchstart"],{createEventArgs:function(n){return{detail:(t=n).detail,touches:fi(t.touches),targetTouches:fi(t.targetTouches),changedTouches:fi(t.changedTouches),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,type:t.type};var t}});a(["gotpointercapture","lostpointercapture","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup"],{createEventArgs:function(n){return _objectSpread({},pt(t=n),{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tiltX:t.tiltX,tiltY:t.tiltY,pointerType:t.pointerType,isPrimary:t.isPrimary});var t}});a(["wheel","mousewheel"],{createEventArgs:function(n){return _objectSpread({},pt(t=n),{deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,deltaMode:t.deltaMode});var t}});a(["toggle"],{createEventArgs:function(){return{}}});var co=["date","datetime-local","month","time","week"],ei=new Map,wt,nu,lo=0,ao={add:function(n,t,i){return _asyncToGenerator(regeneratorRuntime.mark(function r(){var u,e,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=2;break}throw new Error("initialParameters must be an object, even if empty.");case 2:return u="__bl-dynamic-root:"+(++lo).toString(),ei.set(u,n),r.next=6,oi().invokeMethodAsync("AddRootComponent",t,u);case 6:return e=r.sent,f=new yo(e,nu[t]),r.next=10,f.setParameters(i);case 10:return r.abrupt("return",f);case 11:case"end":return r.stop()}},r)}))()}},vo=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"invoke",value:function(n){return this._callback(n)}},{key:"setCallback",value:function(n){this._selfJSObjectReference||(this._selfJSObjectReference=c.createJSObjectReference(this));this._callback=n}},{key:"getJSObjectReference",value:function(){return this._selfJSObjectReference}},{key:"dispose",value:function(){this._selfJSObjectReference&&c.disposeJSObjectReference(this._selfJSObjectReference)}}]),n}(),yo=function(){function n(t,i){var r,s,f;_classCallCheck(this,n);this._jsEventCallbackWrappers=new Map;this._componentId=t;var u=!0,e=!1,o=undefined;try{for(r=i[Symbol.iterator]();!(u=(s=r.next()).done);u=!0)f=s.value,"eventcallback"===f.type&&this._jsEventCallbackWrappers.set(f.name.toLowerCase(),new vo)}catch(h){e=!0;o=h}finally{try{u||r.return==null||r.return()}finally{if(e)throw o;}}}return _createClass(n,[{key:"setParameters",value:function(n){for(var t={},e=Object.entries(n||{}),h=e.length,i=0,o=e;i<o.length;i++){var s=_slicedToArray(o[i],2),r=s[0],u=s[1],f=this._jsEventCallbackWrappers.get(r.toLowerCase());f&&u?(f.setCallback(u),t[r]=f.getJSObjectReference()):t[r]=u}return oi().invokeMethodAsync("SetRootComponentParameters",this._componentId,h,t)}},{key:"dispose",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,r,u,i,f,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!==this._componentId)){t.next=23;break}return t.next=3,oi().invokeMethodAsync("RemoveRootComponent",this._componentId);case 3:for(this._componentId=null,n=!0,r=!1,u=undefined,t.prev=7,i=this._jsEventCallbackWrappers.values()[Symbol.iterator]();!(n=(f=i.next()).done);n=!0)e=f.value,e.dispose();t.next=15;break;case 11:t.prev=11;t.t0=t["catch"](7);r=!0;u=t.t0;case 15:t.prev=15;t.prev=16;n||i.return==null||i.return();case 18:if(t.prev=18,!r){t.next=21;break}throw u;case 21:return t.finish(18);case 22:return t.finish(15);case 23:case"end":return t.stop()}},t,this,[[7,11,15,23],[16,,18,22]])}));return i}()}]),n}();bt=new Map;iu=new Promise(function(n){tu=n});var wo=function(n,t,i){return i()},uu=su(["abort","blur","canplay","canplaythrough","change","cuechange","durationchange","emptied","ended","error","focus","load","loadeddata","loadedmetadata","loadend","loadstart","mouseenter","mouseleave","pause","play","playing","progress","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","toggle","unload","volumechange","waiting","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument"]),bo={submit:!0},ko=su(["click","dblclick","mousedown","mousemove","mouseup"]),fu=function(){function n(t){_classCallCheck(this,n);this.browserRendererId=t;this.afterClickCallbacks=[];var i=++n.nextEventDelegatorId;this.eventsCollectionKey="_blazorEvents_".concat(i);this.eventInfoStore=new eu(this.onGlobalEvent.bind(this))}return _createClass(n,[{key:"setListener",value:function(n,t,i,r){var f=this.getEventHandlerInfosForElement(n,!0),e=f.getHandler(t),u;e?this.eventInfoStore.update(e.eventHandlerId,i):(u={element:n,eventName:t,eventHandlerId:i,renderingComponentId:r},this.eventInfoStore.add(u),f.setHandler(t,u))}},{key:"getHandler",value:function(n){return this.eventInfoStore.get(n)}},{key:"removeListener",value:function(n){var t=this.eventInfoStore.remove(n),r,i;t&&(r=t.element,i=this.getEventHandlerInfosForElement(r,!1),i&&i.removeHandler(t.eventName))}},{key:"notifyAfterClick",value:function(n){this.afterClickCallbacks.push(n);this.eventInfoStore.addGlobalListener("click")}},{key:"setStopPropagation",value:function(n,t,i){this.getEventHandlerInfosForElement(n,!0).stopPropagation(t,i)}},{key:"setPreventDefault",value:function(n,t,i){this.getEventHandlerInfosForElement(n,!0).preventDefault(t,i)}},{key:"onGlobalEvent",value:function(n){var r=this,t,i;_instanceof(n.target,Element)&&(this.dispatchGlobalEventToAllElements(n.type,n),t=(i=n.type,ui.get(i)),t&&t.forEach(function(t){return r.dispatchGlobalEventToAllElements(t,n)}),"click"===n.type&&this.afterClickCallbacks.forEach(function(t){return t(n)}))}},{key:"dispatchGlobalEventToAllElements",value:function(n,t){for(var s=t.composedPath(),e=s.shift(),h=null,c=!1,v=uu.hasOwnProperty(n),l=!1,o,r,u,f,i,a;e;)o=e,r=this.getEventHandlerInfosForElement(o,!1),r&&(u=r.getHandler(n),!u||(i=o,a=t.type,(_instanceof(i,HTMLButtonElement)||_instanceof(i,HTMLInputElement)||_instanceof(i,HTMLTextAreaElement)||_instanceof(i,HTMLSelectElement))&&ko.hasOwnProperty(a)&&i.disabled)||(c||(f=ho(n),h=(null==f?void 0:f.createEventArgs)?f.createEventArgs(t):{},c=!0),bo.hasOwnProperty(t.type)&&t.preventDefault(),po(this.browserRendererId,{eventHandlerId:u.eventHandlerId,eventName:n,eventFieldInfo:so.fromEvent(u.renderingComponentId,t)},h)),r.stopPropagation(n)&&(l=!0),r.preventDefault(n)&&t.preventDefault()),e=v||l?void 0:s.shift()}},{key:"getEventHandlerInfosForElement",value:function(n,t){return n.hasOwnProperty(this.eventsCollectionKey)?n[this.eventsCollectionKey]:t?n[this.eventsCollectionKey]=new ou:null}}]),n}();fu.nextEventDelegatorId=0;eu=function(){function n(t){_classCallCheck(this,n);this.globalListener=t;this.infosByEventHandlerId={};this.countByEventName={};dr.push(this.handleEventNameAliasAdded.bind(this))}return _createClass(n,[{key:"add",value:function(n){if(this.infosByEventHandlerId[n.eventHandlerId])throw new Error("Event ".concat(n.eventHandlerId," is already tracked"));this.infosByEventHandlerId[n.eventHandlerId]=n;this.addGlobalListener(n.eventName)}},{key:"get",value:function(n){return this.infosByEventHandlerId[n]}},{key:"addGlobalListener",value:function(n){if(n=gr(n),this.countByEventName.hasOwnProperty(n))this.countByEventName[n]++;else{this.countByEventName[n]=1;var t=uu.hasOwnProperty(n);document.addEventListener(n,this.globalListener,t)}}},{key:"update",value:function(n,t){if(this.infosByEventHandlerId.hasOwnProperty(t))throw new Error("Event ".concat(t," is already tracked"));var i=this.infosByEventHandlerId[n];delete this.infosByEventHandlerId[n];i.eventHandlerId=t;this.infosByEventHandlerId[t]=i}},{key:"remove",value:function(n){var i=this.infosByEventHandlerId[n],t;return i&&(delete this.infosByEventHandlerId[n],t=gr(i.eventName),0==--this.countByEventName[t]&&(delete this.countByEventName[t],document.removeEventListener(t,this.globalListener))),i}},{key:"handleEventNameAliasAdded",value:function(n,t){if(this.countByEventName.hasOwnProperty(n)){var i=this.countByEventName[n];delete this.countByEventName[n];document.removeEventListener(n,this.globalListener);this.addGlobalListener(t);this.countByEventName[t]+=i-1}}}]),n}();ou=function(){function n(){_classCallCheck(this,n);this.handlers={};this.preventDefaultFlags=null;this.stopPropagationFlags=null}return _createClass(n,[{key:"getHandler",value:function(n){return this.handlers.hasOwnProperty(n)?this.handlers[n]:null}},{key:"setHandler",value:function(n,t){this.handlers[n]=t}},{key:"removeHandler",value:function(n){delete this.handlers[n]}},{key:"preventDefault",value:function(n,t){return void 0!==t&&(this.preventDefaultFlags=this.preventDefaultFlags||{},this.preventDefaultFlags[n]=t),!!this.preventDefaultFlags&&this.preventDefaultFlags[n]}},{key:"stopPropagation",value:function(n,t){return void 0!==t&&(this.stopPropagationFlags=this.stopPropagationFlags||{},this.stopPropagationFlags[n]=t),!!this.stopPropagationFlags&&this.stopPropagationFlags[n]}}]),n}();var ft=ci("_blazorLogicalChildren"),si=ci("_blazorLogicalParent"),hu=ci("_blazorLogicalEnd");c.attachReviver(function(n,t){return t&&"object"==_typeof(t)&&t.hasOwnProperty("__internalId")&&"string"==typeof t.__internalId?function(n){var t="[".concat(pu(n),"]");return document.querySelector(t)}(t.__internalId):t});var wu="_blazorDeferredValue",bu=document.createElement("template"),ku=document.createElementNS("http://www.w3.org/2000/svg","g"),li={},du="__internal_",gu="preventDefault_",nf="stopPropagation_",ns=function(){function n(t){_classCallCheck(this,n);this.rootComponentIds=new Set;this.childComponentLocations={};this.eventDelegator=new fu(t);this.eventDelegator.notifyAfterClick(function(n){var t,i;uf&&(0!==n.button||function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey}(n)||n.defaultPrevented||(t=function(n){var r=!window._blazorDisableComposedPath&&n.composedPath&&n.composedPath(),t,i;if(r){for(t=0;t<r.length;t++)if(i=r[t],_instanceof(i,Element)&&"A"===i.tagName)return i;return null}return lf(n.target,"A")}(n),t&&function(n){var t=n.getAttribute("target");return(!t||"_self"===t)&&n.hasAttribute("href")&&!n.hasAttribute("download")}(t)&&(i=cf(t.getAttribute("href")),af(i)&&(n.preventDefault(),sf(i,!0,!1)))))})}return _createClass(n,[{key:"attachRootComponentToLogicalElement",value:function(n,t,i){this.attachComponentToElement(n,t);this.rootComponentIds.add(n);i||(li[n]=t)}},{key:"updateComponent",value:function(n,t,i,r){var o,s=this.childComponentLocations[t],u,h,f,e;if(!s)throw new Error("No element is currently associated with component ".concat(t));u=li[t];u&&(h=function(n){return n[hu]||null}(u),delete li[t],h?function(n,t){var i=b(n),r;if(!i)throw new Error("Can't clear between nodes. The start node does not have a logical parent.");var u=v(i),f=u.indexOf(n)+1,e=u.indexOf(t);for(r=f;r<=e;r++)st(i,f);n.textContent="!"}(u,h):function(n){for(var t;t=n.firstChild;)n.removeChild(t)}(u));f=null===(o=au(s))||void 0===o?void 0:o.getRootNode();e=f&&f.activeElement;this.applyEdits(n,t,s,0,i,r);_instanceof(e,HTMLElement)&&f&&f.activeElement!==e&&e.focus()}},{key:"disposeComponent",value:function(n){this.rootComponentIds.delete(n)&&function(n){for(var t=v(n);t.length;)st(n,0)}(this.childComponentLocations[n]);delete this.childComponentLocations[n]}},{key:"disposeEventHandler",value:function(n){this.eventDelegator.removeListener(n)}},{key:"attachComponentToElement",value:function(n,t){this.childComponentLocations[n]=t}},{key:"applyEdits",value:function(n,t,i,r,u,f){for(var e,p,c,w,h,a=0,s=r,v=n.arrayBuilderSegmentReader,o=n.editReader,it=n.frameReader,rt=v.values(u),k=v.offset(u),ut=k+v.count(u),y=k;y<ut;y++){e=n.diffReader.editsEntry(rt,y);p=o.editType(e);switch(p){case l.prependFrame:var d=o.newTreeIndex(e),ft=n.referenceFramesEntry(f,d),et=o.siblingIndex(e);this.insertFrame(n,t,i,s+et,f,ft,d);break;case l.removeFrame:st(i,s+o.siblingIndex(e));break;case l.setAttribute:var ot=o.newTreeIndex(e),ht=n.referenceFramesEntry(f,ot),g=kt(i,s+o.siblingIndex(e));if(!_instanceof(g,Element))throw new Error("Cannot set attribute on non-element child");this.applyAttribute(n,t,g,ht);break;case l.removeAttribute:if(c=kt(i,s+o.siblingIndex(e)),!_instanceof(c,HTMLElement))throw new Error("Cannot remove attribute from non-element child");w=o.removedAttributeName(e);this.tryApplySpecialProperty(n,c,w,null)||c.removeAttribute(w);break;case l.updateText:var ct=o.newTreeIndex(e),lt=n.referenceFramesEntry(f,ct),nt=kt(i,s+o.siblingIndex(e));if(!_instanceof(nt,Text))throw new Error("Cannot set text content on non-text child");nt.textContent=it.textContent(lt);break;case l.updateMarkup:var at=o.newTreeIndex(e),vt=n.referenceFramesEntry(f,at),tt=o.siblingIndex(e);st(i,s+tt);this.insertMarkup(n,i,s+tt,vt);break;case l.stepIn:i=kt(i,s+o.siblingIndex(e));a++;s=0;break;case l.stepOut:i=b(i);a--;s=0===a?r:0;break;case l.permutationListEntry:h=h||[];h.push({fromSiblingIndex:s+o.siblingIndex(e),toSiblingIndex:s+o.moveToSiblingIndex(e)});break;case l.permutationListEnd:go(i,h);h=void 0;break;default:throw new Error("Unknown edit type: ".concat(p));}}}},{key:"insertFrame",value:function(n,t,i,r,u,f,e){var o=n.frameReader,h=o.frameType(f),c,l;switch(h){case s.element:return this.insertElement(n,t,i,r,u,f,e),1;case s.text:return this.insertText(n,i,r,f),1;case s.attribute:throw new Error("Attribute frames should only be present as leading children of element frames.");case s.component:return this.insertComponent(n,i,r,f),1;case s.region:return this.insertFrameRange(n,t,i,r,u,e+1,e+o.subtreeLength(f));case s.elementReferenceCapture:if(_instanceof(i,Element))return c=i,l=o.elementReferenceCaptureId(f),c.setAttribute(pu(l),""),0;throw new Error("Reference capture frames can only be children of element frames.");case s.markup:return this.insertMarkup(n,i,r,f),1;default:throw new Error("Unknown frame type: ".concat(h));}}},{key:"insertElement",value:function(n,t,i,r,u,f,e){for(var a,c=n.frameReader,l=c.elementName(f),o="svg"===l||lu(i)?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l),p=et(o),v=!1,y=e+c.subtreeLength(f),h=e+1;h<y;h++){if(a=n.referenceFramesEntry(u,h),c.frameType(a)!==s.attribute){ot(o,i,r);v=!0;this.insertFrameRange(n,t,p,0,u,h,y);break}this.applyAttribute(n,t,o,a)}v||ot(o,i,r);_instanceof(o,HTMLOptionElement)?this.trySetSelectValueFromOptionElement(o):wu in o&&rf(o,o._blazorDeferredValue)}},{key:"trySetSelectValueFromOptionElement",value:function(n){var t=this.findClosestAncestorSelectElement(n);if(!function(n){return!!n&&wu in n}(t))return!1;if(vi(t))n.selected=-1!==t._blazorDeferredValue.indexOf(n.value);else{if(t._blazorDeferredValue!==n.value)return!1;tf(t,n.value);delete t._blazorDeferredValue}return!0}},{key:"insertComponent",value:function(n,t,i,r){var u=cu(t,i),f=n.frameReader.componentId(r);this.attachComponentToElement(f,u)}},{key:"insertText",value:function(n,t,i,r){var u=n.frameReader.textContent(r);ot(document.createTextNode(u),t,i)}},{key:"insertMarkup",value:function(n,t,i,r){for(var e=cu(t,i),f=(u=n.frameReader.markupContent(r),lu(t)?(ku.innerHTML=u||" ",ku):(bu.innerHTML=u||" ",bu.content)),u,o=0;f.firstChild;)ot(f.firstChild,e,o++)}},{key:"applyAttribute",value:function(n,t,i,r){var u=n.frameReader,f=u.attributeName(r),e=u.attributeEventHandlerId(r),o;e?(o=ai(f),this.eventDelegator.setListener(i,o,e,t)):this.tryApplySpecialProperty(n,i,f,r)||i.setAttribute(f,u.attributeValue(r))}},{key:"tryApplySpecialProperty",value:function(n,t,i,r){switch(i){case"value":return this.tryApplyValueProperty(n,t,r);case"checked":return this.tryApplyCheckedProperty(n,t,r);default:return!!i.startsWith(du)&&(this.applyInternalAttribute(n,t,i.substring(du.length),r),!0)}}},{key:"applyInternalAttribute",value:function(n,t,i,r){var u=r?n.frameReader.attributeValue(r):null,f,e;if(i.startsWith(nf))f=ai(i.substring(nf.length)),this.eventDelegator.setStopPropagation(t,f,null!==u);else{if(!i.startsWith(gu))throw new Error("Unsupported internal attribute '".concat(i,"'"));e=ai(i.substring(gu.length));this.eventDelegator.setPreventDefault(t,e,null!==u)}}},{key:"tryApplyValueProperty",value:function(n,t,i){var u=n.frameReader,r=i?u.attributeValue(i):null;switch(r&&"INPUT"===t.tagName&&(r=function(n,t){switch(t){case"time":return 8===n.length&&n.endsWith("00")?n.substring(0,5):n;case"datetime-local":return 19===n.length&&n.endsWith("00")?n.substring(0,16):n;default:return n}}(r,t.getAttribute("type"))),t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":return r&&_instanceof(t,HTMLSelectElement)&&vi(t)&&(r=JSON.parse(r)),rf(t,r),t._blazorDeferredValue=r,!0;case"OPTION":return r||""===r?t.setAttribute("value",r):t.removeAttribute("value"),this.trySetSelectValueFromOptionElement(t),!0;default:return!1}}},{key:"tryApplyCheckedProperty",value:function(n,t,i){if("INPUT"===t.tagName){var r=i?n.frameReader.attributeValue(i):null;return t.checked=null!==r,!0}return!1}},{key:"findClosestAncestorSelectElement",value:function(n){for(;n;){if(_instanceof(n,HTMLSelectElement))return n;n=n.parentElement}return null}},{key:"insertFrameRange",value:function(n,t,i,r,u,f,e){for(var s,h=r,o=f;o<e;o++)s=n.referenceFramesEntry(u,o),r+=this.insertFrame(n,t,i,r,u,s,o),o+=ts(n,s);return r-h}}]),n}();var yi={},pi=!1,uf=!1,ff=!1,wi=null,bi={listenForNavigationEvents:function(n){wi=n;ff||(ff=!0,window.addEventListener("popstate",function(){return hf(!1)}))},enableNavigationInterception:function(){uf=!0},navigateTo:ef,getBaseURI:function(){return document.baseURI},getLocationHref:function(){return location.href}};var is={focus:function(n,t){if(_instanceof(n,HTMLElement))n.focus({preventScroll:t});else{if(!_instanceof(n,SVGElement))throw new Error("Unable to focus an invalid element.");if(!n.hasAttribute("tabindex"))throw new Error("Unable to focus an SVG element that does not have a tabindex.");n.focus({preventScroll:t})}},focusBySelector:function(n){var t=document.querySelector(n);t&&(t.hasAttribute("tabindex")||(t.tabIndex=-1),t.focus())}},rs={init:function(n,t,i){function s(n){var t={attributes:!0},i=new MutationObserver(function(i,u){h(n.parentElement)&&(u.disconnect(),n.style.display="table-row",u.observe(n,t));r.unobserve(n);r.observe(n)});return i.observe(n,t),i}function h(n){return null!==n&&(_instanceof(n,HTMLTableElement)&&""===n.style.display||"table"===n.style.display||_instanceof(n,HTMLTableSectionElement)&&""===n.style.display||"table-row-group"===n.style.display)}var c=arguments.length>3&&arguments[3]!==undefined?arguments[3]:50,f=vf(t),u,r,e,o;(f||document.documentElement).style.overflowAnchor="none";u=document.createRange();h(i.parentElement)&&(t.style.display="table-row",i.style.display="table-row");r=new IntersectionObserver(function(r){r.forEach(function(r){var f,e,o;r.isIntersecting&&(u.setStartAfter(t),u.setEndBefore(i),e=u.getBoundingClientRect().height,o=null===(f=r.rootBounds)||void 0===f?void 0:f.height,r.target===t?n.invokeMethodAsync("OnSpacerBeforeVisible",r.intersectionRect.top-r.boundingClientRect.top,e,o):r.target===i&&i.offsetHeight>0&&n.invokeMethodAsync("OnSpacerAfterVisible",r.boundingClientRect.bottom-r.intersectionRect.bottom,e,o))})},{root:f,rootMargin:"".concat(c,"px")});r.observe(t);r.observe(i);e=s(t);o=s(i);di[n._id]={intersectionObserver:r,mutationObserverBefore:e,mutationObserverAfter:o}},dispose:function(n){var t=di[n._id];t&&(t.intersectionObserver.disconnect(),t.mutationObserverBefore.disconnect(),t.mutationObserverAfter.disconnect(),n.dispose(),delete di[n._id])}},di={};yf={getAndRemoveExistingTitle:function(){var r,u=document.getElementsByTagName("title"),t,i,n,f;if(0===u.length)return null;for(t=null,i=u.length-1;i>=0;i--)n=u[i],f=n.previousSibling,_instanceof(f,Comment)&&null!==b(f)||(null===t&&(t=n.textContent),null===(r=n.parentNode)||void 0===r||r.removeChild(n));return t}};pf={init:function(n,t){t._blazorInputFileNextFileId=0;t.addEventListener("click",function(){t.value=""});t.addEventListener("change",function(){t._blazorFilesById={};var i=Array.prototype.map.call(t.files,function(n){var i={id:++t._blazorInputFileNextFileId,lastModified:new Date(n.lastModified).toISOString(),name:n.name,size:n.size,contentType:n.type,readPromise:void 0,arrayBuffer:void 0,blob:n};return t._blazorFilesById[i.id]=i,i});n.invokeMethodAsync("NotifyChange",i)})},toImageFile:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,i,r,u,f){var o,e,s,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=wf(n,i),t.next=3,new Promise(function(n){var t=new Image;t.onload=function(){URL.revokeObjectURL(t.src);n(t)};t.onerror=function(){t.onerror=null;URL.revokeObjectURL(t.src)};t.src=URL.createObjectURL(o.blob)});case 3:return e=t.sent,t.next=6,new Promise(function(n){var i,s=Math.min(1,u/e.width),h=Math.min(1,f/e.height),o=Math.min(s,h),t=document.createElement("canvas");t.width=Math.round(e.width*o);t.height=Math.round(e.height*o);null===(i=t.getContext("2d"))||void 0===i||i.drawImage(e,0,0,t.width,t.height);t.toBlob(n,r)});case 6:return s=t.sent,h={id:++n._blazorInputFileNextFileId,lastModified:o.lastModified,name:o.name,size:(null==s?void 0:s.size)||0,contentType:r,blob:s||o.blob},t.abrupt("return",(n._blazorFilesById[h.id]=h,h));case 9:case"end":return t.stop()}},t)}));return i}(),readFileData:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",wf(n,i).blob);case 1:case"end":return t.stop()}},t)}));return i}()};ht=new Map;h={navigateTo:ef,registerCustomEventType:function(n,t){if(!t)throw new Error("The options parameter is required.");if(ut.has(n))throw new Error("The event '".concat(n,"' is already registered."));if(t.browserEventName){var i=ui.get(t.browserEventName);i?i.push(n):ui.set(t.browserEventName,[n]);dr.forEach(function(i){return i(n,t.browserEventName)})}ut.set(n,t)},rootComponents:ao,_internal:{navigationManager:bi,domWrapper:is,Virtualize:rs,PageTitle:yf,InputFile:pf,getJSDataStreamChunk:bf,receiveDotNetDataStream:function(n,t,i,r){var u=ht.get(n),f;u||(f=new ReadableStream({start:function(t){ht.set(n,t);u=t}}),c.jsCallDispatcher.supplyDotNetStream(n,f));r?(u.error(r),ht.delete(n)):0===i?(u.close(),ht.delete(n)):u.enqueue(t.length===i?t:t.subarray(0,i))},attachWebRendererInterop:function(n,t,i,r){if(bt.has(n))throw new Error("Interop methods are already registered for renderer ".concat(n));bt.set(n,t);Object.keys(i).length>0&&function(n,t,i){var r,f,u,a,o;if(wt)throw new Error("Dynamic root components have already been enabled.");for(wt=n,nu=t,r=0,f=Object.entries(i);r<f.length;r++){var s=_slicedToArray(f[r],2),v=s[0],y=s[1],p=c.jsCallDispatcher.findJSFunction(v,0),e=!0,h=!1,l=undefined;try{for(u=y[Symbol.iterator]();!(e=(a=u.next()).done);e=!0)o=a.value,p(o,t[o])}catch(w){h=!0;l=w}finally{try{e||u.return==null||u.return()}finally{if(h)throw l;}}}}(ru(n),i,r);tu()}}};window.Blazor=h;var us=[0,2e3,1e4,3e4,null],kf=function(){function n(t){_classCallCheck(this,n);this._retryDelays=void 0!==t?[].concat(_toConsumableArray(t),[null]):us}return _createClass(n,[{key:"nextRetryDelayInMilliseconds",value:function(n){return this._retryDelays[n.previousRetryCount]}}]),n}(),it=function(n){function t(n,i){var r,u;return _classCallCheck(this,t),u=(_instanceof(this,t)?this.constructor:void 0).prototype,r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"".concat(n,": Status code '").concat(i,"'"))),r.statusCode=i,r.__proto__=u,r}return _inherits(t,n),t}(_wrapNativeSuper(Error)),nr=function(n){function t(){var n,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"A timeout occurred.",i;return _classCallCheck(this,t),i=(_instanceof(this,t)?this.constructor:void 0).prototype,n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r)),n.__proto__=i,n}return _inherits(t,n),t}(_wrapNativeSuper(Error)),ct=function(n){function t(){var n,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"An abort occurred.",i;return _classCallCheck(this,t),i=(_instanceof(this,t)?this.constructor:void 0).prototype,n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r)),n.__proto__=i,n}return _inherits(t,n),t}(_wrapNativeSuper(Error)),fs=function(n){function t(n,i){var r,u;return _classCallCheck(this,t),u=(_instanceof(this,t)?this.constructor:void 0).prototype,r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),r.transport=i,r.errorType="UnsupportedTransportError",r.__proto__=u,r}return _inherits(t,n),t}(_wrapNativeSuper(Error)),es=function(n){function t(n,i){var r,u;return _classCallCheck(this,t),u=(_instanceof(this,t)?this.constructor:void 0).prototype,r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),r.transport=i,r.errorType="DisabledTransportError",r.__proto__=u,r}return _inherits(t,n),t}(_wrapNativeSuper(Error)),os=function(n){function t(n,i){var r,u;return _classCallCheck(this,t),u=(_instanceof(this,t)?this.constructor:void 0).prototype,r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),r.transport=i,r.errorType="FailedToStartTransportError",r.__proto__=u,r}return _inherits(t,n),t}(_wrapNativeSuper(Error)),ss=function(n){function t(n){var i,r;return _classCallCheck(this,t),r=(_instanceof(this,t)?this.constructor:void 0).prototype,i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),i.errorType="FailedToNegotiateWithServerError",i.__proto__=r,i}return _inherits(t,n),t}(_wrapNativeSuper(Error)),hs=function(n){function t(n,i){var r,u;return _classCallCheck(this,t),u=(_instanceof(this,t)?this.constructor:void 0).prototype,r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n)),r.innerErrors=i,r.__proto__=u,r}return _inherits(t,n),t}(_wrapNativeSuper(Error)),tr=function tr(n,t,i){_classCallCheck(this,tr);this.statusCode=n;this.statusText=t;this.content=i},ir=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"get",value:function(n,t){return this.send(_objectSpread({},t,{method:"GET",url:n}))}},{key:"post",value:function(n,t){return this.send(_objectSpread({},t,{method:"POST",url:n}))}},{key:"delete",value:function(n,t){return this.send(_objectSpread({},t,{method:"DELETE",url:n}))}},{key:"getCookieString",value:function(){return""}}]),n}(),n,f,o,t,r;!function(n){n[n.Trace=0]="Trace";n[n.Debug=1]="Debug";n[n.Information=2]="Information";n[n.Warning=3]="Warning";n[n.Error=4]="Error";n[n.Critical=5]="Critical";n[n.None=6]="None"}(n||(n={}));k=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"log",value:function(){}}]),n}();k.instance=new k;e=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"isRequired",value:function(n,t){if(null==n)throw new Error("The '".concat(t,"' argument is required."));}},{key:"isNotEmpty",value:function(n,t){if(!n||n.match(/^\s*$/))throw new Error("The '".concat(t,"' argument should not be empty."));}},{key:"isIn",value:function(n,t,i){if(!(n in t))throw new Error("Unknown ".concat(i," value: ").concat(n,"."));}}]),n}();y=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"isBrowser",get:function(){return"object"==(typeof window=="undefined"?"undefined":_typeof(window))&&"object"==_typeof(window.document)}},{key:"isWebWorker",get:function(){return"object"==(typeof self=="undefined"?"undefined":_typeof(self))&&"importScripts"in self}},{key:"isReactNative",get:function(){return"object"==(typeof window=="undefined"?"undefined":_typeof(window))&&void 0===window.document}},{key:"isNode",get:function(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}]),n}();gf=function(){function n(t,i){_classCallCheck(this,n);this._subject=t;this._observer=i}return _createClass(n,[{key:"dispose",value:function(){var n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1);0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(function(){})}}]),n}();at=function(){function t(n){_classCallCheck(this,t);this._minLevel=n;this.out=console}return _createClass(t,[{key:"log",value:function(t,i){if(t>=this._minLevel){var r="[".concat((new Date).toISOString(),"] ").concat(n[t],": ").concat(i);switch(t){case n.Critical:case n.Error:this.out.error(r);break;case n.Warning:this.out.warn(r);break;case n.Information:this.out.info(r);break;default:this.out.log(r)}}}}]),t}();te=function(t){function i(n){var t,r,u;return _classCallCheck(this,i),(t=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this)),t._logger=n,"undefined"==typeof fetch)?(r=require,t._jar=new(r("tough-cookie").CookieJar),t._fetchType=r("node-fetch"),t._fetchType=r("fetch-cookie")(t._fetchType,t._jar)):t._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==ri.g)return ri.g;throw new Error("could not find global");}()),"undefined"==typeof AbortController?(u=require,t._abortControllerType=u("abort-controller")):t._abortControllerType=AbortController,_possibleConstructorReturn(t)}return _inherits(i,t),_createClass(i,[{key:"send",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var l=this,u,f,r,e,o,s,h,c;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t.abortSignal&&t.abortSignal.aborted)){i.next=2;break}throw new ct;case 2:if(t.method){i.next=4;break}throw new Error("No method defined.");case 4:if(t.url){i.next=6;break}throw new Error("No url defined.");case 6:return u=new this._abortControllerType,t.abortSignal&&(t.abortSignal.onabort=function(){u.abort();f=new ct}),e=null,t.timeout&&(o=t.timeout,e=setTimeout(function(){u.abort();l._logger.log(n.Warning,"Timeout from HTTP request.");f=new nr},o)),i.prev=10,i.next=13,this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:_objectSpread({"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,mode:"cors",redirect:"follow",signal:u.signal});case 13:r=i.sent;i.next=21;break;case 16:if(i.prev=16,i.t0=i["catch"](10),!f){i.next=20;break}throw f;case 20:throw this._logger.log(n.Warning,"Error from HTTP request. ".concat(i.t0,".")),i.t0;case 21:return i.prev=21,e&&clearTimeout(e),t.abortSignal&&(t.abortSignal.onabort=null),i.finish(21);case 24:if(r.ok){i.next=29;break}return i.next=27,ie(r,"text");case 27:s=i.sent;throw new it(s||r.statusText,r.status);case 29:return h=ie(r,t.responseType),i.next=32,h;case 32:return c=i.sent,i.abrupt("return",new tr(r.status,r.statusText,c));case 34:case"end":return i.stop()}},i,this,[[10,16,21,24]])}));return r}()},{key:"getCookieString",value:function(){return""}}]),i}(ir);var vs=function(t){function i(n){var t;return _classCallCheck(this,i),t=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this)),t._logger=n,t}return _inherits(i,t),_createClass(i,[{key:"send",value:function(t){var i=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new ct):t.method?t.url?new Promise(function(r,u){var f=new XMLHttpRequest,e;f.open(t.method,t.url,!0);f.withCredentials=void 0===t.withCredentials||t.withCredentials;f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.setRequestHeader("Content-Type","text/plain;charset=UTF-8");e=t.headers;e&&Object.keys(e).forEach(function(n){f.setRequestHeader(n,e[n])});t.responseType&&(f.responseType=t.responseType);t.abortSignal&&(t.abortSignal.onabort=function(){f.abort();u(new ct)});t.timeout&&(f.timeout=t.timeout);f.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null);f.status>=200&&f.status<300?r(new tr(f.status,f.statusText,f.response||f.responseText)):u(new it(f.response||f.responseText||f.statusText,f.status))};f.onerror=function(){i._logger.log(n.Warning,"Error from HTTP request. ".concat(f.status,": ").concat(f.statusText,"."));u(new it(f.statusText,f.status))};f.ontimeout=function(){i._logger.log(n.Warning,"Timeout from HTTP request.");u(new nr)};f.send(t.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}]),i}(ir),ys=function(n){function t(n){var i;if(_classCallCheck(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),"undefined"!=typeof fetch)i._httpClient=new te(n);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");i._httpClient=new vs(n)}return _possibleConstructorReturn(i)}return _inherits(t,n),_createClass(t,[{key:"send",value:function(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new ct):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}},{key:"getCookieString",value:function(n){return this._httpClient.getCookieString(n)}}]),t}(ir),d=function d(){_classCallCheck(this,d)};d.Authorization="Authorization";d.Cookie="Cookie",function(n){n[n.None=0]="None";n[n.WebSockets=1]="WebSockets";n[n.ServerSentEvents=2]="ServerSentEvents";n[n.LongPolling=4]="LongPolling"}(f||(f={})),function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"}(o||(o={}));var ps=function(){function n(){_classCallCheck(this,n);this._isAborted=!1;this.onabort=null}return _createClass(n,[{key:"abort",value:function(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}},{key:"signal",get:function(){return this}},{key:"aborted",get:function(){return this._isAborted}}]),n}(),re=function(){function t(n,i,r,u){_classCallCheck(this,t);this._httpClient=n;this._accessTokenFactory=i;this._logger=r;this._pollAbort=new ps;this._options=u;this._running=!1;this.onreceive=null;this.onclose=null}return _createClass(t,[{key:"connect",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t,r){var c,s,l,a,v,u,y,h,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e.isRequired(t,"url"),e.isRequired(r,"transferFormat"),e.isIn(r,o,"transferFormat"),this._url=t,this._logger.log(n.Trace,"(LongPolling transport) Connecting."),r===o.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)){i.next=2;break}throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");case 2:return c=vt(),s=_slicedToArray(c,2),l=s[0],a=s[1],v=_objectSpread(_defineProperty({},l,a),this._options.headers),u={abortSignal:this._pollAbort.signal,headers:v,timeout:1e5,withCredentials:this._options.withCredentials},r===o.Binary&&(u.responseType="arraybuffer"),i.next=6,this._getAccessToken();case 6:return y=i.sent,this._updateHeaderToken(u,y),h="".concat(t,"&_=").concat(Date.now()),this._logger.log(n.Trace,"(LongPolling transport) polling: ".concat(h,".")),i.next=12,this._httpClient.get(h,u);case 12:f=i.sent;200!==f.statusCode?(this._logger.log(n.Error,"(LongPolling transport) Unexpected response code: ".concat(f.statusCode,".")),this._closeError=new it(f.statusText||"",f.statusCode),this._running=!1):this._running=!0;this._receiving=this._poll(this._url,u);case 14:case"end":return i.stop()}},i,this)}));return r}()},{key:"_getAccessToken",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._accessTokenFactory){n.next=6;break}return n.next=3,this._accessTokenFactory();case 3:n.t0=n.sent;n.next=7;break;case 6:n.t0=null;case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}},t,this)}));return i}()},{key:"_updateHeaderToken",value:function(n,t){n.headers||(n.headers={});t?n.headers[d.Authorization]="Bearer ".concat(t):n.headers[d.Authorization]&&delete n.headers[d.Authorization]}},{key:"_poll",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t,r){var e,f,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0;case 1:if(!this._running){i.next=20;break}return i.next=4,this._getAccessToken();case 4:return e=i.sent,this._updateHeaderToken(r,e),i.prev=6,f="".concat(t,"&_=").concat(Date.now()),this._logger.log(n.Trace,"(LongPolling transport) polling: ".concat(f,".")),i.next=11,this._httpClient.get(f,r);case 11:u=i.sent;204===u.statusCode?(this._logger.log(n.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==u.statusCode?(this._logger.log(n.Error,"(LongPolling transport) Unexpected response code: ".concat(u.statusCode,".")),this._closeError=new it(u.statusText||"",u.statusCode),this._running=!1):u.content?(this._logger.log(n.Trace,"(LongPolling transport) data received. ".concat(lt(u.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(u.content)):this._logger.log(n.Trace,"(LongPolling transport) Poll timed out, reissuing.");i.next=18;break;case 15:i.prev=15;i.t0=i["catch"](6);this._running?_instanceof(i.t0,nr)?this._logger.log(n.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=i.t0,this._running=!1):this._logger.log(n.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(i.t0.message));case 18:i.next=1;break;case 20:return i.prev=20,this._logger.log(n.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose(),i.finish(20);case 23:case"end":return i.stop()}},i,this,[[0,,20,23],[6,15]])}));return r}()},{key:"send",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._running?df(this._logger,"LongPolling",this._httpClient,this._url,this._accessTokenFactory,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected")));case 1:case"end":return t.stop()}},t,this)}));return i}()},{key:"stop",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(){var t,f,r,e,o,u,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this._logger.log(n.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort(),i.prev=1,i.next=4,this._receiving;case 4:return this._logger.log(n.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,".")),t={},f=vt(),r=_slicedToArray(f,2),e=r[0],o=r[1],t[e]=o,u={headers:_objectSpread({},t,{},this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},i.next=10,this._getAccessToken();case 10:return s=i.sent,this._updateHeaderToken(u,s),i.next=14,this._httpClient.delete(this._url,u);case 14:this._logger.log(n.Trace,"(LongPolling transport) DELETE request sent.");case 15:return i.prev=15,this._logger.log(n.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose(),i.finish(15);case 18:case"end":return i.stop()}},i,this,[[1,,15,18]])}));return r}()},{key:"_raiseOnClose",value:function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError);this._logger.log(n.Trace,t);this.onclose(this._closeError)}}},{key:"pollAborted",get:function(){return this._pollAbort.aborted}}]),t}(),ws=function(){function t(n,i,r,u){_classCallCheck(this,t);this._httpClient=n;this._accessTokenFactory=i;this._logger=r;this._options=u;this.onreceive=null;this.onclose=null}return _createClass(t,[{key:"connect",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t,r){var u=this,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e.isRequired(t,"url"),e.isRequired(r,"transferFormat"),e.isIn(r,o,"transferFormat"),this._logger.log(n.Trace,"(SSE transport) Connecting."),this._url=t,this._accessTokenFactory)){i.next=5;break}return i.next=3,this._accessTokenFactory();case 3:f=i.sent;f&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));case 5:return i.abrupt("return",new Promise(function(i,f){var e,h=!1,c,s;if(r===o.Text){if(y.isBrowser||y.isWebWorker)e=new u._options.EventSource(t,{withCredentials:u._options.withCredentials});else{c=u._httpClient.getCookieString(t);s={};s.Cookie=c;var a=vt(),l=_slicedToArray(a,2),v=l[0],p=l[1];s[v]=p;e=new u._options.EventSource(t,{withCredentials:u._options.withCredentials,headers:_objectSpread({},s,{},u._options.headers)})}try{e.onmessage=function(t){if(u.onreceive)try{u._logger.log(n.Trace,"(SSE transport) data received. ".concat(lt(t.data,u._options.logMessageContent),"."));u.onreceive(t.data)}catch(t){return void u._close(t)}};e.onerror=function(){h?u._close():f(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))};e.onopen=function(){u._logger.log(n.Information,"SSE connected to ".concat(u._url));u._eventSource=e;h=!0;i()}}catch(t){return void f(t)}}else f(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}));case 6:case"end":return i.stop()}},i,this)}));return r}()},{key:"send",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._eventSource?df(this._logger,"SSE",this._httpClient,this._url,this._accessTokenFactory,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected")));case 1:case"end":return t.stop()}},t,this)}));return i}()},{key:"stop",value:function(){return this._close(),Promise.resolve()}},{key:"_close",value:function(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}]),t}(),bs=function(){function t(n,i,r,u,f,e){_classCallCheck(this,t);this._logger=r;this._accessTokenFactory=i;this._logMessageContent=u;this._webSocketConstructor=f;this._httpClient=n;this.onreceive=null;this.onclose=null;this._headers=e}return _createClass(t,[{key:"connect",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t,r){var u=this,f;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e.isRequired(t,"url"),e.isRequired(r,"transferFormat"),e.isIn(r,o,"transferFormat"),this._logger.log(n.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory)){i.next=5;break}return i.next=3,this._accessTokenFactory();case 3:f=i.sent;f&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(f)));case 5:return i.abrupt("return",new Promise(function(i,f){var e,s;t=t.replace(/^http/,"ws");u._httpClient.getCookieString(t);s=!1;e||(e=new u._webSocketConstructor(t));r===o.Binary&&(e.binaryType="arraybuffer");e.onopen=function(){u._logger.log(n.Information,"WebSocket connected to ".concat(t,"."));u._webSocket=e;s=!0;i()};e.onerror=function(t){var i=null;i="undefined"!=typeof ErrorEvent&&_instanceof(t,ErrorEvent)?t.error:"There was an error with the transport";u._logger.log(n.Information,"(WebSockets transport) ".concat(i,"."))};e.onmessage=function(t){if(u._logger.log(n.Trace,"(WebSockets transport) data received. ".concat(lt(t.data,u._logMessageContent),".")),u.onreceive)try{u.onreceive(t.data)}catch(t){return void u._close(t)}};e.onclose=function(n){if(s)u._close(n);else{var t=null;t="undefined"!=typeof ErrorEvent&&_instanceof(n,ErrorEvent)?n.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.";f(new Error(t))}}}));case 6:case"end":return i.stop()}},i,this)}));return r}()},{key:"send",value:function(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(n.Trace,"(WebSockets transport) sending data. ".concat(lt(t,this._logMessageContent),".")),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}},{key:"stop",value:function(){return this._webSocket&&this._close(void 0),Promise.resolve()}},{key:"_close",value:function(t){this._webSocket&&(this._webSocket.onclose=function(){},this._webSocket.onmessage=function(){},this._webSocket.onerror=function(){},this._webSocket.close(),this._webSocket=void 0);this._logger.log(n.Trace,"(WebSockets transport) socket closed.");this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?_instanceof(t,Error)?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: ".concat(t.code," (").concat(t.reason||"no reason given",")."))))}},{key:"_isCloseEvent",value:function(n){return n&&"boolean"==typeof n.wasClean&&"number"==typeof n.code}}]),t}(),ks=function(){function t(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},u;if(_classCallCheck(this,t),this._stopPromiseResolver=function(){},this.features={},this._negotiateVersion=1,e.isRequired(i,"url"),this._logger=void 0===(u=r.logger)?new at(n.Information):null===u?k.instance:void 0!==u.log?u:new at(u),this.baseUrl=this._resolveUrl(i),(r=r||{}).logMessageContent=void 0!==r.logMessageContent&&r.logMessageContent,"boolean"!=typeof r.withCredentials&&void 0!==r.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");r.withCredentials=void 0===r.withCredentials||r.withCredentials;r.timeout=void 0===r.timeout?1e5:r.timeout;"undefined"==typeof WebSocket||r.WebSocket||(r.WebSocket=WebSocket);"undefined"==typeof EventSource||r.EventSource||(r.EventSource=EventSource);this._httpClient=r.httpClient||new ys(this._logger);this._connectionState="Disconnected";this._connectionStarted=!1;this._options=r;this.onreceive=null;this.onclose=null}return _createClass(t,[{key:"start",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var r,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t=t||o.Binary,e.isIn(t,o,"transferFormat"),this._logger.log(n.Debug,"Starting connection with transfer format '".concat(o[t],"'.")),"Disconnected"!==this._connectionState)){i.next=2;break}return i.abrupt("return",Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state.")));case 2:return this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),i.next=6,this._startInternalPromise;case 6:if(!("Disconnecting"===this._connectionState)){i.next=12;break}return r="Failed to start the HttpConnection before stop() was called.",this._logger.log(n.Error,r),i.next=11,this._stopPromise;case 11:return i.abrupt("return",Promise.reject(new Error(r)));case 12:if(!("Connected"!==this._connectionState)){i.next=15;break}return u="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",i.abrupt("return",(this._logger.log(n.Error,u),Promise.reject(new Error(u))));case 15:this._connectionStarted=!0;case 16:case"end":return i.stop()}},i,this)}));return r}()},{key:"send",value:function(n){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new ds(this.transport)),this._sendQueue.send(n))}},{key:"stop",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var r=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!("Disconnected"===this._connectionState)){i.next=4;break}i.t0=(this._logger.log(n.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnected state.")),Promise.resolve());i.next=16;break;case 4:if(!("Disconnecting"===this._connectionState)){i.next=8;break}i.t1=(this._logger.log(n.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnecting state.")),this._stopPromise);i.next=15;break;case 8:return this._connectionState="Disconnecting",this._stopPromise=new Promise(function(n){r._stopPromiseResolver=n}),i.next=12,this._stopInternal(t);case 12:return i.next=14,this._stopPromise;case 14:i.t1=void i.sent;case 15:i.t0=i.t1;case 16:return i.abrupt("return",i.t0);case 17:case"end":return i.stop()}},i,this)}));return r}()},{key:"_stopInternal",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this._stopError=t,i.prev=1,i.next=4,this._startInternalPromise;case 4:i.next=8;break;case 6:i.prev=6;i.t0=i["catch"](1);case 8:if(!this.transport){i.next=20;break}return i.prev=9,i.next=12,this.transport.stop();case 12:i.next=17;break;case 14:i.prev=14;i.t1=i["catch"](9);this._logger.log(n.Error,"HttpConnection.transport.stop() threw error '".concat(i.t1,"'."));this._stopConnection();case 17:this.transport=void 0;i.next=21;break;case 20:this._logger.log(n.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");case 21:case"end":return i.stop()}},i,this,[[1,6],[9,14]])}));return r}()},{key:"_startInternal",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var o=this,u,r,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(u=this.baseUrl,this._accessTokenFactory=this._options.accessTokenFactory,i.prev=2,!this._options.skipNegotiation){i.next=11;break}if(!(this._options.transport!==f.WebSockets)){i.next=6;break}throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 6:return this.transport=this._constructTransport(f.WebSockets),i.next=9,this._startTransport(u,t);case 9:i.next=28;break;case 11:r=null;e=0;case 12:return i.next=14,this._getNegotiationResponse(u);case 14:if(r=i.sent,!("Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)){i.next=17;break}throw new Error("The connection was stopped during negotiation.");case 17:if(!r.error){i.next=19;break}throw new Error(r.error);case 19:if(!r.ProtocolVersion){i.next=21;break}throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");case 21:(r.url&&(u=r.url),r.accessToken)&&function(){var n=r.accessToken;o._accessTokenFactory=function(){return n}}();e++;case 23:if(r.url&&e<100){i.next=12;break}case 24:if(!(100===e&&r.url)){i.next=26;break}throw new Error("Negotiate redirection limit exceeded.");case 26:return i.next=28,this._createTransport(u,this._options.transport,r,t);case 28:_instanceof(this.transport,re)&&(this.features.inherentKeepAlive=!0);"Connecting"===this._connectionState&&(this._logger.log(n.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected");i.next=34;break;case 31:return i.prev=31,i.t0=i["catch"](2),i.abrupt("return",(this._logger.log(n.Error,"Failed to start the connection: "+i.t0),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(i.t0)));case 34:case"end":return i.stop()}},i,this,[[2,31]])}));return r}()},{key:"_getNegotiationResponse",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var u,o,c,s,l,a,h,f,r,e;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(u={},!this._accessTokenFactory){i.next=6;break}return i.next=4,this._accessTokenFactory();case 4:o=i.sent;o&&(u[d.Authorization]="Bearer ".concat(o));case 6:return c=vt(),s=_slicedToArray(c,2),l=s[0],a=s[1],u[l]=a,h=this._resolveNegotiateUrl(t),this._logger.log(n.Debug,"Sending negotiation request: ".concat(h,".")),i.prev=10,i.next=13,this._httpClient.post(h,{content:"",headers:_objectSpread({},u,{},this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});case 13:if(f=i.sent,!(200!==f.statusCode)){i.next=16;break}return i.abrupt("return",Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(f.statusCode,"'"))));case 16:return r=JSON.parse(f.content),i.abrupt("return",((!r.negotiateVersion||r.negotiateVersion<1)&&(r.connectionToken=r.connectionId),r));case 20:return i.prev=20,i.t0=i["catch"](10),e="Failed to complete negotiation with the server: "+i.t0,i.abrupt("return",(_instanceof(i.t0,it)&&404===i.t0.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(n.Error,e),Promise.reject(new ss(e))));case 24:case"end":return i.stop()}},i,this,[[10,20]])}));return r}()},{key:"_createConnectUrl",value:function(n,t){return t?n+(-1===n.indexOf("?")?"?":"&")+"id=".concat(t):n}},{key:"_createTransport",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t,r,u,e){var l,o,b,s,a,y,p,v,k,h,c,w;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l=this._createConnectUrl(t,u.connectionToken),!this._isITransport(r)){i.next=7;break}return this._logger.log(n.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=r,i.next=6,this._startTransport(l,e);case 6:return i.abrupt("return",void(this.connectionId=u.connectionId));case 7:o=[];b=u.availableTransports||[];s=u;a=!0;y=!1;p=undefined;i.prev=12;v=b[Symbol.iterator]();case 14:if(a=(k=v.next()).done){i.next=47;break}if(h=k.value,c=this._resolveTransportOrError(h,r,e),!_instanceof(c,Error)){i.next=21;break}o.push("".concat(h.transport," failed:"));o.push(c);i.next=44;break;case 21:if(!this._isITransport(c)){i.next=44;break}if(!(this.transport=c,!s)){i.next=33;break}return i.prev=23,i.next=26,this._getNegotiationResponse(t);case 26:s=i.sent;i.next=32;break;case 29:return i.prev=29,i.t0=i["catch"](23),i.abrupt("return",Promise.reject(i.t0));case 32:l=this._createConnectUrl(t,s.connectionToken);case 33:return i.prev=33,i.next=36,this._startTransport(l,e);case 36:return i.abrupt("return",void(this.connectionId=s.connectionId));case 39:if(i.prev=39,i.t1=i["catch"](33),!(this._logger.log(n.Error,"Failed to start the transport '".concat(h.transport,"': ").concat(i.t1)),s=void 0,o.push(new os("".concat(h.transport," failed: ").concat(i.t1),f[h.transport])),"Connecting"!==this._connectionState)){i.next=44;break}return w="Failed to select transport before stop() was called.",i.abrupt("return",(this._logger.log(n.Debug,w),Promise.reject(new Error(w))));case 44:a=!0;i.next=14;break;case 47:i.next=53;break;case 49:i.prev=49;i.t2=i["catch"](12);y=!0;p=i.t2;case 53:i.prev=53;i.prev=54;a||v.return==null||v.return();case 56:if(i.prev=56,!y){i.next=59;break}throw p;case 59:return i.finish(56);case 60:return i.finish(53);case 61:return i.abrupt("return",o.length>0?Promise.reject(new hs("Unable to connect to the server with any of the available transports. ".concat(o.join(" ")),o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server.")));case 62:case"end":return i.stop()}},i,this,[[12,49,53,61],[23,29],[33,39],[54,,56,60]])}));return r}()},{key:"_constructTransport",value:function(n){switch(n){case f.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new bs(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case f.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ws(this._httpClient,this._accessTokenFactory,this._logger,this._options);case f.LongPolling:return new re(this._httpClient,this._accessTokenFactory,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(n,"."));}}},{key:"_startTransport",value:function(n,t){var i=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(n){return i._stopConnection(n)},this.transport.connect(n,t)}},{key:"_resolveTransportOrError",value:function(t,i,r){var u=f[t.transport];if(null==u)return this._logger.log(n.Debug,"Skipping transport '".concat(t.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(t.transport,"' because it is not supported by this client."));if(!function(n,t){return!n||0!=(t&n)}(i,u))return this._logger.log(n.Debug,"Skipping transport '".concat(f[u],"' because it was disabled by the client.")),new es("'".concat(f[u],"' is disabled by the client."),u);if(!(t.transferFormats.map(function(n){return o[n]}).indexOf(r)>=0))return this._logger.log(n.Debug,"Skipping transport '".concat(f[u],"' because it does not support the requested transfer format '").concat(o[r],"'.")),new Error("'".concat(f[u],"' does not support ").concat(o[r],"."));if(u===f.WebSockets&&!this._options.WebSocket||u===f.ServerSentEvents&&!this._options.EventSource)return this._logger.log(n.Debug,"Skipping transport '".concat(f[u],"' because it is not supported in your environment.'")),new fs("'".concat(f[u],"' is not supported in your environment."),u);this._logger.log(n.Debug,"Selecting transport '".concat(f[u],"'."));try{return this._constructTransport(u)}catch(t){return t}}},{key:"_isITransport",value:function(n){return n&&"object"==_typeof(n)&&"connect"in n}},{key:"_stopConnection",value:function(t){var i=this;if(this._logger.log(n.Debug,"HttpConnection.stopConnection(".concat(t,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(n.Warning,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(t,") was called while the connection is still in the connecting state."));if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(n.Error,"Connection disconnected with error '".concat(t,"'.")):this._logger.log(n.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(function(t){i._logger.log(n.Error,"TransportSendQueue.stop() threw error '".concat(t,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(r){this._logger.log(n.Error,"HttpConnection.onclose(".concat(t,") threw error '").concat(r,"'."))}}}else this._logger.log(n.Debug,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is already in the disconnected state."))}},{key:"_resolveUrl",value:function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!y.isBrowser)throw new Error("Cannot resolve '".concat(t,"'."));var i=window.document.createElement("a");return i.href=t,this._logger.log(n.Information,"Normalizing '".concat(t,"' to '").concat(i.href,"'.")),i.href}},{key:"_resolveNegotiateUrl",value:function(n){var i=n.indexOf("?"),t=n.substring(0,-1===i?n.length:i);return"/"!==t[t.length-1]&&(t+="/"),t+="negotiate",t+=-1===i?"":n.substring(i),-1===t.indexOf("negotiateVersion")&&(t+=-1===i?"?":"&",t+="negotiateVersion="+this._negotiateVersion),t}}]),t}(),ds=function(){function n(t){_classCallCheck(this,n);this._transport=t;this._buffer=[];this._executing=!0;this._sendBufferedData=new gt;this._transportResult=new gt;this._sendLoopPromise=this._sendLoop()}return _createClass(n,[{key:"send",value:function(n){return this._bufferData(n),this._transportResult||(this._transportResult=new gt),this._transportResult.promise}},{key:"stop",value:function(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}},{key:"_bufferData",value:function(n){if(this._buffer.length&&_typeof(this._buffer[0])!=_typeof(n))throw new Error("Expected data to be of type ".concat(_typeof(this._buffer)," but was of type ").concat(_typeof(n)));this._buffer.push(n);this._sendBufferedData.resolve()}},{key:"_sendLoop",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(){var t,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._sendBufferedData.promise;case 2:if(this._executing){i.next=5;break}return this._transportResult&&this._transportResult.reject("Connection stopped."),i.abrupt("break",21);case 5:return this._sendBufferedData=new gt,t=this._transportResult,this._transportResult=void 0,r="string"==typeof this._buffer[0]?this._buffer.join(""):n._concatBuffers(this._buffer),this._buffer.length=0,i.prev=10,i.next=13,this._transport.send(r);case 13:t.resolve();i.next=19;break;case 16:i.prev=16;i.t0=i["catch"](10);t.reject(i.t0);case 19:i.next=0;break;case 21:case"end":return i.stop()}},i,this,[[10,16]])}));return r}()}],[{key:"_concatBuffers",value:function(n){var h=n.map(function(n){return n.byteLength}).reduce(function(n,t){return n+t}),u=new Uint8Array(h),f=0,i=!0,e=!1,o=undefined,t,s,r;try{for(t=n[Symbol.iterator]();!(i=(s=t.next()).done);i=!0)r=s.value,u.set(new Uint8Array(r),f),f+=r.byteLength}catch(c){e=!0;o=c}finally{try{i||t.return==null||t.return()}finally{if(e)throw o;}}return u.buffer}}]),n}(),gt=function(){function n(){var t=this;_classCallCheck(this,n);this.promise=new Promise(function(n,i){var r;return r=[n,i],t._resolver=r[0],t._rejecter=r[1],r})}return _createClass(n,[{key:"resolve",value:function(){this._resolver()}},{key:"reject",value:function(n){this._rejecter(n)}}]),n}(),w=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"write",value:function(t){return"".concat(t).concat(n.RecordSeparator)}},{key:"parse",value:function(t){if(t[t.length-1]!==n.RecordSeparator)throw new Error("Message is incomplete.");var i=t.split(n.RecordSeparator);return i.pop(),i}}]),n}();w.RecordSeparatorCode=30;w.RecordSeparator=String.fromCharCode(w.RecordSeparatorCode);ue=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"writeHandshakeRequest",value:function(n){return w.write(JSON.stringify(n))}},{key:"parseHandshakeResponse",value:function(n){var f,e,t,o,r,i,s,u,c,h;if(rr(n)){if(t=new Uint8Array(n),o=t.indexOf(w.RecordSeparatorCode),-1===o)throw new Error("Message is incomplete.");r=o+1;f=String.fromCharCode.apply(null,Array.prototype.slice.call(t.slice(0,r)));e=t.byteLength>r?t.slice(r).buffer:null}else{if(i=n,s=i.indexOf(w.RecordSeparator),-1===s)throw new Error("Message is incomplete.");u=s+1;f=i.substring(0,u);e=i.length>u?i.substring(u):null}if(c=w.parse(f),h=JSON.parse(c[0]),h.type)throw new Error("Expected a handshake response from the server.");return[e,h]}}]),n}();!function(n){n[n.Invocation=1]="Invocation";n[n.StreamItem=2]="StreamItem";n[n.Completion=3]="Completion";n[n.StreamInvocation=4]="StreamInvocation";n[n.CancelInvocation=5]="CancelInvocation";n[n.Ping=6]="Ping";n[n.Close=7]="Close"}(t||(t={}));fe=function(){function n(){_classCallCheck(this,n);this.observers=[]}return _createClass(n,[{key:"next",value:function(n){var i=!0,r=!1,u=undefined,t,f,e;try{for(t=this.observers[Symbol.iterator]();!(i=(f=t.next()).done);i=!0)e=f.value,e.next(n)}catch(o){r=!0;u=o}finally{try{i||t.return==null||t.return()}finally{if(r)throw u;}}}},{key:"error",value:function(n){var i=!0,u=!1,f=undefined,t,e,r;try{for(t=this.observers[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)r=e.value,r.error&&r.error(n)}catch(o){u=!0;f=o}finally{try{i||t.return==null||t.return()}finally{if(u)throw f;}}}},{key:"complete",value:function(){var t=!0,r=!1,u=undefined,n,f,i;try{for(n=this.observers[Symbol.iterator]();!(t=(f=n.next()).done);t=!0)i=f.value,i.complete&&i.complete()}catch(e){r=!0;u=e}finally{try{t||n.return==null||n.return()}finally{if(r)throw u;}}}},{key:"subscribe",value:function(n){return this.observers.push(n),new gf(this,n)}}]),n}();!function(n){n.Disconnected="Disconnected";n.Connecting="Connecting";n.Connected="Connected";n.Disconnecting="Disconnecting";n.Reconnecting="Reconnecting"}(r||(r={}));var gs=function(){function i(u,f,o,s){var h=this;_classCallCheck(this,i);this._nextKeepAlive=0;this._freezeEventListener=function(){h._logger.log(n.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")};e.isRequired(u,"connection");e.isRequired(f,"logger");e.isRequired(o,"protocol");this.serverTimeoutInMilliseconds=3e4;this.keepAliveIntervalInMilliseconds=15e3;this._logger=f;this._protocol=o;this.connection=u;this._reconnectPolicy=s;this._handshakeProtocol=new ue;this.connection.onreceive=function(n){return h._processIncomingData(n)};this.connection.onclose=function(n){return h._connectionClosed(n)};this._callbacks={};this._methods={};this._closedCallbacks=[];this._reconnectingCallbacks=[];this._reconnectedCallbacks=[];this._invocationId=0;this._receivedHandshakeResponse=!1;this._connectionState=r.Disconnected;this._connectionStarted=!1;this._cachedPingMessage=this._protocol.writeMessage({type:t.Ping})}return _createClass(i,[{key:"start",value:function(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}},{key:"_startWithStateTransitions",value:function(){function u(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._connectionState!==r.Disconnected)){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state.")));case 2:return this._connectionState=r.Connecting,this._logger.log(n.Debug,"Starting HubConnection."),t.prev=3,t.next=6,this._startInternal();case 6:y.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener);this._connectionState=r.Connected;this._connectionStarted=!0;this._logger.log(n.Debug,"HubConnection connected successfully.");t.next=15;break;case 12:return t.prev=12,t.t0=t["catch"](3),t.abrupt("return",(this._connectionState=r.Disconnected,this._logger.log(n.Debug,"HubConnection failed to start successfully because of error '".concat(t.t0,"'.")),Promise.reject(t.t0)));case 15:case"end":return t.stop()}},i,this,[[3,12]])}));return u}()},{key:"_startInternal",value:function(){function r(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(){var t=this,r,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1,r=new Promise(function(n,i){t._handshakeResolver=n;t._handshakeRejecter=i}),i.next=4,this.connection.start(this._protocol.transferFormat);case 4:return i.prev=4,u={protocol:this._protocol.name,version:this._protocol.version},this._logger.log(n.Debug,"Sending handshake request."),i.next=9,this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(u));case 9:return this._logger.log(n.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),i.next=15,r;case 15:if(!this._stopDuringStartError){i.next=17;break}throw this._stopDuringStartError;case 17:i.next=27;break;case 19:return i.prev=19,i.t0=i["catch"](4),this._logger.log(n.Debug,"Hub handshake failed with error '".concat(i.t0,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),i.next=26,this.connection.stop(i.t0);case 26:throw i.t0;case 27:case"end":return i.stop()}},i,this,[[4,19]])}));return r}()},{key:"stop",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._startPromise,this._stopPromise=this._stopInternal(),t.next=4,this._stopPromise;case 4:return t.prev=4,t.next=7,n;case 7:t.next=11;break;case 9:t.prev=9;t.t0=t["catch"](4);case 11:case"end":return t.stop()}},t,this,[[4,9]])}));return i}()},{key:"_stopInternal",value:function(t){return this._connectionState===r.Disconnected?(this._logger.log(n.Debug,"Call to HubConnection.stop(".concat(t,") ignored because it is already in the disconnected state.")),Promise.resolve()):this._connectionState===r.Disconnecting?(this._logger.log(n.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState=r.Disconnecting,this._logger.log(n.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(n.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))}},{key:"stream",value:function(n){for(var u=this,e=arguments.length,o=new Array(e>1?e-1:0),f=1;f<e;f++)o[f-1]=arguments[f];var c=this._replaceStreamingParams(o),h=_slicedToArray(c,2),l=h[0],a=h[1],r=this._createStreamInvocation(n,o,a),s,i=new fe;return i.cancelCallback=function(){var n=u._createCancelInvocation(r.invocationId);return delete u._callbacks[r.invocationId],s.then(function(){return u._sendWithProtocol(n)})},this._callbacks[r.invocationId]=function(n,r){r?i.error(r):n&&(n.type===t.Completion?n.error?i.error(new Error(n.error)):i.complete():i.next(n.item))},s=this._sendWithProtocol(r).catch(function(n){i.error(n);delete u._callbacks[r.invocationId]}),this._launchStreams(l,s),i}},{key:"_sendMessage",value:function(n){return this._resetKeepAliveInterval(),this.connection.send(n)}},{key:"_sendWithProtocol",value:function(n){return this._sendMessage(this._protocol.writeMessage(n))}},{key:"send",value:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];var e=this._replaceStreamingParams(r),u=_slicedToArray(e,2),o=u[0],s=u[1],f=this._sendWithProtocol(this._createInvocation(n,r,!0,s));return this._launchStreams(o,f),f}},{key:"invoke",value:function(n){for(var i=this,u=arguments.length,f=new Array(u>1?u-1:0),r=1;r<u;r++)f[r-1]=arguments[r];var s=this._replaceStreamingParams(f),o=_slicedToArray(s,2),h=o[0],c=o[1],e=this._createInvocation(n,f,!1,c);return new Promise(function(n,r){i._callbacks[e.invocationId]=function(i,u){u?r(u):i&&(i.type===t.Completion?i.error?r(new Error(i.error)):n(i.result):r(new Error("Unexpected message type: ".concat(i.type))))};var u=i._sendWithProtocol(e).catch(function(n){r(n);delete i._callbacks[e.invocationId]});i._launchStreams(h,u)})}},{key:"on",value:function(n,t){n&&t&&(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),-1===this._methods[n].indexOf(t)&&this._methods[n].push(t))}},{key:"off",value:function(n,t){var i,r;n&&(n=n.toLowerCase(),i=this._methods[n],i&&(t?(r=i.indexOf(t),-1!==r&&(i.splice(r,1),0===i.length&&delete this._methods[n])):delete this._methods[n]))}},{key:"onclose",value:function(n){n&&this._closedCallbacks.push(n)}},{key:"onreconnecting",value:function(n){n&&this._reconnectingCallbacks.push(n)}},{key:"onreconnected",value:function(n){n&&this._reconnectedCallbacks.push(n)}},{key:"_processIncomingData",value:function(i){var u,c,r,e,o;if(this._cleanupTimeout(),this._receivedHandshakeResponse||(i=this._processHandshakeResponse(i),this._receivedHandshakeResponse=!0),i){var l=this._protocol.parseMessages(i,this._logger),f=!0,s=!1,h=undefined;try{for(u=l[Symbol.iterator]();!(f=(c=u.next()).done);f=!0){r=c.value;switch(r.type){case t.Invocation:this._invokeClientMethod(r);break;case t.StreamItem:case t.Completion:if(e=this._callbacks[r.invocationId],e){r.type===t.Completion&&delete this._callbacks[r.invocationId];try{e(r)}catch(i){this._logger.log(n.Error,"Stream callback threw error: ".concat(ne(i)))}}break;case t.Ping:break;case t.Close:this._logger.log(n.Information,"Close message received from server.");o=r.error?new Error("Server returned an error on close: "+r.error):void 0;!0===r.allowReconnect?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break;default:this._logger.log(n.Warning,"Invalid message type: ".concat(r.type,"."))}}}catch(a){s=!0;h=a}finally{try{f||u.return==null||u.return()}finally{if(s)throw h;}}}this._resetTimeoutPeriod()}},{key:"_processHandshakeResponse",value:function(t){var i,s,h,r,u,f,e,o;try{h=this._handshakeProtocol.parseHandshakeResponse(t);r=_slicedToArray(h,2);s=r[0];i=r[1]}catch(t){u="Error parsing handshake response: "+t;this._logger.log(n.Error,u);f=new Error(u);throw this._handshakeRejecter(f),f;}if(i.error){e="Server returned handshake error: "+i.error;this._logger.log(n.Error,e);o=new Error(e);throw this._handshakeRejecter(o),o;}return this._logger.log(n.Debug,"Server handshake complete."),this._handshakeResolver(),s}},{key:"_resetKeepAliveInterval",value:function(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}},{key:"_resetTimeoutPeriod",value:function(){var n=this,t;this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(function(){return n.serverTimeout()},this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle)||(t=this._nextKeepAlive-(new Date).getTime(),t<0&&(t=0),this._pingServerHandle=setTimeout(_asyncToGenerator(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n._connectionState===r.Connected)){t.next=9;break}return t.prev=1,t.next=4,n._sendMessage(n._cachedPingMessage);case 4:t.next=9;break;case 6:t.prev=6;t.t0=t["catch"](1);n._cleanupPingTimer();case 9:case"end":return t.stop()}},i,null,[[1,6]])})),t))}},{key:"serverTimeout",value:function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}},{key:"_invokeClientMethod",value:function(t){var u=this,i=this._methods[t.target.toLowerCase()],r;if(i){try{i.forEach(function(n){return n.apply(u,t.arguments)})}catch(i){this._logger.log(n.Error,"A callback for the method ".concat(t.target.toLowerCase()," threw error '").concat(i,"'."))}t.invocationId&&(r="Server requested a response, which is not supported in this version of the client.",this._logger.log(n.Error,r),this._stopPromise=this._stopInternal(new Error(r)))}else this._logger.log(n.Warning,"No client method with the name '".concat(t.target,"' found."))}},{key:"_connectionClosed",value:function(t){this._logger.log(n.Debug,"HubConnection.connectionClosed(".concat(t,") called while in state ").concat(this._connectionState,"."));this._stopDuringStartError=this._stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete.");this._handshakeResolver&&this._handshakeResolver();this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed."));this._cleanupTimeout();this._cleanupPingTimer();this._connectionState===r.Disconnecting?this._completeClose(t):this._connectionState===r.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===r.Connected&&this._completeClose(t)}},{key:"_completeClose",value:function(t){var i=this;if(this._connectionStarted){this._connectionState=r.Disconnected;this._connectionStarted=!1;y.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(function(n){return n.apply(i,[t])})}catch(u){this._logger.log(n.Error,"An onclose callback called with error '".concat(t,"' threw error '").concat(u,"'."))}}}},{key:"_reconnect",value:function(){function u(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function i(t){var e=this,o,f,s,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o=Date.now(),f=0,s=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(f++,0,s),!(null===u)){i.next=4;break}return i.abrupt("return",(this._logger.log(n.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(t)));case 4:if(!(this._connectionState=r.Reconnecting,t?this._logger.log(n.Information,"Connection reconnecting because of error '".concat(t,"'.")):this._logger.log(n.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length)){i.next=8;break}try{this._reconnectingCallbacks.forEach(function(n){return n.apply(e,[t])})}catch(o){this._logger.log(n.Error,"An onreconnecting callback called with error '".concat(t,"' threw error '").concat(o,"'."))}if(!(this._connectionState!==r.Reconnecting)){i.next=8;break}return i.abrupt("return",void this._logger.log(n.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."));case 8:if(!(null!==u)){i.next=32;break}return this._logger.log(n.Information,"Reconnect attempt number ".concat(f," will start in ").concat(u," ms.")),i.next=12,new Promise(function(n){e._reconnectDelayHandle=setTimeout(n,u)});case 12:if(this._reconnectDelayHandle=void 0,!(this._connectionState!==r.Reconnecting)){i.next=15;break}return i.abrupt("return",void this._logger.log(n.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."));case 15:return i.prev=15,i.next=18,this._startInternal();case 18:if(this._connectionState=r.Connected,this._logger.log(n.Information,"HubConnection reconnected successfully."),!(0!==this._reconnectedCallbacks.length)){i.next=22;break}try{this._reconnectedCallbacks.forEach(function(n){return n.apply(e,[e.connection.connectionId])})}catch(t){this._logger.log(n.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(t,"'."))}case 22:return i.abrupt("return");case 25:if(i.prev=25,i.t0=i["catch"](15),!(this._logger.log(n.Information,"Reconnect attempt failed because of error '".concat(i.t0,"'.")),this._connectionState!==r.Reconnecting)){i.next=29;break}return i.abrupt("return",(this._logger.log(n.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),void(this._connectionState===r.Disconnecting&&this._completeClose())));case 29:s=_instanceof(i.t0,Error)?i.t0:new Error(i.t0.toString());u=this._getNextRetryDelay(f++,Date.now()-o,s);case 30:i.next=8;break;case 32:this._logger.log(n.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-o," ms and ").concat(f," failed attempts. Connection disconnecting."));this._completeClose();case 33:case"end":return i.stop()}},i,this,[[15,25]])}));return u}()},{key:"_getNextRetryDelay",value:function(t,i,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:t,retryReason:r})}catch(r){return this._logger.log(n.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(t,", ").concat(i,") threw error '").concat(r,"'.")),null}}},{key:"_cancelCallbacksWithError",value:function(t){var r=this,i=this._callbacks;this._callbacks={};Object.keys(i).forEach(function(u){var f=i[u];try{f(null,t)}catch(i){r._logger.log(n.Error,"Stream 'error' callback called with '".concat(t,"' threw error: ").concat(ne(i)))}})}},{key:"_cleanupPingTimer",value:function(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}},{key:"_cleanupTimeout",value:function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}},{key:"_createInvocation",value:function(n,i,r,u){if(r)return 0!==u.length?{arguments:i,streamIds:u,target:n,type:t.Invocation}:{arguments:i,target:n,type:t.Invocation};var f=this._invocationId;return this._invocationId++,0!==u.length?{arguments:i,invocationId:f.toString(),streamIds:u,target:n,type:t.Invocation}:{arguments:i,invocationId:f.toString(),target:n,type:t.Invocation}}},{key:"_launchStreams",value:function(n,t){var i=this,r,u;if(0!==n.length){t||(t=Promise.resolve());r=function(r){n[r].subscribe({complete:function(){t=t.then(function(){return i._sendWithProtocol(i._createCompletionMessage(r))})},error:function(n){var u;u=_instanceof(n,Error)?n.message:n&&n.toString?n.toString():"Unknown error";t=t.then(function(){return i._sendWithProtocol(i._createCompletionMessage(r,u))})},next:function(n){t=t.then(function(){return i._sendWithProtocol(i._createStreamItemMessage(r,n))})}})};for(u in n)r(u)}}},{key:"_replaceStreamingParams",value:function(n){for(var i,r,u=[],f=[],t=0;t<n.length;t++)i=n[t],this._isObservable(i)&&(r=this._invocationId,this._invocationId++,u[r]=i,f.push(r.toString()),n.splice(t,1));return[u,f]}},{key:"_isObservable",value:function(n){return n&&n.subscribe&&"function"==typeof n.subscribe}},{key:"_createStreamInvocation",value:function(n,i,r){var u=this._invocationId;return this._invocationId++,0!==r.length?{arguments:i,invocationId:u.toString(),streamIds:r,target:n,type:t.StreamInvocation}:{arguments:i,invocationId:u.toString(),target:n,type:t.StreamInvocation}}},{key:"_createCancelInvocation",value:function(n){return{invocationId:n,type:t.CancelInvocation}}},{key:"_createStreamItemMessage",value:function(n,i){return{invocationId:n,item:i,type:t.StreamItem}}},{key:"_createCompletionMessage",value:function(n,i,r){return i?{error:i,invocationId:n,type:t.Completion}:{invocationId:n,result:r,type:t.Completion}}},{key:"state",get:function(){return this._connectionState}},{key:"connectionId",get:function(){return this.connection&&this.connection.connectionId||null}},{key:"baseUrl",get:function(){return this.connection.baseUrl||""},set:function(n){if(this._connectionState!==r.Disconnected&&this._connectionState!==r.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}}],[{key:"create",value:function(n,t,r,u){return new i(n,t,r,u)}}]),i}(),nh=function(){function i(){_classCallCheck(this,i);this.name="json";this.version=1;this.transferFormat=o.Text}return _createClass(i,[{key:"parseMessages",value:function(i,r){var f,c,l,u;if("string"!=typeof i)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!i)return[];null===r&&(r=k.instance);var a=w.parse(i),o=[],e=!0,s=!1,h=undefined;try{for(f=a[Symbol.iterator]();!(e=(c=f.next()).done);e=!0){if(l=c.value,u=JSON.parse(l),"number"!=typeof u.type)throw new Error("Invalid payload.");switch(u.type){case t.Invocation:this._isInvocationMessage(u);break;case t.StreamItem:this._isStreamItemMessage(u);break;case t.Completion:this._isCompletionMessage(u);break;case t.Ping:case t.Close:break;default:r.log(n.Information,"Unknown message type '"+u.type+"' ignored.");continue}o.push(u)}}catch(v){s=!0;h=v}finally{try{e||f.return==null||f.return()}finally{if(s)throw h;}}return o}},{key:"writeMessage",value:function(n){return w.write(JSON.stringify(n))}},{key:"_isInvocationMessage",value:function(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message.");void 0!==n.invocationId&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}},{key:"_isStreamItemMessage",value:function(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),void 0===n.item)throw new Error("Invalid payload for StreamItem message.");}},{key:"_isCompletionMessage",value:function(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message.");this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}},{key:"_assertNotEmptyString",value:function(n,t){if("string"!=typeof n||""===n)throw new Error(t);}}]),i}(),th={trace:n.Trace,debug:n.Debug,info:n.Information,information:n.Information,warn:n.Warning,warning:n.Warning,error:n.Error,critical:n.Critical,none:n.None},ih=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"configureLogging",value:function(n){if(e.isRequired(n,"logging"),void 0!==n.log)this.logger=n;else if("string"==typeof n){var t=function(n){var t=th[n.toLowerCase()];if(void 0!==t)return t;throw new Error("Unknown log level: ".concat(n));}(n);this.logger=new at(t)}else this.logger=new at(n);return this}},{key:"withUrl",value:function(n,t){return e.isRequired(n,"url"),e.isNotEmpty(n,"url"),this.url=n,this.httpConnectionOptions="object"==_typeof(t)?_objectSpread({},this.httpConnectionOptions,{},t):_objectSpread({},this.httpConnectionOptions,{transport:t}),this}},{key:"withHubProtocol",value:function(n){return e.isRequired(n,"protocol"),this.protocol=n,this}},{key:"withAutomaticReconnect",value:function(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=n?Array.isArray(n)?new kf(n):n:new kf,this}},{key:"build",value:function(){var n=this.httpConnectionOptions||{},t;if(void 0===n.logger&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");return t=new ks(this.url,n),gs.create(t,this.logger||k.instance,this.protocol||new nh,this.reconnectPolicy)}}]),n}(),g=4294967295;yt=("undefined"==typeof process||"never"!==process.env.TEXT_ENCODING)&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;var ni=yt?new TextEncoder:void 0,rh=yt?"undefined"!=typeof process&&"force"!==process.env.TEXT_ENCODING?200:0:g,uh=(null==ni?void 0:ni.encodeInto)?function(n,t,i){ni.encodeInto(n,t.subarray(i))}:function(n,t,i){t.set(ni.encode(n),i)};var fr,fh=yt?new TextDecoder:null,eh=yt?"undefined"!=typeof process&&"force"!==process.env.TEXT_DECODER?200:0:g,ti=function(n,t){this.type=n;this.data=t},oh=(fr=function(n,t){return(fr=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fr(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),p=function(n){function t(i){var r=n.call(this,i)||this,u=Object.create(t.prototype);return Object.setPrototypeOf(r,u),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return oh(t,n),t}(Error),sh={type:-1,encode:function(n){var i,r,t,u;return _instanceof(n,Date)?function(n){var r,i=n.sec,u=n.nsec,t,f,e;return i>=0&&u>=0&&i<=17179869183?0===u&&i<=4294967295?(t=new Uint8Array(4),(r=new DataView(t.buffer)).setUint32(0,i),t):(f=i/4294967296,e=4294967295&i,t=new Uint8Array(8),(r=new DataView(t.buffer)).setUint32(0,u<<2|3&f),r.setUint32(4,e),t):(t=new Uint8Array(12),(r=new DataView(t.buffer)).setUint32(0,u),ee(r,4,i),t)}((t=1e6*((i=n.getTime())-1e3*(r=Math.floor(i/1e3))),{sec:r+(u=Math.floor(t/1e9)),nsec:t-1e9*u})):null},decode:function(n){var t=function(n){var t=new DataView(n.buffer,n.byteOffset,n.byteLength),i;switch(n.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:return i=t.getUint32(0),{sec:4294967296*(3&i)+t.getUint32(4),nsec:i>>>2};case 12:return{sec:oe(t,4),nsec:t.getUint32(0)};default:throw new p("Unrecognized data size for timestamp (expected 4, 8, or 12): "+n.length);}}(n);return new Date(1e3*t.sec+t.nsec/1e6)}},ce=function(){function n(){this.builtInEncoders=[];this.builtInDecoders=[];this.encoders=[];this.decoders=[];this.register(sh)}return n.prototype.register=function(n){var t=n.type,r=n.encode,u=n.decode,i;t>=0?(this.encoders[t]=r,this.decoders[t]=u):(i=1+t,this.builtInEncoders[i]=r,this.builtInDecoders[i]=u)},n.prototype.tryToEncode=function(n,t){for(var r,u,i=0;i<this.builtInEncoders.length;i++)if(null!=(r=this.builtInEncoders[i])&&null!=(u=r(n,t)))return new ti(-1-i,u);for(i=0;i<this.encoders.length;i++)if(null!=(r=this.encoders[i])&&null!=(u=r(n,t)))return new ti(i,u);return _instanceof(n,ti)?n:null},n.prototype.decode=function(n,t,i){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(n,t,i):new ti(t,n)},n.defaultCodec=new n,n}();le=function(){function n(n,t,i,r,u,f,e,o){void 0===n&&(n=ce.defaultCodec);void 0===t&&(t=void 0);void 0===i&&(i=100);void 0===r&&(r=2048);void 0===u&&(u=!1);void 0===f&&(f=!1);void 0===e&&(e=!1);void 0===o&&(o=!1);this.extensionCodec=n;this.context=t;this.maxDepth=i;this.initialBufferSize=r;this.sortKeys=u;this.forceFloat32=f;this.ignoreUndefined=e;this.forceIntegerToFloat=o;this.pos=0;this.view=new DataView(new ArrayBuffer(this.initialBufferSize));this.bytes=new Uint8Array(this.view.buffer)}return n.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},n.prototype.reinitializeState=function(){this.pos=0},n.prototype.encode=function(n){return this.reinitializeState(),this.doEncode(n,1),this.getUint8Array()},n.prototype.doEncode=function(n,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==n?this.encodeNil():"boolean"==typeof n?this.encodeBoolean(n):"number"==typeof n?this.encodeNumber(n):"string"==typeof n?this.encodeString(n):this.encodeObject(n,t)},n.prototype.ensureBufferSizeToWrite=function(n){var t=this.pos+n;this.view.byteLength<t&&this.resizeBuffer(2*t)},n.prototype.resizeBuffer=function(n){var t=new ArrayBuffer(n),i=new Uint8Array(t),r=new DataView(t);i.set(this.bytes);this.view=r;this.bytes=i},n.prototype.encodeNil=function(){this.writeU8(192)},n.prototype.encodeBoolean=function(n){!1===n?this.writeU8(194):this.writeU8(195)},n.prototype.encodeNumber=function(n){Number.isSafeInteger(n)&&!this.forceIntegerToFloat?n>=0?n<128?this.writeU8(n):n<256?(this.writeU8(204),this.writeU8(n)):n<65536?(this.writeU8(205),this.writeU16(n)):n<4294967296?(this.writeU8(206),this.writeU32(n)):(this.writeU8(207),this.writeU64(n)):n>=-32?this.writeU8(224|n+32):n>=-128?(this.writeU8(208),this.writeI8(n)):n>=-32768?(this.writeU8(209),this.writeI16(n)):n>=-2147483648?(this.writeU8(210),this.writeI32(n)):(this.writeU8(211),this.writeI64(n)):this.forceFloat32?(this.writeU8(202),this.writeF32(n)):(this.writeU8(203),this.writeF64(n))},n.prototype.writeStringHeader=function(n){if(n<32)this.writeU8(160+n);else if(n<256)this.writeU8(217),this.writeU8(n);else if(n<65536)this.writeU8(218),this.writeU16(n);else{if(!(n<4294967296))throw new Error("Too long string: "+n+" bytes in UTF-8");this.writeU8(219);this.writeU32(n)}},n.prototype.encodeString=function(n){if(n.length>rh){var t=se(n);this.ensureBufferSizeToWrite(5+t);this.writeStringHeader(t);uh(n,this.bytes,this.pos);this.pos+=t}else t=se(n),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(n,t,i){for(var r,e,o=n.length,u=i,f=0;f<o;)r=n.charCodeAt(f++),0!=(4294967168&r)?(0==(4294965248&r)?t[u++]=r>>6&31|192:(r>=55296&&r<=56319&&f<o&&(e=n.charCodeAt(f),56320==(64512&e)&&(++f,r=((1023&r)<<10)+(1023&e)+65536)),0==(4294901760&r)?(t[u++]=r>>12&15|224,t[u++]=r>>6&63|128):(t[u++]=r>>18&7|240,t[u++]=r>>12&63|128,t[u++]=r>>6&63|128)),t[u++]=63&r|128):t[u++]=r}(n,this.bytes,this.pos),this.pos+=t},n.prototype.encodeObject=function(n,t){var i=this.extensionCodec.tryToEncode(n,this.context);if(null!=i)this.encodeExtension(i);else if(Array.isArray(n))this.encodeArray(n,t);else if(ArrayBuffer.isView(n))this.encodeBinary(n);else{if("object"!=_typeof(n))throw new Error("Unrecognized object: "+Object.prototype.toString.apply(n));this.encodeMap(n,t)}},n.prototype.encodeBinary=function(n){var t=n.byteLength,i;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198);this.writeU32(t)}i=ii(n);this.writeU8a(i)},n.prototype.encodeArray=function(n,t){var i=n.length,r,u,f;if(i<16)this.writeU8(144+i);else if(i<65536)this.writeU8(220),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large array: "+i);this.writeU8(221);this.writeU32(i)}for(r=0,u=n;r<u.length;r++)f=u[r],this.doEncode(f,t+1)},n.prototype.countWithoutUndefined=function(n,t){for(var r=0,i=0,u=t;i<u.length;i++)void 0!==n[u[i]]&&r++;return r},n.prototype.encodeMap=function(n,t){var r=Object.keys(n),i,u,f,e,o;if(this.sortKeys&&r.sort(),i=this.ignoreUndefined?this.countWithoutUndefined(n,r):r.length,i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: "+i);this.writeU8(223);this.writeU32(i)}for(u=0,f=r;u<f.length;u++)e=f[u],o=n[e],this.ignoreUndefined&&void 0===o||(this.encodeString(e),this.doEncode(o,t+1))},n.prototype.encodeExtension=function(n){var t=n.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201);this.writeU32(t)}this.writeI8(n.type);this.writeU8a(n.data)},n.prototype.writeU8=function(n){this.ensureBufferSizeToWrite(1);this.view.setUint8(this.pos,n);this.pos++},n.prototype.writeU8a=function(n){var t=n.length;this.ensureBufferSizeToWrite(t);this.bytes.set(n,this.pos);this.pos+=t},n.prototype.writeI8=function(n){this.ensureBufferSizeToWrite(1);this.view.setInt8(this.pos,n);this.pos++},n.prototype.writeU16=function(n){this.ensureBufferSizeToWrite(2);this.view.setUint16(this.pos,n);this.pos+=2},n.prototype.writeI16=function(n){this.ensureBufferSizeToWrite(2);this.view.setInt16(this.pos,n);this.pos+=2},n.prototype.writeU32=function(n){this.ensureBufferSizeToWrite(4);this.view.setUint32(this.pos,n);this.pos+=4},n.prototype.writeI32=function(n){this.ensureBufferSizeToWrite(4);this.view.setInt32(this.pos,n);this.pos+=4},n.prototype.writeF32=function(n){this.ensureBufferSizeToWrite(4);this.view.setFloat32(this.pos,n);this.pos+=4},n.prototype.writeF64=function(n){this.ensureBufferSizeToWrite(8);this.view.setFloat64(this.pos,n);this.pos+=8},n.prototype.writeU64=function(n){this.ensureBufferSizeToWrite(8),function(n,t,i){var r=i/4294967296,u=i;n.setUint32(t,r);n.setUint32(t+4,u)}(this.view,this.pos,n);this.pos+=8},n.prototype.writeI64=function(n){this.ensureBufferSizeToWrite(8);ee(this.view,this.pos,n);this.pos+=8},n}();var hh=function(){function n(n,t){void 0===n&&(n=16);void 0===t&&(t=16);this.maxKeyLength=n;this.maxLengthPerKey=t;this.hit=0;this.miss=0;this.caches=[];for(var i=0;i<this.maxKeyLength;i++)this.caches.push([])}return n.prototype.canBeCached=function(n){return n>0&&n<=this.maxKeyLength},n.prototype.find=function(n,t,i){var r,f;n:for(r=0,f=this.caches[i-1];r<f.length;r++){for(var e=f[r],o=e.bytes,u=0;u<i;u++)if(o[u]!==n[t+u])continue n;return e.str}return null},n.prototype.store=function(n,t){var i=this.caches[n.length-1],r={bytes:n,str:t};i.length>=this.maxLengthPerKey?i[Math.random()*i.length|0]=r:i.push(r)},n.prototype.decode=function(n,t,i){var u=this.find(n,t,i),r,f;return null!=u?(this.hit++,u):(this.miss++,r=he(n,t,i),f=Uint8Array.prototype.slice.call(n,t,t+i),this.store(f,r),r)},n}(),or=function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==e[0]&&2!==e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},ae=function(n){function i(i){t[i]=n[i]&&function(t){return new Promise(function(r,u){!function(n,t,i,r){Promise.resolve(r).then(function(t){n({value:t,done:i})},t)}(r,u,(t=n[i](t)).done,t.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=n[Symbol.asyncIterator];return r?r.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t)},rt=function rt(n){return _instanceof(this,rt)?(this.v=n,this):new rt(n)},ch=function(n,t,i){function e(n){o[n]&&(u[n]=function(t){return new Promise(function(i,u){r.push([n,t,i,u])>1||f(n,t)})})}function f(n,t){try{_instanceof((i=o[n](t)).value,rt)?Promise.resolve(i.value.v).then(h,c):s(r[0][2],i)}catch(n){s(r[0][3],n)}var i}function h(n){f("next",n)}function c(n){f("throw",n)}function s(n,t){n(t);r.shift();r.length&&f(r[0][0],r[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,o=i.apply(n,t||[]),r=[];return u={},e("next"),e("throw"),e("return"),u[Symbol.asyncIterator]=function(){return this},u},sr=new DataView(new ArrayBuffer(0)),lh=new Uint8Array(sr.buffer),hr=function(){try{sr.getInt8(0)}catch(n){return n.constructor}throw new Error("never reached");}(),ve=new hr("Insufficient data"),ah=new hh,vh=function(){function n(n,t,i,r,u,f,e,o){void 0===n&&(n=ce.defaultCodec);void 0===t&&(t=void 0);void 0===i&&(i=g);void 0===r&&(r=g);void 0===u&&(u=g);void 0===f&&(f=g);void 0===e&&(e=g);void 0===o&&(o=ah);this.extensionCodec=n;this.context=t;this.maxStrLength=i;this.maxBinLength=r;this.maxArrayLength=u;this.maxMapLength=f;this.maxExtLength=e;this.keyDecoder=o;this.totalPos=0;this.pos=0;this.view=sr;this.bytes=lh;this.headByte=-1;this.stack=[]}return n.prototype.reinitializeState=function(){this.totalPos=0;this.headByte=-1;this.stack.length=0},n.prototype.setBuffer=function(n){this.bytes=ii(n);this.view=function(n){if(_instanceof(n,ArrayBuffer))return new DataView(n);var t=ii(n);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes);this.pos=0},n.prototype.appendBuffer=function(n){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),r=ii(n),i=new Uint8Array(t.length+r.length);i.set(t);i.set(r,t.length);this.setBuffer(i)}else this.setBuffer(n)},n.prototype.hasRemaining=function(n){return this.view.byteLength-this.pos>=n},n.prototype.createExtraByteError=function(n){var t=this.view,i=this.pos;return new RangeError("Extra "+(t.byteLength-i)+" of "+t.byteLength+" byte(s) found at buffer["+n+"]")},n.prototype.decode=function(n){this.reinitializeState();this.setBuffer(n);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},n.prototype.decodeMulti=function(n){return or(this,function(t){switch(t.label){case 0:this.reinitializeState();this.setBuffer(n);t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},n.prototype.decodeAsync=function(n){var i,r,f,e,o,u,t;return o=this,void 0,t=function(){var t,o,s,h,u,c,l,a;return or(this,function(v){switch(v.label){case 0:t=!1;v.label=1;case 1:v.trys.push([1,6,7,12]);i=ae(n);v.label=2;case 2:return[4,i.next()];case 3:if((r=v.sent()).done)return[3,5];if(s=r.value,t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s);try{o=this.doDecodeSync();t=!0}catch(n){if(!_instanceof(n,hr))throw n;}this.totalPos+=this.pos;v.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return h=v.sent(),f={error:h},[3,12];case 7:return v.trys.push([7,,10,11]),r&&!r.done&&(e=i.return)?[4,e.call(i)]:[3,9];case 8:v.sent();v.label=9;case 9:return[3,11];case 10:if(f)throw f.error;return[7];case 11:return[7];case 12:if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw c=(u=this).headByte,l=u.pos,a=u.totalPos,new RangeError("Insufficient data in parsing "+er(c)+" at "+a+" ("+l+" in the current buffer)");}})},new((u=void 0)||(u=Promise))(function(n,i){function f(n){try{r(t.next(n))}catch(n){i(n)}}function e(n){try{r(t.throw(n))}catch(n){i(n)}}function r(t){var i;t.done?n(t.value):(i=t.value,_instanceof(i,u)?i:new u(function(n){n(i)})).then(f,e)}r((t=t.apply(o,[])).next())})},n.prototype.decodeArrayStream=function(n){return this.decodeMultiAsync(n,!0)},n.prototype.decodeStream=function(n){return this.decodeMultiAsync(n,!1)},n.prototype.decodeMultiAsync=function(n,t){return ch(this,arguments,function(){var f,i,r,u,o,s,h,e,c;return or(this,function(l){switch(l.label){case 0:f=t;i=-1;l.label=1;case 1:l.trys.push([1,13,14,19]);r=ae(n);l.label=2;case 2:return[4,rt(r.next())];case 3:if((u=l.sent()).done)return[3,12];if(o=u.value,t&&0===i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);f&&(i=this.readArraySize(),f=!1,this.complete());l.label=4;case 4:l.trys.push([4,9,,10]);l.label=5;case 5:return[4,rt(this.doDecodeSync())];case 6:return[4,l.sent()];case 7:return l.sent(),0==--i?[3,8]:[3,5];case 8:return[3,10];case 9:if(!_instanceof(s=l.sent(),hr))throw s;return[3,10];case 10:this.totalPos+=this.pos;l.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return h=l.sent(),e={error:h},[3,19];case 14:return l.trys.push([14,,17,18]),u&&!u.done&&(c=r.return)?[4,rt(c.call(r))]:[3,16];case 15:l.sent();l.label=16;case 16:return[3,18];case 17:if(e)throw e.error;return[7];case 18:return[7];case 19:return[2]}})})},n.prototype.doDecodeSync=function(){var t,n,u,i,f,r,e;n:for(;;){if(t=this.readHeadByte(),n=void 0,t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){if(0!=(i=t-128)){this.pushMapState(i);this.complete();continue n}n={}}else if(t<160){if(0!=(i=t-144)){this.pushArrayState(i);this.complete();continue n}n=[]}else u=t-160,n=this.decodeUtf8String(u,0);else if(192===t)n=null;else if(194===t)n=!1;else if(195===t)n=!0;else if(202===t)n=this.readF32();else if(203===t)n=this.readF64();else if(204===t)n=this.readU8();else if(205===t)n=this.readU16();else if(206===t)n=this.readU32();else if(207===t)n=this.readU64();else if(208===t)n=this.readI8();else if(209===t)n=this.readI16();else if(210===t)n=this.readI32();else if(211===t)n=this.readI64();else if(217===t)u=this.lookU8(),n=this.decodeUtf8String(u,1);else if(218===t)u=this.lookU16(),n=this.decodeUtf8String(u,2);else if(219===t)u=this.lookU32(),n=this.decodeUtf8String(u,4);else if(220===t){if(0!==(i=this.readU16())){this.pushArrayState(i);this.complete();continue n}n=[]}else if(221===t){if(0!==(i=this.readU32())){this.pushArrayState(i);this.complete();continue n}n=[]}else if(222===t){if(0!==(i=this.readU16())){this.pushMapState(i);this.complete();continue n}n={}}else if(223===t){if(0!==(i=this.readU32())){this.pushMapState(i);this.complete();continue n}n={}}else if(196===t)i=this.lookU8(),n=this.decodeBinary(i,1);else if(197===t)i=this.lookU16(),n=this.decodeBinary(i,2);else if(198===t)i=this.lookU32(),n=this.decodeBinary(i,4);else if(212===t)n=this.decodeExtension(1,0);else if(213===t)n=this.decodeExtension(2,0);else if(214===t)n=this.decodeExtension(4,0);else if(215===t)n=this.decodeExtension(8,0);else if(216===t)n=this.decodeExtension(16,0);else if(199===t)i=this.lookU8(),n=this.decodeExtension(i,1);else if(200===t)i=this.lookU16(),n=this.decodeExtension(i,2);else{if(201!==t)throw new p("Unrecognized type byte: "+er(t));i=this.lookU32();n=this.decodeExtension(i,4)}for(this.complete(),f=this.stack;f.length>0;)if(r=f[f.length-1],0===r.type){if(r.array[r.position]=n,r.position++,r.position!==r.size)continue n;f.pop();n=r.array}else{if(1===r.type){if("string"!=(e=_typeof(n))&&"number"!==e)throw new p("The type of key must be string or number but "+_typeof(n));if("__proto__"===n)throw new p("The key __proto__ is not allowed");r.key=n;r.type=2;continue n}if(r.map[r.key]=n,r.readCount++,r.readCount!==r.size){r.key=null;r.type=1;continue n}f.pop();n=r.map}return n}},n.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},n.prototype.complete=function(){this.headByte=-1},n.prototype.readArraySize=function(){var n=this.readHeadByte();switch(n){case 220:return this.readU16();case 221:return this.readU32();default:if(n<160)return n-144;throw new p("Unrecognized array type byte: "+er(n));}},n.prototype.pushMapState=function(n){if(n>this.maxMapLength)throw new p("Max length exceeded: map length ("+n+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:n,key:null,readCount:0,map:{}})},n.prototype.pushArrayState=function(n){if(n>this.maxArrayLength)throw new p("Max length exceeded: array length ("+n+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:n,array:new Array(n),position:0})},n.prototype.decodeUtf8String=function(n,t){var r,u,i;if(n>this.maxStrLength)throw new p("Max length exceeded: UTF-8 byte length ("+n+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+t+n)throw ve;return i=this.pos+t,u=this.stateIsMapKey()&&(null===(r=this.keyDecoder)||void 0===r?void 0:r.canBeCached(n))?this.keyDecoder.decode(this.bytes,i,n):n>eh?function(n,t,i){var r=n.subarray(t,t+i);return fh.decode(r)}(this.bytes,i,n):he(this.bytes,i,n),this.pos+=t+n,u},n.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},n.prototype.decodeBinary=function(n,t){if(n>this.maxBinLength)throw new p("Max length exceeded: bin length ("+n+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(n+t))throw ve;var i=this.pos+t,r=this.bytes.subarray(i,i+n);return this.pos+=t+n,r},n.prototype.decodeExtension=function(n,t){if(n>this.maxExtLength)throw new p("Max length exceeded: ext length ("+n+") > maxExtLength ("+this.maxExtLength+")");var i=this.view.getInt8(this.pos+t),r=this.decodeBinary(n,t+1);return this.extensionCodec.decode(r,i,this.context)},n.prototype.lookU8=function(){return this.view.getUint8(this.pos)},n.prototype.lookU16=function(){return this.view.getUint16(this.pos)},n.prototype.lookU32=function(){return this.view.getUint32(this.pos)},n.prototype.readU8=function(){var n=this.view.getUint8(this.pos);return this.pos++,n},n.prototype.readI8=function(){var n=this.view.getInt8(this.pos);return this.pos++,n},n.prototype.readU16=function(){var n=this.view.getUint16(this.pos);return this.pos+=2,n},n.prototype.readI16=function(){var n=this.view.getInt16(this.pos);return this.pos+=2,n},n.prototype.readU32=function(){var n=this.view.getUint32(this.pos);return this.pos+=4,n},n.prototype.readI32=function(){var n=this.view.getInt32(this.pos);return this.pos+=4,n},n.prototype.readU64=function(){var n,t,i=(n=this.view,t=this.pos,4294967296*n.getUint32(t)+n.getUint32(t+4));return this.pos+=8,i},n.prototype.readI64=function(){var n=oe(this.view,this.pos);return this.pos+=8,n},n.prototype.readF32=function(){var n=this.view.getFloat32(this.pos);return this.pos+=4,n},n.prototype.readF64=function(){var n=this.view.getFloat64(this.pos);return this.pos+=8,n},n}(),nt=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"write",value:function(n){var t=n.byteLength||n.length,i=[],u,r;do u=127&t,t>>=7,t>0&&(u|=128),i.push(u);while(t>0);return t=n.byteLength||n.length,r=new Uint8Array(i.length+t),r.set(i,0),r.set(n,i.length),r.buffer}},{key:"parse",value:function(n){for(var e=[],r=new Uint8Array(n),o=[0,7,14,21,28],i=0;i<n.byteLength;){var u=void 0,t=0,f=0;do u=r[i+t],f|=(127&u)<<o[t],t++;while(t<Math.min(5,n.byteLength-i)&&0!=(128&u));if(0!=(128&u)&&t<5)throw new Error("Cannot read message size.");if(5===t&&u>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(r.byteLength>=i+t+f))throw new Error("Incomplete message.");e.push(r.slice?r.slice(i+t,i+t+f):r.subarray(i+t,i+t+f));i=i+t+f}return e}}]),n}(),yh=new Uint8Array([145,t.Ping]),ph=function(){function i(n){_classCallCheck(this,i);this.name="messagepack";this.version=1;this.transferFormat=o.Binary;this._errorResult=1;this._voidResult=2;this._nonVoidResult=3;n=n||{};this._encoder=new le(n.extensionCodec,n.context,n.maxDepth,n.initialBufferSize,n.sortKeys,n.forceFloat32,n.ignoreUndefined,n.forceIntegerToFloat);this._decoder=new vh(n.extensionCodec,n.context,n.maxStrLength,n.maxBinLength,n.maxArrayLength,n.maxMapLength,n.maxExtLength)}return _createClass(i,[{key:"parseMessages",value:function(n,t){var i,r,h,c,f;if(!(i=n)||"undefined"==typeof ArrayBuffer||!(_instanceof(i,ArrayBuffer)||i.constructor&&"ArrayBuffer"===i.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");null===t&&(t=k.instance);var l=nt.parse(n),e=[],u=!0,o=!1,s=undefined;try{for(r=l[Symbol.iterator]();!(u=(h=r.next()).done);u=!0)c=h.value,f=this._parseMessage(c,t),f&&e.push(f)}catch(a){o=!0;s=a}finally{try{u||r.return==null||r.return()}finally{if(o)throw s;}}return e}},{key:"writeMessage",value:function(n){switch(n.type){case t.Invocation:return this._writeInvocation(n);case t.StreamInvocation:return this._writeStreamInvocation(n);case t.StreamItem:return this._writeStreamItem(n);case t.Completion:return this._writeCompletion(n);case t.Ping:return nt.write(yh);case t.CancelInvocation:return this._writeCancelInvocation(n);default:throw new Error("Invalid message type.");}}},{key:"_parseMessage",value:function(i,r){var u,f;if(0===i.length)throw new Error("Invalid payload.");if(u=this._decoder.decode(i),0===u.length||!_instanceof(u,Array))throw new Error("Invalid payload.");f=u[0];switch(f){case t.Invocation:return this._createInvocationMessage(this._readHeaders(u),u);case t.StreamItem:return this._createStreamItemMessage(this._readHeaders(u),u);case t.Completion:return this._createCompletionMessage(this._readHeaders(u),u);case t.Ping:return this._createPingMessage(u);case t.Close:return this._createCloseMessage(u);default:return r.log(n.Information,"Unknown message type '"+f+"' ignored."),null}}},{key:"_createCloseMessage",value:function(n){if(n.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:n.length>=3?n[2]:void 0,error:n[1],type:t.Close}}},{key:"_createPingMessage",value:function(n){if(n.length<1)throw new Error("Invalid payload for Ping message.");return{type:t.Ping}}},{key:"_createInvocationMessage",value:function(n,i){if(i.length<5)throw new Error("Invalid payload for Invocation message.");var r=i[2];return r?{arguments:i[4],headers:n,invocationId:r,streamIds:[],target:i[3],type:t.Invocation}:{arguments:i[4],headers:n,streamIds:[],target:i[3],type:t.Invocation}}},{key:"_createStreamItemMessage",value:function(n,i){if(i.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:n,invocationId:i[2],item:i[3],type:t.StreamItem}}},{key:"_createCompletionMessage",value:function(n,i){var r,u,f;if(i.length<4)throw new Error("Invalid payload for Completion message.");if(r=i[3],r!==this._voidResult&&i.length<5)throw new Error("Invalid payload for Completion message.");switch(r){case this._errorResult:u=i[4];break;case this._nonVoidResult:f=i[4]}return{error:u,headers:n,invocationId:i[2],result:f,type:t.Completion}}},{key:"_writeInvocation",value:function(n){var i;return i=n.streamIds?this._encoder.encode([t.Invocation,n.headers||{},n.invocationId||null,n.target,n.arguments,n.streamIds]):this._encoder.encode([t.Invocation,n.headers||{},n.invocationId||null,n.target,n.arguments]),nt.write(i.slice())}},{key:"_writeStreamInvocation",value:function(n){var i;return i=n.streamIds?this._encoder.encode([t.StreamInvocation,n.headers||{},n.invocationId,n.target,n.arguments,n.streamIds]):this._encoder.encode([t.StreamInvocation,n.headers||{},n.invocationId,n.target,n.arguments]),nt.write(i.slice())}},{key:"_writeStreamItem",value:function(n){var i=this._encoder.encode([t.StreamItem,n.headers||{},n.invocationId,n.item]);return nt.write(i.slice())}},{key:"_writeCompletion",value:function(n){var i=n.error?this._errorResult:n.result?this._nonVoidResult:this._voidResult,r;switch(i){case this._errorResult:r=this._encoder.encode([t.Completion,n.headers||{},n.invocationId,i,n.error]);break;case this._voidResult:r=this._encoder.encode([t.Completion,n.headers||{},n.invocationId,i]);break;case this._nonVoidResult:r=this._encoder.encode([t.Completion,n.headers||{},n.invocationId,i,n.result])}return nt.write(r.slice())}},{key:"_writeCancelInvocation",value:function(n){var i=this._encoder.encode([t.CancelInvocation,n.headers||{},n.invocationId]);return nt.write(i.slice())}},{key:"_readHeaders",value:function(n){var t=n[1];if("object"!=_typeof(t))throw new Error("Invalid headers.");return t}}]),i}(),ye=!1;var lr="function"==typeof TextDecoder?new TextDecoder("utf-8"):null,wh=lr?lr.decode.bind(lr):function(n){for(var r=0,h=n.length,i=[],f=[],t,e,o,s,u;r<h;){if(t=n[r++],0===t)break;0==(128&t)?i.push(t):192==(224&t)?(e=63&n[r++],i.push((31&t)<<6|e)):224==(240&t)?(o=63&n[r++],s=63&n[r++],i.push((31&t)<<12|o<<6|s)):240==(248&t)&&(u=(7&t)<<18|(63&n[r++])<<12|(63&n[r++])<<6|63&n[r++],u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u));i.length>1024&&(f.push(String.fromCharCode.apply(null,i)),i.length=0)}return f.push(String.fromCharCode.apply(null,i)),f.join("")},bh=Math.pow(2,32),kh=Math.pow(2,21)-1;var dh=function(){function n(t){_classCallCheck(this,n);this.batchData=t;var i=new ic(t);this.arrayRangeReader=new rc(t);this.arrayBuilderSegmentReader=new uc(t);this.diffReader=new gh(t);this.editReader=new nc(t,i);this.frameReader=new tc(t,i)}return _createClass(n,[{key:"updatedComponents",value:function(){return u(this.batchData,this.batchData.length-20)}},{key:"referenceFrames",value:function(){return u(this.batchData,this.batchData.length-16)}},{key:"disposedComponentIds",value:function(){return u(this.batchData,this.batchData.length-12)}},{key:"disposedEventHandlerIds",value:function(){return u(this.batchData,this.batchData.length-8)}},{key:"updatedComponentsEntry",value:function(n,t){var i=n+4*t;return u(this.batchData,i)}},{key:"referenceFramesEntry",value:function(n,t){return n+20*t}},{key:"disposedComponentIdsEntry",value:function(n,t){var i=n+4*t;return u(this.batchData,i)}},{key:"disposedEventHandlerIdsEntry",value:function(n,t){var i=n+8*t;return be(this.batchData,i)}}]),n}(),gh=function(){function n(t){_classCallCheck(this,n);this.batchDataUint8=t}return _createClass(n,[{key:"componentId",value:function(n){return u(this.batchDataUint8,n)}},{key:"edits",value:function(n){return n+4}},{key:"editsEntry",value:function(n,t){return n+16*t}}]),n}(),nc=function(){function n(t,i){_classCallCheck(this,n);this.batchDataUint8=t;this.stringReader=i}return _createClass(n,[{key:"editType",value:function(n){return u(this.batchDataUint8,n)}},{key:"siblingIndex",value:function(n){return u(this.batchDataUint8,n+4)}},{key:"newTreeIndex",value:function(n){return u(this.batchDataUint8,n+8)}},{key:"moveToSiblingIndex",value:function(n){return u(this.batchDataUint8,n+8)}},{key:"removedAttributeName",value:function(n){var t=u(this.batchDataUint8,n+12);return this.stringReader.readString(t)}}]),n}(),tc=function(){function n(t,i){_classCallCheck(this,n);this.batchDataUint8=t;this.stringReader=i}return _createClass(n,[{key:"frameType",value:function(n){return u(this.batchDataUint8,n)}},{key:"subtreeLength",value:function(n){return u(this.batchDataUint8,n+4)}},{key:"elementReferenceCaptureId",value:function(n){var t=u(this.batchDataUint8,n+4);return this.stringReader.readString(t)}},{key:"componentId",value:function(n){return u(this.batchDataUint8,n+8)}},{key:"elementName",value:function(n){var t=u(this.batchDataUint8,n+8);return this.stringReader.readString(t)}},{key:"textContent",value:function(n){var t=u(this.batchDataUint8,n+4);return this.stringReader.readString(t)}},{key:"markupContent",value:function(n){var t=u(this.batchDataUint8,n+4);return this.stringReader.readString(t)}},{key:"attributeName",value:function(n){var t=u(this.batchDataUint8,n+4);return this.stringReader.readString(t)}},{key:"attributeValue",value:function(n){var t=u(this.batchDataUint8,n+8);return this.stringReader.readString(t)}},{key:"attributeEventHandlerId",value:function(n){return be(this.batchDataUint8,n+12)}}]),n}(),ic=function(){function n(t){_classCallCheck(this,n);this.batchDataUint8=t;this.stringTableStartIndex=u(t,t.length-4)}return _createClass(n,[{key:"readString",value:function(n){var t;if(-1===n)return null;var i=u(this.batchDataUint8,this.stringTableStartIndex+4*n),r=function(n,t){for(var r,u=0,f=0,i=0;i<4;i++){if(r=n[t+i],u|=(127&r)<<f,r<128)break;f+=7}return u}(this.batchDataUint8,i),f=i+((t=r)<128?1:t<16384?2:t<2097152?3:4),e=new Uint8Array(this.batchDataUint8.buffer,this.batchDataUint8.byteOffset+f,r);return wh(e)}}]),n}(),rc=function(){function n(t){_classCallCheck(this,n);this.batchDataUint8=t}return _createClass(n,[{key:"count",value:function(n){return u(this.batchDataUint8,n)}},{key:"values",value:function(n){return n+4}}]),n}(),uc=function(){function n(t){_classCallCheck(this,n);this.batchDataUint8=t}return _createClass(n,[{key:"offset",value:function(){return 0}},{key:"count",value:function(n){return u(this.batchDataUint8,n)}},{key:"values",value:function(n){return n+4}}]),n}(),i;!function(n){n[n.Trace=0]="Trace";n[n.Debug=1]="Debug";n[n.Information=2]="Information";n[n.Warning=3]="Warning";n[n.Error=4]="Error";n[n.Critical=5]="Critical";n[n.None=6]="None"}(i||(i={}));ke=function(){function n(t,i){_classCallCheck(this,n);this.nextBatchId=2;this.browserRendererId=t;this.logger=i}return _createClass(n,[{key:"processBatch",value:function(){function r(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,r,u){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n<this.nextBatchId)){t.next=4;break}return t.next=3,this.completeBatch(u,n);case 3:return t.abrupt("return",void this.logger.log(i.Debug,"Batch ".concat(n," already processed. Waiting for batch ").concat(this.nextBatchId,".")));case 4:if(!(n>this.nextBatchId)){t.next=14;break}if(!this.fatalError){t.next=12;break}return this.logger.log(i.Debug,"Received a new batch ".concat(n," but errored out on a previous batch ").concat(this.nextBatchId-1)),t.next=9,u.send("OnRenderCompleted",this.nextBatchId-1,this.fatalError.toString());case 9:t.t0=void t.sent;t.next=13;break;case 12:t.t0=void this.logger.log(i.Debug,"Waiting for batch ".concat(this.nextBatchId,". Batch ").concat(n," not processed."));case 13:return t.abrupt("return",t.t0);case 14:return t.prev=14,this.nextBatchId++,this.logger.log(i.Debug,"Applying batch ".concat(n,".")),function(n,t){var r=yi[n],u,f,l,e,v;if(!r)throw new Error("There is no browser renderer with ID ".concat(n,"."));var i=t.arrayRangeReader,o=t.updatedComponents(),y=i.values(o),p=i.count(o),w=t.referenceFrames(),b=i.values(w),s=t.diffReader;for(u=0;u<p;u++){var h=t.updatedComponentsEntry(y,u),k=s.componentId(h),d=s.edits(h);r.updateComponent(t,k,d,b)}var c=t.disposedComponentIds(),g=i.values(c),nt=i.count(c);for(f=0;f<nt;f++)l=t.disposedComponentIdsEntry(g,f),r.disposeComponent(l);var a=t.disposedEventHandlerIds(),tt=i.values(a),it=i.count(a);for(e=0;e<it;e++)v=t.disposedEventHandlerIdsEntry(tt,e),r.disposeEventHandler(v);pi&&(pi=!1,window.scrollTo&&window.scrollTo(0,0))}(this.browserRendererId,new dh(r)),t.next=20,this.completeBatch(u,n);case 20:t.next=25;break;case 22:t.prev=22;t.t1=t["catch"](14);throw this.fatalError=t.t1.toString(),this.logger.log(i.Error,"There was an error applying batch ".concat(n,".")),u.send("OnRenderCompleted",n,t.t1.toString()),t.t1;case 25:case"end":return t.stop()}},t,this,[[14,22]])}));return r}()},{key:"getLastBatchid",value:function(){return this.nextBatchId-1}},{key:"completeBatch",value:function(){function r(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.send("OnRenderCompleted",r,null);case 3:t.next=8;break;case 5:t.prev=5;t.t0=t["catch"](0);this.logger.log(i.Warning,"Failed to deliver completion notification for render '".concat(r,"'."));case 8:case"end":return t.stop()}},t,this,[[0,5]])}));return r}()}],[{key:"getOrCreate",value:function(t){return n.instance||(n.instance=new n(0,t)),this.instance}}]),n}();ar=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"log",value:function(){}}]),n}();ar.instance=new ar;var fc=function(){function n(t){_classCallCheck(this,n);this.minLevel=t}return _createClass(n,[{key:"log",value:function(n,t){if(n>=this.minLevel){var r="[".concat((new Date).toISOString(),"] ").concat(i[n],": ").concat(t);switch(n){case i.Critical:case i.Error:console.error(r);break;case i.Warning:console.warn(r);break;case i.Information:console.info(r);break;default:console.log(r)}}}}]),n}(),ec=function(){function n(t,i){_classCallCheck(this,n);this.circuitId=void 0;this.components=t;this.applicationState=i}return _createClass(n,[{key:"reconnect",value:function(n){if(!this.circuitId)throw new Error("Circuit host not initialized.");return n.state!==r.Connected?Promise.resolve(!1):n.invoke("ConnectCircuit",this.circuitId)}},{key:"initialize",value:function(n){if(this.circuitId)throw new Error("Circuit host '".concat(this.circuitId,"' already initialized."));this.circuitId=n}},{key:"startCircuit",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.state!==r.Connected)){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,n.invoke("StartCircuit",bi.getBaseURI(),bi.getLocationHref(),JSON.stringify(this.components.map(function(n){return n.toRecord()})),this.applicationState||"");case 4:return i=t.sent,t.abrupt("return",!!i&&(this.initialize(i),!0));case 6:case"end":return t.stop()}},t,this)}));return i}()},{key:"resolveElement",value:function(n){var i=function(n){var t=ei.get(n);if(t)return ei.delete(n),t}(n),t;if(i)return et(i,!0);if(t=Number.parseInt(n),!Number.isNaN(t))return function(n,t){if(!n.parentNode)throw new Error("Comment not connected to the DOM ".concat(n.textContent));var i=n.parentNode,r=et(i,!0),u=v(r);return Array.from(i.childNodes).forEach(function(n){return u.push(n)}),n[si]=r,t&&(n[hu]=t,et(t)),et(n)}(this.components[t].start,this.components[t].end);throw new Error("Invalid sequence number or identifier '".concat(n,"'."));}}]),n}(),de={configureSignalR:function(){},logLevel:i.Warning,reconnectionOptions:{maxRetries:8,retryIntervalMilliseconds:2e4,dialogId:"components-reconnect-modal"}},oc=function(){function n(t,r,u,f){var e=this,o;_classCallCheck(this,n);this.maxRetries=r;this.document=u;this.logger=f;this.addedToDom=!1;this.modal=this.document.createElement("div");this.modal.id=t;this.maxRetries=r;this.modal.style.cssText="position: fixed;top: 0;right: 0;bottom: 0;left: 0;z-index: 1050;display: none;overflow: hidden;background-color: #fff;opacity: 0.8;text-align: center;font-weight: bold;transition: visibility 0s linear 500ms";this.message=this.document.createElement("h5");this.message.style.cssText="margin-top: 20px";this.button=this.document.createElement("button");this.button.style.cssText="margin:5px auto 5px";this.button.textContent="Retry";o=this.document.createElement("a");o.addEventListener("click",function(){return location.reload()});o.textContent="reload";this.reloadParagraph=this.document.createElement("p");this.reloadParagraph.textContent="Alternatively, ";this.reloadParagraph.appendChild(o);this.modal.appendChild(this.message);this.modal.appendChild(this.button);this.modal.appendChild(this.reloadParagraph);this.loader=this.getLoader();this.message.after(this.loader);this.button.addEventListener("click",_asyncToGenerator(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.show(),n.prev=1,n.next=4,h.reconnect();case 4:if(n.t0=n.sent,n.t0){n.next=7;break}e.rejected();case 7:n.next=12;break;case 9:n.prev=9;n.t1=n["catch"](1);e.logger.log(i.Error,n.t1);e.failed();case 12:case"end":return n.stop()}},s,null,[[1,9]])})))}return _createClass(n,[{key:"show",value:function(){var n=this;this.addedToDom||(this.addedToDom=!0,this.document.body.appendChild(this.modal));this.modal.style.display="block";this.loader.style.display="inline-block";this.button.style.display="none";this.reloadParagraph.style.display="none";this.message.textContent="Attempting to reconnect to the server...";this.modal.style.visibility="hidden";setTimeout(function(){n.modal.style.visibility="visible"},0)}},{key:"update",value:function(n){this.message.textContent="Attempting to reconnect to the server: ".concat(n," of ").concat(this.maxRetries)}},{key:"hide",value:function(){this.modal.style.display="none"}},{key:"failed",value:function(){var t,n,i;this.button.style.display="block";this.reloadParagraph.style.display="none";this.loader.style.display="none";t=this.document.createTextNode("Reconnection failed. Try ");n=this.document.createElement("a");n.textContent="reloading";n.setAttribute("href","");n.addEventListener("click",function(){return location.reload()});i=this.document.createTextNode(" the page if you're unable to reconnect.");this.message.replaceChildren(t,n,i)}},{key:"rejected",value:function(){var t,n,i;this.button.style.display="none";this.reloadParagraph.style.display="none";this.loader.style.display="none";t=this.document.createTextNode("Could not reconnect to the server. ");n=this.document.createElement("a");n.textContent="Reload";n.setAttribute("href","");n.addEventListener("click",function(){return location.reload()});i=this.document.createTextNode(" the page to restore functionality.");this.message.replaceChildren(t,n,i)}},{key:"getLoader",value:function(){var n=this.document.createElement("div");return n.style.cssText="border: 0.3em solid #f3f3f3;border-top: 0.3em solid #3498db;border-radius: 50%;width: 2em;height: 2em;display: inline-block",n.animate([{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],{duration:2e3,iterations:1/0}),n}}]),n}(),tt=function(){function n(t,i,r){_classCallCheck(this,n);this.dialog=t;this.maxRetries=i;this.document=r;this.document=r;var u=this.document.getElementById(n.MaxRetriesId);u&&(u.innerText=this.maxRetries.toString())}return _createClass(n,[{key:"show",value:function(){this.removeClasses();this.dialog.classList.add(n.ShowClassName)}},{key:"update",value:function(t){var i=this.document.getElementById(n.CurrentAttemptId);i&&(i.innerText=t.toString())}},{key:"hide",value:function(){this.removeClasses();this.dialog.classList.add(n.HideClassName)}},{key:"failed",value:function(){this.removeClasses();this.dialog.classList.add(n.FailedClassName)}},{key:"rejected",value:function(){this.removeClasses();this.dialog.classList.add(n.RejectedClassName)}},{key:"removeClasses",value:function(){this.dialog.classList.remove(n.ShowClassName,n.HideClassName,n.FailedClassName,n.RejectedClassName)}}]),n}();tt.ShowClassName="components-reconnect-show";tt.HideClassName="components-reconnect-hide";tt.FailedClassName="components-reconnect-failed";tt.RejectedClassName="components-reconnect-rejected";tt.MaxRetriesId="components-reconnect-max-retries";tt.CurrentAttemptId="components-reconnect-current-attempt";ge=function(){function n(t,i,r){_classCallCheck(this,n);this._currentReconnectionProcess=null;this._logger=t;this._reconnectionDisplay=i;this._reconnectCallback=r||h.reconnect}return _createClass(n,[{key:"onConnectionDown",value:function(n){if(!this._reconnectionDisplay){var t=document.getElementById(n.dialogId);this._reconnectionDisplay=t?new tt(t,n.maxRetries,document):new oc(n.dialogId,n.maxRetries,document,this._logger)}this._currentReconnectionProcess||(this._currentReconnectionProcess=new vr(n,this._logger,this._reconnectCallback,this._reconnectionDisplay))}},{key:"onConnectionUp",value:function(){this._currentReconnectionProcess&&(this._currentReconnectionProcess.dispose(),this._currentReconnectionProcess=null)}}]),n}();vr=function(){function n(t,i,r,u){_classCallCheck(this,n);this.logger=i;this.reconnectCallback=r;this.isDisposed=!1;this.reconnectDisplay=u;this.reconnectDisplay.show();this.attemptPeriodicReconnection(t)}return _createClass(n,[{key:"dispose",value:function(){this.isDisposed=!0;this.reconnectDisplay.hide()}},{key:"attemptPeriodicReconnection",value:function(){function u(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function r(t){var u,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:u=0;case 1:if(!(u<t.maxRetries)){r.next=25;break}return this.reconnectDisplay.update(u+1),f=0==u&&t.retryIntervalMilliseconds>n.MaximumFirstRetryInterval?n.MaximumFirstRetryInterval:t.retryIntervalMilliseconds,r.next=6,this.delay(f);case 6:if(!this.isDisposed){r.next=8;break}return r.abrupt("break",25);case 8:return r.prev=8,r.next=11,this.reconnectCallback();case 11:if(!r.sent){r.next=15;break}r.t0=void 0;r.next=16;break;case 15:r.t0=void this.reconnectDisplay.rejected();case 16:return r.abrupt("return",r.t0);case 19:r.prev=19;r.t1=r["catch"](8);this.logger.log(i.Error,r.t1);case 22:u++;r.next=1;break;case 25:this.reconnectDisplay.failed();case 26:case"end":return r.stop()}},r,this,[[8,19]])}));return u}()},{key:"delay",value:function(n){return new Promise(function(t){return setTimeout(t,n)})}}]),n}();vr.MaximumFirstRetryInterval=3e3;no=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*Blazor\x2DComponent\x2DState:([\+\/-9=A-Za-z]+)$/;yr=new RegExp(/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*Blazor:(?:(?!\{)[\s\S])*(.*)$/);var cc=function(){function n(t){_classCallCheck(this,n);this.childNodes=t;this.currentIndex=-1;this.length=t.length}return _createClass(n,[{key:"next",value:function(){return this.currentIndex++,this.currentIndex<this.length?(this.currentElement=this.childNodes[this.currentIndex],!0):(this.currentElement=void 0,!1)}}]),n}(),lc=function(){function n(t,i,r,u,f){_classCallCheck(this,n);this.type=t;this.start=i;this.end=r;this.sequence=u;this.descriptor=f}return _createClass(n,[{key:"toRecord",value:function(){return{type:this.type,sequence:this.sequence,descriptor:this.descriptor}}}]),n}(),pr=function pr(n,t,i,r,u,f,e){_classCallCheck(this,pr);this.id=pr.globalId++;this.type=n;this.assembly=r;this.typeName=u;this.parameterDefinitions=f;this.parameterValues=e;this.start=t;this.end=i};pr.globalId=1;var ac=function(){function n(){_classCallCheck(this,n);this.afterStartedCallbacks=[]}return _createClass(n,[{key:"importInitializersAsync",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,i){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map(function(n){return function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n,r){var o,u,f,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(n){var t=document.baseURI;return t.endsWith("/")?"".concat(t).concat(n):"".concat(t,"/").concat(n)}(r),t.next=3,Promise.resolve().then(function(){return _interopRequireWildcard("".concat(o))});case 3:if(u=t.sent,!(void 0===u)){t.next=6;break}return t.abrupt("return");case 6:return f=u.beforeStart,e=u.afterStarted,t.abrupt("return",(e&&n.afterStartedCallbacks.push(e),f?f.apply(void 0,_toConsumableArray(i)):void 0));case 8:case"end":return t.stop()}},t)}));return function(){return n.apply(this,arguments)}}()(r,n)}));case 2:case"end":return t.stop()}},t)}));return i}()},{key:"invokeAfterStartedCallbacks",value:function(){function i(){return n.apply(this,arguments)}var n=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iu;case 2:return t.next=4,Promise.all(this.afterStartedCallbacks.map(function(t){return t(n)}));case 4:case"end":return t.stop()}},t,this)}));return i}()}]),n}(),wr=!1,uo=!1;h.start=fo;document&&document.currentScript&&"false"!==document.currentScript.getAttribute("autostart")&&fo()})()
