//SHA256: 36635179953e5db1c2e22e6498f5b6ab2b30630d9c18a2d6e1443bfc437804a3
function _instanceof(n,t){return t!=null&&typeof Symbol!="undefined"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};t.m=n;t.c=i;t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})};t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})};t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==_typeof(n)&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r};t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i};t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};t.p="";t(t.s="./single-bundle.js")}({"../node_modules/@babel/runtime/regenerator/index.js":function(n,t,i){n.exports=i("../node_modules/regenerator-runtime/runtime.js")},"../node_modules/regenerator-runtime/runtime.js":function(n){var t=function(n){"use strict";function t(n,t,i){return Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),n[t]}function g(n,t,r,u){var e=t&&_instanceof(t.prototype,p)?t:p,f=Object.create(e.prototype),o=new b(u||[]);return f._invoke=function(n,t,r){var u="suspendedStart";return function(f,e){var h,s,o;if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===f)throw e;return it()}for(r.method=f,r.arg=e;;){if(h=r.delegate,h&&(s=tt(h,r),s)){if(s===i)continue;return s}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===u)throw u="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);if(u="executing",o=y(n,t,r),"normal"===o.type){if(u=r.done?"completed":"suspendedYield",o.arg===i)continue;return{value:o.arg,done:r.done}}"throw"===o.type&&(u="completed",r.method="throw",r.arg=o.arg)}}}(n,r,o),f}function y(n,t,i){try{return{type:"normal",arg:n.call(t,i)}}catch(n){return{type:"throw",arg:n}}}function p(){}function s(){}function u(){}function nt(n){["next","throw","return"].forEach(function(i){t(n,i,function(n){return this._invoke(i,n)})})}function l(n,t){var i;this._invoke=function(u,f){function e(){return new t(function(i,e){!function i(u,f,e,o){var c=y(n[u],n,f),h,s;if("throw"!==c.type)return h=c.arg,s=h.value,s&&"object"==_typeof(s)&&r.call(s,"__await")?t.resolve(s.__await).then(function(n){i("next",n,e,o)},function(n){i("throw",n,e,o)}):t.resolve(s).then(function(n){h.value=n;e(h)},function(n){return i("throw",n,e,o)});o(c.arg)}(u,f,i,e)})}return i=i?i.then(e,e):e()}}function tt(n,t){var f=n.iterator[t.method],u,r;if(void 0===f){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,tt(n,t),"throw"===t.method))return i;t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return i}return(u=y(f,n.iterator,t.arg),"throw"===u.type)?(t.method="throw",t.arg=u.arg,t.delegate=null,i):(r=u.arg,r?r.done?(t[n.resultName]=r.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,i):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,i))}function ut(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]);2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]);this.tryEntries.push(t)}function w(n){var t=n.completion||{};t.type="normal";delete t.arg;n.completion=t}function b(n){this.tryEntries=[{tryLoc:"root"}];n.forEach(ut,this);this.reset(!0)}function k(n){var t,i,u;if(n){if(t=n[o],t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return i=-1,u=function t(){for(;++i<n.length;)if(r.call(n,i))return t.value=n[i],t.done=!1,t;return t.value=void 0,t.done=!0,t},u.next=u}return{next:it}}function it(){return{value:void 0,done:!0}}var d=Object.prototype,r=d.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",rt=a.asyncIterator||"@@asyncIterator",v=a.toStringTag||"@@toStringTag",i,h,c,e,f;try{t({},"")}catch(n){t=function(n,t,i){return n[t]=i}}return n.wrap=g,i={},h={},t(h,o,function(){return this}),c=Object.getPrototypeOf,e=c&&c(c(k([]))),e&&e!==d&&r.call(e,o)&&(h=e),f=u.prototype=p.prototype=Object.create(h),s.prototype=u,t(f,"constructor",u),t(u,"constructor",s),s.displayName=t(u,v,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,u):(n.__proto__=u,t(n,v,"GeneratorFunction")),n.prototype=Object.create(f),n},n.awrap=function(n){return{__await:n}},nt(l.prototype),t(l.prototype,rt,function(){return this}),n.AsyncIterator=l,n.async=function(t,i,r,u,f){void 0===f&&(f=Promise);var e=new l(g(t,i,r,u),f);return n.isGeneratorFunction(i)?e:e.next().then(function(n){return n.done?n.value:e.next()})},nt(f),t(f,v,"Generator"),t(f,o,function(){return this}),t(f,"toString",function(){return"[object Generator]"}),n.keys=function(n){var i=[];for(var t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=k,b.prototype={constructor:b,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!n)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){function i(t,i){return e.type="throw",e.arg=n,u.next=t,i&&(u.method="next",u.arg=void 0),!!i}var u,f,t,e,o,s;if(this.done)throw n;for(u=this,f=this.tryEntries.length-1;f>=0;--f){if(t=this.tryEntries[f],e=t.completion,"root"===t.tryLoc)return i("end");if(t.tryLoc<=this.prev)if(o=r.call(t,"catchLoc"),s=r.call(t,"finallyLoc"),o&&s){if(this.prev<t.catchLoc)return i(t.catchLoc,!0);if(this.prev<t.finallyLoc)return i(t.finallyLoc)}else if(o){if(this.prev<t.catchLoc)return i(t.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<t.finallyLoc)return i(t.finallyLoc)}}},abrupt:function(n,t){for(var f,u,o,e=this.tryEntries.length-1;e>=0;--e)if(f=this.tryEntries[e],f.tryLoc<=this.prev&&r.call(f,"finallyLoc")&&this.prev<f.finallyLoc){u=f;break}return u&&("break"===n||"continue"===n)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null),o=u?u.completion:{},o.type=n,o.arg=t,u?(this.method="next",this.next=u.finallyLoc,i):this.complete(o)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),i},finish:function(n){for(var t,r=this.tryEntries.length-1;r>=0;--r)if(t=this.tryEntries[r],t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),w(t),i},"catch":function(n){for(var i,r,u,t=this.tryEntries.length-1;t>=0;--t)if(i=this.tryEntries[t],i.tryLoc===n)return r=i.completion,"throw"===r.type&&(u=r.arg,w(i)),u;throw new Error("illegal catch attempt");},delegateYield:function(n,t,r){return this.delegate={iterator:k(n),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),i}},n}(n.exports);try{regeneratorRuntime=t}catch(n){"object"==(typeof globalThis=="undefined"?"undefined":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},"./modules/base.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};window.sf.base=function(t){"use strict";function lt(n,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(n,i))}function ur(n){var r,u=new Uint16Array(5),t,i;return(window.msCrypto||window.crypto).getRandomValues(u),t="ej2"+function(n){for(var i="",t=0;t<5;t++)i+=(t?",":"")+n[t];return i}(u),i=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===t&&(n(),r())},window.addEventListener("message",i,!1),window.postMessage(t,"*"),r=function(){window.removeEventListener("message",i);n=i=t=void 0}}function i(n,t){for(var i=t,u=n.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<u.length&&!f(i);r++)i=i[u[r]];return i}function y(n,t,i){for(var f,o=n.replace(/\[/g,".").replace(/\]/g,"").split("."),s=i||{},e=s,h=o.length,u=0;u<h;u++)f=o[u],u+1===h?e[f]=void 0===t?{}:t:r(e[f])&&(e[f]={}),e=e[f];return s}function fr(n,t){delete n[t]}function p(n){return!r(n)&&n.constructor==={}.constructor}function nt(n,t){var i;if(!r(t))for(var u=n,f=t,e=0,o=Object.keys(t);e<o.length;e++)i=o[e],r(u.deepMerge)||-1===u.deepMerge.indexOf(i)||!p(f[i])&&!Array.isArray(f[i])?u[i]=f[i]:s(u[i],u[i],f[i],!0)}function s(t,i,r,f){var e=t&&"object"===n(t)?t:{},h=arguments.length;f&&(h-=1);for(var l=function(n){if(!c[n])return"continue";var t=c[n];Object.keys(t).forEach(function(n){var r,o=e[n],i=t[n],h=Array.isArray(i)&&Array.isArray(o)&&i.length!==o.length,c=!u()||!(_instanceof(o,Event)||h);f&&c&&(p(i)||Array.isArray(i))?p(i)?(r=o||{},Array.isArray(r)&&r.hasOwnProperty("isComplexArray")?s(r,{},i,f):e[n]=s(r,{},i,f)):(r=u()?o&&Object.keys(i).length:o||[],e[n]=s([],r,i,f)):e[n]=i})},c=arguments,o=1;o<h;o++)l(o);return e}function r(n){return null==n}function f(n){return void 0===n}function er(n,t){var i;return function(){var r=this,u=arguments,f=function(){return i=null,n.apply(r,u)};clearTimeout(i);i=setTimeout(f,t)}}function bt(n,t){return n===t||!(n===document||!n)&&bt(n.parentNode,t)}function rt(n){try{throw new Error(n);}catch(n){throw n.message+"\n"+n.stack;}}function u(){return ii}function or(){if("undefined"!=typeof window){var n=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(n)}}function g(n,t){var i=ie.test(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&dr(i,t.attrs)),i}function yt(n,t){for(var f,e,l=br(t),o=0,h=n;o<h.length;o++)for(var u=h[o],s=0,c=l;s<c.length;s++)f=c[s],p(u)?(e=i("attributes.className",u),r(e)?y("attributes.className",f,u):new RegExp("\\b"+f+"\\b","i").test(e)||y("attributes.className",e+" "+f,u)):u.classList.contains(f)||u.classList.add(f);return n}function pt(n,t){for(var r,o,u,s,h,f,c,a=br(t),e=0,l=n;e<l.length;e++)if(r=l[e],o=p(r),o?i("attributes.className",r):""!==r.className)for(u=0,s=a;u<s.length;u++)h=s[u],o?(f=i("attributes.className",r).split(" "),c=f.indexOf(h),-1!==c&&f.splice(c,1),y("attributes.className",f.join(" "),r)):r.classList.remove(h);return n}function br(n){var t=[];return"string"==typeof n?t.push(n):t=n,t}function ei(n){var t=n;return""===t.style.visibility&&t.offsetWidth>0}function kr(n){n.querySelectorAll("script").forEach(function(n){var t=document.createElement("script");t.text=n.innerHTML;document.head.appendChild(t);oi(t)})}function oi(n){var t=n.parentNode;if(t)return t.removeChild(n)}function dr(n,t){for(var i,f,r=n,u=0,e=Object.keys(t);u<e.length;u++)i=e[u],p(r)?(f=i,"tabindex"===i&&(f="tabIndex"),r.attributes[f]=t[i]):r.setAttribute(i,t[i]);return r}function kt(n,t){return void 0===t&&(t=document),n=gr(n),t.querySelector(n)}function si(n,t){return void 0===t&&(t=document),n=gr(n),t.querySelectorAll(n)}function gr(n){var r,u,t,i,f;if(n.match(/#[0-9]/g)){for(r=n.split(","),u=0;u<r.length;u++){for(t=r[u].split(" "),i=0;i<t.length;i++)t[i].indexOf("#")>-1&&(t[i].match(/\[.*\]/)||t[i].split("#")[1].match(/^\d/)&&(f=t[i].split("."),f[0]=f[0].replace(/#/,"[id='")+"']",t[i]=f.join(".")));r[u]=t.join(" ")}return r.join(",")}return n}function tt(n,t){var i=n;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(ci(i,t))return i;i=i.parentNode}return null}function hi(n,t){void 0!==t&&Object.keys(t).forEach(function(i){n.style[i]=t[i]})}function ci(n,t){var i=n.matches||n.msMatchesSelector||n.webkitMatchesSelector;return i?i.call(n,t):-1!==[].indexOf.call(document.querySelectorAll(t),n)}function tu(n,t){for(var i,u="string"==typeof n?document.getElementById(n):n,r=0;r<u.ej2_instances.length;r++)if(i=u.ej2_instances[r],"string"==typeof t){if(t===i.getModuleName())return i}else if(_instanceof(i,t))return i}function dt(n,t,i,r){return n.properties.hasOwnProperty(t)&&_instanceof(n.properties[t],r)||(n.properties[t]=lt(r,[n,t,i])),n.properties[t]}function wt(n,t,i,r,u,f){for(var o,h,s=[],c=i?i.length:0,e=0;e<c;e++)o=r,(f&&(o=r(i[e],n)),u)?(h=lt(o,[n,t,{},!0]),h.setProperties(i[e],!0),s.push(h)):s.push(lt(o,[n,t,i[e],!1]));return s}function iu(n,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=n),this.properties[t]}}function re(n,t){return function(i){if(this.properties[t]!==i){var r=this.properties.hasOwnProperty(t)?this.properties[t]:n;this.saveChanges(t,i,r);this.properties[t]=i}}}function ue(n,t,i){return function(){return dt(this,t,n,i)}}function fe(n,t,i){return function(r){dt(this,t,n,i).setProperties(r)}}function ee(n,t,i){return function(){var r=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:dt(this,t,n,r)}}function oe(n,t,i){return function(r){var u=i(r,this);dt(this,t,n,u).setProperties(r)}}function se(n,t,i){return function(){var r=this,u,f;return this.properties.hasOwnProperty(t)||(u=wt(this,t,n,i,!1),this.properties[t]=u),f=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch,this.properties[t].hasOwnProperty("push")||f||["push","pop"].forEach(function(n){var u={value:ae(n,t,i,r.properties[t]).bind(r),configurable:!0};Object.defineProperty(r.properties[t],n,u)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function he(n,t,i){return function(r){this.isComplexArraySetter=!0;var f=wt(this,t,n,i,!1),u=wt(this,t,r,i,!0);this.isComplexArraySetter=!1;this.saveChanges(t,u,f);this.properties[t]=u}}function ce(n,t,i){return function(r){var f=this.properties.hasOwnProperty(t)?this.properties[t]:n,u=wt(this,t,r,i,!0,!0);this.saveChanges(t,u,f);this.properties[t]=u}}function le(n,t,i){return function(){var u=i({}),r;return this.properties.hasOwnProperty(t)||(r=wt(this,t,n,u,!1),this.properties[t]=r),this.properties[t]}}function ae(n,t,i,r){return function(){for(var e,u,o,s,i=[],f=0;f<arguments.length;f++)i[f]=arguments[f];e=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(n){case"push":for(u=0;u<i.length;u++)Array.prototype[n].apply(r,[i[u]]),o=ru(e+(r.length-1),i[u],!this.controlParent,n),this.serverDataBind(o,i[u],!1,n);break;case"pop":Array.prototype[n].apply(r);s=ru(e+r.length,null,!this.controlParent,n);this.serverDataBind(s,{ejsAction:"pop"},!1,n)}return r}}function ru(t,i,r,u){var f=t;return r&&((f={})[t]=i,i&&"object"===n(i))&&(f[t].ejsAction=u),f}function h(n){return function(t,i){var r={set:re(n,i),get:iu(n,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,r);et(t,i,"prop",n)}}function li(n,t){return function(i,r){var u={set:fe(n,r,t),get:ue(n,r,t),enumerable:!0,configurable:!0};Object.defineProperty(i,r,u);et(i,r,"complexProp",n,t)}}function a(){return function(n,t){var r={set:function(n){var u=this.properties[t],r;u!==n&&(r=function n(t,r){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:r};var u=i("propName",t);return u&&(r=u+"-"+r),n(i("parentObj",t),r)}(this,t),!1===f(u)&&r.context.removeEventListener(r.prefix,u),r.context.addEventListener(r.prefix,n),this.properties[t]=n)},get:iu(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(n,t,r);et(n,t,"event")}}function it(){}function et(n,t,i,r,u){f(n.propList)&&(n.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]});n.propList[i+"s"].push({propertyName:t,defaultValue:r,type:u});n.propList[i+"Names"].push(t)}function uu(n){var u=n.target,c=this.rippleOptions.selector,t=c?tt(u,c):u,r;if(!(!t||this.rippleOptions&&tt(u,this.rippleOptions.ignore))){var i=t.getBoundingClientRect(),f=n.pageX-document.body.scrollLeft,o=n.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),l=Math.max(Math.abs(f-i.left),Math.abs(f-i.right)),a=Math.max(Math.abs(o-i.top),Math.abs(o-i.bottom)),s=Math.sqrt(l*l+a*a),h=2*s+"px",v=f-i.left-s,y=o-i.top-s;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(v=0,y=0,h="100%");t.classList.add("e-ripple");r=g("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+v+"px;top: "+y+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});t.appendChild(r);window.getComputedStyle(r).getPropertyValue("opacity");r.style.transform="scale(1)";t!==this.parent&&e.add(t,"mouseleave",ot,{parent:this.parent,rippleOptions:this.rippleOptions})}}function fu(n){eu(n,this)}function ot(n){eu(n,this)}function eu(n,t){var s=t.rippleOptions.duration,f=n.target,o=t.rippleOptions.selector,i=o?tt(f,o):f,u,r;i&&(!i||-1!==i.className.indexOf("e-ripple"))&&(u=si(".e-ripple-element",i),r=u[u.length-1],r&&(r.style.opacity="0.5"),t.parent!==i&&e.remove(i,"mouseleave",ot),setTimeout(function(){r&&r.parentNode&&r.parentNode.removeChild(r);i.getElementsByClassName("e-ripple-element").length||i.classList.remove("e-ripple");t.done&&t.done(n)},s))}function go(n,t,i){var r=function(n,t,i,r){var f=0,u=[],e=n.match(/class="([^"]+|)\s{2}/g),o="";return e&&e.forEach(function(t){o=t.replace(/\s\s+/g," ");n=n.replace(t,o)}),n.replace(fo,"").replace(ao,"'$1'").replace(yo,function(n,e){var o=e.match(co),c,h,l,s,a;return o?(c=o[1],so.test(e)?e='";} '+e.replace(o[1],c.replace(lo,function(n){return ht(n=n.trim(),!eo.test(n)&&-1===u.indexOf(n),t,u,r)}))+'{ \n str = str + "':oo.test(e)?e='"; '+e.replace(o[1],c.replace(vo,function(n){return bu(n,t,u,r)}))+'{ \n str = str + "':ho.test(e)?(h=o[1].split(" of "),e='"; '+e.replace(o[1],function(){return u.push(h[0]),u.push(h[0]+"Index"),"var i"+(f+=1)+"=0; i"+f+" < "+ht(h[1],!0,t,u,r)+".length; i"+f+"++"})+"{ \n "+h[0]+"= "+ht(h[1],!0,t,u,r)+"[i"+f+"]; \n var "+h[0]+"Index=i"+f+'; \n str = str + "'):(l=e.split("("),s=i&&i.hasOwnProperty(l[0])?"this.":"global",s=/\./.test(l[0])?"":s,a=o[1].split(","),0===o[1].length||/data/.test(a[0])||/window./.test(a[0])||(o[1]="global"===s?t+"."+o[1]:o[1]),ko.test(e)&&/\]\./gm.test(e)||/@|\$|#/gm.test(e)?/@|\$|#|\]\./gm.test(e)&&(e='"+ '+("global"===s?"":s)+e.replace(o[1],c.replace(bo,function(n){return bu(n,t,u,r)}))+'+ "'):e='" + '+("global"===s?"":s)+e.replace(c,ht(o[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==s,t,u,r))+'+"')):yu.test(e)?e='"; '+e.replace(yu,'} else { \n str = str + "'):e.match(pu)?e=e.replace(pu,'"; \n } \n str = str + "'):/@|#|\$/gm.test(e)?(e.match(tr)&&(e=wu(e)),e='"+'+ir(e,-1===u.indexOf(e),t,u)+'"]+"'):e=e.match(tr)?'"+'+ir(e=wu(e),-1===u.indexOf(e),t,u)+'"]+"':'"+'+ht(e.replace(/,/gi,"+"+t+"."),-1===u.indexOf(e),t,u,r)+'+"',e})}(n,"data",t,i);return new Function("data",'var str="'+r+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if(str.match(hrefRegex)) {\n        var check = str.match(hrefRegex);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(hrefRegex)[i].split('href=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n     return str;").bind(t)}function ht(n,t,i,r,u){return!t||nr.test(n)||-1!==r.indexOf(n.split(".")[0])||u?n:i+"."+n}function ir(n,t,i,r){return t&&!nr.test(n)&&-1===r.indexOf(n.split(".")[0])?i+'["'+n:n}function wu(n){return n.match(wo)?n:n.replace(tr,"\\\\")}function bu(n,t,i,r){if(n=n.trim(),/\window\./gm.test(n))return n;var u=/'|"/gm;return/@|\$|#/gm.test(n)&&(n=ir(n,-1===i.indexOf(n),t,i)+'"]'),po.test(n)?function(n,t,i,r){return!t||nr.test(n)||-1!==r.indexOf(n.split(".")[0])||/^\..*/gm.test(n)?n:i+"."+n}(n,!u.test(n)&&-1===i.indexOf(n),t,i):ht(n,!u.test(n)&&-1===i.indexOf(n),t,i,r)}function ku(){return"-"+Math.random().toString(36).substr(2,5)}var ct="ej2_instances",gu=0,ii=!1,ri,at,nf={latn:{_digits:"0123456789",_type:"numeric"}},sr={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},hr=[0,1,2,3,4,5,6,7,8,9],l=function(){function n(){}return n.getMainObject=function(n,t){return i(u()?t:"main."+t,n)},n.getNumberingSystem=function(n){return i("supplemental.numberingSystems",n)||this.numberingSystems},n.reverseObject=function(n,t){for(var i,r={},u=0,f=t||Object.keys(n);u<f.length;u++)i=f[u],r.hasOwnProperty(n[i])||(r[n[i]]=i);return r},n.getSymbolRegex=function(n){var t=n.map(function(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(t,"g")},n.getSymbolMatch=function(n){for(var i,r={},t=0,u=Object.keys(sr);t<u.length;t++)i=u[t],r[n[i]]=sr[i];return r},n.constructRegex=function(n){for(var i=n.length,r="",t=0;t<i;t++)r+=t!==i-1?n[t]+"|":n[t];return r},n.convertValueParts=function(n,t,i){return n.replace(t,function(n){return i[n]})},n.getDefaultNumberingSystem=function(n){var t={};return t.obj=i("numbers",n),t.nSystem=i("defaultNumberingSystem",t.obj),t},n.getCurrentNumericOptions=function(n,t,r,u){var e={},s=this.getDefaultNumberingSystem(n),o;return(!f(s.nSystem)||u)&&(o=u?i("obj.mapperDigits",s):i(s.nSystem+"._digits",t),f(o)||(e.numericPair=this.reverseObject(o,hr),e.numberParseRegex=new RegExp(this.constructRegex(o),"g"),e.numericRegex="["+o[0]+"-"+o[9]+"]",r&&(e.numericRegex=o[0]+"-"+o[9],e.symbolNumberSystem=i(u?"numberSymbols":"symbols-numberSystem-"+s.nSystem,s.obj),e.symbolMatch=this.getSymbolMatch(e.symbolNumberSystem),e.numberSystem=s.nSystem))),e},n.getNumberMapper=function(n,t){var r={mapper:{}},u=this.getDefaultNumberingSystem(n),o,e,s,h;if(!f(u.nSystem)&&(r.numberSystem=u.nSystem,r.numberSymbols=i("symbols-numberSystem-"+u.nSystem,u.obj),r.timeSeparator=i("timeSeparator",r.numberSymbols),o=i(u.nSystem+"._digits",t),!f(o)))for(e=0,s=hr;e<s.length;e++)h=s[e],r.mapper[h]=o[h];return r},n.nPair="numericPair",n.nRegex="numericRegex",n.numberingSystems=nf,n}(),tf={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"},v,nu,w,hu;ri=t.HijriParser||(t.HijriParser={});at=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];ri.getHijriDate=function(n){var y=n.getDate(),u=n.getMonth(),p=n.getFullYear(),s=u+1,h=p,a,d,r,g,i;s<3&&(h-=1,s+=12);var f=Math.floor(h/100),w=f-Math.floor(f/4)-2,e=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(s+1))+y-w-1524,o=e+(w=(f=Math.floor((e-1867216.25)/36524.25))-Math.floor(f/4)+1)+1524,c=Math.floor((o-122.1)/365.25),l=Math.floor(365.25*c),ut=Math.floor((o-l)/30.6001);y=o-l-Math.floor(30.6001*ut);(u=Math.floor((o-l)/20.6001))>13&&(c+=1,u-=12);u-=1;p=c-4716;var b=e-24e5,t=e-1948084,k=Math.floor(t/10631);for(t-=10631*k,a=Math.floor((t-.1335)/(10631/30)),d=30*k+a,t-=Math.floor(a*(10631/30)+.1335),r=Math.floor((t+28.5001)/29.5),13===r&&(r=12),g=t-Math.floor(29.5001*r-29),i=0;i<at.length&&!(at[i]>b);i++);var nt=i+16260,tt=Math.floor((nt-1)/12),it=tt+1,rt=nt-12*tt,v=b-at[i-1]+1;return(v+"").length>2&&(v=g,rt=r,it=d),{year:it,month:rt,date:v}};ri.toGregorian=function(n,t,i){var l=i+at[12*(n-1)+1+(t-1)-16261]- -2399999,o=Math.floor(l+.5),r=Math.floor((o-1867216.25)/36524.25),u=1524+(r=o+1+r-Math.floor(r/4)),s=Math.floor((u-122.1)/365.25),h=Math.floor(365.25*s),f=Math.floor((u-h)/30.6001),a=u-h-Math.floor(30.6001*f),e=f-(f>13.5?13:1),c=s-(e>2.5?4716:4715);return c<=0&&e--,new Date(c+"/"+e+"/"+a)};var rf=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,uf=["sun","mon","tue","wed","thu","fri","sat"],cr={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},ff={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},lr=function(){function n(){}return n.dateFormat=function(n,r,e){var d=this,o=t.IntlBase.getDependables(e,n,r.calendar),g=i("parserObject.numbers",o),a=o.dateObject,h={isIslamic:t.IntlBase.islamicRegex.test(r.calendar)},c,y,p,k;if(u()&&r.isServerRendered&&(r=t.IntlBase.compareBlazorDateFormats(r,n)),c=r.format||t.IntlBase.getResultantPattern(r.skeleton,o.dateObject,r.type,!1,u()?n:""),h.dateSeperator=u()?i("dateSeperator",a):t.IntlBase.getDateSeparator(o.dateObject),f(c))rt("Format options or type given must be invalid");else for(c=t.IntlBase.ConvertDateToWeekFormat(c),u()&&(c=c.replace(/tt/,"a")),h.pattern=c,h.numMapper=u()?s({},g):l.getNumberMapper(o.parserObject,l.getNumberingSystem(e)),y=0,p=c.match(rf)||[];y<p.length;y++){var b=p[y],v=b.length,w=b[0];switch("K"===w&&(w="h"),w){case"E":case"c":h.weekday=u()?i("days."+t.IntlBase.monthIndex[v],a):o.dateObject[t.IntlBase.days]["stand-alone"][t.IntlBase.monthIndex[v]];break;case"M":case"L":h.month=u()?i("months."+t.IntlBase.monthIndex[v],a):o.dateObject[t.IntlBase.month]["stand-alone"][t.IntlBase.monthIndex[v]];break;case"a":h.designator=u()?i("dayPeriods",a):i("dayPeriods.format.wide",a);break;case"G":k=v<=3?"eraAbbr":4===v?"eraNames":"eraNarrow";h.era=u()?i("eras",a):i("eras."+k,o.dateObject);break;case"z":h.timeZone=i("dates.timeZoneNames",o.parserObject)}}return function(n){return isNaN(n.getDate())?null:d.intDateFormatter(n,h)}},n.intDateFormatter=function(n,i){for(var k,d,it,g,y,nt,p,u="",rt=i.pattern.match(t.IntlBase.dateParseRegex),w=this.getCurrentDateValue(n,i.isIslamic),b=0,tt=rt;b<tt.length;b++){var h=tt[b],e=h.length,o=h[0];"K"===o&&(o="h");var s=void 0,c="",a=void 0,v=void 0,f="";switch(o){case"M":case"L":s=w.month;e>2?u+=i.month[s]:a=!0;break;case"E":case"c":u+=i.weekday[uf[n.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(a=!0,"d"===o)s=w.date;else if("f"===o){if(a=!1,v=!0,k=(c=(c=n[cr[o]]().toString()).substring(0,e)).length,e!==k){if(e>3)continue;for(d=0;d<e-k;d++)c="0"+c.toString()}f+=c}else s=n[cr[o]]();"h"===o&&(s=s%12||12);break;case"y":v=!0;f+=w.year;2===e&&(f=f.substr(f.length-2));break;case"a":it=n.getHours()<12?"am":"pm";u+=i.designator[it];break;case"G":g=n.getFullYear()<0?0:1;y=i.era[g];r(y)&&(y=i.era[g?0:1]);u+=y||"";break;case"'":u+="''"===h?"'":h.replace(/'/g,"");break;case"z":nt=n.getTimezoneOffset();p=e<4?"+H;-H":i.timeZone.hourFormat;p=p.replace(/:/g,i.numMapper.timeSeparator);0===nt?u+=i.timeZone.gmtZeroFormat:(v=!0,f=this.getTimeZoneValue(nt,p));f=i.timeZone.gmtFormat.replace(/\{0\}/,f);break;case":":u+=i.numMapper.numberSymbols.timeSeparator;break;case"/":u+=i.dateSeperator;break;case"W":a=!0;s=t.IntlBase.getWeekOfYear(n);break;default:u+=h}a&&(v=!0,f=this.checkTwodigitNumber(s,e));v&&(u+=l.convertValueParts(f,t.IntlBase.latnParseRegex,i.numMapper.mapper))}return u},n.getCurrentDateValue=function(n,i){return i?t.HijriParser.getHijriDate(n):{year:n.getFullYear(),month:n.getMonth()+1,date:n.getDate()}},n.checkTwodigitNumber=function(n,t){var i=n+"";return 2===t&&2!==i.length?"0"+i:i},n.getTimeZoneValue=function(n,t){var r=this,u=t.split(";")[n>0?1:0],i=Math.abs(n);return u.replace(/HH?|mm/g,function(n){var t=n.length,u=-1!==n.indexOf("H");return r.checkTwodigitNumber(Math.floor(u?i/60:i%60),t)})},n}(),ar={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},ut=["infinity","nan","group","decimal","exponential"],vr=function(){function n(){}return n.numberFormatter=function(n,r,e){var p,g=this,o=s({},r),c={},h={},v=t.IntlBase.getDependables(e,n,"",!0),a=v.numericObject,w,y,k,b,d;return h.numberMapper=u()?s({},a):l.getNumberMapper(v.parserObject,l.getNumberingSystem(e),!0),h.currencySymbol=u()?i("currencySymbol",a):t.IntlBase.getCurrencySymbol(v.numericObject,o.currency||t.defaultCurrencyCode,r.altSymbol),h.percentSymbol=u()?i("numberSymbols.percentSign",a):h.numberMapper.numberSymbols.percentSign,h.minusSymbol=u()?i("numberSymbols.minusSign",a):h.numberMapper.numberSymbols.minusSign,w=h.numberMapper.numberSymbols,r.format&&!t.IntlBase.formatRegex.test(r.format)?c=t.IntlBase.customFormat(r.format,h,v.numericObject):((s(o,t.IntlBase.getProperNumericSkeleton(r.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,u()||(p=t.IntlBase.getSymbolPattern(o.type,h.numberMapper.numberSystem,v.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),f(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),f(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!u()&&(p=p.replace(/\u00A4/g,t.IntlBase.defaultCurrency)),u())?(c.nData=s({},{},i(o.type+"nData",a)),c.pData=s({},{},i(o.type+"pData",a)),"currency"===o.type&&r.currency&&t.IntlBase.replaceBlazorCurrency([c.pData,c.nData],h.currencySymbol,r.currency)):(y=p.split(";"),c.nData=t.IntlBase.getFormatData(y[1]||"-"+y[0],!0,h.currencySymbol),c.pData=t.IntlBase.getFormatData(y[0],!1,h.currencySymbol),o.useGrouping&&(o.groupSeparator=w[ut[2]],o.groupData=this.getGroupingDetails(y[0]))),(f(o.minimumFractionDigits)&&(o.minimumFractionDigits=c.nData.minimumFraction),f(o.maximumFractionDigits))&&(k=c.nData.maximumFraction,o.maximumFractionDigits=f(k)&&o.isPercent?0:k),b=o.minimumFractionDigits,d=o.maximumFractionDigits,f(b)||f(d)||b>d&&(o.maximumFractionDigits=b)),s(c.nData,o),s(c.pData,o),function(n){return isNaN(n)?w[ut[1]]:isFinite(n)?g.intNumberFormatter(n,c,h):w[ut[0]]}},n.getGroupingDetails=function(n){var u={},f=n.match(t.IntlBase.negativeDataRegex),r,i,o,e;return f&&f[4]&&(r=f[4],i=r.lastIndexOf(","),-1!==i&&(o=r.split(".")[0],u.primary=o.length-i-1,e=r.lastIndexOf(",",i-1),-1!==e&&(u.secondary=i-1-e))),u},n.checkValueRange=function(n,t,i,r){var o=r?"f":"s",u=0,s=ar["l"+o],e=ar["m"+o];if(f(n)||(this.checkRange(n,s,r),u++),f(t)||(this.checkRange(t,e,r),u++),2===u){if(!(n<t))return!0;rt(e+"specified must be less than the"+s)}else i&&1===u&&rt("Both"+e+"and"+e+"must be present");return!1},n.checkRange=function(n,t,i){var r=i?[0,20]:[1,21];(n<r[0]||n>r[1])&&rt(t+"value must be within the range"+r[0]+"to"+r[1])},n.intNumberFormatter=function(n,i,r){var u,e;if(!f(i.nData.type))return n<0?(n*=-1,u=i.nData):u=0===n&&i.zeroData||i.pData,e="",u.isPercent&&(n*=100),u.groupOne?e=this.processSignificantDigits(n,u.minimumSignificantDigits,u.maximumSignificantDigits):(e=this.processFraction(n,u.minimumFractionDigits,u.maximumFractionDigits),u.minimumIntegerDigits&&(e=this.processMinimumIntegers(e,u.minimumIntegerDigits))),"scientific"===u.type&&(e=(e=n.toExponential(u.maximumFractionDigits)).replace("e",r.numberMapper.numberSymbols[ut[4]])),e=e.replace(".",r.numberMapper.numberSymbols[ut[3]]),u.useGrouping&&(e=this.groupNumbers(e,u.groupData.primary,u.groupSeparator||",",r.numberMapper.numberSymbols[ut[3]]||".",u.groupData.secondary)),e=l.convertValueParts(e,t.IntlBase.latnParseRegex,r.numberMapper.mapper),"N/A"===u.nlead?u.nlead:u.nlead+e+u.nend},n.processSignificantDigits=function(n,t,i){var r=n+"";return r.length<t?n.toPrecision(t):+(r=n.toPrecision(i))+""},n.groupNumbers=function(n,t,i,u,f){for(var c=!r(f)&&0!==f,s=n.split(u),h=s[0],e=h.length,o="";e>t;)o=h.slice(e-t,e)+(o.length?i+o:""),e-=t,c&&(t=f,c=!1);return s[0]=h.slice(0,e)+(o.length?i:"")+o,s.join(u)},n.processFraction=function(n,t,i){var o=(n+"").split(".")[1],f=o?o.length:0,u,e;if(t&&f<t){if(u="",0!==f){for(u+=n,e=0;e<t-f;e++)u+="0";return u}return u=n.toFixed(t),n.toFixed(t)}return!r(i)&&(f>i||0===i)?n.toFixed(i):n+""},n.processMinimumIntegers=function(n,t){var r=n.split("."),i=r[0],f=i.length,u;if(f<t){for(u=0;u<t-f;u++)i="0"+i;r[0]=i}return r.join(".")},n}(),ef=/^[0-9]*$/,yr={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},sf=function(){function n(){}return n.dateParser=function(n,e,o){var ot=this,c=t.IntlBase.getDependables(o,n,e.calendar),st=l.getCurrentNumericOptions(c.parserObject,l.getNumberingSystem(o),!1,u()),s={},tt,p,h,ut,vt,ft,yt,pt,et,nt;if(u()&&e.isServerRendered&&(e=t.IntlBase.compareBlazorDateFormats(e,n)),p=e.format||t.IntlBase.getResultantPattern(e.skeleton,c.dateObject,e.type,!1,u()?n:""),h="",f(p))rt("Format options or type given must be invalid");else{p=t.IntlBase.ConvertDateToWeekFormat(p);s={isIslamic:t.IntlBase.islamicRegex.test(e.calendar),pattern:p,evalposition:{},culture:n};for(var ht=p.match(t.IntlBase.dateParseRegex)||[],ct=ht.length,lt=0,at=0,it=!1,v=st.numericRegex,wt=u()?c.parserObject.numbers:l.getNumberMapper(c.parserObject,l.getNumberingSystem(o)),k=0;k<ct;k++){var d=ht[k],a=d.length,w="K"===d[0]?"h":d[0],g=void 0,b=void 0,y=ff[w],bt=2===a?"":"?";switch(it&&(lt=at,it=!1),w){case"E":case"c":ut=void 0;ut=u()?i("days."+t.IntlBase.monthIndex[a],c.dateObject):c.dateObject[t.IntlBase.days]["stand-alone"][t.IntlBase.monthIndex[a]];vt=l.reverseObject(ut);h+="("+Object.keys(vt).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(b=!0,("M"===w||"L"===w)&&a>2)ft=void 0,ft=u()?i("months."+t.IntlBase.monthIndex[a],c.dateObject):c.dateObject.months["stand-alone"][t.IntlBase.monthIndex[a]],s[y]=l.reverseObject(ft),h+="("+Object.keys(s[y]).join("|")+")";else if("f"===w){if(a>3)continue;g=!0;h+="("+v+v+"?"+v+"?)"}else g=!0,h+="("+v+v+bt+")";"h"===w&&(s.hour12=!0);break;case"W":h+="("+v+(1===a?"?":"")+v+")";break;case"y":b=g=!0;h+=2===a?"("+v+v+")":"("+v+"{"+a+",})";break;case"a":b=!0;yt=u()?i("dayPeriods",c.dateObject):i("dayPeriods.format.wide",c.dateObject);s[y]=l.reverseObject(yt);h+="("+Object.keys(s[y]).join("|")+")";break;case"G":b=!0;pt=a<=3?"eraAbbr":4===a?"eraNames":"eraNarrow";s[y]=l.reverseObject(u()?i("eras",c.dateObject):i("eras."+pt,c.dateObject));h+="("+Object.keys(s[y]).join("|")+"?)";break;case"z":b=0!==(new Date).getTimezoneOffset();s[y]=i("dates.timeZoneNames",c.parserObject);et=s[y];nt=(tt=a<4)?"+H;-H":et.hourFormat;nt=nt.replace(/:/g,wt.timeSeparator);h+="("+this.parseTimeZoneRegx(nt,et,v)+")?";it=!0;at=tt?6:12;break;case"'":h+="("+d.replace(/'/g,"")+")?";break;default:h+="([\\D])"}b&&(s.evalposition[y]={isNumber:g,pos:k+1+lt,hourOnly:tt});k!==ct-1||r(h)||(s.parserRegex=new RegExp("^"+h+"$","i"))}}return function(n){var i=ot.internalDateParse(n,s,st),e;if(r(i)||!Object.keys(i).length)return null;if(s.isIslamic){var u={},f=i.year,o=i.day,h=i.month,c=f?f+"":"",l=2===c.length;f&&h&&o&&!l||(u=t.HijriParser.getHijriDate(new Date));l&&(f=parseInt((u.year+"").slice(0,2)+c,10));e=t.HijriParser.toGregorian(f||u.year,h||u.month,o||u.date);i.year=e.getFullYear();i.month=e.getMonth()+1;i.day=e.getDate()}return ot.getDateObject(i)}},n.getDateObject=function(n,t){var i=t||new Date,o,h,u,r,c,l,p,s,a;i.setMilliseconds(0);var e=n.year,v=n.designator,y=n.timeZone;for(f(e)||((e+"").length<=2&&(e+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(e)),o=0,h=["hour","minute","second","milliseconds","month","day"];o<h.length;o++)if(u=h[o],r=n[u],f(r)&&"day"===u&&i.setDate(1),!f(r))if("month"===u){if((r-=1)<0||r>11)return new Date("invalid");c=i.getDate();i.setDate(1);i[yr[u]](r);l=new Date(i.getFullYear(),r+1,0).getDate();i.setDate(c<l?c:l)}else{if("day"===u&&(p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),r<1||r>p))return null;i[yr[u]](r)}return f(v)||(s=i.getHours(),"pm"===v?i.setHours(s+(12===s?0:12)):12===s&&i.setHours(0)),f(y)||(a=y-i.getTimezoneOffset(),0!==a&&i.setMinutes(i.getMinutes()+a)),i},n.internalDateParse=function(n,t,i){var u=n.match(t.parserRegex),s={hour:0,minute:0,second:0},l,v;if(r(u))return null;for(l=0,v=Object.keys(t.evalposition);l<v.length;l++){var e=v[l],a=t.evalposition[e],o=u[a.pos];if(a.isNumber)s[e]=this.internalNumberParser(o,i);else if("timeZone"!==e||f(o))o="month"!==e||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?o:o[0].toUpperCase()+o.substring(1).toLowerCase(),s[e]=t[e][o];else{var h=a.pos,c=void 0,y=u[h+1],p=!f(y);a.hourOnly?c=60*this.getZoneValue(p,y,u[h+4],i):(c=60*this.getZoneValue(p,y,u[h+7],i),c+=this.getZoneValue(p,u[h+4],u[h+10],i));r(c)||(s[e]=c)}}return t.hour12&&(s.hour12=!0),s},n.internalNumberParser=function(n,t){return n=l.convertValueParts(n,t.numberParseRegex,t.numericPair),ef.test(n)?+n:null},n.parseTimeZoneRegx=function(n,t,i){var r,u,e=t.gmtFormat,f="("+i+")("+i+")";return r=n.replace("+","\\+"),u=(r=-1!==n.indexOf("HH")?r.replace(/HH|mm/g,"("+f+")"):r.replace(/H|m/g,"("+f+"?)")).split(";").map(function(n){return e.replace("{0}",n)}),r=u.join("|")+"|"+t.gmtZeroFormat},n.getZoneValue=function(n,t,i,r){var f=n?t:i,u;return f?(u=this.internalNumberParser(f,r),n?-u:u):0},n}(),hf=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,cf=/,/g,lf=["minusSign","infinity"],af=function(){function n(){}return n.numberParser=function(n,r,f){var o,y=this,a=t.IntlBase.getDependables(f,n,"",!0),e={custom:!0},v,h,c;return t.IntlBase.formatRegex.test(r.format)||!r.format?(s(e,t.IntlBase.getProperNumericSkeleton(r.format||"N")),e.custom=!1,e.fractionDigits||r.maximumFractionDigits&&(e.maximumFractionDigits=r.maximumFractionDigits)):s(e,t.IntlBase.customFormat(r.format,null,null)),h=i("numbers",a.parserObject),(o=l.getCurrentNumericOptions(a.parserObject,l.getNumberingSystem(f),!0,u()),e.symbolRegex=l.getSymbolRegex(Object.keys(o.symbolMatch)),e.infinity=o.symbolNumberSystem[lf[1]],u())?(e.nData=s({},{},i(e.type+"nData",h)),e.pData=s({},{},i(e.type+"pData",h)),"currency"===e.type&&r.currency&&t.IntlBase.replaceBlazorCurrency([e.pData,e.nData],i("currencySymbol",h),r.currency)):(v=t.IntlBase.getSymbolPattern(e.type,o.numberSystem,a.numericObject,e.isAccount))&&(c=(v=v.replace(/\u00A4/g,t.IntlBase.defaultCurrency)).split(";"),e.nData=t.IntlBase.getFormatData(c[1]||"-"+c[0],!0,""),e.pData=t.IntlBase.getFormatData(c[0],!0,"")),function(n){return y.getParsedNumber(n,e,o)}},n.getParsedNumber=function(n,t,i){var o,a,f,s,h,u,e,c;return-1!==n.indexOf(t.infinity)?1/0:(n=l.convertValueParts(n,t.symbolRegex,i.symbolMatch),0===(n=-1!==(n=l.convertValueParts(n,i.numberParseRegex,i.numericPair)).indexOf("-")?n.replace("-.","-0."):n).indexOf(".")&&(n="0"+n),e=n.match(hf),r(e))?NaN:(s=e[1],f=e[2],c=e[5],h=e[6],a=(o=t.custom?s===t.nData.nlead&&h===t.nData.nend:-1!==s.indexOf(t.nData.nlead)&&-1!==h.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,f=f.replace(cf,""),c&&(f+=c),u=+f,("percent"===t.type||a)&&(u/=100),(t.custom||t.fractionDigits)&&(u=parseFloat(u.toFixed(t.custom?o?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(u=this.convertMaxFracDigits(f,t,u,o)),o&&(u*=-1),u)},n.convertMaxFracDigits=function(n,t,i,r){var u=n.split(".");return u[1]&&u[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?r?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},n}(),vt=function(){function n(n){this.ranArray=[];this.boundedEvents={};r(n)||(this.context=n)}return n.prototype.on=function(n,t,i,u){if(!r(t)){var f=i||this.context;this.notExist(n)?this.boundedEvents[n]=[{handler:t,context:f}]:r(u)?this.isHandlerPresent(this.boundedEvents[n],t)||this.boundedEvents[n].push({handler:t,context:f}):-1===this.ranArray.indexOf(u)&&(this.ranArray.push(u),this.boundedEvents[n].push({handler:t,context:f,id:u}))}},n.prototype.off=function(n,t,r){var f,u,e;if(!this.notExist(n))if(f=i(n,this.boundedEvents),t){for(u=0;u<f.length;u++)if(r){if(f[u].id===r){f.splice(u,1);e=this.ranArray.indexOf(r);-1!==e&&this.ranArray.splice(e,1);break}}else if(t===f[u].handler){f.splice(u,1);break}}else delete this.boundedEvents[n]},n.prototype.notify=function(n,t,r,u){var e,f,o,s;if(this.notExist(n))r&&r.call(this,t);else{if(t&&(t.name=n),e=i(n,this.boundedEvents).slice(0),window.Blazor)return this.blazorCallback(e,t,r,u,0);for(f=0,o=e;f<o.length;f++)s=o[f],s.handler.call(s.context,t);r&&r.call(this,t)}},n.prototype.blazorCallback=function(n,t,i,r,u){var e=this,h=u===n.length-1,f,o;if(u<n.length)if(f=n[u],o=f.handler.call(f.context,t),o&&"function"==typeof o.then){if(!i)return o;o.then(function(o){if(o="string"==typeof o&&e.isJson(o)?JSON.parse(o,e.dateReviver):o,s(t,t,o,!0),!i||!h)return e.blazorCallback(n,t,i,r,u+1);i.call(f.context,t)}).catch(function(n){r&&r.call(f.context,"string"==typeof n&&e.isJson(n)?JSON.parse(n,e.dateReviver):n)})}else{if(!i||!h)return this.blazorCallback(n,t,i,r,u+1);i.call(f.context,t)}},n.prototype.dateReviver=function(n,t){return u&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},n.prototype.isJson=function(n){try{JSON.parse(n)}catch(n){return!1}return!0},n.prototype.destroy=function(){this.boundedEvents=this.context=void 0},n.prototype.notExist=function(n){return!1===this.boundedEvents.hasOwnProperty(n)||this.boundedEvents[n].length<=0},n.prototype.isHandlerPresent=function(n,t){for(var i=0,r=n;i<r.length;i++)if(r[i].handler===t)return!0;return!1},n}(),ft=new vt;t.rightToLeft=!1;v={};t.defaultCulture="en-US";t.defaultCurrencyCode="USD";var ui=["numericObject","dateObject"],vf=function(){function n(n){n&&(this.culture=n)}return n.prototype.getDateFormat=function(n){return lr.dateFormat(this.getCulture(),n||{type:"date",skeleton:"short"},v)},n.prototype.getNumberFormat=function(n){return n&&!n.currency&&(n.currency=t.defaultCurrencyCode),u()&&n&&!n.format&&(n.minimumFractionDigits=0),vr.numberFormatter(this.getCulture(),n||{},v)},n.prototype.getDateParser=function(n){return sf.dateParser(this.getCulture(),n||{skeleton:"short",type:"date"},v)},n.prototype.getNumberParser=function(n){return u()&&n&&!n.format&&(n.minimumFractionDigits=0),af.numberParser(this.getCulture(),n||{format:"N"},v)},n.prototype.formatNumber=function(n,t){return this.getNumberFormat(t)(n)},n.prototype.formatDate=function(n,t){return this.getDateFormat(t)(n)},n.prototype.parseDate=function(n,t){return this.getDateParser(t)(n)},n.prototype.parseNumber=function(n,t){return this.getNumberParser(t)(n)},n.prototype.getDatePattern=function(n,i){return t.IntlBase.getActualDateTimeFormat(this.getCulture(),n,v,i)},n.prototype.getNumberPattern=function(n,i){return t.IntlBase.getActualNumberFormat(this.getCulture(),n,v,i)},n.prototype.getFirstDayOfWeek=function(){return t.IntlBase.getWeekData(this.getCulture(),v)},n.prototype.getCulture=function(){return this.culture||t.defaultCulture},n}(),fi={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(n){function k(t,r,u,o,s){var h,c=u||"date",l,a;return s?h=e({skeleton:t},s).format||e({skeleton:"d"},"en-US").format:(-1!==n.basicPatterns.indexOf(t)?(h=i(c+"Formats."+t,r),"dateTime"===c)&&(l=i("dateFormats."+t,r),a=i("timeFormats."+t,r),h=h.replace("{1}",l).replace("{0}",a)):h=i("dateTimeFormats.availableFormats."+t,r),f(h)&&"yMd"===t&&(h="M/d/y")),h}function a(t,r,f,e){var o={},h=f||"gregorian",s;return(o.parserObject=l.getMainObject(t,r)||(u()?n.blazorDefaultObject:n.defaultObject),e)?o.numericObject=i("numbers",o.parserObject):(s=u()?"dates":"dates.calendars."+h,o.dateObject=i(s,o.parserObject)),o}function v(n,t,r,u){return i(n+"Formats-numberSystem-"+t+(u?".accounting":".standard"),r)||(u?i(n+"Formats-numberSystem-"+t+".standard",r):"")}function d(t){var i=t.match(n.dateConverterMapper),r;return i&&u()?(r=3===i[0].length?"EEE":"EEEE",t.replace(n.dateConverterMapper,r)):t}function e(n,t){var u=n.format||n.skeleton,r=i((t||"en-US")+"."+u,fi);return r||(r=i("en-US."+u,fi)),r&&(r=d(r),n.format=r.replace(/tt/,"a")),n}function y(t){var r=t.match(n.formatRegex),i={},u=r[1].toUpperCase();return i.isAccount="A"===u,i.type=n.patternMatcher[u],t.length>1&&(i.fractionDigits=parseInt(r[2],10)),i}function o(t,i,u,f){var e=f?{}:{nlead:"",nend:""},o=t.match(n.customRegex),s,h;return o&&(f||(e.nlead=p(o[1],u),e.nend=p(o[10],u),e.groupPattern=o[4]),s=o[7],s&&i&&(h=s.match(w),e.minimumFraction=r(h)?0:h.length,e.maximumFraction=s.length-1)),e}function p(t,i){return t?t.replace(n.defaultCurrency,i):""}function g(n,t,r){return i("currencies."+t+(r?"."+r:".symbol"),n)||i("currencies."+t+".symbol-alt-narrow",n)||"$"}function nt(t,i,u){var f={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},o=t.match(n.customRegex),e,c,l;return r(o)||""===o[5]&&"N/A"!==t?(f.type=void 0,f):(f.nlead=o[1],f.nend=o[10],e=o[6],f.useGrouping=-1!==e.indexOf(","),e=e.replace(/,/g,""),c=o[7],(-1!==e.indexOf("0")&&(f.minimumIntegerDigits=e.length-e.indexOf("0")),r(c)||(f.minimumFractionDigits=c.lastIndexOf("0"),f.maximumFractionDigits=c.lastIndexOf("#"),-1===f.minimumFractionDigits&&(f.minimumFractionDigits=0),(-1===f.maximumFractionDigits||f.maximumFractionDigits<f.minimumFractionDigits)&&(f.maximumFractionDigits=f.minimumFractionDigits)),r(i)?s(f,h([f.nlead,f.nend],"%","%")):(s(f,h([f.nlead,f.nend],"$",i.currencySymbol)),f.isCurrency||s(f,h([f.nlead,f.nend],"%",i.percentSymbol))),r(u))||(l=v(f.type,i.numberMapper.numberSystem,u,!1),f.useGrouping&&(f.groupSeparator=i.numberMapper.numberSymbols[ut[2]],f.groupData=vr.getGroupingDetails(l.split(";")[0])),f.nlead=f.nlead.replace(/'/g,""),f.nend=f.nend.replace(/'/g,"")),f)}function h(n,t,i){for(var u,f,r={nlead:n[0],nend:n[1]},e=0;e<2;e++)if(u=n[e],f=u.indexOf(t),-1!==f&&(f<u.indexOf("'")||f>u.lastIndexOf("'"))){r[c[e]]=u.substr(0,f)+i+u.substr(f+1);r[c[t]]=!0;r.type=r.isCurrency?"currency":"percent";break}return r}function tt(n,t,i){var r,f,u;for(n+=".",r=0;r<t;r++)n+="0";if(t<i)for(f=i-t,u=0;u<f;u++)n+="#";return n}function it(n,t){for(var r=n.split("."),i="",u=0;u<t;u++)i+="0";return r[1]?i+"."+r[1]:i}function rt(n){var r=n.split("."),t=r[0],u=3-t.length%3,i;for(n="",i=(t=(u&&1===u?"#":2===u?"##":"")+t).length-1;i>0;i-=3)n=","+t[i-2]+t[i-1]+t[i]+n;return n=n.slice(1),r[1]?n+"."+r[1]:n}var w,b,c;n.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;n.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;n.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;w=/[0-9]/g;n.defaultCurrency="$";var ut=["infinity","nan","group","decimal"],ft=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,et={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};n.dateConverterMapper=/dddd|ddd/gi;n.islamicRegex=/^islamic/;b={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};n.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i;n.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i;n.curWithoutNumberRegex=/(c|a)$/gi;c={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};n.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi;n.basicPatterns=["short","medium","long","full"];n.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}};n.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}};n.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"};n.month="months";n.days="days";n.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"};n.getResultantPattern=k;n.getDependables=a;n.getSymbolPattern=v;n.ConvertDateToWeekFormat=d;n.compareBlazorDateFormats=e;n.getProperNumericSkeleton=y;n.getFormatData=o;n.changeCurrencySymbol=p;n.getCurrencySymbol=g;n.customFormat=function(n,t,i){for(var u={},e=n.split(";"),o=["pData","nData","zeroData"],f=0;f<e.length;f++)u[o[f]]=nt(e[f],t,i);return r(u.nData)&&(u.nData=s({},u.pData),u.nData.nlead=r(t)?"-"+u.nData.nlead:t.minusSymbol+u.nData.nlead),u};n.customNumberFormat=nt;n.isCurrencyPercent=h;n.getDateSeparator=function(n){var t=(i("dateFormats.short",n)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"};n.getActualDateTimeFormat=function(n,t,r,f){var v=a(r,n,t.calendar),o,y,c;if(u()&&(t=e(t,n)),o=t.format||k(t.skeleton,v.dateObject,t.type),f){if(-1!==(o=o.replace(ft,function(n){return et[n]})).indexOf("z")){var p=o.match(/z/g).length,h=void 0,s={timeZone:{}};s.numMapper=l.getNumberMapper(v.parserObject,l.getNumberingSystem(r));s.timeZone=i("dates.timeZoneNames",v.parserObject);y=(new Date).getTimezoneOffset();c=p<4?"+H;-H":s.timeZone.hourFormat;c=c.replace(/:/g,s.numMapper.timeSeparator);0===y?h=s.timeZone.gmtZeroFormat:(h=lr.getTimeZoneValue(y,c),h=s.timeZone.gmtFormat.replace(/\{0\}/,h));o=o.replace(/[z]+/,'"'+h+'"')}o=o.replace(/ $/,"")}return o};n.getActualNumberFormat=function(r,f,e,h){var ut,c,b=a(e,r,"",!0),p={custom:!0},k=b.numericObject,w={},st=(f.format||"").match(n.currencyFormatRegex),ht=n.formatRegex.test(f.format)?y(f.format||"N"):{},d={},ot;if(st){d.numberMapper=u()?s({},b.numericObject):l.getNumberMapper(b.parserObject,l.getNumberingSystem(e),!0);var ft=u()?i("currencySymbol",b.numericObject):g(b.numericObject,f.currency||t.defaultCurrencyCode,f.altSymbol),et=v("currency",d.numberMapper.numberSystem,b.numericObject,/a/i.test(f.format)),nt=(et=et.replace(/\u00A4/g,ft)).split(";");w.hasNegativePattern=!!u()||nt.length>1;w.nData=u()?i(ht.type+"nData",k):o(nt[1]||"-"+nt[0],!0,ft);w.pData=u()?i(ht.type+"pData",k):o(nt[0],!1,ft);st[2]||f.minimumFractionDigits||f.maximumFractionDigits||(ut=o(et.split(";")[0],!0,"",!0).minimumFraction)}return n.formatRegex.test(f.format)||!f.format?((s(p,y(f.format||"N")),p.custom=!1,c="###0",p.fractionDigits||f.minimumFractionDigits||f.maximumFractionDigits||ut)&&(p.fractionDigits&&(f.minimumFractionDigits=f.maximumFractionDigits=p.fractionDigits),c=tt(c,ut||p.fractionDigits||f.minimumFractionDigits||0,f.maximumFractionDigits||0)),(f.minimumIntegerDigits&&(c=it(c,f.minimumIntegerDigits)),f.useGrouping&&(c=rt(c)),"currency"===p.type||p.type&&u())&&(u()&&"currency"!==p.type&&(w.pData=i(p.type+"pData",k),w.nData=i(p.type+"nData",k)),ot=c,c=w.pData.nlead+ot+w.pData.nend,(w.hasNegativePattern||u())&&(c+=";"+w.nData.nlead+ot+w.nData.nend)),"percent"!==p.type||u()||(c+=" %")):c=f.format.replace(/'/g,'"'),Object.keys(d).length>0&&(c=h?c:function(n,t){if(-1!==n.indexOf(",")){var r=n.split(",");n=r[0]+i("numberMapper.numberSymbols.group",t)+r[1].replace(".",i("numberMapper.numberSymbols.decimal",t))}else n=n.replace(".",i("numberMapper.numberSymbols.decimal",t));return n}(c,d)),c};n.fractionDigitsPattern=tt;n.minimumIntegerPattern=it;n.groupingPattern=rt;n.getWeekData=function(n,t){var u="sun",f=i("supplemental.weekData.firstDay",t),r=n;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),f&&(u=f[r]||"sun"),b[u]};n.replaceBlazorCurrency=function(n,t,r){var e=i(r||"",tf),f,o,u;if(t!==e)for(f=0,o=n;f<o.length;f++)u=o[f],u.nend=u.nend.replace(t,e),u.nlead=u.nlead.replace(t,e)};n.getWeekOfYear=function(n){var r,u=new Date(n.getFullYear(),0,1),t=u.getDay(),f,i;return t=t>=0?t:t+7,f=Math.floor((n.getTime()-u.getTime()-6e4*(n.getTimezoneOffset()-u.getTimezoneOffset()))/864e5)+1,t<4?(r=Math.floor((f+t-1)/7)+1)>52&&(i=new Date(this.getFullYear()+1,0,1).getDay(),r=(i=i>=0?i:i+7)<4?1:53):r=Math.floor((f+t-1)/7),r}}(t.IntlBase||(t.IntlBase={}));var pr=/^(.*?):[ \t]*([^\r\n]*)$/gm,yf=function(){function t(t,i,u,f){this.mode=!0;this.emitError=!0;this.options={};"string"==typeof t?(this.url=t,this.type=i?i.toUpperCase():"GET",this.mode=!!r(u)||u):"object"===n(t)&&(this.options=t,nt(this,this.options));this.type=this.type?this.type.toUpperCase():"GET";this.contentType=void 0!==this.contentType?this.contentType:f}return t.prototype.send=function(n){var t=this,i;return this.data=r(n)?this.data:n,i={cancel:!1,httpRequest:null},new Promise(function(n,u){t.httpRequest=new XMLHttpRequest;t.httpRequest.onreadystatechange=function(){t.stateChange(n,u)};r(t.onLoad)||(t.httpRequest.onload=t.onLoad);r(t.onProgress)||(t.httpRequest.onprogress=t.onProgress);r(t.onAbort)||(t.httpRequest.onabort=t.onAbort);r(t.onError)||(t.httpRequest.onerror=t.onError);r(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress);t.httpRequest.open(t.type,t.url,t.mode);r(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8");t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i));i.cancel||t.httpRequest.send(r(t.data)?null:t.data)})},t.prototype.successHandler=function(n){return this.onSuccess&&this.onSuccess(n,this),n},t.prototype.failureHandler=function(n){return this.onFailure&&this.onFailure(this.httpRequest),n},t.prototype.stateChange=function(n,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?n(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):n())},t.prototype.getResponseHeader=function(n){for(var u,i={},t=pr.exec(this.httpRequest.getAllResponseHeaders());t;)i[t[1].toLowerCase()]=t[2],t=pr.exec(this.httpRequest.getAllResponseHeaders());return r(u=i[n.toLowerCase()])?null:u},t}(),pf=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,wf=/msie|trident/i,bf=/Trident\/7\./,kf=/(ipad|iphone|ipod touch)/i,df=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,gf=/android/i,ne=/trident|windows phone|edge/i,te=/(version)[ /]([\w.]+)/i,wr={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var o=function(){function n(){}return n.extractBrowserDetail=function(){for(var e,u,t={culture:{}},i=[],r=0,f=Object.keys(wr);r<f.length;r++)if(e=f[r],i=n.userAgent.match(wr[e])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,n.userAgent.match(bf)){t.name="msie";break}u=n.userAgent.match(te);"safari"===t.name&&u&&(t.version=u[2]);break}return t},n.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return n.isPointer?i[t].isPointer:n.isTouch?i[t].isTouch+(n.isDevice?"":" "+i[t].isDevice):i[t].isDevice},n.getTouchStartEvent=function(){return n.getEvent("start")},n.getTouchEndEvent=function(){return n.getEvent("end")},n.getTouchMoveEvent=function(){return n.getEvent("move")},n.getTouchCancelEvent=function(){return n.getEvent("cancel")},n.getValue=function(t,i){var r=window.browserDetails;return void 0===r[t]?r[t]=i.test(n.userAgent):r[t]},Object.defineProperty(n,"userAgent",{get:function(){return n.uA},set:function(t){n.uA=t;window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(n,"info",{get:function(){return f(window.browserDetails.info)?window.browserDetails.info=n.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isIE",{get:function(){return n.getValue("isIE",wf)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isTouch",{get:function(){return f(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isPointer",{get:function(){return f(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isMSPointer",{get:function(){return f(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isDevice",{get:function(){return n.getValue("isDevice",pf)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isIos",{get:function(){return n.getValue("isIos",kf)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isIos7",{get:function(){return n.getValue("isIos7",df)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isAndroid",{get:function(){return n.getValue("isAndroid",gf)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isWebView",{get:function(){return f(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(f(window.cordova)&&f(window.PhoneGap)&&f(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(n,"isWindows",{get:function(){return n.getValue("isWindows",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"touchStartEvent",{get:function(){return f(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=n.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(n,"touchMoveEvent",{get:function(){return f(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=n.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(n,"touchEndEvent",{get:function(){return f(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=n.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(n,"touchCancelEvent",{get:function(){return f(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=n.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),n.uA="undefined"!=typeof navigator?navigator.userAgent:"",n}(),e=function(){function n(){}return n.addOrGetEventData=function(n){return"__eventList"in n?n.__eventList.events:(n.__eventList={},n.__eventList.events=[])},n.add=function(t,i,r,u,f){var e,c=n.addOrGetEventData(t),h,s;for(e=f?er(r,f):r,u&&(e=e.bind(u)),h=i.split(" "),s=0;s<h.length;s++)c.push({name:h[s],listener:r,debounce:e}),o.isIE?t.addEventListener(h[s],e):t.addEventListener(h[s],e,{passive:!1});return e},n.remove=function(t,i,r){for(var u=n.addOrGetEventData(t),f=i.split(" "),o=function(n){var i,e=-1;u&&0!==u.length&&u.some(function(t,u){return t.name===f[n]&&t.listener===r&&(e=u,i=t.debounce,!0)});-1!==e&&u.splice(e,1);i&&t.removeEventListener(f[n],i)},e=0;e<f.length;e++)o(e)},n.clearEvents=function(t){for(var u,i=s([],i,u=n.addOrGetEventData(t)),r=0;r<i.length;r++)t.removeEventListener(i[r].name,i[r].debounce),u.shift()},n.trigger=function(t,i,r){for(var e,u=0,f=n.addOrGetEventData(t);u<f.length;u++)e=f[u],e.name===i&&e.debounce.call(this,r)},n}(),ie=/^svg|^path|^g/;nu=new RegExp("]");w=function(){function n(n,t){this.isRendered=!1;this.isComplexArraySetter=!1;this.isServerRendered=!1;this.allowServerDataBinding=!0;this.isProtectedOnChange=!0;this.properties={};this.changedProperties={};this.oldProperties={};this.bulkChanges={};this.refreshing=!1;this.ignoreCollectionWatch=!1;this.finalUpdate=function(){};this.childChangedProperties={};this.modelObserver=new vt(this);f(t)||(this.element="string"==typeof t?document.querySelector(t):t,r(this.element)||(this.isProtectedOnChange=!1,this.addInstance()));f(n)||this.setProperties(n,!0);this.isDestroyed=!1}return n.prototype.setProperties=function(n,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t;nt(this,n);!0!==t?(nt(this.changedProperties,n),this.dataBind()):u()&&this.isRendered&&this.serverDataBind(n);this.finalUpdate();this.changedProperties={};this.oldProperties={};this.isProtectedOnChange=i},n.callChildDataBind=function(n,t){for(var r,u,e,o,i=0,f=Object.keys(n);i<f.length;i++)if(r=f[i],_instanceof(t[r],Array))for(u=0,e=t[r];u<e.length;u++)o=e[u],void 0!==o.dataBind&&o.dataBind();else t[r].dataBind()},n.prototype.clearChanges=function(){this.finalUpdate();this.changedProperties={};this.oldProperties={};this.childChangedProperties={}},n.prototype.dataBind=function(){if(n.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,r=this.oldProperties;this.clearChanges();this.isProtectedOnChange=!0;this.onPropertyChanged(i,r);this.isProtectedOnChange=t}},n.prototype.serverDataBind=function(n){u()&&(n=n||{},s(this.bulkChanges,{},n,!0),this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={}))},n.prototype.saveChanges=function(n,t,i){if(u()){var r={};r[n]=t;this.serverDataBind(r)}this.isProtectedOnChange||(this.oldProperties[n]=i,this.changedProperties[n]=t,this.finalUpdate(),this.finalUpdate=ur(this.dataBind.bind(this)))},n.prototype.addEventListener=function(n,t){this.modelObserver.on(n,t)},n.prototype.removeEventListener=function(n,t){this.modelObserver.off(n,t)},n.prototype.trigger=function(n,t,r,u){var e=this,h,s,o,f;if(!0!==this.isDestroyed)return h=this.isProtectedOnChange,this.isProtectedOnChange=!1,s=this.modelObserver.notify(n,t,r,u),nu.test(n)&&(o=i(n,this),o?window.Blazor?(f=o.call(this,t),f&&"function"==typeof f.then?r?f.then(function(n){r&&(n="string"==typeof n&&e.modelObserver.isJson(n)?JSON.parse(n):n,r.call(e,n))}).catch(function(n){u&&(n="string"==typeof n&&e.modelObserver.isJson(n)?JSON.parse(n):n,u.call(e,n))}):s=f:r&&r.call(this,t)):(o.call(this,t),r&&r.call(this,t)):r&&r.call(this,t)),this.isProtectedOnChange=h,s},n.prototype.addInstance=function(){var n="e-"+this.getModuleName().toLowerCase();yt([this.element],["e-lib",n]);r(this.element.ej2_instances)?y("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},n.prototype.destroy=function(){var n=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(t){return t!==n});pt([this.element],["e-"+this.getModuleName()]);0===this.element.ej2_instances.length&&pt([this.element],["e-lib"]);this.clearChanges();this.modelObserver.destroy();this.isDestroyed=!0},n}();var ai,ve=(ai=function(n,t){return(ai=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ai(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),b=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},ye=function(n){function t(t){var i=n.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return ve(t,n),i=t,t.prototype.animate=function(n,t){var r,u,f,e;if(t=t||{},r=this.getModel(t),"string"==typeof n)for(u=0,f=Array.prototype.slice.call(si(n,document));u<f.length;u++)e=f[u],r.element=e,i.delayAnimation(r);else r.element=n,i.delayAnimation(r)},t.stop=function(n,t){var i,r;n.style.animation="";n.removeAttribute("e-animate");i=n.getAttribute("e-animation-id");i&&(r=parseInt(i,10),cancelAnimationFrame(r),n.removeAttribute("e-animation-id"));t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(n){n.delay?setTimeout(function(){i.applyAnimation(n)},n.delay):i.applyAnimation(n)},t.applyAnimation=function(n){var i=this;n.timeStamp=0;var r=0,u=0,t=0,f=n.duration;n.element.setAttribute("e-animate","true");!function e(o){try{if(o){t=0===t?o:t;n.timeStamp=o+n.timeStamp-t;t=o;!r&&n.begin&&n.begin.call(i,n);r+=1;var s=n.timeStamp/r;n.timeStamp<f&&n.timeStamp+s<f&&n.element.getAttribute("e-animate")?(n.element.style.animation=n.name+" "+n.duration+"ms "+n.timingFunction,n.progress&&n.progress.call(i,n),requestAnimationFrame(e)):(cancelAnimationFrame(u),n.element.removeAttribute("e-animation-id"),n.element.removeAttribute("e-animate"),n.element.style.animation="",n.end&&n.end.call(i,n))}else u=requestAnimationFrame(e),n.element.setAttribute("e-animation-id",u.toString())}catch(r){cancelAnimationFrame(u);n.element.removeAttribute("e-animation-id");n.fail&&n.fail.call(i,r)}}()},t.prototype.getModel=function(n){return{name:n.name||this.name,delay:n.delay||this.delay,duration:void 0!==n.duration?n.duration:this.duration,begin:n.begin||this.begin,end:n.end||this.end,fail:n.fail||this.fail,progress:n.progress||this.progress,timingFunction:this.easing[n.timingFunction]?this.easing[n.timingFunction]:n.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},b([h("FadeIn")],t.prototype,"name",void 0),b([h(400)],t.prototype,"duration",void 0),b([h("ease")],t.prototype,"timingFunction",void 0),b([h(0)],t.prototype,"delay",void 0),b([a()],t.prototype,"progress",void 0),b([a()],t.prototype,"begin",void 0),b([a()],t.prototype,"end",void 0),b([a()],t.prototype,"fail",void 0),t=i=b([it],t)}(w);t.isRippleEnabled=!1;var vi,yi,ou=function(){function n(n){this.loadedModules=[];this.parent=n}return n.prototype.inject=function(n,t){var h=n.length,r,u,o,l,f,s;if(0!==h)for(this.loadedModules.length&&this.clearUnusedModule(n),r=0;r<h;r++)for(var i=n[r],e=0,c=t;e<c.length;e++)u=c[e],o=i.member,u.prototype.getModuleName()!==i.member||this.isModuleLoaded(o)||(l=lt(u,i.args),f=this.getMemberName(o),i.isProperty?y(f,u,this.parent):y(f,l,this.parent),s=i,s.member=f,this.loadedModules.push(s));else this.clean()},n.prototype.clean=function(){for(var r,n=0,t=this.loadedModules;n<t.length;n++)r=t[n],r.isProperty||i(r.member,this.parent).destroy();this.loadedModules=[]},n.prototype.clearUnusedModule=function(n){for(var t,f=this,e=n.map(function(n){return f.getMemberName(n.member)}),r=0,u=this.loadedModules.filter(function(n){return-1===e.indexOf(n.member)});r<u.length;r++)t=u[r],t.isProperty||i(t.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(t),1),fr(this.parent,t.member)},n.prototype.getMemberName=function(n){return n[0].toLowerCase()+n.substring(1)+"Module"},n.prototype.isModuleLoaded=function(n){for(var t=0,i=this.loadedModules;t<i.length;t++)if(i[t].member===this.getMemberName(n))return!0;return!1},n}(),gt=function(){function n(n,t,r,u){this.isComplexArraySetter=!1;this.properties={};this.changedProperties={};this.childChangedProperties={};this.oldProperties={};this.finalUpdate=function(){};this.callChildDataBind=i("callChildDataBind",w);this.parentObj=n;this.controlParent=this.parentObj.controlParent||this.parentObj;this.propName=t;this.isParentArray=u;this.setProperties(r,!0)}return n.prototype.updateChange=function(n,t){!0===n?this.parentObj.childChangedProperties[t]=n:delete this.parentObj.childChangedProperties[t];this.parentObj.updateChange&&this.parentObj.updateChange(n,this.parentObj.propName)},n.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var n=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(n)}}},n.prototype.clearChanges=function(){this.finalUpdate();this.updateChange(!1,this.propName);this.oldProperties={};this.changedProperties={}},n.prototype.setProperties=function(n,t){!0===t?(nt(this,n),this.updateChange(!1,this.propName),this.clearChanges()):nt(this,n)},n.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var n=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(y(this.propName+"."+n,this.changedProperties,this.parentObj.changedProperties),y(this.propName+"."+n,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},n.prototype.saveChanges=function(n,t,i,r){this.controlParent.isProtectedOnChange||(r||this.serverDataBind(n,t,!0),this.oldProperties[n]=i,this.changedProperties[n]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},n.prototype.serverDataBind=function(n,t,i,r){var f,e,o,h,s,c;if(u()&&!this.parentObj.isComplexArraySetter){if(e={},o=i?this.getParentKey(!0)+"."+n:n,-1!==o.indexOf("."))for(h=o.split("."),f=e,s=0;s<h.length;s++)c=s===h.length-1,f[h[s]]=c?t:{},f=c?f:f[h[s]];else e[o]={},f=e[o],e[o][n]=t;this.isParentArray&&(f.ejsAction=r||"none");this.controlParent.serverDataBind(e)}},n.prototype.getParentKey=function(n){var i="",r=this.propName,t;return this.isParentArray&&(i=this.parentObj[this.propName].indexOf(this),t=this.parentObj[this.propName].length,t=n?t:t>0?t-1:0,r+=i=-1!==i?"-"+i:"-"+t),this.controlParent!==this.parentObj&&(r=this.parentObj.getParentKey()+"."+this.propName+i),r},n}(),pe=(vi=function(n,t){return(vi=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}vi(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ni=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},pi=0,su=0;t.versionBasedStatePersistence=!1;hu=function(e){function o(n,i){var u=e.call(this,n,i)||this;return u.randomId=or(),u.isStringTemplate=!1,u.needsID=!1,u.isReactHybrid=!1,r(u.enableRtl)&&u.setProperties({enableRtl:t.rightToLeft},!0),r(u.locale)&&u.setProperties({locale:t.defaultCulture},!0),u.moduleLoader=new ou(u),u.localObserver=new vt(u),ft.on("notifyExternalChange",u.detectFunction,u,u.randomId),f(i)||u.appendTo(),u}return pe(o,e),o.prototype.requiredModules=function(){return[]},o.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(pt([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),ft.off("notifyExternalChange",this.detectFunction,this.randomId)))},o.prototype.refresh=function(){this.refreshing=!0;this.moduleLoader.clean();this.destroy();this.clearChanges();this.localObserver=new vt(this);this.preRender();this.injectModules();this.render();this.refreshing=!1},o.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},o.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},o.prototype.getLocalData=function(){var n=this.getModuleName()+this.element.id;return t.versionBasedStatePersistence?window.localStorage.getItem(n+this.ej2StatePersistenceVersion):window.localStorage.getItem(n)},o.prototype.appendTo=function(n){var u,t;(r(n)||"string"!=typeof n?r(n)||(this.element=n):this.element=kt(n,document),r(this.element))||(u="e-"+this.getModuleName().toLowerCase(),yt([this.element],["e-control",u]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this))),t=i("ej2_instances",this.element),t&&-1!==t.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created"))},o.prototype.renderComplete=function(n){u()&&window.sfBlazor.renderComplete(this.element,n);this.isRendered=!0},o.prototype.dataBind=function(){this.injectModules();e.prototype.dataBind.call(this)},o.prototype.on=function(n,t,i){var r,f,u;if("string"==typeof n)this.localObserver.on(n,t,i);else for(r=0,f=n;r<f.length;r++){u=f[r];this.localObserver.on(u.event,u.handler,u.context)}},o.prototype.off=function(n,t){var i,r,u;if("string"==typeof n)this.localObserver.off(n,t);else for(i=0,r=n;i<r.length;i++)u=r[i],this.localObserver.off(u.event,u.handler)},o.prototype.notify=function(n,t){!0!==this.isDestroyed&&this.localObserver.notify(n,t)},o.prototype.getInjectedModules=function(){return this.injectedModules},o.Inject=function(){for(var i,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(this.prototype.injectedModules||(this.prototype.injectedModules=[]),i=0;i<n.length;i++)-1===this.prototype.injectedModules.indexOf(n[i])&&this.prototype.injectedModules.push(n[i])},o.prototype.createElement=function(n,t){return g(n,t)},o.prototype.triggerStateChange=function(n,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:n,args:t})},o.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},o.prototype.detectFunction=function(n){var t=Object.keys(n);t.length&&(this[t[0]]=n[t[0]])},o.prototype.mergePersistData=function(){var n;r(n=t.versionBasedStatePersistence?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===n||this.setProperties(JSON.parse(n),!0)},o.prototype.setPersistData=function(){this.isDestroyed||(t.versionBasedStatePersistence?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},o.prototype.renderReactTemplates=function(){},o.prototype.clearTemplate=function(){},o.prototype.getUniqueID=function(n){return this.isHistoryChanged()&&(pi=0),yi=this.pageID(location.href),su=history.length,n+"_"+yi+"_"+pi++},o.prototype.pageID=function(n){var t=0,i;if(0===n.length)return t;for(i=0;i<n.length;i++)t=(t<<5)-t+n.charCodeAt(i),t&=t;return Math.abs(t)},o.prototype.isHistoryChanged=function(){return yi!==this.pageID(location.href)||su!==history.length},o.prototype.addOnPersist=function(n){for(var o,r,s=this,u={},t=0,e=n;t<e.length;t++)r=e[t],f(o=i(r,this))||y(r,this.getActualProperties(o),u);return JSON.stringify(u,function(n,t){return s.getActualProperties(t)})},o.prototype.getActualProperties=function(n){return _instanceof(n,gt)?i("properties",n):n},o.prototype.ignoreOnPersist=function(n){return JSON.stringify(this.iterateJsonProperties(this.properties,n))},o.prototype.iterateJsonProperties=function(t,i){for(var r={},o=function(u){var e,o;-1===i.indexOf(u)&&(e=t[u],"object"!==n(e)||_instanceof(e,Array)?r[u]=e:(o=i.filter(function(n){return new RegExp(u+".").test(n)}).map(function(n){return n.replace(u+".","")}),r[u]=f.iterateJsonProperties(f.getActualProperties(e),o)))},f=this,u=0,e=Object.keys(t);u<e.length;u++)o(e[u]);return r},ni([h(!1)],o.prototype,"enablePersistence",void 0),ni([h()],o.prototype,"enableRtl",void 0),ni([h()],o.prototype,"locale",void 0),o=ni([it],o)}(w);"undefined"!=typeof window&&window.addEventListener("popstate",function(){pi=0});var wi,bi,ki,di,cu=(wi=function(n,t){return(wi=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}wi(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},we={left:0,top:0,bottom:0,right:0},gi={isDragged:!1},lu=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return cu(t,n),c([h(0)],t.prototype,"left",void 0),c([h(0)],t.prototype,"top",void 0),t}(gt),be=function(t){function i(n,i){var r=t.call(this,i,n)||this;return r.dragLimit=l.getDefaultPosition(),r.borderWidth=l.getDefaultPosition(),r.padding=l.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var l;return cu(i,t),l=i,i.prototype.bind=function(){this.toggleEvents();o.isIE&&yt([this.element],"e-block-touch");this.droppables[this.scope]={}},i.getDefaultPosition=function(){return s({},we)},i.prototype.toggleEvents=function(n){var t,i;f(this.handle)||(t=kt(this.handle,this.element));i=this.enableTapHold&&o.isDevice&&o.isTouch?this.mobileInitialize:this.initialize;n?e.remove(t||this.element,o.touchStartEvent,i):e.add(t||this.element,o.touchStartEvent,i,this)},i.prototype.mobileInitialize=function(n){var t=this,i=n.currentTarget;this.tapHoldTimer=setTimeout(function(){t.externalInitialize=!0;t.removeTapholdTimer();t.initialize(n,i)},this.tapHoldThreshold);e.add(document,o.touchMoveEvent,this.removeTapholdTimer,this);e.add(document,o.touchEndEvent,this.removeTapholdTimer,this)},i.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer);e.remove(document,o.touchMoveEvent,this.removeTapholdTimer);e.remove(document,o.touchEndEvent,this.removeTapholdTimer)},i.prototype.getScrollableParent=function(n,t){return r(n)?null:n[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>n[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?n.scrollTop>0:n.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?n.scrollTop:n.scrollTop-this.parentScrollY),this.tempScrollHeight=n.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?n.scrollLeft:n.scrollLeft-this.parentScrollX),this.tempScrollWidth=n.scrollWidth),r(n)?n:this.getScrollableParent(n.parentNode,t)):this.getScrollableParent(n.parentNode,t)},i.prototype.getScrollableValues=function(){this.parentScrollX=0;this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal");this.getScrollableParent(this.element.parentNode,"vertical");this.getScrollableParent(this.element.parentNode,"horizontal")},i.prototype.initialize=function(n,t){var i,s,u,h;if(this.currentStateTarget=n.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=n.currentTarget||t,this.dragProcessStarted=!1,this.abort)for(i=this.abort,"string"==typeof i&&(i=[i]),s=0;s<i.length;s++)if(!r(tt(n.target,i[s])))return void(this.isDragStarted()&&this.isDragStarted(!0));this.preventDefault&&!f(n.changedTouches)&&"touchstart"!==n.type&&n.preventDefault();this.element.setAttribute("aria-grabbed","true");u=this.getCoordinates(n);(this.initialPosition={x:u.pageX,y:u.pageY},this.clone)||(h=this.element.getBoundingClientRect(),this.getScrollableValues(),n.clientX===n.pageX&&(this.parentScrollX=0),n.clientY===n.pageY&&(this.parentScrollY=0),this.relativeXPosition=u.pageX-(h.left+this.parentScrollX),this.relativeYPosition=u.pageY-(h.top+this.parentScrollY));this.externalInitialize?this.intDragStart(n):(e.add(document,o.touchMoveEvent,this.intDragStart,this),e.add(document,o.touchEndEvent,this.intDestroy,this));this.toggleEvents(!0);"touchstart"!==n.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select");this.externalInitialize=!1;e.trigger(document.documentElement,o.touchStartEvent,n)}},i.prototype.intDragStart=function(n){var l,t,a,s,i,v,y,p,c,h,k,d,w,b;if(this.removeTapholdTimer(),l=!f(n.changedTouches),(!l||1===n.changedTouches.length)&&(l&&n.preventDefault(),a=this.getCoordinates(n),s=getComputedStyle(this.element),this.margin={left:parseInt(s.marginLeft,10),top:parseInt(s.marginTop,10),right:parseInt(s.marginRight,10),bottom:parseInt(s.marginBottom,10)},i=this.element,this.clone&&this.dragTarget&&(v=tt(n.target,this.dragTarget),r(v)||(i=v)),this.isReplaceDragEle&&(i=this.currentStateCheck(n.target,i)),this.offset=this.calculateParentPosition(i),this.position=this.getMousePosition(n,this.isDragScroll),y=this.initialPosition.x-a.pageX,p=this.initialPosition.y-a.pageY,Math.sqrt(y*y+p*p)>=this.distance||this.externalInitialize)){if(c=this.getHelperElement(n),!c||r(c))return;h=this.helperElement=c;(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart)&&(k={event:n,element:i,target:this.getProperTargetElement(n),bindEvents:u()?this.bindDragEvents.bind(this):null,dragElement:h},this.trigger("dragStart",k));this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0});t={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top};this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top);this.getScrollableValues();d=getComputedStyle(i);w=parseFloat(d.marginTop);this.clone&&0!==w&&(t.top+=w);this.enableScrollHandler&&!this.clone&&(t.top-=this.parentScrollY,t.left-=this.parentScrollX);b=this.getProcessedPositionValue({top:t.top-this.diffY+"px",left:t.left-this.diffX+"px"});this.dragElePosition={top:t.top,left:t.left};hi(h,this.getDragPosition({position:"absolute",left:b.left,top:b.top}));e.remove(document,o.touchMoveEvent,this.intDragStart);e.remove(document,o.touchEndEvent,this.intDestroy);u()||this.bindDragEvents(h)}},i.prototype.bindDragEvents=function(n){ei(n)?(e.add(document,o.touchMoveEvent,this.intDrag,this),e.add(document,o.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,n)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},i.prototype.elementInViewport=function(n){for(this.top=n.offsetTop,this.left=n.offsetLeft,this.width=n.offsetWidth,this.height=n.offsetHeight;n.offsetParent;)n=n.offsetParent,this.top+=n.offsetTop,this.left+=n.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},i.prototype.getProcessedPositionValue=function(n){return this.queryPositionInfo?this.queryPositionInfo(n):n},i.prototype.calculateParentPosition=function(n){if(r(n))return{left:0,top:0};var t=n.getBoundingClientRect(),i=getComputedStyle(n);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},i.prototype.intDrag=function(n){var s,u,p,w,nt,e,b,c,k,d,i,v,o,y,g,ut;if(f(n.changedTouches)||1===n.changedTouches.length){this.position=this.getMousePosition(n,this.isDragScroll);p=this.getDocumentWidthHeight("Height");p<this.position.top&&(this.position.top=p);w=this.getDocumentWidthHeight("Width");(w<this.position.left&&(this.position.left=w),this.drag)&&(nt=this.getProperTargetElement(n),this.trigger("drag",{event:n,element:this.element,target:nt}));e=this.checkTargetElement(n);e.target&&e.instance?(b=!0,this.hoverObject&&(this.hoverObject.instance!==e.instance?this.triggerOutFunction(n,e):b=!1),b&&(e.instance.dragData[this.scope]=this.droppables[this.scope],e.instance.intOver(n,e.target),this.hoverObject=e)):this.hoverObject&&this.triggerOutFunction(n,e);c=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var ft=this.parentClientRect.left,et=this.parentClientRect.top,tt=this.getCoordinates(n),it=tt.pageX,rt=tt.pageY,h=this.position.left-this.diffX,t=this.position.top-this.diffY,l=getComputedStyle(c),a=parseFloat(l.marginTop);this.dragArea?((this.pageX!==it||this.skipDistanceCheck)&&(k=c.offsetWidth+(parseFloat(l.marginLeft)+parseFloat(l.marginRight)),s=this.dragLimit.left>h&&h>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<h+k&&h>0?h-(h-this.dragLimit.right)+window.pageXOffset-k:h<0?this.dragLimit.left:h),(this.pageY!==rt||this.skipDistanceCheck)&&(d=c.offsetHeight+(parseFloat(l.marginTop)+parseFloat(l.marginBottom)),u=this.dragLimit.top>t&&t>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<t+d&&t>0?t-(t-this.dragLimit.bottom)+window.pageYOffset-d:t<0?this.dragLimit.top:t)):(s=h,u=t);o=et+this.borderWidth.top;y=ft+this.borderWidth.left;(this.dragProcessStarted&&(r(u)&&(u=this.prevTop),r(s)&&(s=this.prevLeft)),this.dragArea)?(this.dragLimit.top=this.clone?this.dragLimit.top:0,i=u-o<0?this.dragLimit.top:u-o,v=s-y<0?this.dragElePosition.left:s-y,a>0&&(this.clone&&(i+=this.element.offsetTop,t<0&&(this.element.offsetTop+t>=0?i=this.element.offsetTop+t:i-=this.element.offsetTop),i=this.dragLimit.bottom<i?this.dragLimit.bottom:i),u-o<0))&&(t+a+(c.offsetHeight-o)>=0?(g=this.dragLimit.top+t-o,g+a+o<0?i-=a+o:i=g):i-=a+o):(i=u-o,v=s-y);this.enableScrollHandler&&!this.clone&&(i-=this.parentScrollY,v-=this.parentScrollX);ut=this.getProcessedPositionValue({top:i+"px",left:v+"px"});hi(c,this.getDragPosition(ut));!this.elementInViewport(c)&&this.enableAutoScroll&&this.helperElement.scrollIntoView();this.dragProcessStarted=!0;this.prevLeft=s;this.prevTop=u;this.position.left=s;this.position.top=u;this.pageX=it;this.pageY=rt}},i.prototype.triggerOutFunction=function(n,t){this.hoverObject.instance.intOut(n,t.target);this.hoverObject.instance.dragData[this.scope]=null;this.hoverObject=null},i.prototype.getDragPosition=function(n){var t=s({},n);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},i.prototype.getDocumentWidthHeight=function(n){var i=document.body,t=document.documentElement;return Math.max(i["scroll"+n],t["scroll"+n],i["offset"+n],t["offset"+n],t["client"+n])},i.prototype.intDragStop=function(n){var i,t;(this.dragProcessStarted=!1,f(n.changedTouches)||1===n.changedTouches.length)&&(-1!==["touchend","pointerup","mouseup"].indexOf(n.type)?(this.dragStop&&(i=this.getProperTargetElement(n),this.trigger("dragStop",{event:n,element:this.element,target:i,helper:this.helperElement})),this.intDestroy(n)):this.element.setAttribute("aria-grabbed","false"),t=this.checkTargetElement(n),t.target&&t.instance&&(t.instance.dragStopCalled=!0,t.instance.dragData[this.scope]=this.droppables[this.scope],t.instance.intDrop(n,t.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select"))},i.prototype.intDestroy=function(){this.dragProcessStarted=!1;this.toggleEvents();document.body.classList.remove("e-prevent-select");this.element.setAttribute("aria-grabbed","false");e.remove(document,o.touchMoveEvent,this.intDragStart);e.remove(document,o.touchEndEvent,this.intDragStop);e.remove(document,o.touchEndEvent,this.intDestroy);e.remove(document,o.touchMoveEvent,this.intDrag);this.isDragStarted()&&this.isDragStarted(!0)},i.prototype.onPropertyChanged=function(){},i.prototype.getModuleName=function(){return"draggable"},i.prototype.isDragStarted=function(n){return n&&(gi.isDragged=!gi.isDragged),gi.isDragged},i.prototype.setDragArea=function(){var e,o,t,s=0,r=0,i;if(t="string"===n(this.dragArea)?kt(this.dragArea):this.dragArea){i=t.getBoundingClientRect();e=t.scrollWidth?t.scrollWidth:i.right-i.left;o=t.scrollHeight?t.scrollHeight:i.bottom-i.top;for(var h=["Top","Left","Bottom","Right"],c=getComputedStyle(t),u=0;u<h.length;u++){var f=h[u],l=c["border"+f+"Width"],a=c["padding"+f],v=f.toLowerCase();this.borderWidth[v]=isNaN(parseFloat(l))?0:parseFloat(l);this.padding[v]=isNaN(parseFloat(a))?0:parseFloat(a)}s=i.top;r=i.left;this.dragLimit.left=r+this.borderWidth.left+this.padding.left;this.dragLimit.top=t.offsetTop+this.borderWidth.top+this.padding.top;this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right);this.dragLimit.bottom=s+o-(this.borderWidth.bottom+this.padding.bottom)}},i.prototype.getProperTargetElement=function(n){var t,i=this.getCoordinates(n),r=this.helperElement.style.pointerEvents||"";return bt(n.target,this.helperElement)||-1!==n.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=r):t=n.target,t},i.prototype.currentStateCheck=function(n,t){return r(this.currentStateTarget)||this.currentStateTarget===n?r(t)?n:t:this.currentStateTarget},i.prototype.getMousePosition=function(n,t){var u,f,e=void 0!==n.srcElement?n.srcElement:n.target,i=this.getCoordinates(n),o=r(e.offsetParent);return t?(u=this.clone?i.pageX:i.pageX+(o?0:e.offsetParent.scrollLeft)-this.relativeXPosition,f=this.clone?i.pageY:i.pageY+(o?0:e.offsetParent.scrollTop)-this.relativeYPosition):(u=this.clone?i.pageX:i.pageX+window.pageXOffset-this.relativeXPosition,f=this.clone?i.pageY:i.pageY+window.pageYOffset-this.relativeYPosition),this.clone||!this.dragArea||t||(this.getScrollableValues(),f-=this.tempScrollHeight?this.parentScrollY:0,u-=this.tempScrollWidth?this.parentScrollX:0),{left:u-(this.margin.left+this.cursorAt.left),top:f-(this.margin.top+this.cursorAt.top)}},i.prototype.getCoordinates=function(n){return n.type.indexOf("touch")>-1?n.changedTouches[0]:n},i.prototype.getHelperElement=function(n){var t;return this.clone?this.helper?t=this.helper({sender:n,element:this.target}):(t=g("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},i.prototype.setGlobalDroppables=function(n,t,i){this.droppables[this.scope]=n?null:{draggable:t,helper:i,draggedElement:this.element}},i.prototype.checkTargetElement=function(n){var t=this.getProperTargetElement(n),i=this.getDropInstance(t),u;return i||!t||r(t.parentNode)||(u=tt(t.parentNode,".e-droppable")||t.parentElement,u&&(i=this.getDropInstance(u))),{target:t,instance:i}},i.prototype.getDropInstance=function(n){var u,f=n&&n.ej2_instances,t,i,r;if(f)for(t=0,i=f;t<i.length;t++)if(r=i[t],"droppable"===r.getModuleName()){u=r;break}return u},i.prototype.destroy=function(){this.toggleEvents(!0);t.prototype.destroy.call(this)},c([li({},lu)],i.prototype,"cursorAt",void 0),c([h(!0)],i.prototype,"clone",void 0),c([h()],i.prototype,"dragArea",void 0),c([h()],i.prototype,"isDragScroll",void 0),c([h()],i.prototype,"isReplaceDragEle",void 0),c([h(!0)],i.prototype,"isPreventSelect",void 0),c([a()],i.prototype,"drag",void 0),c([a()],i.prototype,"dragStart",void 0),c([a()],i.prototype,"dragStop",void 0),c([h(1)],i.prototype,"distance",void 0),c([h()],i.prototype,"handle",void 0),c([h()],i.prototype,"abort",void 0),c([h()],i.prototype,"helper",void 0),c([h("default")],i.prototype,"scope",void 0),c([h("")],i.prototype,"dragTarget",void 0),c([h()],i.prototype,"axis",void 0),c([h()],i.prototype,"queryPositionInfo",void 0),c([h(!1)],i.prototype,"enableTailMode",void 0),c([h(!1)],i.prototype,"skipDistanceCheck",void 0),c([h(!0)],i.prototype,"preventDefault",void 0),c([h(!1)],i.prototype,"enableAutoScroll",void 0),c([h(!1)],i.prototype,"enableTapHold",void 0),c([h(750)],i.prototype,"tapHoldThreshold",void 0),c([h(!1)],i.prototype,"enableScrollHandler",void 0),i=l=c([it],i)}(w),ke=(bi=function(n,t){return(bi=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}bi(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),st=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},de=function(n){function t(t,i){var r=n.call(this,i,t)||this;return r.mouseOver=!1,r.dragData={},r.dragStopCalled=!1,r.bind(),r}return ke(t,n),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){e.add(this.element,o.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(n,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:n,target:t,dragData:i});this.mouseOver=!0}},t.prototype.intOut=function(n,t){this.mouseOver&&(this.trigger("out",{evt:n,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(n,t){if(this.dragStopCalled){this.dragStopCalled=!1;var r,u=!0,i=this.dragData[this.scope],f=!!i&&i.helper&&ei(i.helper);f&&(r=this.isDropArea(n,i.helper,t),this.accept&&(u=ci(i.helper,this.accept)));f&&this.drop&&r.canDrop&&u&&this.trigger("drop",{event:n,target:r.target,droppedElement:i.helper,dragData:i});this.mouseOver=!1}},t.prototype.isDropArea=function(n,t,i){var r={canDrop:!0,target:i||n.target},e="touchend"===n.type,u,f;return(e||r.target===t)&&(t.style.display="none",u=e?n.changedTouches[0]:n,f=document.elementFromPoint(u.clientX,u.clientY),r.canDrop=!1,r.canDrop=bt(f,this.element),r.canDrop&&(r.target=f),t.style.display=""),r},t.prototype.destroy=function(){e.remove(this.element,o.touchEndEvent,this.intDrop);n.prototype.destroy.call(this)},st([h()],t.prototype,"accept",void 0),st([h("default")],t.prototype,"scope",void 0),st([a()],t.prototype,"drop",void 0),st([a()],t.prototype,"over",void 0),st([a()],t.prototype,"out",void 0),t=st([it],t)}(w),ge=(ki=function(n,t){return(ki=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ki(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ti=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},no={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,"delete":46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},to=function(n){function t(t,r){var u=n.call(this,r,t)||this;return u.keyPressHandler=function(n){for(var h,t,c=n.altKey,l=n.ctrlKey,a=n.shiftKey,v=n.which,r=0,e=Object.keys(u.keyConfigs);r<e.length;r++)for(var o=e[r],f=0,s=u.keyConfigs[o].split(",");f<s.length;f++)h=s[f],t=i.getKeyConfigData(h.trim()),c===t.altKey&&l===t.ctrlKey&&a===t.shiftKey&&v===t.keyCode&&(n.action=o,u.keyAction&&u.keyAction(n))},u.bind(),u}var i;return ge(t,n),i=t,t.prototype.destroy=function(){this.unwireEvents();n.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(n){if(n in this.configCache)return this.configCache[n];var t=n.toLowerCase().split("+"),r={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return r.keyCode=t[t.length-1].length>1&&Number(t[t.length-1])?Number(t[t.length-1]):i.getKeyCode(t[t.length-1]),i.configCache[n]=r,r},t.getKeyCode=function(n){return no[n]||n.toUpperCase().charCodeAt(0)},t.configCache={},ti([h({})],t.prototype,"keyConfigs",void 0),ti([h("keyup")],t.prototype,"eventName",void 0),ti([a()],t.prototype,"keyAction",void 0),t=i=ti([it],t)}(w),io=function(){function n(n,i,r){this.controlName=n;this.localeStrings=i;this.setLocale(r||t.defaultCulture)}return n.prototype.setLocale=function(t){var i=this.intGetControlConstant(n.locale,t);this.currentLocale=i||this.localeStrings},n.load=function(n){this.locale=s(this.locale,n,{},!0)},n.prototype.getConstant=function(n){return r(this.currentLocale[n])?this.localeStrings[n]||"":this.currentLocale[n]},n.prototype.intGetControlConstant=function(n,t){return n[t]?n[t][this.controlName]:null},n.locale={},n}(),au=(di=function(n,t){return(di=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}di(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),k=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},vu=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return au(t,n),k([h(50)],t.prototype,"swipeThresholdDistance",void 0),t}(gt),ro=/(Up|Down)/,uo=function(n){function t(t,i){var r=n.call(this,i,t)||this;return r.touchAction=!0,r.tapCount=0,r.startEvent=function(n){if(!0===r.touchAction){var t=r.updateChangeTouches(n);void 0!==n.changedTouches&&(r.touchAction=!1);r.isTouchMoved=!1;r.movedDirection="";r.startPoint=r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY};r.startEventData=t;r.hScrollLocked=r.vScrollLocked=!1;r.tStampStart=Date.now();r.timeOutTapHold=setTimeout(function(){r.tapHoldEvent(n)},r.tapHoldThreshold);e.add(r.element,o.touchMoveEvent,r.moveEvent,r);e.add(r.element,o.touchEndEvent,r.endEvent,r);e.add(r.element,o.touchCancelEvent,r.cancelEvent,r)}},r.moveEvent=function(n){var t=r.updateChangeTouches(n),i;r.movedPoint=t;r.isTouchMoved=!(t.clientX===r.startPoint.clientX&&t.clientY===r.startPoint.clientY);i={};r.isTouchMoved&&(clearTimeout(r.timeOutTapHold),r.calcScrollPoints(n),i=s(i,{},{startEvents:r.startEventData,originalEvent:n,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,scrollDirection:r.scrollDirection,velocity:r.getVelocity(t)}),r.trigger("scroll",i),r.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},r.cancelEvent=function(n){clearTimeout(r.timeOutTapHold);clearTimeout(r.timeOutTap);r.tapCount=0;r.swipeFn(n);e.remove(r.element,o.touchCancelEvent,r.cancelEvent)},r.endEvent=function(n){r.swipeFn(n);r.isTouchMoved||"function"==typeof r.tap&&(r.trigger("tap",{originalEvent:n,tapCount:++r.tapCount}),r.timeOutTap=setTimeout(function(){r.tapCount=0},r.tapThreshold));r.modeclear()},r.swipeFn=function(n){var h,f,e;clearTimeout(r.timeOutTapHold);clearTimeout(r.timeOutTap);var i=r.updateChangeTouches(n),t=i.clientX-r.startPoint.clientX,u=i.clientY-r.startPoint.clientY;if(t=Math.floor(t<0?-1*t:t),u=Math.floor(u<0?-1*u:t),r.isTouchMoved=t>1||u>1,r.endPoint=i,r.calcPoints(n),h={originalEvent:n,startEvents:r.startEventData,startX:r.startPoint.clientX,startY:r.startPoint.clientY,distanceX:r.distanceX,distanceY:r.distanceY,swipeDirection:r.movedDirection,velocity:r.getVelocity(i)},r.isTouchMoved){f=void 0;e=r.swipeSettings.swipeThresholdDistance;f=s(f,r.defaultArgs,h);var c=!1,l=r.element,a=r.isScrollable(l),o=ro.test(r.movedDirection);(e<r.distanceX&&!o||e<r.distanceY&&o)&&(c=!a||r.checkSwipe(l,o));c&&r.trigger("swipe",f)}r.modeclear()},r.modeclear=function(){r.modeClear=setTimeout(function(){r.touchAction=!0},"function"!=typeof r.tap?0:20);r.lastTapTime=(new Date).getTime();e.remove(r.element,o.touchMoveEvent,r.moveEvent);e.remove(r.element,o.touchEndEvent,r.endEvent);e.remove(r.element,o.touchCancelEvent,r.cancelEvent)},r.bind(),r}return au(t,n),t.prototype.onPropertyChanged=function(){},t.prototype.bind=function(){this.wireEvents();o.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents();n.prototype.destroy.call(this)},t.prototype.wireEvents=function(){e.add(this.element,o.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){e.remove(this.element,o.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(n){var t=getComputedStyle(n),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(n){var t;this.tapCount=0;this.touchAction=!0;e.remove(this.element,o.touchMoveEvent,this.moveEvent);e.remove(this.element,o.touchEndEvent,this.endEvent);t={originalEvent:n};this.trigger("tapHold",t);e.remove(this.element,o.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(n){var t=this.updateChangeTouches(n);this.defaultArgs={originalEvent:n};this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX));this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY));this.movedDirection=this.distanceX>this.distanceY?t.clientX>this.startPoint.clientX?"Right":"Left":t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(n){var t=this.updateChangeTouches(n);this.defaultArgs={originalEvent:n};this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX));this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY));(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(n){var r=n.clientX,u=n.clientY,f=Date.now(),t=r-this.startPoint.clientX,i=u-this.startPoint.clientX,e=f-this.tStampStart;return Math.sqrt(t*t+i*i)/e},t.prototype.checkSwipe=function(n,t){var i=["scroll","offset"],r=t?["Height","Top"]:["Width","Left"];return n[i[0]+r[0]]<=n[i[1]+r[0]]||0===n[i[0]+r[1]]||n[i[1]+r[0]]+n[i[0]+r[1]]>=n[i[0]+r[0]]},t.prototype.updateChangeTouches=function(n){return n.changedTouches&&0!==n.changedTouches.length?n.changedTouches[0]:n},k([a()],t.prototype,"tap",void 0),k([a()],t.prototype,"tapHold",void 0),k([a()],t.prototype,"swipe",void 0),k([a()],t.prototype,"scroll",void 0),k([h(350)],t.prototype,"tapThreshold",void 0),k([h(750)],t.prototype,"tapHoldThreshold",void 0),k([li({},vu)],t.prototype,"swipeSettings",void 0),t=k([it],t)}(w),fo=new RegExp("\\n|\\r|\\s\\s+","g"),eo=new RegExp(/'|"/g),oo=new RegExp("if ?\\("),so=new RegExp("else if ?\\("),yu=new RegExp("else"),ho=new RegExp("for ?\\("),pu=new RegExp("(/if|/for)"),co=new RegExp("\\((.*)\\)",""),nr=new RegExp("^[0-9]+$","g"),lo=new RegExp("[\\w\"'.\\s+]+","g"),ao=new RegExp('"(.*?)"',"g"),vo=new RegExp("[\\w\"'@#$.\\s-+]+","g"),yo=new RegExp("\\${([^}]*)}","g"),po=/^\..*/gm,tr=/\\/gi,wo=/\\\\/gi,bo=new RegExp("[\\w\"'@#$.\\s+]+","g"),ko=/\window\./gm;var ns=/^[\n\r.]+<tr|^<tr/,ts=/^[\n\r.]+<svg|^<path|^<g/,d={};var rr={compile:(new(function(){function n(){}return n.prototype.compile=function(n,t){return void 0===t&&(t={}),go(n,t)},n}())).compile},is=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],rs=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],du=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],us=function(){function n(){}return n.beforeSanitize=function(){return{selectors:{tags:is,attributes:rs}}},n.sanitize=function(n){var t=this.beforeSanitize();return this.serializeValue(t,n)},n.serializeValue=function(n,t){this.removeAttrs=n.selectors.attributes;this.removeTags=n.selectors.tags;this.wrapElement=document.createElement("div");this.wrapElement.innerHTML=t;this.removeXssTags();this.removeJsEvents();this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i},n.removeElement=function(){for(var r,t,i=this.wrapElement.children,n=0;n<i.length;n++)for(r=i[n].attributes,t=0;t<r.length;t++)this.wrapElement.children[n].removeAttribute(r[t].localName)},n.removeXssTags=function(){var n=this.wrapElement.querySelectorAll(this.removeTags.join(","));n.length>0&&n.forEach(function(n){oi(n)})},n.removeJsEvents=function(){var n=this.wrapElement.querySelectorAll("["+du.join("],[")+"]");n.length>0&&n.forEach(function(n){du.forEach(function(t){n.hasAttribute(t)&&n.removeAttribute(t)})})},n.removeXssAttrs=function(){var n=this;this.removeAttrs.forEach(function(t){var i=n.wrapElement.querySelectorAll(t.selector);i.length>0&&i.forEach(function(n){n.removeAttribute(t.attribute)})})},n}();return t.blazorCultureFormats=fi,t.Ajax=yf,t.Animation=ye,t.rippleEffect=function(n,i,r){var u=function(n){return{selector:n&&n.selector?n.selector:null,ignore:n&&n.ignore?n.ignore:null,rippleFlag:n&&n.rippleFlag,isCenterRipple:n&&n.isCenterRipple,duration:n&&n.duration?n.duration:350}}(i);return!1===u.rippleFlag||void 0===u.rippleFlag&&!t.isRippleEnabled?Function:(n.setAttribute("data-ripple","true"),e.add(n,"mousedown",uu,{parent:n,rippleOptions:u}),e.add(n,"mouseup",fu,{parent:n,rippleOptions:u,done:r}),e.add(n,"mouseleave",ot,{parent:n,rippleOptions:u}),o.isPointer&&e.add(n,"transitionend",ot,{parent:n,rippleOptions:u}),function(){n.removeAttribute("data-ripple");e.remove(n,"mousedown",uu);e.remove(n,"mouseup",fu);e.remove(n,"mouseleave",ot);e.remove(n,"transitionend",ot)})},t.enableRipple=function(n){return t.isRippleEnabled=n,t.isRippleEnabled},t.Base=w,t.getComponent=tu,t.removeChildInstance=function(n){for(var u,r,i=[].slice.call(n.getElementsByClassName("e-control")),t=0;t<i.length;t++)u=i[t].classList[1].split("e-")[1],r=tu(i[t],u),f(r)||r.destroy()},t.Browser=o,t.enableVersionBasedPersistence=function(n){t.versionBasedStatePersistence=n},t.Component=hu,t.ChildProperty=gt,t.Position=lu,t.Draggable=be,t.Droppable=de,t.EventHandler=e,t.onIntlChange=ft,t.cldrData=v,t.Internationalization=vf,t.setCulture=function(n){t.defaultCulture=n;ft.notify("notifyExternalChange",{locale:t.defaultCulture})},t.setCurrencyCode=function(n){t.defaultCurrencyCode=n;ft.notify("notifyExternalChange",{currencyCode:t.defaultCurrencyCode})},t.loadCldr=function(){for(var t,r,u,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(t=0,r=i;t<r.length;t++)u=r[t],s(v,u,{},!0)},t.enableRtl=function(n){void 0===n&&(n=!0);t.rightToLeft=n;ft.notify("notifyExternalChange",{enableRtl:t.rightToLeft})},t.getNumericObject=function(n,r){var f=t.IntlBase.getDependables(v,n,"",!0)[ui[0]],o=t.IntlBase.getDependables(v,n,"")[ui[1]],e=i("defaultNumberingSystem",f),h=u()?i("numberSymbols",f):i("symbols-numberSystem-"+e,f),c=t.IntlBase.getSymbolPattern(r||"decimal",e,f,!1);return s(h,t.IntlBase.getFormatData(c,!0,"",!0),{dateSeparator:t.IntlBase.getDateSeparator(o)})},t.getNumberDependable=function(n,i){var r=t.IntlBase.getDependables(v,n,"",!0);return t.IntlBase.getCurrencySymbol(r.numericObject,i)},t.getDefaultDateObject=function(n){return t.IntlBase.getDependables(v,"",n,!1)[ui[1]]},t.KeyboardEvents=to,t.L10n=io,t.ModuleLoader=ou,t.Property=h,t.Complex=li,t.ComplexFactory=function(n){return function(t,i){var r={set:oe({},i,n),get:ee({},i,n),enumerable:!0,configurable:!0};Object.defineProperty(t,i,r);et(t,i,"complexProp",{},n)}},t.Collection=function(n,t){return function(i,r){var u={set:he(n,r,t),get:se(n,r,t),enumerable:!0,configurable:!0};Object.defineProperty(i,r,u);et(i,r,"colProp",n,t)}},t.CollectionFactory=function(n){return function(t,i){var r={set:ce([],i,n),get:le([],i,n),enumerable:!0,configurable:!0};Object.defineProperty(t,i,r);et(t,i,"colProp",{},n)}},t.Event=a,t.NotifyPropertyChanges=it,t.CreateBuilder=function(n){var t=function(n){return this.element=n,this};return function(i){return t.prototype.hasOwnProperty("create")||((t.prototype=function n(t){if(f(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0;this.propCollections.push(s({},this.properties,{}))}};for(var h=/complex/,i=0,u=Object.keys(t.prototype.propList);i<u.length;i++)for(var e=u[i],c=function(i){t.prototype.builderObject[i.propertyName]=h.test(e)?function(t){var u,r={};return nt(r,n(i.type)),t(r),u=r.isPropertyArray?r.propCollections:s({},r.properties,{}),this.properties[i.propertyName]=u,r.properties={},r.propCollections=[],r.isPropertyArray=!1,this}:function(n){return this.properties[i.propertyName]=n,this}},r=0,o=t.prototype.propList[e];r<o.length;r++)c(o[r])}return t.prototype.builderObject}(n)).create=function(){var t=s({},{},this.properties);return this.properties={},new n(t,this.element)}),new t(i)}},t.SwipeSettings=vu,t.Touch=uo,t.blazorTemplates=d,t.getRandomId=ku,t.compile=function(n,t,i){var f=rr.compile(n,t,i);return function(n,t,i,e,o,s,h){var l=f(n,t,i,h),a,v,y,c;if(u()&&!o){if(a=e+ku(),d[e]||(d[e]=[]),r(s))n.BlazorTemplateId=a,d[e].push(n);else for(v=0,y=Object.keys(d[e][s]);v<y.length;v++)c=y[v],"BlazorTemplateId"!==c&&n[c]&&(d[e][s][c]=n[c]),"BlazorTemplateId"===c&&(a=d[e][s][c]);return"rowTemplate"===i?[g("tr",{id:a,className:"e-blazor-template"})]:[g("div",{id:a,className:"e-blazor-template"})]}return"string"==typeof l?ts.test(l)?g("svg",{innerHTML:l}).childNodes:g(ns.test(l)?"table":"div",{innerHTML:l}).childNodes:l}},t.updateBlazorTemplate=function(n,t,i,r,f){u()&&(window.sfBlazor.updateTemplate(t,d[n],n,i,f),!1!==r&&(d[n]=[]))},t.resetBlazorTemplate=function(n,t,i){var h=document.getElementById(n),u,f,o,e,c,s;if(h)for(u=h.getElementsByClassName("blazor-inner-template"),f=0;f<u.length;f++)if(o=" ",o=r(i)?u[f].getAttribute("data-templateId"):u[i].getAttribute("data-templateId"),e=document.getElementById(o),e)for(c=e.childNodes.length,s=0;s<c;s++)r(i)?u[f].appendChild(e.childNodes[0]):(u[i].appendChild(e.childNodes[0]),f=u.length)},t.setTemplateEngine=function(n){rr.compile=n.compile},t.getTemplateEngine=function(){return rr.compile},t.disableBlazorMode=function(){ii=!1},t.createInstance=lt,t.setImmediate=ur,t.getValue=i,t.setValue=y,t.deleteObject=fr,t.isObject=p,t.getEnumValue=function(n,t){return n[t]},t.merge=nt,t.extend=s,t.isNullOrUndefined=r,t.isUndefined=f,t.getUniqueID=function(n){return n+"_"+gu++},t.debounce=er,t.queryParams=function(n){for(var i,r=[],t=0,u=Object.keys(n);t<u.length;t++)i=u[t],r.push(encodeURIComponent(i)+"="+encodeURIComponent(""+n[i]));return r.join("&")},t.isObjectArray=function(n){var t=Object.prototype.toString;return"[object Array]"===t.call(n)&&"[object Object]"===t.call(n[0])},t.compareElementParent=bt,t.throwError=rt,t.print=function(n,t){var u=document.createElement("div"),f=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),e="",i,o,s;for(r(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),u.appendChild(n.cloneNode(!0)),i=0,o=f.length;i<o;i++)e+=f[i].outerHTML;return t.document.write("<!DOCTYPE html> <html><head>"+e+"<\/head><body>"+u.innerHTML+"<script> (function() { window.ready = true; })(); <\/script><\/body><\/html>"),t.document.close(),t.focus(),s=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(s))},500),t},t.formatUnit=function(n){var t=n+"";return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")?t:t+"px"},t.enableBlazorMode=function(){ii=!0},t.isBlazor=u,t.getElement=function(n){return _instanceof(n,Node)||!u()||r(n.xPath)?n:document.evaluate(n.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},t.getInstance=function(n,t){var f="string"==typeof n?document.querySelector(n):n,i,r,u;if(f[ct])for(i=0,r=f[ct];i<r.length;i++)if(u=r[i],_instanceof(u,t))return u;return null},t.addInstance=function(n,t){var i="string"==typeof n?document.querySelector(n):n;i[ct]?i[ct].push(t):i[ct]=[t]},t.uniqueID=or,t.createElement=g,t.addClass=yt,t.removeClass=pt,t.isVisible=ei,t.prepend=function(n,t,i){for(var e,u=document.createDocumentFragment(),r=0,f=n;r<f.length;r++)e=f[r],u.appendChild(e);return t.insertBefore(u,t.firstElementChild),i&&kr(t),n},t.append=function(n,t,i){for(var e,u=document.createDocumentFragment(),r=0,f=n;r<f.length;r++)e=f[r],u.appendChild(e);return t.appendChild(u),i&&kr(t),n},t.detach=oi,t.remove=function(n){var t=n.parentNode;e.clearEvents(n);t.removeChild(n)},t.attributes=dr,t.select=kt,t.selectAll=si,t.closest=tt,t.siblings=function(n){for(var t,r=[],i=0,u=Array.prototype.slice.call(n.parentNode.childNodes);i<u.length;i++)t=u[i],t.nodeType===Node.ELEMENT_NODE&&n!==t&&r.push(t);return r},t.getAttributeOrDefault=function(n,t,u){var f,e=p(n);return r(f=e?i("attributes."+t,n):n.getAttribute(t))&&u&&(e?n.attributes[t]=u:n.setAttribute(t,u.toString()),f=u),f},t.setStyleAttribute=hi,t.classList=function(n,t,i){yt([n],t);pt([n],i)},t.matches=ci,t.includeInnerHTML=function(n,t){n.innerHTML=t},t.containsClass=function(n,t){return p(n)?new RegExp("\\b"+t+"\\b","i").test(n.attributes.className):n.classList.contains(t)},t.cloneNode=function(n,t){return p(n)?t?s({},{},n,!0):void 0:n.cloneNode(t)},t.Observer=vt,t.SanitizeHtmlHelper=us,t}({})},"./modules/navigationsbase.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};window.sf.navigations=window.sf.base.extend({},window.sf.navigations,function(t){"use strict";function s(n,t,i,r,u,e){var s=n("div",{className:"e-menu-"+r});return t.appendChild(s),s.appendChild(i),e?(s.style.overflow="hidden",s.style.height=e+"px"):(s.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===r?new o({enableRtl:u},s).scrollStep=sf.base.select(".e-"+r+"-bar",t).offsetHeight/2:new f({enableRtl:u},s).scrollStep=sf.base.select(".e-"+r+"-bar",t).offsetWidth,s}var i,r,h=(i=function(n,t){return(i=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function r(){this.constructor=n}i(n,t);n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},f=function(n){function t(t,i){return n.call(this,t,i)||this}return h(t,n),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name;this.browserCheck="mozilla"===this.browser;this.isDevice=sf.base.Browser.isDevice;this.customStep=!0;var n=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser;this.initialize();""===n.id&&(n.id=sf.base.getUniqueID("hscroll"),this.uniqueId=!0);n.style.display="block";this.enableRtl&&n.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)});sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollHandler,this);this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element);this.setScrollState()},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var t=this.createElement("div",{className:"e-hscroll-content"}),n=this.createElement("div",{className:"e-hscroll-bar"}),f;n.setAttribute("tabindex","-1");for(var r=this.element,i=0,u=[].slice.call(r.children);i<u.length;i++)f=u[i],t.appendChild(f);n.appendChild(t);r.appendChild(n);n.style.overflowX="hidden";this.scrollEle=n;this.scrollItems=t},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element,i,f,r,u,e;for(t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device"),i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),f=sf.base.selectAll(".e-scroll-overlay",t),[].slice.call(f).forEach(function(n){sf.base.detach(n)}),r=0,u=[].slice.call(this.scrollItems.children);r<u.length;r++)e=u[r],t.appendChild(e);this.uniqueId&&this.element.removeAttribute("id");sf.base.detach(this.scrollEle);i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1]));sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollHandler);this.touchModule.destroy();this.touchModule=null;n.prototype.destroy.call(this)},t.prototype.disable=function(n){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);n?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay");[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",n?"-1":"0")})},t.prototype.createOverlay=function(n){var r=n.id.concat("_nav"),u=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),f="e-"+n.id.concat("_nav e-scroll-nav e-scroll-right-nav"),t=this.createElement("div",{id:r.concat("_right"),className:f}),e=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),i;t.appendChild(e);i=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&t.classList.add("e-ie-align");n.appendChild(u);n.appendChild(t);n.insertBefore(i,n.firstChild);this.eventBinding([t])},t.prototype.createNavIcon=function(n){var r=n.id.concat("_nav"),f="e-"+n.id.concat("_nav e-scroll-nav e-scroll-right-nav"),t=this.createElement("div",{id:r.concat("_right"),className:f}),u;t.setAttribute("aria-disabled","false");var e=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+n.id.concat("_nav e-scroll-nav e-scroll-left-nav"),i=this.createElement("div",{id:r.concat("_left"),className:o+" e-overlay"});i.setAttribute("aria-disabled","true");u=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});i.appendChild(u);t.appendChild(e);n.appendChild(t);n.insertBefore(i,n.firstChild);this.ieCheck&&(t.classList.add("e-ie-align"),i.classList.add("e-ie-align"));this.eventBinding([t,i])},t.prototype.onKeyPress=function(n){var t=this;"Enter"===n.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0;t.eleScrolling(10,n.target,!0)},100))},t.prototype.onKeyUp=function(n){"Enter"===n.key&&(this.keyTimeout?this.keyTimeout=!1:n.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(n){var t=this;[].slice.call(n).forEach(function(n){new sf.base.Touch(n,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500});n.addEventListener("keydown",t.onKeyPress.bind(t));n.addEventListener("keyup",t.onKeyUp.bind(t));n.addEventListener("mouseup",t.repeatScroll.bind(t));n.addEventListener("touchend",t.repeatScroll.bind(t));n.addEventListener("contextmenu",function(n){n.preventDefault()});sf.base.EventHandler.add(n,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(n){var i=this,t=n.originalEvent.target;t=this.contains(t,"e-scroll-nav")?t.firstElementChild:t;this.timeout=window.setInterval(function(){i.eleScrolling(10,t,!0)},50)},t.prototype.contains=function(n,t){return n.classList.contains(t)},t.prototype.eleScrolling=function(n,t,i){var u=this.element,r=t.classList;r.contains("e-scroll-nav")&&(r=t.querySelector(".e-nav-arrow").classList);this.contains(u,"e-rtl")&&this.browserCheck&&(n=-n);!this.contains(u,"e-rtl")||this.browserCheck||this.ieCheck?r.contains("e-nav-right-arrow")?this.frameScrollRequest(n,"add",i):this.frameScrollRequest(n,"",i):r.contains("e-nav-left-arrow")?this.frameScrollRequest(n,"add",i):this.frameScrollRequest(n,"",i)},t.prototype.clickEventHandler=function(n){this.eleScrolling(this.scrollStep,n.target,!1)},t.prototype.swipeHandler=function(n){var t,r=this.scrollEle,i;t=n.velocity<=1?n.distanceX/(10*n.velocity):n.distanceX/n.velocity;i=.5;!function u(){var f=Math.sin(i);f<=0?window.cancelAnimationFrame(f):("Left"===n.swipeDirection?r.scrollLeft+=t*f:"Right"===n.swipeDirection&&(r.scrollLeft-=t*f),i-=.5,window.requestAnimationFrame(u))}()},t.prototype.scrollUpdating=function(n,t){"add"===t?this.scrollEle.scrollLeft+=n:this.scrollEle.scrollLeft-=n},t.prototype.frameScrollRequest=function(n,t,i){var r=this;i?this.scrollUpdating(n,t):(this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach(function(t){n-=t.offsetWidth}),!function i(){var f,u;r.contains(r.element,"e-rtl")&&r.browserCheck?(f=-n,u=-10):(f=n,u=10);f<10?window.cancelAnimationFrame(u):(r.scrollUpdating(u,t),n-=u,window.requestAnimationFrame(i))}())},t.prototype.touchHandler=function(n){var t=this.scrollEle,i=n.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i);"Left"===n.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===n.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(n,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(n)?t:n).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(n)?sf.base.classList(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):sf.base.classList(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else n.classList.add("e-overlay"),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(n){var i=n.target,u=i.offsetWidth,f=(this.element,this.element.querySelector(".e-scroll-left-nav")),e=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),s=this.element.querySelector(".e-scroll-right-overlay"),t=i.scrollLeft,r;(t<=0&&(t=-t),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),s=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=t<40?t+"px":"40px",s.style.width=i.scrollWidth-Math.ceil(u+t)<40?i.scrollWidth-Math.ceil(u+t)+"px":"40px"),0===t)?this.arrowDisabling(f,e):Math.ceil(u+t+.1)>=i.scrollWidth?this.arrowDisabling(e,f):(r=this.element.querySelector(".e-scroll-nav.e-overlay"),r&&(r.classList.remove("e-overlay"),r.setAttribute("aria-disabled","false"),r.setAttribute("tabindex","0")))},t.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n);t<i.length;t++)switch(i[t]){case"scrollStep":this.setScrollState();break;case"enableRtl":n.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},u([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=u([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),c=(r=function(n,t){return(r=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}r(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),e=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},o=function(n){function t(t,i){return n.call(this,t,i)||this}return c(t,n),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name;this.browserCheck="mozilla"===this.browser;this.isDevice=sf.base.Browser.isDevice;this.customStep=!0;var n=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser;this.initialize();""===n.id&&(n.id=sf.base.getUniqueID("vscroll"),this.uniqueId=!0);n.style.display="block";this.enableRtl&&n.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)});sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollEventHandler,this);this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element);this.setScrollState();sf.base.EventHandler.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var t=sf.base.createElement("div",{className:"e-vscroll-content"}),n=sf.base.createElement("div",{className:"e-vscroll-bar"}),f;n.setAttribute("tabindex","-1");for(var r=this.element,i=0,u=[].slice.call(r.children);i<u.length;i++)f=u[i],t.appendChild(f);n.appendChild(t);r.appendChild(n);n.style.overflowY="hidden";this.scrollEle=n;this.scrollItems=t},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element,i,f,r,u,e;for(t.style.display="",sf.base.removeClass([this.element],["e-vscroll","e-scroll-device"]),i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),f=sf.base.selectAll(".e-scroll-overlay",t),[].slice.call(f).forEach(function(n){sf.base.detach(n)}),r=0,u=[].slice.call(this.scrollItems.children);r<u.length;r++)e=u[r],t.appendChild(e);this.uniqueId&&this.element.removeAttribute("id");sf.base.detach(this.scrollEle);i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1]));sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollEventHandler);this.touchModule.destroy();this.touchModule=null;n.prototype.destroy.call(this)},t.prototype.disable=function(n){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);n?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay");[].slice.call(t).forEach(function(t){t.setAttribute("tabindex",n?"-1":"0")})},t.prototype.createOverlayElement=function(n){var r=n.id.concat("_nav"),u=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),f="e-"+n.id.concat("_nav e-scroll-nav e-scroll-down-nav"),t=sf.base.createElement("div",{id:r.concat("down"),className:f}),e=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),i;t.appendChild(e);i=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&t.classList.add("e-ie-align");n.appendChild(u);n.appendChild(t);n.insertBefore(i,n.firstChild);this.eventBinding([t])},t.prototype.createNavIcon=function(n){var r=n.id.concat("_nav"),f="e-"+n.id.concat("_nav e-scroll-nav e-scroll-down-nav"),t=sf.base.createElement("div",{id:r.concat("_down"),className:f}),u;t.setAttribute("aria-disabled","false");var e=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+n.id.concat("_nav e-scroll-nav e-scroll-up-nav"),i=sf.base.createElement("div",{id:r.concat("_up"),className:o+" e-overlay"});i.setAttribute("aria-disabled","true");u=sf.base.createElement("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});i.appendChild(u);t.appendChild(e);t.setAttribute("tabindex","0");n.appendChild(t);n.insertBefore(i,n.firstChild);this.ieCheck&&(t.classList.add("e-ie-align"),i.classList.add("e-ie-align"));this.eventBinding([t,i])},t.prototype.onKeyPress=function(n){var t=this;"Enter"===n.key&&(this.keyTimer=window.setTimeout(function(){t.keyTimeout=!0;t.eleScrolling(10,n.target,!0)},100))},t.prototype.onKeyUp=function(n){"Enter"===n.key&&(this.keyTimeout?this.keyTimeout=!1:n.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(n){var t=this;[].slice.call(n).forEach(function(n){new sf.base.Touch(n,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500});n.addEventListener("keydown",t.onKeyPress.bind(t));n.addEventListener("keyup",t.onKeyUp.bind(t));n.addEventListener("mouseup",t.repeatScroll.bind(t));n.addEventListener("touchend",t.repeatScroll.bind(t));n.addEventListener("contextmenu",function(n){n.preventDefault()});sf.base.EventHandler.add(n,"click",t.clickEventHandler,t)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(n){var i=this,t=n.originalEvent.target;t=this.contains(t,"e-scroll-nav")?t.firstElementChild:t;this.timeout=window.setInterval(function(){i.eleScrolling(10,t,!0)},50)},t.prototype.contains=function(n,t){return n.classList.contains(t)},t.prototype.eleScrolling=function(n,t,i){var r=t.classList;r.contains("e-scroll-nav")&&(r=t.querySelector(".e-nav-arrow").classList);r.contains("e-nav-down-arrow")?this.frameScrollRequest(n,"add",i):r.contains("e-nav-up-arrow")&&this.frameScrollRequest(n,"",i)},t.prototype.clickEventHandler=function(n){this.eleScrolling(this.scrollStep,n.target,!1)},t.prototype.wheelEventHandler=function(n){n.preventDefault();this.frameScrollRequest(this.scrollStep,n.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(n){var t,r=this.scrollEle,i;t=n.velocity<=1?n.distanceY/(10*n.velocity):n.distanceY/n.velocity;i=.5;!function u(){var f=Math.sin(i);f<=0?window.cancelAnimationFrame(f):("Up"===n.swipeDirection?r.scrollTop+=t*f:"Down"===n.swipeDirection&&(r.scrollTop-=t*f),i-=.02,window.requestAnimationFrame(u))}()},t.prototype.scrollUpdating=function(n,t){"add"===t?this.scrollEle.scrollTop+=n:this.scrollEle.scrollTop-=n},t.prototype.frameScrollRequest=function(n,t,i){var r=this;i?this.scrollUpdating(n,t):(this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach(function(t){n-=t.offsetHeight}),!function i(){n<10?window.cancelAnimationFrame(10):(r.scrollUpdating(10,t),n-=10,window.requestAnimationFrame(i))}())},t.prototype.touchHandler=function(n){var t=this.scrollEle,i=n.distanceY;"Up"===n.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===n.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(n,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(n)?t:n).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(n)?sf.base.classList(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):sf.base.classList(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else n.classList.add("e-overlay"),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(n){var i=n.target,u=i.offsetHeight,f=this.element.querySelector(".e-scroll-up-nav"),e=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),s=this.element.querySelector(".e-scroll-down-overlay"),t=i.scrollTop,r;(t<=0&&(t=-t),this.isDevice&&(o.style.height=t<40?t+"px":"40px",s.style.height=i.scrollHeight-Math.ceil(u+t)<40?i.scrollHeight-Math.ceil(u+t)+"px":"40px"),0===t)?this.arrowDisabling(f,e):Math.ceil(u+t+.1)>=i.scrollHeight?this.arrowDisabling(e,f):(r=this.element.querySelector(".e-scroll-nav.e-overlay"),r&&(r.classList.remove("e-overlay"),r.setAttribute("aria-disabled","false"),r.setAttribute("tabindex","0")))},t.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n);t<i.length;t++)switch(i[t]){case"scrollStep":this.setScrollState();break;case"enableRtl":n.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}},e([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=e([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);return t.HScroll=f,t.VScroll=o,t.addScrolling=function(n,t,i,r,u,f){var e,o,c=t.parentElement,h;return("vscroll"===r?(e=f||t.getBoundingClientRect().height,o=i.getBoundingClientRect().height):(e=t.getBoundingClientRect().width,o=i.getBoundingClientRect().width),e<o)?s(n,t,i,r,u,f):c?(h=c.getBoundingClientRect().width,h<e&&"hscroll"===r?(o=h,t.style.maxWidth=h+"px",s(n,t,i,r,u,f)):i):i},t.destroyScroll=function(n,t,i){if(n){var r=sf.base.select(".e-menu-parent",t);r?i&&i!==r||(n.destroy(),t.parentElement.appendChild(r),sf.base.detach(t)):(n.destroy(),sf.base.detach(t))}},t}({}))},"./modules/popup.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(t){"use strict";function c(n,t){for(var r,f=getComputedStyle(n),u=[],i=n.parentElement;i&&"HTML"!==i.tagName;)r=getComputedStyle(i),("absolute"!==f.position||"static"!==r.position)&&/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&u.push(i),i=i.parentElement;return t||u.push(document),u}function l(n){for(var i,u,e,t,s,f,c,h,r=n.parentElement,o=[];r&&"BODY"!==r.tagName;)i=document.defaultView.getComputedStyle(r,null).getPropertyValue("z-index"),u=document.defaultView.getComputedStyle(r,null).getPropertyValue("position"),"auto"!==i&&"static"!==u&&o.push(i),r=r.parentElement;for(e=[],t=0;t<document.body.children.length;t++)n.isEqualNode(document.body.children[t])||(i=document.defaultView.getComputedStyle(document.body.children[t],null).getPropertyValue("z-index"),u=document.defaultView.getComputedStyle(document.body.children[t],null).getPropertyValue("position"),"auto"!==i&&"static"!==u&&e.push(i));if(e.push("999"),s=[],!sf.base.isNullOrUndefined(n.parentElement)&&"BODY"!==n.parentElement.tagName)for(f=[].slice.call(n.parentElement.children),t=0;t<f.length;t++)n.isEqualNode(f[t])||(i=document.defaultView.getComputedStyle(f[t],null).getPropertyValue("z-index"),u=document.defaultView.getComputedStyle(f[t],null).getPropertyValue("position"),"auto"!==i&&"static"!==u&&s.push(i));return c=o.concat(e,s),h=Math.max.apply(Math,c)+1,h>2147483647?2147483647:h}var f,o=(f=function(n,t){return(f=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}f(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},s=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return o(t,n),i([sf.base.Property("left")],t.prototype,"X",void 0),i([sf.base.Property("top")],t.prototype,"Y",void 0),t}(sf.base.ChildProperty),h="e-popup",e="e-rtl",r="e-popup-open",u="e-popup-close",a=function(t){function f(n,i){return t.call(this,i,n)||this}return o(f,t),f.prototype.onPropertyChanged=function(n,t){for(var u,f,i=0,r=Object.keys(n);i<r.length;i++)switch(r[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(n.width)});break;case"height":sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(n.height)});break;case"zIndex":sf.base.setStyleAttribute(this.element,{zIndex:n.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":u=n.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+u).toString()+"px";break;case"offsetY":f=n.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+f).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==n.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},f.prototype.getModuleName=function(){return"popup"},f.prototype.resolveCollision=function(){this.checkCollision()},f.prototype.getPersistData=function(){return this.addOnPersist([])},f.prototype.destroy=function(){this.element.classList.remove(h,e,r,u);this.unwireEvents();t.prototype.destroy.call(this)},f.prototype.render=function(){this.element.classList.add(h);var n={};1e3!==this.zIndex&&(n.zIndex=this.zIndex);"auto"!==this.width&&(n.width=sf.base.formatUnit(this.width));"auto"!==this.height&&(n.height=sf.base.formatUnit(this.height));sf.base.setStyleAttribute(this.element,n);this.fixedParent=!1;this.setEnableRtl();this.setContent()},f.prototype.wireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this);"none"!==this.actionOnScroll&&this.wireScrollEvents()},f.prototype.wireScrollEvents=function(){var n,t,i;if(this.getRelateToElement())for(n=0,t=this.getScrollableParent(this.getRelateToElement());n<t.length;n++)i=t[n],sf.base.EventHandler.add(i,"scroll",this.scrollRefresh,this)},f.prototype.unwireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange);"none"!==this.actionOnScroll&&this.unwireScrollEvents()},f.prototype.unwireScrollEvents=function(){var n,t,i;if(this.getRelateToElement())for(n=0,t=this.getScrollableParent(this.getRelateToElement());n<t.length;n++)i=t[n],sf.base.EventHandler.remove(i,"scroll",this.scrollRefresh)},f.prototype.getRelateToElement=function(){var n=""===this.relateTo||sf.base.isNullOrUndefined(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:n},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},f.prototype.scrollRefresh=function(n){if("reposition"===this.actionOnScroll?sf.base.isNullOrUndefined(this.element)||this.element.offsetParent===n.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==n.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),n.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},f.prototype.isElementOnViewport=function(n){for(var i=this.getScrollableParent(n),t=0;t<i.length;t++)if(!this.isElementVisible(n,i[t]))return!1;return!0},f.prototype.isElementVisible=function(n,t){var i=this.checkGetBoundingClientRect(n),u;if(!i.height||!i.width)return!1;if(sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(t))){var r=window,f={top:r.scrollY,left:r.scrollX,right:r.scrollX+r.outerWidth,bottom:r.scrollY+r.outerHeight},e=sf.popups.calculatePosition(n),o={top:e.top,left:e.left,right:e.left+i.width,bottom:e.top+i.height},s={top:f.bottom-o.top,left:f.right-o.left,bottom:o.bottom-f.top,right:o.right-f.left};return s.top>0&&s.left>0&&s.right>0&&s.bottom>0}return u=t.getBoundingClientRect(),!(i.bottom<u.top||i.bottom>u.bottom||i.right>u.right||i.left<u.left)},f.prototype.preRender=function(){},f.prototype.setEnableRtl=function(){this.reposition();this.enableRtl?this.element.classList.add(e):this.element.classList.remove(e)},f.prototype.setContent=function(){sf.base.isNullOrUndefined(this.content)||(this.element.innerHTML="","string"==typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},f.prototype.orientationOnChange=function(){var n=this;setTimeout(function(){n.refreshPosition()},200)},f.prototype.refreshPosition=function(n,t){sf.base.isNullOrUndefined(n)||this.checkFixedParent(n);this.reposition();t||this.checkCollision()},f.prototype.reposition=function(){var n,i,r=this.getRelateToElement(),u,t;"number"==typeof this.position.X&&"number"==typeof this.position.Y?n={left:this.position.X,top:this.position.Y}:"string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y?(u=void 0,t=this.element.style.display,this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(u=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY),n="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=t,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=u)):r?(t=this.element.style.display,this.element.style.display="block",n=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=t):n={left:0,top:0};sf.base.isNullOrUndefined(n)||(this.element.style.left=n.left+"px",this.element.style.top=n.top+"px")},f.prototype.checkGetBoundingClientRect=function(n){try{return n.getBoundingClientRect()}catch(n){return null}},f.prototype.getAnchorPosition=function(n,t,i,r,u){var e=this.checkGetBoundingClientRect(t),o=this.checkGetBoundingClientRect(n),s,f;if(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(o))return null;s=n;f={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===n.tagName?f=sf.popups.calculatePosition(n):(t.classList.contains("e-dlg-modal")&&"BODY"!==s.tagName&&(t=t.parentElement),f=sf.popups.calculateRelativeBasedPosition(s,t)),i.X){case"center":f.left+=t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?window.innerWidth/2-e.width/2:"container"===this.targetType?o.width/2-e.width/2:o.width/2;break;case"right":f.left+=t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?window.innerWidth-e.width:"container"===this.targetType?o.width-e.width:o.width}switch(i.Y){case"center":f.top+=t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?window.innerHeight/2-e.height/2:"container"===this.targetType?o.height/2-e.height/2:o.height/2;break;case"bottom":f.top+=t.classList.contains("e-dlg-modal")&&"BODY"===s.tagName&&"container"===this.targetType?window.innerHeight-e.height:"container"===this.targetType?o.height-e.height:o.height}return f.left+=r,f.top+=u,f},f.prototype.callFlip=function(n){var t=this.getRelateToElement();sf.popups.flip(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,n,this.fixedParent)},f.prototype.callFit=function(n){var r,t,i;if(0!==sf.popups.isCollide(this.element,this.viewPortElement).length)if(sf.base.isNullOrUndefined(this.viewPortElement))r=sf.popups.fit(this.element,this.viewPortElement,n),n.X&&(this.element.style.left=r.left+"px"),n.Y&&(this.element.style.top=r.top+"px");else{if(t=this.checkGetBoundingClientRect(this.element),i=this.checkGetBoundingClientRect(this.viewPortElement),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i))return null;n&&!0===n.Y&&(i.top>t.top?this.element.style.top="0px":i.bottom<t.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(t.bottom-i.bottom)+"px"));n&&!0===n.X&&(i.right<t.right?this.element.style.left=parseInt(this.element.style.left,10)-(t.right-i.right)+"px":i.left>t.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(i.left-t.left)+"px"))}},f.prototype.checkCollision=function(){var n=this.collision.X,t=this.collision.Y;"none"===n&&"none"===t||("flip"===n&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===n&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===n?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===n?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},f.prototype.show=function(t,i){var f=this,e;(this.wireEvents(),1e3!==this.zIndex&&sf.base.isNullOrUndefined(i))||(e=sf.base.isNullOrUndefined(i)?this.element:i,this.zIndex=l(e),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}));t=sf.base.isNullOrUndefined(t)||"object"!==n(t)?this.showAnimation:t;"none"===this.collision.X&&"none"===this.collision.Y||(sf.base.removeClass([this.element],u),sf.base.addClass([this.element],r),this.checkCollision(),sf.base.removeClass([this.element],r),sf.base.addClass([this.element],u));sf.base.isNullOrUndefined(t)?(sf.base.removeClass([this.element],u),sf.base.addClass([this.element],r),this.trigger("open")):(t.begin=function(){f.isDestroyed||(sf.base.removeClass([f.element],u),sf.base.addClass([f.element],r))},t.end=function(){f.isDestroyed||f.trigger("open")},new sf.base.Animation(t).animate(this.element))},f.prototype.hide=function(t){var i=this;t=sf.base.isNullOrUndefined(t)||"object"!==n(t)?this.hideAnimation:t;sf.base.isNullOrUndefined(t)?(sf.base.removeClass([this.element],r),sf.base.addClass([this.element],u),this.trigger("close")):(t.end=function(){i.isDestroyed||(sf.base.removeClass([i.element],r),sf.base.addClass([i.element],u),i.trigger("close"))},new sf.base.Animation(t).animate(this.element));this.unwireEvents()},f.prototype.getScrollableParent=function(n){return this.checkFixedParent(n),c(n,this.fixedParent)},f.prototype.checkFixedParent=function(n){for(var i,t=n.parentElement;t&&"HTML"!==t.tagName;)i=getComputedStyle(t),"fixed"===i.position&&!sf.base.isNullOrUndefined(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?sf.base.formatUnit(window.scrollY-parseInt(this.element.style.top)):sf.base.formatUnit(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!sf.base.isNullOrUndefined(this.element)&&sf.base.isNullOrUndefined(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)},i([sf.base.Property("auto")],f.prototype,"height",void 0),i([sf.base.Property("auto")],f.prototype,"width",void 0),i([sf.base.Property(null)],f.prototype,"content",void 0),i([sf.base.Property("container")],f.prototype,"targetType",void 0),i([sf.base.Property(null)],f.prototype,"viewPortElement",void 0),i([sf.base.Property({X:"none",Y:"none"})],f.prototype,"collision",void 0),i([sf.base.Property("")],f.prototype,"relateTo",void 0),i([sf.base.Complex({},s)],f.prototype,"position",void 0),i([sf.base.Property(0)],f.prototype,"offsetX",void 0),i([sf.base.Property(0)],f.prototype,"offsetY",void 0),i([sf.base.Property(1e3)],f.prototype,"zIndex",void 0),i([sf.base.Property(!1)],f.prototype,"enableRtl",void 0),i([sf.base.Property("reposition")],f.prototype,"actionOnScroll",void 0),i([sf.base.Property(null)],f.prototype,"showAnimation",void 0),i([sf.base.Property(null)],f.prototype,"hideAnimation",void 0),i([sf.base.Event()],f.prototype,"open",void 0),i([sf.base.Event()],f.prototype,"close",void 0),i([sf.base.Event()],f.prototype,"targetExitViewport",void 0),f=i([sf.base.NotifyPropertyChanges],f)}(sf.base.Component);return t.PositionData=s,t.Popup=a,t.getScrollableParent=c,t.getZindexPartial=l,t.getMaxZindex=function(n){var u,i,r,t,f,o,e;for(void 0===n&&(n=["*"]),u=[],i=0;i<n.length;i++)for(r=document.getElementsByTagName(n[i]),t=0;t<r.length;t++)f=document.defaultView.getComputedStyle(r[t],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(r[t],null).getPropertyValue("position"),"auto"!==f&&"static"!==o&&u.push(f);return e=Math.max.apply(Math,u)+1,e>2147483647?2147483647:e},t}({}))},"./modules/popupsbase.js":function(){window.sf=window.sf||{};window.sf.popups=window.sf.base.extend({},window.sf.popups,function(n){"use strict";function u(n,t,i,r,u){return(l=void 0,l=u,et=!!r,!n)?{left:0,top:0}:(t||(t="left"),i||(i="top"),w=n.ownerDocument,nt=n,function(n,t,i){switch(f=nt.getBoundingClientRect(),t+n){case"topcenter":o(ct(),i);s(tt(),i);break;case"topright":o(ht(),i);s(tt(),i);break;case"centercenter":o(ct(),i);s(st(),i);break;case"centerright":o(ht(),i);s(st(),i);break;case"centerleft":o(it(),i);s(st(),i);break;case"bottomcenter":o(ct(),i);s(ot(),i);break;case"bottomright":o(ht(),i);s(ot(),i);break;case"bottomleft":o(it(),i);s(ot(),i);break;default:case"topleft":o(it(),i);s(tt(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0}))}function o(n,t){t.left=n}function s(n,t){t.top=n}function oi(){return w.documentElement.scrollTop||w.body.scrollTop}function si(){return w.documentElement.scrollLeft||w.body.scrollLeft}function ot(){return et?f.bottom:f.bottom+oi()}function st(){return tt()+f.height/2}function tt(){return et?f.top:f.top+oi()}function it(){return f.left+si()}function ht(){var n=nt&&nt.classList.contains("e-date-range-wrapper")?l?l.width:0:l&&f.width>=l.width?l.width:0;return f.right+si()-n}function ct(){return it()+f.width/2}function lt(n,t,i){n.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX};n.TR={top:n.TL.top,left:n.TL.left+i.width};n.BL={top:n.TL.top+i.height,left:n.TL.left};n.BR={top:n.TL.top+i.height,left:n.TL.left+i.width}}function hi(n,t){var i=!1,r=!1;return n-ut()<vt()&&(i=!0),t>yt()&&(r=!0),{leftSide:i,rightSide:r}}function ci(n,t){var i=!1,r=!1;return n-rt()<at()&&(i=!0),t>pt()&&(r=!0),{topSide:i,bottomSide:r}}function li(){return r.getBoundingClientRect().width}function ai(){return r.getBoundingClientRect().height}function vi(){return r.getBoundingClientRect().left}function yi(){return r.getBoundingClientRect().top}function at(){return r?yi():0}function vt(){return r?vi():0}function yt(){return r?ut()+vi()+li():ut()+wi()}function pt(){return r?rt()+yi()+ai():rt()+pi()}function rt(){return a.documentElement.scrollTop||a.body.scrollTop}function ut(){return a.documentElement.scrollLeft||a.body.scrollLeft}function pi(){return window.innerHeight}function wi(){var n=window.innerWidth,t=document.documentElement.getBoundingClientRect();return n-(n-(sf.base.isNullOrUndefined(document.documentElement)?0:t.width))}function or(n){ii();var t=sf.base.createElement("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+n);"south"===n&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px");"north"===n&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px");"east"===n&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px");"west"===n&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px");i.appendChild(t)}function tr(n){var t;return sf.base.isNullOrUndefined(n)||(t="string"==typeof n?document.querySelector(n):n),t}function ir(n){var f,t,r,u;for(sf.base.isNullOrUndefined(n)&&(n=this),f=i.querySelectorAll(".e-resize-handle"),t=0;t<f.length;t++)e=f[t],sf.base.EventHandler.add(e,"mousedown",ur,n),r="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart",sf.base.EventHandler.add(e,r,fr,n);if(u=i.querySelectorAll(".e-dialog-border-resize"),!sf.base.isNullOrUndefined(u))for(t=0;t<u.length;t++)e=u[t],sf.base.EventHandler.add(e,"mousedown",ur,n),r="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart",sf.base.EventHandler.add(e,r,fr,n)}function rr(n){return n.indexOf("mouse")>-1?"mouse":"touch"}function ur(n){var u,r;if(n.preventDefault(),i=n.target.parentElement,ii(),b=n.pageX,k=n.pageY,n.target.classList.add("e-focused-handle"),sf.base.isNullOrUndefined(d)||!0!==d(n,this))for(u=sf.base.isNullOrUndefined(t)?document:t,sf.base.EventHandler.add(u,"mousemove",g,this),sf.base.EventHandler.add(document,"mouseup",ft,this),r=0;r<bi.length;r++)ti=!i.classList.contains(bi[r])}function ft(n){var r="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",u="msie"===sf.base.Browser.info.name?"pointerup":"touchend",i=sf.base.isNullOrUndefined(t)?document:t,f="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.remove(i,"mousemove",g);sf.base.EventHandler.remove(i,r,g);sf.base.EventHandler.remove(i,f,g);sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle");sf.base.isNullOrUndefined(ni)||ni(n,this);sf.base.EventHandler.remove(document,"mouseup",ft);sf.base.EventHandler.remove(document,u,ft)}function ii(){kt=parseFloat(getComputedStyle(i,null).getPropertyValue("width").replace("px",""));dt=parseFloat(getComputedStyle(i,null).getPropertyValue("height").replace("px",""));ki=i.getBoundingClientRect().left;di=i.getBoundingClientRect().top}function fr(n){var r;if(i=n.target.parentElement,ii(),r=n.touches?n.changedTouches[0]:n,b=r.pageX,k=r.pageY,sf.base.isNullOrUndefined(d)||!0!==d(n,this)){var u="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",f="msie"===sf.base.Browser.info.name?"pointerup":"touchend",e=sf.base.isNullOrUndefined(t)?document:t;sf.base.EventHandler.add(e,u,g,this);sf.base.EventHandler.add(document,f,ft)}}function g(n){if(n.target.classList.contains("e-resize-handle")&&n.target.classList.contains("e-focused-handle")?e=n.target:sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||(e=document.body.querySelector(".e-focused-handle")),!sf.base.isNullOrUndefined(e)){for(var i="",t=0;t<bt.length;t++)e.classList.contains("e-"+bt[t])&&(i=bt[t]);switch(sf.base.isNullOrUndefined(gt)||gt(n,this),i){case"south":ri(n);break;case"north":ui(n);break;case"west":fi(n);break;case"east":ei(n);break;case"south-east":ri(n);ei(n);break;case"south-west":ri(n);fi(n);break;case"north-east":ui(n);ei(n);break;case"north-west":ui(n);fi(n)}}}function c(n){return n.getBoundingClientRect()}function ri(n){var l,o=document.documentElement.clientHeight,e=!1,a=(n.touches?n.changedTouches[0]:n).pageY,r=c(i),u,s,y,f,h,w;if(sf.base.isNullOrUndefined(t)||(l=c(t)),sf.base.isNullOrUndefined(t)?sf.base.isNullOrUndefined(t)&&(o-a>=0||r.top<0)&&(e=!0):e=!0,u=dt+(a-k),u=u>p?u:p,s=0,sf.base.isNullOrUndefined(t)||(s=l.top),y=sf.base.isNullOrUndefined(t)?0:t.offsetHeight-t.clientHeight,f=r.top-s-y/2,f=f<0?0:f,r.top>0&&f+u>v){if(e=!1,i.classList.contains("e-resize-viewport"))return;i.style.height=v-parseInt(f.toString(),10)+"px"}else h=0,e&&(r.top<0&&o+(r.height+r.top)>0&&u+(h=r.top)<=30&&(u=r.height-(r.height+r.top)+30),u+r.top>=v&&(i.style.height=r.height+(o-(r.height+r.top))+"px"),w=sf.base.isNullOrUndefined(t)?h:f,u>=p&&u+w<=v&&(i.style.height=u+"px"))}function ui(n){var f,s=!1,e="mouse"===rr(n.type)?n.pageY:n.touches[0].pageY,h=c(i),u,o,r;sf.base.isNullOrUndefined(t)||(f=c(t));(!sf.base.isNullOrUndefined(t)&&h.top-f.top>0||sf.base.isNullOrUndefined(t)&&e>0)&&(s=!0);u=dt-(e-k);s&&u>=p&&u<=v&&(o=0,sf.base.isNullOrUndefined(t)||(o=f.top),r=di-o+(e-k),r=r>0?r:1,i.style.height=u+"px",i.style.top=r+"px")}function fi(n){var u,v=document.documentElement.clientWidth,a=!1,r,l,f;sf.base.isNullOrUndefined(t)||(u=c(t));var o="mouse"===rr(n.type)?n.pageX:n.touches[0].pageX,e=c(i),s=sf.base.isNullOrUndefined(t)?0:t.offsetWidth-t.clientWidth,p=sf.base.isNullOrUndefined(t)?0:u.left,w=sf.base.isNullOrUndefined(t)?0:u.width;sf.base.isNullOrUndefined(y)&&(sf.base.isNullOrUndefined(t)?y=v:(y=e.left-p-s/2+e.width,y+=w-s-y));(!sf.base.isNullOrUndefined(t)&&Math.floor(e.left-u.left+e.width+(u.right-e.right))-s<=h||sf.base.isNullOrUndefined(t)&&o>=0)&&(a=!0);r=kt-(o-b);(ti&&(r=r>y?y:r),a&&r>=wt&&r<=h)&&(l=0,sf.base.isNullOrUndefined(t)||(l=u.left),f=ki-l+(o-b),f=f>0?f:1,r!==gi&&nr&&(i.style.width=r+"px"),ti&&(i.style.left=f+"px",nr=1!==f));gi=r}function ei(n){var f,l=document.documentElement.clientWidth,o=!1,s,r,u,e;if(sf.base.isNullOrUndefined(t)||(f=c(t)),s=(n.touches?n.changedTouches[0]:n).pageX,r=c(i),(!sf.base.isNullOrUndefined(t)&&(r.left-f.left+r.width<=h||r.right-f.left>=r.width)||sf.base.isNullOrUndefined(t)&&l-s>0)&&(o=!0),u=kt+(s-b),e=0,sf.base.isNullOrUndefined(t)||(e=f.left),r.left-e+u>h){if(o=!1,i.classList.contains("e-resize-viewport"))return;i.style.width=h-(r.left-e)+"px"}o&&u>=wt&&u<=h&&(i.style.width=u+"px")}var f,l,nt,w,a,r,et=!1,i,e,p,v,wt,h,t,y,bt=["north-west","north","north-east","west","east","south-west","south","south-east"],bi=["e-restrict-left"],er=["north","west","east","south"],kt=0,dt=0,ki=0,di=0,b=0,k=0,d=null,gt=null,ni=null,ti=!0,gi=0,nr=!0;return n.fit=function(n,t,i,f){var e;if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};if(e=n.getBoundingClientRect(),r=t,a=n.ownerDocument,f||(f=u(n,"left","top")),i.X){var w=r?li():wi(),l=vt(),v=yt(),o=l-f.left,s=f.left+e.width-v;e.width>w?f.left=o>0&&s<=0?v-e.width:s>0&&o<=0?l:o>s?v-e.width:l:o>0?f.left+=o:s>0&&(f.left-=s)}if(i.Y){var b=r?ai():pi(),y=at(),p=pt(),h=y-f.top,c=f.top+e.height-p;e.height>b?f.top=h>0&&c<=0?p-e.height:c>0&&h<=0?y:h>c?p-e.height:y:h>0?f.top+=h:c>0&&(f.top-=c)}return f},n.isCollide=function(n,t,i,f){var e,o;void 0===t&&(t=null);e=u(n,"left","top");i&&(e.left=i);f&&(e.top=f);o=[];r=t;a=n.ownerDocument;var s=n.getBoundingClientRect(),l=e.top,v=e.left,y=e.left+s.width,h=ci(l,e.top+s.height),c=hi(v,y);return h.topSide&&o.push("top"),c.rightSide&&o.push("right"),c.leftSide&&o.push("left"),h.bottomSide&&o.push("bottom"),o},n.flip=function(n,t,i,f,e,o,s,h,c){var l,y,p,w,v;(void 0===s&&(s=null),void 0===h&&(h={X:!0,Y:!0}),t&&n&&e&&o&&(h.X||h.Y))&&(y={TL:null,TR:null,BL:null,BR:null},p={TL:null,TR:null,BL:null,BR:null},"none"===window.getComputedStyle(n).display?(w=n.style.visibility,n.style.visibility="hidden",n.style.display="block",l=n.getBoundingClientRect(),n.style.removeProperty("display"),n.style.visibility=w):l=n.getBoundingClientRect(),v={posX:e,posY:o,offsetX:i,offsetY:f,position:{left:0,top:0}},r=s,a=t.ownerDocument,function(n,t,i,r,f){i.position=u(n,i.posX,i.posY,r,f);t.TL=u(n,"left","top",r,f);t.TR=u(n,"right","top",r,f);t.BR=u(n,"left","bottom",r,f);t.BL=u(n,"right","bottom",r,f)}(t,y,v,c,l),lt(p,v,l),h.X&&function n(t,i,r,f,e,o){var s=hi(i.TL.left,i.TR.left);r.TL.left-ut()<=vt()&&(s.leftSide=!1);r.TR.left>yt()&&(s.rightSide=!1);(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(f.posX="right"===f.posX?"left":"right",f.offsetX=f.offsetX+e.width,f.offsetX=-1*f.offsetX,f.position=u(t,f.posX,f.posY,!1),lt(i,f,e),o&&n(t,i,r,f,e,!1))}(t,p,y,v,l,!0),h.Y&&y.TL.top>-1&&function n(t,i,r,f,e,o){var s=ci(i.TL.top,i.BL.top);r.TL.top-rt()<=at()&&(s.topSide=!1);r.BL.top>=pt()&&t.getBoundingClientRect().bottom<window.innerHeight&&(s.bottomSide=!1);(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(f.posY="top"===f.posY?"bottom":"top",f.offsetY=f.offsetY+e.height,f.offsetY=-1*f.offsetY,f.position=u(t,f.posX,f.posY,!1,e),lt(i,f,e),o&&n(t,i,r,f,e,!1))}(t,p,y,v,l,!0),function(n,t,i){var f=0,e=0,r;null!=n.offsetParent&&("absolute"===getComputedStyle(n.offsetParent).position||"relative"===getComputedStyle(n.offsetParent).position)&&(r=u(n.offsetParent,"left","top",!1,i),f=r.left,e=r.top);n.style.top=t.position.top+t.offsetY-e+"px";n.style.left=t.position.left+t.offsetX-f+"px"}(n,v,l))},n.calculateRelativeBasedPosition=function(n,t){var r=!1,i={left:0,top:0},u=n;if(!n||!t)return i;for(sf.base.isNullOrUndefined(t.offsetParent)&&"fixed"===t.style.position&&(r=!0);(t.offsetParent||r)&&n&&t.offsetParent!==n;)i.left+=n.offsetLeft,i.top+=n.offsetTop,n=n.offsetParent;for(n=u;(t.offsetParent||r)&&n&&t.offsetParent!==n;)i.left-=n.scrollLeft,i.top-=n.scrollTop,n=n.parentElement;return i},n.calculatePosition=u,n.createResize=function(n){var u,r,f;for(d=n.resizeBegin,gt=n.resizing,ni=n.resizeComplete,i=tr(n.element),t=tr(n.boundary),u=n.direction.split(" "),r=0;r<u.length;r++)er.indexOf(u[r])>=0&&u[r]?or(u[r]):""!==u[r].trim()&&(f=sf.base.createElement("div",{className:"e-icons e-resize-handle e-"+u[r]}),i.appendChild(f));p=n.minHeight;wt=n.minWidth;h=n.maxWidth;v=n.maxHeight;n.proxy&&n.proxy.element&&n.proxy.element.classList.contains("e-dialog")?ir(n.proxy):ir()},n.setMinHeight=function(n){p=n},n.setMaxWidth=function(n){h=n},n.setMaxHeight=function(n){v=n},n.removeResize=function(){for(var t,r=i.querySelectorAll(".e-resize-handle"),n=0;n<r.length;n++)sf.base.detach(r[n]);if(t=i.querySelectorAll(".e-dialog-border-resize"),!sf.base.isNullOrUndefined(t))for(n=0;n<t.length;n++)sf.base.detach(t[n])},n}({}))},"./modules/sf-accordion.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Accordion=function(){"use strict";var n="e-acrdn-item",t="e-acrdn-header",i=function(){function i(n,t,i){this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"};this.element=n;this.element.blazor__instance=this;this.dotNetRef=i;this.options=t}return i.prototype.destroy=function(){var n=this.element;this.unwireEvents();this.isDestroy=!0;n.classList.remove("e-acrdn-root");!this.isNested&&sf.base.isRippleEnabled&&this.removeRippleEffect()},i.prototype.render=function(){var n=sf.base.closest(this.element,".e-acrdn-panel");this.isNested=!1;this.isDestroy||(this.isDestroy=!1);sf.base.isNullOrUndefined(n)?this.element.classList.add("e-acrdn-root"):(n.classList.add("e-nested"),this.isNested=!0);this.wireFocusEvents();this.wireEvents()},i.prototype.wireFocusEvents=function(){for(var f,i,r=0,u=[].slice.call(this.element.querySelectorAll("."+n));r<u.length;r++)f=u[r],i=f.querySelector("."+t),f.childElementCount>0&&i&&(sf.base.EventHandler.clearEvents(i),sf.base.EventHandler.add(i,"focus",this.focusIn,this),sf.base.EventHandler.add(i,"blur",this.focusOut,this))},i.prototype.unwireEvents=function(){sf.base.isNullOrUndefined(this.keyModule)||this.keyModule.destroy()},i.prototype.wireEvents=function(){this.isNested||this.isDestroy||(this.removeRippleEffect=sf.base.rippleEffect(this.element,{selector:"."+t}));this.isNested||(this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},i.prototype.focusIn=function(n){n.target.parentElement.classList.add("e-item-focus")},i.prototype.focusOut=function(n){n.target.parentElement.classList.remove("e-item-focus")},i.prototype.afterContentRender=function(t){var f,w=this,r=[],i=t,s=i.children[0],h=i.children[1],y,c,e,l,p,a,v,u,o;if(s?f=sf.base.closest(s,"."+n):h&&(f=sf.base.closest(h,"."+n)),y=this.element.children,[].slice.call(y).forEach(function(n){n.classList.contains("e-active")&&r.push(n)}),c=[].slice.call(this.element.querySelectorAll("."+n+" [e-animate]")),c.length>0)for(e=0,l=c;e<l.length;e++)p=l[e],r.push(p.parentElement);if(a=-1!==r.indexOf(f)&&"true"===h.getAttribute("e-animate"),v=!1,!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(s)){if(u=sf.base.select(".e-acrdn-panel",i),o=sf.base.closest(i,".e-acrdn-root").querySelector(".e-expand-state"),sf.base.isNullOrUndefined(u))return;v=o===i;!sf.base.isVisible(u)||a&&!f.classList.contains("e-selected")?(r.length>0&&"Single"===this.options.expandMode&&!a&&r.forEach(function(n){w.collapse(sf.base.select(".e-acrdn-panel",n));n.classList.remove("e-expand-state")}),this.expand(u)):this.collapse(u);sf.base.isNullOrUndefined(o)||v||o.classList.remove("e-expand-state")}},i.prototype.eleMoveFocus=function(i,r,u){var f,e=sf.base.closest(u,"."+n);u===r?f=("moveUp"===i?u.lastElementChild:u).querySelector("."+t):u.classList.contains(t)&&(e="moveUp"===i?e.previousElementSibling:e.nextElementSibling)&&(f=sf.base.select("."+t,e));f&&f.focus()},i.prototype.keyActionHandler=function(n){var i=n.target,f=sf.base.closest(n.target,t),r,u;if(!sf.base.isNullOrUndefined(f)||i.classList.contains("e-accordion")||i.classList.contains(t)){u=this.element;switch(n.action){case"moveUp":case"moveDown":this.eleMoveFocus(n.action,u,i);break;case"space":case"enter":r=i.nextElementSibling;!sf.base.isNullOrUndefined(r)&&r.classList.contains("e-acrdn-panel")?"true"!==r.getAttribute("e-animate")&&i.click():i.click();break;case"home":case"end":("home"===n.action?u.firstElementChild.children[0]:u.lastElementChild.children[0]).focus()}}},i.prototype.expand=function(t){var i=sf.base.closest(t,"."+n);sf.base.isNullOrUndefined(t)||sf.base.isVisible(t)&&"true"!==t.getAttribute("e-animate")||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerExpandingEvent",this.getIndexByItem(i))},i.prototype.expandAnimation=function(n,t,i,r,u,f){var o,e=this;this.lastActiveItemId=r.id;"SlideDown"===n?(u.begin=function(){e.expandProgress("begin",t,i,r,f);i.style.position="absolute";o=r.offsetHeight;i.style.maxHeight=i.offsetHeight+"px";r.style.maxHeight=""},u.progress=function(){r.style.minHeight=o+i.offsetHeight+"px"},u.end=function(){sf.base.setStyleAttribute(i,{position:"",maxHeight:""});r.style.minHeight="";e.expandProgress("end",t,i,r,f)}):(u.begin=function(){e.expandProgress("begin",t,i,r,f)},u.end=function(){e.expandProgress("end",t,i,r,f)});new sf.base.Animation(u).animate(i)},i.prototype.expandProgress=function(n,t,i,r,u){sf.base.removeClass([i],"e-content-hide");sf.base.addClass([r],"e-selected");sf.base.addClass([t],"e-expand-icon");"end"===n&&(sf.base.addClass([r],"e-active"),i.setAttribute("aria-hidden","false"),sf.base.attributes(r,{"aria-expanded":"true"}),sf.base.attributes(i.previousElementSibling,{"aria-selected":"true"}),t.classList.remove("e-toggle-animation"),this.dotNetRef.invokeMethodAsync("TriggerExpandedEvent",u),this.setPersistence("accordion"+this.element.id))},i.prototype.expandedItemsPush=function(n){var i=this.getIndexByItem(n),t;-1===this.options.expandedIndices.indexOf(i)&&(t=[].slice.call(this.options.expandedIndices),t.push(i),this.options.expandedIndices=t)},i.prototype.getIndexByItem=function(n){var t=this.getItemElements();return[].slice.call(t).indexOf(n)},i.prototype.getItemElements=function(){var t=[],i=this.element.children;return[].slice.call(i).forEach(function(i){i.classList.contains(n)&&t.push(i)}),t},i.prototype.expandedItemsPop=function(n){var i=this.getIndexByItem(n),t=[].slice.call(this.options.expandedIndices);t.splice(t.indexOf(i),1);this.options.expandedIndices=t},i.prototype.collapse=function(t){var i=sf.base.closest(t,"."+n);sf.base.isNullOrUndefined(t)||!sf.base.isVisible(t)||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerCollapsingEvent",this.getIndexByItem(i))},i.prototype.collapseAnimation=function(n,t,i,r,u,f){var h,o,s,c,e=this;this.lastActiveItemId=i.id;"SlideUp"===n?(u.begin=function(){s=i.offsetHeight;i.style.minHeight=s+"px";t.style.position="absolute";h=i.offsetHeight;o=t.offsetHeight;t.style.maxHeight=o+"px";e.collapseProgress("begin",r,t,i,f)},u.progress=function(){(c=h-(o-t.offsetHeight))<s&&(i.style.minHeight=c+"px")},u.end=function(){t.style.display="none";e.collapseProgress("end",r,t,i,f);i.style.minHeight="";sf.base.setStyleAttribute(t,{position:"",maxHeight:"",display:""})}):(u.begin=function(){e.collapseProgress("begin",r,t,i,f)},u.end=function(){e.collapseProgress("end",r,t,i,f)});new sf.base.Animation(u).animate(t)},i.prototype.collapseProgress=function(n,t,i,r,u){sf.base.removeClass([t],"e-expand-icon");sf.base.removeClass([r],"e-selected");"end"===n&&(sf.base.addClass([i],"e-content-hide"),t.classList.remove("e-toggle-animation"),sf.base.removeClass([r],"e-active"),i.setAttribute("aria-hidden","true"),sf.base.attributes(r,{"aria-expanded":"false"}),sf.base.attributes(i.previousElementSibling,{"aria-selected":"false"}),this.dotNetRef.invokeMethodAsync("TriggerCollapsedEvent",u),this.setPersistence("accordion"+this.element.id))},i.prototype.expandingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+n,this.element);var i=this.getElementByIndex(t.index),u=sf.base.select(".e-acrdn-panel",i),o=sf.base.closest(i,".e-acrdn-root"),r=sf.base.select(".e-toggle-icon",i).firstElementChild,e=o.querySelector(".e-expand-state"),f={name:this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing};r.classList.add("e-toggle-animation");this.expandedItemsPush(i);sf.base.isNullOrUndefined(e)||e.classList.remove("e-expand-state");i.classList.add("e-expand-state");"None"===f.name?(this.expandProgress("begin",r,u,i,t),this.expandProgress("end",r,u,i,t)):this.expandAnimation(f.name,r,u,i,f,t)},i.prototype.getElementByIndex=function(n){return this.accItem[n]?this.accItem[n]:null},i.prototype.collapsingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+n,this.element);var i=this.getElementByIndex(t.index),u=sf.base.select(".e-acrdn-panel",i),r=sf.base.select(".e-toggle-icon",i).firstElementChild,f={name:this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing};this.expandedItemsPop(i);i.classList.add("e-expand-state");r.classList.add("e-toggle-animation");"None"===f.name?(this.collapseProgress("begin",r,u,i,t),this.collapseProgress("end",r,u,i,t)):this.collapseAnimation(f.name,u,i,r,f,t)},i.prototype.select=function(n){var i=this.getItemElements()[n];sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(sf.base.select("."+t,i))||i.children[0].focus()},i.prototype.expandItem=function(n,t){var e=this,r=this.getItemElements(),i,u,f;if(sf.base.isNullOrUndefined(t))"Single"===this.options.expandMode&&n?(i=r[r.length-1],this.itemExpand(n,i,this.getIndexByItem(i))):(u=sf.base.select("#"+this.lastActiveItemId,this.element),[].slice.call(r).forEach(function(t){e.itemExpand(n,t,e.getIndexByItem(t));t.classList.remove("e-expand-state")}),f=sf.base.select(".e-expand-state",this.element),f&&f.classList.remove("e-expand-state"),u&&u.classList.add("e-expand-state"));else{if(i=r[t],sf.base.isNullOrUndefined(i)||!i.classList.contains("e-select")||i.classList.contains("e-active")&&n)return;"Single"===this.options.expandMode&&this.expandItem(!1);this.itemExpand(n,i,t)}},i.prototype.setPersistence=function(n){this.options.enablePersistence&&window.localStorage.setItem(n,this.options.expandedIndices.toString())},i.prototype.itemExpand=function(n,t,i){var u=this,r=t.children[1];t.classList.contains("e-overlay")||(sf.base.isNullOrUndefined(r)&&n?this.dotNetRef.invokeMethodAsync("OnAccordionClick",i).then(function(){r=t.children[1];sf.base.isNullOrUndefined(r)||u.expand(r)}):sf.base.isNullOrUndefined(r)||(n?this.expand(r):this.collapse(r)))},i}();return{initialize:function(n,t,r){if(n){null===t.expandedIndices&&(t.expandedIndices=[]);var u=new i(n,t,r);u.render();u.dotNetRef.invokeMethodAsync("CreatedEvent",null)}},expandingItem:function(n,t){n&&n.blazor__instance&&n.blazor__instance.expandingItem(t)},collapsingItem:function(n,t){n&&n.blazor__instance&&n.blazor__instance.collapsingItem(t)},select:function(n,t){n&&n.blazor__instance&&n.blazor__instance.select(t)},destroy:function(n){n&&n.blazor__instance&&(n.blazor__instance.setPersistence("accordion"+n.id),n.blazor__instance.destroy())},setExpandModeAndRTL:function(n,t,i,r,u){n&&n.blazor__instance&&(r&&(t?sf.base.addClass([n],"e-rtl"):sf.base.removeClass([n],"e-rtl")),u&&(n.blazor__instance.options.expandMode=i,"Single"===i?(n.setAttribute("aria-multiselectable","false"),n.blazor__instance.options.expandedIndices.length>1&&n.blazor__instance.expandItem(!1)):n.setAttribute("aria-multiselectable","true")))},itemChanged:function(n){n&&n.blazor__instance&&n.blazor__instance.wireFocusEvents()},afterContentRender:function(n,t,i){n&&n.blazor__instance&&(n.blazor__instance.options.animation=i,n.blazor__instance.afterContentRender(t))}}}()},"./modules/sf-accumulation-chart.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.AccumulationChart=function(){"use strict";var t=sf.base.isNullOrUndefined(window._)?null:window._.throttle,i=function(n,t){this.x=n;this.y=t},r=function(){function i(n,t,i){this.chartOnMouseDownRef=null;this.mouseMoveRef=null;this.mouseEndRef=null;this.chartOnMouseClickRef=null;this.chartRightClickRef=null;this.mouseLeaveRef=null;this.chartMouseWheelRef=null;this.domMouseMoveRef=null;this.domMouseUpRef=null;this.longPressBound=null;this.touchObject=null;this.mouseY=0;this.mouseX=0;this.eventInterval=80;this.id=n;this.element=t;this.dotnetref=i;this.element.blazor__instance=this}return i.prototype.render=function(){this.unWireEvents();this.wireEvents()},i.prototype.destroy=function(){this.unWireEvents()},i.prototype.wireEvents=function(){var r=this,i=document.getElementById(this.id),u,f;if(i){n.dotnetrefCollection.push({id:this.id,dotnetref:this.dotnetref});
/*! Find the Events type */
u=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,this.dotnetref,this.id);this.mouseMoveRef=this.mouseMove.bind(this,this.dotnetref,this.id);this.mouseEndRef=this.mouseEnd.bind(this,this.dotnetref,this.id);this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,this.dotnetref,this.id);this.chartRightClickRef=this.chartRightClick.bind(this,this.dotnetref,this.id);this.mouseLeaveRef=this.mouseLeave.bind(this,this.dotnetref,this.id);i.addEventListener("mousemove",t(function(n){r.mouseMoveRef(n)},this.eventInterval));i.addEventListener("touchmove",t(function(n){r.mouseMoveRef(n)},this.eventInterval));sf.base.EventHandler.add(i,sf.base.Browser.touchEndEvent,this.mouseEndRef);sf.base.EventHandler.add(i,"click",this.chartOnMouseClickRef);sf.base.EventHandler.add(i,"contextmenu",this.chartRightClickRef);sf.base.EventHandler.add(i,u,this.mouseLeaveRef);n.resizeBound=n.chartResize.bind(this,n.dotnetrefCollection);f=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,f,n.resizeBound);this.longPressBound=this.longPress.bind(this,this.dotnetref,this.id);this.touchObject=new sf.base.Touch(i,{tapHold:this.longPressBound,tapHoldThreshold:500})}},i.prototype.unWireEvents=function(){var u=this,t=document.getElementById(this.id),i,r;if(t){n.dotnetrefCollection=n.dotnetrefCollection.filter(function(n){return n.id!==u.id});
/*! Find the Events type */
i=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */
sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef);t.removeEventListener("mousemove",this.mouseMoveRef);t.removeEventListener("touchmove",this.mouseMoveRef);sf.base.EventHandler.remove(t,sf.base.Browser.touchEndEvent,this.mouseEndRef);sf.base.EventHandler.remove(t,"click",this.chartOnMouseClickRef);sf.base.EventHandler.remove(t,"contextmenu",this.chartRightClickRef);sf.base.EventHandler.remove(t,i,this.mouseLeaveRef);r=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,r,n.resizeBound);this.touchObject&&(this.touchObject.destroy(),this.touchObject=null);
/*! Apply the style for chart */
}},i.prototype.getEventArgs=function(n){return{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType,target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0}}},i.prototype.setMouseXY=function(n,t){var r=document.getElementById(this.id+"_svg").getBoundingClientRect(),i=document.getElementById(this.id).getBoundingClientRect();this.mouseY=t-i.top-Math.max(r.top-i.top,0);this.mouseX=n-i.left-Math.max(r.left-i.left,0)},i.prototype.chartOnMouseDown=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseDown",this.getEventArgs(i)),!1},i.prototype.mouseMove=function(n,t,i){var r,u,f;return this.dotnetref=n,this.id=t,"touchmove"===i.type?(this.isTouch=!0,r=(f=i).changedTouches[0].clientX,u=f.changedTouches[0].clientY):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,r=i.clientX,u=i.clientY),document.getElementById(this.id+"_svg")&&(this.setMouseXY(r,u),this.dotnetref.invokeMethodAsync("OnChartMouseMove",this.getEventArgs(i))),!1},i.prototype.mouseEnd=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseEnd",this.getEventArgs(i)),!1},i.prototype.chartOnMouseClick=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseClick",this.getEventArgs(i)),!1},i.prototype.chartRightClick=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartRightClick",this.getEventArgs(i)),!1},i.prototype.mouseLeave=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i)),!1},i.prototype.longPress=function(n,t,i){return this.dotnetref=n,this.id=t,this.dotnetref.invokeMethodAsync("OnChartLongPress",i),!1},i}(),n={initialize:function(n,t){new r(n.id,n,t).render()},destroy:function(n){sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy()},id:"",getParentElementBoundsById:function(n){var t=document.getElementById(n),i;return t?(t.style.width="100%",t.style.height="100%",i=t.getBoundingClientRect(),{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(n,t){var i,r;return(void 0===t&&(t=!0),t&&(this.id=n),i=document.getElementById(n),i)?(r=i.getBoundingClientRect(),{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:r.left,top:r.top,right:r.right,bottom:r.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getAllCharacters:function(){for(var t=[],n=33;n<591;n++)t.push(String.fromCharCode(n));return t},measureText:function(n,t,i,r){var u=document.getElementById("chartmeasuretext");return null===u&&(u=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(u))," "===n&&(n="&nbsp;"),u.innerHTML=n,u.style.position="fixed",u.style.fontSize="100px",u.style.fontWeight=t,u.style.fontStyle=i,u.style.fontFamily=r,u.style.visibility="hidden",u.style.top="-100",u.style.left="0",u.style.whiteSpace="nowrap",u.style.lineHeight="normal",{Width:u.clientWidth,Height:u.clientHeight}},getCharCollectionSize:function(n){for(var i,e=[],o={},r=this.getAllCharacters(),s=r.length,h=n.length,u=0;u<h;u++){for(var f=n[u].split("_"),c=f[0],l=f[1],a=f[2],t=0;t<s;t++)i=this.measureText(r[t],c,l,a),o[r[t]]={X:i.Width,Y:i.Height};e.push(o)}return JSON.stringify(e)},dotnetref:{},dotnetrefCollection:[],resizeBound:{},resize:{},chartResize:function(n,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout(function(){for(var u=n.length,r=0;r<u;r++)n[r].dotnetref.invokeMethodAsync("RemoveElements");for(r=0;r<u;r++)n[r].dotnetref.invokeMethodAsync("OnChartResize",t);clearTimeout(i.resize)},500),!1},performAnimation:function(n,t,i,r,u,f,e,o,s){var c,l,h=this,a=/translate\((-?\d+\.?\d*),?\s*(-?\d+[.]?\d*)?\)/.exec(o);if(sf.base.isNullOrUndefined(o)||""===o||(u=+a[1],f=+a[2]),e<=0)return this.setElementTransform(t,n,"transform","translate("+u+", "+f+")"),null;new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:e,progress:function(e){c=h.linear(e.timeStamp,i,u,e.duration);l=h.linear(e.timeStamp,r,f,e.duration);h.setElementTransform(t,n,"transform","translate("+(s?u-c:c)+", "+(s?f-l:l)+")")},end:function(){h.setElementTransform(t,n,"transform","translate("+(s?i:u)+", "+(s?i:f)+")")}})},setElementTransform:function(n,t,i,r){var u=n.replace("Series_0","datalabel").replace("Point","Series_0");this.setElementAttribute(n+t,"transform",r);this.setElementAttribute(u+"shape_"+t,"transform",r);this.setElementAttribute(u+"text_"+t,"transform",r);this.setElementAttribute(u+"connector_"+t,"transform",r)},linear:function(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t},setElementAttribute:function(n,t,i){var r=document.getElementById(n);r&&r.setAttribute(t,i)},getElementAttribute:function(n,t){var i=document.getElementById(n);return i?i.getAttribute(t):""},createStyleElement:function(n,t){document.body.appendChild(sf.base.createElement("style",{id:n,innerHTML:t}))},renderTooltip:function(n,t,i,r){var e=document.getElementById(t+"_svg"),o=!(e&&parseInt(e.getAttribute("opacity"),10)>0),f=JSON.parse(n),u=r.blazor__instance;o&&!sf.base.isNullOrUndefined(u)?(u.tooltip=new sf.svgbase.Tooltip(f),u.tooltip.tooltipRender=function(){i.invokeMethodAsync("TooltipRender")},u.tooltip.animationComplete=function(n){n.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")},u.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(u.tooltip)||(u.tooltip.location=new sf.svgbase.TooltipLocation(f.location.x,f.location.y),u.tooltip.content=f.content,u.tooltip.header=f.header,u.tooltip.offset=f.offset,u.tooltip.palette=f.palette,u.tooltip.shapes=f.shapes,u.tooltip.data=f.data,u.tooltip.template=f.template,u.tooltip.textStyle.color=f.textStyle.color||u.tooltip.textStyle.color,u.tooltip.textStyle.fontFamily=f.textStyle.fontFamily||u.tooltip.textStyle.fontFamily,u.tooltip.textStyle.fontStyle=f.textStyle.fontStyle||u.tooltip.textStyle.fontStyle,u.tooltip.textStyle.fontWeight=f.textStyle.fontWeight||u.tooltip.textStyle.fontWeight,u.tooltip.textStyle.opacity=f.textStyle.opacity||u.tooltip.textStyle.opacity,u.tooltip.textStyle.size=f.textStyle.size||u.tooltip.textStyle.size,u.tooltip.isNegative=f.isNegative,u.tooltip.clipBounds=new sf.svgbase.TooltipLocation(f.clipBounds.x,f.clipBounds.y),u.tooltip.arrowPadding=f.arrowPadding,u.tooltip.dataBind())},fadeOut:function(n){sf.base.isNullOrUndefined(n.blazor__instance)||!sf.base.isNullOrUndefined(n.blazor__instance)&&sf.base.isNullOrUndefined(n.blazor__instance.tooltip)||(this.removeTooltipCommentElement(n),n.blazor__instance.tooltip.fadeOut())},removeTooltipCommentElement:function(n){var u=document.getElementById(n.blazor__instance.tooltip.element.id),r,f,o;if(u&&!n.blazor__instance.isRemoveCommentElement&&u.childNodes.length>1){for(var i=u.childNodes,e=[],t=0;t<i.length;t++)(i[t].nodeName.match("#comment")||i[t].nodeName.match("#text"))&&e.push(i[t]);for(r=0,f=e;r<f.length;r++)o=f[r],sf.base.remove(o),n.blazor__instance.isRemoveCommentElement=!0}},animateRedrawElement:function(n,t,i,r,u,f,e,o){var c=this,s,l,h;if(void 0===e&&(e="x"),void 0===o&&(o="y"),s=document.getElementById(n),!s)return null;l="DIV"===s.tagName;h=function(n,t){l?(s.style[e]=n+"px",s.style[o]=t+"px"):(s.setAttribute(e,n+""),s.setAttribute(o,t+""))};h(i,r);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(n){h(c.linear(n.timeStamp,i,u-i,n.duration),c.linear(n.timeStamp,r,f-r,n.duration))},end:function(){h(u,f)}})},doAnimation:function(n,t,i,r,u,f,e,o){var h=this,s=document.getElementById(n),c,l;t-=90;l=f||r;o.x+=1;e+=.414*e;new sf.base.Animation({}).animate(s,{duration:l,delay:u,progress:function(n){c=h.linear(n.timeStamp,t,i,n.duration);s.setAttribute("d",h.getPathArc(o,t,c,e,0))},end:function(){o.x-=1;s.setAttribute("d",h.getPathArc(o,t,t-9e-5,e,0));var n=document.getElementById(s.id.split("_")[0]+"_datalabel_Series_0");n&&n.setAttribute("style","visibility: visible")}})},getPathArc:function(n,t,i,r,u){var f=i-t,e=(f=f<0?f+360:f)<180?0:1;return u||0!==u?this.getDoughnutPath(n,this.degreeToLocation(t,r,n),this.degreeToLocation(i,r,n),r,this.degreeToLocation(t,u,n),this.degreeToLocation(i,u,n),u,e):this.getPiePath(n,this.degreeToLocation(t,r,n),this.degreeToLocation(i,r,n),r,e)},getPiePath:function(n,t,i,r,u){return"M "+n.x+" "+n.y+" L "+t.x+" "+t.y+" A "+r+" "+r+" 0 "+u+" 1 "+i.x+" "+i.y+" Z"},getDoughnutPath:function(n,t,i,r,u,f,e,o){return"M "+t.x+" "+t.y+" A "+r+" "+r+" 0 "+o+" 1 "+i.x+" "+i.y+" L "+f.x+" "+f.y+" A "+e+" "+e+" 0 "+o+",0 "+u.x+" "+u.y+" Z"},degreeToLocation:function(n,t,r){var u=n*Math.PI/180;return new i(Math.cos(u)*t+r.x,Math.sin(u)*t+r.y)},ChangePiePath:function(n,t,i){for(var r,u=0,f=n;u<f.length;u++)r=f[u],this.ChangePointPath(r.point,r.degree,r.start,r.pathOption,i,t,r.radius,r.innerRadius)},GetPathOption:function(n,t,i,r,u){return t?this.getPathArc(n,i,(i+t)%360,r,u):""},ChangePointPath:function(n,t,i,r,u,f,e,o){var h,l,c=this,s=document.getElementById(r.id);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:u,delay:0,progress:function(r){l=c.linear(r.timeStamp,n.degree,t-n.degree,r.duration);h=((h=c.linear(r.timeStamp,n.start,i-n.start,r.duration))/(Math.PI/180)+360)%360;s.setAttribute("d",c.GetPathOption(f,l,h,e,o));n.isExplode;s.style.visibility="visible"},end:function(){s.style.visibility=n.visible?"visible":"hidden";s.setAttribute("d",r.direction);n.degree=t;n.start=i}})}};return n}()},"./modules/sf-barcode.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Barcode=function(){"use strict";var n=function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},t=function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==e[0]&&2!==e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e};return{getBarcodeSize:function(n){var i=n.getBoundingClientRect(),t={};return t.Width=i.width,t.Height=i.height,t},createHtmlElement:function(n,t){var i=sf.base.createElement(n);return t&&this.setAttribute(i,t),i},setAttribute:function(n,t){for(var r=Object.keys(t),i=0;i<r.length;i++)n.setAttribute(r[i],t[r[i]])},createMeasureElements:function(){var n,r,t,i;window.barcodeMeasureElement?window.barcodeMeasureElement.usageCount+=1:(n=this.createHtmlElement("div",{id:"barcodeMeasureElement","class":"barcodeMeasureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),r=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"}),n.appendChild(r),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.setAttribute("xlink","http://www.w3.org/1999/xlink"),n.appendChild(t),i=document.createElementNS("http://www.w3.org/2000/svg","text"),i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.appendChild(i),window.barcodeMeasureElement=n,window.barcodeMeasureElement.usageCount=1,document.body.appendChild(n))},measureText:function(n,t,i){var e,r,f,u;return window.barcodeMeasureElement.style.visibility="visible",e=window.barcodeMeasureElement.children[1],r=this.getChildNode(e)[0],r.textContent=n,r.setAttribute("style","font-size:"+t+"px; font-family:"+i+";"),f=r.getBBox(),u={},u.Width=f.width,u.Height=f.height,window.barcodeMeasureElement.style.visibility="hidden",u},getChildNode:function(n){var r,i=[],t;if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(t=0;t<n.childNodes.length;t++)1===(r=n.childNodes[t]).nodeType&&i.push(r);else i=n.children;return i},checkOverlapTextPosition:function(n,t,i,r,u,f,e,o){return(o=o||{}).stringSize=t,r+u-(f+this.measureText(n,t,i).Width)<=e&&t>2&&(o.stringSize-=.2,this.checkOverlapTextPosition(n,o.stringSize,i,r,u,f,e,o)),o.stringSize},triggerDownload:function(n,t,i){var r=document.createElement("a");r.download=t+"."+n.toLocaleLowerCase();r.href=i;r.click()},exportAsImage:function(i,r,u,f){return n(this,void 0,void 0,function(){var n;return t(this,function(t){switch(t.label){case 0:return[4,this.imageExport(i,r,u,f)];case 1:return _instanceof(n=t.sent(),Promise)?(n.then(function(n){return n}),[2,n]):[2,n]}})})},imageExport:function(i,r,u,f){return n(this,void 0,void 0,function(){var n;return t(this,function(){return n=this,[2,new Promise(function(t){var c="<svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>"+u.children[0].outerHTML+"<\/svg>",s=window.URL.createObjectURL(new Blob("SVG"===i?[c]:[(new window.XMLSerializer).serializeToString(u)],{type:"image/svg+xml"})),e,h,o;"SVG"===i?(n.triggerDownload(i,r,s),t(null)):(e=document.createElement("canvas"),e.height=u.clientHeight,e.width=u.clientWidth,h=e.getContext("2d"),o=new Image,o.onload=function(){if(h.drawImage(o,0,0),window.URL.revokeObjectURL(s),f){var u="JPEG"===i?e.toDataURL("image/jpeg"):"PNG"===i?e.toDataURL("image/png"):"";t(u)}else n.triggerDownload(i,r,e.toDataURL("image/png").replace("image/png","image/octet-stream")),t(null)},o.src=s)})]})})}}}()},"./modules/sf-bullet-chart.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.BulletChart=function(){"use strict";var n=function(){function n(n,t){this.resizeTo=0;this.element=n;this.dotNetRef=t;this.element.blazor__instance=this}return n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this);sf.base.EventHandler.add(this.element,"mousemove",this.mousemove.bind(this),this);window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this));new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"});sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousemove",this.mousemove);sf.base.EventHandler.remove(this.element,"click",this.click);window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this));sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var n=sf.base.getInstance(this.element,this.keyActionHandler);n&&n.destroy();this.element=null;this.dotNetRef=null},n.prototype.mouseDown=function(n){n.preventDefault()},n.prototype.keyActionHandler=function(n){"enter"===n.action&&this.clickProcess(n)},n.prototype.resize=function(){var n=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout(function(){n.dotNetRef.invokeMethodAsync("TriggerResize")},500))},n.prototype.click=function(n){this.clickProcess(n)},n.prototype.clickProcess=function(n){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerClick",n.target.id)},n.prototype.mousemove=function(n){var t,i,r,u,f;this.element&&(t=this.element.getBoundingClientRect());r=document.getElementById(this.element.id+"_svg");r&&(i=r.getBoundingClientRect());u=n.clientX-t.left-Math.max(i.left-t.left,0);f=n.clientY-t.top-Math.max(i.top-t.top,0);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",n.target.id,u,f)},n.prototype.valueBarAnimation=function(n,t,i){new sf.base.Animation({}).animate(t,{duration:n.duration,delay:n.delay,progress:function(r){if(r.timeStamp>=r.delay){t.style.visibility="visible";var u=-1*Math.cos((r.timeStamp-r.delay)/r.duration*(Math.PI/2))+1;t.setAttribute("transform","translate("+i.toString()+" "+n.valueY.toString()+") scale("+(u/1).toString()+", 1) translate("+-i.toString()+" "+-n.valueY.toString()+")")}},end:function(){t.setAttribute("transform","translate(0,0)");t.style.visibility="visible"}})},n.prototype.targetBarAnimation=function(n,t,i,r){new sf.base.Animation({}).animate(t,{duration:n.duration,delay:n.delay,progress:function(n){if(n.timeStamp>=n.delay){t.style.visibility="visible";var u=-1*Math.cos((n.timeStamp-n.delay)/n.duration*(Math.PI/2))+1;t.setAttribute("transform","translate("+i.toString()+" "+r.toString()+") scale(1, "+(u/1).toString()+") translate("+-i.toString()+" "+-r.toString()+")")}},end:function(){t.setAttribute("transform","translate(0,0)");t.style.visibility="visible"}})},n}();return{initialize:function(t,i,r,u){if(t)return new n(t,u).wireEvents(),this.getElementSize(t,i,r)},getElementSize:function(n,t,i){var r,u;return n&&(n.style.height=t,n.style.width=i,r=n.clientWidth||n.offsetWidth,u=n.clientHeight),{width:r,height:u}},updateElementOpacity:function(n,t,i){var r=document.getElementById(n);r&&(sf.base.isNullOrUndefined(i)||""===i||document.getElementById(i).setAttribute("opacity","1"),!0===t?r.setAttribute("opacity","1"):r.setAttribute("opacity","0.6"))},doValueBarAnimation:function(n,t,i,r){for(var f,u=0;u<i.length;u++)f=document.getElementById(i[u]),f&&n.blazor__instance.valueBarAnimation(t,f,r[u])},doTargetBarAnimation:function(n,t,i,r,u){for(var e,f=0;f<i.length;f++)e=document.getElementById(i[f]),e&&n.blazor__instance.targetBarAnimation(t,e,r[f],u[f])},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.unWireEvents()}}}()},"./modules/sf-calendarbase.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.CalendarBase=function(){"use strict";return{initialize:function(n,t,i,r,u){var f={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"};f=sf.base.extend(f,i);new sf.base.KeyboardEvents(n,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this,r,u,t),keyConfigs:f})},keyActionHandle:function(n,t,i,r){var e,u,f,o,s;r.preventDefault();e=sf.base.closest(r.target,".e-calendar").querySelector("tbody");e&&(f=e.querySelector("tr td.e-focused-date"),u=e.querySelector("tr td.e-selected"),e.focus(),o=r.target,s={Action:r.action,Key:r.key,Events:r,SelectDate:u?u.id:null,FocusedDate:f?f.id:null,classList:u?u.classList.toString():f?f.classList.toString():"e-cell",Id:f?f.id:u?u.id:null,TargetClassList:o.classList.toString()},i.invokeMethodAsync("OnCalendarKeyboardEvent",s),o.classList.contains("e-today")&&(o.blur(),e.focus()))}}}()},"./modules/sf-chart.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Chart=function(){"use strict";var t=sf.base.isNullOrUndefined(window._)?null:window._.throttle,i=function(){function i(n,t,i,r,u){void 0===r&&(r=!1);void 0===u&&(u=!1);this.mouseY=0;this.mouseX=0;this.eventInterval=80;this.chartOnMouseDownRef=null;this.mouseMoveRef=null;this.mouseEndRef=null;this.chartOnMouseClickRef=null;this.chartRightClickRef=null;this.mouseLeaveRef=null;this.chartMouseWheelRef=null;this.domMouseMoveRef=null;this.domMouseUpRef=null;this.longPressBound=null;this.touchObject=null;this.pinchStyle="opacity: 0; position: absolute; display: block; width: 100px; height: 100px; background: transparent; border: 2px solid blue;";this.pinchtarget=null;this.id=n;this.element=t;this.dotnetref=i;this.isZooming=r;this.isScrollbar=u;this.element.blazor__instance=this}return i.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref);this.wireEvents(this.id,this.dotnetref)},i.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref)},i.prototype.unWireEvents=function(t,i){var r=document.getElementById(t),u,f,e;if(r){this.dotnetref=i;n.dotnetrefCollection=n.dotnetrefCollection.filter(function(n){return n.id!==t});
/*! Find the Events type */
u=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */
(sf.base.EventHandler.remove(r,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),r.removeEventListener("mousemove",this.mouseMoveRef),r.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(r,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(r,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(r,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(r,u,this.mouseLeaveRef),this.isZooming)&&(f="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",r.removeEventListener(f,this.chartMouseWheelRef));this.isScrollbar&&(window.removeEventListener("mousemove",this.domMouseMoveRef),window.removeEventListener("mouseup",this.domMouseUpRef,!1));e=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,e,n.resizeBound);this.touchObject&&(this.touchObject.destroy(),this.touchObject=null);
/*! Apply the style for chart */
}},i.prototype.wireEvents=function(i,r){var f=this,u=document.getElementById(i),e,o,s;if(u){this.dotnetref=r;n.dotnetrefCollection.push({id:i,dotnetref:r});
/*! Find the Events type */
e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";(this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,r,i),this.mouseMoveRef=this.mouseMove.bind(this,r,i),this.mouseEndRef=this.mouseEnd.bind(this,r,i),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,r,i),this.chartRightClickRef=this.chartRightClick.bind(this,r,i),this.mouseLeaveRef=this.mouseLeave.bind(this,r,i),sf.base.EventHandler.add(u,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),u.addEventListener("mousemove",t(function(n){f.mouseMoveRef(n)},this.eventInterval)),u.addEventListener("touchmove",t(function(n){f.mouseMoveRef(n)},this.eventInterval)),sf.base.EventHandler.add(u,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(u,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(u,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(u,e,this.mouseLeaveRef),this.isZooming)&&(this.chartMouseWheelRef=this.chartMouseWheel.bind(this,r,i),o="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",u.addEventListener(o,t(function(n){f.chartMouseWheelRef(n)},this.eventInterval)));this.isScrollbar&&(this.domMouseMoveRef=this.domMouseMove.bind(this,r,i),this.domMouseUpRef=this.domMouseUp.bind(this,r,i),window.addEventListener("mousemove",t(function(n){f.domMouseMoveRef(n)},this.eventInterval)),window.addEventListener("mouseup",this.domMouseUpRef,!1));n.resizeBound=n.chartResize.bind(this,n.dotnetrefCollection);s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,s,n.resizeBound);this.longPressBound=this.longPress.bind(this,r,i);this.touchObject=new sf.base.Touch(u,{tapHold:this.longPressBound,tapHoldThreshold:500})}},i.prototype.getEventArgs=function(n,t){var e=n.changedTouches?n.changedTouches[0].clientX:n.clientX,o=n.changedTouches?n.changedTouches[0].clientY:n.clientY,r,u,i,f;if(this.setMouseXY(e,o,t),r=n.touches,u=[],n.type.indexOf("touch")>-1)for(i=0,f=r.length;i<f;i++)u.push({pageX:r[i].clientX,pageY:r[i].clientY,pointerId:n.pointerId||0});return{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType,target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0},touches:u,pointerId:n.pointerId}},i.prototype.getWheelArgs=function(n,t){return this.setMouseXY(n.clientX,n.clientY,t),{detail:n.detail,wheelDelta:n.wheelDelta,target:n.currentTarget?n.currentTarget.id:n.srcElement?n.srcElement.id:n.target?n.target.id:"",clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},i.prototype.setMouseXY=function(n,t,i){var u=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),r=document.getElementById(i).getBoundingClientRect();this.mouseY=t-r.top-Math.max(u.top-r.top,0);this.mouseX=n-r.left-Math.max(u.left-r.left,0)},i.prototype.chartOnMouseDown=function(n,t,i){if(this.dotnetref=n,i.type.indexOf("touch")>-1){var r=i.changedTouches?i.changedTouches[0].clientX:i.clientX,u=i.changedTouches?i.changedTouches[0].clientY:i.clientY;this.pinchtarget=document.getElementById("pinchtarget");this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(u-50)+"px; left: "+(r-50)+"px;")}return n.invokeMethodAsync("OnChartMouseDown",this.getEventArgs(i,t)),!1},i.prototype.chartMouseWheel=function(n,t,i){return this.dotnetref=n,n.invokeMethodAsync("OnChartMouseWheel",this.getWheelArgs(i,t)),i.preventDefault(),!1},i.prototype.mouseMove=function(n,t,i){var r,u,f;return"touchmove"===i.type?(this.isTouch=!0,r=(f=i).changedTouches[0].clientX,u=f.changedTouches[0].clientY,this.pinchtarget&&this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(u-50)+"px; left: "+(r-50)+"px;"),i.preventDefault()):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,r=i.clientX,u=i.clientY),this.dotnetref=n,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(r,u,t),n.invokeMethodAsync("OnChartMouseMove",this.getEventArgs(i,t))),!1},i.prototype.mouseEnd=function(n,t,i){return this.dotnetref=n,this.pinchtarget&&this.pinchtarget.setAttribute("style",this.pinchStyle+" top: -100px; left: -100px;"),n.invokeMethodAsync("OnChartMouseEnd",this.getEventArgs(i,t)),!1},i.prototype.chartOnMouseClick=function(n,t,i){return this.dotnetref=n,n.invokeMethodAsync("OnChartMouseClick",this.getEventArgs(i,t)),!1},i.prototype.chartRightClick=function(n,t,i){return this.dotnetref=n,i.preventDefault(),i.stopPropagation(),n.invokeMethodAsync("OnChartMouseRightClick",this.getEventArgs(i,t)),!1},i.prototype.mouseLeave=function(n,t,i){return this.dotnetref=n,n.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i,t)),!1},i.prototype.longPress=function(n,t,i){var r,u,f;return this.dotnetref=n,r=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientX:0,u=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientY:0,this.setMouseXY(r,u,t),f={type:"TapHold",clientX:r,clientY:u,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:"",target:"",changedTouches:{clientX:r,clientY:u},touches:[],pointerId:0},n.invokeMethodAsync("OnChartLongPress",f),!1},i.prototype.domMouseMove=function(t,i,r){if(!sf.base.isNullOrUndefined(n.svgId)&&n.svgId.indexOf(i)>-1){var u=n.getScrollEventArgs(r,!0);t.invokeMethodAsync("ScrollMouseMove",u)}return!1},i.prototype.domMouseUp=function(t,i,r){if(!sf.base.isNullOrUndefined(n.svgId)&&n.svgId.indexOf(i)>-1){var u=n.getScrollEventArgs(r,!0);t.invokeMethodAsync("ScrollMouseUp",u);n.svgId=null}return!1},i}(),n={initialize:function(n,t,r,u){new i(n.id,n,t,r,u).render()},destroy:function(n){var t=n.blazor__instance;sf.base.isNullOrUndefined(t)||t.destroy()},eventInterval:80,dotnetref:{},getScrollEventArgs:function(n,t){var i,o,r;void 0===t&&(t=!1);var s=n.changedTouches?n.changedTouches[0].clientX:n.clientX,h=n.changedTouches?n.changedTouches[0].clientY:n.clientY,f=this.setScrollMouseXY(s,h,n.target.id,t),u=n.touches,e=[];if(n.type.indexOf("touch")>-1)for(i=0,o=u.length;i<o;i++)e.push({pageX:u[i].clientX,pageY:u[i].clientY,pointerId:n.pointerId||0});return r=n.target.id,r=r.indexOf("scrollBar")>-1?r:this.svgId,{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:f.mouseX,mouseY:f.mouseY,pointerType:n.pointerType,target:r,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0},touches:e,pointerId:n.pointerId}},getScrollWheelArgs:function(n){var t=this.setScrollMouseXY(n.clientX,n.clientY,n.currentTarget.id);return{detail:n.detail,wheelDelta:n.wheelDelta,target:n.currentTarget?n.currentTarget.id:n.srcElement?n.srcElement.id:n.target?n.target.id:"",clientX:n.clientX,clientY:n.clientY,mouseX:t.mouseX,mouseY:t.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},svgId:null,setScrollMouseXY:function(n,t,i,r){var u,f,e;return(void 0===r&&(r=!1),this.svgId=r?this.svgId:i,r||-1!==i.indexOf("_scrollBar_svg"))||(u=i.split("_scrollBar")[0],f=i.split("_"),this.svgId=u+"_scrollBar_svg"+f[f.length-1],this.dotnetref=this.dotnetrefCollection.find(function(n){return u===n.id}).dotnetref),e=this.getElement(this.svgId).getBoundingClientRect(),{mouseX:n-Math.max(e.left,0),mouseY:t-Math.max(e.top,0)}},scrollMouseDown:function(n){var t=this.getScrollEventArgs(n);return this.dotnetref.invokeMethodAsync("ScrollMouseDown",t),!1},scrollMouseMove:function(n){var i=this;return t(function(){var t=i.getScrollEventArgs(n);i.dotnetref.invokeMethodAsync("ScrollMouseMove",t)},this.eventInterval),!1},scrollMouseUp:function(n){var t=this.getScrollEventArgs(n);return this.dotnetref.invokeMethodAsync("ScrollMouseUp",t),this.svgId=null,!1},scrollMouseWheel:function(n){var i=this;return t(function(){var t=i.getScrollWheelArgs(n);i.dotnetref.invokeMethodAsync("ScrollMouseWheel",t)},this.eventInterval),!1},dotnetrefCollection:[],renderTooltip:function(n,t,i,r){var e=document.getElementById(t+"_svg"),o=!(e&&parseInt(e.getAttribute("opacity"),10)>0),f=JSON.parse(n),u=r.blazor__instance;o&&!sf.base.isNullOrUndefined(u)?(u.tooltip=new sf.svgbase.Tooltip(f),u.tooltip.appendTo("#"+t),u.tooltip.tooltipRender=function(){i.invokeMethodAsync("TooltipRender")},u.tooltip.animationComplete=function(n){n.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")}):sf.base.isNullOrUndefined(u.tooltip)||(u.tooltip.location=new sf.svgbase.TooltipLocation(f.location.x,f.location.y),u.tooltip.content=f.content,u.tooltip.header=f.header,u.tooltip.offset=f.offset,u.tooltip.palette=f.palette,u.tooltip.shapes=f.shapes,u.tooltip.data=f.data,u.tooltip.template=f.template,u.tooltip.textStyle.color=f.textStyle.color||u.tooltip.textStyle.color,u.tooltip.textStyle.fontFamily=f.textStyle.fontFamily||u.tooltip.textStyle.fontFamily,u.tooltip.textStyle.fontStyle=f.textStyle.fontStyle||u.tooltip.textStyle.fontStyle,u.tooltip.textStyle.fontWeight=f.textStyle.fontWeight||u.tooltip.textStyle.fontWeight,u.tooltip.textStyle.opacity=f.textStyle.opacity||u.tooltip.textStyle.opacity,u.tooltip.textStyle.size=f.textStyle.size||u.tooltip.textStyle.size,u.tooltip.isNegative=f.isNegative,u.tooltip.clipBounds=new sf.svgbase.TooltipLocation(f.clipBounds.x,f.clipBounds.y),u.tooltip.arrowPadding=f.arrowPadding,u.tooltip.dataBind())},fadeOut:function(n){!n||sf.base.isNullOrUndefined(n.blazor__instance)||!sf.base.isNullOrUndefined(n.blazor__instance)&&sf.base.isNullOrUndefined(n.blazor__instance.tooltip)||(this.removeTooltipCommentElement(n),n.blazor__instance.tooltip.fadeOut())},removeTooltipCommentElement:function(n){var u=this.getElement(n.blazor__instance.tooltip.element.id),r,f,o;if(u&&!n.blazor__instance.isRemoveCommentElement&&u.childNodes.length>1){for(var i=u.childNodes,e=[],t=0;t<i.length;t++)(i[t].nodeName.match("#comment")||i[t].nodeName.match("#text"))&&e.push(i[t]);for(r=0,f=e;r<f.length;r++)o=f[r],sf.base.remove(o),n.blazor__instance.isRemoveCommentElement=!0}},getParentElementBoundsById:function(n){var t=document.getElementById(n),i;return t?(t.style.width="100%",t.style.height="100%",i=t.getBoundingClientRect(),{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(n,t){var i,r;return(void 0===t&&(t=!0),t&&(this.id=n),i=document.getElementById(n),i)?(r=i.getBoundingClientRect(),{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:r.left,top:r.top,right:r.right,bottom:r.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setZoomingCipPath:function(n,t,i){var r=document.getElementById(n),u=document.getElementById(t);r&&r.setAttribute("clip-path",i);u&&r.setAttribute("clip-path",i)},setZoomingElementAttributes:function(n,t,i,r,u,f,e,o){"Indicator"===t&&i&&i.parentElement&&i.parentElement.setAttribute("transform",n);i&&i.setAttribute("transform",n);r&&r.setAttribute("transform",n);u&&u.setAttribute("transform",n);f&&f.setAttribute("visibility","hidden");e&&e.setAttribute("visibility","hidden");o&&(o.style.visibility="hidden")},measureBreakText:function(n,t,i,r,u,f,e){var o={color:i,size:t,fontFamily:r,fontWeight:u,fontStyle:f,opacity:parseInt(e,10)};return sf.svgbase.measureText(n,o)},getAllCharacters:function(){for(var t=[],n=33;n<591;n++)t.push(String.fromCharCode(n));return t},measureText:function(n,t,i,r){var u=document.getElementById("sfchartmeasuretext");return null===u&&(u=sf.base.createElement("text",{id:"sfchartmeasuretext"}),document.body.appendChild(u))," "===n&&(n="&nbsp;"),u.innerHTML=n,u.style.position="fixed",u.style.fontSize="100px",u.style.fontWeight=t,u.style.fontStyle=i,u.style.fontFamily=r,u.style.visibility="hidden",u.style.top="-100",u.style.left="0",u.style.whiteSpace="nowrap",u.style.lineHeight="normal",{Width:u.clientWidth,Height:u.clientHeight}},getCharCollectionSize:function(n){for(var i,e=[],o={},r=this.getAllCharacters(),s=r.length,h=n.length,u=0;u<h;u++){for(var f=n[u].split("_"),c=f[0],l=f[1],a=f[2],t=0;t<s;t++)i=this.measureText(r[t],c,l,a),o[r[t]]={X:i.Width,Y:i.Height};e.push(o)}return JSON.stringify(e)},getCharSizeByFontKeys:function(n){for(var r,u={},f=n.length,t=[],i=0;i<f;i++)t=n[i].split("_"),r=this.measureText(t[0],t[1],t[2],t[3]),u[n[i]]={X:r.Width,Y:r.Height};return JSON.stringify(u)},getElementRect:function(n){var i=document.getElementById(n),t=i.getBoundingClientRect();return sf.base.remove(i),{Left:t.left,Right:t.right,Top:t.top,Bottom:t.bottom,Width:t.width,Height:t.height}},getElement:function(n){return document.getElementById(n)},drawTrackBall:function(n,t,i,r,u,f){var h=this.getElement(n);if(h){for(var s=document.createElementNS("http://www.w3.org/2000/svg",i),o=Object.keys(t),c="",e=0;e<o.length;e++)c="strokeWidth"===o[e]?"stroke-width":"strokeDashArray"===o[e]?"stroke-dashArray":"direction"===o[e]?"d":o[e],s.setAttribute(c,t[o[e]]);s.setAttribute("class",r);s.setAttribute("clip-path",u);s.setAttribute("transform",f);h.appendChild(s)}},removeHighLightedMarker:function(n){for(var t=document.getElementsByClassName(n),i=0,r=t.length;i<r;i++)sf.base.remove(t[0])},setAttribute:function(n,t,i){var r=this.getElement(n);r&&r.setAttribute(t,i)},createTooltip:function(n,t,i,r,u){var f=document.getElementById(n),e="top:"+((window.scrollY||0)+i).toString()+"px;left:"+r.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+u+";border-radius:2px; z-index:1";f?(f.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),f.setAttribute("styles",e)):(f=sf.base.createElement("div",{id:n,innerHTML:"&nbsp;"+t+"&nbsp;",styles:e}),document.body.appendChild(f))},removeElement:function(n){var t=this.getElement(n);t&&sf.base.remove(t)},applySelection:function(n,t){var r,u=document.getElementById(n),i,f;if(u&&u.childNodes)for(i=1,f=(r=u.childNodes).length;i<f;i++)r[i]&&"rect"!==r[i].tagName&&r[i].setAttribute&&r[i].setAttribute("fill",t)},getAndSetTextContent:function(n,t,i){var r=document.getElementById(n);if(r){if(t)return r.textContent;r.textContent=i}return null},doProgressiveAnimation:function(n,t,i,r,u){var e,s=this.getElement(t),f=this.getElement(n),h=new sf.base.Animation({}),o=f.getTotalLength();f.setAttribute("visibility","hidden");h.animate(f,{duration:i+r,delay:r,progress:function(n){s.setAttribute("visibility","visible");n.timeStamp>=n.delay&&(f.setAttribute("visibility","visible"),e=Math.abs(Math.round((n.timeStamp-n.delay)*o/n.duration)),f.setAttribute("stroke-dasharray",e+","+o))},end:function(){f.setAttribute("stroke-dasharray",u)}})},linear:function(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t},doLinearAnimation:function(n,t,i,r){var f,u=this.getElement(n),l=new sf.base.Animation({}),s=this.linear,h=+u.getAttribute("height"),c=+u.getAttribute("width"),e=+u.getAttribute("x"),o=r?+u.getAttribute("height")+ +u.getAttribute("y"):+u.getAttribute("y");l.animate(u,{duration:t,delay:i,progress:function(n){n.timeStamp>=n.delay&&(u.setAttribute("visibility","visible"),r?(f=s(n.timeStamp-n.delay,0,h,n.duration),u.setAttribute("transform","translate("+e+" "+o+") scale(1,"+f/h+") translate("+-e+" "+-o+")")):(f=s(n.timeStamp-n.delay,0,c,n.duration),u.setAttribute("transform","translate("+e+" "+o+") scale("+f/c+", 1) translate("+-e+" "+-o+")")))},end:function(){u.setAttribute("transform","translate(0,0)")}})},filterCommentElement:function(n){var r=this.getElement(n);if(!r)return null;for(var i=r.childNodes,u=[],t=0;t<i.length;t++)i[t].nodeName.match("#comment")||u.push(i[t]);return u},doInitialAnimation:function(n){for(var r,u,e,f,t=0;t<n.length;t++){switch(n[t].type){case"Rect":for(var o=this.getElement(n[t].clipPathId),s=this.filterCommentElement(n[t].elementId),i=0;i<n[t].pointIndex.length;i++)this.doRectAnimation(s[n[t].pointIndex[i]],o,n[t].duration,n[t].delay,n[t].pointX[i],n[t].pointY[i],n[t].pointWidth[i],n[t].pointHeight[i],n[t].isInvertedAxis);break;case"Progressive":this.doProgressiveAnimation(n[t].elementId,n[t].clipPathId,n[t].duration,n[t].delay,n[t].strokeDashArray);break;case"Linear":this.doLinearAnimation(n[t].elementId,n[t].duration,n[t].delay,n[t].isInvertedAxis);break;case"Marker":for(r=this.getElement(n[t].clipPathId),u=this.filterCommentElement(n[t].elementId),i=0;i<n[t].pointIndex.length;i++)this.doMarkerAnimate(u[n[t].pointIndex[i]],r,n[t].duration,n[t].delay,n[t].pointX[i],n[t].pointY[i]);break;case"PolarRadar":for(e=this.getElement(n[t].clipPathId),f=this.filterCommentElement(n[t].elementId),i=0;i<f.length;i++)this.doPolarRadarAnimation(f[i],e,n[t].duration,n[t].delay,n[t].pointX[0],n[t].pointY[0])}if(!sf.base.isNullOrUndefined(n[t].markerInfo))for(r=this.getElement(n[t].markerInfo.markerClipPathId),u=this.filterCommentElement(n[t].markerInfo.markerElementId),i=0;i<n[t].markerInfo.pointIndex.length;i++)this.doMarkerAnimate(u[n[t].markerInfo.pointIndex[i]],r,200,n[t].duration+n[t].delay,n[t].markerInfo.pointX[i],n[t].markerInfo.pointY[i]),n[t].markerInfo.lowPointIndex.length>0&&this.doMarkerAnimate(u[n[t].markerInfo.lowPointIndex[i]],r,200,n[t].duration+n[t].delay,n[t].markerInfo.lowPointX[i],n[t].markerInfo.lowPointY[i]);if(!sf.base.isNullOrUndefined(n[t].dataLabelInfo))if(0===n[t].dataLabelInfo.templateId.length)this.doDataLabelAnimation(n[t].dataLabelInfo.shapeGroupId,n[t].dataLabelInfo.textGroupId,"",n[t].clipPathId,200,n[t].duration+n[t].delay);else for(i=0;i<n[t].dataLabelInfo.templateId.length;i++)this.doDataLabelAnimation("","",n[t].dataLabelInfo.templateId[i],"",200,n[t].duration+n[t].delay);sf.base.isNullOrUndefined(n[t].errorBarInfo)||this.doErrorBarAnimation(n[t].errorBarInfo.errorBarElementId,n[t].errorBarInfo.errorBarClipPathId,n[t].duration+n[t].delay,n[t].isInvertedAxis)}},doDynamicAnimation:function(n,t,i){for(var f,u,r=0;r<n.length;r++)sf.base.isNullOrUndefined(n[r].previousDir)||""===n[r].previousDir||sf.base.isNullOrUndefined(n[r].currentDir)||""===n[r].currentDir||this.pathAnimation(n[r].id,n[r].currentDir,!0,n[r].previousDir,300);for(f=0;f<t.length;f++)this.animateRectElement(t[f].id,0,300,t[f].currentRect,t[f].previousRect);for(u=0;u<i.length;u++)this.animateRedrawElement(i[u].id,300,i[u].preLocationX,i[u].preLocationY,i[u].curLocationX,i[u].curLocationY,i[u].x,i[u].y)},doRectAnimation:function(n,t,i,r,u,f,e,o,s){var h,c=this.linear;sf.base.isNullOrUndefined(n)||(n.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(n,{duration:i,delay:r,progress:function(i){t.setAttribute("visibility","visible");i.timeStamp>=i.delay&&(n.setAttribute("visibility","visible"),s?(e=e||1,h=c(i.timeStamp-i.delay,0,e,i.duration),n.setAttribute("transform","translate("+u+" "+f+") scale("+h/e+", 1) translate("+-u+" "+-f+")")):(o=o||1,h=c(i.timeStamp-i.delay,0,o,i.duration),n.setAttribute("transform","translate("+u+" "+f+") scale(1,"+h/o+") translate("+-u+" "+-f+")")))},end:function(){n.setAttribute("transform","translate(0,0)")}}))},doMarkerAnimate:function(n,t,i,r,u,f){var e=0;n&&(n.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(n,{duration:i,delay:r,progress:function(i){t.setAttribute("visibility","visible");i.timeStamp>i.delay&&(n.setAttribute("visibility","visible"),e=(i.timeStamp-i.delay)/i.duration,n.setAttribute("transform","translate("+u+" "+f+") scale("+e+") translate("+-u+" "+-f+")"))},end:function(){n.setAttribute("visibility","")}}))},doPolarRadarAnimation:function(n,t,i,r,u,f){var e=0;n.setAttribute("visibility","hidden");new sf.base.Animation({}).animate(n,{duration:i,delay:r,progress:function(i){t.setAttribute("visibility","visible");i.timeStamp>i.delay&&(n.setAttribute("visibility","visible"),e=(i.timeStamp-i.delay)/i.duration,n.setAttribute("transform","translate("+u+" "+f+") scale("+e+") translate("+-u+" "+-f+")"))},end:function(){n.setAttribute("visibility","visible");n.removeAttribute("transform")}})},templateAnimate:function(n,t,i,r,u,f){new sf.base.Animation({}).animate(n,{duration:i,delay:t,name:r,progress:function(n){f&&f.setAttribute("visibility","visible");n.element.style.visibility="visible"},end:function(n){u?sf.base.remove(n.element):n.element.style.visibility="visible"}})},doDataLabelAnimation:function(n,t,i,r,u,f){for(var s,h,e,l=this.filterCommentElement(n),a=this.filterCommentElement(t),v=this.getElement(r),c=this.getElement(i),y=c?1:a.length,o=0;o<y;o++)c?(c.style.visibility="hidden",this.templateAnimate(c,f,u,"ZoomIn")):(s=+(e=a[o]).getAttribute("x")+ +e.getAttribute("width")/2,h=+e.getAttribute("y")+ +e.getAttribute("height")/2,this.doMarkerAnimate(a[o],v,u,f,s,h),l[o]&&(s=+(e=l[o]).getAttribute("x")+ +e.getAttribute("width")/2,h=+e.getAttribute("y")+ +e.getAttribute("height")/2,this.doMarkerAnimate(l[o],v,u,f,s,h)))},pathAnimation:function(n,t,i,r,u){var s=this,c=this.getElement(n),l;if(!i||null==c)return null;l=300;u&&(l=u);var h,e,a,v=r||c.getAttribute("d"),p=v.split(/(?=[LMCZAQ])/),y=t.split(/(?=[LMCZAQ])/),f=[],o=[];c.setAttribute("d",v);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:l,progress:function(n){h="";p.map(function(t,i){if(f=t.split(" "),o=y[i]?y[i].split(" "):f,h+="Z"===f[0]?"Z ":f[0]+" "+s.linear(n.timeStamp,+f[1],+o[1]-+f[1],n.duration)+" "+s.linear(n.timeStamp,+f[2],+o[2]-+f[2],n.duration)+" ","C"===f[0]||"Q"===f[0])for(e=3,a="Q"===f[0]?4:6;e<a;)h+=s.linear(n.timeStamp,+f[e],+o[e]-+f[e],n.duration)+" "+s.linear(n.timeStamp,+f[++e],+o[e]-+f[e],n.duration)+" ",++e;"A"===f[0]&&(h+="0 0 1 "+s.linear(n.timeStamp,+f[6],+o[6]-+f[6],n.duration)+" "+s.linear(n.timeStamp,+f[7],+o[7]-+f[7],n.duration)+" ")});c.setAttribute("d",h)},end:function(){c.setAttribute("d",t)}})},getPreviousDirection:function(n){var t=this.getElement(n);return t?t.getAttribute("d"):null},getPreviousLocation:function(n,t){var i=this.getElement(n);return{X:i?+i.getAttribute(t+"x"):0,Y:i?+i.getAttribute(t+"y"):0}},animateRectElement:function(n,t,i,r,u){var f=this,e=function(t){n.setAttribute("x",t.x+"");n.setAttribute("y",t.y+"");n.setAttribute("width",t.width+"");n.setAttribute("height",t.height+"")};new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:i,delay:t,progress:function(n){e(new sf.svgbase.Rect(f.linear(n.timeStamp,u.x,r.x-u.x,n.duration),f.linear(n.timeStamp,u.y,r.y-u.y,n.duration),f.linear(n.timeStamp,u.width,r.width-u.width,n.duration),f.linear(n.timeStamp,u.height,r.height-u.height,n.duration)))},end:function(){e(r)}})},animateRedrawElement:function(n,t,i,r,u,f,e,o){var c=this,s,l,h;if(void 0===e&&(e="x"),void 0===o&&(o="y"),s=this.getElement(n),!s)return null;l="DIV"===s.tagName;h=function(n,t){l?(s.style[e]=n+"px",s.style[o]=t+"px"):(s.setAttribute(e,n+""),s.setAttribute(o,t+""))};h(i,r);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(n){h(c.linear(n.timeStamp,i,u-i,n.duration),c.linear(n.timeStamp,r,f-r,n.duration))},end:function(){h(u,f)}})},appendChildElement:function(n,t,i,r,u,f,e,o,s,h,c,l){var p;void 0===r&&(r=!1);void 0===u&&(u="x");void 0===f&&(f="y");void 0===s&&(s=!1);void 0===h&&(h=!1);void 0===c&&(c=null);var a=n.querySelector("#"+t.id)||this.getElement(t.id),v=t,y=l||300;i&&r&&a?(e=e||("DIV"===a.tagName?new sf.svgbase.TooltipLocation(+a.style[u].split("px")[0],+a.style[f].split("px")[0]):new sf.svgbase.TooltipLocation(+a.getAttribute(u),+a.getAttribute(f))),""!==o&&null!==o)?this.pathAnimation(t,t.getAttribute("d"),i,o,y):h&&c?this.animateRectElement(v,0,y,new sf.svgbase.Rect(+a.getAttribute("x"),+a.getAttribute("y"),+a.getAttribute("width"),+a.getAttribute("height")),c):(p="DIV"===v.tagName?new sf.svgbase.TooltipLocation(+v.style[u].split("px")[0],+v.style[f].split("px")[0]):new sf.svgbase.TooltipLocation(+v.getAttribute(u),+v.getAttribute(f)),this.animateRedrawElement(v,y,e,p,u,f)):i&&r&&!a&&s&&this.templateAnimate(v,0,600,"FadeIn")},processAppendChild:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){void 0===h&&(h=!1);void 0===c&&(c="x");void 0===l&&(l="y");void 0===v&&(v=!1);void 0===y&&(y=!1);var w=this.getElement(n),b=this.getElement(t),k=new sf.svgbase.TooltipLocation(i,r),d=new sf.svgbase.Rect(u,f,e,o);this.appendChildElement(w,b,s,h,c,l,k,a,v,y,d,p)},createStyleElement:function(n,t){document.body.appendChild(sf.base.createElement("style",{id:n,innerHTML:t}))},isLassoId:function(n,t){var i=document.elementFromPoint(n,t);return i?i.id:""},doErrorBarAnimation:function(n,t,i,r){var f=this.filterCommentElement(n),e=this.getElement(t),u;if(!f)return null;for(u=1;u<f.length;)f[u].style.visibility="hidden",this.templateAnimate(f[u],i,350,r?"SlideLeftIn":"SlideBottomIn",!1,e),u++},getTemplateSize:function(n){var t=this.getElement(n);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},resizeBound:{},resize:{},chartResize:function(n){var t=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout(function(){for(var o,f,r,u,s=n.length,e={},i=0;i<s;i++)f=n[i].dotnetref,(r=n[i].id).indexOf("_stockChart_")<0&&document.getElementById(r+"_svg")&&((u=document.getElementById(r+"_svg")).style.display="none");for(i=0;i<s;i++)f=n[i].dotnetref,(r=n[i].id).indexOf("_stockChart_")<0&&document.getElementById(r)&&(u=document.getElementById(r),e[r]={Dotnetref:f,Width:u.clientWidth||u.offsetWidth,Height:u.clientHeight||u.offsetHeight});for(o in e)f=e[o].Dotnetref,(u=document.getElementById(o+"_svg")).style.display="",f.invokeMethodAsync("OnChartResize",JSON.stringify({Width:e[o].Width,Height:e[o].Height}));clearTimeout(t.resize)},500),!1},getDatalabelTemplateSize:function(n){for(var t,r=[],u=n.length,i=0;i<u;i++)t=this.getElementBoundsById(n[i],!1),r.push({X:t.width,Y:t.height});return JSON.stringify(r)},setSvgDimensions:function(n,t,i){n.setAttribute("width",t);n.setAttribute("height",i)}};return n}()},"./modules/sf-circulargauge.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.CircularGauge=function(){"use strict";var n=function(){function n(n,t,i,r){this.id=n;this.element=t;this.dotNetRef=r;this.options=i;this.element.blazor__instance=this}return n.prototype.render=function(){this.wireEvents()},n.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this);sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this);window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},n.prototype.destroy=function(){this.dotNetRef=null},n.prototype.gaugeOnMouseClick=function(n){var u=["_Text_","_Shape_"],t=n.target.id,i,r,f,e;if(-1!==t.indexOf("Legend")&&this.options.legendToggleVisibility)for(i=0;i<u.length;i++)r=u[i],-1!==t.indexOf(r)&&(f=parseInt(t.split(this.element.id+"_Legend_Axis_")[1].split(r)[0]),e=parseInt(t.split(this.element.id+"_Legend_Axis_")[1].split(r)[1]),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",f,e))},n.prototype.gaugeOnResize=function(){var n=document.getElementById(this.element.id),t,i;n&&(t=n.clientWidth||n.offsetWidth,i=n.clientHeight||n.offsetHeight,this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",event,t,i))},n.prototype.gaugeOnMouseDown=function(n){var e=document.getElementById(this.element.id+"_legend_pagenumber"),r=n.target.id,u=0,f=0,t,i;("touchstart"===n.type?(n.preventDefault(),u=n.touches[0].clientX,f=n.touches[0].clientY):(u=n.pageX,f=n.pageY),this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",u,f),sf.base.isNullOrUndefined(e))||(t=parseInt(e.textContent.split("/")[0],10),r.indexOf(this.element.id+"_legend_pageup")>-1?this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",t-2,t-1):r.indexOf(this.element.id+"_legend_pagedown")>-1&&this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",t,t+1));(this.options.enablePointerDrag||this.options.enableRangeDrag)&&(-1!==event.target.id.indexOf("Pointer")||-1!==event.target.id.indexOf("_Range_"))&&(this.isMouseDown=!0,i=r.replace(this.element.id,"").split("_Axis_")[1],this.dragAxisIndex=+i[0],this.dragElementIndex=+i[i.length-1],-1!==event.target.id.indexOf("Pointer")?(this.isPointerDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,this.dragElementIndex,0,"Pointer")):(this.isRangeDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,0,this.dragElementIndex,"Range")))},n.prototype.gaugeOnMouseMove=function(n){var f,l,r,a,v,y,e,o,t=n.target.id,b,g,nt,tt,it,rt,ut,h,c,w;("touchmove"===n.type?(e=n.touches[0].clientX,o=n.touches[0].clientY):(e=n.clientX,o=n.clientY),-1!==t.indexOf("Legend"))&&(b=document.getElementById(t),this.options.legendToggleVisibility?b.setAttribute("cursor","pointer"):b.setAttribute("cursor","auto"));var k=document.getElementById(this.element.id+"_svg"),s=k.getBoundingClientRect(),i=(document.getElementById(this.element.id+"_AxesCollection").getBoundingClientRect(),this.element.getBoundingClientRect()),ft=o-i.top-Math.max(s.top-i.top,0),et=e-i.left-Math.max(s.left-i.left,0),u=document.getElementById(this.element.id+"_Tooltip"),d=document.getElementById(this.element.id+"_Tooltip_Group"),p=(n.target.parentElement||n.target.parentNode).id;this.options.enableTooltip&&((i={left:Math.abs(i.left-s.left),top:Math.abs(i.top-s.top),width:s.width,height:s.height,x:Math.abs(i.left-s.left),y:Math.abs(i.top-s.top),bottom:0,right:0},-1===t.indexOf("Annotation")&&-1===p.indexOf("Annotation")||sf.base.isNullOrUndefined(this.options.tooltipType)||-1===this.options.tooltipType.indexOf("Annotation"))?null!==u&&(u.style.visibility="hidden"):(g=void 0,-1!==p.indexOf("ContentTemplate")&&(nt=p.split("_ContentTemplate")[0],g=nt[nt.length-1]),tt=document.getElementById(p),l=+(f=tt.id.replace(this.element.id,"").split("_Axis_")[1])[0],r=+(-1===p.indexOf("ContentTemplate")?f[f.length-1]:g),r=isNaN(r)?0:r,a=!1,v=!1,y=!0,it=void 0,null!==d&&(u.style.visibility="visible",null!==u.lastElementChild)&&(rt=this.element.id+"_Tooltip_Annotation_"+r+"_Content",it=document.getElementById(rt),0!==document.querySelectorAll("#"+rt).length&&(it.style.visibility="visible")),ut=tt.getBoundingClientRect().width,this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",e+ut/2,o,l,r,a,v,y,i)));(this.performDragOperation(t,l,r,et,ft,event),this.options.enableTooltip)&&(-1===t.indexOf("_Range_")||sf.base.isNullOrUndefined(this.options.tooltipType)||-1===this.options.tooltipType.indexOf("Range")||this.isMouseDown||(l=+(f=t.replace(this.element.id,"").split("_Axis_")[1])[0],r=+f[f.length-1],a=!0,v=!1,y=!1,h=0,c=0,this.options.showRangeTooltipAtMousePosition?(h=(w=this.getMousePosition(e,o,k)).x,c=w.y):(h=e,c=o),null!==u&&(u.style.visibility="visible"),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",h,c,l,r,a,v,y,i)),-1!==t.indexOf("Pointer")||-1!==t.indexOf("_Range_")||-1!==t.indexOf("Annotation")||-1!==p.indexOf("Annotation")&&-1===t.indexOf("Annotation")?-1!==t.indexOf("Pointer")&&(sf.base.isNullOrUndefined(this.options.tooltipType)||-1!==this.options.tooltipType.indexOf("Pointer"))&&(l=+(f=t.replace(this.element.id,"").split("_Axis_")[1])[0],r=+f[f.length-1],a=!1,v=!0,y=!1,h=0,c=0,this.options.showPointerTooltipAtMousePosition?(h=(w=this.getMousePosition(e,o,k)).x,c=w.y):(h=e,c=o),null!==u&&(u.style.visibility="visible"),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",h,c,l,r,a,v,y,i)):(null!==u||d&&d.childElementCount>0)&&!this.isPointerDrag&&(u.style.visibility="hidden"))},n.prototype.performDragOperation=function(n,t,i,r,u,f){this.options.enablePointerDrag&&-1!==n.indexOf("Pointer")||this.options.enableRangeDrag&&-1!==n.indexOf("_Range_")||this.isMouseDown?this.isMouseDown?(f.preventDefault(),null!==t&&null!==i&&this.isMouseDown&&(this.isRangeDrag&&this.options.enableRangeDrag?(document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerRangeDragEvent",r,u,this.dragAxisIndex,this.dragElementIndex)):this.isPointerDrag&&this.options.enablePointerDrag&&(document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDragEvent",r,u,this.dragAxisIndex,this.dragElementIndex)))):document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer"):document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto")},n.prototype.gaugeOnMouseEnd=function(n){var u,t=0,i=0,r;"touchend"===n.type?(r=n,t=r.changedTouches[0].pageX,i=r.changedTouches[0].pageY,u=!0):(t=n.clientX,i=n.clientY);u||"mouseup"==n.type?this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",t,i):this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",t,i);this.isPointerDrag?this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,this.dragElementIndex,0,"Pointer"):this.isRangeDrag&&this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,0,this.dragElementIndex,"Range");this.isMouseDown=!1;this.isPointerDrag=!1;this.isRangeDrag=!1},n.prototype.animationRangeProcess=function(n,t,i,r){var u,f=this;new sf.base.Animation({}).animate(n,{duration:t.duration,progress:function(e){var h,o,s;u=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle;n.style.animation="None";t.roundRadius<=0&&(h=-u*Math.cos(e.timeStamp/t.duration*(Math.PI/2))+u+t.startAngle);t.isClockWise?t.roundRadius>0?(o=-u*Math.cos(e.timeStamp/t.duration*(Math.PI/2))+u+Math.floor(t.minimumAngle),s=-u*Math.cos(e.timeStamp/t.duration*(Math.PI/2))+u+Math.floor(t.minimumAngle+t.roundRadius/2),sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimateRoundedRangeBar",t.midPointX,t.midPointY,Math.floor(t.minimumAngle),o+.0001,t.oldStart,s+.0001,t.radius,t.pointerWidth,r,i,t.roundRadius)):sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimateRangeBar",t.midPointX,t.midPointY,h,t.radius,t.innerRadius,t.minimumAngle,i,r):t.roundRadius>0?(o=-u*Math.cos(e.timeStamp/t.duration*(Math.PI/2))+u+Math.floor(t.oldStart),s=-u*Math.cos(e.timeStamp/t.duration*(Math.PI/2))+u+Math.floor(t.minimumAngle-t.roundRadius-t.roundRadius/2),sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimateRoundedRangeBar",t.midPointX,t.midPointY,o,Math.floor(t.oldStart)+.0001,s,Math.floor(t.oldStart+t.roundRadius/2),t.radius,t.pointerWidth,r,i,t.roundRadius)):sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimateRangeBar",t.midPointX,t.midPointY,t.minimumAngle,t.radius,t.innerRadius,h,i,r)},end:function(){sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimatePointer",i,r,t.end)}})},n.prototype.animationProcess=function(n,t,i,r){var u,f=this;new sf.base.Animation({}).animate(n,{duration:t.duration,progress:function(i){u=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle;n.style.animation="None";n.setAttribute("transform","rotate("+(-u*Math.cos(i.timeStamp/i.duration*(Math.PI/2))+u+t.startAngle)+","+t.midPointX+","+t.midPointY+")")},end:function(){sf.base.isNullOrUndefined(f.dotNetRef)||f.dotNetRef.invokeMethodAsync("AnimatePointer",i,r,t.end)}})},n.prototype.pointerAnimation=function(n,t){for(var u,i=document.getElementById(n),f=i.id.replace(this.element.id,"").split("_Axis_")[1],e=+f[0],o=+f[f.length-1],s=sf.base.Browser.isIE?i.childNodes.length:i.childElementCount,r=0;r<s;r++)u=sf.base.Browser.isIE?i.childNodes[r]:i.children[r],"#comment"!==u.nodeName&&("RangeBar"===t.pointerType?this.animationRangeProcess(u,t,e,o):this.animationProcess(u,t,e,o))},n.prototype.getMousePosition=function(n,t,i){var r=i.getBoundingClientRect(),u=i.ownerDocument.defaultView.pageXOffset,f=i.ownerDocument.defaultView.pageYOffset,e=i.ownerDocument.documentElement.clientTop,o=i.ownerDocument.documentElement.clientLeft;return{x:n-(r.left+u-o),y:t-(r.top+f-e)}},n}();return{initialize:function(t,i,r,u){return new n(t.id,t,i,r).render(),u&&this.getContainerSize(t.id,r),sf.base.Browser.isIE},getContainerSize:function(n,t){var i=document.getElementById(n),r=i.clientWidth,u=i.clientHeight;t.invokeMethodAsync("GetContainerSize",r,u)},animationProcess:function(n,t,i){sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.pointerAnimation(i,t)},setPointerDragStatus:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.enablePointerDrag=t)},setRangeDragStatus:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.enableRangeDrag=t)},setLegendToggle:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.legendToggleVisibility=t)},getElementBounds:function(n){var i=document.getElementById(n),t;return i?(t=i.getBoundingClientRect(),{width:t.width,height:t.height,top:t.top,bottom:t.bottom,left:t.left,right:t.right}):null},dispose:function(n){sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy()}}}()},"./modules/sf-colorpicker.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.ColorPicker=function(){"use strict";var n=function(){function n(n,t,i){this.element=n;this.dotnetRef=t;this.element.blazor__instance=this;i&&(this.addScrollEvents(!0),this.setPaletteWidth(this.element.querySelector(".e-container"),!1))}return n.prototype.getOffset=function(n){var i=n.querySelector(".e-hsv-container");if(!i)return{IsDevice:sf.base.Browser.isDevice};var t=i.getBoundingClientRect(),r=i.querySelector(".e-hsv-color"),u=i.querySelector(".e-handler");return u&&u.focus(),{Left:t.left,Top:t.top,Width:t.width,Height:t.height,Right:t.right,ClientLeft:r.offsetLeft,ClientTop:r.offsetTop,ClientWidth:r.offsetWidth,ClientHeight:r.offsetHeight,IsDevice:sf.base.Browser.isDevice}},n.prototype.setOffset=function(n,t){var i=this.getOffset(n);t&&!sf.base.Browser.isDevice&&(this.setZIndex(this.element,t,".e-split-colorpicker"),this.setZIndex(this.element,t,".e-dropdown-btn"));i&&this.dotnetRef.invokeMethodAsync("SetOffset",i)},n.prototype.setZIndex=function(n,t,i){var r=n.querySelector(i);r&&(r.style.zIndex=t+1+"")},n.prototype.setPaletteWidth=function(n,t,i){var r,e,u,f;sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(i)&&(r=n.querySelector(".e-colorpicker.e-modal"),r&&(r.style.zIndex=i-1+"",document.body.insertBefore(r,n.parentElement),r.style.display=""));n.querySelector(".e-hsv-container")?n.style.width="":(e=parseInt(getComputedStyle(n).borderBottomWidth,10),n.style.width=n.children[0].offsetWidth+e+e+"px",u=n.querySelector(".e-selected-value"),u&&(u.style.width="100%",(u=n.querySelector(".e-switch-ctrl-btn"))&&(u.style.width="100%")));t&&(f=this.element.querySelector(".sf-colorpicker"),f&&!sf.base.isNullOrUndefined(f.blazor__instance)&&f.blazor__instance.setPosition(!0))},n.prototype.scrollHandler=function(n){this.element.parentElement?this.setOffset(this.element):sf.base.EventHandler.remove(n.target,"scroll",this.scrollHandler)},n.prototype.addScrollEvents=function(n){for(var r,t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++)r=i[t],n?sf.base.EventHandler.add(r,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(r,"scroll",this.scrollHandler)},n.prototype.focusIn=function(n,t){if(t){var i=n.querySelector(".e-container");i&&(i.classList.contains("e-color-palette")?this.setFocus(".e-palette"):this.setFocus(".e-handler"))}else this.setFocus(".e-split-colorpicker")},n.prototype.setFocus=function(n){var t=this.element.querySelector(n);t&&t.focus()},n.prototype.paletteKeyDown=function(n,t){var s=n.target;if(s.classList.contains("e-palette")){var r,e,f,i=[].slice.call(sf.base.selectAll(".e-tile",s)),u=i.filter(function(n){return n.classList.contains("e-selected")}).pop(),o=s.parentElement;switch(!n.altKey&&n.keyCode){case 39:n.preventDefault();f=(r=u?i[this.tilePosition(i,u,t?-1:1)]:i[t?i.length-1:0]).getAttribute("aria-label");this.keySelectionChanges(r,o,f);break;case 37:n.preventDefault();f=(r=u?i[this.tilePosition(i,u,t?1:-1)]:i[t?0:i.length-1]).getAttribute("aria-label");this.keySelectionChanges(r,o,f);break;case 38:n.preventDefault();f=(r=i[e=u?this.tilePosition(i,u,-10):0]?i[e]:i[e-10]).getAttribute("aria-label");this.keySelectionChanges(r,o,f);break;case 40:n.preventDefault();i[e=u?this.tilePosition(i,u,10):i.length-1]?r=i[e]:(e%=i.length,r=i[e+=i[i.length-1].parentElement.childElementCount]);f=r.getAttribute("aria-label");this.keySelectionChanges(r,o,f);break;case 13:(n.preventDefault(),u)&&(u.getAttribute("aria-label"),this.dotnetRef.invokeMethodAsync("Close"))}}},n.prototype.tilePosition=function(n,t,i){var u=(n=Array.prototype.slice.call(n)).length,f=10-n[u-1].parentElement.childElementCount,r=n.indexOf(t);return(r+=i)<0?r+=u+f:r%=u+f,r},n.prototype.keySelectionChanges=function(n,t,i){this.removeTileSelection(t);this.addTileSelection(n);this.dotnetRef.invokeMethodAsync("Click",i)},n.prototype.removeTileSelection=function(n){[].slice.call(sf.base.selectAll(".e-selected",n.children[0])).forEach(function(n){n.classList.remove("e-selected");n.setAttribute("aria-selected","false")})},n.prototype.addTileSelection=function(n){n.classList.add("e-selected");n.setAttribute("aria-selected","true")},n}();return{initialize:function(t,i,r){return sf.base.isNullOrUndefined(t)?null:(new n(t,i,r),t.blazor__instance.getOffset(t))},getOffset:function(n,t){return sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||sf.base.isNullOrUndefined(t)?null:(n.blazor__instance.setPaletteWidth(t,!0),n.blazor__instance.getOffset(t))},focusIn:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.focusIn(n,t)},destroy:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.addScrollEvents(!1)}}}()},"./modules/sf-contextmenu.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.ContextMenu=function(){"use strict";function t(n,i,r,u){void 0===u&&(u=0);var f=n.children[i];return u===n.childElementCount?-1:((f.classList.contains("e-separator")||f.classList.contains("e-disabled")||f.classList.contains("e-menu-hide"))&&(i=r?i===n.childElementCount-1?0:i+1:0===i?n.childElementCount-1:i-1,u++),((f=n.children[i]).classList.contains("e-separator")||f.classList.contains("e-disabled")||f.classList.contains("e-menu-hide"))&&(i=t(n,i,r)),i)}var n="e-menu-parent",i="CloseMenuAsync",r=function(){function r(n,t,i,r,u){this.element=n;this.target=t;this.filter=i;this.showOn=r;this.dotnetRef=u;this.element.blazor__instance=this;this.addContextMenuEvent();this.addEventListener()}return r.prototype.addContextMenuEvent=function(n){var t,i,r,c,o,u,s,l,f,e,h,a;if((void 0===n&&(n=!0),this.target)&&(i=sf.base.selectAll(this.target),i.length)){for(r=0,c=i.length;r<c;r++)(t=i[r],n)?sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,this.showOn,this.cmenuHandler,this):sf.base.Browser.isIos?(o=sf.base.getInstance(t,sf.base.Touch),o&&o.destroy()):sf.base.EventHandler.remove(t,this.showOn,this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),n)for(sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this),u=0,s=sf.popups.getScrollableParent(this.targetElement);u<s.length;u++)l=s[u],sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this);else{for(f=void 0,this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),f=sf.popups.getScrollableParent(this.targetElement)):f=sf.popups.getScrollableParent(t),e=0,h=f;e<h.length;e++)a=h[e],sf.base.EventHandler.remove(a,"scroll",this.scrollHandler);this.targetElement=null}}},r.prototype.scrollHandler=function(){sf.base.select("."+n,this.element)&&this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1)},r.prototype.touchHandler=function(n){this.cmenuHandler(n.originalEvent)},r.prototype.keyDownHandler=function(i){var r=i.target.classList;(r.contains("e-menu-item")||r.contains(n))&&i.preventDefault(),function(n,i,r,u){var o,l;if(40===r||38===r){var f=void 0,e=void 0,s=void 0;i.classList.contains("e-menu-parent")?((s=(e=i).querySelector(".e-menu-item.e-focused"))?(f=Array.prototype.indexOf.call(e.children,s),f=40===r?f===e.childElementCount-1?0:f+1:0===f?e.childElementCount-1:f-1):f=0,f=t(e,f,40===r)):i.classList.contains("e-menu-item")&&(s=(e=i.parentElement).querySelector(".e-menu-item.e-focused"),f=Array.prototype.indexOf.call(e.children,s||i),f=t(e,f=40===r?f===e.childElementCount-1?0:f+1:0===f?e.childElementCount-1:f-1,40===r));e&&-1!==f&&e.children[f].focus()}else if(((n.classList.contains("e-rtl")?39===r:37===r)||27===r||13===r&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){o=void 0;u&&(o=sf.base.select(u));e=i.classList.contains("e-ul")?i:i.parentElement;var c=sf.base.closest(e,".e-menu-vscroll"),h=void 0,a=c?c.previousElementSibling:e.previousElementSibling;!o||a&&13!==r?(l=sf.base.closest(e,".e-hamburger"),h=l?sf.base.select(".e-menu-item.e-selected",l):sf.base.select(".e-menu-item.e-selected",a)):(h=sf.base.select(".e-menu-item.e-selected",o),(c=sf.base.select(".e-menu-vscroll",n))&&o.blazor__instance.destroyScroll("none"));h&&h.focus()}}(this.element,i.target,i.keyCode,this.menuId)},r.prototype.cmenuHandler=function(n){var u,f;if(this.filter){for(var i=!1,r=this.filter.split(" "),t=0,e=r.length;t<e;t++)if(sf.base.closest(n.target,r[t])){i=!0;break}if(!i)return}n.preventDefault();u=n.changedTouches?n.changedTouches[0].clientX:n.clientX;f=n.changedTouches?n.changedTouches[0].clientY:n.clientY;this.dotnetRef.invokeMethodAsync("OpenContextMenuAsync",Math.ceil(u),Math.ceil(f))},r.prototype.contextMenuPosition=function(n,t,i,r,u){var f=this.hideMenu(!0),o,e,s,h;if(f){if(this.subMenuOpen=!1,this.setBlankIconStyle(f,i),o=f.getBoundingClientRect(),e=this.getMenuWidth(f,o.width,i),r&&sf.base.Browser.isDevice)return f.style.width=Math.ceil(e)+"px",void(f.style.visibility="");u&&(t+o.height>document.documentElement.clientHeight&&(s=document.documentElement.clientHeight-o.height-20,s>document.documentElement.clientTop&&(t=s)),n+e>document.documentElement.clientWidth&&(h=document.documentElement.clientWidth-e-20,h>document.documentElement.clientLeft&&(n=h)));this.element.style.top=Math.ceil(t+1)+"px";this.element.style.left=Math.ceil(n+1)+"px";f.style.width=Math.ceil(e)+"px";this.element.style.zIndex=sf.popups.getZindexPartial(this.element).toString();f.style.visibility="";f.focus()}},r.prototype.setBlankIconStyle=function(n,t){var o=[].slice.call(n.getElementsByClassName("e-blankicon")),r=t?{padding:"paddingRight",cssSelector:"padding-right",margin:"marginLeft"}:{padding:"paddingLeft",cssSelector:"padding-left",margin:"marginRight"},f,e,i,u,s;([].slice.call(n.querySelectorAll('.e-menu-item[style*="'+r.cssSelector+'"]:not(.e-blankicon)')).forEach(function(n){n.style[r.padding]=""}),o.length)&&(f=n.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),e=f.querySelector(".e-menu-icon"),e&&(i=getComputedStyle(e),u=parseInt(i.fontSize,10),parseInt(i.width,10)&&parseInt(i.width,10)>u&&(u=parseInt(i.width,10)),s=u+parseInt(i[r.margin],10)+parseInt(getComputedStyle(f)[r.padding],10)+"px",o.forEach(function(n){n.style[r.padding]=s})))},r.prototype.getMenuWidth=function(n,t,i){var r=n.getElementsByClassName("e-caret")[0];return r&&(t+=parseInt(getComputedStyle(r)[i?"marginRight":"marginLeft"],10)),t<120?120:t},r.prototype.addEventListener=function(){this.delegateMouseDownHandler=this.mouseDownHandler.bind(this);this.delegateMouseOverHandler=this.mouseOverHandler.bind(this);sf.base.EventHandler.add(document,"mousedown touchstart",this.delegateMouseDownHandler,this);sf.base.EventHandler.add(document,"mouseover",this.delegateMouseOverHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this)},r.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown touchstart",this.delegateMouseDownHandler);sf.base.EventHandler.remove(document,"mouseover",this.delegateMouseOverHandler);sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},r.prototype.mouseDownHandler=function(t){document.getElementById(this.element.id)?sf.base.closest(t.target,"#"+this.element.id)||!sf.base.isNullOrUndefined(this.menuId)&&sf.base.closest(t.target,this.menuId)||!sf.base.select("."+n,this.element)||this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1):this.removeEventListener()},r.prototype.mouseOverHandler=function(t){var r,u,f,e,o,s;if(document.getElementById(this.element.id)){if(r=t.target,u=[].slice.call(sf.base.selectAll("."+n,this.element)),u.length){if(f=sf.base.closest(r,".e-scroll-nav"),this.subMenuOpen&&(u.length>1||!sf.base.isNullOrUndefined(this.menuId)&&!f)){if(!sf.base.closest(r,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(r,this.menuId))||f){if(e=1,!sf.base.isNullOrUndefined(this.menuId)&&(e=0,f&&(e=u.indexOf(sf.base.select("."+n,f.parentElement))+1)===u.length))return;this.dotnetRef.invokeMethodAsync(i,e,!1,!0,!1);sf.base.isNullOrUndefined(this.menuId)||sf.base.closest(r,".e-scroll-nav")||this.destroyMenuScroll(null)}!sf.base.isNullOrUndefined(this.menuId)&&(sf.base.closest(r,"#"+this.element.id)||sf.base.closest(r,this.menuId))&&sf.base.closest(r,".e-menu-item")&&!sf.base.closest(r,".e-selected")&&this.destroyMenuScroll(sf.base.closest(r,"."+n))}this.openAsMenu||(o=document.activeElement,!sf.base.closest(o,"#"+this.element.id)&&u.length&&"BODY"==o.tagName&&(s=this.getLastMenu(),s&&s.focus()))}}else this.removeEventListener()},r.prototype.destroyMenuScroll=function(n){var t,i;sf.base.select(".e-menu-vscroll",this.element)&&(t=sf.base.select(this.menuId),t&&(i=t.blazor__instance,sf.base.isNullOrUndefined(i)||i.destroyScroll("none",n)))},r.prototype.hideMenu=function(t){var i,r;if(t){if(!(i=sf.base.select("."+n,this.element))||sf.base.isNullOrUndefined(this.element.parentElement))return null;this.element.parentElement!==document.body&&document.body.appendChild(this.element)}else{if(r=sf.base.selectAll("."+n,this.element),r.length<2)return null;i=r[r.length-1]}return i.style.width="",i.style.visibility="hidden",i.classList.remove("e-transparent"),i},r.prototype.subMenuPosition=function(t,i,r,u,f){var c,k,l,s,a,v,y,p,w;if(t){var b=sf.base.selectAll("."+n,this.element),e=b[b.length-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),h=this.element.getBoundingClientRect(),o=t.classList.contains(n)?t:sf.base.select("."+n,t);this.setBlankIconStyle(o,i);l=o.getBoundingClientRect();s=this.getMenuWidth(o,l.width,i);i?(k=parseInt(getComputedStyle(o).borderWidth,10),c=e.left-s-h.left):c=e.right-h.left;a=e.top-h.top;i?e.left-k-s<document.documentElement.clientLeft&&e.right+s<document.documentElement.clientWidth&&(c=e.right-h.left):e.right+s>document.documentElement.clientWidth&&(v=e.left-s,v>document.documentElement.clientLeft&&(c=v-h.left));y=f||l.height;e.top+y>document.documentElement.clientHeight&&(p=document.documentElement.clientHeight-y-20,p>document.documentElement.clientTop&&(a=p-h.top));this.subMenuOpen=!r;t.style.left=Math.ceil(c)+"px";t.style.top=Math.ceil(a)+"px";t.style.width=Math.ceil(s)+"px";o.style.visibility="";w=o.querySelector(".e-menu-item.e-focused");w?w.focus():o.focus();u&&(this.openAsMenu=!0)}},r.prototype.getLastMenu=function(){var t=sf.base.selectAll("."+n,this.element);return t.length?t[t.length-1]:null},r.prototype.onPropertyChanged=function(n,t){switch(n){case"Target":this.addContextMenuEvent(!1);this.target=t;this.addContextMenuEvent();break;case"Filter":this.filter=t;break;case"ShowOn":this.addContextMenuEvent(!1);this.showOn=t;this.addContextMenuEvent()}},r.prototype.destroy=function(n){this.removeEventListener();this.addContextMenuEvent(!1);n&&n.parentElement&&n.previousElementSibling!==this.element&&n.parentElement.insertBefore(this.element,n);n&&n.parentElement||!this.element.parentElement||this.element.parentElement!==document.body||document.body.removeChild(this.element)},r.prototype.updateProperty=function(n,t){t&&(this.menuId="#"+t.id);this.subMenuOpen=!n},r}();return{initialize:function(n,t,i,u,f){sf.base.isNullOrUndefined(n)||new r(n,t,i,u,f)},contextMenuPosition:function(n,t,i,r,u,f){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.contextMenuPosition(t,i,r,u,f)},subMenuPosition:function(n,t,i,r){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var u=n.blazor__instance.hideMenu();n.blazor__instance.subMenuPosition(u,t,i,r)}},onPropertyChanged:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.onPropertyChanged(t,i)},destroy:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy(t)}}}()},"./modules/sf-dashboard-layout.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.DashboardLayout=function(){"use strict";var n=function(){function n(n,t){this.cellAspectRatio=1;this.mOffX=0;this.mOffY=0;this.maxTop=9999;this.maxRows=100;this.mouseX=0;this.mouseY=0;this.minTop=0;this.minLeft=0;this.allowPushing=!0;this.allowResizing=!1;this.panelElements=[];this.renderedElement=[];this.allowDragging=!1;this.isRenderComplete=!1;this.allowFloating=!1;this.overlapElement=[];this.panelsSizeY=0;this.shouldRestrict=!1;this.overlapElementClone=[];this.addPanelCalled=!1;this.rows=0;this.cellSpacing=[];this.resizeCalled=!1;this.movePanelCalled=!1;this.isResizing=!1;this.resizeTimeCount=0;this.isChanged=!1;this.changedId=[];this.element=n;this.element.blazorInstances=this;this.dotnetRef=t}return n.prototype.preRender=function(n){this.dragCollection=[];this.renderedElement=[];this.overlapSubElementClone=[];this.panels=[];this.sortedArray=[];this.allItems=[];this.oldRowCol={};this.cellSpacing=[];this.checkCollision=[];this.cloneObject={};this.maxColumnValue=this.columns;this.mainElement=null;n&&this.getProperty(n);this.isMediaQuery=this.checkMediaQuery();this.dotnetRef.invokeMethodAsync("CalculateSize",this.calculateCellSize(),this.isMediaQuery,!1,this.contentHeight());this.calculateCellSizeValue()},n.prototype.initialize=function(n){this.preRender(n);sf.base.isNullOrUndefined(this.panels)&&(this.panels=[]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)this.panelElements.push(this.element.querySelectorAll(".e-panel")[t]);this.panelsInitialModel=this.cloneModels(this.panels);this.renderDashBoardCells(this.panels);!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelElements);this.checkColumnValue=this.maxColumnValue;this.isRenderComplete=!0;this.bindEvents()},n.prototype.clearPanelElements=function(){this.panelElements=[]},n.prototype.calculateCellSize=function(){return this.cellSizeValue=[],this.cellSizeValue[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSizeValue},n.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},n.prototype.getProperty=function(n){this.mediaQuery=n.MediaQuery;this.allowDragging=n.AllowDragging;this.columns=n.Columns;this.allowFloating=n.AllowFloating;this.rows=n.MaxRowValue;this.cellSpacing=n.CellSpacing;this.cellAspectRatio=n.CellAspectRatio;this.allowResizing=n.AllowResizing;this.panels=n.Panels;this.draggableHandle=n.DraggableHandle},n.prototype.movePanel=function(n,t,i){this.movePanelCalled=!0;this.panelsInitialModel=this.cloneModels(this.panels);var f=this.getCellInstance(n),r=document.getElementById(n),u=this.getCellInstance(r.id);this.mainElement=r;this.startRow=u.row;this.startCol=u.col;this.updatePanelPosition(u.id,i,t);this.updateOldRowColumn();this.updatePanelLayout(r,f);this.updatePanels();this.updateCloneArrayObject();this.mainElement=null;this.allowFloating&&this.moveItemsUpwards();this.movePanelCalled=!1;this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},n.prototype.removePanel=function(n){this.panelsSizeY=0;for(var t=this.renderedElement.length-1;t>=0;t--)if(this.renderedElement[t].id===n){this.renderedElement.splice(t,1);break}for(t=0;t<this.panelElements.length;t++)this.panelElements[t].id===n&&this.panelElements.splice(t,1),this.panels[t].id===n&&(this.panels.splice(t,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels();this.updateCloneArrayObject();this.panelsInitialModel=this.cloneModels(this.panels)},n.prototype.renderDashBoardCells=function(n){var t,i,u,r;if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0){for(this.updateOldRowColumn(),t=0;t<this.panels.length;t++)(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX)&&(i=this.columns-this.panels[t].sizeX,this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)),this.renderedElement.push(this.panelElements[t]),u=this.renderCell(n[t]),this.updatePanelLayout(u,this.panels[t]);this.updatePanels();this.updateCloneArrayObject();r=this.checkForChanges();r.length>0&&this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",r)}},n.prototype.resizePanel=function(n,t,i){var u=this.getCellInstance(n),r;this.resizeCalled=!0;r=document.getElementById(n);this.updatePanelSize(u.id,t,i);this.mainElement=r;this.updatePanelLayout(r,u);this.updatePanels();this.resizeCalled=!1;this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},n.prototype.removeAll=function(){this.removeAllCalled=!0;for(var n=0;n<this.panelElements.length;n++)this.panelElements.splice(n,1);for(n=this.renderedElement.length-1;n>=0;n--)this.renderedElement.splice(n,1);this.rows=0;this.sortedPanel();this.sortedArray=[];this.overlapElementClone=[];this.overlapElement=[];this.overlapSubElementClone=[];this.panelElements=[];this.oldRowCol={};this.cloneObject={};this.panels=[];this.updateCloneArrayObject();this.removeAllCalled=!1},n.prototype.onPropertyChange=function(n){var t,i;if(n.AllowDragging===this.allowDragging&&n.DraggableHandle==this.draggableHandle||(this.allowDragging=n.AllowDragging,this.draggableHandle=n.DraggableHandle,this.checkDragging(this.dragCollection)),n.AllowResizing!==this.allowResizing&&(this.allowResizing=n.AllowResizing),n.AllowFloating!==this.allowFloating)this.allowFloating=n.AllowFloating,this.moveItemsUpwards(),this.updatePanels(),this.updateOldRowColumn(),this.updateCloneArrayObject();else if(n.Columns!==this.columns){for(this.columns=n.Columns,this.calculateCellSizeValue(),t=0;t<this.panels.length;t++)(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX)&&(i=this.columns-this.panels[t].sizeX,this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)),this.updatePanelLayout(document.getElementById(this.panels[t].id),this.panels[t]);this.renderDashBoardCells(this.panels);this.updatePanels();this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)}this.getProperty(n)},n.prototype.updatePanelLayout=function(n,t){var e=this,i,f,r,u;if(this.collisionChecker={},i=[],f=[],(i=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,n)).length>0)if(i=this.updatedModels(i,t,n),!sf.base.isNullOrUndefined(this.startRow)&&this.checkForSwapping(i,n))this.swapItems(i,n,t);else for(r=0;r<i.length;r++)if(u=this.getCellInstance(i[r].id),this.checkingElement=i[r],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(u.row,u.col,u.sizeY,u.sizeX,n)&&!sf.base.isNullOrUndefined(this.spacedColumnValue)){if(this.updatePanelPosition(u.id,this.spacedColumnValue,this.spacedRowValue),this.oldRowCol[i[r].id]={row:this.spacedRowValue,col:this.spacedColumnValue},i[r].setAttribute("data-row",this.spacedRowValue.toString()),i[r].setAttribute("data-col",this.spacedColumnValue.toString()),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,r<i.length)continue}else f.push(i[r]);f.length>0&&(f.forEach(function(n){-1===e.overlapElement.indexOf(n)&&e.overlapElement.push(n)}),this.overlapElement&&-1!==this.overlapElement.indexOf(n)&&this.overlapElement.splice(this.overlapElement.indexOf(n),1),f.length>0&&(this.updateRowColumn(t.row,this.overlapElement,n),this.checkForCompletePushing()));this.isSubValue||this.sortedPanel()},n.prototype.addPanel=function(n){var t,i,r;if(this.panelsSizeY=0,n.minSizeX||(n.minSizeX=1),n.minSizeY||(n.minSizeY=1),this.panels.push(n),t=this.renderCell(n),this.panelElements.push(t),this.renderedElement.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.oldRowCol[n.id]={row:n.row,col:n.col},this.cloneObject[n.id]={row:n.row,col:n.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",t),this.addPanelCalled=!0,this.checkMediaQuery()||(this.mainElement=t,this.checkCollision||(this.checkCollision=[]),this.updatePanelLayout(t,n)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(n.id)]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(i=0;i<t.querySelectorAll(".e-resize").length;i++)r="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown",sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],r,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],"touchstart",this.touchDownResizeHandler,this);this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},n.prototype.checkForSwapping=function(n,t){var f,e,o,s,c,i;if(!this.mainElement||0===n.length||(e=parseInt(n[0].getAttribute("data-row"),10),this.startRow<e?f=1:this.startRow>e&&(f=0),!this.swapAvailability(n,t)))return!1;for(o=!1,s=0;s<n.length;s++)if(n.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(c=0===f?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,i=0;i<n.length;i++){var r=this.getCellInstance(n[i].id),h=this.getCellInstance(t.id),u=[];if(1===r.sizeY&&-1===u.indexOf(n[i]))u.push(n[i]);else if(r.sizeY>1&&-1===u.indexOf(n[i]))if(1===f&&h.row===this.cloneObject[r.id].row+r.sizeY-1)u.push(n[i]);else{if(0!==f||h.row!==this.cloneObject[r.id].row)return!1;u.push(n[i])}if(r.sizeY<=h.sizeY&&-1===u.indexOf(n[i])&&u.push(n[i]),u.push(this.mainElement),this.collisions(c,r.col,r.sizeX,r.sizeY,u).length>0)return!1;i===n.length-1&&(o=!0)}return o},n.prototype.swapAvailability=function(n,t){for(var r,u,f,e=!0,o=this.getCellInstance(t.id),i=0;i<n.length;i++)for(r=this.getCellInstance(n[i].id),u=1;u<o.sizeY;u++)if(f=[],f.push(t),f.push(n[i]),this.collisions(o.row+u,r.col,r.sizeX,r.sizeY,f).length>0)return e=!1,!1;return e},n.prototype.swapItems=function(n,t,i){var o,r=this,s=[],e,h,c,u,f;for(s.push(t),e=this.getCellInstance(n[0].id).row,this.startRow<e?o=1:this.startRow>e&&(o=0),h=0===o?e+i.sizeY:this.startRow,this.movePanelCalled||(c=this.getCellInstance(n[0].id),this.updatePanelPosition(i.id,i.col,0===o?e:h+c.sizeY)),u=0;u<n.length;u++)s.push(n[u]),this.updatePanelPosition(n[u].id,this.getCellInstance(n[u].id).col,h);for(this.updatePanelPosition(t.id,this.getCellInstance(t.id).col,i.row),this.setPanelPosition(this.shadowEle,i.row,i.col),f=0;f<this.panels.length;f++)this.oldRowCol[this.panels[f].id]={row:this.panels[f].row,col:this.panels[f].col};this.startRow=i.row;this.updateOldRowColumn();s.forEach(function(n){var i,t,u;for(r.cloneObject[n.id]=r.oldRowCol[n.id],i=r.getCellInstance(n.id),t=0;t<r.sortedArray.length;t++)if(r.sortedArray[t])for(u=0;u<r.sortedArray[t].length;u++)r.sortedArray[t][u]===n&&(r.sortedArray[t][u]=void 0);r.sortedArray[i.row]||(r.sortedArray[i.row]=[]);r.sortedArray[i.row][i.col]=n;r.cloneArray=r.sortedArray})},n.prototype.resetLayout=function(n){var i=this.collisions(n.row,n.col,n.sizeX,n.sizeY,this.mainElement),r,t,u,f;if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return i;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(r=0;r<this.panels.length;r++)t=document.getElementById(this.panels[r].id),t!==this.mainElement&&(u=this.cloneObject[t.id].row,f=this.cloneObject[t.id].col,this.updatePanelPosition(t.id,f,u),t.setAttribute("data-col",f.toString()),t.setAttribute("data-row",u.toString()),this.updateOldRowColumn());return this.sortedArray=this.cloneArray,i=this.collisions(n.row,n.col,n.sizeX,n.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===i.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===n.row&&i.push(this.checkCollision[0]),i},n.prototype.updatedModels=function(n,t,i){var r=this,u=[];return this.mainElement||this.sortedPanel(),n.forEach(function(f){var e,s,o;if(r.checkingElement=f,e=r.getCellInstance(f.id),s=!r.adjustmentAvailable(e.row,e.col,e.sizeY,e.sizeX,i),e.sizeX>1&&s)for(o=e.row;o<t.row+t.sizeY;o++)r.collisions(o,e.col,e.sizeX,e.sizeY,f).forEach(function(t){n.indexOf(t)>=0&&-1===u.indexOf(t)&&u.push(t)})}),u.forEach(function(t){u.indexOf(t)>=0&&n.splice(n.indexOf(t),1)}),n},n.prototype.checkForCompletePushing=function(){for(var t,n=0;n<this.panels.length;n++)this.collisionChecker[this.panels[n].id]&&null!==this.collisionChecker[this.panels[n].id]&&(this.overlapElement=[this.collisionChecker[this.panels[n].id].ele],t=this.panels[n].id,this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle))},n.prototype.updateRowColumn=function(n,t,i){var r,s,f,e,p,w,l,k;if(i){var d=this.getCellInstance(i.id),a=d.sizeY,v=d.row;for(this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement),r=0;r<this.overlapElementClone.length;r++){if(0===this.overlapElementClone.length)return;for(s=0;s<this.overlapElementClone.length;s++)this.collisionChecker[this.overlapElementClone[s].id]={ele:this.overlapElementClone[s],row:n,srcEle:i};var h=v+a,y=this.getCellInstance(this.overlapElementClone[r].id),g=y.sizeY,rt=y.col,nt=y.sizeX,o=void 0,u=void 0;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[r])&&this.overlapSubElementClone.push(this.overlapElementClone[r]),g>1||nt>1){for(f=this.getCellInstance(this.overlapElementClone[r].id),o=f.col,e=document.getElementById(f.id),p=f.row;p<v+a;p++){this.isSubValue=!0;w=this.getCellInstance(f.id);e.setAttribute("data-row",(v+a).toString());this.updatePanelPosition(w.id,w.col,f.row+1);this.updateCollisionChecked(e);this.oldRowCol[e.id]={row:f.row,col:o};var c=this.getCellInstance(e.id),tt=c.row,it=c.col,ut=c.sizeX,ft=c.sizeY,b=[];b.push(e);b.push(i);u=this.collisions(tt,it,ut,ft,b);this.mainElement&&-1!==u.indexOf(this.mainElement)&&u.splice(u.indexOf(this.mainElement),1);this.collisionPanel(u,it,tt,e)}this.isSubValue=!1}else this.addPanelCalled&&(this.addPanelCalled=!1),l=[],l.push(this.overlapElementClone[r]),l.push(i),u=this.collisions(h,rt,nt,g,l),this.mainElement&&-1!==u.indexOf(this.mainElement)&&u.splice(u.indexOf(this.mainElement),1),k=this.getCellInstance(this.overlapElementClone[r].id),o=k.col,this.updatePanelPosition(k.id,o,h),this.updateCollisionChecked(this.overlapElementClone[r]),this.oldRowCol[this.overlapElementClone[r].id]={row:h,col:o},this.collisionPanel(u,o,h,this.overlapElementClone[r])}}},n.prototype.updateCollisionChecked=function(n){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[n.id]=null},n.prototype.collisionPanel=function(n,t,i,r){var s=this,h,o,u;if(n.length>0){for(this.overlapElement=[],this.shouldRestrict=!0,n.forEach(function(n){s.overlapElement.push(n)}),h=this.getCellInstance(r.id).row,o=0;o<this.overlapElement.length;o++)this.updateRowColumn(h,this.overlapElement,r);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(u=0;u<this.overlapSubElementClone.length;u++){var e=this.getCellInstance(this.overlapSubElementClone[u].id),c=e.row,l=e.col,a=e.sizeX,v=e.sizeY,f=this.collisions(c,l,a,v,this.overlapSubElementClone);this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1);f.forEach(function(n){s.overlapElement.push(n)});f.length>0&&this.updateRowColumn(c,this.overlapElement,this.overlapSubElementClone[u])}this.overlapSubElementClone=[]}},n.prototype.collisions=function(n,t,i,r,u){var f,s=[],e,o;for(i&&r||(i=r=1),!u||_instanceof(u,Array)||(u=[u]),e=0;e<r;++e)for(o=0;o<i;++o)(f=this.getPanel(n+e,t+o,u))&&(!u||-1===u.indexOf(document.getElementById(f.id)))&&-1===s.indexOf(document.getElementById(f.id))&&s.push(document.getElementById(f.id));return s},n.prototype.getPanel=function(n,t,i){var f,e,u,o,r,s;for(!i||_instanceof(i,Array)||(i=[i]),f=1;n>-1;){for(e=1,u=t;u>-1;){if(o=this.sortedArray[n],o&&(r=o[u],!sf.base.isNullOrUndefined(r)&&(s=this.getCellInstance(r.id),r&&(!i||-1===i.indexOf(r))&&s.sizeX>=e&&s.sizeY>=f)))return r;++e;--u}--n;++f}return null},n.prototype.renderCell=function(n){return document.getElementById(n.id)},n.prototype.sortedPanel=function(){this.sortedArray=[];for(var n=0,t=this.renderedElement.length;n<t;++n)this.sortItem(this.renderedElement[n])},n.prototype.updatePanels=function(){this.moveItemsUpwards();this.updateOldRowColumn();this.sortedPanel()},n.prototype.sortItem=function(n,t,i){var u,o;this.overlapElement=[];var f=this.getCellInstance(n.id),e=f.col,r=f.row;(this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][e]=n,void 0!==n&&void 0!==t&&void 0!==i)&&(void 0!==this.oldRowCol[n.id]&&null!==this.oldRowCol[n.id].row&&void 0!==this.oldRowCol[n.id].col&&(u=this.sortedArray[this.oldRowCol[n.id].row],sf.base.isNullOrUndefined(u)||this.oldRowCol[n.id]&&u[this.oldRowCol[n.id].col]===n&&(delete u[this.oldRowCol[n.id].col],this.updateOldRowColumn(),this.sortedPanel())),this.oldRowCol[n.id].row=t,this.oldRowCol[n.id].row=i,this.sortedArray[r]||(this.sortedArray[r]=[]),this.sortedArray[r][e]=n,-1===this.allItems.indexOf(n)&&this.allItems.push(n),o=this.getCellInstance(n.id),this.updatePanelPosition(o.id,i,t),this.sortedPanel())},n.prototype.updateOldRowColumn=function(){var n,t,i,r;for(this.oldRowCol={},n=0;n<this.panels.length;n++)t=this.panels[n].id,document.getElementById(t)&&(i=this.panels[n].row,r=this.panels[n].col,this.oldRowCol[this.panels[n].id]={row:i,col:r})},n.prototype.getCellInstance=function(n){for(var i,t=0;t<this.panels.length;t++)if(this.panels[t].id===n){i=this.panels[t];break}return i},n.prototype.getRowElements=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t]);return i},n.prototype.adjustmentAvailable=function(n,t,i,r,u){var s,h,f,p;this.leftAdjustable=void 0;this.rightAdjustable=void 0;var l,a=!1,e=[],o=[];this.topAdjustable=void 0;var v=this.getCellInstance(u.id),y=v.sizeX,c=v.col;if(-1===(o=this.getRowElements(this.collisions(n,0,this.columns,i,[]))).indexOf(u)&&o.push(u),(l=this.leftWardsSpaceChecking(o,t,u)).length>0?(this.leftAdjustable=this.isLeftAdjustable(l,u,n,t,r,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,e=this.rightWardsSpaceChecking(o,t,u),this.rightAdjustable=e.length>0&&this.isRightAdjustable(e,u,n,t,r,i),this.spacedColumnValue!==y+c&&(this.rightAdjustable=!1))):(e=this.rightWardsSpaceChecking(o,t,u),this.rightAdjustable=e.length>0&&this.isRightAdjustable(e,u,n,t,r,i),this.spacedColumnValue!==y+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&n>0)for(s=this.getCellInstance(u.id).row,h=!1,this.startRow!==s&&(h=!0),f=n;f>=0;f--)p=this.getCellInstance(u.id).sizeY>1&&h?this.checkingElement:u,f!==s&&f===s-i&&0===this.collisions(f,t,r,i,p).length&&(h=!1,this.topAdjustable=!0,this.spacedRowValue=sf.base.isNullOrUndefined(this.spacedRowValue)?f:this.spacedRowValue,this.spacedColumnValue=t);return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(a=!0,sf.base.isNullOrUndefined(this.spacedRowValue)&&(this.spacedRowValue=n)),a},n.prototype.updatePanelPosition=function(n,t,i){var r,u;if(this.panels.length>0)for(r=0;r<this.panels.length;r++)this.panels[r].id===n&&(sf.base.isNullOrUndefined(t)||(this.panels[r].col=t,this.panels[r].column=t),sf.base.isNullOrUndefined(i)||(this.panels[r].row=i));this.isRenderComplete&&(u=this.checkForChanges(),this.panelsInitialModel=this.cloneModels(this.panels),u.length>0&&(this.isChanged&&-1===this.changedId.indexOf(n)&&this.changedId.push(n),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",u)))},n.prototype.rightWardsSpaceChecking=function(n,t,i){var e=this,f=[],r=[],u,o;if(n.forEach(function(n){var u=e.getCellInstance(n.id),i=u.col,o=u.sizeX,r;if(t<e.columns&&i>=t)if(o>1)for(r=i;r<i+o;r++)f.push(r);else f.push(i)}),f.length>0)for(u=t+1;u<=this.columns-1;u++)-1===f.indexOf(u)&&u!==t&&-1===r.indexOf(u)&&r.push(u);return o=this.getOccupiedColumns(i),o.forEach(function(n){n>t&&-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1)}),this.getOccupiedColumns(this.checkingElement).forEach(function(n){n>e.getCellInstance(i.id).col&&-1===o.indexOf(n)&&-1===r.indexOf(n)&&r.push(n)}),r=r.sort(function(n,t){return n-t})},n.prototype.isRightAdjustable=function(n,t,i,r,u,f){var e,c,o,s,h;if(1===u&&1===f&&n.length>0)this.spacedColumnValue=n[0],e=!0;else if(u>1&&1===f)e=this.isXSpacingAvailable(n,u);else if(f>1)if(1===u){if(c=void 0,n.length>=1&&(c=!0),c)for(o=0;o<n.length;o++){for(s=this.collisions(i,n[o],u,f,this.checkingElement),h=0;h<s.length;h++)this.getCellInstance(t.id).col!==n[o]&&s.splice(s.indexOf(s[h]),1);if(0===s.length)return e=!0,this.spacedColumnValue=n[o],e;e=!1}}else e=this.replacable(n,u,i,f,t);return e},n.prototype.isXSpacingAvailable=function(n,t){for(var u=!1,r=[],i=0;i<n.length;i++)if(n[i+1]-n[i]==1||n[i+1]-n[i]==-1){if(r.push(n[i]),2===t&&r.push(n[i+1]),i===n.length-2&&(r.push(n[i+1]),r.length>t&&r.splice(-1)),r.length===t)return u=!0,this.spacedColumnValue=r.sort(function(n,t){return n-t})[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),u}else r=[];return u},n.prototype.leftWardsSpaceChecking=function(n,t,i){var e=this,r=[],f=[],u,o;if(n.forEach(function(n){var u=e.getCellInstance(n.id),i=u.col,o=u.sizeX,r;if(t<=e.columns&&i<=t)if(o>1)for(r=i;r<i+o;r++)f.push(r);else f.push(i)}),f.length>0)for(u=0;u<=t;u++)-1===f.indexOf(u)&&u!==t&&-1===r.indexOf(u)&&r.push(u);return o=this.getOccupiedColumns(i),o.forEach(function(n){n<t&&-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1)}),this.getOccupiedColumns(this.checkingElement).forEach(function(n){n<e.getCellInstance(i.id).col&&-1===o.indexOf(n)&&-1===r.indexOf(n)&&r.push(n)}),r=(r=r.sort(function(n,t){return n-t})).reverse()},n.prototype.isLeftAdjustable=function(n,t,i,r,u,f){var e,s,o;if(1===u&&1===f&&n.length>0)this.spacedColumnValue=n[0],e=!0;else if(u>1&&1===f)e=this.isXSpacingAvailable(n,u);else if(f>1)if(1===u){if(s=void 0,n.length>=1&&(s=!0),s)for(o=0;o<n.length;o++){if(0===this.collisions(i,n[o],u,f,this.checkingElement).length)return this.spacedColumnValue=n[o],e=!0;e=!1}}else e=this.replacable(n,u,i,f,t);return e},n.prototype.replacable=function(n,t,i,r,u){for(var f,o,s=[],e=0;e<n.length;e++)if(this.isXSpacingAvailable(n,t)){if(o=[],o.push(this.checkingElement),o.push(u),0===s.length)return f=!0,this.spacedColumnValue=this.spacedColumnValue,f;f=!1}return f},n.prototype.getOccupiedColumns=function(n){for(var i=[],r=this.getCellInstance(n.id),f=r.sizeX,u=r.col,t=u;t<u+f&&t<=this.columns;t++)i.push(t);return i},n.prototype.moveItemsUpwards=function(){var n,u,t,i,f,r;if(this.allowFloating)for(n=0,u=this.sortedArray.length;n<u;++n)if(t=this.sortedArray[n],t)for(i=0,f=t.length;i<f;++i)r=t[i],r&&this.moveItemUpwards(r)},n.prototype.moveItemUpwards=function(n){if(this.allowFloating&&n!==this.mainElement){var r=this.getCellInstance(n.id).col,e=parseInt(n.getAttribute("data-sizeY"),10),o=parseInt(n.getAttribute("data-sizeX"),10),i=null,u=null,t=parseInt(n.getAttribute("data-row"),10)-1,f=this.getCellInstance(n.id);for(t+1!=f.row&&(t=f.row);t>-1;){if(0!==this.collisions(t,r,o,e,n).length)break;i=t;u=r;--t}null!==i&&this.sortItem(n,i,u)}},n.prototype.enableDraggingContent=function(n){for(var r,u,t=this,i=0;i<n.length;i++)r=[".e-resize",".e-drag-restrict"],u=n[i],this.dragobj=new sf.base.Draggable(u,{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:r,dragStart:this.onDraggingStart.bind(this),dragStop:function(n){var i=t.getCellInstance(t.mainElement.id),o,r,e;t.allowPushing&&t.collisions(i.row,i.col,i.sizeX,i.sizeY,t.mainElement).length>0?(t.setHolderPosition(n),t.updatePanelPosition(i.id,i.col,i.row),t.updatePanelLayout(t.mainElement,i)):t.updatePanelPosition(i.id,i.col,i.row);t.mainElement=null;o=t.getPanelBase(n);t.shadowEle&&sf.base.detach(t.shadowEle);sf.base.removeClass([t.element],["e-prevent"]);sf.base.removeClass([n.element],["e-dragging"]);t.shadowEle=null;n.element.classList.remove("e-dragging");var u=t.getRowColumnDragValues(n)[0],f=t.getRowColumnDragValues(n)[1],s=t.getCellInstance(n.element.id);t.allowPushing&&0===t.collisions(u,f,s.sizeX,s.sizeY,document.getElementById(o.id)).length?(t.oldRowCol[n.element.id].row=u,t.oldRowCol[n.element.id].col=f,t.updatePanelPosition(n.element.id,f,u),t.sortedPanel()):(r=t.getCellInstance(n.element.id),t.updatePanelPosition(r.id,r.col,r.row),t.sortedPanel());e=t.getCellInstance(n.element.id);t.setPanelPosition(n.element,e.row,e.col);t.updatePanels();t.updateCloneArrayObject();t.dragStopEventArgs={event:n.event,element:n.element};t.dotnetRef.invokeMethodAsync("UpdateMaximumRow",n.element.id,t.changedId);t.isChanged=!1;t.changedId=[];t.resizeEvents();t.updateDragArea()},drag:function(n){t.draggedEventArgs={event:n.event,element:n.element,target:sf.base.closest(n.target,".e-panel")};t.onDragStart(n)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)},n.prototype.getPanelBase=function(n){for(var i,t=0;t<this.panelElements.length;t++)this.panelElements[t].id===(n.element&&n.element.id||n)&&(i=this.panelElements[t]);return i},n.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray;this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},n.prototype.getRowColumnDragValues=function(n){var t=parseFloat(n.element.style.top),i=parseFloat(n.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(i/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},n.prototype.onDragStart=function(n){var u,e,o,i=o=this.getRowColumnDragValues(n)[1],r=this.getRowColumnDragValues(n)[0],t,f;i<0||r<0||(t=this.getCellInstance(n.element.id),(this.dotnetRef.invokeMethodAsync("SetDragPanelHeight",t.row,t.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.updatePanelPosition(t.id,i,r),u=this.oldRowCol[n.element.id].col,e=this.oldRowCol[n.element.id].row,this.oldRowCol[n.element.id]={row:r,col:i},this.updateOldRowColumn(),(this.startCol!==u||this.startRow!==e)&&(n.element.setAttribute("data-row",r.toString()),n.element.setAttribute("data-col",i.toString()),this.setHolderPosition(n),this.startCol!==u&&(this.startRow=e),this.startRow!==e&&(this.startCol=u),this.allowPushing)))&&(this.mainElement=n.element,f=t,this.checkCollision=this.collisions(f.row,f.col,f.sizeX,f.sizeY,n.element),t.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(n.element,t),this.moveItemsUpwards()),this.oldRowCol[n.element.id].row===r&&this.oldRowCol[n.element.id].col===i||this.updatePanelPosition(t.id,i,r),this.startCol!==o&&(this.startCol=u,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(n))},n.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this);sf.base.EventHandler.add(window,"resize",this.refreshListener);this.resizeEvents()},n.prototype.refresh=function(){var n;if(this.panelsSizeY=0,this.updateDragArea(),this.isMediaQuery=this.checkMediaQuery(),!this.checkMediaQuery()){if(this.element.classList.contains("e-responsive"))for(sf.base.removeClass([this.element],["e-responsive"]),n=0;n<this.element.querySelectorAll(".e-panel").length;n++){var i=this.element.querySelectorAll(".e-panel")[n],t=this.getCellInstance(i.id),r=t.row,u=t.col;this.updatePanelPosition(t.id,u,r)}this.element.classList.add("e-responsive");this.calculateCellSizeValue()}this.dotnetRef.invokeMethodAsync("CalculateSize",this.calculateCellSize(),this.isMediaQuery,!0,this.contentHeight());this.resizeEvents();this.checkDragging(this.dragCollection)},n.prototype.checkDragging=function(n){for(var t=0;t<n.length;t++)n[t].destroy();!this.checkMediaQuery()&&this.allowDragging&&this.enableDraggingContent(this.panelElements)},n.prototype.resizeEvents=function(){var t,n,i;if(this.allowResizing)for(t=this.element.querySelectorAll(".e-panel .e-resize"),n=0;n<t.length;n++)i="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown",sf.base.EventHandler.add(t[n],i,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(t[n],"touchstart",this.touchDownResizeHandler,this)},n.prototype.touchDownResizeHandler=function(n){this.downHandler(n);this.lastMouseX=n.changedTouches[0].pageX;this.lastMouseY=n.changedTouches[0].pageY;this.isMouseMoveBound||(sf.base.EventHandler.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0);this.isMouseUpBound||(sf.base.EventHandler.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},n.prototype.upResizeHandler=function(){var n,i,r,u,t;sf.base.isNullOrUndefined(this.downTarget)||(this.upTarget=this.downTarget,n=sf.base.closest(this.upTarget,".e-panel"),i=!0,n&&(sf.base.addClass([n],"e-panel-transition"),r="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",u="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup",sf.base.EventHandler.remove(document,r,this.moveResizeHandler),sf.base.EventHandler.remove(document,u,this.upResizeHandler),"msie"!==sf.base.Browser.info.name&&(sf.base.EventHandler.remove(document,"touchmove",this.touchMoveResizeHandler),sf.base.EventHandler.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&sf.base.detach(this.shadowEle),this.shadowEle=null,t=this.getCellInstance(n.getAttribute("id")),this.updatePanelPosition(t.id,t.col,t.row)),sf.base.removeClass([n],["e-dragging"]),this.isResizing=!1,this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,n.id,"ResizeStop"),this.isChanged=!1,this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.changedId.length>0&&this.dotnetRef.invokeMethodAsync("TriggerChange",i,this.changedId),this.changedId=[])},n.prototype.moveResizeHandler=function(n){var t,i,r,u;this.updateMaxTopLeft(n);t=sf.base.closest(this.moveTarget,".e-panel");this.lastMouseX!==n.pageX&&this.lastMouseY!==n.pageY&&(this.updateResizeElement(t),i=this.getCellInstance(t.getAttribute("id")),this.mouseX=n.pageX,this.mouseY=n.pageY,r=this.mouseY-this.lastMouseY+this.mOffY,u=this.mouseX-this.lastMouseX+this.mOffX,this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,u,r))},n.prototype.getMinWidth=function(n){return n.minSizeX*this.getCellSize()[0]},n.prototype.getMaxWidth=function(n){return n.maxSizeX*this.getCellSize()[0]},n.prototype.getMinHeight=function(n){return n.minSizeY*this.getCellSize()[1]},n.prototype.getMaxHeight=function(n){return n.maxSizeY*this.getCellSize()[1]},n.prototype.resizingPanel=function(n,t,i,r){var s=this.getCellInstance(n.id).sizeX,h=this.getCellInstance(n.id).sizeY,f=r,e=i,u,o;this.handleClass.indexOf("north")>=0&&(this.elementHeight-f<this.getMinHeight(t)?(r=this.elementHeight-this.getMinHeight(t),this.mOffY=f-r):t.maxSizeY&&this.elementHeight-f>this.getMaxHeight(t)?(r=this.elementHeight-this.getMaxHeight(t),this.mOffY=f-r):this.elementY+f<this.minTop&&(r=this.minTop-this.elementY,this.mOffY=f-r),this.elementY+=r,this.elementHeight-=r);this.handleClass.indexOf("south")>=0&&(this.elementHeight+f<this.getMinHeight(t)?(r=this.getMinHeight(t)-this.elementHeight,this.mOffY=f-r):t.maxSizeY&&this.elementHeight+f>this.getMaxHeight(t)?(r=this.getMaxHeight(t)-this.elementHeight,this.mOffY=f-r):this.elementY+this.elementHeight+f>this.maxTop&&(r=this.maxTop-this.elementY-this.elementHeight,this.mOffY=f-r),this.elementHeight+=r);this.handleClass.indexOf("west")>=0&&(this.elementWidth-e<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=e-i):t.maxSizeX&&this.elementWidth-e>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=e-i):this.elementX+e<this.minLeft&&(i=this.minLeft-this.elementX,this.mOffX=e-i),this.elementX+=i,this.elementWidth-=i);this.handleClass.indexOf("east")>=0&&(this.elementWidth+e<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=e-i):t.maxSizeX&&this.elementWidth+e>this.getMaxWidth(t)?(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=e-i):this.elementX+this.elementWidth+e>this.maxLeft&&(i=this.maxLeft-this.elementX-this.elementWidth,this.mOffX=e-i),this.elementWidth+=i);u=this.getResizeRowColumn(t);(u.col+u.sizeX>this.columns&&this.updatePanelSize(u.id,u.sizeX-1,null),this.shadowEle.style.top=u.row*this.getCellSize()[1]+u.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=u.col*this.getCellSize()[0]+u.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=u.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=u.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",s!==u.sizeX||h!==u.sizeY)&&(s=u.sizeX,h=u.sizeY,o=this.getCellInstance(n.id),this.updatePanelSize(n.id,o.sizeX,o.sizeY),this.updatePanelPosition(n.id,o.col,o.row),this.mainElement=n,this.updatePanelLayout(n,this.getCellInstance(n.id)),this.updateOldRowColumn(),this.sortedPanel())},n.prototype.pixelsToColumns=function(n,t){var i=this.cellSize[0];return t?Math.ceil(n/i):Math.floor(n/i)},n.prototype.pixelsToRows=function(n,t){return t?Math.round(n/this.cellSize[1]):Math.round(n/(this.cellSize[1]+this.cellSpacing[0]))},n.prototype.getResizeRowColumn=function(n){var f=!1,u=n.col,t,i,r;return-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(u=this.pixelsToColumns(this.elementX,!1)),t=n.row,-1!==["e-north"].indexOf(this.handleClass)&&(t=this.pixelsToRows(this.elementY,!1),this.previousRow!==t&&(this.previousRow=t,f=!0)),i=n.sizeX,-1===["e-north","e-south"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementWidth-i*this.cellSpacing[1],!0)),r=n.sizeY,-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||f)&&(r=this.pixelsToRows(this.elementHeight-r*this.cellSpacing[0],!0)),n.col+n.sizeX>this.columns&&(n.sizeX=n.sizeX-1),(t>-1&&u>-1&&i+u<=this.columns&&r+t<=this.rows&&0===this.collisions(t,u,i,r,this.getPanelBase(n.id)).length||this.allowPushing)&&(this.updatePanelSize(n.id,i,r),this.updatePanelPosition(n.id,u,t)),n},n.prototype.touchMoveResizeHandler=function(n){var t,i,r,u;this.updateMaxTopLeft(n);t=sf.base.closest(this.moveTarget,".e-panel");this.lastMouseX!==n.changedTouches[0].pageX&&this.lastMouseY!==n.changedTouches[0].pageY&&(this.updateResizeElement(t),i=this.getCellInstance(t.getAttribute("id")),this.mouseX=n.changedTouches[0].pageX,this.mouseY=n.changedTouches[0].pageY,r=this.mouseX-this.lastMouseX+this.mOffX,u=this.mouseY-this.lastMouseY+this.mOffY,this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,r,u))},n.prototype.updateResizeElement=function(n){this.maxLeft=this.element.offsetWidth-1;this.maxTop=this.cellSize[1]*this.maxRows-1;sf.base.removeClass([n],"e-panel-transition");sf.base.addClass([n],["e-dragging"]);for(var i=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],t=0;t<this.moveTarget.classList.length;t++)-1!==i.indexOf(this.moveTarget.classList[t])&&(this.handleClass=this.moveTarget.classList[t])},n.prototype.updateMaxTopLeft=function(){var i=this,n,t;this.moveTarget=this.downTarget;n=sf.base.closest(this.moveTarget,".e-panel");t=!0;this.resizeTimeCount=setTimeout(function(){return i.resizeCall(t,n.id,"Resizing")},100)},n.prototype.resizeCall=function(n,t,i){(this.isResizing&&this.resizeTimeCount>100||void 0===this.resizeTimeCount)&&(this.dotnetRef.invokeMethodAsync("TriggerResizeStart",n,t,i),this.resizeTimeCount=1)},n.prototype.downResizeHandler=function(n){this.downHandler(n);this.lastMouseX=n.pageX;this.lastMouseY=n.pageY;var t="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",i="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(sf.base.EventHandler.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0);this.isMouseUpBound||(sf.base.EventHandler.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)},n.prototype.downHandler=function(n){var t,i;this.resizeCalled=!1;this.panelsInitialModel=this.cloneModels(this.panels);t=sf.base.closest(n.currentTarget,".e-panel");this.isChanged=!0;i=!0;this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStart");this.isResizing=!0;this.downTarget=n.currentTarget;this.shadowEle=document.createElement("div");this.shadowEle.classList.add("e-holder");sf.base.addClass([this.element],["e-prevent"]);this.element.appendChild(this.shadowEle);this.elementX=parseFloat(t.style.left);this.elementY=parseFloat(t.style.top);this.elementWidth=t.offsetWidth;this.elementHeight=t.offsetHeight;this.originalWidth=this.getCellInstance(t.id).sizeX;this.originalHeight=this.getCellInstance(t.id).sizeY;this.previousRow=this.getCellInstance(t.id).row},n.prototype.onDraggingStart=function(n){var f=n,r,u,i,t;this.isChanged=!0;f.bindEvents(n.element);this.panelsInitialModel=this.cloneModels(this.panels);this.mainElement=n.element;r=this.getCellInstance(n.element.id);this.startCol=r.col;u=this.startRow=parseInt(n.element.getAttribute("data-row"),10);i=parseInt(n.element.getAttribute("data-sizeY"),10);this.dotnetRef.invokeMethodAsync("TriggerDragStart",n.element.id,u,i,i);this.updateDragArea();this.shadowEle=document.createElement("div");this.shadowEle.classList.add("e-holder");this.shadowEle.classList.add("e-holder-transition");sf.base.setStyleAttribute(this.shadowEle,{position:"absolute"});sf.base.addClass([this.element],["e-prevent"]);sf.base.addClass([n.element],["e-dragging"]);this.element.appendChild(this.shadowEle);this.shadowEle=document.querySelector(".e-holder");this.shadowEle.style.height=this.getCellInstance(n.element.id).sizeY*this.cellSize[1]+"px";this.shadowEle.style.width=this.getCellInstance(n.element.id).sizeX*this.cellSize[0]+"px";t=this.getCellInstance(n.element.id);this.updatePanelPosition(t.id,t.col,t.row);this.setPanelPosition(this.shadowEle,t.row,t.col)},n.prototype.updatePanelSize=function(n,t,i){if(this.panels.length>0)for(var r=0;r<this.panels.length;r++)this.panels[r].id===n&&(sf.base.isNullOrUndefined(t)||(this.panels[r].sizeX=t),sf.base.isNullOrUndefined(i)||(this.panels[r].sizeY=i))},n.prototype.updateDragArea=function(){this.dragCollection.forEach(function(n){n.setDragArea()})},n.prototype.setPanelPosition=function(n,t,i){if(n){var r=this.getCellSize()[1],u=this.getCellSize()[0],f=0===i?0:i*(u+this.cellSpacing[0]),e=0===t?0:t*(r+this.cellSpacing[1]);sf.base.setStyleAttribute(n,{left:f+"px",top:e+"px"})}},n.prototype.calculateCellSizeValue=function(){this.cellSize=[];this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.columns-1)*this.cellSpacing[0])/this.columns,this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},n.prototype.cloneModels=function(n,t){var i,r;for(void 0===t&&(t=[]),i=0;i<n.length;i++)for(r in t[i]||(t[i]={}),n[i])t[i][r]=n[i][r];return t},n.prototype.checkForChanges=function(){for(var t=[],n=0;n<this.panels.length;n++)this.panels[n].row===this.panelsInitialModel[n].row&&this.panels[n].col===this.panelsInitialModel[n].col&&this.panels[n].sizeX===this.panelsInitialModel[n].sizeX&&this.panels[n].sizeY===this.panelsInitialModel[n].sizeY||t.push(this.panels[n]);return t},n.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},n.prototype.destroy=function(){sf.base.EventHandler.remove(window,"resize",this.refreshListener);this.element.removeAttribute("style");for(var n=0;n<this.dragCollection.length;n++)this.dragCollection[n].destroy();this.removeAll()},n.prototype.setHolderPosition=function(n){var t=parseInt(n.element.getAttribute("data-sizeY"),10),i=parseInt(n.element.getAttribute("data-col"),10),r=parseInt(n.element.getAttribute("data-row"),10),u=parseInt(n.element.getAttribute("data-sizeX"),10),f=this.getCellSize()[0],e=this.getCellSize()[1],o=0===r?0:r*(e+this.cellSpacing[1]),s=0===i?0:i*(f+this.cellSpacing[0]),h=this.getCellSize()[1],c=this.getCellSize()[0];this.shadowEle.style.top=o+"px";this.shadowEle.style.left=s+"px";this.shadowEle.style.height=t*h+(t-1)*this.cellSpacing[1]+"px";this.shadowEle.style.width=u*c+(u-1)*this.cellSpacing[0]+"px"},n.prototype.contentHeight=function(){for(var t,r,u,i=[],n=0;n<this.element.querySelectorAll(".e-panel").length;n++)t=this.element.querySelectorAll(".e-panel")[n],t.querySelector(".e-panel-header")&&(r=window.getComputedStyle(t.querySelector(".e-panel-header")).height,u={id:t.id,height:r||"0px"},i.push(u));return i},n}();return{initialize:function(t,i,r){return new n(t,i),this.isValid(t)&&t.blazorInstances.initialize(r),r.MediaQuery&&window.matchMedia("("+r.MediaQuery+")").matches},calculateCellSize:function(n){return this.isValid(n)&&n.blazorInstances.calculateCellSize(),null!=n?n.blazorInstances.calculateCellSize():null},movePanel:function(n,t,i,r){this.isValid(n)&&n.blazorInstances.movePanel(t,i,r)},removePanel:function(n,t){this.isValid(n)&&n.blazorInstances.removePanel(t)},resizePanel:function(n,t,i,r){this.isValid(n)&&n.blazorInstances.resizePanel(t,i,r)},removeAll:function(n){this.isValid(n)&&n.blazorInstances.removeAll()},addPanel:function(n,t){this.isValid(n)&&n.blazorInstances.addPanel(t)},onPropertyChange:function(n,t){this.isValid(n)&&n.blazorInstances.onPropertyChange(t)},destroy:function(n){this.isValid(n)&&n.blazorInstances.destroy()},refresh:function(n){this.isValid(n)&&n.blazorInstances.refresh()},resizeEvents:function(n){this.isValid(n)&&n.blazorInstances.resizeEvents()},isValid:function(n){return!(!n||!n.blazorInstances)},updatePanelModels:function(n,t){this.isValid(n)&&(n.blazorInstances.clearPanelElements(),n.blazorInstances.getProperty(t),n.blazorInstances.initialize(t))}}}()},"./modules/sf-datepicker.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.DatePicker=function(){"use strict";var n="e-datepicker",t=function(){function t(n,t,i,r){this.containerElement=n;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i}return t.prototype.initialize=function(){this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"};this.defaultKeyConfigs=sf.base.extend(this.defaultKeyConfigs,this.options.keyConfigs);new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs});this.index=this.options.showClearButton?2:1;sf.base.EventHandler.add(this.element,"blur",this.inputBlurHandler,this)},t.prototype.inputKeyActionHandle=function(n){var r,t,i;this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&this.options.isDatePopup?(t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected"),this.tableBodyElement.focus(),r={Action:n.action,Key:n.key,Events:n,SelectDate:i?i.id:null,FocusedDate:t?t.id:null,classList:i?i.classList.toString():t?t.classList.toString():"e-cell",Id:t?t.id:i?i.id:null,TargetClassList:this.calendarElement.classList.toString()}):r={Action:n.action,Key:n.key,Events:n};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",r);"select"!==n.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&n.preventDefault()},t.prototype.inputBlurHandler=function(n){this.isCalendar()&&document.activeElement===this.element&&this.dotNetRef.invokeMethodAsync("HidePopup",n)},t.prototype.renderPopup=function(n,t,i,r){var u,f;(this.options=r,this.popupHolder=t,n)&&(u=document.getElementById(n.id),u&&sf.base.remove(u));this.createCalendar(n,r);sf.base.Browser.isDevice&&(this.mobilePopupContainer=sf.base.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupContainer));("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer);this.popupObj.refreshPosition(this.element);r.isDatePopup||this.setScrollPosition();f={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(f),this.element):this.popupObj.show(new sf.base.Animation(f),null);this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice);sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},t.prototype.setOverlayIndex=function(n,t,i,r){if(r&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(n)){var u=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(u-1).toString();n.style.zIndex=u.toString()}},t.prototype.closePopup=function(n,t){this.options=t;this.closeEventCallback(n)},t.prototype.createCalendar=function(t,i){var r=this,u,f;this.popupContainer=t;this.calendarElement=this.popupContainer.firstElementChild;this.tableBodyElement=sf.base.select("tbody",this.calendarElement);u=n+" e-date-modal";f="e-date-overflow";i.isDatePopup?this.calendarElement.querySelector("table tbody").className="":(u="e-datetimepicker e-time-modal",f="e-time-overflow");sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className=u,document.body.classList.add(f),this.modal.style.display="block",document.body.appendChild(this.modal));this.popupObj=new sf.popups.Popup(this.popupContainer,{width:i.isDatePopup?"auto":this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:i.enableRtl,zIndex:i.zIndex,collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){document.activeElement!==r.element&&i.isDatePopup&&(r.defaultKeyConfigs=sf.base.extend(r.defaultKeyConfigs,i.keyConfigs),r.calendarElement.children[1].firstElementChild.focus(),new sf.base.KeyboardEvents(r.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:r.CalendarKeyActionHandle.bind(r),keyConfigs:r.defaultKeyConfigs}),new sf.base.KeyboardEvents(r.containerElement.children[r.index],{eventName:"keydown",keyAction:r.CalendarKeyActionHandle.bind(r),keyConfigs:r.defaultKeyConfigs}))},close:function(){r.popupHolder.appendChild(r.popupContainer);r.popupObj&&r.popupObj.destroy();r.isDisposed||r.dotNetRef.invokeMethodAsync("ClosePopup").catch(function(){});r.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||r.isDisposed||r.dotNetRef.invokeMethodAsync("HidePopup",null)}});i.isDatePopup||(this.popupObj.element.style.maxHeight="240px")},t.prototype.getPopupHeight=function(){var n=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>n?n:t},t.prototype.setScrollPosition=function(){if((this.popupContainer&&this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active"))&&!this.options.isDatePopup){var n=this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active");this.findScrollTop(n)}},t.prototype.findScrollTop=function(n){var r=this.getPopupHeight(),t=n.nextElementSibling,i=t?t.offsetTop:n.offsetTop,u=n.getBoundingClientRect().height;this.popupContainer.scrollTop=i+n.offsetTop>r?t?i-(r/2+u/2):i:0},t.prototype.closeEventCallback=function(n){var t=n;this.isCalendar()&&!t.cancel&&this.popupObj&&this.popupObj.hide();sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-date-overflow"),sf.base.removeClass([document.body],"e-time-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null));sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler);sf.base.Browser.isDevice&&this.options.allowEdit&&!this.options.readonly&&this.element.removeAttribute("readonly")},t.prototype.documentHandler=function(t){!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t.target)||this.popupObj.element&&this.popupObj.element.contains(t.target))&&"touchstart"!==t.type&&t.preventDefault();var u=this.containerElement.querySelector(".e-clear-icon"),f=this.tableBodyElement?this.tableBodyElement.querySelector(".e-selected"):null,r=this.options.value?this.options.value.toString():null,i=t.target;i==u&&f&&sf.base.removeClass([this.tableBodyElement.querySelector(".e-selected")],"e-selected");sf.base.closest(i,"."+n+".e-popup-wrapper")||sf.base.closest(i,".e-datetimepicker.e-popup-wrapper")||sf.base.closest(i,".e-input-group")===this.containerElement||i.classList.contains("e-day")||this.isDisposed?sf.base.closest(i,"."+n+".e-popup-wrapper")&&(i.classList.contains("e-day")&&!sf.base.isNullOrUndefined(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&sf.base.closest(i,".e-content")&&sf.base.closest(i,".e-content").classList.contains("e-"+this.options.depth.toLowerCase())&&!this.isDisposed||sf.base.closest(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(r)==+this.generateTodayVal(new Date(r))&&!this.isDisposed)&&this.dotNetRef.invokeMethodAsync("HidePopup",t):(this.dotNetRef.invokeMethodAsync("HidePopup",t),this.element.focus())},t.prototype.generateTodayVal=function(n){var t=new Date;return n?(t.setHours(n.getHours()),t.setMinutes(n.getMinutes()),t.setSeconds(n.getSeconds()),t.setMilliseconds(n.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},t.prototype.isCalendar=function(){return this.popupContainer&&this.popupContainer.classList.contains("e-popup-wrapper")},t.prototype.CalendarKeyActionHandle=function(n){switch(n.action){case this.defaultKeyConfigs.escape:this.isCalendar()?this.dotNetRef.invokeMethodAsync("HidePopup",n):this.element.blur();break;case this.defaultKeyConfigs.enter:this.isCalendar()||this.dotNetRef.invokeMethodAsync("ShowPopup",n);break;case this.defaultKeyConfigs.tab:this.dotNetRef.invokeMethodAsync("HidePopup",n)}},t.prototype.setWidth=function(n){return"number"==typeof n?sf.base.formatUnit(n):"string"==typeof n?n.match(/px|%|em/)?n:sf.base.formatUnit(n):"100%"},t.prototype.setPopupWidth=function(n){return(n=this.setWidth(n)).indexOf("%")>-1&&(n=(this.containerElement.getBoundingClientRect().width*parseFloat(n)/100).toString()+"px"),n},t}();return{initialize:function(n,i,r,u){i&&new t(n,i,r,u);i&&i.blazor__instance&&i.blazor__instance.initialize()},renderPopup:function(n,t,i,r,u){n&&n.blazor__instance&&t&&i&&n.blazor__instance.renderPopup(t,i,r,u)},updateScrollPosition:function(n){n&&n.blazor__instance&&n.blazor__instance.setScrollPosition()},closePopup:function(n,t,i,r,u){n&&n.blazor__instance&&n.blazor__instance.closePopup(r,u)},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()},destroy:function(n,t,i,r,u){n&&n.blazor__instance&&t&&_instanceof(t,HTMLElement)&&i&&(n.blazor__instance.isDisposed=!0,n.blazor__instance.closePopup(r,u))}}}()},"./modules/sf-daterangepicker.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.DateRangePicker=function(){"use strict";var n="e-left-calendar",t="e-right-calendar",i="e-calendar",r="e-header",u="e-focused-date",f=function(){function f(n,t,i,r){this.containerElement=n;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i}return f.prototype.initialize=function(){this.isMobile=window.matchMedia("(max-width:550px)").matches;this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab"};new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})},f.prototype.keyInputHandler=function(i){var e;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")){var o=sf.base.closest(i.target,"."+t),s=(o=sf.base.isNullOrUndefined(o)?this.tableElement.querySelector("."+n):o).classList.contains(n),r=this.tableElement.querySelector("tr td."+u),h=this.tableElement.querySelectorAll("tr td.e-selected"),f=h[h.length-1],c=r&&sf.base.closest(r,"tbody")||f&&sf.base.closest(f,"tbody");!s&&this.leftCalendar.querySelectorAll("tr td."+u).length>0&&sf.base.removeClass(this.leftCalendar.querySelectorAll("tr td."+u),u);c&&c.focus();e={Action:i.action,Key:i.key,Events:i,SelectDate:f?f.id:null,FocusedDate:r?r.id:null,classList:f?f.classList.toString():r?r.classList.toString():"e-cell",Id:r?r.id:f?f.id:null,TargetClassList:this.calendarElement.classList.toString(),IsLeftCalendar:s}}else e={Action:i.action,Key:i.key,Events:i};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",e);"select"!==i.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&i.preventDefault()},f.prototype.renderPopup=function(n,t,i,r){this.options=r;this.popupHolder=t;var u=document.body.querySelector(".e-daterangepicker.e-popup-open");u&&sf.base.remove(u);this.createCalendar(n,r);sf.base.Browser.isDevice&&(this.mobilePopupContainer=this.popupHolder.querySelector(".e-daterangepick-mob-popup-wrap"),document.body.appendChild(this.mobilePopupContainer));("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer);this.presetHeight();1e3===this.options.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null);this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice);sf.base.Browser.isDevice&&(document.body.className+=" e-range-overflow",this.popupHolder.style.display="block",this.popupHolder.style.visibility="visible");sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},f.prototype.setOverlayIndex=function(n,t,i,r){if(r&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(n)){var u=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(u-1).toString();n.style.zIndex=u.toString()}},f.prototype.closePopup=function(n,t){this.options=t;this.closeEventCallback(n)},f.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition()},f.prototype.createCalendar=function(u,f){var e=this,o;this.popupContainer=u;f.isCustomWindow&&(this.calendarElement=this.popupContainer.firstElementChild,this.tableElement=this.calendarElement,this.calendarElement.querySelector("table tbody").className="");o=this.popupContainer.getBoundingClientRect().width;sf.base.Browser.isDevice&&(this.modal=this.popupHolder.querySelector(".e-range-modal"),this.modal.style.display="block",document.body.appendChild(this.modal));f.isCustomWindow&&(sf.base.Browser.isDevice?(this.deviceCalPrevIcon=this.calendarElement.querySelector("."+i+" .e-prev"),this.deviceCalNextIcon=this.calendarElement.querySelector("."+i+" .e-next"),this.calendarElement.querySelector("."+i+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+i+" ."+r).appendChild(this.deviceCalNextIcon),this.calendarElement.querySelector("."+i+" ."+r).appendChild(this.deviceCalPrevIcon),sf.base.prepend([this.deviceCalPrevIcon],this.calendarElement.querySelector("."+i+" ."+r)),this.calendarElement.querySelector("."+i+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-footer-container"))):(this.leftCalPrevIcon=this.calendarElement.querySelector("."+n+" .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector("."+n+" .e-next"),this.leftTitle=this.calendarElement.querySelector("."+n+" .e-title"),this.calendarElement.querySelector("."+n+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+n+" .e-icon-container")),this.calendarElement.querySelector("."+n+" ."+r).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+n+" ."+r).appendChild(this.leftCalPrevIcon),sf.base.prepend([this.leftCalPrevIcon],this.calendarElement.querySelector("."+n+" ."+r)),this.rightCalPrevIcon=this.calendarElement.querySelector("."+t+" .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector("."+t+" .e-next"),this.rightTitle=this.calendarElement.querySelector("."+t+" .e-title"),this.calendarElement.querySelector("."+t+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+t+" ."+r).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+t+" ."+r).appendChild(this.rightCalPrevIcon),sf.base.prepend([this.rightCalPrevIcon],this.calendarElement.querySelector("."+t+" ."+r)),this.calendarElement.querySelector("."+n+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+n+" .e-footer-container")),this.calendarElement.querySelector("."+t+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-footer-container"))));this.popupObj=new sf.popups.Popup(this.popupContainer,{relateTo:this.isMobile?document.body:this.containerElement,position:this.isMobile?sf.base.isUndefined(f.presets&&f.presets[0]&&f.presets[0].start&&f.presets[0].end&&f.presets[0].label)?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:f.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||f.enableRtl?0:-o,offsetY:4,collision:this.isMobile?sf.base.isUndefined(f.presets&&f.presets[0]&&f.presets[0].start&&f.presets[0].end&&f.presets[0].label)?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile?"container":"relative",enableRtl:f.enableRtl,zIndex:f.zIndex,open:function(){var i,r,u;e.leftCalendar=e.calendarElement.querySelector("."+n);e.rightCalendar=e.calendarElement.querySelector("."+t);i=e.popupObj&&e.popupObj.element.querySelector(".e-date-range-container");!e.isMobile&&i&&(new sf.base.KeyboardEvents(e.leftCalendar,{eventName:"keydown",keyAction:e.keyInputHandler.bind(e),keyConfigs:e.defaultKeyConfigs}),new sf.base.KeyboardEvents(e.rightCalendar,{eventName:"keydown",keyAction:e.keyInputHandler.bind(e),keyConfigs:e.defaultKeyConfigs}),r=e.popupContainer.querySelector(".e-cancel.e-btn"),u=e.popupContainer.querySelector(".e-apply.e-btn"),new sf.base.KeyboardEvents(r,{eventName:"keydown",keyAction:e.keyInputHandler.bind(e),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),new sf.base.KeyboardEvents(u,{eventName:"keydown",keyAction:e.keyInputHandler.bind(e),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),e.leftCalendar.querySelector("table").focus())},close:function(){e.popupHolder.appendChild(e.popupContainer);e.popupObj&&e.popupObj.destroy();e.isDisposed||e.dotNetRef.invokeMethodAsync("ClosePopup").catch(function(){});e.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||e.isDisposed||e.dotNetRef.invokeMethodAsync("HidePopup",null)}})},f.prototype.closeEventCallback=function(n){!n.cancel&&this.popupObj&&this.popupObj.hide();sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-range-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null));sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler)},f.prototype.documentHandler=function(n){if(!sf.base.isNullOrUndefined(this.popupObj)){var t=n.target;this.containerElement.contains(t)&&(sf.base.isNullOrUndefined(this.popupObj)||sf.base.closest(t,".e-daterangepicker.e-popup"))||"touchstart"!==n.type&&"mousedown"===n.type&&n.preventDefault();sf.base.closest(t,".e-daterangepicker.e-popup")||sf.base.closest(t,".e-input-group")===this.containerElement||sf.base.closest(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&this.applyFunction(n)}},f.prototype.applyFunction=function(n){"touchstart"!==n.type&&n.preventDefault();document.activeElement!==this.element&&(this.element.focus(),sf.base.addClass([this.containerElement],["e-input-focus"]));this.dotNetRef.invokeMethodAsync("HidePopup",null);sf.base.closest(n.target,".e-input-group")||document.activeElement===this.element&&(sf.base.removeClass([this.containerElement],["e-input-focus"]),this.element.blur())},f.prototype.presetHeight=function(){var n=this.popupObj&&this.popupObj.element.querySelector(".e-presets"),t=this.popupObj&&this.popupObj.element.querySelector(".e-date-range-container");sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(t)||(n.style.height=t.getBoundingClientRect().height+"px")},f.prototype.getPopupHeight=function(){var n=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>n?n:t},f.prototype.setScrollPosition=function(){if(!sf.base.isNullOrUndefined(this.popupContainer.querySelector(".e-active"))&&this.options.presets){var n=this.popupContainer.querySelector(".e-active");this.findScrollTop(n)}},f.prototype.findScrollTop=function(n){var r=this.getPopupHeight(),t=n.nextElementSibling,i=t?t.offsetTop:n.offsetTop,u=n.getBoundingClientRect().height;this.popupContainer.scrollTop=i+n.offsetTop>r?t?i-(r/2+u/2):i:0},f.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},f.prototype.removeFocusDate=function(n,t){var f=n.querySelectorAll("tr td.e-focused-date"),i,r;for(f.length>0&&sf.base.removeClass(f,u),i=n.querySelectorAll("tr td"),r=0;r<i.length;r++)i[r].getAttribute("id").split("_")[0]==t&&(sf.base.removeClass(i,u),sf.base.addClass([i[r]],u),sf.base.closest(i[r],"table").focus())},f}();return{initialize:function(n,t,i,r){t&&new f(n,t,i,r);t&&t.blazor__instance&&t.blazor__instance.initialize()},renderPopup:function(n,t,i,r,u){n&&n.blazor__instance&&t&&i&&n.blazor__instance.renderPopup(t,i,r,u)},updateScrollPosition:function(n){n&&n.blazor__instance&&n.blazor__instance.setScrollPosition()},removeFocusDate:function(n,t,i){n&&n.blazor__instance&&t&&n.blazor__instance.removeFocusDate(t,i)},closePopup:function(n,t,i,r,u){n&&n.blazor__instance&&n.blazor__instance.closePopup(r,u)},refreshPopup:function(n){n&&n.blazor__instance&&n.blazor__instance.refreshPopup()},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()},destroy:function(n,t,i,r,u){n&&n.blazor__instance&&t&&_instanceof(t,HTMLElement)&&i&&(n.blazor__instance.isDisposed=!0,n.blazor__instance.closePopup(r,u))}}}()},"./modules/sf-diagramcomponent.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Diagram=function(){"use strict";function c(n,t){for(var r,u=t.split(";"),i=0;i<u.length;i++)r=u[i].split(":"),2===r.length&&(n.style[r[0].trim()]=r[1].trim())}function o(n,t){for(var r=Object.keys(t),i=0;i<r.length;i++)"style"!==r[i]?n.setAttribute(r[i],t[r[i]]):c(n,t[r[i]])}function s(t,i,r){for(var f,e,u=t;u&&!(r?u.id===i:(e=i,void 0,(" "+("object"===n((f=u).className)?f.className.animVal:f.className)+" ").indexOf(" "+e+" ")>-1));)u=u.parentNode;return u}var e=function(){function n(n,t,i,r){this.x=Number.MAX_VALUE;this.y=Number.MAX_VALUE;this.width=0;this.height=0;void 0===n||void 0===t?(n=t=Number.MAX_VALUE,i=r=0):(void 0===i&&(i=0),void 0===r&&(r=0));this.x=n;this.y=t;this.width=i;this.height=r}return n.empty=new n(Number.MAX_VALUE,Number.MIN_VALUE,0,0),n}(),y=function(){function n(n,t){var i=this;this.over=function(n){for(var f,u,r=document.getElementById("clonedNode"),t=i.symbolPaletteInstance.length-1;t>=0;t--)if(n.dragData.draggable.id===i.symbolPaletteInstance[t].id){f=i.symbolPaletteInstance[t].componentInstance;break}(f.invokeMethodAsync("SymbolPaletteDragEnter",n.target.id.split("_")[0]),r)&&(sf.base.remove(r),u=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone"),u[0].style.width="1px",u[0].style.height="1px")};this.drop=function(n){for(var r,u,t=i.symbolPaletteInstance.length-1;t>=0;t--)if(n.dragData.draggable.id===i.symbolPaletteInstance[t].id){r=i.symbolPaletteInstance[t].componentInstance;break}u=s(n.target,"e-diagram");r.invokeMethodAsync("SymbolPaletteDrop",u.id);sf.base.remove(n.droppedElement)};this.out=function(n){for(var r,t=i.symbolPaletteInstance.length-1;t>=0;t--)if(n.target.children[0].id===i.symbolPaletteInstance[t].id||n.target.parentNode.parentNode.parentElement.id===i.symbolPaletteInstance[t].id){r=i.symbolPaletteInstance[t].componentInstance;break}r&&r.invokeMethodAsync("SymbolPaletteDragLeave")};this.helper=function(n){var r=document.getElementsByClassName("e-control e-accordion")[0],t=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+r.offsetWidth}),i=document.getElementById("previewID");return null===i&&(i=n.sender.target),i?(t.setAttribute("id","helperElement"),document.body.appendChild(t),t):null};this.dragStart=function(n){n.bindEvents(n.dragElement)};this.drag=function(n){var r,t;if(!s(n.target,"e-diagram")){for(var f=document.getElementById("previewID"),e=void 0,u=i.symbolPaletteInstance.length-1;u>=0;u--)if(n.element.id===i.symbolPaletteInstance[u].id){e=i.symbolPaletteInstance[u].allowDrag;break}f&&(f.style.visibility="",r=f.cloneNode(!0),r.style.display="Block",r.style.visibility=!0,r.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),r.setAttribute("id","clonedNode"),t=document.getElementById("helperElement"),t&&t.children[0]&&t.removeChild(t.children[0]),e||(t.style.opacity="0"),t.appendChild(r))}};this.dragStop=function(n){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone"),r,e,f,u;if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(r=t.length-1;r>0;r--)"helperElement"==t[r].id&&t[r].remove();if(!s(n.target,"e-diagram")){for(e=document.getElementById("helperElement"),e&&e.remove(),f=void 0,u=i.symbolPaletteInstance.length-1;u>=0;u--)if(n.element.id===i.symbolPaletteInstance[u].id){f=i.symbolPaletteInstance[u].componentInstance;break}f&&f.invokeMethodAsync("ElementDropToOutSideDiagram")}};this.symbolPaletteInstance=t;n&&this.initializeDrag(n)}return n.prototype.initializeDrag=function(n){var f=n.children[0],r,t,u,i;for(this.draggable=new sf.base.Draggable(f,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1}),r=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),t=0;t<r.length;t++)this.droppable=new sf.base.Droppable(r[t],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});for(u=document.getElementsByClassName("e-acrdn-header-content"),i=0;i<u.length;i++)u[i].style.textDecoration="inherit"},n.prototype.destroy=function(){this.draggable.destroy()},n}(),t=function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},i=function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==e[0]&&2!==e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},r=!1,u=!1,l=0,f=!1,a=!1,v="",p=!1,w=!1,b="Arial",k="black",d="Center",g=12,nt="None",tt="Wrap",h="WrapWithOverflow",it="CollapseSpace";return{createHtmlElement:function(n,t){var i=sf.base.createElement(n);return t&&this.setAttribute(i,t),i},setAttribute:function(n,t){for(var r=Object.keys(t),i=0;i<r.length;i++)n.setAttribute(r[i],t[r[i]])},createMeasureElements:function(n,t,i,r,u,f){var e,h,c,o,l,s;this.updateZoomPanTool(n);this.updateInnerLayerSize(t,i,r);u&&f&&this.onAddWireEvents(u,f);window.measureElement?window.measureElement.usageCount+=1:(e=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),h=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"}),e.appendChild(h),c=this.createHtmlElement("img",{}),e.appendChild(c),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(o),l=document.createElementNS("http://www.w3.org/2000/svg","path"),o.appendChild(l),s=document.createElementNS("http://www.w3.org/2000/svg","text"),s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.appendChild(s),window.measureElement=e,window.measureElement.usageCount=1,document.body.appendChild(e),window.measureElementCount?window.measureElementCount++:window.measureElementCount=1)},updateZoomPanTool:function(n){a=n},updateInnerLayerSize:function(n,t,i,r,u,e){var o,s,h;if(null!=n&&null!=t&&null!=i&&n.length>0)for(o=void 0,s=0;s<n.length-1;s++)(o=document.getElementById(n[s]))&&(o.style.width=t,o.style.height=i);if(f&&(f=!1),null!=n&&n.length>0){h=document.getElementById(n[n.length-1]);return this.onChangeScrollValues(h,r,u,e)}return null},onChangeScrollValues:function(n,t,i,u){return n&&t&&i?(l==u&&(r=!1),n.scrollLeft=t,n.scrollTop=i,this.measureScrollValues(v)):null},measureScrollValues:function(n){var t=document.getElementById(n);return new e(t.scrollLeft,t.scrollTop,t.scrollWidth,t.scrollHeight)},measurePath:function(n){var r,i,t,u;return n?(window.measureElement.style.visibility="visible",r=window.measureElement.children[2],i=this.getChildNode(r)[0],i.setAttribute("d",n),t=i.getBBox(),u=new e(t.x,t.y,t.width,t.height),window.measureElement.style.visibility="hidden",u):new e(0,0,0,0)},openUrl:function(n){return t(this,void 0,void 0,function(){return i(this,function(){return window.open(n,"_blank"),[2]})})},textEdit:function(n,t,i,r,u,f){var p=this,l=document.getElementById("diagram_editTextBoxDiv"),e,v,a,s,h,c,y;n.id=f;e=document.getElementById("diagram_editBox");v=n.content;l||e||(l=this.createHtmlElement("div",{}),e=this.createHtmlElement("textarea",{}),document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip")[0].children[0].appendChild(l),l.appendChild(e),e.appendChild(document.createTextNode(v)),this.diagram_editTextBoxDiv=l,this.diagram_editBox=e);a=n.bounds.width<i.width?n.bounds.width:i.width;a=90>a?90:a;s=this.measureHtmlText(n.style,v,void 0,void 0,a);0==s.width&&0==s.height&&(s.width=50,s.height=12);h=u?r.scale:1;s.width=Math.max(s.width,50);o(l,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((t.x+r.tx)*r.scale-s.width/2*h-2.5)+"px;top:"+((t.y+r.ty)*r.scale-s.height/2*h-3)+"px;width:"+(s.width+1)*h+"px;height:"+s.height*h+"px; containerName:temp;"});c=n.style;o(e,{id:"diagram_editBox",style:"width:"+(s.width+1)*h+"px;height:"+s.height*h+"px;resize: none;outline: none;overflow: hidden;;font-family:"+c.fontFamily+";font-size:"+c.fontSize*h+"px;text-align:"+n.style.textAlign.toLocaleLowerCase()+";","class":"e-diagram-text-edit"});e.style.fontWeight=c.bold?"bold":"";e.style.fontStyle=c.italic?"italic":"";e.style.lineHeight=(1.2*c.fontSize+"px;").toString();y=document.getElementById(n.id+"_text");y&&y.setAttribute("visibility","hidden");e.style.textDecoration=c.textDecoration?c.textDecoration:"";e.addEventListener("input",function(f){p.inputChange(f,n,i,t,r,u)});e.select();window.annotation=n},inputChange:function(n,t,i,r,u,f){var h,y,c,e,o,s=this.diagram_editBox,l=this.diagram_editTextBoxDiv,p=s.value,a=p.split("\n"),v;h=(h=i.width<t.bounds.width?i.width:t.bounds.width)>90?h:90;o=this.measureHtmlText(t.style,p,void 0,void 0,h);y=Number(s.style.fontSize.split("px")[0]);a.length>1&&""===a[a.length-1]&&(o.height=o.height+y);v=f?u.scale:1;e=(90>(e=o.width)?90:e)*v;c=(12>o.height?12:o.height)*v;l.style.left=(r.x+u.tx)*u.scale-e/2-2.5+"px";l.style.top=(r.y+u.ty)*u.scale-c/2-3+"px";l.style.width=e+"px";l.style.height=c+"px";s.style.minHeight="12px";s.style.minWidth="90px";s.style.width=e+"px";s.style.height=c+"px"},measureHtmlText:function(n,t,i,r,u){var e={},f=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return n.bold&&(f.style.fontWeight="bold"),n.italic&&(f.style.fontStyle="italic"),void 0!==i&&(f.style.width=i.toString()+"px"),void 0!==r&&(f.style.height=r.toString()+"px"),void 0!==u&&(f.style.maxWidth=u.toString()+"px"),f.style.fontFamily=n.fontFamily,f.style.fontSize=n.fontSize+"px",f.style.color=n.color,f.textContent=t,f.style.whiteSpace=this.whiteSpaceToString(n.whiteSpace,n.textWrapping),f.style.wordBreak=void 0!==u?"break-word":this.wordBreakToString(n.textWrapping),document.body.appendChild(f),e.width=f.offsetWidth,e.height=f.offsetHeight,document.body.removeChild(f),e},getChildNode:function(n){var r,i=[],t;if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(t=0;t<n.childNodes.length;t++)1===(r=n.childNodes[t]).nodeType&&i.push(r);else i=n.children;return i},measureBounds:function(n,r,u,f){return t(this,void 0,void 0,function(){var b,a,y,p,d,g,nt,k,ut,tt,ft,s,h,et,ot,c,l,st,t,it,rt,e,ht,ct,w,o;return i(this,function(i){switch(i.label){case 0:if(null!=f)for(a=document.getElementsByClassName("e-acrdn-panel e-content-hide"),b=[],o=0;o<a.length;o++)b[o]=a[o].style.display,a[o].style.display="block";if(y={},p={},d={},g={},nt={},k="measureElement",n)for(t=Object.keys(n).map(function(t){return[n[t],t]}),window[k].style.visibility="visible",ut=window[k].children[2],tt=this.getChildNode(ut)[0],e=0;e<t.length;e++)"Path"==t[e][0]?(h=t[e][1],tt.setAttribute("d",h),s=tt.getBBox(),w={x:s.x,y:s.y,width:s.width,height:s.height},p[h]=w):-1!=t[e][0].indexOf("GetBoundingClientRect")&&((ft=document.getElementById(t[e][1]))&&(s=ft.getBoundingClientRect(),p[t[e][0]]={x:s.x,y:s.y,width:s.width,height:s.height}),"GetBoundingClientRect"==t[e][0]&&(v=t[e][1],p.GetScrollerBounds=this.measureScrollValues(t[e][1])));if(r)for(t=Object.keys(r).map(function(n){return[r[n],n]}),e=0;e<t.length;e++)h=t[e][1],et=r[h].content,ot=r[h].style,c=r[h].bounds,l=r[h].nodeSize,c.width=null==c.width?void 0:c.width,c.height=null==c.height?void 0:c.height,l.width=null==l.width?void 0:l.width,l.height=null==l.height?void 0:l.height,d[h]=this.measureText(c,ot,et,c.width||l.width);return u&&(st=Object.keys(u).map(function(n){return[u[n],n]})).length>0?(t={},[4,this.loadImage(st,0,t)]):[3,2];case 1:i.sent();g=t;i.label=2;case 2:if(f&&(t=Object.keys(f).map(function(n){return[f[n],n]})).length>0){for(it={},rt={},e=0;e<t.length;e++)ht=t[e][0],ct=document.getElementById(ht),w=ct.getBoundingClientRect(),rt={width:w.width,height:w.height},it[t[e][1]]=rt;nt=it}if(p.GetScrollerWidth=this.getScrollerWidth(),y.Path=p,y.Text=d,y.Image=g,y.Native=nt,null!=b)for(o=0;o<a.length;o++)a[o].style.display=b[o].toString();return window[k].style.visibility="hidden",[2,y]}})})},measureText:function(n,t,i,r,u){var e,o,s={},h={width:0,height:0},f=this.getTextOptions(i,n,t,r);return e=this.wrapSvgText(f,u,r),o=this.wrapSvgTextAlign(f,e),h.width=o.width,o.width>=r&&"Wrap"!==f.textOverflow&&(h.width=r),h.height=e.length*f.fontSize*1.2,o.width>f.width&&"Wrap"!==f.textOverflow&&"NoWrap"===f.textWrapping&&(e[0].text=this.overFlow(f.content,f)),s.Bounds=h,s.WrapBounds=o,s.ChildNodes=e,s},getTextOptions:function(n,t,i,r){var u={fill:i.fill,stroke:i.strokeColor,strokeWidth:i.strokeWidth,dashArray:i.strokeDashArray,opacity:i.opacity,gradient:i.gradient,width:r||t.width,height:t.height};return u.fontSize=i.fontSize||g,u.fontFamily=i.fontFamily||b,u.textOverflow=i.textOverflow||tt,u.textDecoration=i.textDecoration||nt,u.doWrap=i.doWrap,u.whiteSpace=this.whiteSpaceToString(i.whiteSpace||it,i.textWrapping||h),u.content=n,u.textWrapping=i.textWrapping||h,u.breakWord=this.wordBreakToString(i.textWrapping||h),u.textAlign=this.textAlignToString(i.textAlign||d),u.color=i.color||k,u.italic=i.italic||w,u.bold=i.bold||p,u.dashArray="",u.strokeWidth=0,u.fill="",u},whiteSpaceToString:function(n,t){if("NoWrap"===t&&"PreserveAll"===n)return"pre";var i="";switch(n){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i},wordBreakToString:function(n){var t="";switch(n){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(n){var t="";switch(n){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(n,t,i){var r,s,u=[],e=0,f=t||n.content,o;if("nowrap"!==n.whiteSpace&&"pre"!==n.whiteSpace)if("breakall"===n.breakWord)for(r="",r+=f[0],e=0;e<f.length;e++)(s=this.bBoxText(r,n))>=n.width&&r.length>0?(u[u.length]={text:r,x:0,dy:0,width:s},r=""):((r+=f[e+1]||"").indexOf("\n")>-1&&(u[u.length]={text:r,x:0,dy:0,width:this.bBoxText(r,n)},r=""),o=this.bBoxText(r,n),Math.ceil(o)+2>=n.width&&r.length>0&&(u[u.length]={text:r,x:0,dy:0,width:o},r=""),e===f.length-1&&r.length>0&&(u[u.length]={text:r,x:0,dy:0,width:o},r=""));else u=this.wordWrapping(n,t,i);else u[u.length]={text:f,x:0,dy:0,width:this.bBoxText(f,n)};return u},wordWrapping:function(n,t,i){for(var f,h,l,a,e=[],r="",o=0,u=0,v="nowrap"!==n.whiteSpace,c=(t||n.content).split("\n"),s,o=0;o<c.length;o++)for(f="NoWrap"!==n.textWrapping?c[o].split(" "):"NoWrap"===n.textWrapping?[c[o]]:c,u=0;u<f.length;u++)h=(r+=((0!==u||1===f.length)&&v&&r.length>0?" ":"")+f[u])+" "+(f[u+1]||""),s=this.bBoxText(h,n),Math.floor(s)>(i||n.width)-2&&r.length>0?(e[e.length]={text:r,x:0,dy:0,width:h===r?s:r===a?l:this.bBoxText(r,n)},r=""):u===f.length-1&&(e[e.length]={text:r,x:0,dy:0,width:s},r=""),a=h,l=s;return e},wrapSvgTextAlign:function(n,t){for(var i,f,r={x:0,width:0},u=0,u=0;u<t.length;u++)f=i=t[u].width,i="left"===n.textAlign?0:"center"===n.textAlign?i>n.width&&("Ellipsis"===n.textOverflow||"Clip"===n.textOverflow)?0:-i/2:"right"===n.textAlign?-i:t.length>1?0:-i/2,t[u].dy=1.2*n.fontSize,t[u].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,f)):r={x:i,width:f};return r},overFlow:function(n,t){var e,r=0,o=0,f=0,i="",u;e=n.length;u=0;do f>0&&(r=o),o=Math.floor(this.middleElement(r,e)),i+=n.substr(r,o),f=this.bBoxText(i,t);while(f<=t.width);for(i=i.substr(0,r),u=r;u<e;u++)if(i+=n[u],(f=this.bBoxText(i,t))>=t.width){n=n.substr(0,i.length-1);break}return"Ellipsis"===t.textOverflow?(n=n.substr(0,n.length-3),n+="..."):n=n.substr(0,n.length),n},middleElement:function(n,t){return(n+t)/2},getScrollerWidth:function(){var n=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"}),i,t,r;return document.body.appendChild(n),i=n.getBoundingClientRect().width,n.style.overflow="scroll",t=this.createHtmlElement("div",{style:"width:100%"}),n.appendChild(t),r=t.getBoundingClientRect().width,n.parentNode.removeChild(n),{x:0,y:0,width:i-r,height:0}},pathPoints:function(n){return t(this,void 0,void 0,function(){var u,t,r,f;return i(this,function(){if(u={},n)for(t=Object.keys(n).map(function(t){return[n[t],t]}),r=0;r<t.length;r++)t.length>0&&(f=t[r][1],u[t[r][0]]=this.findSegmentPoints(f));return[2,u]})})},findSegmentPoints:function(n){var r,t,u=[],f,i,e;for(window.measureElement.style.visibility="visible",f=window.measureElement.children[2],i=this.getChildNode(f)[0],i.setAttributeNS(null,"d",n),e=i.getTotalLength(),t=0;t<=e;t+=10)r=i.getPointAtLength(t),u.push({x:r.x,y:r.y});return window.measureElement.style.visibility="hidden",u},loadImage:function(n,r,u){return t(this,void 0,void 0,function(){var t,f,e;return i(this,function(i){switch(i.label){case 0:return t=new Promise(function(t){var u={},i;window.measureElement.style.visibility="visible";window.measureElement.children[1].setAttribute("src",n[r][0]);window.measureElement.style.visibility="hidden";i=document.createElement("img");i.setAttribute("src",n[r][0]);o(i,{id:"imagesf"+r+"imageNode",style:"display: none;"});document.body.appendChild(i);i.onload=function(n){var i=n.currentTarget;u={width:i.width,height:i.height};t(u)}}),f=u,e=n[r][1],[4,t];case 1:return f[e]=i.sent(),r!=n.length-1?[3,2]:[2,u];case 2:return r++,[4,this.loadImage(n,r,u)];case 3:i.sent();i.label=4;case 4:return[2]}})})},bBoxText:function(n,t){var r,i,u;return window.measureElement.style.visibility="visible",r=window.measureElement.children[2],i=this.getChildNode(r)[1],i.textContent=n,c(i,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal")),u=i.getBBox().width,window.measureElement.style.visibility="hidden",u},endEdit:function(){var i,r;setTimeout(function(){var t=document.getElementById(n.id+"_text");t&&t.setAttribute("visibility","visible")},100);var e=this.diagram_editBox,n=window.annotation,u=window.isEscape?n.content:e.value,o=n.style,f=n.bounds,t=n.nodeSize;return t.width=null==t.width?void 0:t.width,t.height=null==t.height?void 0:t.height,i={},r={},i[n.id]=this.measureText(f,o,u,f.width||t.width),i[n.id].Content=u,r.Text=i,this.diagram_editTextBoxDiv.remove(),r},onAddWireEvents:function(n,t){var i=this,r=document.getElementById(n);r.addEventListener("mousedown",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("mousemove",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("mouseup",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("mouseleave",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("scroll",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("mousewheel",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("keydown",function(n){i.invokeDiagramEvents(n,t)});r.addEventListener("keyup",function(n){i.invokeDiagramEvents(n,t)})},invokeDiagramEvents:function(n,t){var c,e,o="diagram_editTextBoxDiv",s=this[o],h={},i;("mousedown"==n.type&&(e=!0),"mouseup"==n.type&&(e=!1),("mouseleave"==n.type||"Escape"==n.key||"mousedown"==n.type&&"diagram_editBox"!=n.target.id)&&s&&(window.isEscape="Escape"==n.key,c=this.endEdit(n,this),this[o]=s=document.getElementById("diagram_editTextBoxDiv")),h=this.getMouseEvents(n),"Escape"==n.key)&&(i=document.getElementById("helperElement"),i&&(sf.base.remove(i),i.remove()));s||("mousemove"!=n.type||r)&&"mousemove"==n.type&&u||("mousemove"==n.type&&e&&a&&(r=!0,h.eventInvokeValue=++l),("keydown"==n.type||"keyup"==n.type||"scroll"!=n.type||"scroll"==n.type&&!f)&&t.invokeMethodAsync("InvokeDiagramEvents",h,c));"mouseup"!=n.type&&("mousemove"!=n.type||this[o])||n.currentTarget.focus()},isForeignObject:function(n,t){var i=n;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},getMouseEvents:function(n){var t={},i;return(t={altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,detail:n.detail,metaKey:n.metaKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY,type:n.type,key:n.key,keyCode:n.keyCode,button:n.button},n.currentTarget)?(i=this.measureScrollValues(n.currentTarget.id),t.diagramCanvasScrollBounds=i,t.diagramGetBoundingClientRect=n.currentTarget.getBoundingClientRect()):n.target&&(i=this.measureScrollValues(n.target.id),t.diagramCanvasScrollBounds=i,t.diagramGetBoundingClientRect=n.target.getBoundingClientRect()),"mousewheel"==n.type&&(n.preventDefault(),n.currentTarget.focus(),t.wheelDelta=n.wheelDelta,f=!0),"mousedown"==n.type&&(u=!0),"mouseup"==n.type&&(u=!1),this.isForeignObject(n.target,!0)||"mouseleave"!=n.type&&"mousmove"!=n.type&&"mousedown"!=n.type&&"mouseup"!=n.type&&"keydown"!=n.type&&"keyup"!=n.type||n.preventDefault(),t},initialiseModule:function(n,r,u){return t(this,void 0,void 0,function(){var t,f=this;return i(this,function(){return window.symbolPaletteInstance?(t={id:n.children[0].id,componentInstance:r,allowDrag:u},window.symbolPaletteInstance.push(t)):(t={id:n.children[0].id,componentInstance:r,allowDrag:u},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(t)),n.addEventListener("mousedown",function(n){f.invokePaletteEvents(n,r)}),n.addEventListener("mousemove",function(n){f.invokePaletteEvents(n,r)}),n.addEventListener("mouseup",function(n){f.invokePaletteEvents(n,r)}),n.addEventListener("mouseleave",function(n){f.invokePaletteEvents(n,r)}),setTimeout(function(){this.symbolPaletteDragAndDropModule=new y(n,window.symbolPaletteInstance)},100),[2]})})},invokePaletteEvents:function(n,t){var c,l,e,i,o,f,s,h;if(n.preventDefault(),l=this.palettegetMouseEvents(n),2===n.target.id.split("_").length&&(c=n.target.id.split("_")[0]),"mousemove"==n.type&&!r||"mousemove"!=n.type||!u){if(n&&n.target&&n.type&&(e=document.getElementById(n.target.id),i=void 0,e)){for(o=0;o<e.classList.length;o++)if("e-symbol-draggable"==e.classList[o]){(i=n.target).classList.add("e-symbol-hover");break}if(f=document.getElementsByClassName("e-symbol-hover"),f&&f.length>0)for(s=0;s<f.length;s++)h=f[s],(i&&i!=h||null==i)&&h.classList.remove("e-symbol-hover")}t.invokeMethodAsync("InvokePaletteEvents",l,c)}},palettegetMouseEvents:function(n){return{altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,detail:n.detail,metaKey:n.metaKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,offsetX:n.offsetX,offsetY:n.offsetY,type:n.type}}}}()},"./modules/sf-dialog.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Dialog=function(){"use strict";var n="e-dlg-target",t=function(){function t(n,t,i){this.hasFocusableNode=!1;this.createdEnabled=!1;this.element=n;this.dotNetRef=i;this.updateContext(t);this.element&&(this.element.blazor__instance=this)}return t.prototype.initialize=function(){this.dlgContainer=void 0;this.popupObj=null;this.calculatezIndex=1e3===this.zIndex;this.render();this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent",null);this.element.classList.remove("e-blazor-hidden");this.visible?this.dotNetRef.invokeMethodAsync("ShowDialog",null):this.isModal&&(this.dlgOverlay.style.display="none");this.setWidth();this.setMinHeight();this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight());this.bindEvent(this.element)},t.prototype.updateContext=function(n){sf.base.extend(this,this,n)},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":(sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),"auto"===this.width&&this.refreshPosition())},t.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&sf.base.setStyleAttribute(this.element,{minHeight:sf.base.formatUnit(this.minHeight)})},t.prototype.render=function(){var n=this,t;(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-device"),sf.base.isNullOrUndefined(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),sf.base.isNullOrUndefined(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging(),this.isModal&&sf.base.isNullOrUndefined(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),sf.base.isNullOrUndefined(this.element.parentElement))||(t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement,this.refElement=sf.base.createElement("div",{className:"e-dlg-ref-element"}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element));sf.base.isNullOrUndefined(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element));this.popupObj=new sf.popups.Popup(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.getTargetEle(this.target),actionOnScroll:"none",enableRtl:this.enableRtl,open:function(){n.enableResize&&n.resetResizeIcon();n.dotNetRef.invokeMethodAsync("OpenEvent",n.element.classList.toString())},close:function(){n.isModal&&(sf.base.addClass([n.dlgOverlay],"e-fade"),n.dlgContainer.style.display="none");n.hasFocusableNode=!1;n.dotNetRef.invokeMethodAsync("CloseEvent",n.element.classList.toString())}});this.positionChange();this.setEnableRTL()},t.prototype.checkPositionData=function(){sf.base.isNullOrUndefined(this.position)||(sf.base.isNullOrUndefined(this.position.X)||"number"==typeof this.position.X||this.isNumberValue(this.position.X)&&(this.position.X=parseFloat(this.position.X)),sf.base.isNullOrUndefined(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y)))},t.prototype.isNumberValue=function(n){return/^[-+]?\d*\.?\d+$/.test(n)},t.prototype.getTargetEle=function(n){var t;return sf.base.isNullOrUndefined(n)||"string"!=typeof n||(t=document.querySelector(n)),sf.base.isNullOrUndefined(t)?document.body:t},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var n=this.element.style.display;this.element.style.display="none";this.element.style.maxHeight=!sf.base.isNullOrUndefined(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px";this.element.style.display=n;sf.base.Browser.isIE&&"auto"===this.height&&!sf.base.isNullOrUndefined(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(n,t){this.zIndex=sf.popups.getZindexPartial(n);t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex;this.isModal&&this.setOverlayZindex(this.zIndex);this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target);this.popupObj.relateTo=this.targetEle;this.dragObj&&(this.dragObj.dragArea=this.targetEle);this.setMaxHeight();this.isModal&&this.targetEle.appendChild(this.dlgContainer);this.enableResize&&this.setResize()},t.prototype.resetResizeIcon=function(){var t=this.getMinHeight(),n;this.targetEle.offsetHeight<t&&(n=this.element.querySelector("."+this.resizeIconDirection),sf.base.isNullOrUndefined(n)||(n.style.bottom="-"+t.toString()+"px"))},t.prototype.getMouseEvtArgs=function(n){return{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,detail:n.detail,metaKey:n.metaKey,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey,type:n.type}},t.prototype.setAllowDragging=function(){var n=this;this.dragObj=new sf.base.Draggable(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(t){n.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:t.target.id},event:n.getMouseEvtArgs(t.event)});t.bindEvents(t.dragElement)},drag:function(t){n.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:t.target.id},event:n.getMouseEvtArgs(t.event)})},dragStop:function(t){n.isModal&&(sf.base.isNullOrUndefined(n.position)||n.dlgContainer.classList.remove("e-dlg-"+n.position.X+"-"+n.position.Y),n.element.style.position="relative");n.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:t.target.id},event:n.getMouseEvtArgs(t.event)});n.element.classList.remove("e-restrict-left")}});sf.base.isNullOrUndefined(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){var n=this.element.querySelector(".e-resize-handle");sf.base.isNullOrUndefined(n)||n.parentElement!==this.element||(sf.popups.removeResize(),this.setResize())},t.prototype.setResize=function(){if(this.enableResize){if(!sf.base.isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,n=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport");sf.popups.createResize({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,n.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(n.slice(0,n.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:"body"===this.target||"document.body"===this.target?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this});this.wireWindowResizeEvent()}else sf.popups.removeResize(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")},t.prototype.getMinHeight=function(){var t="0px",i="0px",r,u,n;return sf.base.isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))||(t=getComputedStyle(this.headerContent).height),r=sf.base.select(".e-footer-content",this.element),sf.base.isNullOrUndefined(r)||(i=getComputedStyle(r).height),u=parseInt(t.slice(0,t.indexOf("p")),10),n=parseInt(i.slice(0,i.indexOf("p")),10),sf.popups.setMinHeight(u+30+(isNaN(n)?0:n)),u+30+n},t.prototype.changePosition=function(n){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);this.updateContext(n);this.checkPositionData();this.positionChange()},t.prototype.setOverlayZindex=function(n){var t;t=sf.base.isNullOrUndefined(n)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:n;this.dlgOverlay.style.zIndex=(t-1).toString();this.dlgContainer.style.zIndex=t.toString()},t.prototype.focusContent=function(n){var t=this.getAutoFocusNode(n);(sf.base.isNullOrUndefined(t)?n:t).focus();this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(n){var i=n.querySelector(".e-dlg-closeicon-btn"),r=n.querySelectorAll("[autofocus]"),t=this.getValidFocusNode(r);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],sf.base.isNullOrUndefined(t)){if(t=this.focusableElements(this.contentEle),!sf.base.isNullOrUndefined(t))return t;if(!sf.base.isNullOrUndefined(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=t;return i},t.prototype.getValidFocusNode=function(n){for(var t,i=0;i<n.length;i++){if(((t=n[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.disableElement=function(n,t){var i=n?n.matches||n.webkitMatchesSelector||n.msGetRegionContent:null;if(i)for(;n;n=n.parentNode)if(_instanceof(n,Element)&&i.call(n,t))return n;return null},t.prototype.focusableElements=function(n){if(!sf.base.isNullOrUndefined(n)){var t=n.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getMaxHeight=function(n){return n.style.maxHeight},t.prototype.OnPropertyChanged=function(n,t){this.updateContext(n);for(var i=0,r=t;i<r.length;i++)switch(r[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)});break;case"height":this.setHeight();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.setAllowDragging();break;case"destroyDraggable":this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize()}},t.prototype.fullScreen=function(t){if(t){sf.base.addClass([this.element],"e-dlg-fullscreen");var i=this.element.style.display;this.element.style.display="none";this.element.style.maxHeight=sf.base.isNullOrUndefined(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px";this.element.style.display=i;sf.base.addClass([document.body],[n,"e-scroll-disabled"]);this.allowDragging&&!sf.base.isNullOrUndefined(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else sf.base.removeClass([this.element],"e-dlg-fullscreen"),sf.base.removeClass([document.body],[n,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging()},t.prototype.show=function(t,i,r){if(this.updateContext(r),!this.element.classList.contains("e-popup-open")||!sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(t)||this.fullScreen(t);this.element.style.maxHeight!==i&&(this.allowMaxHeight=!1,this.element.style.maxHeight=i);this.storeActiveElement=document.activeElement;this.element.tabIndex=-1;this.isModal&&sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay"));this.isModal&&!sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",sf.base.removeClass([this.dlgOverlay],"e-fade"),sf.base.isNullOrUndefined(this.targetEle)?sf.base.addClass([document.body],[n,"e-scroll-disabled"]):(this.dlgContainer.style.position=this.targetEle===document.body?"fixed":"absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",sf.base.addClass([this.targetEle],[n,"e-scroll-disabled"])));var u={name:this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},f=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(f,!0),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex));"None"===this.animationSettings.effect?this.popupObj.show():this.popupObj.show(u)}},t.prototype.hide=function(){this.isModal&&(sf.base.isNullOrUndefined(this.targetEle)?sf.base.removeClass([document.body],[n,"e-scroll-disabled"]):sf.base.removeClass([this.targetEle],[n,"e-scroll-disabled"]));var t={name:this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};"None"===this.animationSettings.effect?this.popupObj.hide():this.popupObj.hide(t)},t.prototype.refreshPosition=function(){this.isModal?(this.element.style.top=this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.popupObj.refreshPosition()},t.prototype.destroyDraggable=function(){sf.base.isNullOrUndefined(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroy=function(t,i){var u,e,r,f;if(this.updateContext(t),u=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"],sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(e=this.cssClass.split(" "),sf.base.removeClass([this.element],e)),sf.base.Browser.isDevice&&sf.base.removeClass([this.element],"e-device"),sf.base.removeClass([this.getTargetEle(this.target)],[n,"e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&sf.base.removeClass([document.body],[n,"e-scroll-disabled"]),this.isModal&&sf.base.removeClass([sf.base.isNullOrUndefined(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&this.element.classList.remove("e-dlg-resizable"),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0),i)for(r=0;r<this.element.children.length;r++)this.element.children[r].classList.add("e-hide");else if(!sf.base.isNullOrUndefined(this.element.children))for(r=0;r<=this.element.children.length;r++)r-=r,sf.base.detach(this.element.children[r]);for(r=0;r<u.length;r++)this.element.removeAttribute(u[r]);this.isModal&&(sf.base.detach(this.element.nextElementSibling),f=this.element.parentElement,f.removeAttribute("class"),f.removeAttribute("style"),this.element.classList.remove("e-dlg-modal"));this.element.classList.remove("e-dialog")},t.prototype.bindEvent=function(n){sf.base.EventHandler.add(n,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(n){sf.base.EventHandler.remove(n,"keydown",this.keyDown)},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.popupCloseHandler=function(){var n=document.activeElement;sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blur)||n.blur();sf.base.isNullOrUndefined(this.storeActiveElement)||sf.base.isNullOrUndefined(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.windowResizeHandler=function(){sf.popups.setMaxWidth(this.targetEle.clientWidth);sf.popups.setMaxHeight(this.targetEle.clientHeight);this.setMaxHeight()},t.prototype.onResizeStart=function(n){var t=this.getMouseEvtArgs(n);this.dotNetRef.invokeMethodAsync("ResizeStartEvent",t)},t.prototype.onResizing=function(n){this.dotNetRef.invokeMethodAsync("ResizingEvent",this.getMouseEvtArgs(n))},t.prototype.onResizeComplete=function(n){this.dotNetRef.invokeMethodAsync("ResizeStopEvent",this.getMouseEvtArgs(n))},t.prototype.getFocusElement=function(n){var t=n.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return t[t.length-1]},t.prototype.keyDown=function(n){var o=this;if(9===n.keyCode&&this.isModal){var t=void 0,u=void 0,i=this.element.querySelector(".e-footer-content");sf.base.isNullOrUndefined(i)||(u=i.querySelectorAll("button"),!sf.base.isNullOrUndefined(t)&&u.length>0&&(t=u[u.length-1]),sf.base.isNullOrUndefined(t)&&i.childNodes.length>0&&(t=this.getFocusElement(i)));sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(this.contentEle)&&(t=this.getFocusElement(this.contentEle));sf.base.isNullOrUndefined(t)||document.activeElement!==t||n.shiftKey||(n.preventDefault(),this.focusableElements(this.element).focus());document.activeElement===this.focusableElements(this.element)&&n.shiftKey&&(n.preventDefault(),sf.base.isNullOrUndefined(t)||t.focus())}if(27===n.keyCode&&this.closeOnEscape&&this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:n.altKey,ctrlKey:n.ctrlKey,code:n.code,key:n.key,location:n.location,repeat:n.repeat,shiftKey:n.shiftKey,metaKey:n.metaKey,type:n.type}),this.hasFocusableNode){var r=document.activeElement,f=["input","textarea"].indexOf(r.tagName.toLowerCase())>-1,e=!1;f||(e=r.hasAttribute("contenteditable")&&"true"===r.getAttribute("contenteditable"));(13===n.keyCode&&!n.ctrlKey&&"textarea"!==r.tagName.toLowerCase()&&f&&!sf.base.isNullOrUndefined(this.primaryButtonEle)||13===n.keyCode&&n.ctrlKey&&("textarea"===r.tagName.toLowerCase()||e)&&!sf.base.isNullOrUndefined(this.primaryButtonEle))&&setTimeout(function(){o.element.querySelector(".e-footer-content button.e-btn.e-primary").click()})}},t}();return{initialize:function(n,i,r){n&&(new t(n,i,r),n.blazor__instance.initialize())},getClassList:function(n){return n&&n.classList.toString()},getMaxHeight:function(n){return n?n.blazor__instance.getMaxHeight(n):null},changePosition:function(n){sf.base.isNullOrUndefined(n.element)||n.element.blazor__instance.changePosition(n)},focusContent:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.focusContent(n)},refreshPosition:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.refreshPosition()},popupCloseHandler:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.popupCloseHandler()},propertyChanged:function(n,t){sf.base.isNullOrUndefined(n.element)||n.element.blazor__instance.OnPropertyChanged(n,t)},show:function(n,t,i){i.element&&i.element.blazor__instance.show(n,t,i)},hide:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.hide()},destroy:function(n,t){var i=n&&n.element;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.blazor__instance)||i.blazor__instance.destroy(n,t)}}}()},"./modules/sf-drop-down-button.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.DropDownButton=function(){"use strict";var n="mousedown touchstart",t=function(){function t(n,t,i){this.element=n;this.dotNetRef=i;this.popup=t;this.element.blazor__instance=this;this.addScrollEvents(!0)}return t.prototype.openPopup=function(t){this.popup.style.visibility="hidden";document.body.appendChild(this.popup);t&&sf.splitbuttons.setBlankIconStyle(this.popup);this.popup.classList.remove("e-transparent");var r=sf.popups.getZindexPartial(this.element),i=this.element.parentElement.classList.contains("e-colorpicker-container");i&&this.element.parentElement.blazor__instance.setPaletteWidth(this.popup.querySelector(".e-container"),!1,r);this.setPosition(i);sf.base.EventHandler.remove(document,n,this.mouseDownHandler);this.addEventListener();this.popup.style.zIndex=r+"";this.popup.style.visibility="";i&&this.element.parentElement.blazor__instance.setOffset(this.popup,r);this.popup.firstElementChild&&(this.popup.firstElementChild.firstElementChild&&i?this.popup.firstElementChild.firstElementChild.focus():this.popup.firstElementChild.focus())},t.prototype.setPosition=function(n){var u,r,t=this.element.getBoundingClientRect(),i=this.popup.getBoundingClientRect();n&&sf.base.Browser.isDevice?(u=document.documentElement.clientWidth/2-i.width/2+pageXOffset,r=document.documentElement.clientHeight/2-i.height/2+pageYOffset):(u=t.left+pageXOffset,r=t.bottom+pageYOffset,t.bottom+i.height>document.documentElement.clientHeight&&r-t.height-i.height>document.documentElement.clientTop&&(r=r-t.height-i.height),t.left+i.width>document.documentElement.clientWidth&&t.right-i.width>document.documentElement.clientLeft&&(u=u+t.width-i.width));this.popup.style.left=Math.ceil(u)+"px";this.popup.style.top=Math.ceil(r)+"px"},t.prototype.mouseDownHandler=function(n){var r,u,t,i;this.popup.parentElement?(r=n.target,u=!0,!sf.base.Browser.isDevice&&r.classList.contains("e-hsv-model")&&(t=r.parentElement.getBoundingClientRect(),i=this.element.getBoundingClientRect(),u=n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom||n.clientX>=i.left&&n.clientX<=i.right&&n.clientY>=i.top&&n.clientY<=i.bottom),u&&(sf.base.closest(r,"#"+this.getDropDownButton().id)||sf.base.closest(n.target,"#"+this.popup.id)||sf.base.closest(n.target,".e-colorpicker.e-modal"))||(this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),this.removeEventListener())):this.removeEventListener()},t.prototype.keydownHandler=function(n){var i=this.getElement(),r=this.element.parentElement.classList.contains("e-colorpicker-container"),u=this.element.parentElement.classList.contains("e-rtl"),t;if(r&&this.element.parentElement.blazor__instance.paletteKeyDown(n,u),n.altKey)38===n.keyCode&&(n.stopPropagation(),n.preventDefault(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),i.focus(),this.removeEventListener());else{if(t=this.popup.firstElementChild,(27===n.keyCode||9===n.keyCode&&!r)&&(n.stopPropagation(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),27===n.keyCode&&n.preventDefault(),i.focus(),this.removeEventListener()),!t||!t.classList.contains("e-dropdown-menu"))return;if(13===n.keyCode)return n.preventDefault(),void(n.target.classList.contains("e-item")&&n.target.classList.contains("e-focused")?(i.focus(),this.removeEventListener()):n.stopPropagation());38!==n.keyCode&&40!==n.keyCode||(n.target.classList.contains("e-dropdown-menu")&&n.stopPropagation(),n.preventDefault(),sf.splitbuttons.upDownKeyHandler(t,n.keyCode))}},t.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},t.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName("e-dropdown-btn")[0]:this.element},t.prototype.clickHandler=function(n){sf.base.closest(n.target,".e-item")&&(this.removeEventListener(),this.getElement().focus())},t.prototype.scrollHandler=function(n){var t,i;this.popup&&document.getElementById(this.popup.id)?(t=this.element.parentElement.classList.contains("e-colorpicker-container"),this.setPosition(t),t&&this.element.parentElement.blazor__instance.setOffset(this.popup)):(i=this.getDropDownButton(),i&&document.getElementById(i.id)||sf.base.EventHandler.remove(n.target,"scroll",this.scrollHandler))},t.prototype.addEventListener=function(t){if(sf.base.EventHandler.add(document,n,this.mouseDownHandler,this),sf.base.EventHandler.add(this.popup,"click",this.clickHandler,this),sf.base.EventHandler.add(this.popup,"keydown",this.keydownHandler,this),t&&this.popup.firstElementChild){var i=this.popup.querySelector(".e-focused");i?i.focus():this.popup.firstElementChild.focus()}},t.prototype.removeEventListener=function(t){if(sf.base.EventHandler.remove(document,n,this.mouseDownHandler),this.popup.parentElement&&(sf.base.EventHandler.remove(this.popup,"click",this.clickHandler),sf.base.EventHandler.remove(this.popup,"keydown",this.keydownHandler),t)){var i=this.getDropDownButton();i&&document.getElementById(i.id)&&(this.addScrollEvents(!1),this.element.appendChild(this.popup))}},t.prototype.addScrollEvents=function(n){for(var r,t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++)r=i[t],n?sf.base.EventHandler.add(r,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(r,"scroll",this.scrollHandler)},t}();return{openPopup:function(n,i,r,u){sf.base.isNullOrUndefined(n)||(sf.base.isNullOrUndefined(n.blazor__instance)?new t(n,i,r):n.blazor__instance.popup=i,n.blazor__instance.openPopup(u))},addEventListener:function(n){n.blazor__instance.removeEventListener();n.blazor__instance.addEventListener(!0)},removeEventListener:function(n){n.blazor__instance.removeEventListener(!0)}}}()},"./modules/sf-dropdownlist.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.DropDownList=function(){"use strict";var n="e-list-group-item",t=function(){function t(n,t,i,r){this.activeIndex=null;this.prevSelectPoints={};this.containerElement=n;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i}return t.prototype.initialize=function(){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"};sf.base.Browser.isDevice||new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"});"SfComboBox"===this.options.moduleName&&sf.base.EventHandler.add(this.element,"keydown",this.onFilterDown,this)},t.prototype.setAutoFillSelection=function(n){this.isAndroidAutoFill(n)||this.autoFillSelection(n)},t.prototype.onFilterDown=function(n){13!==n.keyCode&&40!==n.keyCode&&38!==n.keyCode&&9!==n.keyCode&&(this.prevSelectPoints=this.getSelectionPoints())},t.prototype.getSelectionPoints=function(){var n=this.element;return{start:Math.abs(n.selectionStart),end:Math.abs(n.selectionEnd)}},t.prototype.autoFillSelection=function(n){var i=this.getSelectionPoints(),t=this.element.value.substr(0,i.start),r;t&&t.toLowerCase()===n.substr(0,i.start).toLowerCase()?(r=t+n.substr(t.length,n.length),this.element.value=r,this.element.setSelectionRange(i.start,this.element.value.length)):(this.element.value=n,this.element.setSelectionRange(0,this.element.value.length))},t.prototype.isAndroidAutoFill=function(n){if(sf.base.Browser.isAndroid){var r=this.getSelectionPoints(),t=this.prevSelectPoints.end,u=r.end,i=this.prevSelectPoints.start,f=r.start;return 0!==t&&(t===n.length&&i===n.length||i>f&&t>u||t===u&&i===f)}return!1},t.prototype.removeFillSelection=function(){var n=this.getSelectionPoints();this.element.setSelectionRange(n.end,n.end)},t.prototype.keyActionHandler=function(n){var t={Action:n.action,Key:n.key,Events:n,Type:n.type};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyActionHandler",t);"tab"!==n.action&&"close"!==n.action&&"space"!==n.action&&"enter"!==n.action&&"open"!==n.action&&("SfDropDownList"===this.options.moduleName||"home"!==n.action&&"end"!==n.action)&&n.preventDefault()},t.prototype.getOffsetValue=function(n){var t=getComputedStyle(n),i=parseInt(t.borderTopWidth,10),r=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+r)},t.prototype.setPopupPosition=function(n){var i,e=n,r=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),o=this.isEmptyList()?this.list:this.liCollections[0],c=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],t=o.getBoundingClientRect().height,u=this.list.offsetHeight/2,f=sf.base.isNullOrUndefined(r)?o.offsetTop:r.offsetTop,s,h;return c.offsetTop-u<f&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(r)?(s=this.list.offsetHeight/t,h=parseInt(getComputedStyle(this.list).paddingBottom,10),i=(s-(this.liCollections.length-this.activeIndex))*t-e+h,this.list.scrollTop=r.offsetTop):f>u?(i=u-t/2,this.list.scrollTop=f-u+t/2):i=f,-(i=i+t+e-(t-this.containerElement.offsetHeight)/2)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.renderPopup=function(n,t,i,r,u){var p,c,l,f,a,e,w,o,b,k,s,v,d,h,y,g;if(this.options=u,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content"),this.liCollections=this.getItems(),l=0,f=sf.base.formatUnit(this.options.popupHeight),(this.wireListEvents(),n)&&(a=document.getElementById(n.id),a&&sf.base.remove(a)),(document.body.appendChild(n),n.style.visibility="hidden",this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName?(this.filterInput=n.querySelector("input.e-input"),c=this.filterInput.parentElement,new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})):this.filterInput=this.element),"auto"!==this.options.popupHeight)?(e=0,(sf.base.isNullOrUndefined(c)||(e=c.parentElement.getBoundingClientRect().height,f=(parseInt(f,10)-e).toString()+"px"),n.querySelector(".e-ddl-header"))&&(w=n.querySelector(".e-ddl-header"),o=Math.round(w.getBoundingClientRect().height),f=(parseInt(f,10)-(o+e)).toString()+"px"),n.querySelector(".e-ddl-footer")&&(b=n.querySelector(".e-ddl-footer"),o=Math.round(b.getBoundingClientRect().height),f=(parseInt(f,10)-(o+e)).toString()+"px"),this.list.style.maxHeight=(parseInt(f,10)-2).toString()+"px",n.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)):n.style.height="auto",(this.list&&this.list.querySelector(".e-active")&&this.setScrollPosition(),sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName))&&(l=this.getOffsetValue(n),k=this.isEmptyList()?this.list:this.liCollections[0],p=-(parseInt(getComputedStyle(k).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))),this.popupCreation(n,l,p),this.checkCollision(n),sf.base.Browser.isDevice&&(this.popupObj.element.classList.add("e-ddl-device"),("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&(this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition())),n.style.visibility="visible",sf.base.addClass([n],"e-popup-close"),sf.base.Browser.isDevice){if("SfDropDownList"===this.options.moduleName&&!this.options.allowFiltering||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)for(s=0,v=this.popupObj.getScrollableParent(this.containerElement);s<v.length;s++)d=v[s],sf.base.EventHandler.add(d,"scroll",this.scrollHandler,this);this.isFilterLayout()&&sf.base.EventHandler.add(this.list,"scroll",this.listScroll,this)}if(null!==i&&null!==i.popup&&r){for(h=0,y=Object.keys(i.popup);h<y.length;h++)switch(y[h]){case"collision":i.popup.collision&&(this.popupObj.collision.X!==i.popup.collision.X.toLowerCase()||this.popupObj.collision.Y!==i.popup.collision.Y.toLowerCase())&&(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":this.popupObj.position&&(this.popupObj.position.X!==i.popup.position.X||this.popupObj.position.Y!==i.popup.position.Y)&&(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}this.popupObj.dataBind();this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this);sf.base.attributes(this.containerElement,{"aria-expanded":"true"});g=this.options.allowFiltering?this.filterInput.parentElement:this.containerElement;sf.base.addClass([g],["e-input-focus"]);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this);sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver);sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.onMouseOver=function(n){var t=sf.base.closest(n.target,".e-list-item");this.setHover(t)},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.scrollHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.setFloatingHeader=function(t){var i=this.popupContainer&&this.popupContainer.querySelector(".e-content");i&&i.classList.contains("e-nodata")&&this.fixedHeaderElement?(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null):this.list&&this.list.querySelector("li")&&(sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(n)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t))},t.prototype.setFixedHeader=function(){var t,i,r;this.list.parentElement.style.display="block";t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));i=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px";sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});r=this.list.querySelector("."+n);this.fixedHeaderElement.innerHTML=r.innerHTML},t.prototype.scrollStop=function(t){for(var u,f=t.target,r=this.list.querySelectorAll("li"),e=parseInt(getComputedStyle(r[0],null).getPropertyValue("height"),10),i=Math.round(f.scrollTop/e);i>-1;i--){if(!sf.base.isNullOrUndefined(r[i])&&r[i].classList.contains(n)){u=r[i];this.fixedHeaderElement.innerHTML=u.innerHTML;this.fixedHeaderElement.style.top=t.target.scrollTop+"px";this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none";this.fixedHeaderElement.style.top="none"}},t.prototype.isFilterLayout=function(){return"SfDropDownList"===this.options.moduleName&&this.options.allowFiltering},t.prototype.setSearchBoxPosition=function(){var n=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%";this.popupObj.element.style.width="100%";this.list.style.maxHeight=window.innerHeight-n+"px";this.list.style.height=window.innerHeight-n+"px"},t.prototype.checkCollision=function(n){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfDropDownList"!==this.options.moduleName)&&sf.popups.isCollide(n).length>0&&(n.style.marginTop=-parseInt(getComputedStyle(n).marginTop,10)+"px")},t.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)},t.prototype.refreshPopup=function(){this.isPopupOpen()&&(this.popupObj.refreshPosition(this.containerElement),this.popupObj.element.querySelector(".e-content").classList.contains("e-nodata")&&this.fixedHeaderElement&&(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null))},t.prototype.popupCreation=function(t,i,r){var u=this;this.popupContainer=t;this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.options.enableRtl,offsetX:r,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){var n,t,i;for(sf.base.EventHandler.remove(u.list,"scroll",u.setFloatingHeader),sf.base.removeClass([u.containerElement],"e-icon-anim"),u.fixedHeaderElement=null,u.popupHolder.appendChild(u.popupContainer),u.unWireListEvents(),n=0,t=u.popupObj.getScrollableParent(u.containerElement);n<t.length;n++)i=t[n],sf.base.EventHandler.remove(i,"scroll",u.scrollHandler);sf.base.Browser.isDevice&&u.isFilterLayout()&&(sf.base.removeClass([document.body,u.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(u.list,"scroll",u.listScroll));u.options.enableVirtualization&&sf.base.EventHandler.remove(u.list,"scroll",u.virtualScroll);u.popupObj&&u.popupObj.destroy();!u.isDisposed&&document.body.contains(u.element)&&u.dotNetRef.invokeMethodAsync("ClosePopup").catch(function(){});u.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",u.onDocumentClick,u);u.options.allowFiltering&&u.filterInput&&u.filterInput.focus();u.list.querySelector("li")&&u.list.querySelector("li").classList.contains(n)&&sf.base.EventHandler.add(u.list,"scroll",u.setFloatingHeader,u)},targetExitViewport:function(){sf.base.Browser.isDevice||u.isDisposed||u.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){var n,t;this.popupObj&&this.popupObj.element&&(n=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10),n=0==n?1:n,t=this.popupObj.element.classList.contains("e-popup-open"),this.list.scrollTop+this.list.offsetHeight+n>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandler"))},t.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},t.prototype.setWidth=function(){var n=sf.base.formatUnit(this.options.popupWidth),t;return n.indexOf("%")>-1&&(n=(this.containerElement.offsetWidth*parseFloat(n)/100).toString()+"px"),sf.base.Browser.isDevice&&!this.options.allowFiltering&&(t=this.isEmptyList()?this.list:this.liCollections[0],n=parseInt(n,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))+"px"),n},t.prototype.onDocumentClick=function(n){var t=n.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"#"+this.popupObj.element.id)||this.containerElement.contains(n.target)?t===this.element||this.options.allowFiltering&&t===this.filterInput||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||n.preventDefault():(this.containerElement.classList.contains("e-input-focus")||this.isPopupOpen()&&!this.isDisposed)&&this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.closePopup=function(n,t){(this.options=t,this.isPopupOpen()&&!n.cancel&&this.popupObj)&&this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0}))},t.prototype.setScrollPosition=function(n){if(sf.base.isNullOrUndefined(n))this.scrollBottom(!0);else switch(n.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){var i;if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var r=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),f=this.list.offsetHeight,o=this.list.querySelector("li").classList.contains(n),e=r.offsetTop+r.offsetHeight-this.list.scrollTop,u=this.list.scrollTop+e-f;u=t?u+2*parseInt(getComputedStyle(this.list).paddingTop,10):u;i=r.offsetTop+r.offsetHeight-this.list.scrollTop;i=o&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;0===this.activeIndex?this.list.scrollTop=0:(e>f||!(i>0&&this.list.offsetHeight>i))&&(this.list.scrollTop=u)}},t.prototype.scrollTop=function(){var r;if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),t=i.offsetTop-this.list.scrollTop,u=this.list.querySelector("li").classList.contains(n);t=u&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?t-this.fixedHeaderElement.offsetHeight:t;r=i.offsetTop+i.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:r>0&&this.list.offsetHeight>r||(this.list.scrollTop=i.offsetTop-(u&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.setHover=function(n){n&&!n.classList.contains("e-hover")&&(this.removeHover(),sf.base.addClass([n],"e-hover"))},t.prototype.removeHover=function(){if(this.list){var n=this.list.querySelectorAll(".e-hover");n&&n.length&&sf.base.removeClass(n,"e-hover")}},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t}();return{initialize:function(n,i,r,u){i&&(new t(n,i,r,u),i.blazor__instance&&i.blazor__instance.initialize())},renderPopup:function(n,t,i,r,u,f,e){n&&n.blazor__instance&&t&&i&&n.blazor__instance.renderPopup(t,i,r,u,f,e)},refreshPopup:function(n){n&&n.blazor__instance&&n.blazor__instance.refreshPopup()},closePopup:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.closePopup(t,i)},updateScrollPosition:function(n,t){n&&n.blazor__instance&&n.blazor__instance.setScrollPosition(t)},getPageCount:function(n){var t=n&&n.querySelector(".e-content"),i;return t?(i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height"),Math.round(t.getBoundingClientRect().height/parseInt(i,10))):0},setAutoFillSelection:function(n,t){n&&n.blazor__instance&&n.blazor__instance.setAutoFillSelection(t)},removeFillSelection:function(n){n&&n.blazor__instance&&n.blazor__instance.removeFillSelection()},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()},destroy:function(n,t,i,r,u){n&&n.blazor__instance&&(t&&_instanceof(t,HTMLElement)&&i&&(n.blazor__instance.isDisposed=!0,n.blazor__instance.closePopup(r,u)),n.blazor__instance.destroy())}}}()},"./modules/sf-filemanager.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.FileManager=function(){"use strict";var n="e-blur",t=function(){function t(n,t,i){this.element=n;this.properties=i;this.treeviewEle=n.querySelector(".e-navigation .e-treeview");this.dotnetRef=t;sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,this.element.blazor__instance=this);this.bindKeyboardEvent();this.bindTreeViewKeyBoardEvent();this.wireEvents()}return t.prototype.unWireMobileEvents=function(){this.clickObj.destroy()},t.prototype.wireMobileEvents=function(){var n,t=this;n="Details"===this.properties.view?this.element.querySelector(".e-view-container .e-grid .e-gridcontent"):this.element.querySelector(".e-view-container .e-large-icons");this.clickObj=new sf.base.Touch(n,{tapHold:function(n){var i,r;r="Details"===t.properties.view?(i=sf.base.closest(n.originalEvent.target,".e-row"))?i.getAttribute("aria-rowindex"):null:(i=sf.base.closest(n.originalEvent.target,"li.e-list-item"))?i.getAttribute("data-uid"):null;null!=i&&null!=r&&t.dotnetRef.invokeMethodAsync("ChangeMobileMultiSelection",r)}})},t.prototype.wireEvents=function(){var n=this.element.querySelector("#"+this.properties.id+"_grid");n&&sf.base.EventHandler.add(n,"dblclick",this.gridBlur,this)},t.prototype.unWireEvents=function(){var n=this.element.querySelector("#"+this.properties.id+"_grid");n&&sf.base.EventHandler.remove(n,"dblclick",this.gridBlur)},t.prototype.adjustHeight=function(){var n=sf.base.select("#"+this.element.id+"_toolbar",this.element),t=n?n.offsetHeight:0,i=this.element.querySelector(".e-address").offsetHeight,r=this.element.clientHeight-t-i;return sf.base.formatUnit(this.element.clientHeight-t)+" "+sf.base.formatUnit(r)},t.prototype.createDragObj=function(){var n,t,i=this;"LargeIcons"===this.properties.view?(n=this.element.querySelector(".e-large-icons ul"),t=".e-large-icon"):(n=this.element.querySelector(".e-grid.e-control"),t=".e-row");this.properties.draggable?(this.dragObj&&this.dragObj.destroy(),n&&(this.dragObj=new sf.base.Draggable(n,{cursorAt:{left:44,top:18},enableTailMode:!0,dragArea:this.element,dragTarget:".e-fullrow",drag:this.draggingHandler.bind(this),dragStart:function(n){i.dragStartHandler(n)},dragStop:this.dragStopHandler.bind(this),enableAutoScroll:!0,helper:this.dragHelper.bind(this)}))):this.properties.draggable||this.dragObj.destroy();this.treeviewEle?(this.treeDragObj&&this.treeDragObj.destroy(),this.treeDragObj=new sf.base.Draggable(this.treeviewEle,{cursorAt:{left:44,top:18},enableTailMode:!0,dragArea:this.element,dragTarget:t,drag:this.draggingHandler.bind(this),dragStart:function(n){i.dragStartHandler(n)},dragStop:this.dragStopHandler.bind(this),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})):this.properties.draggable||this.treeDragObj.destroy()},t.prototype.dragHelper=function(n){var t=n.sender.target;return this.getModule(t),"largeiconsview"===this.activeModule||"navigationpane"===this.activeModule?this.dragLi=sf.base.closest(t,".e-list-item"):"detailsview"===this.activeModule&&(this.dragLi=sf.base.closest(t,"tr.e-row"),"false"==this.dragLi.getAttribute("aria-selected")&&t.click()),this.dragLi?(this.createVirtualDragElement(),this.virtualDragElement):null},t.prototype.createVirtualDragElement=function(){var n,t,i;this.updateViewElement();this.updateDragValues();this.cloneIcon=sf.base.createElement("div",{className:"e-fe-icon "+this.dragType});this.cloneName=sf.base.createElement("div",{className:"e-fe-name",innerHTML:this.dragName});n=sf.base.createElement("div",{className:"e-fe-content"});n.appendChild(this.cloneIcon);n.appendChild(this.cloneName);t=sf.base.createElement("div",{className:"e-fe-clone"});(t.appendChild(n),this.dragCount>1)&&(i=sf.base.createElement("span",{className:"e-fe-count",innerHTML:this.dragCount.toString(10)}),t.appendChild(i));this.virtualDragElement=t;this.element.appendChild(this.virtualDragElement)},t.prototype.getModule=function(n){n&&(this.activeModule=sf.base.closest(n,".e-row")?"detailsview":sf.base.closest(n,".e-large-icon")?"largeiconsview":"navigationpane")},t.prototype.getXYValue=function(n,t){var u,i=n.changedTouches,r;return(u="X"===t?i?i[0].clientX:n.clientX:i?i[0].clientY:n.clientY)||"focus"!==n.type||!n.target||(r=n.target.getBoundingClientRect(),u=r?"X"===t?r.left:r.top:null),Math.ceil(u)},t.prototype.removeDestroyElement=function(){this.dragObj.intDestroy(this.dragStartArgs.event);this.dragCancel()},t.prototype.TriggerDragEvent=function(n){n&&this.removeDestroyElement()},t.prototype.UpdateGridFocus=function(n){var t,r,i;if("Details"==this.properties.view){if(this.updateViewElement(),t=this.viewElem.querySelectorAll(".e-focused"),r=this.viewElem.querySelector('[aria-rowindex="'+n.toString()+'"]'),t)for(i=0;i<t.length;i++)sf.base.closest(t[i],"tr").getAttribute("aria-rowindex")!=n.toString()&&(sf.base.closest(t[i],"tr").removeAttribute("tabindex"),sf.base.removeClass([t[i]],["e-focus","e-focused"]));sf.base.isNullOrUndefined(r)||(this.viewElem.setAttribute("tabindex","-1"),r.setAttribute("tabindex","0"),sf.base.addClass([r],["e-focus","e-focused"]))}},t.prototype.TriggerDragStartEvent=function(n){var t,i;n?this.removeDestroyElement():(this.dragStartArgs.bindEvents(this.dragStartArgs.dragElement),t=this.dragStartArgs,t.cancel=!1,this.getModule(this.dragStartArgs.target),i=this.element.querySelector(".e-navigation .e-treeview ul li").getAttribute("data-uid"),this.properties.draggable&&("navigationpane"!==this.activeModule||sf.base.closest(this.dragStartArgs.target,"li").getAttribute("data-uid")!==i)||(t.cancel=!0),this.removeBlur(),t.cancel?this.removeDestroyElement():t.cancel||(this.updateViewElement(),this.blurActive(),this.updateDragValues()))},t.prototype.dragStartHandler=function(n){this.dragStartArgs=n;this.UpdateXY(n);this.dotnetRef.invokeMethodAsync("DragStartCall",this.dragLeft,this.dragTop)},t.prototype.blurActive=function(){for(var t=0,i=this.viewElem.querySelectorAll(".e-active");t<i.length;)i[t].classList.add(n),t++},t.prototype.updateViewElement=function(){this.viewElem="LargeIcons"===this.properties.view?this.element.querySelector(".e-large-icons"):this.element.querySelector(".e-gridcontent")},t.prototype.getIconClass=function(n){return n.querySelector(".e-list-img")?"e-fe-image":n.querySelector(".e-list-icon").classList[1]},t.prototype.updateDragValues=function(){var n;"largeiconsview"===this.activeModule?(n=this.viewElem.querySelectorAll(".e-active"),this.dragName=n.length>0?n[0].querySelector(".e-list-text").textContent:"",this.dragType=n.length>0?this.getIconClass(n[0]):""):"detailsview"===this.activeModule?null!=(n=this.viewElem.querySelectorAll('tr[aria-selected="true"]'))&&n.length>0&&(this.dragName=n.length>0?n[0].querySelector(".e-fe-text").textContent:"",this.dragType=n.length>0?n[0].querySelector(".e-fe-icon").classList[1]:""):"navigationpane"===this.activeModule&&(this.dragName=this.dragLi.querySelector(".e-list-text").textContent,this.dragType="e-fe-folder");null!=n&&(this.dragCount=n.length)},t.prototype.getTargetModule=function(n){n&&(this.targetModule=sf.base.closest(n,".e-gridcontent")?"detailsview":sf.base.closest(n,".e-large-icons")?"largeiconsview":n.classList.contains("e-fullrow")||n.classList.contains("e-icon-expandable")?"navigationpane":sf.base.closest(n,".e-address-list-item")?"breadcrumbbar":"")},t.prototype.draggingHandler=function(t){var r=!1,i;this.updateDragValues();this.cloneIcon.setAttribute("class","e-fe-icon "+this.dragType);this.cloneName.innerHTML=this.dragName;i=null;this.blurActive();this.getTargetModule(t.target);this.removeDropTarget();this.removeBlur("hover");"navigationpane"===this.targetModule?((i=sf.base.closest(t.target,"li")).classList.add("e-hover","e-fe-drop-folder"),r=!0):"detailsview"===this.targetModule?((i=sf.base.closest(t.target,"tr"))&&i.querySelector(".e-fe-folder")&&!i.classList.contains(n)?i.classList.add("e-fe-drop-folder"):!i||i.querySelector(".e-fe-folder")||i.classList.contains(n)||i.classList.add("e-fe-drop-file"),r=!0):"largeiconsview"===this.targetModule?((i=sf.base.closest(t.target,"li"))&&i.querySelector(".e-fe-folder")&&!i.classList.contains(n)&&i.classList.add("e-hover","e-fe-drop-folder"),r=!0):"breadcrumbbar"===this.targetModule&&(r=!0);this.element.classList.remove("e-fe-drop","e-no-drop");this.element.classList.add(r?"e-fe-drop":"e-no-drop");this.UpdateXY(t);this.dotnetRef.invokeMethodAsync("DraggingCall",this.dragLeft,this.dragTop)},t.prototype.UpdateXY=function(n){this.dragLeft=this.getXYValue(n.event,"X");this.dragTop=this.getXYValue(n.event,"Y")},t.prototype.dragStopHandler=function(n){var t,i,r=!1,f,u;(n.cancel=!1,this.removeDropTarget(),this.element.classList.remove("e-fe-drop","e-no-drop"),this.dragCancel(),this.getTargetModule(n.target),""===this.targetModule&&n.target.classList.contains("e-view-container")&&(r=!0),this.removeBlur("hover"),"largeiconsview"===this.targetModule||"navigationpane"===this.targetModule||"breadcrumbbar"===this.targetModule)?(t=sf.base.closest(n.target,"li"),f="breadcrumbbar"===this.targetModule?"data-utext":"data-uid",i=t?t.getAttribute(f):null):"detailsview"===this.targetModule&&(i=(t=sf.base.closest(n.target,"tr"))?t.getAttribute("aria-rowindex"):null);null==i&&(r=!0);u=this.treeviewEle?this.dragLi.getAttribute("data-uid"):null;"detailsview"===this.activeModule&&(u=this.dragLi.getAttribute("aria-rowindex"));this.UpdateXY(n);this.dotnetRef.invokeMethodAsync("DragStopCall",u,i,this.targetModule,this.activeModule,r,this.dragLeft,this.dragTop);this.dragCount=0;this.dragName="";this.dragType=""},t.prototype.dragCancel=function(){this.removeBlur();var n=sf.base.select(".e-fe-clone",this.element);n&&sf.base.detach(n)},t.prototype.gridBlur=function(n){var t=n.target;"TD"===t.tagName&&t.blur()},t.prototype.removeItemClass=function(n){for(var i=this.element.querySelectorAll("."+n),t=0;t<i.length;t++)i[t].classList.remove(n)},t.prototype.removeDropTarget=function(){this.removeItemClass("e-fe-drop-folder");this.removeItemClass("e-fe-drop-file")},t.prototype.removeBlur=function(t){for(var r=t?this.element.querySelectorAll(".e-hover"):this.element.querySelectorAll("."+n),i=0;i<r.length;)r[i].classList.remove(t?"e-hover":n),i++},t.prototype.bindTreeViewKeyBoardEvent=function(){var n=this.element.querySelector(".e-navigation");n&&new sf.base.KeyboardEvents(n,{keyAction:this.treeviewKeydownHandler.bind(this),keyConfigs:{altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftF10:"shift+f10"},eventName:"keydown"})},t.prototype.bindKeyboardEvent=function(){var n,t,i;"Details"===this.properties.view?(n={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:"ctrl+a",enter:"enter"},t=this.element.querySelector("#"+this.properties.id+"_grid"),t&&this.bindKeyboardEvents(n,t)):"LargeIcons"===this.properties.view&&(n={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u",end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"},i=this.element.querySelector("#"+this.properties.id+"_largeicons"),i&&this.bindKeyboardEvents(n,i))},t.prototype.bindKeyboardEvents=function(n,t){this.keyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyupHandler.bind(this),keyConfigs:n,eventName:"keyup"});this.keyboardDownModule=new sf.base.KeyboardEvents(t,{keyAction:this.keydownHandler.bind(this),keyConfigs:n,eventName:"keydown"})},t.prototype.getRowValue=function(){var t=this.element.querySelector("#"+this.element.id+"_largeicons").querySelectorAll(".e-list-item"),i=1,n,r;if(t)for(n=0,r=t.length-1;n<r&&t[n].getBoundingClientRect().top===t[n+1].getBoundingClientRect().top;n++)i++;return i},t.prototype.keyupHandler=function(n){var i,t;n.preventDefault();i=0;"LargeIcons"===this.properties.view&&(i=this.getRowValue());t=null;switch(n.action){case"altN":t="NewFolder";break;case"f5":t="Refresh";break;case"ctrlShift1":t="DetailsView";break;case"ctrlShift2":t="LargeIconsView";break;case"ctrlU":t="Upload";break;case"altEnter":t="Details";break;case"del":case"shiftdel":t="Delete";break;case"enter":t="Open";break;case"ctrlC":t="Copy";break;case"ctrlV":t="Paste";break;case"ctrlX":t="Cut";break;case"ctrlD":t="Download";break;case"f2":t="Rename";break;case"ctrlA":t="SelectAll";break;case"home":t="Home";break;case"end":t="End";break;case"moveDown":t="MoveDown_"+i.toString();break;case"moveLeft":t="MoveLeft";break;case"moveRight":t="MoveRight";break;case"moveUp":t="MoveUp_"+i.toString();break;case"esc":t="Esc";break;case"ctrlLeft":t="ControlLeft";break;case"ctrlRight":t="ControlRight";break;case"ctrlEnd":t="ControlEnd";break;case"ctrlHome":t="ControlHome";break;case"shiftHome":t="ShiftHome";break;case"shiftEnd":t="ShiftEnd";break;case"shiftLeft":t="ShiftLeft";break;case"shiftRight":t="ShiftRight";break;case"csHome":t="ControlShiftHome";break;case"csEnd":t="ControlShiftEnd";break;case"csLeft":t="ControlShiftLeft";break;case"csRight":t="ControlShiftRight";break;case"ctrlUp":t="ControlUp_"+i.toString();break;case"shiftUp":t="ShiftUp_"+i.toString();break;case"csUp":t="ControlShiftUp_"+i.toString();break;case"ctrlDown":t="ControlDown_"+i.toString();break;case"shiftDown":t="ShiftDown_"+i.toString();break;case"csDown":t="ControlShiftDown_"+i.toString();break;case"space":t="Space";break;case"csSpace":t="ControlShiftSpace";break;case"shiftSpace":t="ShiftSpace";break;case"ctrlSpace":t="ControlSpace";break;case"tab":t="Tab"}t&&this.dotnetRef.invokeMethodAsync("PerformKeyboardAction",t)},t.prototype.treeviewKeydownHandler=function(n){if(n.preventDefault(),null==this.element.querySelector(".e-dialog.e-popup-open")){var t=null;switch(n.action){case"altEnter":t="Details";break;case"esc":t="Esc";break;case"del":t="Delete";break;case"ctrlC":t="Copy";break;case"ctrlV":t="Paste";break;case"ctrlX":t="Cut";break;case"shiftF10":t="Download";break;case"f2":t="Rename"}t&&this.dotnetRef.invokeMethodAsync("PerformTreeViewKeyboardAction",t)}},t.prototype.keydownHandler=function(n){if(null==this.element.querySelector(".e-dialog.e-popup-open"))switch(n.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":case"ctrlD":case"altN":case"f5":case"ctrlShift1":case"ctrlShift2":case"ctrlU":n.preventDefault()}},t}();return{initialize:function(n,i,r,u){return new t(n,i,r),r.draggable&&n.blazor__instance.createDragObj(),n.blazor__instance.isMobile=u,n.blazor__instance.adjustHeight()},dragStartActionContinue:function(n,t){n&&n.blazor__instance.TriggerDragStartEvent(t)},wireMobileEvents:function(n){n.blazor__instance.wireMobileEvents()},dragActionContinue:function(n,t){n&&n.blazor__instance.TriggerDragEvent(t)},focusItem:function(n,t){if(n&&"LargeIcons"===n.blazor__instance.properties.view){var i=n.querySelector('.e-list-item.e-large-icon[data-uid="'+t+'"]');i&&i.focus()}},updateProperties:function(n,t){return n.blazor__instance.properties=t,n.blazor__instance.unWireEvents(),n.blazor__instance.wireEvents(),n.blazor__instance.isMobile&&(n.blazor__instance.unWireMobileEvents(),n.blazor__instance.wireMobileEvents()),n.blazor__instance.adjustHeight()},uploadOpen:function(n,t,i){var r=(sf.base.isNullOrUndefined(i)?n:document.querySelector(i)).querySelector("#"+t);r&&r.click()},triggerBlur:function(n){n&&"TD"===document.activeElement.tagName&&document.activeElement.blur()},updateFocus:function(n,t){n&&n.blazor__instance.UpdateGridFocus(t)},updateView:function(n,t){n&&(n.blazor__instance.properties.view=t,n.blazor__instance.keyboardDownModule.destroy(),n.blazor__instance.keyboardModule.destroy(),n.blazor__instance.bindKeyboardEvent(),n.blazor__instance.isMobile&&(n.blazor__instance.unWireMobileEvents(),n.blazor__instance.wireMobileEvents()));n.blazor__instance.properties.draggable&&n.blazor__instance.createDragObj()},updateGridRow:function(n,t){var u,i,r;if(n){for(u=n.querySelectorAll('tr.e-row[tabindex="0"]'),i=0;i<u.length;i++)u[i].removeAttribute("tabindex");r=n.querySelector('[aria-rowindex="'+t+'"]');r&&(r.setAttribute("tabindex","0"),r.focus())}},focusToolbar:function(n,t){var i=n.querySelector(t);n&&i&&i.children[0].focus()},saveFile:function(n,t,i){var u={action:"download",path:n.path,names:n.names,data:n.data},r=sf.base.createElement("form",{id:i.id+"_downloadForm",attrs:{action:t,method:"post",name:"downloadForm",download:""}}),f=sf.base.createElement("input",{id:i.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(u),type:"hidden"}});r.appendChild(f);document.body.appendChild(r);document.forms.namedItem("downloadForm").submit();document.body.removeChild(r)},getTargetElement:function(n,t,i){var f,u,r=document.elementFromPoint(t,i),s=sf.base.closest(r,'li[role="treeitem"]'),e,o;return r?r.classList.contains("e-yscroll")&&r.classList.contains("e-content")||r.classList.contains("e-list-parent")&&r.classList.contains("e-ul")||r.classList.contains("e-view-container")||r.classList.contains("e-large-icons")||sf.base.closest(r,".e-empty.e-view-container")?u={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!0,IsTree:!1}:s?u={IsFile:!1,RowIndex:parseInt(s.getAttribute("data-uid"),10),IsFolder:!0,IsLayout:!1,IsTree:!0}:"Details"===n?u={IsFile:e=!(f=sf.base.closest(r,"tr")).querySelector(".e-fe-grid-icon .e-fe-icon").classList.contains("e-fe-folder"),RowIndex:parseInt(f.getAttribute("aria-rowindex"),10),IsFolder:!e,IsLayout:!1,IsTree:!1}:"LargeIcons"===n&&(o=(f=sf.base.closest(r,"li")).querySelector(".e-list-icon"),u={IsFile:e=!o||!o.classList.contains("e-fe-folder"),RowIndex:parseInt(f.getAttribute("data-uid"),10),IsFolder:!e,IsLayout:!1,IsTree:!1}):u={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!1,IsTree:!1},u}}}()},"./modules/sf-gantt.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Gantt=function(){"use strict";var r=function(){function n(n){this.parent=n}return n.prototype.getTotalColumnWidthByIndex=function(n){var r=0,i=this.parent.treeGridElement.querySelectorAll(".e-headercell"),t;for(n=i.length>n?n:i.length,t=0;t<n;t++)r+=i[t].offsetWidth;return r},n}(),u=function(){function n(n,t,i){this.toolbarHeight=0;this.chartPreviousScroll={top:0,left:0};this.treegridPreviousScroll={top:0,left:0};this.spinnerShown=!1;this.scrollbarUpdate=!1;this.element=n;this.element.blazor_instance=this;this.dotNetRef=i;this.isFromTreeGrid=!1;this.options=t;this.initModules()}return n.prototype.initModules=function(){this.splitterModule=new r(this)},n.prototype.getOffsetRect=function(n){var t=n.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.clientTop||document.body.clientTop||0,f=document.documentElement.clientLeft||document.body.clientLeft||0,e=t.top+i-u,o=t.left+r-f;return{top:Math.round(e),left:Math.round(o),width:t.width,height:t.height}},n.prototype.getParentElement=function(n,t,i){for(var r=n;r&&!(i?r.id===t:r.classList.contains(t));)r=r.parentElement;return r},n}(),n="e-active-container",f=function(){function n(n,t,i,r){this.parent=n;this.chartElement=t.querySelector(".e-gantt-chart-pane");this.element=t.querySelector(".e-chart-scroll-container");this.timelineHeaderElement=t.querySelector(".e-timeline-header-container");this.holidaySpanElement=t.querySelectorAll(".e-span");this.addEventListeners();this.ChartHeight(t,i);sf.base.isNullOrUndefined(this.holidaySpanElement)||this.UpdateHolidayLabel(r)}return n.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this);sf.base.EventHandler.add(this.chartElement,"mousedown",this.mouseDownHandler,this);sf.base.EventHandler.add(this.chartElement,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this)},n.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.element,"scroll",this.onScroll);sf.base.EventHandler.remove(this.chartElement,"mousedown",this.mouseDownHandler);sf.base.EventHandler.remove(this.chartElement,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp)},n.prototype.gridScrollHandler=function(n){this.element.scrollTop=n;this.parent.isFromTreeGrid=!0},n.prototype.onScroll=function(){var n=this.parent;n.scrollbarUpdate=!0;this.parent.dotNetRef.invokeMethodAsync("ShowSpinner");n.onMouseDown||n.spinnerShown||n.dotNetRef.invokeMethodAsync("HideSpinner");this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft);this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.parent.isFromTreeGrid=!1)},n.prototype.ganttChartMouseUp=function(){var n=this.parent;n.onMouseDown=!1;n.dotNetRef.invokeMethodAsync("HideSpinner")},n.prototype.mouseDownHandler=function(n){if(this.parent.onMouseDown=!0,null!=this.parent.getParentElement(n.target,"e-gantt-chart")){var t=null,i=null;this.parent.getParentElement(n.target,"e-timeline-header-container")?t="Header":this.parent.getParentElement(n.target,"e-content")&&(t="Content",i=this.parent.getParentElement(n.target,"e-chart-row-cell")?this.parent.getParentElement(n.target,"e-chart-row-cell").getAttribute("data-uid"):null);"Header"!=t&&"Content"!=t||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",t,i)}},n.prototype.ChartHeight=function(n){this.toolbarElement=n.querySelector("#"+n.id+"_Gantt_Toolbar");sf.base.isNullOrUndefined(this.toolbarElement)||this.toolbarElement.offsetHeight;this.viewPortHeight=n.blazor_instance.height-n.blazor_instance.toolbarHeight-this.timelineHeaderElement.offsetHeight;this.element.style.height=this.viewPortHeight+"px"},n.prototype.UpdateHolidayLabel=function(n){for(var i=this.holidaySpanElement.length,t=0;t<i;t++)this.holidaySpanElement[t].style.top=sf.base.formatUnit(this.viewPortHeight<n?this.viewPortHeight/2:n/2)},n.prototype.destroy=function(){this.removeEventListeners()},n}(),e=function(){function n(n,t){this.parent=n;this.content=t;this.addEventListeners()}return n.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this)},n.prototype.removeEventListeners=function(){sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler)},n.prototype.scrollHandler=function(){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop);this.parent.treegridPreviousScroll.top=this.content.scrollTop},n.prototype.updateScrollTop=function(n){this.content.scrollTop=n;this.parent.treegridPreviousScroll.top=this.content.scrollTop},n.prototype.destroy=function(){this.removeEventListeners()},n}(),t=function(){return(t=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},o=function(){function n(n){this.elementOffsetLeft=0;this.elementOffsetTop=0;this.elementOffsetWidth=0;this.elementOffsetHeight=0;this.parent=n;this.initPublicProp();this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody");this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane");this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container");this.addEventListeners()}return n.prototype.initPublicProp=function(){this.taskBarEditElement=null;this.taskBarEditRecord=null;this.taskBarEditAction=null;this.dragMouseLeave=!1;this.isMouseDragged=!1;this.connectorPointWidth=null;this.connectorSecondAction=null;this.toPredecessorText=null;this.highlightedSecondElement=null;this.falseLine=null},n.prototype.addEventListeners=function(){sf.base.Browser.isPointer;sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this);sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this);sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this)},n.prototype.removeEventListeners=function(){sf.base.Browser.isPointer;sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown);sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove);sf.base.EventHandler.remove(this.chartPane,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp)},n.prototype.ganttMouseDown=function(n){this.updateTaskBarEditElement(n)},n.prototype.ganttChartMouseUp=function(){this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord);this.falseLine&&this.removeFalseLine(!0);this.initPublicProp()},n.prototype.updateTaskBarEditElement=function(n){var t=this,i=this.getElementByPosition(n),r=this.parent.getParentElement(i,"e-taskbar-main-container");this.taskBarEditElement=r;this.taskBarEditElement&&("mousedown"!==n.type&&"touchstart"!==n.type&&"click"!==n.type||(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then(function(n){t.connectorPointWidth=n}),this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid).then(function(i){t.taskBarEditRecord=i;t.updateMouseDownProperties(n);t.taskBarEditAction=t.getTaskBarAction(n)})))},n.prototype.updateMouseDownProperties=function(n){var t=this.getCoordinate(n),i;(t.pageX||t.pageY)&&(i=this.parent.getOffsetRect(this.chartBodyContainer),this.mouseDownX=t.pageX-i.left+this.parent.chartPreviousScroll.left,this.mouseDownY=t.pageY-i.top+this.parent.chartPreviousScroll.top)},n.prototype.getTaskBarAction=function(n){var i=this.getElementByPosition(n),r=this.taskBarEditRecord,t="";return i.classList.contains("e-taskbar-left-resizer")?t="LeftResizing":i.classList.contains("e-taskbar-right-resizer")?t="RightResizing":i.classList.contains("e-child-progress-resizer")||sf.base.closest(i,".e-child-progress-resizer")?t="ProgressResizing":i.classList.contains("e-connectorpoint-left")?t="ConnectorPointLeftDrag":i.classList.contains("e-connectorpoint-right")?t="ConnectorPointRightDrag":r&&(t=r.hasChildRecords?"Auto"===this.parent.options.taskMode?"ParentDrag":"":r.isMilestone?"MilestoneDrag":"ChildDrag"),t},n.prototype.getElementByPosition=function(n){var t=this.getCoordinate(n);return t.pageX=null!=t.pageX?t.pageX:0,t.pageY=null!=t.pageY?t.pageY:0,document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)},n.prototype.getCoordinate=function(n){var t={},i;return n&&(i=n,t.pageX=i.pageX,t.pageY=i.pageY),t},n.prototype.ganttMouseMove=function(n){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(n);this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left;this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top;this.dragMouseLeave=!1;this.isMouseDragCheck();this.isMouseDragged&&this.taskBarEditAction&&this.taskBarEditingAction(n,!1)},n.prototype.isMouseDragCheck=function(){if(!this.isMouseDragged&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragged=!0;var n=this.taskBarEditRecord;this.previousItem=t({},n);this.taskBarEditElement.setAttribute("aria-grabbed","true")}},n.prototype.updateMouseMoveProperties=function(n){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(n),r;((i.pageX||i.pageY)&&(this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress))&&(r=this.mouseMoveX-this.parent.chartPreviousScroll.left+t.left,this.mouseMoveY,this.parent.chartPreviousScroll.top,t.top,(r+20>t.left+this.chartBodyContainer.offsetWidth||r-20<t.left)&&(this.timerCount=this.parent.chartPreviousScroll.left))},n.prototype.taskBarEditingAction=function(n){this.updateMouseMoveProperties(n);"ProgressResizing"===this.taskBarEditAction?this.performProgressResize(n):"LeftResizing"===this.taskBarEditAction?this.enableLeftResizing(n):"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?this.enableRightResizing(n):"ParentDrag"===this.taskBarEditAction||"ChildDrag"===this.taskBarEditAction||"MilestoneDrag"===this.taskBarEditAction?this.enableDragging(n):"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||(this.updateConnectorLineSecondProperties(n),this.triggerDependencyEvent(n),this.drawFalseLine());this.setItemPosition()},n.prototype.setItemPosition=function(){var n=this.taskBarEditRecord,t="MilestoneDrag"===this.taskBarEditAction||n.isMilestone?this.milestoneHeight:n.width,o=t-10,v=t-2,r=n.progress/100*n.width,s=this.taskBarEditElement.classList.contains("e-taskbar-main-container")?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-taskbar-main-container"),c=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-left-label-container"),u=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector(".e-right-label-container"),i=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),f=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),h=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),e=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),l=this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),y=this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar"),a=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");"ParentResizing"!==this.taskBarEditAction&&(s.style.width=t+"px",s.style.left=n.left+"px",c.style.width=n.left+"px",sf.base.isNullOrUndefined(u)||(u.style.left=n.left+t+"px"));a&&(a.style.left=v+"px");e&&(e.style.left=o+"px");"MilestoneDrag"===this.taskBarEditAction||n.isMilestone?(s.style.left=n.left-t/2+"px",c.style.width=n.left-t/2+"px",sf.base.isNullOrUndefined(u)||(u.style.left=n.left+t/2+"px")):"ProgressResizing"===this.taskBarEditAction?(f.style.left=n.left+n.progressWidth-10+"px",sf.base.isNullOrUndefined(i)||(i.style.width=n.progressWidth+"px",i.style.borderBottomRightRadius=this.progressBorderRadius+"px",i.style.borderTopRightRadius=this.progressBorderRadius+"px",h.style.left=n.progressWidth-8+"px")):"RightResizing"===this.taskBarEditAction?(f.style.width=t+"px",sf.base.isNullOrUndefined(i)||(i.style.width=r+"px",e.style.left=o+"px",h.style.left=r-5+"px")):"ParentDrag"===this.taskBarEditAction?(sf.base.isNullOrUndefined(l)||(l.style.width=t+"px"),sf.base.isNullOrUndefined(i)||(y.style.width=n.progressWidth+"px")):(sf.base.isNullOrUndefined(f)||(f.style.width=t+"px"),sf.base.isNullOrUndefined(i)||(e.style.left=o+"px",i.style.width=r+"px",h.style.left=r-5+"px"))},n.prototype.enableLeftResizing=function(n){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(t.left=this.previousItem.left-i,t.width=this.previousItem.width+i)):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,t.left=this.previousItem.left-i,t.width=3):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(t.left=this.previousItem.left+i,t.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i,t.width=3);this.updateEditPosition(n,t);t.left=this.previousItem.left+this.previousItem.width-t.width},n.prototype.enableRightResizing=function(n){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,t.width=this.previousItem.width-i):this.mouseMoveX<t.left&&(t.width=3):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,t.width=this.previousItem.width+i);this.updateEditPosition(n,t)},n.prototype.enableDragging=function(){var n=this.taskBarEditRecord,t=0,i;this.mouseDownX>this.mouseMoveX?(t=this.mouseDownX-this.mouseMoveX)>0&&(n.left=this.previousItem.left-t):(t=this.mouseMoveX-this.mouseDownX,n.left=this.previousItem.left+t);i=n.left<0?0:n.left+n.width>=this.parent.totalTimelineWidth?this.parent.totalTimelineWidth-n.width:n.left;n.left=i},n.prototype.performProgressResize=function(){var n=this.taskBarEditRecord,t=0,i,r;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>n.left&&this.mouseMoveX<n.left+n.width&&n.left>0?(t=this.mouseMoveX-n.left,n.progressWidth=t):n.progressWidth=this.mouseMoveX>=n.left+n.width?n.width:0:this.mouseMoveX>n.left&&this.mouseMoveX<n.left+n.width?(t=this.mouseMoveX-n.left,n.progressWidth=t):n.progressWidth=this.mouseMoveX<=n.left?0:n.width;i=n.progressWidth>n.width?n.width:n.progressWidth;i=n.progressWidth<0?0:n.progressWidth;n.progressWidth=i;r=n.width-n.progressWidth;this.progressBorderRadius=r<=4?4-r:0},n.prototype.updateEditPosition=function(n,t){this.updateIsMilestone(t)},n.prototype.updateIsMilestone=function(n){n.width<=3?(n.width=3,n.isMilestone=!0):n.isMilestone=!1},n.prototype.updateConnectorLineSecondProperties=function(n){var t=this.getElementByPosition(n),i=this.parent.getParentElement(t,"e-taskbar-main-container");this.connectorSecondAction=null;this.parent.getParentElement(t,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null);this.taskBarEditElement!==i&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+0,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(i,this.highlightedSecondElement));sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block"));this.connectorSecondElement=this.connectorSecondAction?i:null;this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},n.prototype.showHideTaskBarEditingElements=function(n,t){if((t=t||this.taskBarEditElement)&&n!==t&&(t.querySelector(".e-taskbar-left-resizer")&&(t.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),t.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),t.querySelector(".e-child-progress-resizer")&&t.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),t.querySelector(".e-connectorpoint-left")||t.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(t.querySelector(".e-connectorpoint-left"))?t.parentElement:t;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover");i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},n.prototype.triggerDependencyEvent=function(n){var t=this;null!=this.toDataGuid&&this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then(function(i){i||t.getElementByPosition(n).classList.add("e-connectorpoint-allow-block")})},n.prototype.drawFalseLine=function(){var n,t=this.mouseDownX,i=this.mouseDownY,r=this.mouseMoveX,u=this.mouseMoveY,e=Math.sqrt((t-r)*(t-r)+(i-u)*(i-u)),o="rotate("+180*Math.atan2(u-i,r-t)/Math.PI+"deg)",f;"ConnectorPointLeftDrag"===this.taskBarEditAction&&(n=this.elementOffsetLeft-this.connectorPointWidth/2-this.parent.chartPreviousScroll.left);"ConnectorPointRightDrag"===this.taskBarEditAction&&(n=this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-this.parent.chartPreviousScroll.left);f=this.elementOffsetTop+this.elementOffsetHeight/2+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1);this.falseLine=document.createElement("div");this.falseLine.className="e-gantt-false-line";this.falseLine.id="ganttfalseline"+this.parent.element.id;this.falseLine.style.transformOrigin="0% 100%";this.falseLine.style.right="auto";this.falseLine.style.position="absolute";this.falseLine.style.transform=o;this.falseLine.style.borderTopWidth="1px";this.falseLine.style.borderTopStyle="dashed";this.falseLine.style.zIndex="5";this.falseLine.style.width=e-3+"px";this.falseLine.style.left=n+"px";this.falseLine.style.top=f+"px";this.chartBodyContainer.appendChild(this.falseLine)},n.prototype.removeFalseLine=function(n){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,n&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,sf.base.isNullOrUndefined(this.chartBodyContainer.querySelector(".e-connector-line-container"))||this.chartBodyContainer.querySelector(".e-connector-line-container").classList.remove("e-connector-line-z-index")))},n.prototype.destroy=function(){this.removeEventListeners()},n}(),i=function(){function t(n){this.parent=n}return t.prototype.taskbarFocus=function(t){var i=t.querySelector(".e-gantt-child-taskbar"),r=t.querySelector(".e-gantt-parent-taskbar");return i?(i.focus(),t.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-child-taskbar").classList.add(n)):(r.focus(),t.querySelector(".e-taskbar-main-container").querySelector(".e-gantt-parent-taskbar").classList.add(n)),"isNextTaskbar"},t.prototype.RightLabelFocus=function(t){var i=t.querySelector(".e-right-label-container");return i.focus(),i.querySelector(".e-label").classList.add(n),"isNextRightLabel"},t.prototype.LeftLabelFocus=function(t){var i=t.querySelector(".e-left-label-container");return i.focus(),i.querySelector(".e-label").classList.add(n),"isNextLeftLabel"},t}();return{initialize:function(n,t,i){new u(n,t,i);this.dotnetRef=i;var r={};return n.blazor_instance.height=r.height=n.offsetHeight,n.blazor_instance.width=r.width=n.offsetWidth,n.blazor_instance.toolbarElement=n.querySelector("#"+n.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(n.blazor_instance.toolbarElement)||(n.blazor_instance.toolbarHeight=r.toolbarHeight=n.blazor_instance.toolbarElement.offsetHeight),r},getTotalColumnWidthByIndex:function(n,t){return n.blazor_instance.splitterModule.getTotalColumnWidthByIndex(t)},treegridDataBound:function(n,t){n.blazor_instance.scrollbarUpdate&&(n.blazor_instance.spinnerShown=!0);this.treegridHeaderAlign(n,t);var i=document.getElementById("treeGrid"+n.id+"_gridcontrol");this.adjustTable(i,n)},adjustTable:function(n,t){var i=n.querySelector(".e-gridcontent").querySelector(".e-virtualtable"),r=document.getElementById(t.id+"_chart").querySelector(".e-virtualtable");sf.base.isNullOrUndefined(i)||(r.style.transform=i.style.transform)},setChartHeight:function(n){var t=document.getElementById("treeGrid"+n.id+"_gridcontrol").querySelector(".e-gridcontent").querySelector(".e-virtualtrack");(sf.base.isNullOrUndefined(t)&&(t=document.getElementById("treeGrid"+n.id+"_gridcontrol_content_table")),t&&t.clientHeight)&&(document.getElementById(n.id+"_chart").getElementsByClassName("e-chart-rows-container")[0].style.height=t.clientHeight+"px")},treegridHeaderAlign:function(n,t){if(t){sf.base.addClass(n.blazor_instance.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div");sf.base.addClass(n.blazor_instance.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div");var r=n.querySelector(".e-yscroll"),u=n.querySelector(".e-gridcontent"),i=n.querySelector(".e-chart-scroll-container").offsetHeight;r.style.height=i+"px";u.style.height=i+"px"}else sf.base.removeClass(n.blazor_instance.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.removeClass(n.blazor_instance.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div")},getTreeGrid:function(n){this.hideTreeGridScrollBar(n);sf.base.isNullOrUndefined(n.blazor_instance.treeGridElement)||(n.blazor_instance.treeGrid=n.blazor_instance.treeGridElement.blazor_instance)},hideTreeGridScrollBar:function(n){var t,r,i;n.blazor_instance.treeGridElement=n.querySelector("#treeGrid"+n.id);t=n.blazor_instance.treeGridElement.querySelector(".e-content");t&&(r=n.blazor_instance.treeGridElement.querySelector(".e-gridheader"),t.style.height=n.blazor_instance.height-n.blazor_instance.toolbarHeight-r.offsetHeight+"px",n.blazor_instance.treeGridModule=new e(n.blazor_instance,t));i=this.getScrollbarWidth(n);0!==i&&(t.style.cssText+="width: calc(100% + "+i+"px);")},getScrollbarWidth:function(n){var t=document.createElement("div"),i,r;return t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",i=document.createElement("div"),t.appendChild(i),n.appendChild(t),r=t.offsetWidth-i.offsetWidth,t.parentNode.removeChild(t),r},getOffsetLeft:function(n){var t=n.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,r=document.documentElement.clientLeft||document.body.clientLeft||0,u=t.left+i-r;return Math.round(u)},ChartInitialize:function(n,t,i,r){n.blazor_instance.totalTimelineWidth=i;var u=n.offsetHeight;return n.blazor_instance.options.allowTaskbarEditing&&(n.blazor_instance.taskbarEditModule=new o(n.blazor_instance),n.blazor_instance.taskbarEditModule.milestoneHeight=r),n.blazor_instance.chartScrollModule=new f(n.blazor_instance,n,u,t),n.blazor_instance.spinnerShown=!1,n.blazor_instance.chartScrollModule.viewPortHeight},UpdateScroll:function(n,t){this.scrollBarElement=n.querySelector(".e-chart-scroll-container");(this.scrollBarElement.offsetWidth<t||this.scrollBarElement.scrollLeft>t)&&(this.scrollBarElement.scrollLeft=t)},calcRowHeight:function(n){return n.querySelector(".e-row").offsetHeight},chartFocusOutHandler:function(t,r){r.blazor_instance.keyboardModule=new i(r.blazor_instance);var f=r.querySelector(".e-chart-row-cell[data-uid="+t+"]"),u=f.querySelector("."+n)?f.querySelector("."+n).parentElement:null;u&&(u.querySelector(".e-label").classList.remove(n),u.blur())},focusOutHandler:function(t){sf.base.isNullOrUndefined(t.classList)||t.classList.remove(n)},tabFocusHandler:function(t,r,u){r.blazor_instance.keyboardModule=new i(r.blazor_instance);var f=r.querySelector(".e-chart-row-cell[data-uid="+t+"]"),e=f.querySelector("."+n)?f.querySelector("."+n).parentElement:null;return e?e.classList.contains("e-left-label-inner-div")?u?(e.querySelector(".e-label").classList.remove(n),e.blur(),"isNextGrid"):r.blazor_instance.keyboardModule.taskbarFocus(f):e.classList.length?e.classList.contains("e-right-label-inner-div")?u?r.blazor_instance.keyboardModule.taskbarFocus(f):"isNextGrid":"":u?f.querySelector(".e-left-label-inner-div")?r.blazor_instance.keyboardModule.LeftLabelFocus(f):"isNextGrid":f.querySelector(".e-right-label-inner-div")?r.blazor_instance.keyboardModule.RightLabelFocus(f):"isNextGrid":!u&&f.querySelector(".e-left-label-inner-div")?r.blazor_instance.keyboardModule.LeftLabelFocus(f):u&&f.querySelector(".e-right-label-inner-div")?r.blazor_instance.keyboardModule.RightLabelFocus(f):r.blazor_instance.keyboardModule.taskbarFocus(f)},getChartWidth:function(n){return n.querySelector(".e-gantt-chart-pane").clientWidth}}}()},"./modules/sf-grid.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Grid=function(){"use strict";function t(){if(null!==l)return l;var t,n=document.createElement("div");return n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth|0,document.body.removeChild(n),l=t}function w(n,t){for(var i=n[t+"ElementSibling"],r=0,u=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)u.some(function(n){return i.classList.contains(n)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r}function n(n,t,i){for(var r=n;r&&!(i?r.id===t:r.classList.contains(t));)r=r.parentElement;return r}function a(n,t){for(var r=-1,i=0,u=t.length;i<u;i++)if(t[i].isEqualNode(n)){r=i;break}return r}function e(n,t){for(var i=0,r=t.length;i<r;i++)if(t[i]===n)return i;return-1}function r(n){var t={};return t.x=sf.base.isNullOrUndefined(n.clientX)?n.changedTouches[0].clientX:n.clientX,t.y=sf.base.isNullOrUndefined(n.clientY)?n.changedTouches[0].clientY:n.clientY,t}function o(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=t(n[i],i),sf.base.isNullOrUndefined(r)||u.push(r);return u}function b(n){var t=n.querySelector("#"+n.id+"EditConfirm");return n.querySelectorAll(".e-updatedtd").length&&(!t||t.classList.contains("e-popup-close"))}function u(n){return n.options.enableVirtualization&&n.options.groupCount>0&&(n.options.offline||""===n.options.url)}function v(n,t){for(var r=[].slice.call(n.querySelectorAll(t)),i=0;i<r.length;i++)sf.base.remove(r[i])}function s(n,t){for(var i,f,u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];for(i=0,f=n.length;i<f;i++)t?(sf.base.classList(n[i],u.slice(),[]),n[i].setAttribute("aria-selected","true")):(sf.base.classList(n[i],[],u.slice()),n[i].removeAttribute("aria-selected"))}var i,c,l=null;!function(n){n.timer=null}(i||(i={}));var g=function(){function n(n){this.previousValues={top:0,left:0};this.oneTimeReady=!0;this.parent=n;this.addEventListener();this.setHeight();this.setPadding()}return n.prototype.setHeight=function(){var t=0,i=this.parent.element.querySelector(".e-content"),n;this.parent.options.frozenRows&&"auto"!==this.parent.options.height&&(n=this.parent.element.querySelector(".e-headercontent").querySelector("tbody"),t=n?n.offsetHeight:0,i.style.height=sf.base.formatUnit(parseInt(this.parent.options.height)-t))},n.prototype.setPadding=function(){var r;if("auto"!=this.parent.options.height||"None"!=this.parent.options.frozenName||0!=this.parent.options.frozenColumns){var u=this.parent.element.querySelector(".e-gridheader"),t=n.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();u.style[i.padding]=t>0?t+"px":"0px";u.querySelector(".e-headercontent").style[i.border]=t>0?"1px":"0px";r=this.parent.element.querySelector(".e-gridfooter");r&&(r.querySelector(".e-summarycontent").style[i.border]=t>0?"1px":"0px",r.style[i.padding]=t>0?t+"px":"0px")}},n.prototype.removePadding=function(n){var t=this.getCssProperties(n),i=this.parent.getHeaderContent().querySelector(".e-headercontent");i.style[t.border]="";i.parentElement.style[t.padding]="";this.parent.getFooterContent()},n.prototype.refresh=function(){if("100%"===this.parent.options.height){var n,t=this.parent.element.querySelector(".e-gridcontent"),i=w(n=t,"previous")+w(n,"next");t.style.height="calc(100% - "+i+"px)"}},n.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},n.prototype.addEventListener=function(){this.wireEvents()},n.prototype.onContentScroll=function(n){var t=this,i=n,r=i.classList.contains("e-headercontent");return function(n){var e;if(null!==t.content.querySelector("tbody")){var f=n.target,u=f.scrollLeft,o=(f.scrollWidth,f.classList.contains("e-summarycontent"));t.previousValues.left!==u?(i.scrollLeft=u,e=0!=t.parent.options.frozenColumns?t.parent.element.querySelector(".e-movablefootercontent"):t.parent.element.querySelector(".e-summarycontent"),e&&(e.scrollLeft=u),o&&(t.header.scrollLeft=u),t.previousValues.left=u):t.previousValues.top=r?f.scrollTop:t.previousValues.top}}},n.prototype.onFreezeContentScroll=function(n){var t=this,i=n;return function(n){if(null!==t.content.querySelector("tbody")){var r=n.target.scrollTop;t.previousValues.top!==r&&(i.scrollTop=r,t.previousValues.top=r)}}},n.prototype.onCustomScrollbar=function(n,t){var r,i=this,u=n,f=t;return function(n){if(null!==i.content.querySelector("tbody")){var t=n.target.scrollLeft;i.previousValues.left!==t&&(i.parent.options.aggregatesCount&&(r=i.parent.element.querySelector(".e-movablefootercontent")),u.scrollLeft=t,f.scrollLeft=t,r&&(r.scrollLeft=t),i.previousValues.left=t)}}},n.prototype.onWheelScroll=function(n){var t=this,i=n;return function(n){if(null!==t.content.querySelector("tbody")){var r=i.scrollTop+(1===n.deltaMode?30*n.deltaY:n.deltaY);t.previousValues.top!==r&&(n.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=r,i.scrollTop=r,t.previousValues.top=r)}}},n.prototype.onTouchScroll=function(n){var t=this,i=n;return function(n){if("mouse"!==n.pointerType){var u=t.parent.options.frozenColumns>0,e=t.getPointXY(n),r=i.scrollLeft+(t.pageXY.x-e.x),f=u?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),o=u?t.parent.getContent().querySelector(".e-movablecontent"):t.parent.getContent().querySelector(".e-content");t.previousValues.left===r||r<0||f.scrollWidth-f.clientWidth<r||((event.cancelable&&n.preventDefault(),f.scrollLeft=r,o.scrollLeft=r,u)&&(t.parent.element.querySelector(".e-movablescrollbar").scrollLeft=r),t.pageXY.x=e.x,t.previousValues.left=r)}}},n.prototype.setPageXY=function(){var n=this;return function(t){"mouse"!==t.pointerType&&(n.pageXY=n.getPointXY(t))}},n.prototype.getPointXY=function(n){var t={x:0,y:0};return n.touches&&n.touches.length?(t.x=n.touches[0].pageX,t.y=n.touches[0].pageY):(t.x=n.pageX,t.y=n.pageY),t},n.prototype.wireEvents=function(){var n=this,r,e,h,c,l,a,o,s;if(this.oneTimeReady){r=this.parent.options.frozenColumns;this.content=this.parent.getContent();this.header=this.parent.getHeaderContent();var t=this.content.querySelector(".e-movablecontent"),u=this.content.querySelector(".e-frozencontent"),i=this.header.querySelector(".e-movableheader"),f=this.content.parentElement.querySelector(".e-movablescrollbar");(this.parent.options.frozenColumns&&(sf.base.EventHandler.add(r?i:this.header,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(r?i:this.header,"touchmove pointermove",this.onTouchScroll(r?t:this.content),this)),r?(sf.base.EventHandler.add(f,"scroll",this.onCustomScrollbar(t,i),this),sf.base.EventHandler.add(t,"scroll",this.onCustomScrollbar(f,i),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbar(f,t),this),sf.base.EventHandler.add(t,"scroll",this.onFreezeContentScroll(u),this),sf.base.EventHandler.add(u,"scroll",this.onFreezeContentScroll(t),this),sf.base.EventHandler.add(i,"scroll",this.onContentScroll(t),this),sf.base.EventHandler.add(u,"wheel",this.onWheelScroll(t),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(t),this),sf.base.EventHandler.add(t,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(t,"touchmove pointermove",this.onTouchScroll(i),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.options.aggregatesCount)&&(e=this.parent.options.frozenColumns?this.parent.element.querySelector(".e-movablefootercontent"):this.parent.element.querySelector(".e-summarycontent"),sf.base.isNullOrUndefined(e)||sf.base.EventHandler.add(e,"scroll",this.onContentScroll(this.content),this));this.refresh();this.oneTimeReady=!1}s=this.parent.getContent().querySelector(".e-table");a=function(){h=n.header.scrollLeft;c=s.scrollHeight;l=n.parent.getContent().clientHeight};o=function(){n.parent.options.enableVirtualization||(c<l&&(sf.base.addClass(s.querySelectorAll("tr:last-child td"),"e-lastrowcell"),n.parent.options.frozenColumns&&sf.base.addClass(n.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(n.parent.options.frozenColumns>0||n.parent.options.frozenColumns>0)&&n.header.querySelector(".e-movableheader")?n.header.querySelector(".e-movableheader").scrollLeft=n.previousValues.left:n.header.scrollLeft=n.previousValues.left,n.content.scrollLeft=n.previousValues.left,n.content.scrollTop=n.previousValues.top);n.parent.options.enableColumnVirtualization||(n.content.scrollLeft=h);n.parent.options.frozenColumns&&n.header.querySelector(".e-movableheader")&&(n.header.querySelector(".e-movableheader").scrollLeft=n.content.querySelector(".e-movablecontent").scrollLeft)};requestAnimationFrame(function(){try{o(null,a())}catch(n){o(n)}})},n.prototype.getCssProperties=function(n){var t={},i=sf.base.isNullOrUndefined(n)?this.parent.options.enableRtl:n;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},n.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector(".e-gridheader")||n.querySelector(".e-gridcontent"))&&(this.removePadding(),sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.onContentScroll))},n.getScrollBarWidth=function(){return t()},n}(),nt=function(){function n(n){this.parent=n;this.frozenHeader=n.element.querySelector(".e-frozenheader");this.movableHeader=n.element.querySelector(".e-movableheader");this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.options.frozenColumns&&(this.setFrozenHeight(),this.refreshFreeze({"case":"textwrap"}),this.refreshFreeze({"case":"refreshHeight"}))},n.prototype.refreshFreeze=function(n){if("textwrap"===n.case||"refreshHeight"===n.case){var r=void 0,u=void 0,t=void 0,e=this.getFrozenHeader(),o=this.getMovableHeader(),i=this.parent.getContent(),f=this.parent.options.wrapMode;"textwrap"===n.case?(("Header"!==f||n.isModeChg)&&(r=i.querySelector(".e-frozencontent").querySelectorAll("tr"),"LeftRight"===this.parent.options.frozenName&&(t=i.querySelector(".e-frozen-right-content").querySelectorAll("tr")),u=i.querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(r,u,n.isModeChg,!0,!1,t)),"Both"===f||n.isModeChg?(r=e.querySelectorAll("tr"),u=o.querySelectorAll("tr"),"LeftRight"==this.parent.options.frozenName&&(t=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr"))):(r=e.querySelector("Content"===f?"tbody":"thead").querySelectorAll("tr"),u=o.querySelector("Content"===f?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(r,u,n.isModeChg,!1,!1,t),this.refreshStackedHdrHgt()):"refreshHeight"===n.case&&("LeftRight"===this.parent.options.frozenName&&(t=i.querySelector(".e-frozen-right-content").querySelectorAll("tr")),this.setWrapHeight(i.querySelector(".e-frozencontent").querySelectorAll("tr"),i.querySelector(".e-movablecontent").querySelectorAll("tr"),n.isModeChg,!1,!1,t),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||("LeftRight"==this.parent.options.frozenName&&(t=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr")),this.setWrapHeight(e.querySelectorAll("tr"),o.querySelectorAll("tr"),n.isModeChg,!1,!1,t)))}},n.prototype.updateResizeHandler=function(){for(var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),n=0;n<t.length;n++)t[n].style.height=t[n].parentElement.offsetHeight+"px"},n.prototype.setWrapHeight=function(n,t,i,r,u,f){for(var o,l,a,v,w=this.parent.options.allowTextWrap,s=this.parent.options.wrapMode,b=this.parent.getHeaderContent().querySelector("thead"),k=this.parent.getHeaderContent().querySelector("tbody"),y=[],p=[],h=[],e=0,c=n.length;e<c;e++)sf.base.isNullOrUndefined(n[e])||sf.base.isNullOrUndefined(t[e])||(f&&(h[e]=f[e].getBoundingClientRect().height),y[e]=n[e].getBoundingClientRect().height,p[e]=t[e].getBoundingClientRect().height);for(e=0,c=n.length;e<c;e++)(i&&("Header"===s&&r||"Content"===s&&b.contains(n[e])||"Header"===s&&k.contains(n[e]))||u)&&(f[e]&&(f[e].style.height=null),n[e].style.height=null,t[e].style.height=null),l=y[e],a=p[e],v=h[e]?h[e]:0,o=Math.max(l,a,v),t[e].style.height=o+"px",n[e].style.height=o+"px",f&&(f[e].style.height=o+"px");w&&this.setFrozenHeight()},n.prototype.setFrozenHeight=function(){var o,a,n;if(!this.parent.options.isPreventScrollEvent){var u=sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-frozencontent"))?0:this.parent.element.querySelector(".e-frozencontent").getElementsByClassName("e-table")[0].offsetHeight,f=this.parent.element.querySelector(".e-movablecontent"),i=this.parent.element.querySelectorAll(".e-frozencontent"),e=this.parent.element.querySelectorAll(".e-frozenscrollbar"),h=this.parent.element.querySelector(".e-movablescrollbar"),l=this.parent.element.querySelector(".e-movablechild"),y=this.parent.element.querySelector(".e-content"),c=0;if(h&&"100%"!==this.parent.options.height&&"auto"!==this.parent.options.height&&(o=parseInt(this.parent.options.height.split?this.parent.options.height.split("px")[0]:this.parent.options.height,10)-h.offsetHeight,y.style.height=o+"px",u<o&&(u=o-1)),i.length>0)for("100%"===this.parent.options.height&&(a=this.parent.element.querySelector(".e-scrollbar").offsetHeight,this.parent.getContent().style.height="calc(100% - "+a+"px)"),n=0;n<i.length;n++)i[n].style.height=u+1+"px",i[n].style.borderBottom="",e[n].classList.contains("e-frozen-right-scrollbar")?(e[n].style.width=i[n].offsetWidth+t()+"px",c+=i[n].offsetWidth+t()):(e[n].style.width=i[n].offsetWidth+"px",c+=i[n].offsetWidth);if(this.parent.options.enableVirtualization&&e){for(var s=this.parent.options.columns,v=0,r=0;r<s.length;r++)v+=parseInt(s[r].width.split?s[r].width.split("px")[0]:s[r].width.toString(),10);l.style.width=v-c+"px"}else f.style.height=u+1+"px",h.style.width=f.offsetWidth+"px",l.style.width="100%"===this.parent.options.height||"100%"===this.parent.options.width?f.getElementsByClassName("e-table")[0].offsetWidth+t()+"px":f.getElementsByClassName("e-table")[0].offsetWidth+"px"}},n.prototype.updateStackedFrozenHeight=function(n,t){for(var r,u,i=0,f=n.length;i<f;i++)r=this.getRowSpan(n[i]),u=this.getRowSpan(t[i]),r.min>1?this.updateStackedHdrRowHgt(i,r.max,n[i],t):u.min>1&&this.updateStackedHdrRowHgt(i,u.max,t[i],n)},n.prototype.refreshStackedHdrHgt=function(){var n,i=this.getFrozenHeader().querySelectorAll(".e-columnheader"),t=this.getMovableHeader().querySelectorAll(".e-columnheader");"LeftRight"==this.parent.options.frozenName?(n=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll(".e-columnheader"),this.updateStackedFrozenHeight(n,t)):this.updateStackedFrozenHeight(i,t);this.parent.options.allowResizing&&this.updateResizeHandler()},n.prototype.getRowSpan=function(n){for(var r,t,u,i=0,f=n.childElementCount;i<f;i++)0===i&&(t=n.children[0].rowSpan),r=n.children[i].rowSpan,t=Math.min(r,t),u=Math.max(r,t);return{min:t,max:u}},n.prototype.updateStackedHdrRowHgt=function(n,t,i,r){for(var f=0,u=0;u<t;u++)f+=r[n+u].style.height?parseInt(r[n+u].style.height,10):r[n+u].offsetHeight;i.style.height=f+"px"},n.prototype.getFrozenHeader=function(){return this.frozenHeader},n.prototype.getMovableHeader=function(){return this.movableHeader},n.prototype.refreshRowHeight=function(){0==this.parent.options.rowHeight&&(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&(this.clearWrapHeight(),this.refreshStackedHdrHgt(),this.refreshFreeze({"case":"refreshHeight"}),this.parent.options.allowResizing&&this.updateResizeHandler())},n.prototype.clearWrapHeight=function(){var n=function(n,t){for(var i=0,r=n.length;i<r;i++)sf.base.isNullOrUndefined(n[i])||sf.base.isNullOrUndefined(t[i])||(n[i].style.height=null,t[i].style.height=null)};this.parent.options.frozenColumns&&(this.parent.options.frozenRows&&n(this.parent.element.querySelector(".e-frozenheader").querySelectorAll("tr"),this.parent.element.querySelector(".e-movableheader").querySelectorAll("tr")),n(this.parent.element.querySelector(".e-frozencontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-movablecontent").querySelectorAll("tr")));this.parent.options.frozenRows&&0==this.parent.options.frozenColumns&&n(this.parent.element.querySelector(".e-headercontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-content").querySelectorAll("tr"))},n}(),f=function(){function t(n){this.parent=n}return t.prototype.setMinwidthBycalculation=function(n){var f=0,t=this.parent.getColumns().filter(function(n){return sf.base.isNullOrUndefined(n.width)||"auto"===n.width||""===n.width}),r,u,i;if(t.length){f=sf.base.isNullOrUndefined(this.parent.options.width)||"auto"===this.parent.options.width?this.parent.element.getBoundingClientRect().width-n:("string"==typeof this.parent.options.width?parseInt(this.parent.options.width,10):this.parent.options.width)-n;for(var e=0,o=0,s=t;o<s.length;o++)r=s[o],e+=sf.base.isNullOrUndefined(r.minWidth)?0:"string"==typeof r.minWidth?parseInt(r.minWidth,10):r.minWidth;for(u={},i=0;i<t.length;i++)0===n&&this.parent.options.allowResizing&&this.isWidthUndefined()&&i!==t.length-1&&this.setUndefinedColumnWidth(t),0!==n&&f<e?u[t[i].field]=t[i].minWidth+"px":0!==n&&f>e&&(u[t[i].field]="");this.parent.dotNetRef.invokeMethodAsync("SetMinWidth",u)}},t.prototype.setUndefinedColumnWidth=function(n){for(var t=0;t<n.length;t++)t!==n.length-1&&(n[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(n[t].field)))},t.prototype.setColumnWidth=function(n,t,i,r){if(void 0===r&&(r=!0),!(this.parent.getColumns().length<1)){var f=sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(n.uid):t,u=this.getWidth(n),e=this.getTableWidth(this.parent.getColumns());null!==u&&(this.setWidth(u,f),"auto"!==this.parent.options.width&&-1===this.parent.options.width.toString().indexOf("%")&&this.setMinwidthBycalculation(e),(this.parent.options.allowResizing&&"resize"===i||this.parent.options.frozenColumns&&this.parent.options.allowResizing)&&this.setWidthToTable(),r&&(u.toString().indexOf("px")>0&&(u=u.toString().replace("px","")),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{index:f,width:u,columnUid:n.uid})))}},t.prototype.setWidth=function(t,i,r){var rt=this,ut,u,ft,s,et,k,c,g,nt,tt,d;"string"!=typeof t||-1===t.indexOf("%")||Boolean(window.chrome)&&Boolean(window.chrome.webstore)||!this.parent.options.allowGrouping||(ut=this.parent.element.offsetWidth,t=parseInt(t,10)/100*ut);var l,e,y=this.parent.getHeaderTable(),p=this.parent.getContentTable(),w=sf.base.formatUnit(t),f=this.parent.options.frozenColumns,o=this.parent.getHeaderContent().querySelector(".e-movableheader"),b=this.parent.getContent().querySelector(".e-movablecontent"),h=0;if(0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){if(this.parent.updateColumnLevelFrozen(),u=this.parent.frozenColumnModel.findIndex(function(n){return n.uid==rt.parent.columnModel[i].uid}),("Left"==this.parent.options.frozenName&&(s=u<this.parent.options.frozenLeftCount?y:o),"Right"==this.parent.options.frozenName)?s=u>=(h=this.parent.options.columns.length-this.parent.options.frozenRightCount)?y:o:"LeftRight"==this.parent.options.frozenName&&(h=this.parent.options.columns.length-this.parent.options.frozenRightCount-this.parent.options.frozenLeftCount,ft=this.parent.getHeaderContent().querySelector(".e-frozen-right-header"),s=u<this.parent.options.frozenLeftCount?y:u<this.parent.options.frozenLeftCount+h?o:ft),!(l=this.getColumnLevelFrozenColgroup(u,this.parent.options.frozenLeftCount,h,s)))return}else l=f&&i>=f&&o&&o.querySelector("colgroup")?o.querySelector("colgroup").children[i-f]:this.parent.options.enableColumnVirtualization&&f&&o.scrollLeft>0?(k=o.querySelector("colgroup")).children[k.children.length-1-i]:y.querySelector("colgroup").children[i];(l&&!r?l.style.width=w:l&&r&&(l.style.width=" "),0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount)?(u=this.parent.frozenColumnModel.findIndex(function(n){return n.uid==rt.parent.columnModel[i].uid}),("Left"==this.parent.options.frozenName&&(s=u<this.parent.options.frozenLeftCount?p:b),"Right"==this.parent.options.frozenName&&(s=u>=(h=this.parent.options.columns.length-this.parent.options.frozenRightCount)?p:b),"LeftRight"==this.parent.options.frozenName)&&(et=this.parent.getContent().querySelector(".e-frozen-right-content"),s=u<this.parent.options.frozenLeftCount?p:u<this.parent.options.frozenLeftCount+h?b:et),e=this.getColumnLevelFrozenColgroup(u,this.parent.options.frozenLeftCount,h,s)):e=f&&i>=f?this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[i-f]:this.parent.options.enableColumnVirtualization&&f&&b.scrollLeft>0?(k=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[k.children.length-1-i]:p.querySelector("colgroup").children[i];(e&&!r?e.style.width=w:e&&r&&(e.style.width=" "),0!=this.parent.options.aggregatesCount)&&(c=void 0,f&&i>=f?(g=this.parent.getFooterContent().querySelector(".e-movablefootercontent"),nt=sf.base.isNullOrUndefined(g)?null:g.querySelector("colgroup"),c=sf.base.isNullOrUndefined(nt)?null:nt.children[i-f]):(tt=this.parent.getFooterContent().querySelector("colgroup"),c=sf.base.isNullOrUndefined(tt)?null:tt.children[i]),e&&c&&!r?c.style.width=w:e&&c&&r&&(c.style.width=" "));for(var a=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),it=[],v=0;v<a.length;v++)if(n(a[v],"e-grid").id===this.parent.element.id)for(d=0;d<a[v].querySelector("colgroup").children.length;d++)it.push(a[v].querySelector("colgroup").children[d]);a.length&&it.length&&(it[i].style.width=w);0==this.parent.options.frozenColumns||this.parent.options.enableColumnVirtualization||this.parent.freezeModule.setFrozenHeight()},t.prototype.getColumnLevelFrozenColgroup=function(n,t,i,r){if(!r||!r.querySelector("colgroup"))return null;var u=this.parent.frozenColumnModel,f=[].slice.call(r.querySelector("colgroup").children);return"Left"===u[n].freeze&&u[n].isFrozen?f[n]:"Right"===u[n].freeze&&u[n].isFrozen?f[n-(t+i)]:f[n-t]},t.prototype.isWidthUndefined=function(){var n=this.parent.getColumns().filter(function(n){return sf.base.isNullOrUndefined(n.width)&&sf.base.isNullOrUndefined(n.minWidth)}).length;return this.parent.getColumns().length===n},t.prototype.getWidth=function(n){if(!n.width)return null;var t=parseInt(n.width.toString(),10);return n.minWidth&&t<parseInt(n.minWidth.toString(),10)?n.minWidth:n.maxWidth&&t>parseInt(n.maxWidth.toString(),10)?n.maxWidth:n.width},t.prototype.getTableWidth=function(n){for(var t,i,u=0,r=0,f=n;r<f.length;r++)t=f[r],i=this.getWidth(t),"auto"===t.width&&(i=0),!1!==t.visible&&null!==i&&(u+=parseInt(i.toString(),10));return u},t.prototype.calcMovableOrFreezeColWidth=function(n){var t=0!=this.parent.frozenColumnModel.length?this.parent.frozenColumnModel.slice():this.parent.getColumns().slice(),i=this.parent.options.frozenLeftCount||this.parent.options.frozenColumns,r=t.length-this.parent.options.frozenColumns;return"movable"===n?t.splice(0,this.parent.options.frozenColumns):"freeze-left"===n?t.splice(i,t.length):"freeze-right"===n&&t.splice(0,i+r),sf.base.formatUnit(this.getTableWidth(t))},t.prototype.setWidthToFrozenLeftTable=function(){var n=this.calcMovableOrFreezeColWidth("freeze-left");this.parent.getHeaderTable().style.width=n;this.parent.getContentTable().style.width=n;this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild.style.width=n)},t.prototype.setWidthToFrozenRightTable=function(){var n=this.calcMovableOrFreezeColWidth("freeze-right");this.parent.options.enableColumnVirtualization||(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table").style.width=n,this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table").style.width=n);this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-frozenfootercontent").firstElementChild.style.width=n)},t.prototype.setWidthToMovableTable=function(){var n="",t=this.parent.getColumns().filter(function(n){return sf.base.isNullOrUndefined(n.width)}).length>=1,i=this.parent.getColumns().filter(function(n){return"auto"===n.width}).length>=1;"number"!=typeof this.parent.options.width||t||i?t||i||(n=this.calcMovableOrFreezeColWidth("movable")):n=sf.base.formatUnit(this.parent.options.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5);this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=n);this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild&&(this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild.style.width=n);this.parent.options.enableColumnVirtualization||(this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=n)},t.prototype.setWidthToFrozenEditTable=function(){var n=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=n},t.prototype.setWidthToMovableEditTable=function(){var n=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=n},t.prototype.setWidthToTable=function(n,t){var i,r;void 0===n&&(n=null);void 0===t&&(t=!1);i=sf.base.formatUnit(this.getTableWidth(null!=n?n:this.parent.getColumns()));this.parent.options.frozenColumns?0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount?(0!=this.parent.options.frozenLeftCount&&this.setWidthToFrozenLeftTable(),0!=this.parent.options.frozenRightCount&&this.setWidthToFrozenRightTable(),this.setWidthToMovableTable()):(this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable()):(this.parent.options.hasDetailTemplate&&this.setWidth("30",0),t&&(i=""),this.parent.getHeaderTable().style.width=i,this.parent.getContentTable().style.width=i,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=i));r=this.parent.element.querySelector(".e-table.e-inline-edit");r&&this.parent.options.frozenColumns?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):r&&(r.style.width=i)},t}(),tt=function(){function t(t){var i=this;this.dragStart=function(n){var r=i.parent,t;document.body.classList.add("e-prevent-select");t=r.element.querySelector(".e-gridpopup");t&&(t.style.display="none");i.parent.reorderModule.dragStart({target:n.target,column:i.column,event:n.event});i.parent.groupModule.columnDragStart({target:n.target,column:i.column});n.bindEvents(n.dragElement)};this.drag=function(n){var t=i.parent,u=n.target,r,f;if(u){if(r=sf.base.closest(u,".e-grid"),f=i.parent.element.querySelector(".e-cloneproperties"),!(r&&r.getAttribute("id")===t.element.getAttribute("id")||(sf.base.classList(f,["e-notallowedcur"],["e-defaultcur"]),t.options.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"),t.options.groupReordering)))return;t.options.allowReordering&&i.parent.reorderModule.drag({target:n.target,column:i.column,event:n.event});t.options.allowGrouping&&i.parent.groupModule.columnDrag({target:n.target})}};this.dragStop=function(t){var f,r=i.parent,u;document.body.classList.remove("e-prevent-select");u=r.element.querySelector(".e-gridpopup");u&&(u.style.display="none");(!n(t.target,"e-headercell")&&!n(t.target,"e-groupdroparea")||!r.options.allowReordering&&n(t.target,"e-headercell")||!t.helper.getAttribute("e-mappinguid")&&n(t.target,"e-groupdroparea"))&&(sf.base.remove(t.helper),f=!0);r.options.allowReordering&&i.parent.reorderModule.dragStop({target:t.target,event:t.event,column:i.column,cancel:f})};this.drop=function(n){var t=i.parent,r=(n.droppedElement.getAttribute("e-mappinguid"),sf.base.closest(n.target,".e-grid"));sf.base.remove(n.droppedElement);(!r||r.getAttribute("id")===t.element.getAttribute("id"))&&(t.options.allowReordering||t.options.allowGrouping)&&(t.options.allowReordering&&i.parent.reorderModule.headerDrop({target:n.target}),t.options.allowGrouping&&t.options.showDropArea&&i.parent.groupModule.columnDrop({target:n.target,droppedElement:n.droppedElement}))};this.helper=function(t){var f=i.parent,o=t.sender.target,s=n(o,"e-headercell"),u,r,h,c,e;if(!f.options.allowReordering&&!f.options.allowGrouping||!sf.base.isNullOrUndefined(s)&&s.querySelectorAll(".e-checkselectall").length>0||(u=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),r=o.classList.contains("e-headercell")?o:s,!r||!f.options.allowReordering&&r.classList.contains("e-stackedheadercell")))return!1;if(c=r.offsetHeight,e=r.querySelector(".e-headercelldiv")||r.querySelector(".e-stackedheadercelldiv"),e){if(h=r.querySelector(".e-stackedheadercelldiv")?f.getStackedHeaderColumnByHeaderText(e.innerText.trim(),f.options.columns):f.getColumnByUid(e.getAttribute("e-mappinguid")),i.column=h,i.column.lockColumn)return!1;u.setAttribute("e-mappinguid",e.getAttribute("e-mappinguid"))}return u.innerHTML=e?h.headerText:r.firstElementChild.innerHTML,u.style.width=r.offsetWidth+"px",u.style.height=r.offsetHeight+"px",u.style.lineHeight=(c-6).toString()+"px",f.element.appendChild(u),u};this.parent=t;(this.parent.options.allowGrouping||this.parent.options.allowReordering)&&(this.initializeHeaderDrag(),this.initializeHeaderDrop())}return t.prototype.initializeHeaderDrag=function(){var i=this.parent;if(this.parent.options.allowReordering||this.parent.options.allowGrouping&&this.parent.options.showDropArea)for(var t=[].slice.call(i.getHeaderContent().querySelectorAll(".e-columnheader")),n=0,r=t.length;n<r;n++)new sf.base.Draggable(t[n],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isPreventSelect:!1})},t.prototype.initializeHeaderDrop=function(){var n=this.parent;new sf.base.Droppable(n.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},t}(),it=function(){function n(n){var t=this;this.drop=function(n){t.parent.groupModule.columnDrop({target:n.target,droppedElement:n.droppedElement});sf.base.remove(n.droppedElement)};this.parent=n;this.parent.options.allowGrouping&&this.initializeContentDrop()}return n.prototype.initializeContentDrop=function(){var n=this.parent;new sf.base.Droppable(n.getContent(),{accept:".e-dragclone",drop:this.drop})},n}(),rt=function(){function t(n){this.parent=n;n.options.allowReordering&&this.createReorderElement()}return t.prototype.chkDropPosition=function(n,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),r=!i||!i.lockColumn;return(n.parentElement.isEqualNode(t.parentElement)||this.parent.options.frozenColumns&&Array.prototype.indexOf.call(sf.base.closest(n,"thead").children,n.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(n,t)>-1&&r},t.prototype.chkDropAllCols=function(n,t){for(var i,r=this.getHeaderCells();!i&&r.length>0;)i=n!==r.pop()&&this.targetParentContainerIndex(n,t)>-1;return i},t.prototype.findColParent=function(n,t,i){var r,f,u;for(i=i,r=0,f=t.length;r<f;r++){if(n===t[r])return!0;if(t[r].columns){if(u=i.length,i.push(t[r]),this.findColParent(n,t[r].columns,i))return!0;i.splice(u,i.length-u)}}return!1},t.prototype.getColumnsModel=function(n){for(var i=[],r=[],t=0,u=n.length;t<u;t++)i.push(n[t]),n[t].columns&&(r=r.concat(n[t].columns));return r.length&&(i=i.concat(this.getColumnsModel(r))),i},t.prototype.headerDrop=function(n){var s=this.parent,l=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),r=s.getColumnByUid(l),t,u,i,e,o;if(sf.base.closest(n.target,"th")&&(sf.base.isNullOrUndefined(r)||r.allowReordering&&!r.lockColumn)){if(t=sf.base.closest(n.target,".e-headercell"),u=(t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),!sf.base.isNullOrUndefined(u)&&(i=s.getColumnByUid(u),sf.base.isNullOrUndefined(i)||!i.allowReordering||i.lockColumn))return;if(t&&this.chkDropPosition(this.element,t)&&this.chkDropAllCols(this.element,t))if(this.parent.options.enableColumnVirtualization){var h=this.parent.options.columns,v=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),y=this.parent.getColumns(!0).filter(function(n){return n.uid===v}),f=null,p=y[0],c=t.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");h.some(function(n,t){return n.uid===c&&(f=t,n.uid===c)});sf.base.isNullOrUndefined(f)||this.moveColumns(f,p)}else if(e=this.targetParentContainerIndex(this.element,t),o=this.element.firstElementChild.getAttribute("e-mappinguid"),this.destElement=t,o)this.moveColumns(e,this.parent.getColumnByUid(o));else{var w=this.getHeaderCells(),b=a(this.element,w),k=(h=this.getColumnsModel(this.parent.options.columns))[b];this.moveColumns(e,k)}}},t.prototype.isActionPrevent=function(n){return b(n.element)},t.prototype.moveColumns=function(n,t,i,r){var s=this.parent,u,c;if(!this.isActionPrevent(s)){var h=this.getColParent(t,this.parent.options.columns),f=h?h.columns:this.parent.options.columns,o=e(t,f);if(this.parent.options.frozenColumns&&h&&!i){for(u=0;u<f.length;u++)if(f[u].field===t.field){o=u;break}if(c=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid")),c){for(u=0;u<f.length;u++)if(f[u].field===c.field){n=u;break}}else for(u=0;u<f.length;u++)f[u].headerText===this.destElement.innerText.trim()&&(n=u)}s.options.allowReordering&&o!==n&&-1!==o&&-1!==n&&(f.splice(n,0,f.splice(o,1)[0]),s.getColumns(!0),!1!==r&&setTimeout(function(){s.dotNetRef.invokeMethodAsync("ColumnReordered",{requestType:"reorder",fromIndex:n,toIndex:o,toColumnUid:t.uid})},10))}},t.prototype.targetParentContainerIndex=function(n,t){var r=this.getHeaderCells();"None"!==this.parent.options.frozenName&&this.parent.updateColumnLevelFrozen();var i=this.parent.options.columns,u="None"==this.parent.options.frozenName?this.getColumnsModel(i):this.parent.frozenReorderColumnModel.slice(),f=this.getColParent(u[a(n,r)],i);return i=f?f.columns:i,e(u[a(t,r)],i)},t.prototype.getHeaderCells=function(){var s=this.parent.options.frozenColumns,h,r,f,i,n;if(s&&"None"===this.parent.options.frozenName){var e=void 0,t=void 0,u=[],o=[].slice.call(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-columnheader"));if(s&&"None"===this.parent.options.frozenName)for(h=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll(".e-columnheader")),r=0;r<o.length;r++){for(e=[].slice.call(o[r].getElementsByClassName("e-headercell")),t=[].slice.call(h[r].getElementsByClassName("e-headercell")),f=void 0,i=0;i<e.length;i++){for(n=0;n<t.length;n++)if(t[n].innerText===e[i].innerText){f=!0;break}f||(u=u.concat([e[i]]))}for(n=0;n<t.length;n++)u.push(t[n])}else for(r=0;r<o.length;r++)for(t=[].slice.call(o[r].getElementsByClassName("e-headercell")),i=0;i<t.length;i++){for(f=void 0,n=i+1;n<t.length;n++)if(t[n].innerText===t[i].innerText){f=!0;break}f||(u=u.concat([t[i]]))}return u}return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},t.prototype.getColParent=function(n,t){var i=[];return this.findColParent(n,t,i),i[i.length-1]},t.prototype.reorderSingleColumn=function(n,t){var i=this.parent.getColumnByField(n),r=this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)&&(sf.base.isNullOrUndefined(r)||r.allowReordering&&!i.lockColumn)){var u=this.parent.getColumnByField(t),f=this.getColParent(u,this.parent.options.columns),o=e(u,f?f.columns:this.parent.options.columns);o>-1&&this.moveColumns(o,this.parent.getColumnByField(n),!0)}},t.prototype.reorderMultipleColumns=function(n,t){var o=this.parent.getColumnIndexByField(t),u=this.parent.getColumnByField(t),i,r,s,f,h;if(!(o<0)&&(sf.base.isNullOrUndefined(u)||u.allowReordering&&!u.lockColumn)){for(i=0;i<n.length;i++)if(r=this.parent.getColumnByField(n[i]),!sf.base.isNullOrUndefined(r)&&(!r.allowReordering||r.lockColumn))return;for(i=0;i<n.length;i++)r=this.parent.getColumnByIndex(o),s=this.getColParent(r,this.parent.options.columns),f=e(r,s?s.columns:this.parent.options.columns),f>-1&&this.moveColumns(f,this.parent.getColumnByField(n[i]),!0,!1),this.parent.getColumnIndexByField(n[i+1])>=f&&o++;h=this.parent.getColumns();this.parent.dotNetRef.invokeMethodAsync("ColumnReordered",{fromColumnUid:n.map(function(n){return h.filter(function(t){return t.field===n})[0].uid}),toColumnUid:u.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}},t.prototype.moveTargetColumn=function(n,t){t>-1&&this.moveColumns(t,n,!0)},t.prototype.reorderSingleColumnByTarget=function(n,t){var i=this.parent.getColumnByField(n);this.moveTargetColumn(i,t)},t.prototype.reorderMultipleColumnByTarget=function(n,t){for(var i=0;i<n.length;i++)this.reorderSingleColumnByTarget(n[i],t)},t.prototype.reorderColumns=function(n,t){"string"==typeof n?(this.reorderSingleColumn(n,t),this.fromCol=n):(this.reorderMultipleColumns(n,t),this.fromCol=n[0])},t.prototype.reorderColumnByIndex=function(n,t){var i=this.parent.getColumnByIndex(n);this.moveTargetColumn(i,t)},t.prototype.reorderColumnByTargetIndex=function(n,t){"string"==typeof n?this.reorderSingleColumnByTarget(n,t):this.reorderMultipleColumnByTarget(n,t)},t.prototype.createReorderElement=function(){var n=this.parent.element.querySelector(".e-headercontent");this.upArrow=n.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}}));this.downArrow=n.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},t.prototype.destroy=function(){this.parent.element;this.upArrow&&sf.base.remove(this.upArrow);this.downArrow&&sf.base.remove(this.downArrow)},t.prototype.keyPressHandler=function(n){this.parent;n.action},t.prototype.drag=function(t){var u=this.parent,i=t.target;if(t.column.allowReordering&&!t.column.lockColumn){var f=sf.base.closest(i,".e-headercell:not(.e-stackedHeaderCell)"),e=u.element.querySelector(".e-cloneproperties"),o=this.x>r(t.event).x+u.getContent().firstElementChild.scrollLeft;sf.base.removeClass(u.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]);this.setDisplay("none");this.stopTimer();sf.base.classList(e,["e-defaultcur"],["e-notallowedcur"]);this.updateScrollPostion(t.event);f&&!f.isEqualNode(this.element)&&(i=f,this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i)?(this.updateArrowPosition(i,o),sf.base.classList(i,["e-allowDrop","e-reorderindicate"],[])):u.options.allowGrouping&&n(t.target,"e-groupdroparea")||sf.base.classList(e,["e-notallowedcur"],["e-defaultcur"]))}},t.prototype.updateScrollPostion=function(n){var u=this,f=this.parent.options.frozenColumns,t=r(n).x,i=this.parent.element.getBoundingClientRect(),e=f?this.parent.element.querySelector(".e-movableheader").getBoundingClientRect().left:i.left,o=i.right,s=f?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();"None"!==this.parent.options.frozenName?this.updateFrozenScrollPosition(t,i):t>e&&t<e+35?this.timer=window.setInterval(function(){u.setScrollLeft(s,!0)},50):t<o&&t>o-35&&(this.timer=window.setInterval(function(){u.setScrollLeft(s,!1)},50))},t.prototype.updateFrozenScrollPosition=function(n,t){var i=this.parent.getContent().querySelector(".e-movablecontent"),r=this.parent.element.querySelector(".e-movableheader").getBoundingClientRect(),e=this.parent.options.frozenLeftCount,u=this.parent.options.frozenRightCount?r.right:t.right,f=e?r.left:t.left;n>f&&n<f+35?this.timer=window.setInterval(function(){this.setScrollLeft(i,!0)},50):n<u&&n>u-35&&(this.timer=window.setInterval(function(){this.setScrollLeft(i,!1)},50))},t.prototype.setScrollLeft=function(n,t){var i=n.scrollLeft;n.scrollLeft=n.scrollLeft+(t?-5:5);i!==n.scrollLeft&&this.setDisplay("none")},t.prototype.stopTimer=function(){window.clearInterval(this.timer)},t.prototype.updateArrowPosition=function(n,t){var i=n.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect();t&&i.left<r.left||!t&&i.right>r.right||(this.upArrow.style.top=i.top+i.height-r.top+"px",this.downArrow.style.top=i.top-r.top-4+"px",this.upArrow.style.left=this.downArrow.style.left=(t?i.left:i.right)-r.left-4+"px",this.setDisplay(""))},t.prototype.dragStart=function(t){var u=this.parent,i;document.body.classList.add("e-prevent-select");i=t.target;this.element=i.classList.contains("e-headercell")?i:n(i,"e-headercell");t.column.allowReordering&&!t.column.lockColumn&&(this.x=r(t.event).x+u.getContent().firstElementChild.scrollLeft)},t.prototype.dragStop=function(n){var t=this.parent;document.body.classList.remove("e-prevent-select");this.setDisplay("none");this.stopTimer();n.cancel;sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},t.prototype.setDisplay=function(n){this.upArrow.style.display=n;this.downArrow.style.display=n},t.prototype.getModuleName=function(){return"reorder"},t}(),y="e-rhandler",ut="e-rsuppress",p="e-ricon",ft="e-rhelper",h="th.e-headercell",et="e-rcursor",ot=function(){function i(n){this.tapped=!1;this.isDblClk=!0;this.parent=n;this.widthService=new f(this.parent)}return i.prototype.autoFitColumns=function(n){var t=null==n||n.length<=0?this.parent.getColumns().map(function(n){return n.field}):"string"==typeof n?[n]:n;this.findColumn(t)},i.prototype.autoFit=function(){var n=this.parent.getColumns().filter(function(n){return!0===n.autoFit}).map(function(n){return n.field||n.headerText});n.length>0&&this.autoFitColumns(n)},i.prototype.resizeColumn=function(n,t,i){var e,o,f,v,h,c,u=this.parent,k=0,d=0,l=i||this.parent.getUidByColumnField(n),s=this.parent.getNormalizedColumnIndex(l),tt=this.parent.getColumnIndexByField(n),y=u.options.frozenColumns,p,r,g,a,w,b,ut;if(sf.base.isNullOrUndefined(u.getFooterContent())||(f=u.getFooterContent().querySelector(".e-table")),y?t<y?(e=u.getHeaderTable(),o=u.getContentTable(),v=e.querySelector('[e-mappinguid="'+l+'"]').parentElement.cloneNode(!0),h=o.querySelectorAll("td:nth-child("+(s+1)+")"),f&&(c=f.querySelectorAll("td:nth-child("+(s+1)+")"))):(e=u.getHeaderContent().querySelector(".e-movableheader").children[0],o=u.getContent().querySelector(".e-movablecontent").children[0],v=e.querySelector('[e-mappinguid="'+l+'"]').parentElement.cloneNode(!0),h=o.querySelectorAll("td:nth-child("+(s-y+1)+")"),f&&(c=(f=u.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(s-y+1)+")"))):(e=u.getHeaderTable(),o=u.getContentTable(),v=e.querySelector('[e-mappinguid="'+l+'"]').parentElement.cloneNode(!0),h=o.querySelectorAll("td:nth-child("+(s+1)+"):not(.e-groupcaption)"),f&&(c=f.querySelectorAll("td:nth-child("+(s+1)+"):not(.e-groupcaption)"))),p=e.querySelector("tr").querySelectorAll(".e-grouptopleftcell"),p.length>0)for(r=0;r<p.length;r++)d+=p[r].offsetWidth;g=o.querySelector(".e-detailrowcollapse")||o.querySelector(".e-detailrowexpand");this.parent.options.hasDetailTemplate&&g&&(d+=g.offsetWidth);var ft=[v],it=[],nt=[];if(f)for(r=0;r<c.length;r++)nt[r]=c[r].cloneNode(!0);for(r=0;r<h.length;r++)it[r]=h[r].cloneNode(!0);var et=this.createTable(e,ft,"e-gridheader"),ot=this.createTable(o,it,"e-gridcontent"),rt=null;if(nt.length&&(rt=this.createTable(f,nt,"e-gridfooter")),a=u.getColumns()[tt].width=sf.base.formatUnit(Math.max(et,ot,rt)),this.widthService.setColumnWidth(u.getColumns()[tt]),!1===u.getColumns().some(function(n){return(null===n.width||void 0===n.width||n.width.length<=0)&&n.visible}))for(w=u.getColumns(),r=0;r<w.length;r++)w[r].visible&&(k+=parseFloat(w[r].width));b=k+d;k>0&&!u.options.frozenColumns&&(this.parent.options.hasDetailTemplate&&this.widthService.setWidth("30",0),e.style.width=sf.base.formatUnit(b),o.style.width=sf.base.formatUnit(b),sf.base.isNullOrUndefined(f)||(f.style.width=sf.base.formatUnit(b)));ut=e.offsetWidth;u.getContent().scrollWidth>ut?(e.classList.add("e-tableborder"),o.classList.add("e-tableborder")):(e.classList.remove("e-tableborder"),o.classList.remove("e-tableborder"));sf.base.isNullOrUndefined(f)||f.classList.add("e-tableborder");this.parent.freezeModule.refreshRowHeight();a.toString().indexOf("px")>0&&(a=a.replace("px",""));this.parent.options.isResizedGrid=!0;this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:a,columnUid:l})},i.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector(".e-gridheader")||n.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents())},i.prototype.getModuleName=function(){return"resize"},i.prototype.findColumn=function(n){for(var r=function(i){var f=n[i],r=t.parent.getColumnIndexByField(f),u=t.parent.getColumns()[r];r>-1&&!sf.base.isNullOrUndefined(u)&&!0===u.visible&&(t.parent.options.allowGrouping&&!sf.base.isNullOrUndefined(t.parent.options.initGroupingField)&&t.parent.options.initGroupingField.some(function(n){return n==u.field})&&!t.parent.options.showGroupedColumn||t.resizeColumn(f,r))},t=this,i=0;i<n.length;i++)r(i)},i.prototype.createTable=function(n,t,i){var u=sf.base.createElement("div"),f,r,s,e,o,h;for(u.className=this.parent.element.className,u.style.cssText="display: inline-block;visibility:hidden;position:absolute",f=sf.base.createElement("div"),f.className=i,r=sf.base.createElement("table"),r.className=n.className,r.classList.add("e-resizetable"),r.style.cssText="table-layout: auto;width: auto",s=sf.base.createElement("tr"),e=0;e<t.length;e++)o=s.cloneNode(),o.className=n.querySelector("tr").className,o.appendChild(t[e]),r.appendChild(o);return f.appendChild(r),u.appendChild(f),document.body.appendChild(u),h=r.getBoundingClientRect().width,document.body.removeChild(u),Math.ceil(h)},i.prototype.render=function(){this.unwireEvents();this.wireEvents();this.setHandlerHeight()},i.prototype.refreshHeight=function(){for(var t=this.getResizeHandlers(),n=0;n<t.length;n++)t[n].parentElement.offsetHeight>0&&(t[n].style.height=t[n].parentElement.offsetHeight+"px");this.setHandlerHeight()},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this);sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},i.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart);sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},i.prototype.getResizeHandlers=function(){return this.parent.options.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+y)):[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+y))},i.prototype.setHandlerHeight=function(){for(var t=[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+ut)),n=0;n<t.length;n++)t[n].style.height=t[n].parentElement.offsetHeight+"px"},i.prototype.callAutoFit=function(n){if(n.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(n);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid);sf.base.closest(n.target,h).classList.add("e-resized")}},i.prototype.resizeStart=function(n){var r,u,i,f,t;if(n.target.classList.contains("e-rhandler")){if(r=[],u={},!this.helper){if(0===this.getScrollBarWidth()){for(i=0,f=this.refreshColumnWidth();i<f.length;i++)t=f[i],this.widthService.setColumnWidth(t,null,null,!1),u={width:""==t.width?0:t.width,columnUid:t.uid},r.push(u);this.widthService.setWidthToTable()}this.refreshStackedColumnWidth();this.element=n.target;this.parentElementWidth=this.parent.element.getBoundingClientRect().width;this.appendHelper();this.column=this.getTargetColumn(n);this.pageX=this.getPointX(n);this.minMove=this.parent.options.enableRtl?parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString());this.minMove+=this.pageX}sf.base.Browser.isDevice&&!this.helper.classList.contains(p)?(this.helper.classList.add(p),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.resizeEnd,this),sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"),this.parent.dotNetRef.invokeMethodAsync("ResizeStarted",{columnUid:this.column.uid,columnList:r}))}},i.prototype.cancelResizeAction=function(n){n&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"));sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart));sf.base.detach(this.helper);this.refresh()},i.prototype.getWidth=function(n,t,i){return t&&n<t?t:i&&n>i?i:n},i.prototype.updateResizeEleHeight=function(){for(var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),n=0;n<t.length;n++)t[n].style.height=t[n].parentElement.offsetHeight+"px"},i.prototype.getColData=function(n,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(n))||"auto"===this.widthService.getWidth(n)?"0":this.widthService.getWidth(n).toString())+t,minWidth:n.minWidth?parseFloat(n.minWidth.toString()):null,maxWidth:n.maxWidth?parseFloat(n.maxWidth.toString()):null}},i.prototype.resizing=function(t){var s,i,u,r,e,f,h,o,c,l;if(!sf.base.isNullOrUndefined(this.column)){if(s=0,sf.base.isNullOrUndefined(this.column)&&(s=n(this.element,"th").offsetWidth),this.parent.options.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight()),i=this.getPointX(t),u=this.parent.options.enableRtl?-(i-this.pageX):i-this.pageX,"Right"===this.column.freeze&&this.column.isFrozen&&(u=this.parent.options.enableRtl?i-this.pageX:this.pageX-i),r=this.getColData(this.column,u),r.width||(r.width=sf.base.closest(this.element,"th").offsetWidth),e=this.getWidth(r.width,r.minWidth,r.maxWidth),"Right"!==this.column.freeze&&(!this.parent.options.enableRtl&&this.minMove>=i||this.parent.options.enableRtl&&this.minMove<=i)&&(e=this.column.minWidth?parseFloat(this.column.minWidth.toString()):0,this.pageX=i=this.minMove),e!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?s.toString():this.column.width.toString())){for(this.pageX=i,this.column.width=sf.base.formatUnit(e),f=[this.column],h=[this.column],this.column.columns&&(f=this.getSubColumns(this.column,[]),f=this.calulateColumnsWidth(f,!1,u),h=this.calulateColumnsWidth(f,!0,u)),o=0,c=h;o<c.length;o++)l=c[o],this.widthService.setColumnWidth(l,null,"resize",!1);this.updateHelper()}this.isDblClk=!1}},i.prototype.calulateColumnsWidth=function(n,t,i){for(var u,f,s=[],e=0,h=n;e<h.length;e++){for(var r=h[e],c=0,o=0;o<n.length;o++)c+=parseFloat(n[o].width.toString());u=this.getColData(r,parseFloat(r.width)*i/c);f=this.getWidth(u.width,u.minWidth,u.maxWidth);f!==parseFloat(r.width.toString())&&(t&&(r.width=sf.base.formatUnit(f<1?1:f)),s.push(r))}return s},i.prototype.getSubColumns=function(n,t){for(var i,r=0,u=n.columns;r<u.length;r++)i=u[r],!1!==i.visible&&i.allowResizing&&(i.columns?this.getSubColumns(i,t):t.push(i));return t},i.prototype.resizeEnd=function(t){if(this.helper){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd);this.updateCursor("remove");sf.base.detach(this.helper);this.parent.getContent();sf.base.closest(this.element,".e-headercell").classList.add("e-resized");this.isFrozenColResized=n(this.element,"e-frozenheader")?!0:!1;this.parent.options.frozenColumns&&(this.parent.freezeModule.refreshRowHeight(),this.parent.freezeModule.setFrozenHeight());this.parent.options.allowTextWrap&&this.updateResizeEleHeight();var i=this.column.width.toString();i=i.replace("px","");this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:i,columnUid:this.column.uid,allowStopEvent:!0});this.refresh();this.doubleTapEvent(t);this.isDblClk=!0}},i.prototype.getPointX=function(n){return n.touches&&n.touches.length?n.touches[0].pageX:n.pageX},i.prototype.refreshColumnWidth=function(){for(var n,u=this.parent.getColumns(),i=0,f=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));i<f.length;i++)for(var t=f[i],r=0,e=u;r<e.length;r++)if(n=e[r],t.querySelector("[e-mappinguid]")&&t.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===n.uid&&n.visible){n.width=t.getBoundingClientRect().width?t.getBoundingClientRect().width:n.width;break}return u},i.prototype.refreshStackedColumnWidth=function(){for(var i,n=0,t=this.parent.getStackedColumns(this.parent.options.columns);n<t.length;n++)i=t[n],i.width=this.getStackedWidth(i,0)},i.prototype.getStackedWidth=function(n,t){for(var i,r=0,u=n.columns;r<u.length;r++)i=u[r],!1!==i.visible&&(i.columns?this.getStackedWidth(i,t):t+=i.width);return t},i.prototype.getTargetColumn=function(n){var t=sf.base.closest(n.target,h),i=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},i.prototype.updateCursor=function(n){var r=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th")),t,i;for(r.push(this.parent.element),t=0,i=r;t<i.length;t++)i[t].classList[n](et)},i.prototype.refresh=function(){this.column=null;this.pageX=null;this.element=null;this.helper=null},i.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:ft});this.parent.element.appendChild(this.helper);this.setHelperHeight()},i.prototype.setHelperHeight=function(){var f=this.parent.getContent().offsetHeight-(this.parent.options.enableVirtualization&&this.parent.options.frozenColumns?0:this.getScrollBarWidth()),t=sf.base.closest(this.element,h),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),r,u;for(this.parent.options.frozenColumns&&t.parentElement.children.length&&!t.parentElement.children[0].classList.contains("e-stackedheadercell")&&(i=n(t,"e-movableheader")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll("tr")):n(t,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr"))),r=i.indexOf(t.parentElement);r<i.length;r++)f+=i[r].offsetHeight;u=this.calcPos(t);u.left+=n(t,"e-frozen-right-header")?this.parent.options.enableRtl?t.offsetWidth-2:-1:this.parent.options.enableRtl?-1:t.offsetWidth-2;this.helper.style.cssText="height: "+f+"px; top: "+u.top+"px; left:"+Math.floor(u.left)+"px;"},i.prototype.getScrollBarWidth=function(n){var i=this.parent.options.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();return i.scrollHeight>i.clientHeight&&n||i.scrollWidth>i.clientWidth?t():0},i.prototype.removeHelper=function(n){var t=n.target.classList;t.contains(y)||t.contains(p)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},i.prototype.updateHelper=function(){var t=sf.base.closest(this.element,h),i=Math.floor(this.calcPos(t).left+(this.parent.options.enableRtl?-1:t.offsetWidth-2)),r;(n(t,"e-frozen-right-header")&&(i=Math.floor(this.calcPos(t).left+(this.parent.options.enableRtl?t.offsetWidth-2:-1))),i>this.parentElementWidth&&(i=this.parentElementWidth-2),this.parent.options.frozenColumns)&&(r=sf.base.closest(t,".e-table").offsetLeft,i<r&&(i=r));this.helper.style.left=i+"px"},i.prototype.calcPos=function(t){for(var r={top:0,left:0},f=t.getBoundingClientRect(),u=t.ownerDocument,i=n(t,"e-grid")||u.documentElement;i&&(i===u.body||i===u.documentElement)&&"static"===i.style.position;)i=i.parentNode;return i&&i!==t&&1===i.nodeType&&(r=i.getBoundingClientRect()),{top:f.top-r.top,left:f.left-r.left}},i.prototype.doubleTapEvent=function(n){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(n),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},i.prototype.getUserAgent=function(){var n=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(n)},i.prototype.timeoutHandler=function(){this.tapped=null},i}(),st=function(){function t(t){var i=this;this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}});this.helper=function(t){var f=i.parent,u=t.sender.target,r=u.classList.contains("e-groupheadercell")?u:n(u,"e-groupheadercell");return!(!r||!u.classList.contains("e-drag")&&i.parent.options.groupReordering)&&(i.column=f.getColumnByField(r.firstElementChild.getAttribute("ej-mappingname")),i.visualElement.textContent=r.textContent,i.visualElement.style.width=r.offsetWidth+2+"px",i.visualElement.style.height=r.offsetHeight+2+"px",i.visualElement.setAttribute("e-mappinguid",i.column.uid),f.element.appendChild(i.visualElement),i.visualElement)};this.dragStart=function(n){i.parent.element.classList.add("e-ungroupdrag");document.body.classList.add("e-prevent-select");n.bindEvents(n.dragElement)};this.drag=function(t){var r=t.target,u=i.parent.element.querySelector(".e-cloneproperties");i.parent.options.groupReordering||(sf.base.classList(u,["e-defaultcur"],["e-notallowedcur"]),n(r,"e-gridcontent")||n(r,"e-headercell")||sf.base.classList(u,["e-notallowedcur"],["e-defaultcur"]))};this.dragStop=function(t){document.body.classList.remove("e-prevent-select");i.parent.element.classList.remove("e-ungroupdrag");!(n(t.target,"e-gridcontent")||n(t.target,"e-gridheader"))&&sf.base.remove(t.helper)};this.preventTouchOnWindow=function(n){n.preventDefault()};this.drop=function(t){var r=i.parent,u=r.getColumnByUid(t.droppedElement.getAttribute("e-mappinguid"));r.element.querySelector(".e-groupdroparea").classList.remove("e-hover");sf.base.remove(t.droppedElement);r.options.allowGrouping&&sf.base.EventHandler.remove(window,"touchmove",i.preventTouchOnWindow);i.parent.element.querySelector(".e-groupdroparea").removeAttribute("aria-dropeffect");i.parent.element.querySelector("[aria-grabbed=true]").setAttribute("aria-grabbed","false");sf.base.isNullOrUndefined(u)||!1===u.allowGrouping||n(r.getColumnHeaderByUid(u.uid),"e-grid").getAttribute("id")!==r.element.getAttribute("id")||r.dotNetRef.invokeMethodAsync("GroupColumn",u.field,"Group")};this.parent=t;this.parent.options.allowGrouping&&this.parent.options.showDropArea&&this.initDragAndDrop()}return t.prototype.columnDrag=function(t){this.parent.options.groupReordering;var i=this.parent,r=this.parent.element.querySelector(".e-cloneproperties");sf.base.classList(r,["e-defaultcur"],["e-notallowedcur"]);sf.base.EventHandler.add(window,"touchmove",this.preventTouchOnWindow);n(t.target,"e-groupdroparea")||this.parent.options.allowReordering&&n(t.target,"e-headercell")||sf.base.classList(r,["e-notallowedcur"],["e-defaultcur"]);t.target.classList.contains("e-groupdroparea")?i.element.querySelector(".e-groupdroparea").classList.add("e-hover"):i.element.querySelector(".e-groupdroparea").classList.remove("e-hover")},t.prototype.columnDragStart=function(t){if(!t.target.classList.contains("e-stackedheadercell")){var i=this.parent.element.querySelector(".e-groupdroparea");i&&i.setAttribute("aria-dropeffect","copy");(t.target.classList.contains("e-headercell")?t.target:n(t.target,"e-headercell")).setAttribute("aria-grabbed","true")}},t.prototype.columnDrop=function(t){var r=this.parent,i;if("grouping"===t.droppedElement.getAttribute("action")){if(i=r.getColumnByUid(t.droppedElement.getAttribute("e-mappinguid")),sf.base.isNullOrUndefined(i)||!1===i.allowGrouping||n(r.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==r.element.getAttribute("id"))return;r.dotNetRef.invokeMethodAsync("GroupColumn",i.field,"Ungroup")}},t.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop();this.initializeGHeaderDrag()},t.prototype.initializeGHeaderDrag=function(){var n=this.parent.element.querySelector(".e-groupdroparea");n&&new sf.base.Draggable(n,{dragTarget:this.parent.options.groupReordering?".e-drag":".e-groupheadercell",distance:this.parent.options.groupReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1})},t.prototype.initializeGHeaderDrop=function(){this.parent;var n=this.parent.element.querySelector(".e-groupdroparea");n&&new sf.base.Droppable(n,{accept:".e-dragclone",drop:this.drop})},t.prototype.getModuleName=function(){return"group"},t.prototype.getGHeaderCell=function(n){return this.element&&this.element.querySelector('[ej-mappingname="'+n+'"]')?this.element.querySelector('[ej-mappingname="'+n+'"]').parentElement:null},t}(),ht=function(){function n(n){this.mediaCol=[];this.media={};this.mediaBindInstance={};this.mediaColVisibility={};this.noOfTimesInvokedByMedia=0;this.mediaChange=!0;this.mediaColumnList=[];this.parent=n}return n.prototype.renderColumnChooser=function(){var n=this.parent.element.querySelector("#"+this.parent.element.id+"_ccdlg"),i,t,r,u;n.style.maxHeight="430px";i=n.style.display;n.style.display="block";t=sf.popups.calculateRelativeBasedPosition(this.parent.element.querySelector(".e-cc-toolbar"),n);n.style.display=i;u=t.top+this.parent.element.querySelector(".e-cc-toolbar").getBoundingClientRect().height;r=this.parent.options.enableRtl?this.parent.element.querySelector(".e-columnchooser-btn").offsetLeft:t.left-250+this.parent.element.querySelector(".e-cc-toolbar").clientWidth+2;this.parent.dotNetRef.invokeMethodAsync("GetChooserPosition",r.toString(),u.toString())},n.prototype.setMediaColumns=function(){var t=this.parent.getColumns(),n;if(!sf.base.isNullOrUndefined(t)){for(n=0;n<t.length;n++)""!==t[n].hideAtMedia&&(sf.base.isNullOrUndefined(t[n].visible)||t[n].visible)&&this.pushMediaColumn(t[n],n);this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility});this.mediaColVisibility={}}},n.prototype.pushMediaColumn=function(n,t){this.mediaCol.push(n);this.media[n.uid]=window.matchMedia(n.hideAtMedia);this.mediaQueryUpdate(t,this.media[n.uid],!0);this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t);this.media[n.uid].addListener(this.mediaBindInstance[t])},n.prototype.mediaQueryUpdate=function(n,t,i){var f=this.parent.getColumns()[n],u=this.parent.getColumns(),r;if(this.mediaCol.some(function(n){return n.uid===f.uid})&&(this.mediaColVisibility[f.uid]=t.matches,!i)){if(this.noOfTimesInvokedByMedia++,this.mediaChange=0===this.mediaColumnList.length,this.mediaChange)for(r=0;r<u.length;r++)u[r].hideAtMedia.split(" ").slice(-1).toLocaleString()===t.media.split(" ").slice(-1).toLocaleString()&&this.mediaColumnList.push(u[r]);(this.mediaColumnList.length>0&&this.noOfTimesInvokedByMedia===this.mediaColumnList.length||this.mediaCol.length>0&&0===this.mediaColumnList.length)&&(this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility,invokedByMedia:!0}),this.noOfTimesInvokedByMedia=0,this.mediaColVisibility={},this.mediaColumnList=[])}},n.prototype.updateMediaColumns=function(n){for(var i=Object.keys(n),u=function(n){var r=-1;t.mediaCol.some(function(t){return r++,t.uid===i[n]})?t.mediaCol.splice(r,1):t.pushMediaColumn(t.parent.getColumnByUid(i[n]),t.parent.getColumnIndexByUid(i[n]))},t=this,r=0;r<i.length;r++)u(r)},n.prototype.removeMediaListener=function(){for(var n=0;n<this.mediaCol.length;n++)this.media[this.mediaCol[n].uid].removeListener(this.mediaBindInstance[this.mediaCol[n].index])},n}(),ct=function(){function n(n){this.key=null;this.uid=null;this.parent=n}return n.prototype.renderColumnMenu=function(n,t,i){var s,f,u,r,e,o;return(this.key=i,this.uid=n,s=this.parent.getColumnHeaderByUid(n).querySelector(".e-columnmenu"),f=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0],f.style.position="absolute",u=f.getElementsByTagName("ul")[0],sf.base.isNullOrUndefined(u))?{Left:1,Top:1}:(r={top:0,left:0},u.style.visibility="hidden",f.style.display="block",e=u.getBoundingClientRect(),u.classList.add("e-transparent"),u.style.visibility="",f.style.display="",o=this.getHeaderCell(s),sf.base.Browser.isDevice?(r.top=window.innerHeight/2-e.height/2,r.left=window.innerWidth/2-e.width/2):this.parent.options.enableRtl?r=sf.popups.calculatePosition(o,"left","bottom"):(r=sf.popups.calculatePosition(o,"right","bottom")).left-=e.width,t&&sf.base.EventHandler.add(u,"mouseover",this.appendFilter,this),{Left:-1!==Math.sign(r.left)?Math.ceil(r.left):0,Top:Math.ceil(r.top)})},n.prototype.setPosition=function(){var r=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0],e=sf.base.isNullOrUndefined(r)?null:r.getElementsByTagName("ul")[0];if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(this.uid)){var o=this.parent.getColumnHeaderByUid(this.uid).querySelector(".e-columnmenu"),n=this.getHeaderCell(o).getBoundingClientRect(),i=n.left+pageXOffset,u=n.bottom+pageYOffset,t=e.getBoundingClientRect(),f=document.documentElement;n.bottom+t.height>f.clientHeight&&u-n.height-t.height>f.clientTop&&(u=u-n.height-t.height);n.left+t.width>f.clientWidth&&n.right-t.width>f.clientLeft&&(i=i+n.width-t.width);i=i-e.getBoundingClientRect().width+n.width;r.style.left=Math.ceil(i+1)+"px";r.style.top=Math.ceil(u+1)+"px"}},n.prototype.appendFilter=function(n){var t=this,i=!1;setTimeout(function(){sf.base.closest(n.target,"#"+t.key)&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))||n.target.parentElement.id==t.key&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))?i=!0:!sf.base.closest(n.target,"#"+t.key)&&t.parent.element.querySelector(".e-filter-popup")&&(i=!1);t.parent.dotNetRef.invokeMethodAsync("FilterMouseOverHandler",t.uid,i)},10)},n.prototype.getHeaderCell=function(n){return sf.base.closest(n,"th.e-headercell")},n}(),lt=function(){function t(n){this.parent=n}return t.prototype.filterPopupRender=function(n,t,i,r){var f=this.parent.element.querySelector("#"+n),c,a,y,v;if(!sf.base.isNullOrUndefined(f))if(r){sf.base.EventHandler.add(f,"mousedown",this.mouseDownHandler,this);f.style.maxHeight="excel"==i?"800px":"350px";var p=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0].getElementsByTagName("ul")[0].querySelector(".e-icon-filter").parentElement,e=this.parent.element.querySelector(".e-filter-popup"),o=this.parent.element.getBoundingClientRect(),h=p.getBoundingClientRect(),u=h.left-o.left,s=h.top-o.top,l=f.style.display;f.style.display="block";o.height<s?s=s-e.offsetHeight+h.height:o.height<s+e.offsetHeight&&(s=o.height-e.offsetHeight);window.innerHeight<e.offsetHeight+s+o.top&&(s=window.innerHeight-e.offsetHeight-o.top);u+=this.parent.options.enableRtl?-e.offsetWidth:h.width;o.width<=u+e.offsetWidth?u-=h.width+e.offsetWidth:u<0&&(u+=e.offsetWidth+h.width);f.style.display=l;this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",u.toString(),s.toString())}else c=[].slice.call(this.parent.element.querySelector(".e-headercontent").querySelectorAll("div[e-mappinguid="+t+"]"))[1],f.style.maxHeight="excel"==i?"800px":"350px",l=f.style.display,f.style.display="block",a=sf.popups.calculateRelativeBasedPosition(c,f),f.style.display=l,u=a.left-250+c.clientWidth,y=a.top+c.getBoundingClientRect().height-5,u<1?u=250+u-16:u-=4,v=this.parent.element.offsetWidth,v-u<250&&(u-=250-(v-u)),this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",u.toString(),y.toString())},t.prototype.mouseDownHandler=function(t){(t&&sf.base.closest(t.target,".e-filter-popup")||t.currentTarget&&t.currentTarget.activeElement&&n(t.currentTarget.activeElement,"e-filter-popup")||n(t.target,"e-popup")||n(t.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("PreventColumnMenuClose",!0)},t}(),at=function(){function n(n){this.parent=n}return n.prototype.createTooltip=function(n,i){for(var d,u,e,g,k,ut,ft,et,p={},h=0;h<n.length;h++){u=this.parent.getContent();this.parent.options.frozenColumns&&(u=this.parent.getContent().querySelector(".e-movablecontent"));e=n[h].fieldName;g=n[h].message;e=e.replace(/[.]/g,"___");var o=this.parent.element.querySelector("#"+e)||document.querySelector("#"+e),nt=u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth,s="Dialog"!==this.parent.options.editMode;if(!o)return;var tt=sf.base.closest(o,".e-rowcell"),it=sf.base.closest(o,".e-row"),ot=this.parent.getContent().querySelector(".e-frozencontent"),c=void 0,rt=!1,a=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,v=[].slice.call(this.parent.getContent().querySelectorAll(".e-row"));"Batch"===this.parent.options.editMode&&a>1&&v.length>=a&&v[v.length-1].getAttribute("aria-rowindex")===it.getAttribute("aria-rowindex")&&(rt=!0);s&&(this.parent.options.frozenRows,(a>1&&v.length>=a&&("Bottom"===this.parent.options.newRowPosition&&i||!sf.base.isNullOrUndefined(tt)&&tt.classList.contains("e-lastrowcell")&&!it.classList.contains("e-addedrow"))||rt)&&(c=!0));var w=s?this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),y=w.getBoundingClientRect(),b=s?this.parent.element.getBoundingClientRect().left:y.left,l=sf.base.closest(o,"td"),f=l?l.getBoundingClientRect():o.parentElement.getBoundingClientRect(),r=this.parent.element.querySelector("#"+e+"_Error")||document.querySelector("#"+e+"_Error");r.style.top=f.bottom-y.top-(this.parent.options.frozenColumns?ot.scrollTop:0)+w.scrollTop+9+"px";r.style.left=f.left-b+w.scrollLeft+f.width/2+"px";r.style.maxWidth=f.width-4+"px";s&&y.left<b&&(r.style.left=parseInt(r.style.left,10)-y.left+b+"px");k=void 0;(k=c?r.querySelector(".e-tip-bottom"):r.querySelector(".e-tip-top"),(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&"Dialog"!==this.parent.options.editMode)&&(("Normal"===this.parent.options.editMode?sf.base.closest(o,".e-editcell"):sf.base.closest(o,".e-table")).style.position="relative",r.style.position="absolute");r.style.display="block";r.querySelector(".e-error").innerText=g;!c&&s&&u.getBoundingClientRect().bottom<f.bottom+f.height&&(u.scrollTop=u.scrollTop+r.offsetHeight+k.scrollHeight);ut=parseInt(document.defaultView.getComputedStyle(r,null).getPropertyValue("font-size"),10);(r.getBoundingClientRect().width<f.width&&r.querySelector("label").getBoundingClientRect().height/(1.2*ut)>=2&&(r.style.width=r.style.maxWidth),r.style.left=!this.parent.options.frozenColumns&&!this.parent.options.frozenRows||"Normal"!==this.parent.options.editMode&&"Batch"!==this.parent.options.editMode?parseInt(r.style.left,10)-r.offsetWidth/2+"px":l.offsetLeft+(l.offsetWidth/2-r.offsetWidth/2)+"px",s&&!nt&&!this.parent.options.allowPaging||this.parent.options.frozenColumns||this.parent.options.frozenRows)&&(u.style.position="static",ft=sf.popups.calculateRelativeBasedPosition(l,r),r.style.top=ft.top+f.height+9+"px");c&&(!nt||this.parent.options.frozenColumns||"auto"===this.parent.options.height||this.parent.options.frozenRows?r.style.bottom=f.height+9+"px":(et=u.scrollWidth>u.offsetWidth?t():0,r.style.bottom=parseInt(this.parent.options.height)-u.querySelector("table").offsetHeight-et+f.height+9+"px"),r.style.top=null);d=c?"bottom":"top";p[e]="top: "+r.style.top+"; bottom: "+r.style.bottom+"; left: "+r.style.left+"; \n            max-width: "+r.style.maxWidth+"; width: "+r.style.width+"; text-align: center; position: "+r.style.position+";"}this.parent.dotNetRef.invokeMethodAsync("ShowValidationPopup",p,d)},n}(),vt=function(){function n(n){this.copyContent="";this.isSelect=!1;this.parent=n;this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}});this.parent.element.appendChild(this.clipBoardTextArea)}return n.prototype.pasteHandler=function(){var n=this,t=this.parent,i,r;sf.base.closest(document.activeElement,".e-rowcell")&&t.options.allowEditing&&"Batch"===t.options.editMode&&"Cell"===t.options.selectionMode&&"Flow"!==t.options.cellSelectionMode&&(this.activeElement=document.activeElement,this.clipBoardTextArea.value="",i=window.scrollX,r=window.scrollY,this.clipBoardTextArea.focus(),setTimeout(function(){n.activeElement.focus();window.scrollTo(i,r);n.paste(n.clipBoardTextArea.value,n.getSelectedRowCellIndexes()[0].rowIndex,n.getSelectedRowCellIndexes()[0].cellIndexes[0])},10))},n.prototype.paste=function(n,t,i){var o,v,c,r=this.parent,u=i,f=t,e,h,w,b,a;if(r.options.allowEditing&&"Batch"===r.options.editMode&&"Cell"===r.options.selectionMode&&"Flow"!==r.options.cellSelectionMode){var l,y,s=n.split("\n"),k=r.getDataRows(),p=this.parent.options.frozenColumns;for(p&&(y=r.getMovableDataRows()),e=0;e<s.length;e++){if(l=s[e].split("\t"),u=i,e===s.length-1&&""===s[e]||sf.base.isUndefined(r.getRowByIndex(f))){u++;break}for(h=0;h<l.length;h++){if((c=r.getCellFromIndex(f,u),p)&&(w=k[f],b=y[f],c=!!w.querySelector('[aria-colindex="'+u+'"]')||b.querySelector('[aria-colindex="'+u+'"]')),!c){u++;break}o=r.getColumnByIndex(u);v=l[h];!o.allowEditing||o.isPrimaryKey||o.template||r.editModule&&r.dotNetRef.invokeMethodAsync("UpdateCell",f,o.field,v);u++}f++}a=this.parent.getCellFromIndex(f-1,u-1);a&&sf.base.classList(a,["e-focus","e-focused"],[])}},n.prototype.setCopyData=function(n){var u,f,o,e,s,t,i,r,h;if(""===window.getSelection().toString()){if(u=this.parent.options.frozenColumns,this.clipBoardTextArea.value=this.copyContent="",f=void 0,o=this.parent.getRows(),u&&(f=this.parent.getMovableDataRows()),"Cell"!==this.parent.options.selectionMode){if(e=this.parent.getSelectedRowIndexes(),n){for(s=[],t=0;t<this.parent.getVisibleColumns().length;t++)s[t]=this.parent.getVisibleColumns()[t].headerText;this.getCopyData(s,!1,"\t",n);this.copyContent+="\n"}for(t=0;t<e.length;t++)t>0&&(this.copyContent+="\n"),i=[].slice.call(o[e[t]].querySelectorAll(".e-rowcell:not(.e-hide)")),u&&i.push.apply(i,[].slice.call(f[e[t]].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(i,!1,"\t",n)}else if(r=this.checkBoxSelection(),r.status){if(n){for(h=[],t=0;t<r.colIndexes.length;t++)h.push(this.parent.getColumnHeaderByIndex(r.colIndexes[t]));this.getCopyData(h,!1,"\t",n);this.copyContent+="\n"}for(t=0;t<r.rowIndexes.length;t++)t>0&&(this.copyContent+="\n"),i=[].slice.call(o[r.rowIndexes[t]].querySelectorAll(".e-cellselectionbackground")),u&&i.push.apply(i,[].slice.call(f[r.rowIndexes[t]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(i,!1,"\t",n)}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",n);this.clipBoardTextArea.value=this.copyContent;sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select();this.isSelect=!0}},n.prototype.getCopyData=function(n,t,i,r){for(var f="string"!=typeof n[0],u=0;u<n.length;u++)r&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(n[u].getAttribute("aria-colindex"),10)].headerText+"\n"),f?n[u].classList.contains("e-hide")||(this.copyContent+=!n[u].classList.contains("e-gridchkbox")&&Object.keys(n[u].querySelectorAll(".e-check")).length?!0:!n[u].classList.contains("e-gridchkbox")&&Object.keys(n[u].querySelectorAll(".e-uncheck")).length?!1:n[u].innerText):this.copyContent+=n[u],u<n.length-1&&(this.copyContent+=i)},n.prototype.copy=function(n){if(document.queryCommandSupported("copy")){var t=document.activeElement;this.setCopyData(n);document.execCommand("copy");this.clipBoardTextArea.blur();t.focus()}this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},n.prototype.getSelectedRowCellIndexes=function(){var i,n=this.parent,r=[],u=n.getRows(),f,t;for(n.options.frozenColumns&&(i=n.getMovableDataRows()),f=function(t){var f=u[t].querySelectorAll(".e-cellselectionbackground"),e;(n.options.frozenColumns&&!f.length&&(f=i[t].querySelectorAll(".e-cellselectionbackground")),f.length)&&(e=[],f.forEach(function(n){e.push(parseInt(n.getAttribute("aria-colindex")))}),r.push({rowIndex:t,cellIndexes:e}))},t=0;t<u.length;t++)f(t);return r},n.prototype.checkBoxSelection=function(){var n,u={status:!1};if("Cell"===this.parent.options.selectionMode){n=this.getSelectedRowCellIndexes();for(var r=void 0,i=[],t=void 0,t=0;t<n.length&&(n[t].cellIndexes.length&&i.push(n[t].rowIndex),!n[t].cellIndexes.length||(r||(r=JSON.stringify(n[t].cellIndexes.sort())),r===JSON.stringify(n[t].cellIndexes.sort())));t++);i.sort(function(n,t){return n-t});t===n.length&&i[i.length-1]-i[0]==i.length-1&&(u={status:!0,rowIndexes:i,colIndexes:n[0].cellIndexes})}return u},n}(),yt=function(){function t(n){this.parent=n;this.wireEvents()}return t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),"scroll",this.scrollHandler,this);sf.base.EventHandler.add(this.parent.element,"mousemove",this.mouseMoveHandler,this);sf.base.EventHandler.add(this.parent.element,"mouseout",this.mouseMoveHandler,this);sf.base.EventHandler.add(this.parent.element,"keydown",this.onKeyPressed,this)},t.prototype.unWireevents=function(){sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.scrollHandler);sf.base.EventHandler.remove(this.parent.element,"mousemove",this.mouseMoveHandler);sf.base.EventHandler.remove(this.parent.element,"mouseout",this.mouseMoveHandler);sf.base.EventHandler.remove(this.parent.element,"keydown",this.onKeyPressed)},t.prototype.open=function(n){this.close();this.ctrlId=sf.base.getUniqueID(this.parent.element.getAttribute("id"));sf.base.isNullOrUndefined(this.toolTipElement)&&(this.toolTipElement=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-lib e-control e-popup-open",styles:'width: "auto", height: "auto", position: "absolute"',attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}));sf.base.attributes(n,{"aria-describedby":this.ctrlId+"_content","data-tooltip-id":this.ctrlId+"_content"});this.renderToolTip();this.setPosition(n)},t.prototype.renderToolTip=function(){var t=sf.base.createElement("div",{className:"e-tip-content"}),n;t.innerHTML=this.content;this.toolTipElement.appendChild(t);n=sf.base.createElement("div",{className:"e-arrow-tip e-tip-bottom",styles:"top: 99.9%"});n.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"}));n.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom",styles:"top: -6px"}));this.toolTipElement.appendChild(n);document.body.appendChild(this.toolTipElement)},t.prototype.setPosition=function(n){var t={top:0,left:0},r=this.toolTipElement.querySelector(".e-arrow-tip"),i=sf.popups.calculatePosition(n,"Center","Top");t.top-=this.toolTipElement.offsetHeight+r.offsetHeight;t.left-=this.toolTipElement.offsetWidth/2;this.toolTipElement.style.top=i.top+t.top+"px";this.toolTipElement.style.left=i.left+t.left+"px"},t.prototype.close=function(){if(this.toolTipElement){var n=this.parent.element.querySelector('[aria-describedby="'+this.ctrlId+'_content"]');sf.base.isNullOrUndefined(n)?sf.base.isNullOrUndefined(this.parent.element.querySelector("form"))||(document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null):(n.removeAttribute("aria-describedby"),n.removeAttribute("data-tooltip-id"),document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null)}},t.prototype.getTooltipStatus=function(n){var r,e=this.parent.getHeaderTable(),o=this.parent.getContentTable(),u=this.createTable(e,"e-gridheader","header"),f=this.createTable(o,"e-gridcontent","content"),t=n.classList.contains("e-headercell")?u:f,i=n.classList.contains("e-headercell")?"th":"tr";return t.querySelector(i).className=n.className,t.querySelector(i).innerHTML=n.innerHTML,r=t.querySelector(i).getBoundingClientRect().width,document.body.removeChild(u),document.body.removeChild(f),r>n.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(t){var i,r;if(this.isEllipsisTooltip()&&(i=n(t.target,"e-ellipsistooltip"),this.prevElement===i&&"mouseout"!==t.type||this.close(),r=t.target.tagName,i&&"mouseout"!==t.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(r)))){if(i.getAttribute("aria-describedby"))return;this.getTooltipStatus(i)&&(this.content=i.getElementsByClassName("e-headertext").length?i.getElementsByClassName("e-headertext")[0].innerText:i.innerText,this.prevElement=i,this.open(i))}this.hoverFrozenRows(t)},t.prototype.hoverFrozenRows=function(t){var u,f,i,r;if(this.parent.options.frozenColumns)if(u=n(t.target,"e-row"),f=[].slice.call(this.parent.element.querySelectorAll(".e-frozenhover")),f.length&&"mouseout"===t.type)for(i=0;i<f.length;i++)f[i].classList.remove("e-frozenhover");else if(u)if(r=[].slice.call(this.parent.element.querySelectorAll('tr[aria-rowindex="'+u.getAttribute("aria-rowindex")+'"]')),r.splice(r.indexOf(u),1),"true"!=u.getAttribute("aria-selected"))for(i=0;i<r.length;i++)r[i].classList.add("e-frozenhover");else for(i=0;i<r.length;i++)r[i].classList.remove("e-frozenhover")},t.prototype.isEllipsisTooltip=function(){var t=this.parent.getColumns(),n;if("EllipsisWithTooltip"===this.parent.options.clipMode)return!0;for(n=0;n<t.length;n++)if("EllipsisWithTooltip"===t[n].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.close()},t.prototype.createTable=function(n,t,i){var r=sf.base.createElement("div"),f,u;r.className=this.parent.element.className;r.style.cssText="display: inline-block;visibility:hidden;position:absolute";f=sf.base.createElement("div");f.className=t;u=sf.base.createElement("table");u.className=n.className;u.style.cssText="table-layout: auto;width: auto";var o="header"===i?"th":"td",e=sf.base.createElement("tr"),s=sf.base.createElement(o);return e.appendChild(s),u.appendChild(e),f.appendChild(u),r.appendChild(f),document.body.appendChild(r),r},t.prototype.onKeyPressed=function(n){"Tab"!==n.key&&"ShiftTab"!==n.key||this.close()},t.prototype.destroy=function(){this.close();this.unWireevents()},t}(),pt=function(){function i(t){var i=this;this.isOverflowBorder=!0;this.helper=function(t){var r=i.parent,e=i.draggable.currentStateTarget,h,c,l,f;t.sender.target.classList.contains("e-input")||"INPUT"==t.sender.target.tagName||"TEXTAREA"==t.sender.target.tagName||t.sender.target.blur();var u=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+r.element.offsetWidth}),o=sf.base.createElement("table",{styles:"width:"+r.element.offsetWidth}),s=sf.base.createElement("tbody");return document.getElementsByClassName("e-griddragarea").length||r.options.rowDropTarget&&!t.sender.target.classList.contains("e-selectionbackground")&&"Single"!==r.options.selectionType||!r.options.rowDropTarget&&!n(t.sender.target,"e-rowdragdrop")||r.options.rowDropTarget&&"Single"===r.options.selectionType&&null===i.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex")?!1:(r.options.rowDropTarget&&"Row"===r.options.selectionMode&&"Single"===r.options.selectionType&&null!==i.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex")&&r.dotNetRef.invokeMethodAsync("SelectRow",parseInt(i.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex"),10)),i.startedRow=sf.base.closest(e,"tr").cloneNode(!0),h=r.getSelectedRows(),v(i.startedRow,".e-indentcell"),v(i.startedRow,".e-detailrowcollapse"),v(i.startedRow,".e-detailrowexpand"),i.removeCell(i.startedRow,"e-gridchkbox"),c=new RegExp("e-active","g"),(i.startedRow.innerHTML=i.startedRow.innerHTML.replace(c,""),s.appendChild(i.startedRow),r.getSelectedRows().length>1&&i.startedRow.hasAttribute("aria-selected"))&&(l=sf.base.createElement("span",{className:"e-dropitemscount",innerHTML:""+h.length}),u.appendChild(l)),f=sf.base.closest(e,"tr").querySelector(".e-icon-rowdragicon"),f&&f.classList.add("e-dragstartrow"),o.appendChild(s),u.appendChild(o),r.element.appendChild(u),u)};this.dragStart=function(n){var u=i.parent,r,f,t;(document.body.classList.add("e-prevent-select"),document.getElementsByClassName("e-griddragarea").length)||(r=i.parent.element.querySelector(".e-dropitemscount"),i.parent.getSelectedRows().length>1&&r&&(r.style.left=i.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),f=parseInt(i.startedRow.getAttribute("aria-rowindex"),10),i.parent.dotNetRef.invokeMethodAsync("RowDragStartEvent",f),n.bindEvents(n.dragElement),i.dragStartData=i.rowData,t=document.getElementById(u.options.rowDropTarget),u.options.rowDropTarget&&t&&t.blazor__instance&&"function"==typeof t.blazor__instance.getModuleName&&"grid"===t.blazor__instance.getModuleName()&&t.blazor__instance.getContent().classList.add("e-allowRowDrop"))};this.drag=function(t){var e=i.parent,r=i.parent.element.querySelector(".e-cloneproperties"),u=i.getElementFromPosition(r,t.event),f,h,o,s;sf.base.classList(r,["e-defaultcur"],["e-notallowedcur","e-movecur"]);i.isOverflowBorder=!0;f=n(u,"e-grid")?sf.base.closest(t.target,"tr"):null;t.target&&((i.stopTimer(),e.element.classList.add("e-rowdrag"),i.dragTarget=f&&n(u,"e-grid").id===r.parentElement.id?f.rowIndex:parseInt(i.startedRow.getAttribute("aria-rowindex"),10),e.options.rowDropTarget)?n(u,"e-gridcontent")?n(r.parentElement,"e-grid").id===n(u,"e-grid").id?sf.base.classList(r,["e-notallowedcur"],["e-defaultcur"]):sf.base.classList(r,["e-defaultcur"],["e-notallowedcur"]):n(u,"e-droppable")?sf.base.classList(r,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(r,["e-notallowedcur"],["e-defaultcur"]):(h=n(u,"e-grid"),h&&h.id===r.parentElement.id?sf.base.classList(r,["e-movecur"],["e-defaultcur"]):sf.base.classList(r,["e-notallowedcur"],["e-movecur"])),e.options.rowDropTarget||e.options.groupCount&&!t.target.classList.contains("e-selectionbackground")||((n(u,"e-grid")&&i.updateScrollPostion(t.event,u),i.isOverflowBorder&&parseInt(i.startedRow.getAttribute("aria-rowindex"),10)!==i.dragTarget)?i.moveDragRows(t,i.startedRow,f):(f&&i.parent.getRowByIndex(i.parent.getRows().length-1).getAttribute("data-uid")===f.getAttribute("data-uid")&&(o=sf.base.createElement("div",{className:"e-lastrow-dragborder"}),s=i.parent.getContent(),o.style.width=i.parent.element.offsetWidth-i.getScrollWidth()+"px",s.querySelectorAll(".e-lastrow-dragborder").length||(s.classList.add("e-grid-relative"),s.appendChild(o),o.style.bottom=i.getScrollWidth()+"px")),i.removeBorder(f))))};this.dragStop=function(n){document.body.classList.remove("e-prevent-select");b(i.parent.element)||i.processDragStop(n)};this.processDragStop=function(t){var r=i.parent,f=i.getElementFromPosition(t.helper,t.event),e=f&&!f.classList.contains("e-dlg-overlay")?f:t.target,u,o;if(r.element.classList.remove("e-rowdrag"),u=document.getElementById(r.options.rowDropTarget),i.parent.options.allowRowDragAndDrop&&i.parent.options.rowDropTarget&&!n(e,"e-grid")){var s=i.getElementXPath(t.target),h=e.id,c=parseInt(i.startedRow.getAttribute("aria-rowindex"),10),l=t.target.getBoundingClientRect();r.dotNetRef.invokeMethodAsync("ReorderRows",c,0,"add",!1,s,h,l,null,!0)}if(r.options.rowDropTarget&&u&&u.blazor__instance&&"function"==typeof u.blazor__instance.getModuleName&&"grid"===u.blazor__instance.getModuleName()&&u.blazor__instance.getContent().classList.remove("e-allowRowDrop"),!n(e,"e-gridcontent"))return i.dragTarget=null,void sf.base.remove(t.helper);if(i.parent.options.allowRowDragAndDrop&&!i.parent.options.rowDropTarget){i.stopTimer();i.parent.getContent().classList.remove("e-grid-relative");i.removeBorder(f);o=r.element.querySelector(".e-dragstartrow");o&&o.classList.remove("e-dragstartrow");var a=i.dragTarget,v=i.getElementXPath(t.target),y=e.id,p=parseInt(i.startedRow.getAttribute("aria-rowindex"),10);setTimeout(function(){r.dotNetRef.invokeMethodAsync("ReorderRows",p,a,"delete",!0,v,y,null,null,!1)},10);i.dragTarget=null}};this.removeCell=function(n,t){return[].slice.call(n.querySelectorAll("td")).filter(function(i){i.classList.contains(t)&&n.deleteCell(i.cellIndex)})};this.drop=function(n){i.columnDrop({target:n.target,droppedElement:n.droppedElement});sf.base.remove(n.droppedElement)};this.parent=t;this.parent.options.allowRowDragAndDrop&&this.initializeDrag()}return i.prototype.stopTimer=function(){window.clearInterval(this.timer)},i.prototype.initializeDrag=function(){var n=this.parent;this.draggable=new sf.base.Draggable(n.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1});this.droppable=new sf.base.Droppable(n.getContent(),{accept:".e-dragclone",drop:this.drop})},i.prototype.updateScrollPostion=function(n){var t=this,h=this.parent.options.frozenColumns,i=r(n).y,u=this.parent.getContent().getBoundingClientRect(),f=this.parent.getRowHeight()-15,e=h?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild,o,s;u.top+f>=i?(o=-this.parent.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){t.setScrollDown(e,o,!0)},200)):u.top+this.parent.getContent().clientHeight-f-20<=i&&(s=this.parent.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){t.setScrollDown(e,s,!0)},200))},i.prototype.setScrollDown=function(n,t){n.scrollTop=n.scrollTop+t},i.prototype.moveDragRows=function(t,i,r){var e=this.parent.element.querySelector(".e-cloneproperties"),u=sf.base.closest(t.target,"tr"),f;n(u,"e-gridcontent")&&n(e.parentElement,"e-grid").id===n(u,"e-grid").id&&(f=u||this.startedRow,this.setBorder(f,t.event,i,r))},i.prototype.setBorder=function(t,i,r,u){var h=this.parent.element,c=this.parent.element.querySelector(".e-cloneproperties"),f,o,e;(this.removeFirstRowBorder(t),this.removeLastRowBorder(t),n(t,"e-gridcontent")&&n(c.parentElement,"e-grid").id===n(t,"e-grid").id)&&(sf.base.removeClass(h.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]),f=[],u&&0===u.rowIndex?(o=sf.base.createElement("div",{className:"e-firstrow-dragborder"}),e=this.parent.getHeaderContent(),e.classList.add("e-grid-relative"),o.style.width=h.offsetWidth-this.getScrollWidth()+"px",e.querySelectorAll(".e-firstrow-dragborder").length||e.appendChild(o)):u&&parseInt(r.getAttribute("aria-rowindex"),10)>u.rowIndex?(t=this.parent.getRowByIndex(u.rowIndex-1),f=[].slice.call(t.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):f=[].slice.call(t.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")),f.length>0&&s(f,!0,"e-dragborder"))},i.prototype.getScrollWidth=function(){var n=this.parent.getContent().firstElementChild;return n.scrollWidth>n.offsetWidth?t():0},i.prototype.removeFirstRowBorder=function(n){this.parent.element.getElementsByClassName("e-firstrow-dragborder").length>0&&n&&0!==n.rowIndex&&this.parent.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},i.prototype.removeLastRowBorder=function(n){var t=n&&this.parent.getRowByIndex(this.parent.getRows().length-1).getAttribute("data-uid")!==n.getAttribute("data-uid");this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&n&&t&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},i.prototype.removeBorder=function(n){(this.removeFirstRowBorder(n),this.removeLastRowBorder(n),n=this.parent.getRows().filter(function(n){return n.querySelector("td.e-dragborder")})[0])&&s([].slice.call(n.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},i.prototype.getElementFromPosition=function(n,t){var i,u=r(t);return n.style.display="none",i=document.elementFromPoint(u.x,u.y),n.style.display="",i},i.prototype.getElementXPath=function(n){if(!n)return null;if(n.id)return"//[@id="+n.id+"]"+(""!=n.className?"."+n.className.toLowerCase():"");if("BODY"===n.tagName)return"/html/body";var t=[].slice.call(n.parentElement.childNodes).filter(function(t){return t.nodeName===n.nodeName}),i=t.indexOf(n);return this.getElementXPath(n.parentNode)+"/"+n.tagName.toLowerCase()+(""!=n.className?"."+n.className.toLowerCase():"")+(t.length>1?"["+(i+1)+"]":"")},i.prototype.getTargetIdx=function(n){return n?parseInt(n.getAttribute("aria-rowindex"),10):0},i.prototype.columnDrop=function(n){var t=this.parent,u,r,i;if("grouping"!==n.droppedElement.getAttribute("action")){if(u=sf.base.closest(n.target,"tr"),r=void 0,"true"!==n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&n.droppedElement.parentElement.id===t.element.id||"true"===n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&n.droppedElement.parentElement.id!==t.element.id)return;if(n.droppedElement.parentElement.id!==t.element.id&&(r=n.droppedElement.parentElement.blazor__instance),r.element.id!==t.element.id&&r.options.rowDropTarget!==t.element.id)return;i=this.getTargetIdx(u);isNaN(i)&&(i=0);t.options.allowPaging&&(i=i+t.options.currentPage*t.options.pageSize-t.options.pageSize);var f=this.getElementXPath(n.target),e=n.target.id,o=n.target.getBoundingClientRect();t.dotNetRef.invokeMethodAsync("ReorderRows",0,i,"add",!1,f,e,o,r.dotNetRef,!1);r.dotNetRef.invokeMethodAsync("ReorderRows",0,i,"delete",!1,f,e,o,null,!1)}},i.prototype.destroy=function(){var n=this.parent.element;n&&(n.querySelector(".e-gridheader")||n.querySelector(".e-gridcontent"))&&this.draggable.destroy()},i}(),wt=function(){function t(n){this.parent=n;this.addEventListener()}return t.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler,this)},t.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler)},t.prototype.mouseDownHandler=function(t){var u,i=t.target,r=this.parent,f=n(i,"e-grid");if(!(f&&f.id!==r.element.id||n(i,"e-headercontent")&&!this.parent.options.frozenRows)){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),n(i,"e-rowcell")&&!t.shiftKey&&!t.ctrlKey){if(r.options.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&(this.isCellDrag=!0,u=!0),r.options.allowRowDragAndDrop&&!r.options.isEdit){if(!this.isRowType()||this.isSingleSel()||sf.base.closest(i,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);u=!0;this.element=sf.base.createElement("div",{className:"e-griddragarea"});r.getContent().appendChild(this.element)}u&&(this.isAutoFillSel=!1,this.enableDrag(t,!0))}this.updateStartEndCells();(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t),document.body.style.cursor="crosshair")}},t.prototype.mouseUpHandler=function(n){var t,i,r;(document.body.classList.remove("e-disableuserselect"),this.element&&sf.base.remove(this.element),sf.base.isNullOrUndefined(this.prevStartDIndex)&&sf.base.isNullOrUndefined(this.prevEndIndex)||this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.prevStartDIndex,this.prevEndIndex,!1),this.isDragged=!1,document.body.style.cursor="default",this.prevStartDIndex=void 0,this.prevEndIndex=void 0,"Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&0===this.parent.options.frozenColumns&&0===this.parent.options.frozenRows)&&(sf.base.isNullOrUndefined(this.endRowIndex)||sf.base.isNullOrUndefined(this.endColIndex)||this.isAutoFillSel||!this.isInitialSelect||(this.parent.dotNetRef.invokeMethodAsync("ClearSelection"),t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0),this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox"),this.assignCells(),this.selectCellByRow(),this.isInitialSelect=!1),this.isAutoFillSel&&(i=this,this.assignCells(),setTimeout(function(){i.selectCellByRow()},10),this.expandAFBorder(n,!0),r=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0),this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",r,"UpdateAutofillBorder"),t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0),this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox")));sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler);this.parent.options.frozenRows&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler);sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler)},t.prototype.enableDrag=function(t,i){var u=this.parent,o,f,e;i&&(o=sf.base.closest(t.target,"tr"),this.startDIndex=parseInt(o.getAttribute("aria-rowindex"),10),this.startDCellIndex=parseInt(n(t.target,"e-rowcell").getAttribute("aria-colindex"),10));document.body.classList.add("e-disableuserselect");f=u.element.getBoundingClientRect();e=r(t);this.x=e.x-f.left;this.y=e.y-f.top;sf.base.EventHandler.add(u.getContent(),"mousemove",this.mouseMoveHandler,this);this.parent.options.frozenRows&&sf.base.EventHandler.add(u.getHeaderContent(),"mousemove",this.mouseMoveHandler,this);sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this)},t.prototype.mouseMoveHandler=function(t){var i,e,y;t.preventDefault();var o,a=this.parent.element.getBoundingClientRect(),u=this.x,f=this.y,v=r(t),s=v.x-a.left,h=v.y-a.top,c=sf.base.closest(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(c||(c=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),u>s&&(o=s,s=u,u=o),f>h&&(o=h,h=f,f=o),this.element.style.left=u+"px",this.element.style.top=f-this.parent.getRowHeight()+"px",this.element.style.width=s-u+"px",this.element.style.height=h-f+"px"),c&&!t.ctrlKey&&!t.shiftKey)if(i=parseInt(c.getAttribute("aria-rowindex"),10),this.isCellDrag||!sf.base.isNullOrUndefined(this.prevStartDIndex)&&this.prevStartDIndex==this.startDIndex&&this.prevEndIndex==i)"Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&this.startCell&&(e=n(t.target,"e-rowcell"),e&&!e.classList.contains("e-editedbatchcell")&&((this.startAFCell=this.startCell,this.endAFCell=e,this.endCell=e,this.isAutoFillSel)?this.expandAFBorder(t,!1):(this.assignCells(),y=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0),this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",y,"UpdateAutofillBorder"),this.isInitialSelect=!0)));else{var l=-1,p=!1,w=this.parent.getSelectedRowIndexes();sf.base.isNullOrUndefined(this.prevStartDIndex)?(l=-1,p=!0):(i>=this.prevStartDIndex&&w.indexOf(i)>=0||this.prevStartDIndex>i&&w.indexOf(this.startDIndex)>=0)&&(l=this.prevEndIndex);this.prevStartDIndex=this.startDIndex;this.prevEndIndex=i;p?this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.startDIndex,i,!0):this.performDragSelection(this.startDIndex,i,l)}},t.prototype.updateAutofillPosition=function(n,t,i){void 0===i&&(i=!1);var r=this.parent.getRowByIndex(t).querySelector('[aria-colindex="'+n+'"]'),f=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),o="",s="",h="";if(f&&!i&&(r=f[f.length-1]),r&&r.offsetParent){var u=r.getBoundingClientRect(),e=r.offsetParent.getBoundingClientRect(),c=this.isLastCell(r)?4:0,l=this.isLastRow(r)?3:0;this.parent.options.enableRtl?s=e.right-u.right+u.width-4-c+"px":o=u.left-e.left+u.width-4-c+"px";h=u.top-e.top+u.height-5-l+"px"}return{Left:o,Right:s,Top:h}},t.prototype.createBorder=function(n,t,i,r,u){void 0===i&&(i=null);void 0===r&&(r=null);void 0===u&&(u=!1);var v,s,w,f=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),b=this.parent.getRowByIndex(n),k=b.querySelector('[aria-colindex="'+t+'"]'),c=[].slice.call(k.parentElement.querySelectorAll('[aria-colindex="'+t+'"]')),d="",g="",y="";null!=i&&null!=r?(v=this.parent.getRowByIndex(i).querySelector('[aria-colindex="'+r+'"]'),s=[].slice.call(v.parentElement.querySelectorAll('[aria-colindex="'+r+'"]'))):(b,v=k,s=c);f&&!u&&(c=[].slice.call(f[0].parentElement.querySelectorAll('[aria-colindex="'+f[0].cellIndex+'"]')),s=[].slice.call(f[f.length-1].parentElement.querySelectorAll('[aria-colindex="'+f[f.length-1].cellIndex+'"]')));this.startCell||(this.startCell=c[0]);this.endCells=s[0];var l=c[0],nt=s[0],e=l.getBoundingClientRect(),o=nt.getBoundingClientRect(),h=l.offsetParent.getBoundingClientRect(),tt=this.isLastRow(nt)?2:0,p=this.parent.options.frozenRows&&this.isFirstRow(l)?1.5:0,a=this.parent.options.frozenColumns&&this.isFirstCell(l)?1:0;return this.parent.options.enableRtl?(d=h.right-e.right-a+"px",y=e.right-o.left+a+1+"px"):(g=e.left-h.left-a+"px",y=o.right-e.left+a+1+"px"),w=e.top-h.top-p+"px",{Right:d,Width:y,BorderWidth:"2px",Left:g,Height:o.top-e.top>0?o.top-h.top+o.height+1-(e.top-h.top)-tt+p+"px":o.height+p-tt+1+"px",Top:w}},t.prototype.expandAFBorder=function(t,i){for(var k,l,y,w,p=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),e=parseInt(n(this.startCell,"e-row").getAttribute("aria-rowindex"),10),f=parseInt(this.startCell.getAttribute("aria-colindex"),10),s=parseInt(n(this.endCell,"e-row").getAttribute("aria-rowindex"),10),h=parseInt(this.endCell.getAttribute("aria-colindex"),10),v=parseInt(n(p[p.length-1],"e-row").getAttribute("aria-rowindex"),10)-parseInt(n(p[0],"e-row").getAttribute("aria-rowindex"),10),d=parseInt(n(p[0],"e-row").getAttribute("aria-rowindex"),10),b=this.parent.getRowByIndex(d),o=0,r=0,g=b.cells.length;r<g;r++)b.cells[r].classList.contains("e-cellselectionbackground")&&o++;switch(o=(o-=1)>=0?o:0,!0){case!i&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!n(t.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(e,f);this.endAFCell=this.parent.getCellFromIndex(e+v,f+o);this.drawAFBorders();break;case f+o<h&&h-f-o+1>s-e-v&&h-f-o+1>e-s:if(this.endAFCell=this.parent.getCellFromIndex(e+v,h),s=parseInt(n(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),h=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),i)for(k=parseInt(this.endCells.getAttribute("aria-colindex"),10),r=e;r<=s;r++)for(var a=this.getAutoFillCells(r,f),u=0,c=k+1;c<=h;c++)u>o&&(u=0),this.updateValue(r,c,a[u]),u++;else this.drawAFBorders();break;case f>h&&f-h+1>s-e-v&&f-h+1>e-s:if(this.startAFCell=this.parent.getCellFromIndex(e,h),this.endAFCell=this.endCells,i)for(r=e;r<=e+v;r++)for((a=this.getAutoFillCells(r,f)).reverse(),u=0,c=this.startCellIndex-1;c>=h;c--)u>o&&(u=0),this.updateValue(r,c,a[u]),u++;else this.drawAFBorders();break;case e>s:if(this.startAFCell=this.parent.getCellFromIndex(s,f),this.endAFCell=this.endCells,i)for(l=y=parseInt(this.endCells.parentElement.getAttribute("aria-rowindex"),10),r=e-1;r>=s;r--)for(l===this.startIndex-1&&(l=y),a=this.getAutoFillCells(l,f),u=0,l--,c=this.startCellIndex;c<=this.startCellIndex+o;c++)this.updateValue(r,c,a[u]),u++;else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(s,f+o),i)for(y=parseInt(this.endCells.parentElement.getAttribute("aria-rowindex"),10),l=this.startIndex,r=y+1;r<=s;r++)for(l===y+1&&(l=this.startIndex),a=this.getAutoFillCells(l,f),l++,u=0,w=this.startCellIndex;w<=this.startCellIndex+o;w++)this.updateValue(r,w,a[u]),u++;else this.drawAFBorders()}},t.prototype.drawAFBorders=function(){var nt,tt;if(this.startCell){var i=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),it=t.top-i.top>0?1:0,c=t.top-i.top>=0&&(n(this.startAFCell,"e-movablecontent")||n(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,e=(n(this.startAFCell,"e-movablecontent")||n(this.startAFCell,"e-movableheader"))&&this.isFirstCell(this.startAFCell)?1:0,d=this.isLastRow(this.endAFCell)&&(n(this.endAFCell,"e-movablecontent")||n(this.endAFCell,"e-frozencontent"))?2:1,l=this.startAFCell.offsetParent.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect(),rt=this.startAFCell.offsetParent.parentElement.scrollTop,o=this.startAFCell.offsetParent.parentElement.scrollLeft,u=rt-this.startAFCell.offsetTop,f=o-this.startAFCell.offsetLeft;u=u>0?Math.floor(u)-1:0;f=f>0?f:0;var a,v,y,g=i.left-r.left,p="",w="",b="",k="",s="",h="";this.parent.options.enableRtl?(nt=n(this.startAFCell,"e-movablecontent")||n(this.startAFCell,"e-movableheader")?i.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-r.left:0,w=r.right-t.right-2+t.width+"px",k=r.right-i.right-e+nt-1+"px",s=t.left-r.left-.5+"px",h=parseInt(w,10)-parseInt(k,10)-e+1+"px"):(p=g-e+f-1+o+"px",b=t.left-r.left-2+t.width+o+"px",s=g+f-.5+o+"px",h=parseInt(b,10)-parseInt(p,10)-e+1+"px");y=v=i.top-l.top-c+"px";tt={BorderLeftAutofillLeft:p,BorderLeftAutofillTop:v,BorderLeftAutofillHeight:a=t.top-i.top>0?t.top-l.top+t.height+1-(i.top-l.top)+c-d-u+"px":t.height+c-d-u+"px",BorderLeftAutofillRight:w,BorderRightAutofillLeft:b,BorderRightAutofillHeight:parseInt(a,10)+"px",BorderRightAutofillRight:k,BorderRightAutofillTop:y,BorderTopAutofillLeft:s,BorderTopAutofillTop:y,BorderTopAutofillWidth:h,BorderBottomAutofillLeft:s,BorderBottomAutofillTop:parseFloat(v)+parseFloat(a)-it-1+"px",BorderBottomAutofillWidth:h};this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",tt,"UpdateAutofillPosition")}},t.prototype.updateValue=function(t,i,r){var u=this.parent.getColumnByIndex(i),f=parseInt(n(r,"e-row").getAttribute("aria-rowindex"),10),e=this.parent.getColumnByIndex(r.cellIndex),o=r.innerText;this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillCell",t,u.field,e.field,f,o)},t.prototype.getAutoFillCells=function(n){return[].slice.call(this.parent.getDataRows()[n].querySelectorAll(".e-cellselectionbackground"))},t.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=t[0];this.endCell=t[t.length-1];this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(n(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},t.prototype.assignCells=function(){this.startRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("aria-rowindex"),10);this.endRowIndex=parseInt(this.endAFCell.parentElement.getAttribute("aria-rowindex"),10);this.startColIndex=parseInt(this.startAFCell.getAttribute("aria-colindex"),10);this.endColIndex=parseInt(this.endAFCell.getAttribute("aria-colindex"),10);this.startRowIndex>this.endRowIndex&&(this.startRowIndex=this.endRowIndex,this.endRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("aria-rowindex"),10));this.endColIndex<this.startColIndex&&(this.startColIndex=this.endColIndex,this.endColIndex=parseInt(this.startAFCell.getAttribute("aria-colindex"),10))},t.prototype.selectCellByRow=function(){for(var t,n=this.startRowIndex;n<=this.endRowIndex;n++)for(t=this.startColIndex;t<=this.endColIndex;t++)this.parent.dotNetRef.invokeMethodAsync("SelectCellByRow",n,t)},t.prototype.isLastCell=function(n){var t=[].slice.call(n.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]==n},t.prototype.isLastRow=function(n){var t=[].slice.call(sf.base.closest(n,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return t[t.length-1]==n.parentElement},t.prototype.isFirstRow=function(n){var t=[].slice.call(sf.base.closest(n,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return n.parentElement===t[0]},t.prototype.isFirstCell=function(n){return[].slice.call(n.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===n},t.prototype.performDragSelection=function(n,t,i){var r=n,u=t;n>t&&(r=t,u=n);-1!=i&&this.clearSelectionExceptDragIndexes(r,u);this.selectRangeOfRows(r,u)},t.prototype.selectRangeOfRows=function(n,t){for(var u,r=this.parent.getRows(),i=n;i<=t;i++)sf.base.isNullOrUndefined(r[i])||(r[i].setAttribute("aria-selected","true"),u=[].slice.call(r[i].querySelectorAll(".e-rowcell")),s.apply(void 0,[u,!0].concat(["e-aria-selected","e-active"])))},t.prototype.clearSelectionByRow=function(n){var t=[].slice.call(n.querySelectorAll(".e-rowcell"));n.removeAttribute("aria-selected");s.apply(void 0,[t,!1].concat(["e-aria-selected","e-active"]))},t.prototype.clearSelectionExceptDragIndexes=function(n,t){for(var r=this.parent.getRows(),i=0;i<r.length;i++)(i<n||i>t)&&this.clearSelectionByRow(r[i])},t.prototype.isRowType=function(){return"Row"===this.parent.options.selectionMode||"Both"===this.parent.options.selectionMode},t.prototype.isSingleSel=function(){return"Single"===this.parent.options.selectionType},t}(),bt=function(){function t(n,t){var i=this;this.fromWheel=!1;this.touchMove=!1;this.options={};this.sentinelInfo={up:{check:function(n,t){var r=n.top-i.containerRect.top;return t.entered=r>=0,r+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(n,t){i.options.container.clientHeight;var r=n.bottom;return t.entered=n.bottom<=i.containerRect.bottom,r-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(n,t){var r=n.right;return t.entered=r<i.containerRect.right,r-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(n,t){var r=n.left;return t.entered=r>0,r+i.containerRect.width>=i.containerRect.left},axis:"X"}};this.element=n;this.options=t}return t.prototype.observe=function(t,i){var r=this;this.containerRect=this.options.container.getBoundingClientRect();sf.base.EventHandler.add(this.options.container,"wheel",function(){return r.fromWheel=!0},this);sf.base.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(t,i),this);sf.base.isNullOrUndefined(n(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.add(n(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.virtualScrollHandler(t,i),this)},t.prototype.check=function(n){var t=this.sentinelInfo[n];return t.check(this.element.getBoundingClientRect(),t)},t.prototype.virtualScrollHandler=function(n,t){var i=this,f="chrome"===sf.base.Browser.info.name?200:100,u=0,r=0,e=sf.base.debounce(n,f),o=sf.base.debounce(n,50);return function(n){var c=n.target.scrollTop,s=n.target.scrollLeft,f=u<c?"down":"up",p=n.target.classList.contains("e-movablescrollbar"),l=!0,h,v,a,y;f=r===s?f:r<s?"right":"left";p&&(f=r<s?"right":"left");"down"==f?l=c-u<30:"up"==f?l=u-c<30:"right"==f?l=s-r<20:"left"==f&&(l=r-s<20);u=c;r=s;h=i.sentinelInfo[f];-1!==i.options.axes.indexOf(h.axis)&&(v=i.check(f),a=i.options.container.querySelectorAll(".e-masked-row").length&&"X"!=h.axis,((h.entered||(sf.base.isNullOrUndefined(i.blazorActiveKey)||""==i.blazorActiveKey)&&!i.fromWheel&&a)&&t(i.element,h,l,f,{top:c,left:s},i.fromWheel,v),v||a)&&(y=e,"X"===h.axis&&(y=o),y({direction:f,sentinel:h,offset:{top:c,left:s},focusElement:document.activeElement})),a||(i.fromWheel=!1))}},t.prototype.setPageHeight=function(n){this.options.pageHeight=n},t}(),kt=function(){function n(n){var t=this;this.prevHeight=0;this.preStartIndex=0;this.preventEvent=!1;this.actions=["filtering","searching","grouping","ungrouping","Filtering","Searching","Grouping","Ungrouping","UnGrouping"];this.offsets={};this.tmpOffsets={};this.offsetKeys=[];this.currentInfo={};this.blazorActiveKey="";this.nextRowToNavigate=0;this.startIndex=0;this.bindScrollEvent=function(){var n,i;t.observer.observe(function(n){return t.scrollListener(n)},t.onEntered());n=t.parent;n.options.enablePersistence&&n.scrollPosition&&(t.content.scrollTop=n.scrollPosition.top,i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:n.scrollPosition,focusElement:n.element},t.scrollListener(i),n.options.enableColumnVirtualization&&(t.content.scrollLeft=n.scrollPosition.left))};this.parent=n;this.contentPanel=this.parent.element.querySelector(".e-gridcontent");this.vHelper=new d(n);this.virtualEle=new k(n);this.addEventListener()}return n.prototype.getPanel=function(){return this.contentPanel},n.prototype.getTable=function(){return this.contentPanel.querySelector(".e-table")},n.prototype.renderTable=function(){this.header=this.parent.virtualHeaderModule;this.virtualEle.table=this.getTable();this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content");this.virtualEle.renderWrapper(Number(this.parent.options.height));this.virtualEle.renderPlaceHolder();var n={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:!0,axes:this.parent.options.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new bt(this.virtualEle.wrapper,n);this.parent.dotNetRef.invokeMethodAsync("SetRowHeight",this.parent.getRowHeight())},n.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},n.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},n.prototype.ensurePageSize=function(){var r=this.parent.getRowHeight(),n=2*~~((this.parent.options.height.toString().indexOf("%")<0?this.parent.options.height:this.parent.element.getBoundingClientRect().height)/r),t=this.parent.options.pageSize,i=t<n?n:t;this.parent.dotNetRef.invokeMethodAsync("SetPageSizeAndCIndex",{pageSize:i,startColumnIndex:this.startColIndex,endColumnIndex:this.endColIndex,VTableWidth:this.getColumnOffset(this.endColIndex)-this.getColumnOffset(this.startColIndex-1)+""});this.parent.options.pageSize=i;this.observer.options.pageHeight=2*this.getBlockHeight()},n.prototype.scrollListener=function(n){var i=this,r,u;if(this.parent.options.enablePersistence&&(this.parent.scrollPosition=n.offset),this.preventEvent)this.preventEvent=!1;else{var f=n.sentinel,e=this.preStartIndex,o=this.parent.getColumnIndexesInView(),t=this.currentInfo=this.getInfoFromView(n.direction,f,n.offset);this.parent.options.enableColumnVirtualization&&JSON.stringify(o)!==JSON.stringify(t.columnIndexes)?(r=this.getColumnOffset(this.startColIndex-1),u=this.getColumnOffset(this.endColIndex)-r+"",setTimeout(function(){i.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",startColumnIndex:t.columnIndexes[0],endColumnIndex:t.columnIndexes[t.columnIndexes.length-1],axis:"X",VTablewidth:u,translateX:i.getColumnOffset(t.columnIndexes[0]-1),translateY:i.parent.options.enableVirtualMaskRow?i.parent.options.frozenColumns?i.movableTranslateY:i.translateMaskY+i.movableTranslateY:0})},0),this.parent.options.frozenColumns||this.setColVTableWidthAndTranslate()):(this.virtualEle.movableAdjustTable(this.getColumnOffset(t.columnIndexes[0]-1),0),this.header.virtualEle.movableAdjustTable(this.getColumnOffset(t.columnIndexes[0]-1),0));this.parent.setColumnIndexesInView(this.parent.options.enableColumnVirtualization?t.columnIndexes:[]);this.nextRowToNavigate=""!=this.blazorActiveKey?this.nextRowToNavigate:0;this.preStartIndex!==e&&(this.parent.options.currentPage=t.currentPage,setTimeout(function(){i.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",nextRowToNavigate:i.nextRowToNavigate,virtualStartIndex:t.startIndex,virtualEndIndex:t.endIndex,axis:"Y",RHeight:i.parent.getRowHeight()})},0));this.prevInfo=t;this.blazorActiveKey=""}},n.prototype.setColVTableWidthAndTranslate=function(n){if(this.parent.options.enableColumnVirtualization&&this.prevInfo&&JSON.stringify(this.currentInfo.columnIndexes)!==JSON.stringify(this.prevInfo.columnIndexes)||n&&n.refresh){var i=this.getColumnOffset(this.startColIndex-1),t=this.getColumnOffset(this.endColIndex)-i+"";0!=this.parent.options.frozenColumns?(this.virtualEle.movableContentWrapper.style.width=t,this.header.virtualEle.movableHeaderWrapper.style.width=t,this.header.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY),this.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY)):(this.header.virtualEle.setWrapperWidth(t),this.virtualEle.setWrapperWidth(t),this.header.virtualEle.adjustTable(i,0),this.parent.getContentTable().parentElement.style.width=t+"px")}},n.prototype.refreshOnDataChange=function(){this.getPanel().firstElementChild.scrollTop=0;this.getPanel().firstElementChild.scrollLeft=0;this.parent.options.enableColumnVirtualization&&this.header.virtualEle.adjustTable(0,0);this.virtualEle.adjustTable(0,0);this.refreshOffsets();this.refreshVirtualElement()},n.prototype.keyDownHandler=function(n){this.blazorActiveKey="ArrowDown"===n.key||"ArrowUp"===n.key?n.key:"";sf.base.isNullOrUndefined(this.observer)||(this.observer.blazorActiveKey=this.blazorActiveKey)},n.prototype.focusCell=function(n,i){n.focus({preventScroll:!0});var u=this.parent.getRowHeight(),r=this.parent.getContent();"MoveDownCell"==i&&n.getBoundingClientRect().bottom>r.getBoundingClientRect().top+r.getBoundingClientRect().height-t()?r.scrollTop=r.scrollTop+u:"MoveUpCell"==i&&n.getBoundingClientRect().bottom<r.getBoundingClientRect().top+u&&(this.isScrollFromFocus=!0,r.scrollTop=r.scrollTop-u)},n.prototype.getInfoFromView=function(n,t,i){var r={direction:n,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},y=this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height,v,c,p,w,s,e;r.page=this.getPageFromTop(i.top+y,r);r.blockIndexes=this.vHelper.getBlockIndexes(r.page);r.columnIndexes="X"===t.axis?this.vHelper.getColumnIndexes():this.parent.getColumnIndexesInView();var l=this.parent.getRowHeight(),u=i.top/l,o=y/l,h=u+o,a=this.parent.options.pageSize/4,f=this.parent.options.groupCount?this.getVisibleGroupedRowCount():this.count;return"down"!==r.direction||this.isScrollFromFocus?"up"===r.direction&&(r.startIndex&&r.endIndex||this.parent.options.enableVirtualMaskRow)&&(v=Math.round((r.startIndex*l+a*l)/l),this.parent.options.enableVirtualMaskRow&&((o=Math.ceil(o),u<v||Math.ceil(u)>this.preStartIndex)?(c=Math.ceil(u)>0?Math.ceil(u):0,p=f-this.parent.options.pageSize-this.parent.options.pageSize/2,r.startIndex=u<f&&p<u?c>0?c-this.parent.options.pageSize/2:0:c>0?c+this.parent.options.pageSize>f?f-this.parent.options.pageSize:c:0,r.startIndex=r.startIndex>0?r.startIndex-1:r.startIndex,e=r.startIndex+this.parent.options.pageSize,r.endIndex=r.startIndex<0?this.parent.options.pageSize:e<f?e:f,r.currentPage=Math.ceil(r.startIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.ceil(u+1),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=r.startIndex,this.preEndIndex=r.endIndex):(this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex)),u<v&&!this.parent.options.enableVirtualMaskRow&&(w=a>o?a:o+o/4,e=Math.round(u+w),r.endIndex=e<f?e:f,s=r.endIndex-this.parent.options.pageSize,r.startIndex=s>0?s:0,r.endIndex=s<0?this.parent.options.pageSize:r.endIndex,r.currentPage=Math.ceil(r.startIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.ceil(u+1))):(s=Math.round(h)-Math.round(a),this.parent.options.enableVirtualMaskRow&&((o=Math.ceil(o)-1,Math.ceil(u)-this.preStartIndex>=o)?(r.startIndex=Math.ceil(u)>=0?Math.ceil(u):0,e=r.startIndex+this.parent.options.pageSize,r.endIndex=e<f?e:f,r.startIndex=e>=f?r.endIndex-this.parent.options.pageSize:r.startIndex,r.currentPage=Math.ceil(r.endIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.floor(h-1),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=r.startIndex,this.preEndIndex=r.endIndex):(this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex)),(!this.parent.options.enableVirtualMaskRow&&sf.base.isNullOrUndefined(r.startIndex)||h>r.startIndex+Math.round(this.parent.options.pageSize/2+a)&&r.endIndex!==f)&&(r.startIndex=s>=0?Math.round(s):0,r.startIndex=r.startIndex>u?Math.floor(u):r.startIndex,e=r.startIndex+this.parent.options.pageSize,r.startIndex=e<h?Math.ceil(h)-this.parent.options.pageSize:r.startIndex,r.endIndex=e<f?e:f,r.startIndex=e>=f?r.endIndex-this.parent.options.pageSize>0?r.endIndex-this.parent.options.pageSize:0:r.startIndex,r.currentPage=Math.ceil(r.endIndex/this.parent.options.pageSize),this.nextRowToNavigate=Math.floor(h-1))),this.parent.options.enableVirtualMaskRow||(this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=r.startIndex,this.preEndIndex=r.endIndex),r},n.prototype.onDataReady=function(){var i=this,t=this,n;(this.bindScrollEvent(),this.count=this.parent.options.totalItemCount,this.maxPage=Math.ceil(this.count/this.parent.options.pageSize),["Refresh","Filtering","Searching","Grouping","Ungrouping","Reorder","refresh","filtering","searching","grouping","ungrouping","reorder","GroupExpandCollapse",null].some(function(n){return i.parent.options.requestType===n})&&this.refreshOffsets(),this.setVirtualHeight(),this.resetScrollPosition(this.parent.options.requestType),this.setColVTableWidthAndTranslate(),this.parent.options.enableVirtualMaskRow)&&(n=Math.min(Math.ceil(this.virtualEle.content.scrollTop),this.offsets[this.maxBlock]),0==(n="NaN"==n.toString()?0:n)?n-=this.parent.options.pageSize*(this.parent.options.rowHeight?this.parent.options.rowHeight:36):n=n-this.parent.options.pageSize*(this.parent.options.rowHeight?this.parent.options.rowHeight:36)-10,setTimeout(function(){t.translateMaskY=n;t.translateMaskX=sf.base.isNullOrUndefined(t.translateMaskX)?0:t.translateMaskX;t.virtualEle.wrapper.style.transform=0==t.parent.options.frozenColumns?"translate("+t.translateMaskX+"px,"+n+"px)":"translate(0px,"+n+"px)"},0));this.prevInfo=this.prevInfo?this.prevInfo:this.vHelper.getData()},n.prototype.setVirtualHeight=function(){var n=this.parent.options.enableColumnVirtualization?this.getColumnOffset(this.parent.options.columns.length+this.parent.options.groupCount-1)+"px":"100%",t=this.parent.options.enableColumnVirtualization?this.parent.options.enableVirtualMaskRow?4:2:0,i=this.parent.options.groupCount?this.parent.options.visibleGroupedRowsCount*this.parent.getRowHeight():this.offsets[this.getTotalBlocks()-t];this.virtualEle.setVirtualHeight(i,n);this.parent.options.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,n)},n.prototype.getPageFromTop=function(n,t){var i=this,r=u(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),f=0;return this.offsets[r],this.prevHeight,this.offsetKeys.some(function(u){var e=Number(u),o=n<=i.offsets[u]||e===r&&n>i.offsets[u];return o&&(t.block=e%2==0?1:0,f=Math.max(1,Math.min(i.vHelper.getPage(e),i.maxPage))),o}),f},n.prototype.getTranslateY=function(n,t,i,r){var f,o;void 0===i&&((i={page:this.getPageFromTop(n+t,{})}).blockIndexes=this.vHelper.getBlockIndexes(i.page));var e=(i.blockIndexes[0]||1)-1,s=this.getOffset(e),h=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);return r&&(i=this.prevInfo),f=s>n?this.getOffset(e-1):h<n+t?this.getOffset(e+1):s,o=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]],f+o>this.offsets[u(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&0==this.parent.options.groupCount&&(f-=f+o-this.offsets[this.getTotalBlocks()]),f},n.prototype.getOffset=function(n){return Math.min(0|this.offsets[n],0|this.offsets[this.maxBlock])},n.prototype.onEntered=function(){var n=this;return function(t,i,r,u,f,e,o){var l;sf.base.Browser.isIE&&!e&&o&&n.preventEvent;var h="X"===i.axis,a=n.prevInfo.offsets?n.prevInfo.offsets.top:null,v=n.content.getBoundingClientRect().height,c=n.getColumnOffset(h?n.vHelper.getColumnIndexes()[0]-1:n.prevInfo.columnIndexes[0]-1),s=n.getTranslateY(f.top,v,h&&a===f.top?n.prevInfo:void 0,!0);(n.currentInfo&&n.currentInfo.startIndex&&h&&(s=n.currentInfo.startIndex*n.parent.getRowHeight()),n.movableTranslateX=n.vHelper.cOffsets[n.startColIndex-1]?n.vHelper.cOffsets[n.startColIndex-1]:c,n.movableTranslateY=n.parent.options.pageSize*n.parent.options.rowHeight,n.parent.options.enableVirtualMaskRow)?n.offsets[n.maxBlock]>s&&("right"==u||"left"==u?(n.header.virtualEle.movableAdjustTable(n.movableTranslateX,0),n.virtualEle.movableAdjustTable(n.movableTranslateX,n.movableTranslateY),n.parent.options.frozenColumns||n.virtualEle.adjustTable(n.movableTranslateX,n.translateMaskY+n.movableTranslateY)):(l=n.parent.options.enableColumnVirtualization?n.parent.options.enableVirtualMaskRow?4:2:0,n.virtualEle.adjustTable(c,Math.min(r?n.translateMaskY:"up"!==u?s-2*n.movableTranslateY:s,n.offsets[n.maxBlock-l])))):(n.parent.options.frozenColumns&&(n.virtualEle.movableAdjustTable(n.movableTranslateX,Math.min(s,n.offsets[n.maxBlock])),n.header.virtualEle.movableAdjustTable(n.movableTranslateX,Math.min(s,n.offsets[n.maxBlock]))),n.virtualEle.adjustTable(n.movableTranslateX,Math.min(s,n.offsets[n.maxBlock])));h&&!n.parent.options.frozenColumns&&n.setColVTableWidthAndTranslate({refresh:!0})}},n.prototype.getBlockSize=function(){return this.parent.options.pageSize>>1},n.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},n.prototype.getGroupedTotalBlocks=function(){var n=this.getVisibleGroupedRowCount();return Math.floor(n/this.getBlockSize()<1?1:n/this.getBlockSize())},n.prototype.getVisibleGroupedRowCount=function(){return Number(this.virtualEle.placeholder.style.height.substring(0,this.virtualEle.placeholder.style.height.indexOf("p")))/this.parent.getRowHeight()},n.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},n.prototype.getColumnOffset=function(n){return 0|this.vHelper.cOffsets[n]},n.prototype.resetScrollPosition=function(n){var t=sf.base.isNullOrUndefined(n)?n:n.toLowerCase(),i;(this.actions.some(function(t){return t===n})||!sf.base.isNullOrUndefined(this.parent.options.initGroupingField)&&this.parent.options.initGroupingField.length>0&&!sf.base.isNullOrUndefined(t)&&("sorting"==t||"save"==t||"delete"==t))&&(i=this.content,this.preventEvent=0!==i.scrollTop,i.scrollTop=0)},n.prototype.refreshOffsets=function(){this.parent;var o=0,r=this.getBlockSize(),i=u(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[i];this.maxBlock=i%2==0?i-2:i-1;this.offsets={};for(var s=[],f={},t=Array.apply(null,Array(i)).map(function(){return++o}),n=0;n<t.length;n++){var h=(f[t[n]]||[]).length,e=u(this.parent)?s.length%r:this.count%r,c=!u(this.parent)&&t[n]in f?h*this.parent.getRowHeight():e&&t[n]===i?e*this.parent.getRowHeight():this.getBlockHeight();this.offsets[t[n]]=(0|this.offsets[t[n]-1])+c;this.tmpOffsets[t[n]]=0|this.offsets[t[n]-1]}this.offsetKeys=Object.keys(this.offsets);this.parent.options.enableColumnVirtualization&&this.vHelper.refreshColOffsets()},n.prototype.updateTransform=function(n){var t=this;setTimeout(function(){t.translateMaskX=n;t.virtualEle.adjustTable(n,t.translateMaskY);t.virtualEle.movableAdjustTable(t.translateMaskX,0);t.header.virtualEle.movableAdjustTable(t.translateMaskX,0)},500)},n.prototype.refreshColumnIndexes=function(){this.vHelper.refreshColOffsets();var n=this.vHelper.getColumnIndexes();this.parent.setColumnIndexesInView(n);this.parent.dotNetRef.invokeMethodAsync("SetColumnIndexes",n[0],n[n.length-1])},n.prototype.refreshVirtualElement=function(){this.vHelper.refreshColOffsets();this.setVirtualHeight()},n}(),dt=function(){function n(n){this.parent=n;this.vHelper=new d(this.parent);this.virtualEle=new k(this.parent);this.headerPanel=this.parent.element.querySelector(".e-gridheader")}return n.prototype.getPanel=function(){return this.headerPanel},n.prototype.getTable=function(){return this.headerPanel.querySelector(".e-table")},n.prototype.renderTable=function(){this.vHelper.refreshColOffsets();this.parent.setColumnIndexesInView(this.vHelper.getColumnIndexes(this.getPanel().querySelector(".e-headercontent")));this.virtualEle.table=this.getTable();this.virtualEle.content=this.getPanel().querySelector(".e-headercontent");this.virtualEle.content.style.position="relative";this.virtualEle.renderWrapper();this.virtualEle.renderPlaceHolder()},n}(),k=function(){function n(n){this.parent=n}return n.prototype.renderWrapper=function(n){this.wrapper=this.content.querySelector(".e-virtualtable");this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(n));this.content.querySelector(".e-movableheader")&&(this.movableHeaderWrapper=this.content.querySelector(".e-movableheader").querySelector(".e-virtualtable"));null!=this.content.querySelector(".e-movablecontent")&&(this.movableContentWrapper=this.content.querySelector(".e-movablecontent").querySelector(".e-virtualtable"))},n.prototype.renderPlaceHolder=function(){this.placeholder=this.content.lastElementChild},n.prototype.movableAdjustTable=function(n,t){this.movableHeaderWrapper&&(this.movableHeaderWrapper.style.transform="translate("+n+"px, 0px)");this.parent.options.enableVirtualMaskRow&&this.movableContentWrapper?this.movableContentWrapper.style.transform="translate("+n+"px, "+t+"px)":this.movableContentWrapper&&(this.movableContentWrapper.style.transform="translate("+n+"px, 0px)")},n.prototype.adjustTable=function(n,t){this.wrapper.style.transform=0!=this.parent.options.frozenColumns?"translate(0px, "+t+"px)":"translate("+n+"px, "+t+"px)"},n.prototype.setWrapperWidth=function(n,t){this.wrapper.style.width=n?n+"px":t?"100%":""},n.prototype.setVirtualHeight=function(n,t){this.placeholder.style.height=n+"px";this.placeholder.style.width=this.parent.options.frozenColumns?"100%":t},n}(),d=function(){function n(n){this.cOffsets={};this.data={};this.groups={};this.parent=n}return n.prototype.getBlockIndexes=function(n){return[n+(n-1),2*n]},n.prototype.getPage=function(n){return n%2==0?n/2:(n+1)/2},n.prototype.getData=function(){return{page:this.parent.options.currentPage,blockIndexes:this.getBlockIndexes(this.parent.options.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},n.prototype.getColumnIndexes=function(n){var o=this,r,f;void 0===n&&(n=this.parent.getHeaderContent());sf.base.isNullOrUndefined(n.querySelector(".e-movableheader"))||(n=n.querySelector(".e-movableheader"));var t=[],i=0|n.scrollLeft,e=Object.keys(this.cOffsets),u=this.parent.options.needClientAction?n.getBoundingClientRect().width:Number(this.parent.options.width);return i=Math.min(this.cOffsets[e.length-1]-u,i),r=sf.base.Browser.isDevice?2*u:u/2,f=i+u+(0===i?r:0),e.some(function(n){var e=Number(n),u=o.cOffsets[n];return i-r<=u&&f+r>=u&&t.push(e),f+r<u}),this.parent.virtualContentModule.startColIndex=t[0],this.parent.virtualContentModule.endColIndex=t[t.length-1],t},n.prototype.refreshColOffsets=function(){var r=0;this.cOffsets={};for(var u=this.parent.options.groupCount,i=this.parent.options.columns,f=i.length,t=Array.apply(null,Array(f)).map(function(){return r++}),n=0;n<t.length;n++)t[n]=t[n]+u,this.cOffsets[t[n]]=(0|this.cOffsets[t[n]-1])+(i[n].visible?parseInt(i[n].width,10):0)},n}(),gt=function(){function t(n,t,r){var u=this,f;(this.columnModel=[],this.frozenColumnModel=[],this.frozenReorderColumnModel=[],this.inViewIndexes=[],this.isRendered=!1,this.isGridFirstRender=!1,this.tapEvent=function(n){if(this.resizeModule.getUserAgent())if(i.timer){clearTimeout(i.timer);i.timer=null;var t=document.createEvent("MouseEvents");t.initEvent("dblclick",!0,!0);n.target.dispatchEvent(t)}else i.timer=setTimeout(function(){i.timer=null},300)},this.element=n,sf.base.isNullOrUndefined(n))||((sf.base.isNullOrUndefined(n)||(this.element.blazor__instance=this),this.dotNetRef=r,this.options=t,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-gridcontent .e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.offsetWidth<=0)?f=setInterval(function(){u.element.offsetWidth>0&&(u.initModules(),clearInterval(f))},500):this.initModules(),this.addScrollEvents(!0))}return t.prototype.initModules=function(){this.scrollModule=new g(this);this.freezeModule=new nt(this);this.headerDragDrop=new tt(this);this.contentDragDrop=new it(this);this.reorderModule=new rt(this);this.groupModule=new st(this);this.resizeModule=new ot(this);this.editModule=new at(this);this.columnChooserModule=new ht(this);this.clipboardModule=new vt(this);this.columnMenuModule=new ct(this);this.filterModule=new lt(this);this.virtualContentModule=new kt(this);this.virtualHeaderModule=new dt(this);this.toolTipModule=new yt(this);this.rowDragAndDropModule=new pt(this);this.selectionModule=new wt(this);this.widthService=new f(this);this.isRendered=this.options.isPrerendered;this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:ni,eventName:"keydown"});this.options.enableColumnVirtualization&&this.virtualHeaderModule.renderTable();this.options.enableVirtualization&&this.virtualContentModule.renderTable();this.options.allowResizing&&this.resizeModule.render();this.options.needClientAction?this.clientActions():this.contentReady();this.lastRowBorderCheck();this.wireEvents()},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getFooterContent=function(){return this.footer},t.prototype.getColumns=function(){return this.columnModel=[],this.updateColumnModel(this.options.columns),this.columnModel},t.prototype.addScrollEvents=function(n){if(this.options.showColumnMenu){for(var i=sf.popups.getScrollableParent(this.element),t=0;t<i.length;t++)_instanceof(i[t],HTMLElement)&&(n?sf.base.EventHandler.add(i[t],"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(i[t],"scroll",this.scrollHandler));n?sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler)}},t.prototype.scrollHandler=function(){if(!sf.base.isNullOrUndefined(this.element)&&!sf.base.isNullOrUndefined(this.element.blazor__instance))return this.element.blazor__instance.columnMenuModule.setPosition()},t.prototype.updateColumnLevelFrozen=function(){var f=this.columnModel,i=[],r=[],u=[],t,e,n;if(0!=this.options.frozenRightCount||0!=this.options.frozenLeftCount){for(t=0,e=f.length;t<e;t++)n=f[t],"Left"===n.freeze&&n.isFrozen?i.push(n):"Right"===n.freeze&&n.isFrozen?r.push(n):u.push(n);this.frozenColumnModel=i.concat(u).concat(r);this.frozenReorderColumnModel=i.concat(r).concat(u)}},t.prototype.updateColumnModel=function(n){for(var t=0,i=n.length;t<i;t++)n[t].columns?this.updateColumnModel(n[t].columns):this.columnModel.push(n[t])},t.prototype.getColumnByIndex=function(n){var t;return this.getColumns().some(function(i,r){return t=i,r===n}),t},t.prototype.getDataRows=function(){var n,t;return sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody"))?[]:(n=[].slice.call(this.getContentTable().querySelector("tbody").children),this.options.frozenRows&&(t=[].slice.call(this.getHeaderTable().querySelector("tbody").children),n=this.addMovableRows(t,n)),this.generateDataRows(n))},t.prototype.addMovableRows=function(n,t){for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},t.prototype.generateDataRows=function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t].classList.contains("e-row")&&!n[t].classList.contains("e-hiddenrow")&&i.push(n[t]);return i},t.prototype.getMovableDataRows=function(){var n=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children),t;return this.options.frozenRows&&(t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children),n=this.addMovableRows(t,n)),this.generateDataRows(n)},t.prototype.getFrozenDataRows=function(){var n=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children),t;return this.options.frozenRows&&(t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children),n=this.addMovableRows(t,n)),this.generateDataRows(n)},t.prototype.getRowByIndex=function(n){return this.getDataRows()[n]},t.prototype.getCellFromIndex=function(n,t){var i=this.options.frozenColumns;return i&&t>=i?this.getMovableDataRows()[n]&&this.getMovableDataRows()[n].querySelectorAll(".e-rowcell")[t-i]:this.getDataRows()[n]&&this.getDataRows()[n].querySelectorAll(".e-rowcell")[t]},t.prototype.getColumnHeaderByIndex=function(n){return this.getHeaderTable().querySelectorAll(".e-headercell")[n]},t.prototype.getRows=function(){return this.options.frozenColumns?this.getFrozenDataRows():[].slice.call(this.getContentTable().querySelectorAll("tr.e-row[data-uid]"))},t.prototype.getSelectedRows=function(){return this.getRows().filter(function(n){return"true"===n.getAttribute("aria-selected")})},t.prototype.getSelectedRowIndexes=function(){for(var i=[],t=this.getRows(),n=0;n<t.length;n++)t[n].hasAttribute("aria-selected")&&"true"===t[n].getAttribute("aria-selected")&&i.push(n);return i},t.prototype.getVisibleColumns=function(){for(var t,i=[],n=0,r=this.columnModel;n<r.length;n++)t=r[n],t.visible&&i.push(t);return i},t.prototype.getColumnByField=function(n){return o(this.getColumns(),function(t){if(t.field===n)return t})[0]},t.prototype.getColumnIndexByField=function(n){for(var i=this.getColumns(),t=0;t<i.length;t++)if(i[t].field===n)return t;return-1},t.prototype.getColumnByUid=function(n){return o(this.getColumns().concat(this.getStackedColumns(this.options.columns)),function(t){if(t.uid===n)return t})[0]},t.prototype.getStackedColumns=function(n,t){var i,u,r;for(void 0===t&&(t=[]),i=0,u=n;i<u.length;i++)r=u[i],r.columns&&(t.push(r),this.getStackedColumns(r.columns,t));return t},t.prototype.getColumnIndexByUid=function(n){var t=o(this.getColumns(),function(t,i){if(t.uid===n)return i})[0];return sf.base.isNullOrUndefined(t)?-1:t},t.prototype.getColumnHeaderByUid=function(n){return this.getHeaderContent().querySelector("[e-mappinguid="+n+"]").parentElement},t.prototype.getUidByColumnField=function(n){return o(this.getColumns(),function(t){if(t.field===n)return t.uid})[0]},t.prototype.getStackedHeaderColumnByHeaderText=function(n,t){for(var i,r=0;r<t.length;r++){if(i=t[r],i.field===n||i.headerText===n){this.stackedColumn=i;break}i.columns&&this.getStackedHeaderColumnByHeaderText(n,i.columns)}return this.stackedColumn},t.prototype.getNormalizedColumnIndex=function(n){return this.getColumnIndexByUid(n)+this.getIndentCount()},t.prototype.getIndentCount=function(){var n=0;return this.options.allowGrouping&&(n+=this.options.groupCount),this.options.hasDetailTemplate&&n++,this.options.allowRowDragAndDrop&&!this.options.hasDropTarget&&n++,n},t.prototype.recalcIndentWidth=function(){if(this.isRendered&&this.getHeaderTable().querySelector(".e-emptycell")&&(this.options.groupCount||this.options.hasDetailTemplate||!this.options.allowRowDragAndDrop||!this.options.hasDropTarget)&&this.getContentTable()&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")){var n=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=n/30;t>=1&&(n=30/t);this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true");this.dotNetRef.invokeMethodAsync("SetIndentWidth",n+"px")}},t.prototype.resetColumnWidth=function(){if(("auto"===this.options.width||"string"==typeof this.options.width)&&this.getColumns().filter(function(n){return(!n.width||"auto"===n.width)&&n.minWidth}).length>0){var n=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(n)}},t.prototype.contentReady=function(t){if((void 0===t&&(t=null),this.getColumns().some(function(n){return n.autoFit})&&this.resizeModule.autoFit(),this.options.allowResizing&&this.isGridFirstRender&&this.options.isColumnResized)&&(new f(this).setWidthToTable(),this.isGridFirstRender=!1),this.options.frozenColumns){if(this.freezeModule.refreshRowHeight(),this.freezeModule.setFrozenHeight(),0!=this.options.aggregatesCount){for(var r=this.element.querySelectorAll(".e-summaryrow"),u=0,i=0;i<r.length;i++)if(r[i].querySelectorAll(".e-templatecell").length>0){u=r[i].offsetHeight;break}for(i=0;i<r.length;i++)r[i].style.height=u+"px"}this.freezeModule.refreshStackedHdrHgt()}this.options.enableVirtualization&&this.virtualContentModule.onDataReady();this.recalcIndentWidth();this.resetColumnWidth();this.lastRowBorderCheck();"Paging"===t&&(n(document.activeElement,"e-grid")||this.element.focus())},t.prototype.lastRowBorderCheck=function(){this.options.enableVirtualization||(this.getContent().querySelector(".e-table").scrollHeight<this.getContent().clientHeight?this.dotNetRef.invokeMethodAsync("LastRowBorder",!0):this.dotNetRef.invokeMethodAsync("LastRowBorder",!1))},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this);sf.base.EventHandler.add(this.element,"focus",this.gridFocus,this);sf.base.EventHandler.add(document,"click",this.documentClickHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.gridKeyDownHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this);sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this);sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this);this.options.allowEditing&&sf.base.EventHandler.add(this.element,"dblclick",this.doubleClickHandler,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler);sf.base.EventHandler.remove(this.element,"focus",this.gridFocus);sf.base.EventHandler.remove(document,"click",this.documentClickHandler);sf.base.EventHandler.remove(this.element,"keydown",this.gridKeyDownHandler);sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler);sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClickHandler);sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent)},t.prototype.doubleClickHandler=function(n){"TD"==n.target.tagName&&n.target.blur()},t.prototype.setOptions=function(n,t){var i=sf.base.extend(t,{}),r;if(this.options=n,!i.allowResizing&&n.allowResizing&&this.resizeModule.render(),(!i.allowGrouping&&n.allowGrouping||!i.allowReordering&&n.allowReordering||n.showDropArea)&&(this.headerDragDrop.initializeHeaderDrag(),this.headerDragDrop.initializeHeaderDrop(),this.groupModule.initializeGHeaderDrag(),this.groupModule.initializeGHeaderDrop()),!i.allowGrouping&&n.allowGrouping&&this.contentDragDrop.initializeContentDrop(),!i.allowRowDragAndDrop&&n.allowRowDragAndDrop?this.rowDragAndDropModule.initializeDrag():i.allowRowDragAndDrop&&!n.allowRowDragAndDrop&&this.rowDragAndDropModule.destroy(),this.isRendered||(this.isRendered=this.options.isPrerendered),i.groupCount!=n.groupCount){if(r=this.getHeaderTable().querySelector(".e-emptycell"),!r)return;r.removeAttribute("indentRefreshed")}},t.prototype.documentClickHandler=function(t){var i=n(t.target,"e-popup-open"),r=n(t.target,"e-cc-toolbar"),u=n(t.target,"e-datepicker"),f=n(t.target,"e-daterangepicker")||n(t.target,"e-zoomin"),e=t.target.classList.contains("e-check")||t.target.classList.contains("e-uncheck");this.options.enableAdaptiveUI||i||u||f||t.target.classList.contains("e-cc-cancel")||t.target.classList.contains("e-choosercheck")||e||t.target.classList.contains("e-icon-filter")||r||!this.element.querySelectorAll(".e-filter-popup.e-popup-open").length&&!this.element.querySelectorAll(".e-ccdlg.e-popup-open").length||(null!=this.element.querySelector(".e-datetimepicker")&&this.element.querySelector(".e-datetimepicker").blur(),this.dotNetRef.invokeMethodAsync("FilterPopupClose"))},t.prototype.documentKeyHandler=function(n){n.altKey&&74===n.keyCode&&!sf.base.isNullOrUndefined(this.element)&&(this.element.focus(),this.dotNetRef.invokeMethodAsync("GridFocus",n))},t.prototype.keyDownHandler=function(t){var i=n(t.target,"e-grid"),r=t.target.tagName;i&&i.id!==this.element.id||"Shift"==t.key||"Control"==t.key||"Alt"==t.key||("INPUT"!=r&&"TEXTAREA"!=r||"Delete"!=t.code)&&this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})},t.prototype.gridKeyDownHandler=function(t){var r,u=n(t.target,"e-filter-popup"),i=t.target.tagName;!sf.base.isNullOrUndefined(u)&&u.classList.contains("e-popup-open")&&"Escape"!=t.key&&(t.stopPropagation(),"Tab"!=t.key&&"shiftTab"!=t.key&&"Enter"!=t.key&&"shiftEnter"!=t.key||"INPUT"!=i&&"TEXTAREA"!=i||((r=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),t.target.dispatchEvent(r)));((("Tab"==t.key||"Escape"==t.key||"shiftTab"==t.key||"Enter"==t.key||"shiftEnter"==t.key)&&("INPUT"==i||t.target.classList.contains("e-datepicker")||t.target.classList.contains("e-datetimepicker"))||t.target.classList.contains("e-rowcell")&&"F2"==t.key)&&("Tab"==t.key&&(t.target.classList.contains("e-datepicker")||t.target.classList.contains("e-datetimepicker"))||t.target.blur()),"Shift"!=t.key&&"Control"!=t.key&&"Alt"!=t.key||t.stopPropagation(),67===t.keyCode&&t.ctrlKey?this.clipboardModule.copy():72===t.keyCode&&t.ctrlKey&&t.shiftKey&&this.clipboardModule.copy(!0),86===t.keyCode&&t.ctrlKey&&!this.options.isEdit&&(t.stopPropagation(),this.clipboardModule.pasteHandler()),this.element.querySelector(".e-batchrow"))&&("Tab"!=t.key&&"shiftTab"!=t.key&&"Enter"!=t.key&&"shiftEnter"!=t.key&&"Escape"!=t.key&&t.stopPropagation(),("Tab"==t.key||"shiftTab"==t.key||"Enter"==t.key||"shiftEnter"==t.key)&&(t.preventDefault(),("INPUT"==i||"TEXTAREA"==i)&&((r=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),t.target.dispatchEvent(r))))},t.prototype.mouseDownHandler=function(t){var r=n(t.target,"e-grid");if(!r||r.id===this.element.id)if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),2!==t.button&&n(t.target,"e-headercell")||2!==t.button&&n(t.target,"e-detailcell")||n(t.target,"e-detailrowexpand")||n(t.target,"e-detailrowcollapse")||t.target.classList.contains("e-content")||t.target.classList.contains("e-headercontent")||sf.base.closest(t.target,".e-groupdroparea")||sf.base.closest(t.target,".e-gridpopup")||sf.base.closest(t.target,".e-summarycell")||sf.base.closest(t.target,".e-rhandler")||sf.base.closest(t.target,".e-filtermenudiv")||sf.base.closest(t.target,".e-filterbarcell")||sf.base.closest(t.target,".e-groupcaption"))this.dotNetRef.invokeMethodAsync("MouseDownHandler",null,null);else{var i=null,u=null,f=n(n(t.target,"e-gridform"),"e-grid");n(t.target,"e-editcell")||f&&f.id==r.id?i="Edit":n(t.target,"e-pager")?i="Pager":n(t.target,"e-headercontent")?(i="Header",u=n(t.target,"e-headercell")?n(t.target,"e-headercell").getAttribute("data-uid"):null):n(t.target,"e-content")&&(i="Content",u=n(t.target,"e-rowcell")?n(t.target,"e-rowcell").getAttribute("data-uid"):null);"Header"!=i&&"Content"!=i&&"Pager"!=i&&"Edit"!=i||this.dotNetRef.invokeMethodAsync("MouseDownHandler",i,u)}},t.prototype.gridFocus=function(n){!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")||this.dotNetRef.invokeMethodAsync("GridFocus",n)},t.prototype.keyActionHandler=function(n){var t=this;"pageUp"!==n.action&&"pageDown"!==n.action&&"ctrlAltPageUp"!==n.action&&"ctrlAltPageDown"!==n.action&&"altPageUp"!==n.action&&"altPageDown"!==n.action&&"altDownArrow"!==n.action&&"ctrlPlusP"!==n.action||n.preventDefault();"enter"===n.action&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")&&"Batch"!==this.options.editMode&&setTimeout(function(){n.target.blur();t.dotNetRef.invokeMethodAsync("EndEdit")},40)},t.prototype.destroy=function(){this.unWireEvents();this.addScrollEvents(!1);this.toolTipModule.destroy();this.keyModule.destroy();this.virtualContentModule.removeEventListener();this.columnChooserModule.removeMediaListener();this.selectionModule.removeEventListener();this.rowDragAndDropModule.destroy()},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.setColumnIndexesInView=function(n){this.inViewIndexes=n},t.prototype.getRowHeight=function(){return this.options.rowHeight?this.options.rowHeight:function(n){var t,i;return void 0!==c?c:(t=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"}),t.innerHTML='<tr><td class="e-rowcell">A<td><\/tr>',n.appendChild(t),i=t.querySelector("td").getBoundingClientRect(),n.removeChild(t),c=Math.ceil(i.height))}(this.element)},t.prototype.clientActions=function(){this.options.enableVirtualization&&(12===this.options.pageSize||"auto"===this.options.width)&&this.virtualContentModule.ensurePageSize();this.getColumns().some(function(n){return""!==n.hideAtMedia})&&this.columnChooserModule.setMediaColumns()},t.prototype.print=function(){this.removeColGroup();var n=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");n.moveTo(0,0);n.resizeTo(screen.availWidth,screen.availHeight);sf.base.print(this.element,n)},t.prototype.removeColGroup=function(){var n=this.options.groupCount,t=this.element,e="#"+this.element.id,u,f;if(n){for(var i=t.querySelectorAll(".e-groupcaption"),o=i[n-1].getAttribute("colspan"),r=0;r<i.length;r++)i[r].setAttribute("colspan",o);u=t.querySelectorAll("colgroup"+e+"colGroup");f=t.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(u,n);this.hideColGroup(f,n)}},t.prototype.hideColGroup=function(n,t){for(var r,i=0;i<n.length;i++)for(r=0;r<t;r++)n[i].children[r].style.display="none"},t.prototype.getModuleName=function(){return"grid"},t}(),ni={pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",enter:"enter"};return{initialize:function(n,t,i){sf.base.enableBlazorMode();new gt(n,t,i)},contentReady:function(n,t,i){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var r=n.blazor__instance;r.setOptions(t,r.options);r.options=t;r.contentReady(i)}},customFilterDialog:function(n,t,i){var r,u;sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(r=document.querySelector("#"+t),(r.style.maxHeight="100%",r.style.border="1px",i)&&(u=n.querySelector(".e-sfcontextmenu"),u.querySelector("li").style.paddingLeft="0px",u.querySelector(".e-caret").style.paddingRight="8px"))},setCustomFilterDialogPadding:function(n,t){document.querySelector("#"+t).style.padding="16px"},searchClear:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=document.querySelector("#"+t);i.value="";i.focus()}},updateTableWidth:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=n.blazor__instance;(i.options.columns=t,i.options.allowResizing&&i.options.isResizedGrid)&&new f(i).setWidthToTable(t)}},frozenHeight:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.freezeModule.setFrozenHeight()},virtualHeight:function(n,t,i){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var r=n.blazor__instance;r.options=t;r.options.totalItemCount=i;r.virtualContentModule.refreshOffsets();r.virtualContentModule.setVirtualHeight()}},lazyGroupExpand:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=n.blazor__instance;i.setOptions(t,i.options);i.options=t;i.options.enableVirtualization&&i.virtualContentModule.onDataReady()}},viewRefresh:function(n,t){var i,r;sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance,i=void 0,i=new f(this),r=(t=t.filter(function(n){return n.visible})).some(function(n){return""==n.width||null==n.width}),i.setWidthToTable(t,r))},reorderColumns:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.reorderModule.reorderColumns(t,i)},reorderColumnByIndex:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.reorderModule.reorderColumnByIndex(t,i)},reorderColumnByTargetIndex:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.reorderModule.reorderColumnByTargetIndex(t,i)},renderColumnChooser:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.columnChooserModule.renderColumnChooser()},renderColumnMenu:function(n,t,i,r){return sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)?{Left:1,Top:1}:n.blazor__instance.columnMenuModule.renderColumnMenu(t,i,r)},filterPopupRender:function(n,t,i,r,u){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.filterModule.filterPopupRender(t,i,r,u)},clientHeight:function(n){return sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)?0:Math.max(n.blazor__instance.content.clientHeight,window.innerHeight||0)},clientTransformUpdate:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.virtualContentModule.updateTransform(t,i)},autoFitColumns:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.columns=t,n.blazor__instance.resizeModule.autoFitColumns(i))},refreshColumnIndex:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=n.blazor__instance;i.options.columns=t;i.virtualContentModule.refreshColumnIndexes()}},focus:function(n,t,i,r){var u=n.querySelector('[data-uid="'+i+'"]'),f;sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||sf.base.isNullOrUndefined(u)||(f=n.blazor__instance,f.options.enableVirtualization?f.virtualContentModule.focusCell(u,r):u.focus())},focusExcelInput:function(n,t){var i=document.querySelector("#"+t+"_excelDlg");sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||sf.base.isNullOrUndefined(i)||setTimeout(function(){i.querySelector("#"+n.id+"_SearchBox").focus()},10)},refreshOnDataChange:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.virtualContentModule.refreshOnDataChange()},updateAutofillPosition:function(n,t,i){return sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)?null:n.blazor__instance.selectionModule.updateAutofillPosition(t,i)},createBorder:function(n,t,i){return sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)?null:n.blazor__instance.selectionModule.createBorder(t,i)},removePersistItem:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=n.blazor__instance;i.getHeaderTable().style.width="";i.getContentTable().style.width="";0!=i.options.aggregatesCount&&(i.getFooterContent().querySelector(".e-table").style.width="");i.options.frozenColumns>0&&(i.element.querySelector(".e-movableheader").querySelector(".e-table").style.width="",i.element.querySelector(".e-movablecontent").querySelector(".e-table").style.width="")}localStorage.removeItem(t)},focusChild:function(n,t,i){var r=[].slice.call(n.querySelector('[data-uid="'+i+'"]').querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'));return r.length>0?r[0].focus():n.querySelector('[data-uid="'+i+'"]').focus(),!!r.length},exportSave:function(n,t){var e,i;if(navigator.msSaveBlob){for(var u=window.atob(t),f=new Uint8Array(u.length),r=0;r<u.length;r++)f[r]=u.charCodeAt(r);e=new Blob([f.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(e,n)}else i=document.createElement("a"),i.download=n,i.href="data:application/octet-stream;base64,"+t,document.body.appendChild(i),i.click(),document.body.removeChild(i)},destroy:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy()},validation:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.editModule.createTooltip(t,i)},focusCell:function(n,t,i,r){var u;if(void 0===r&&(r=!1),i&&!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)&&n.blazor__instance.options.frozenColumns&&(n.querySelector(".e-frozencontent").style.height=n.querySelector(".e-movablecontent").getBoundingClientRect().height+"px"),u="#"+t.replace(/[.]/g,"___"),r)for(var e=[].slice.call(n.querySelectorAll("form")),o=void 0,f=0;f<e.length;f++)(o=e[f].querySelector("td:not(.e-hide)")).style.height=sf.base.closest(o,".e-row").getBoundingClientRect().height+"px";""===t&&n.querySelector("input.e-boolcell")?n.querySelector("input.e-boolcell").focus():""!==t&&n.querySelector(u)&&n.querySelector(u).focus()},CurrentPageFocus:function(n,t,i){var r=n.querySelector(".e-numericcontainer");"PreviousPage"==t||r.querySelectorAll(".e-link:last-child")[0].innerText!=i?r.querySelector(".e-link").focus():r.querySelectorAll(".e-link:last-child")[0].focus()},pagerFocus:function(n,t){var i=n.querySelector(".e-gridpager").querySelector(".e-pagercontainer"),r=i.querySelector(".e-numericcontainer"),f=i.querySelector(".e-firstpage.e-pager-default"),u=i.querySelector(".e-prevpage.e-pager-default"),e;return"ArrowDown"===t?f?(f.focus(),"FirstPage"):u?(f.focus(),"PreviousPage"):(r.querySelectorAll(".e-link")[1].focus(),"1"):"ArrowRight"==t?null!=f&&f.classList.contains("e-focused")?(u.focus(),"PreviousPage"):null!=u&&u.classList.contains("e-focused")||null!=i.querySelector(".e-pp.e-focused")?null==i.querySelector(".e-pp")||i.querySelector(".e-pp").classList.contains("e-focused")?(r.querySelectorAll(".e-link")[0].focus(),r.querySelectorAll(".e-link")[0].innerText):(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):r.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-link.e-focused")&&null!=i.querySelector(".e-link.e-focused").nextSibling?(r.querySelector(".e-link.e-focused").nextSibling.focus(),r.querySelector(".e-link.e-focused").nextSibling.innerText):r.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-np")&&null==i.querySelector(".e-np.e-focused")?(i.querySelector(".e-np").focus(),"NextPagerCount"):r.querySelectorAll(".e-link.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0?null!=i.querySelector(".e-nextpage")?(i.querySelector(".e-nextpage").focus(),"NextPage"):(r.querySelector(".e-link.e-focused").focus(),r.querySelector(".e-link.e-focused").innerText):(i.querySelector(".e-nextpage.e-focused"),i.querySelector(".e-lastpage").focus(),"LastPage"):"ArrowLeft"==t?null!=u&&u.classList.contains("e-focused")?(f.focus(),"FirstPage"):u&&i.querySelector(".e-pp.e-focused")?(u.focus(),"PreviousPage"):r.querySelectorAll(".e-link")[0].classList.contains("e-focused")?null!=i.querySelector(".e-pp")?(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):u?(u.focus(),"PreviousPage"):(r.querySelectorAll(".e-link")[0].focus(),"1"):r.querySelectorAll(".e-link.e-focused").length>0?(r.querySelector(".e-link.e-focused").previousSibling.focus(),r.querySelector(".e-link.e-focused").previousSibling.innerText):i.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=i.querySelector(".e-np")?(i.querySelector(".e-np").focus(),"NextPagerCount"):i.querySelectorAll(".e-nextpage.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0?(e=r.querySelectorAll(".e-link").length,r.querySelectorAll(".e-link")[e-1].focus(),r.querySelectorAll(".e-link:last-child")[0].innerText):null!=i.querySelector(".e-lastpage.e-focused")?(i.querySelector(".e-nextpage").focus(),"NextPage"):f.classList.contains(".e-disabled")?"0":(f.focus(),"FirstPage"):"0"},setFrozenHeight:function(n){n.querySelector(".e-frozencontent").style.height=n.querySelector(".e-movablecontent").offsetHeight-t()+"px"},printGrid:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.print()},updateMediaColumns:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.columnChooserModule.updateMediaColumns(t)},copyToClipBoard:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.clipboardModule.copy(t)},gridFocus:function(n){sf.base.isNullOrUndefined(n)||n.focus()},isMacDevice:function(){return-1!==navigator.userAgent.indexOf("Mac OS")}}}()},"./modules/sf-heatmap.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.HeatMap=function(){"use strict";var n=function(){function n(n,t){this.resizeTimer=0;this.previousCellID="";this.element=n;this.element.blazorInstance=this;this.dotnetRef=t}return n.prototype.initialize=function(n){var t,i;this.dotnetRef.invokeMethodAsync("CalculateSize",this.getElementBounds(this.element),this.getMaxLabelSize(n.XAxisLabels,n.XAxisTextStyles),this.getMaxLabelSize(n.YAxisLabels,n.YAxisTextStyles),this.getMaxLabelSize([n.TitleText],n.TitleStyle),this.getMaxLabelSize(n.LegendLabels,n.LegendTextStyle));t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,"click",this.heatMapMouseClick,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove,this);sf.base.EventHandler.add(this.element,t,this.heatMapMouseLeave,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove,this);i=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,i,this.resizeBound.bind(this),this)},n.prototype.heatMapMouseClick=function(n){this.dotnetRef.invokeMethodAsync("HeatMapMouseClick",this.getEventArgs(n),this.getElementBounds(this.element))},n.prototype.heatMapMouseLeave=function(n){this.dotnetRef.invokeMethodAsync("HeatMapMouseLeave",this.getEventArgs(n),this.getElementBounds(this.element))},n.prototype.heatMapMouseMove=function(n){this.dotnetRef.invokeMethodAsync("HeatMapMouseMove",this.getEventArgs(n),this.getElementBounds(this.element))},n.prototype.resizeBound=function(){var n=this;this.resizeTimer&&clearTimeout(this.resizeTimer);this.element&&(this.resizeTimer=setTimeout(function(){return n.dotnetRef.invokeMethodAsync("ResizeBound",n.getElementBounds(n.element).height,n.getElementBounds(n.element).width,n.getElementBounds(n.element).parentHeight)},500))},n.prototype.setMouseXY=function(n,t,i){var u=document.getElementById(i).getBoundingClientRect(),r=document.getElementById(i).getBoundingClientRect();this.mouseY=t-r.top-Math.max(u.top-r.top,0);this.mouseX=n-r.left-Math.max(u.left-r.left,0)},n.prototype.renderTooltip=function(n,t,i,r,u,f,e,o,s){var l=document.getElementById(t+"_svg"),a=!(l&&parseInt(l.getAttribute("opacity"),10)>0),c="string"==typeof i?JSON.parse(i):i,h;u&&!f&&this.updateCellHighlight(i.id);s&&"TailwindDark"==s&&(c.fill="#F9FAFB");s&&"Bootstrap5Dark"==s&&(c.fill="#E9ECEF");h=n.blazorInstance;c.content=c.xLabel+c.yLabel+c.value;a&&!sf.base.isNullOrUndefined(h)?(c.content=c.displayText,c.location={x:c.x+c.width/2,y:c.y+c.height/2},c.areaBounds={height:r.height+r.y,width:r.width,x:r.x},c.opacity="Tailwind"==s||"TailwindDark"===s||"Bootstrap5"===s||"Bootstrap5Dark"===s?1:.75,h.tooltip=new sf.svgbase.Tooltip(c),h.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(h.tooltip)||(sf.base.isNullOrUndefined(e)||(h.tooltip.border.color=o.color||h.tooltip.border.color,h.tooltip.textStyle.color=e.color||h.tooltip.textStyle.color,h.tooltip.textStyle.fontFamily=e.fontFamily||h.tooltip.textStyle.fontFamily,h.tooltip.textStyle.fontStyle=e.fontStyle||h.tooltip.textStyle.fontStyle,h.tooltip.textStyle.fontWeight=e.fontWeight||h.tooltip.textStyle.fontWeight,h.tooltip.textStyle.size=e.size||h.tooltip.textStyle.size),s&&"Tailwind"==s&&(h.tooltip.textStyle.color="#FFFFFF",h.tooltip.textStyle.fontWeight="500",h.tooltip.textStyle.size="12px",h.tooltip.textStyle.fontFamily="Inter"),s&&"TailwindDark"==s&&(h.tooltip.textStyle.color="#1F2937",h.tooltip.textStyle.fontWeight="500",h.tooltip.textStyle.size="12px",h.tooltip.textStyle.fontFamily="Inter"),s&&"Bootstrap5"==s&&(h.tooltip.textStyle.color="#F9FAFB",h.tooltip.textStyle.fontWeight="500",h.tooltip.textStyle.size="14px",h.tooltip.textStyle.fontFamily="Helvetica Neue"),s&&"Bootstrap5Dark"==s&&(h.tooltip.textStyle.color="#212529",h.tooltip.textStyle.fontWeight="500",h.tooltip.textStyle.size="14px",h.tooltip.textStyle.fontFamily="system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'"),c.toolTipX=c.x+c.width/2,c.toolTipY=c.y+c.height/2,c.content=c.displayText,h.tooltip.location=new sf.svgbase.TooltipLocation(c.toolTipX,c.toolTipY),h.tooltip.content=[c.content],h.tooltip.dataBind())},n.prototype.updateCellHighlight=function(n){this.previousCellID!==n&&(""!=this.previousCellID&&this.setOpacity(document.getElementById(this.previousCellID),"1"),this.setOpacity(document.getElementById(n),"0.65"),this.previousCellID=n)},n.prototype.setOpacity=function(n,t){n.setAttribute("opacity",t)},n.prototype.getElementBounds=function(n){var r=this.stringToNumber(this.width,n.offsetWidth)||n.offsetWidth||600,i=this.stringToNumber(this.height,n.offsetHeight)||450,t=n.getBoundingClientRect();return{width:r,height:i,parentHeight:n.parentElement?n.parentElement.offsetHeight:i,left:Math.ceil(t.left),top:Math.ceil(t.top),right:Math.ceil(t.right),bottom:Math.ceil(t.bottom)}},n.prototype.stringToNumber=function(n,t){return sf.base.isNullOrUndefined(n)?null:-1!==n.indexOf("%")?t/100*parseInt(n,10):parseInt(n,10)},n.prototype.getMaxLabelSize=function(n,t){for(var r,i={height:0,width:0,top:0,left:0,right:0,bottom:0,parentHeight:0},u=0;u<n.length;u++)r=this.measureText(n[u],t),i.height<r.height&&(i.height=r.height),i.width<r.width&&(i.width=r.width);return i},n.prototype.getEventArgs=function(n){var f=n.changedTouches?n.changedTouches[0].clientX:n.clientX,e=n.changedTouches?n.changedTouches[0].clientY:n.clientY,i,r,t,u;if(this.setMouseXY(f,e,n.currentTarget.id),i=n.touches,r=[],n.type.indexOf("touch")>-1)for(t=0,u=i.length;t<u;t++)r.push({pageX:i[t].clientX,pageY:i[t].clientY,pointerId:n.pointerId||0});return{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType,target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0},touches:r,pointerId:n.pointerId,ctrlKey:n.ctrlKey}},n.prototype.labelInterSect=function(n,t,i,r){for(var e,o,f=!1,u=0;u<t[0].length;u++)if(this.measureText(t[0][u],t[1]).width>r){f=!0;break}e=this.returnLabels(t[0],t[1],t[2]);o=this.returnLabels(i[0],i[1],i[2]);this.dotnetRef.invokeMethodAsync("LabelInterSect",f,e,o)},n.prototype.returnLabels=function(n,t,i){for(var r,e,f,u=0;u<n.length;u++){if(r=n[u],e=this.measureText(r,t).width,e>i)for(f=r.length-1;f>=0&&(r=r.substring(0,f)+"...",!((e=this.measureText(r,t).width)<=i));--f);n[u]=r}return n},n.prototype.measureText=function(n,t){var i=document.getElementById("heatmapmeasuretext");return null===i&&(i=sf.base.createElement("text",{id:"heatmapmeasuretext"}),document.body.appendChild(i)),i.setAttribute("style","position:absolute;visibility:hidden;font-size:"+t.size+";font-weight:"+t.fontWeight+";font-style:"+t.fontStyle+";font-family:"+t.fontFamily+";top:-100;left:0;white-space:nowrap;line-height:normal"),i.innerText=n,{height:i.clientHeight,width:i.clientWidth,top:null,left:null,right:null,bottom:null,parentHeight:null}},n.prototype.destroy=function(){var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave",n;sf.base.EventHandler.remove(this.element,"click",this.heatMapMouseClick);sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove);sf.base.EventHandler.remove(this.element,t,this.heatMapMouseLeave);sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove);n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,n,this.resizeBound.bind(this));this.element=null},n}();return{initialize:function(t,i,r){new n(t,i);t&&t.blazorInstance&&t.blazorInstance.initialize(r)},labelInterSect:function(n,t,i,r,u){n&&n.blazorInstance&&n.blazorInstance.labelInterSect(t,i,r,u)},renderTooltip:function(n,t,i,r,u,f,e,o,s,h){n&&n.blazorInstance&&n.blazorInstance.renderTooltip(n,t,r,u,f,e,o,s,h)},fadeOut:function(n){if(n&&n.blazorInstance){if(sf.base.isNullOrUndefined(n.blazorInstance)||!sf.base.isNullOrUndefined(n.blazorInstance)&&sf.base.isNullOrUndefined(n.blazorInstance.tooltip))return;""!=n.blazorInstance.previousCellID&&(n.blazorInstance.setOpacity(document.getElementById(n.blazorInstance.previousCellID),"1"),n.blazorInstance.previousCellID="");n.blazorInstance.tooltip.fadeOut()}},destroy:function(n){n&&n.blazorInstance&&n.blazorInstance.destroy()}}}()},"./modules/sf-inplaceeditor.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.InPlaceEditor=function(){"use strict";var n="e-inplaceeditor",t="e-editable-open",i=function(){function i(n,t,i){this.submitOnEnter=!0;this.clearComponents=["AutoComplete","Mask","Text"];this.element=n;this.dotNetRef=i;this.updateContext(t);this.element.blazor__instance=this}return i.prototype.updateContext=function(n){sf.base.extend(this,this,n)},i.prototype.initialize=function(){this.onResizeScrollHandler=this.scrollResizeHandler.bind(this);this.wireEvents();this.id=this.element.id;this.dotNetRef.invokeMethodAsync("Created",null)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.valueKeyDownHandler,this);sf.base.EventHandler.add(document,"scroll",this.scrollResizeHandler,this);window.addEventListener("resize",this.onResizeScrollHandler);Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this)},i.prototype.scrollResizeHandler=function(){"Popup"!==this.mode||sf.base.Browser.isDevice||this.dotNetRef.invokeMethodAsync("CancelAction",null)},i.prototype.valueKeyDownHandler=function(i){"Tab"===i.code&&!0===i.shiftKey&&"BUTTON"!==i.target.tagName&&("Submit"===this.actionOnBlur?this.dotNetRef.invokeMethodAsync("SaveAction",null):"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null));"Enter"!==i.code||!i.target.classList.contains(n)||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null))},i.prototype.mouseDownHandler=function(n){n.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},i.prototype.openEditor=function(n){if(this.updateContext(n),"Popup"===this.mode&&(this.popupContent=document.querySelector("#"+this.popupElement+"_content")),"Ignore"!==this.actionOnBlur&&sf.base.EventHandler.add(document,"mousedown",this.docClickHandler,this),this.submitOnEnter){var t="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.add(t,"keydown",this.enterKeyDownHandler,this)}this.dotNetRef.invokeMethodAsync("FocusEditor")},i.prototype.enterKeyDownHandler=function(i){sf.base.closest(i.target,".e-editable-component .e-richtexteditor")||(13===i.keyCode&&13===i.which&&sf.base.closest(i.target,".e-editable-component")?this.dotNetRef.invokeMethodAsync("SaveAction",null):27===i.keyCode&&27===i.which?(sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.querySelector("input"))||"Inline"!==this.mode?sf.base.isNullOrUndefined(this.popupContent)||sf.base.isNullOrUndefined(this.popupContent.querySelector("input"))||"Popup"!==this.mode||this.popupContent.querySelector("input").blur():this.element.querySelector("input").blur(),this.dotNetRef.invokeMethodAsync("CancelAction",null)):"Enter"!==i.code||!i.target.classList.contains(n)||sf.base.isNullOrUndefined(this.element.querySelector(".e-editable-value-container"))||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null)))},i.prototype.removeEditor=function(n){this.updateContext(n);this.enablePersistence&&window.localStorage.setItem(this.id,this.value);this.unWireEvents();sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler)},i.prototype.Destroy=function(n){var t=this;for(this.updateContext(n),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),"Popup"===this.mode&&this.destroyPopup(),["e-disable","e-rtl"].forEach(function(n){sf.base.removeClass([t.element],[n])});this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)},i.prototype.destroyPopup=function(){var n=document.querySelector("#"+this.popupElement),i,t;if(n){for(;n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(i=n.children,t=i.length-1;t>=0;t--)sf.base.detach(i[t])}},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"scroll",this.scrollResizeHandler);window.removeEventListener("resize",this.onResizeScrollHandler);sf.base.EventHandler.remove(this.element,"keydown",this.valueKeyDownHandler);Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler)},i.prototype.validate=function(){return"Inline"===this.mode?!!this.element.querySelector(".validation-message"):!(!this.componentParent||!this.componentParent.querySelector(".validation-message"))},i.prototype.docClickHandler=function(t){var r=sf.base.closest(t.target,"."+n),u=sf.base.closest(t.target,".e-inplaceeditor-tip"),e=sf.base.closest(t.target,".e-editable-elements"),o=sf.base.closest(t.target,".e-rte-elements"),f,i;this.isClearTarget||!sf.base.isNullOrUndefined(r)&&r.isEqualNode(this.element)||!sf.base.isNullOrUndefined(u)&&this.popupContent&&u.id.indexOf("tooltip")>-1||!sf.base.isNullOrUndefined(e)||!sf.base.isNullOrUndefined(o)||t.target.classList.contains("e-chips-close")?this.isClearTarget=!1:(f="Inline"===this.mode?this.element.querySelector(".e-editable-component"):this.element,i="Inline"===this.mode?this.element.querySelector(".e-editable-action-buttons"):this.componentParent,f.contains(t.target)||i&&i.contains(t.target)||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-rte-elements")||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-colorpicker-popup")||this.popupContent&&this.popupContent.contains(t.target)||("Submit"!==this.actionOnBlur||this.element.querySelector(".validation-message")?"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null):this.dotNetRef.invokeMethodAsync("SaveAction",null)))},i}();return{initialize:function(n,t,r){sf.base.isNullOrUndefined(n)||(new i(n,t,r),n.blazor__instance.initialize())},openEditor:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.openEditor(t)},closeEditor:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.removeEditor(t)},destroy:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.Destroy(t)},propertyChanged:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.updateContext(t)},validate:function(n){return n&&n.blazor__instance.validate()}}}()},"./modules/sf-kanban.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Kanban=function(){"use strict";var t="e-kanban-content",n="e-show-add-button",i=function(){function i(n){this.parent=n;this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]};this.isDragging=!1;this.dragEdges={left:!1,right:!1,top:!1,bottom:!1};this.isExternalDrop=!1}return i.prototype.wireDragEvents=function(n){var i;null!=!this.parent.element&&this.parent.externalDropId&&0===this.parent.externalDropId.length&&(i=this.parent.element.querySelector("."+t));this.dragObj.instance=new sf.base.Draggable(n,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:i,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},i.prototype.dragHelper=function(n){if(this.dragObj.element=sf.base.closest(n.sender.target,".e-card"),sf.base.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=sf.base.formatUnit(this.dragObj.element.offsetWidth);var t=this.dragObj.element.cloneNode(!0);return this.dragObj.cloneElement=t,sf.base.addClass([this.dragObj.cloneElement],"e-cloned-card"),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=sf.base.createElement("div",{className:"e-target-multi-clone"}),this.dragObj.targetClone=sf.base.createElement("div",{className:"e-target-dropped-clone",styles:"width:100%;height:"+sf.base.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},i.prototype.dragStart=function(n){var t=this,r,i,u,f,e;(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains("e-selection"))&&(r=sf.base.closest(this.dragObj.element,".e-content-row"),this.dragObj.selectedCards=[].slice.call(r.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)")));i=[];_instanceof(this.dragObj.selectedCards,HTMLElement)?(u=this.dragObj.selectedCards.getAttribute("data-id"),i.push(u)):this.dragObj.selectedCards.forEach(function(n){i.push(n.getAttribute("data-id"))});f=this.getXYValue(n,"X");e=this.getXYValue(n,"Y");this.dragObj.cloneElement.style.display="none";this.parent.dotNetRef.invokeMethodAsync("DragStart",i,f,e).then(function(i){if(i.cancel)return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(n),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.cloneElement.style.display="block",n.bindEvents(n.dragElement),t.dragObj.element.classList.contains("e-selection")){if(t.dragObj.selectedCards.forEach(function(n){t.draggedClone(n)}),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var r=sf.base.createElement("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(r);sf.base.classList(t.dragObj.cloneElement,["e-multi-card-clone"],["e-selection"]);t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);sf.base.EventHandler.add(document.body,"keydown",t.keydownHandler,t)})},i.prototype.drag=function(n){var h=this,e,f,c,l,o,a,v,s,r;if(n.target){var u=sf.base.closest(n.target,".e-card"),t=u||n.target,i=sf.base.closest(t,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");(this.externalDrop(t,"drag"),this.target=this.parent.isExternalKanbanDrop?this.externalTarget:this.parent.element,this.calculateArgs(n),i&&"not-allowed"!==document.body.style.cursor)&&(e=this.getColumnKey(i),f=e.split(","),this.multiCloneRemove(),c=e===this.getColumnKey(sf.base.closest(this.dragObj.draggedClone,".e-content-cells")),1===f.length||c?t.classList.contains("e-card")||t.classList.contains("e-target-dragged-clone")?(l=t.classList.contains("e-target-dragged-clone")&&t.previousElementSibling.classList.contains("e-kanban-dragged-card")?null:t.previousElementSibling,o="afterend",sf.base.isNullOrUndefined(l)&&(a=t.classList.contains("e-target-dragged-clone")?this.dragObj.pageY/2:this.dragObj.pageY,v=t.classList.contains("e-target-dragged-clone")?t.offsetHeight:t.offsetHeight/2,a-(this.target.getBoundingClientRect().top+t.offsetTop)<v&&(o="beforebegin")),t.insertAdjacentElement(o,this.dragObj.targetClone)):t.classList.contains("e-content-cells")&&!sf.base.closest(t,".e-swimlane-row")?t.querySelector(".e-card-container").appendChild(this.dragObj.targetClone):t.classList.contains("e-card-container")&&!sf.base.closest(t,".e-swimlane-row")&&0===i.querySelectorAll(".e-card").length&&t.appendChild(this.dragObj.targetClone):f.length>1&&i.classList.contains("e-dropping")&&this.multiCloneCreate(f,i));0===this.target.querySelectorAll(".e-dropping").length&&this.cellDropping();s=sf.base.closest(t,".e-column-key");s&&(r=[].slice.call(this.target.querySelectorAll(".e-column-key:not(.e-disabled)")).filter(function(n){return h.getColumnKey(n)===h.getColumnKey(s)}),r.length>0&&(sf.base.addClass(r,"e-multi-active"),r[0].previousElementSibling&&sf.base.addClass([r[0].previousElementSibling],"e-multi-bottom-border")));document.body.style.cursor=i&&i.classList.contains("e-dropping")?"":"not-allowed";u&&!sf.base.closest(u,".e-content-cells").classList.contains("e-dropping")&&(u.style.cursor="not-allowed",document.body.style.cursor="not-allowed");this.isExternalDrop&&this.removeElement(this.dragObj.targetClone);this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor="");"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.target),this.multiCloneRemove());this.updateScrollPosition();this.parent.isExternalKanbanDrop=!1;this.isExternalDrop=!1}},i.prototype.dragStop=function(n){var r,i=sf.base.closest(this.dragObj.targetClone,".e-content-cells"),o=0,c,f,e,l;(sf.base.EventHandler.remove(document.body,"keydown",this.keydownHandler),this.externalDrop(n.target,"dragStop"),this.dragObj.targetClone.parentElement)&&(o=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(".e-card:not(.e-kanban-dragged-card),.e-target-dropped-clone")).indexOf(this.dragObj.targetClone));this.target&&this.target.querySelector(".e-target-multi-clone")&&(r=sf.base.closest(n.target,".e-column-key:not(.e-disabled)"));var s=this.getXYValue(n,"X"),h=this.getXYValue(n,"Y"),u=[];if(_instanceof(this.dragObj.selectedCards,HTMLElement)?(c=this.dragObj.selectedCards.getAttribute("data-id"),u.push(c)):this.dragObj.selectedCards.forEach(function(n){u.push(n.getAttribute("data-id"))}),i||r){f=void 0;i?f=this.getColumnKey(i):(f=this.getColumnKey(r),i=sf.base.closest(r,".e-content-cells"));e=void 0;this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop&&(l=sf.base.closest(i,".e-content-row").previousElementSibling,e=this.getColumnKey(l));var a=!1,t=void 0,v="";this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&(!(t="Ascending"===this.parent.sortSettings.direction?this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||t.classList.contains("e-kanban-dragged-card")||t.classList.contains("e-cloned-card")||t.classList.contains("e-target-dragged-clone")?this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.parent.sortSettings.direction?t=this.dragObj.targetClone.nextElementSibling:this.dragObj.targetClone.previousElementSibling&&"Descending"===this.parent.sortSettings.direction&&(t=this.dragObj.targetClone.previousElementSibling):a=!0);t&&(v=t.getAttribute("data-id"));this.parent.dotNetRef.invokeMethodAsync("DragStop",u,f,e,o,a,v,this.parent.isExternalKanbanDrop,s,h)}else this.isExternalDrop&&this.parent.dotNetRef.invokeMethodAsync("DragStop",u,"","",0,!1,"",!0,s,h);this.dragStopClear()},i.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone);this.removeElement(this.dragObj.targetClone,this.target);this.removeElement(this.dragObj.cloneElement);[].slice.call(this.parent.element.querySelectorAll(".e-target-dragged-clone")).forEach(function(n){return sf.base.remove(n)});this.dragObj.element.style.removeProperty("width");this.multiCloneRemove();_instanceof(this.dragObj.selectedCards,HTMLElement)?sf.base.removeClass([this.dragObj.selectedCards],"e-kanban-dragged-card"):sf.base.removeClass(this.dragObj.selectedCards,"e-kanban-dragged-card");clearInterval(this.dragObj.navigationInterval);this.dragObj.navigationInterval=null;"not-allowed"===document.body.style.cursor&&(document.body.style.cursor="");[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach(function(n){n.style.cursor=""});[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach(function(n){return sf.base.removeClass([n],"e-dropping")});this.dragObj.cardDetails=this.dragObj.modifiedData=[];this.isDragging=!1;this.parent.isExternalKanbanDrop=!1;this.target=null;this.externalTarget=null},i.prototype.keydownHandler=function(n){"Escape"===n.code&&this.dragObj.cloneElement&&(sf.base.EventHandler.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear())},i.prototype.draggedClone=function(n){this.dragObj.draggedClone=sf.base.createElement("div",{className:"e-target-dragged-clone",styles:"width:"+sf.base.formatUnit(n.offsetWidth-1)+";height:"+sf.base.formatUnit(n.offsetHeight)});n.insertAdjacentElement("afterend",this.dragObj.draggedClone);sf.base.addClass([n],"e-kanban-dragged-card")},i.prototype.calculateArgs=function(n){var t=this.getPageCoordinates(n);this.dragObj.pageY=t.pageY;this.dragObj.pageX=t.pageX;this.isDragging=!0},i.prototype.getPageCoordinates=function(n){var t=n.event;return t&&t.changedTouches?t.changedTouches[0]:n.changedTouches?n.changedTouches[0]:t||n},i.prototype.getColumnKey=function(n){return n&&n.getAttribute("data-key")?n.getAttribute("data-key").trim():""},i.prototype.multiCloneRemove=function(){if(this.target){var t=[].slice.call(this.target.querySelectorAll(".e-target-multi-clone"));t.length>0&&([].slice.call(this.target.querySelectorAll(".e-column-key")).forEach(function(n){return sf.base.remove(n)}),t.forEach(function(t){var i=sf.base.closest(t,".e-content-cells");i&&(i.style.borderStyle="",i.querySelector("."+n)&&sf.base.removeClass([i.querySelector("."+n)],"e-multi-card-container"),sf.base.removeClass([i.querySelector(".e-card-container")],"e-multi-card-container"))}),this.removeElement(this.dragObj.targetCloneMulti,this.target))}},i.prototype.removeElement=function(n,t){t=t||this.parent.element;n&&t&&t.getElementsByClassName(n.className).length>0&&sf.base.remove(n)},i.prototype.externalDrop=function(n,t){var i=this;this.parent.externalDropId&&this.parent.externalDropId.forEach(function(r){if(i.externalTarget=sf.base.closest(n,r),i.externalTarget)if(i.externalTarget.classList.contains("e-kanban")){i.parent.isExternalKanbanDrop=!0;var u=[].slice.call(i.externalTarget.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));"drag"===t?sf.base.addClass(u,"e-dropping"):sf.base.removeClass(u,"e-dropping")}else i.isExternalDrop=!0})},i.prototype.multiCloneCreate=function(t,i){var r=i.offsetHeight,h=i.querySelector(".e-limits"),u,e;for(h&&(r-=h.offsetHeight),this.dragObj.targetCloneMulti.style.height=sf.base.formatUnit(r),i.querySelector("."+n)&&sf.base.addClass([i.querySelector("."+n)],"e-multi-card-container"),sf.base.addClass([i.querySelector(".e-card-container")],"e-multi-card-container"),i.querySelector(".e-card-container").style.height="auto",i.style.borderStyle="none",this.removeElement(this.dragObj.targetClone),u=0,e=t;u<e.length;u++){var o=e[u],l=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),a=this.parent.transition[l.cellIndex].transitionColumn,c=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),o,a),v=c?"":" e-disabled",f=sf.base.createElement("div",{className:"e-column-key"+v,attrs:{"data-key":o.trim()}}),s=sf.base.createElement("div",{className:"e-text",innerHTML:o.trim()});i.appendChild(this.dragObj.targetCloneMulti).appendChild(f).appendChild(s);f.style.cursor=c?"":"not-allowed";f.style.lineHeight=f.style.height=sf.base.formatUnit(r/t.length);s.style.top=sf.base.formatUnit(r/2-s.offsetHeight/2)}},i.prototype.allowedTransition=function(n,t,i){for(var u,e=!0,f=t.split(","),r=0;r<f.length;r++){if(n===f[r].trim())return!0;if(i){if(1===i.length&&0===i[0].length)return!0;for(u=0;u<i.length;u++){if(f[r].trim()===i[u].trim())return!0;e=!1}}}return e},i.prototype.cellDropping=function(){var r=this,n=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),t=sf.base.closest(this.dragObj.draggedClone,".e-content-row"),i;(this.addDropping(t,n),n&&n.classList.contains("e-drop")&&sf.base.addClass([n],"e-dropping"),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop)&&(i=[].slice.call(this.target.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)")),[].slice.call(i).forEach(function(i){t!==i&&r.addDropping(i,n)}))},i.prototype.addDropping=function(n,t){var i=this;t&&n&&[].slice.call(n.children).forEach(function(n){var r=i.parent.transition[t.cellIndex].transitionColumn;n!==t&&n.classList.contains("e-drop")&&i.allowedTransition(t.getAttribute("data-key"),n.getAttribute("data-key"),r)&&sf.base.addClass([n],"e-dropping")})},i.prototype.updateScrollPosition=function(){var n=this;sf.base.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval(function(){n.autoScroll()},100))},i.prototype.autoScrollValidation=function(){var r=this.dragObj.pageY,u=this.dragObj.pageX,i={left:!1,right:!1,top:!1,bottom:!1},n=this.target.querySelector("."+t).getBoundingClientRect();r<n.top+30+window.pageYOffset&&r>n.top+window.pageYOffset&&(i.top=!0);r>n.bottom-30+window.pageYOffset&&r<n.bottom+window.pageYOffset&&(i.bottom=!0);u<n.left+30+window.pageXOffset&&u>n.left+window.pageXOffset&&(i.left=!0);u>n.right-30+window.pageXOffset&&u<n.right+window.pageXOffset&&(i.right=!0);this.dragEdges=i},i.prototype.autoScroll=function(){var n;if(this.autoScrollValidation(),this.parent.isAdaptive){if(this.dragEdges.top||this.dragEdges.bottom?n=this.dragObj.targetClone?sf.base.closest(this.dragObj.targetClone,".e-card-container"):sf.base.closest(this.dragObj.draggedClone,".e-card-container"):(this.dragEdges.right||this.dragEdges.left)&&(n=this.target.querySelector("."+t)),n){var u=n.offsetHeight<=n.scrollHeight,f=n.offsetWidth<=n.scrollWidth,e=n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,o=n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;(u&&e&&(this.dragEdges.top||this.dragEdges.bottom)&&(n.scrollTop+=this.dragEdges.top?-66:30),f&&o&&(this.dragEdges.left||this.dragEdges.right))&&(this.getWidth()*(this.target.querySelector(".e-content-row:not(.e-swimlane-row)").childElementCount-1)>n.scrollLeft||this.dragEdges.left)&&(n.scrollLeft+=this.dragEdges.left?-30:30)}}else{var i=this.target.querySelector("."+t),r=this.dragObj.targetClone.parentElement,s=i.offsetHeight<=i.scrollHeight,h=i.offsetWidth<=i.scrollWidth,c=s&&i.scrollTop>=0&&i.scrollTop+i.offsetHeight<=i.scrollHeight,l=h&&i.scrollLeft>=0&&i.scrollLeft+i.offsetWidth<=i.scrollWidth;c&&(this.dragEdges.top||this.dragEdges.bottom)&&(i.scrollTop+=this.dragEdges.top?-30:30,r&&(r.scrollTop+=this.dragEdges.top?-30:30));l&&(this.dragEdges.left||this.dragEdges.right)&&(i.scrollLeft+=this.dragEdges.left?-30:30,r&&(r.scrollLeft+=this.dragEdges.left?-30:30));this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},i.prototype.getWidth=function(){return 80*window.innerWidth/100},i.prototype.unWireDragEvents=function(){this.dragObj.instance&&!this.dragObj.instance.isDestroyed&&this.dragObj.instance.destroy()},i.prototype.destroy=function(){this.unWireDragEvents()},i.prototype.getXYValue=function(n,t){var u,f=n.event,i=f.changedTouches,r;return(u="X"===t?i?i[0].clientX:f.clientX:i?i[0].clientY:f.clientY)||"focus"!==n.type||!n.target||(r=n.target.getBoundingClientRect(),u=r?"X"===t?r.left:r.top:null),Math.ceil(u)},i}(),r=function(){function t(n){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab","delete":"46",escape:"27",space:"32"};this.parent=n;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"});this.multiSelection=!1}return t.prototype.keyActionHandler=function(t){var i,r=this.parent.element.querySelectorAll(".e-card.e-selection").item(0),u,f;if(r||sf.base.closest(document.activeElement,".e-kanban"))switch(t.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":t.preventDefault();this.processUpDownArrow(t.action,r);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(t);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(t.action,r);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(t,r);break;case"escape":(document.activeElement.classList.contains("e-card")||document.activeElement.classList.contains(n))&&(document.activeElement.classList.contains("e-selection")?(sf.base.removeClass([document.activeElement],"e-selection"),document.activeElement.focus()):(u=sf.base.closest(document.activeElement,".e-content-cells"),f=[].slice.call(u.querySelectorAll(".e-card")),sf.base.removeClass(f,"e-selection"),u.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")));break;case"tab":case"shiftTab":i=sf.base.closest(document.activeElement,".e-content-cells");document.activeElement.classList.contains("e-card")&&(document.activeElement.nextElementSibling||"tab"!==t.action||t.preventDefault(),!document.activeElement.previousElementSibling&&i.querySelector("."+n)&&"tab"===t.action&&sf.base.addClass([i.querySelector("."+n)],"e-show-add-focus"));document.activeElement.classList.contains(n)&&(!i.querySelector(".e-card")&&"tab"===t.action||"shiftTab"===t.action)&&t.preventDefault();document.activeElement.classList.contains("e-kanban")&&(this.cardTabIndexRemove(),this.addRemoveTabIndex("Add"))}},t.prototype.processCardSelection=function(n,t){var u,i,r;t&&(sf.base.removeClass([t],"e-selection"),this.parent.disableAttributeSelection(t),u=this.parent.selectionArray,u.splice(u.indexOf(t.getAttribute("data-id")),1));this.cardTabIndexRemove();i=[].slice.call(this.parent.element.querySelectorAll(".e-card"));r="firstCardSelection"===n?i[0]:i[i.length-1];this.parent.cardSelection(r,!1,!1);this.addRemoveTabIndex("Remove");r.focus();[].slice.call(sf.base.closest(r,".e-content-cells").querySelectorAll(".e-card")).forEach(function(n){n.setAttribute("tabindex","0")})},t.prototype.processLeftRightArrow=function(n){document.activeElement.classList.contains("e-content-cells")&&("rightArrow"===n.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===n.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},t.prototype.processUpDownArrow=function(t,i){var f,r,u;"upArrow"===t&&document.activeElement?(document.activeElement.classList.contains("e-card")&&document.activeElement.previousElementSibling?document.activeElement.previousElementSibling.focus():document.activeElement.classList.contains(n)&&(document.activeElement.setAttribute("tabindex","-1"),sf.base.removeClass([document.activeElement],"e-show-add-focus"),f=sf.base.closest(document.activeElement,".e-content-cells"),f.querySelectorAll(".e-card").length>0&&[].slice.call(f.querySelectorAll(".e-card")).slice(-1)[0].focus()),this.removeSelection()):"downArrow"===t&&document.activeElement&&document.activeElement.classList.contains("e-card")&&(document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():sf.base.closest(document.activeElement,".e-card-container").nextElementSibling&&(r=sf.base.closest(document.activeElement,".e-card-container").nextElementSibling,r.setAttribute("tabindex","0"),sf.base.addClass([r],"e-show-add-focus"),r.focus()),this.removeSelection());("multiSelectionByUpArrow"===t||"multiSelectionByDownArrow"===t)&&i&&"Multiple"===this.parent.cardSettings.selectionType&&(u=void 0,(u="multiSelectionByUpArrow"===t?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.cardSelection(u,!1,!0),u.focus(),this.multiSelection=!0))},t.prototype.removeSelection=function(){if(this.multiSelection){var n=this.parent.getSelectedCards();n.length>0&&(sf.base.removeClass(n,"e-selection"),this.parent.disableAttributeSelection(n));this.multiSelection=!1}},t.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card")).forEach(function(n){n.setAttribute("tabindex","-1")});[].slice.call(this.parent.element.querySelectorAll("."+n)).forEach(function(n){n.setAttribute("tabindex","-1");sf.base.removeClass([n],"e-show-add-focus")})},t.prototype.processEnter=function(t,i){var r,u;"space"===t.action&&t.preventDefault();r=t.target;(r.classList.contains("e-header-icon")&&r.click(),(r.classList.contains("e-swimlane-row-expand")||r.classList.contains("e-swimlane-row-collapse"))&&r.click(),document.activeElement.classList.contains("e-card")&&this.parent.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(n)&&document.activeElement.focus(),r.classList.contains("e-content-cells"))&&(u=[].slice.call(r.querySelectorAll(".e-card")),this.addRemoveTabIndex("Remove"),u.length>0&&(r.querySelector(".e-card").focus(),u.forEach(function(n){n.setAttribute("tabindex","0")})),r.querySelector("."+n)&&(r.querySelector("."+n).setAttribute("tabindex","0"),r.querySelector("."+n).focus()));i===document.activeElement&&1===this.parent.element.querySelectorAll(".e-selection").length&&(this.parent.dotNetRef.invokeMethodAsync("OpenDialog",i.getAttribute("data-id")),i.focus())},t.prototype.addRemoveTabIndex=function(n){var t="Add"===n?"0":"-1",r=[].slice.call(this.parent.element.querySelectorAll(".e-header-icon")),i;r.length>0&&r.forEach(function(n){n.setAttribute("tabindex",t)});i=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row-expand"));i.length>0&&i.forEach(function(n){n.setAttribute("tabindex",t)});[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach(function(n){n.setAttribute("tabindex",t)})},t.prototype.destroy=function(){this.keyboardModule.destroy()},t}(),u=function(){function n(n){this.parent=n;this.tabHold=!1}return n.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+t);this.touchObj=new sf.base.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},n.prototype.tapHoldHandler=function(n){this.tabHold=!0;sf.base.closest(n.originalEvent.target,".e-card")&&"Multiple"===this.parent.cardSettings.selectionType&&(this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},n.prototype.renderMobilePopup=function(){var n,t;"Multiple"===this.parent.cardSettings.selectionType&&(n=sf.base.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-btn e-close e-flat e-round e-small"><span class="e-icons e-close-icon"><\/span><\/button><\/div><div class="e-popup-content"><\/div>'}),document.body.appendChild(n),sf.base.addClass([n],"e-device"),this.mobilePopup=new sf.popups.Popup(n,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)}),t=this.mobilePopup.element.querySelector(".e-close"),sf.base.EventHandler.add(t,"click",this.closeClick,this))},n.prototype.closeClick=function(){this.mobilePopup.hide()},n.prototype.popupClose=function(){this.popupDestroy()},n.prototype.getPopupContent=function(){var t,n=this.parent.getSelectedCards();return n.length>1?t="("+n.length+") Cards Selected":1===n.length&&(t=" "+n[0].getAttribute("data-id")),t},n.prototype.updatePopupContent=function(){if(this.mobilePopup){var n=this.getPopupContent();n?this.mobilePopup.element.querySelector(".e-popup-content").textContent=n:this.mobilePopup.hide()}},n.prototype.popupDestroy=function(){this.mobilePopup&&this.mobilePopup.element&&(this.mobilePopup.destroy(),sf.base.remove(this.mobilePopup.element),this.mobilePopup=null)},n.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy();this.touchObj=null;this.element=null},n.prototype.destroy=function(){this.popupDestroy();this.unWireTouchEvents();this.tabHold=!1},n}(),f=function(){function n(n,t,i){this.element=n;this.dotNetRef=i;this.updateContext(t);this.columnToggleArray=[];this.selectionArray=[];this.lastCardSelection=null;this.lastSelectionRow=null;this.lastCard=null;this.selectedCardsElement=[];this.selectedCardsData=[];this.hideColumnKeys=[];this.frozenOrder=0;this.scrollPosition={content:{},column:{}};this.initializeModules();this.scrollUiUpdate();this.wireEvents();this.element&&(this.element.blazor__instance=this)}return n.prototype.initializeModules=function(){(this.isAdaptive||sf.base.Browser.isTouch)&&(this.touchModule=new u(this));this.allowDragAndDrop&&(this.dragAndDropModule=new i(this));this.allowKeyboard&&(this.keyboardModule=new r(this));this.scrollPosition.content={left:0,top:0};this.initializeSwimlaneTree()},n.prototype.updateContext=function(n){sf.base.extend(this,this,n)},n.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},n.prototype.documentClick=function(n){if(n.target&&this.element.querySelector(".e-swimlane-resource")&&n.target.classList.contains("e-swimlane-overlay")&&this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")&&(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")),!sf.base.closest(n.target,".e-kanban")){var t=[].slice.call(this.element.querySelectorAll(".e-card.e-selection"));sf.base.removeClass(t,"e-selection");this.disableAttributeSelection(t)}},n.prototype.disableAttributeSelection=function(n){_instanceof(n,Element)?n.setAttribute("aria-selected","false"):n.forEach(function(n){n.setAttribute("aria-selected","false")})},n.prototype.wireDragEvent=function(){var t=this,n;this.allowDragAndDrop&&(n=[].slice.call(this.element.querySelectorAll(".e-content-cells.e-drag .e-card:not(e-draggable)")),sf.base.addClass(n,"e-droppable"),n.forEach(function(n){return t.dragAndDropModule.wireDragEvents(n)}))},n.prototype.initializeSwimlaneTree=function(){var n,i,r,u;this.swimlaneSettings.keyField&&this.isAdaptive&&(n=this.element.querySelector(".e-swimlane-header").offsetHeight,i=window.innerHeight-n,this.popupOverlay=this.element.querySelector(".e-swimlane-content .e-swimlane-overlay"),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-overlay"),{height:i+"px"}),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-content"),{top:n+"px"}),r=this.element.querySelector(".e-swimlane-resource"),sf.base.setStyleAttribute(r,{height:i+"px"}),u={targetType:"relative",actionOnScroll:"none",enableRtl:this.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.element.querySelector("."+t)},this.treePopup=new sf.popups.Popup(r,u))},n.prototype.cardSelection=function(n,t,i){var f=this,u,e,r,h;if(n&&(u=this.getSelectedCards(),"None"!==this.cardSettings.selectionType)){if(e=sf.base.closest(n,".e-content-row"),(sf.base.isNullOrUndefined(this.lastSelectionRow)?e.rowIndex:this.lastSelectionRow.rowIndex)!==e.rowIndex&&(t||i)&&"Multiple"===this.cardSettings.selectionType)return;if(0===u.length||t&&"Single"!==this.cardSettings.selectionType||(sf.base.removeClass(u,"e-selection"),this.disableAttributeSelection(u),u.forEach(function(n){f.selectionArray.splice(f.selectionArray.indexOf(n.getAttribute("data-id")),1);f.selectedCardsElement.splice(f.selectedCardsElement.indexOf(n),1)})),u.length>0&&i&&"Multiple"===this.cardSettings.selectionType){var c=[],o=void 0,l=void 0,s=void 0,a=[].slice.call(e.querySelectorAll(".e-card"));a.forEach(function(n){return c.push(n.getAttribute("data-id"))});var w=n.getAttribute("data-id"),b=this.lastCard.getAttribute("data-id"),v=l=c.indexOf(w),y=o=c.indexOf(b),p=v>y?"next":"prev";for("prev"===p&&(o=v,l=y),s=o;s<=l;s++)r=a[s],sf.base.addClass([r],"e-selection"),r.setAttribute("aria-selected","true"),r.setAttribute("tabindex","0"),this.selectionArray.push(r.getAttribute("data-id")),this.selectedCardsElement.push(r),this.lastCardSelection=r,"prev"===p&&(this.lastCardSelection=a[o])}else(sf.base.addClass([n],"e-selection"),n.setAttribute("aria-selected","true"),n.setAttribute("tabindex","0"),this.selectionArray.push(n.getAttribute("data-id")),this.selectedCardsElement.push(n),this.lastCard=this.lastCardSelection=n,this.lastSelectionRow=sf.base.closest(n,".e-content-row"),this.lastSelectionRow.previousElementSibling)&&(h=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse"),h&&h.classList.contains("e-swimlane-row-collapse")&&h.click())}},n.prototype.scrollUiUpdate=function(){var r=this,u=this.element.querySelector(".e-kanban-header"),n=this.element.querySelector("."+t),i=this.element.offsetHeight-u.offsetHeight,f;this.isAdaptive&&(i=window.innerHeight-(u.offsetHeight+25),f=this.element.querySelector(".e-swimlane-header"),f&&(i-=f.offsetHeight),[].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach(function(n){var t=n.querySelector(".e-card-container");t.classList.contains("e-multi-card-container")||(t.style.height=sf.base.formatUnit(i),sf.base.EventHandler.add(n,"touchmove",r.onAdaptiveScroll,r))}));"auto"!==this.height&&"100%"!==this.height&&(n.style.height=sf.base.formatUnit(i));[].slice.call(u.children).forEach(function(t){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=sf.base.formatUnit(n.clientWidth)));r.enableRtl?t.style.paddingLeft=sf.base.formatUnit(i):t.style.paddingRight=sf.base.formatUnit(i)})},n.prototype.onContentScroll=function(n){var t=n.target,i=this.element.querySelector(".e-kanban-header");[].slice.call(i.children).forEach(function(n){n.scrollLeft=t.scrollLeft});this.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop};!sf.base.isNullOrUndefined(this.swimlaneSettings.keyField)&&this.swimlaneSettings.enableFrozenRows&&this.frozenRows(n)},n.prototype.frozenRows=function(n){var s=this.element.querySelector(".e-swimlane-row"),v=this.element.querySelector(".e-kanban-header"),h=this.element.querySelector("."+t),f,o,i;if(sf.base.isNullOrUndefined(this.frozenSwimlaneRow))this.frozenSwimlaneRow=sf.base.createElement("div",{className:"e-frozen-swimlane-row"}),f=sf.base.createElement("div",{className:"e-frozen-row"}),this.frozenSwimlaneRow.appendChild(f),this.element.insertBefore(this.frozenSwimlaneRow,this.element.firstElementChild),s&&(f.appendChild(s.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons"),sf.base.setStyleAttribute(this.frozenSwimlaneRow,{height:sf.base.formatUnit(s.getBoundingClientRect().height),width:sf.base.formatUnit(h.querySelector(".e-swimlane").getBoundingClientRect().width),top:sf.base.formatUnit(v.getBoundingClientRect().height.toString())}),sf.base.setStyleAttribute(v,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),sf.base.setStyleAttribute(h,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}));else{var e=[].slice.call(this.element.querySelectorAll(".e-swimlane-row")),c=e[this.frozenOrder],r=e[this.frozenOrder-1],u=e[this.frozenOrder+1],y=void 0,l=void 0,a=void 0;c&&(y=c.getBoundingClientRect().top+c.getBoundingClientRect().height);r&&(l=r.getBoundingClientRect().top+r.getBoundingClientRect().height);u&&(a=u.getBoundingClientRect().top+u.getBoundingClientRect().height);o=h.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height;i=this.frozenSwimlaneRow.querySelector(".e-frozen-row");a&&o>=a&&this.frozenOrder<e.length-1?(i&&(sf.base.remove(i.querySelector(".e-swimlane-header")),u&&i.appendChild(u.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([i.querySelector(".e-icons")],"e-frozen-icons")),++this.frozenOrder):l&&o<y&&o>l&&this.frozenOrder>0&&(i&&(sf.base.remove(i.querySelector(".e-swimlane-header")),r&&i.appendChild(r.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([i.querySelector(".e-icons")],"e-frozen-icons")),--this.frozenOrder)}n&&0==n.target.scrollTop&&this.removeFrozenRows()},n.prototype.removeFrozenRows=function(){sf.base.remove(this.frozenSwimlaneRow);this.frozenSwimlaneRow=null;var i=this.element.querySelector(".e-kanban-header"),n=this.element.querySelector("."+t);sf.base.setStyleAttribute(i,{position:"",top:""});sf.base.setStyleAttribute(n,{position:"",top:""});this.scrollPosition.content={left:this.scrollPosition.content.left,top:0};n.scrollTop=0},n.prototype.onColumnScroll=function(n){var t=n.target,i;t.offsetParent&&(i=t.offsetParent.getAttribute("data-key"),this.scrollPosition.column[i]={left:t.scrollLeft,top:t.scrollTop})},n.prototype.onAdaptiveScroll=function(n){this.touchModule.tabHold&&!this.touchModule.mobilePopup&&n.preventDefault()},n.prototype.updateScrollPosition=function(){var i=this,n=this.element.querySelector("."+t);n&&n.scrollTo(this.scrollPosition.content.left,this.scrollPosition.content.top);[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach(function(n){if(n.offsetParent){var t=i.scrollPosition.column[n.offsetParent.getAttribute("data-key")];t&&n.scrollTo(t.left,t.top)}})},n.prototype.wireEvents=function(){var n=this,i=this.element.querySelector("."+t);sf.base.EventHandler.add(i,"scroll",this.onContentScroll,this);sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.documentClick,this);[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach(function(t){t.offsetParent&&(n.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0});sf.base.EventHandler.add(t,"scroll",n.onColumnScroll,n)});this.isAdaptive&&this.touchModule.wireTouchEvents();this.wireDragEvent()},n.prototype.unWireEvents=function(){var n=this,i=this.element.querySelector("."+t);(sf.base.EventHandler.remove(i,"scroll",this.onContentScroll),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.documentClick),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach(function(t){sf.base.EventHandler.remove(t,"scroll",n.onColumnScroll)}),this.isAdaptive)&&([].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach(function(t){sf.base.EventHandler.remove(t,"touchmove",n.onAdaptiveScroll)}),this.touchModule.unWireTouchEvents())},n.prototype.onCardClick=function(n,t){var i,r;n&&(n.classList.contains("e-selection")?(sf.base.removeClass([n],"e-selection"),this.disableAttributeSelection(n)):(i=t.ctrlKey,this.isAdaptive&&this.touchModule&&(i=this.touchModule.mobilePopup&&this.touchModule.tabHold||i),this.cardSelection(n,i,t.shiftKey)),this.isAdaptive&&this.touchModule&&this.touchModule.updatePopupContent(),r=sf.base.closest(n,".e-content-cells"),this.allowKeyboard&&([].slice.call(r.querySelectorAll(".e-card")).forEach(function(n){n.setAttribute("tabindex","0")}),this.keyboardModule.addRemoveTabIndex("Remove")))},n.prototype.onMenuClick=function(){this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")?(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")):(this.treePopup.show(),sf.base.addClass([this.popupOverlay],"e-enable"))},n.prototype.onListViewClick=function(){this.treePopup.hide();sf.base.removeClass([this.popupOverlay],"e-enable")},n.prototype.onPropertyChanged=function(n){for(var t=0,i=n;t<i.length;t++)switch(i[t]){case"width":this.setWidth();break;case"height":this.setHeight();break;case"enableRtl":this.enableRtl?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl")}},n.prototype.onSwimlaneProperties=function(n,t,i){this.swimlaneSettings.allowDragAndDrop=n;this.swimlaneSettings.keyField=t;this.swimlaneSettings.enableFrozenRows=i;this.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.removeFrozenRows()},n.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)})},n.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},n.prototype.destroy=function(){this.touchModule&&this.touchModule.destroy();this.dragAndDropModule&&this.dragAndDropModule.destroy();this.keyboardModule&&this.keyboardModule.destroy();this.unWireEvents()},n}();return{initialize:function(n,t,i){n&&new f(n,t,i)},isDevice:function(n){n.invokeMethodAsync("WindowWidth",70*window.innerWidth/100)},updateScrollPosition:function(n){n&&n.blazor__instance&&n.blazor__instance.updateScrollPosition()},wireDragEvents:function(n){n&&n.blazor__instance&&n.blazor__instance.wireDragEvent()},propertyChanged:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.onPropertyChanged(t)},swimlaneProperties:function(n,t,i,r){sf.base.isNullOrUndefined(n)||n.blazor__instance.onSwimlaneProperties(t,i,r)},cardClick:function(n,t,i){n.blazor__instance.onCardClick(t,i)},menuClick:function(n){n.blazor__instance.onMenuClick()},listViewClick:function(n){n.blazor__instance.onListViewClick()},getTargetDetails:function(n,t,i,r,u){var e,h,o,v,c,l;if(n&&n.blazor__instance){var s=document.elementFromPoint(t,i),f=void 0,a=null;if("tooltip"===u)return r?(f=sf.base.closest(s,".e-card"),a=JSON.stringify(f.getAttribute("data-id"))):s.classList.contains("e-tooltip-text")&&(a=JSON.stringify(s.innerHTML)),a;if(f=sf.base.closest(s,".e-content-cells"))return e={},e.columnKeyField=f.getAttribute("data-key"),f.parentElement.previousElementSibling&&(e.swimlaneKeyField=f.parentElement.previousElementSibling.getAttribute("data-key")),h=sf.base.closest(s,".e-card"),h?(o=[].slice.call(f.querySelectorAll(".e-card")),e.index=o.indexOf(h),e.previousCardId=h.previousElementSibling?h.previousElementSibling.getAttribute("data-id"):null):(v=f,c=parseInt(getComputedStyle(n.querySelector(".e-card")).marginBottom.replace("px","")),i-f.getBoundingClientRect().top>=c&&(v=document.elementFromPoint(t,i-c)),l=sf.base.closest(v,".e-card"),l?(o=[].slice.call(f.querySelectorAll(".e-card")),e.index=o.indexOf(l),e.previousCardId=l.getAttribute("data-id")):(o=[].slice.call(f.querySelectorAll(".e-card")),e.previousCardId=i-f.getBoundingClientRect().top>=c&&o.length>0?o[o.length-1].getAttribute("data-id"):null)),JSON.stringify(e)}return null},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.destroy()}}}()},"./modules/sf-lineargauge.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.LinearGauge=function(){"use strict";var n=function(){function n(n,t,i,r){this.id=n;this.element=t;this.dotNetRef=r;this.options=i;this.element.blazor__instance=this}return n.prototype.render=function(){this.wireEvents()},n.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this);sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this);sf.base.EventHandler.add(this.element,"mouseleave",this.gaugeOnMouseLeave,this);window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},n.prototype.gaugeOnResize=function(){var n=document.getElementById(this.element.id),t,i;null!=n&&(t=n.clientWidth||n.offsetWidth,i=n.clientHeight||n.offsetHeight,this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",t,i))},n.prototype.gaugeOnMouseClick=function(n){var t=n.target.id;(t.indexOf("Bar")>-1||t.indexOf("Marker")>-1)&&(this.pointerCheck=!1)},n.prototype.gaugeOnMouseLeave=function(n){this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",n.x,n.y)},n.prototype.gaugeOnMouseDown=function(n){var t=n.target.id,i=0,r=0,u,f;("touchstart"===n.type?(n.preventDefault(),i=n.touches[0].clientX,r=n.touches[0].clientY):(i=n.pageX,r=n.pageY),t.indexOf("Bar")>-1||t.indexOf("Marker")>-1)?(this.pointerCheck=!0,u=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),f=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10),this.dotNetRef.invokeMethodAsync("TriggerDragStart",u,f)):this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",i,r)},n.prototype.gaugeOnMouseMove=function(n){var t=n.target.id,s=0,h=0,c;if("touchmove"===n.type?(s=n.touches[0].clientX,h=n.touches[0].clientY):(s=n.clientX,h=n.clientY),t.indexOf("Bar")>-1&&this.pointerCheck||t.indexOf("Marker")>-1&&this.pointerCheck){var e=this.svgClient(t),o=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),l=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);this.dotNetRef.invokeMethodAsync("TriggerDragMove",t,o,l,s-e.left,h-e.top)}if(t.indexOf("Bar")>-1||t.indexOf("Marker")>-1||t.indexOf("Range")>-1){e=this.svgClient(t);o=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10);l=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);var a=t.split("_")[0],i=document.getElementById(a).getBoundingClientRect(),y={Bottom:i.bottom,Height:i.height,Left:i.left,Right:i.right,Top:i.top,Width:i.width,X:i.x,Y:i.y},r=document.getElementById(a+"_AxisLine_"+o).getBoundingClientRect(),p={Bottom:r.bottom,Height:r.height,Left:r.left,Right:r.right,Top:r.top,Width:r.width,X:r.x,Y:r.y},u=document.getElementById(a+"_MajorTicksLine_"+o).getBoundingClientRect(),w={Bottom:u.bottom,Height:u.height,Left:u.left,Right:u.right,Top:u.top,Width:u.width,X:u.x,Y:u.y},f=document.getElementById(t).getBoundingClientRect(),b={Bottom:f.bottom,Height:f.height,Left:f.left,Right:f.right,Top:f.top,Width:f.width,X:f.x,Y:f.y},v=t.split("_")[0];null!=(c=document.getElementById(v+"_Tooltip"))&&(c.style.visibility="visible");this.dotNetRef.invokeMethodAsync("TriggerTooltip",t,o,l,s-e.left,h-e.top,y,p,w,b)}else v=t.split("_")[0],null!=(c=document.getElementById(v+"_Tooltip"))&&(c.style.visibility="hidden")},n.prototype.gaugeOnMouseEnd=function(n){var t=n.target.id,i=0,r=0,u;if("touchend"===n.type?(u=n,i=u.changedTouches[0].pageX,r=u.changedTouches[0].pageY):(i=n.clientX,r=n.clientY),this.pointerCheck=!1,t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!1;var f=this.svgClient(t),e=t.split("_AxisIndex_")[0].split("_")[0],o=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),s=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);this.dotNetRef.invokeMethodAsync("TriggerDragEnd",o,s,e,t,i-f.left,r-f.top)}else this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,r)},n.prototype.svgClient=function(n){return document.getElementById(n.split("_AxisIndex_")[0]+"_svg").getBoundingClientRect()},n}();return{initialize:function(t,i,r,u){return new n(t.id,t,i,r).render(),sf.base.isNullOrUndefined(u)||t.setAttribute("style",u),this.getElementSize(t)},getElementSize:function(n){var i,r,t;return null!=n&&(t=n.getBoundingClientRect(),i=t.width,r=t.height),{width:i,height:r,isIE:sf.base.Browser.isIE}},setPathAttribute:function(n,t,i,r,u){var f=document.getElementById(n);""===t?f.setAttribute("d",i):(f.setAttribute("x",r.toString()),f.setAttribute("y",u.toString()))},getElementBounds:function(n){var i=document.getElementById(n),t;return i?(t=i.getBoundingClientRect(),{width:t.width,height:t.height,top:t.top,bottom:t.bottom,left:t.left,right:t.right}):null}}}()},"./modules/sf-listbox.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.ListBox=function(){"use strict";var n="e-list-item",t=function(){function t(n,t,i,r){this.element=n;this.dotnetRef=r;this.allowDragAndDrop=i;this.element.blazor__instance=this;this.scope=t;sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this);i&&this.initializeDraggable()}return t.prototype.initializeDraggable=function(){var t=this,i,r;this.allowDragAndDrop&&(i=sf.base.select(".e-ul",this.element),r=new sf.lists.Sortable(i,{scope:this.scope,itemClass:n,beforeDragStart:this.triggerBeforeDragStart.bind(this),dragStart:this.triggerDragStart.bind(this),beforeDrop:this.dragEnd.bind(this),placeHolder:function(){return sf.base.createElement("span",{className:"e-placeholder"})},helper:function(i){var r=t.element.cloneNode(),e=i.sender.cloneNode(!0),f,u;return r.appendChild(e),f=sf.base.select("."+n,t.element),r.style.width=f.offsetWidth+"px",r.style.height=f.offsetHeight+"px",u=[].slice.call(sf.base.selectAll("."+n+".e-selected",t.element)),u.length&&u.length>1&&u.indexOf(i.sender)>-1&&e.appendChild(sf.base.createElement("span",{className:"e-list-badge",innerHTML:u.length.toString()})),r.style.zIndex=sf.popups.getZindexPartial(t.element).toString(),r}}),this.updateDraggable(r,this.allowDragAndDrop))},t.prototype.triggerBeforeDragStart=function(n){n.cancel=n.target.classList.contains("e-drag-prevent")},t.prototype.triggerDragStart=function(n){n.bindEvents(n.dragElement)},t.prototype.dragEnd=function(n){var r,u,t,f=!1,i=!1,e=!1;t=n.target.parentElement.parentElement;"UL"==n.target.tagName&&n.target.className.indexOf("e-list-parent")>-1&&(t=n.target.parentElement);t.blazor__instance||(t=t.parentElement);n.cancel=!0;t.blazor__instance?(r=t.blazor__instance.scope,u=t.blazor__instance.dotnetRef,i=this.scope===r,this.element===t&&(e=!0,i=!1)):f=!0;this.dotnetRef.invokeMethodAsync("DragEndAsync",f,n.droppedElement.getAttribute("data-value"),e,i,n.previousIndex,n.currentIndex,u)},t.prototype.keyDownHandler=function(t){var f=t.target,u,r,i;if(38===t.keyCode||40===t.keyCode)if(t.preventDefault(),f.classList.contains("e-listbox-container"))u=sf.base.select("."+n,this.element),u&&u.focus();else{if(r=[].slice.call(sf.base.selectAll("."+n,this.element)),i=r.indexOf(f),i<0)return;if((i=38===t.keyCode?i-1:i+1)<0||i>r.length-1)return;r[i].focus()}else 65===t.keyCode&&t.ctrlKey&&t.preventDefault()},t.prototype.updateDraggable=function(t,i){if(t){var r=sf.base.getComponent(t.element,sf.base.Draggable);r.abort=i?"":"."+n}},t.prototype.destroyDraggable=function(){var n=sf.base.getComponent(sf.base.select(".e-ul",this.element),"sortable");sf.base.isNullOrUndefined(n)||(this.updateDraggable(n,this.allowDragAndDrop),n.destroy())},t.prototype.destroy=function(){this.destroyDraggable();sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},t.prototype.onPropertyChanged=function(n){this.allowDragAndDrop=n;n?this.initializeDraggable():this.destroyDraggable()},t.prototype.getScopedElement=function(n){return document.querySelector("#"+n).blazor__instance.dotnetRef},t}();return{initialize:function(n,i,r,u){sf.base.isNullOrUndefined(n)||new t(n,i,r,u)},destroy:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy()},onPropertyChanged:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.onPropertyChanged(t)},getScopedListBox:function(n,t){return n.blazor__instance.getScopedElement(t)}}}()},"./modules/sf-listview.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.ListView=function(){"use strict";var f={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},e={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},n="e-focused",i="e-list-item",t="e-has-child",u="e-list-header",r="e-disabled",o=function(){function o(n,t,i,r,u){this.dataSourceLevel=["defaultData_Key"];this.currentDataSourceKey="defaultData_Key";this.isWindow=!1;this.liDifference=0;this.liHeight=0;this.virtualListDifference=0;this.isCheckAll=!1;this.element=n;this.dotNetRef=t;this.showCheckBox=i.ShowCheckBox;this.showHeader=i.ShowHeader;this.enable=i.Enabled;this.currentUlElement=n.querySelector("ul");this.enableVirtualization=i.EnableVirtualization;this.isWindow=!i.Height;this.enableSelectEvent=r;this.height=i.Height;this.headerTitleInfo=[i.HeaderTitle];this.selectedItems={defaultData_Key:i.SelectedElementIdInfo};this.enableRtl=i.EnableRtl;this.animation=i.Animation;this.isTemplate=i.Template;this.focusId=[];this.element.blazor__instance=this;this.datasource=u}return o.prototype.initialize=function(){if(this.enableVirtualization){if(this.isWindow)this.dotNetRef.invokeMethodAsync("GetComponenetHeight",window.innerHeight);else if(-1!==this.height.indexOf("%")){var n=this.element.parentElement.getBoundingClientRect().height;this.dotNetRef.invokeMethodAsync("GetComponenetHeight",n/100*parseFloat(this.height))}this.updateLiElementHeight()}this.headerElement=this.element.querySelector(".e-headertext");this.animationObject=new sf.base.Animation(this.animateOptions);this.wireEvents()},o.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this);sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this);sf.base.EventHandler.add(this.element,"click",this.clickHandler,this);sf.base.EventHandler.add(this.element,"focusout",this.removeFocus,this);this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)});this.enableVirtualization?(sf.base.EventHandler.add(this.element,"scroll",this.scrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.add(this.element,"mouseover",this.mouseHoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandler,this))},o.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler);sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler);sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler);sf.base.EventHandler.remove(this.element,"click",this.clickHandler);sf.base.EventHandler.remove(this.element,"focusout",this.removeFocus);this.enableVirtualization?(sf.base.EventHandler.remove(this.element,"scroll",this.scrollHandler),this.isWindow&&window.removeEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.remove(this.element,"mouseover",this.mouseHoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseOutHandler));this.touchModule.destroy()},o.prototype.swipeActionHandler=function(n){"Right"===n.swipeDirection&&n.velocity>.5&&"touchend"===n.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back())},o.prototype.showHideItem=function(n,t){var i=this.getLi(n);i&&(i.style.display=t)},o.prototype.enableState=function(n,t){var i=this.getLi(n);i&&(t?i.classList.remove("e-disabled"):i.classList.add("e-disabled"))},o.prototype.getLi=function(n){var t;return this.element&&(t=this.element.querySelector('[data-uid="'+n.id+'"]')),t},o.prototype.scrollHandler=function(t){var i,f=this.isWindow?t.target.documentElement.scrollTop:t.target.scrollTop,r,u;(this.liHeight||this.updateLiElementHeight(),(i=Math.round(f/this.liHeight))-this.liDifference>=this.virtualListDifference||i-this.liDifference<=-1)&&(r=this.currentUlElement.querySelector("."+n),r&&(this.focusedElementId=r.getAttribute("data-uid")),u=this.element.querySelector(".e-list-virtualcontainer"),u&&(u.style.top=(i-1)*this.liHeight<0?"0px":(i-2)*this.liHeight+"px",this.liDifference=i,this.dotNetRef.invokeMethodAsync("VirtualScrolling",i-2)))},o.prototype.preventSelection=function(n){var t=this.mouseEvent.target,r=sf.base.closest(t.parentNode,"."+i);n?this.dataSourceLevel.length>1&&this.dataSourceLevel.pop():this.performSelection(r)},o.prototype.performSelection=function(i){null!==i&&!i.classList.contains(r)&&this.enable&&(this.removeFocus(),this.focusId=[],this.addFocusId(i.getAttribute("data-uid")),this.showCheckBox?this.mouseEvent.target.classList.contains("e-frame")?this.checkUncheckItem(i):i.classList.contains(t)?(this.removeHover(),this.removeFocus(),this.setSelectLI(i,this.mouseEvent)):this.checkUncheckItem(i):(this.currentUlElement.querySelector("."+n)&&this.currentUlElement.querySelector("."+n).classList.remove(n),i.classList.contains(t)?this.setSelectLI(i,this.mouseEvent):i.classList.contains(n)||(i.classList.add(n),this.selectedItems[this.currentDataSourceKey][0]=i.getAttribute("data-uid"))))},o.prototype.updateLiElementHeight=function(){var n=this.element.querySelector(".e-list-virtualcontainer"),t,i;n&&(this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul")),t=n.children[0],t&&(this.liHeight=t.getBoundingClientRect().height,this.liHeight)&&(this.enableVirtualization&&(i=n.getBoundingClientRect().height,n.parentElement.style.height=i+"px"),this.dotNetRef.invokeMethodAsync("UpdateLiElementHeight",this.liHeight)))},o.prototype.updateElementDifference=function(n){this.virtualListDifference=n;this.enableVirtualization&&this.updateLiElementHeight()},o.prototype.selectItem=function(n){var t=this.getLi(n);this.showCheckBox?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):(sf.base.isNullOrUndefined(t)?this.removeFocus():this.setSelectLI(t,null),this.selectedItems[this.currentDataSourceKey][0]=t.getAttribute("data-uid"))},o.prototype.clickHandler=function(n){var f,e,u,o;this.currentUlElement&&!this.element.classList.contains("e-disabled")&&(f=n.target,e=f.classList,(this.mouseEvent=n,e.contains("e-icon-back")||e.contains("e-headertext"))?this.back():(u=sf.base.closest(f.parentNode,"."+i)?sf.base.closest(f.parentNode,"."+i):sf.base.closest(f,"."+i),(this.enableSelectEvent||this.performSelection(u),null!==u&&!u.classList.contains(r)&&this.enable)&&(u.classList.contains(t)&&(o=u.getAttribute("data-uid"),-1===this.dataSourceLevel.indexOf(o)&&this.dataSourceLevel.push(o)),this.enableSelectEvent&&this.getSelectEventData(u,n))))},o.prototype.checkUncheckItem=function(t){t.classList.add(n);t.querySelector(".e-check")?this.uncheckItem(t):this.setChecked(t,t.querySelector(".e-checkbox-wrapper"));this.dotNetRef.invokeMethodAsync("UpdateData",!sf.base.isNullOrUndefined(t.querySelector(".e-check")),t.getAttribute("data-uid"))},o.prototype.back=function(){var f;if(this.dataSourceLevel.length>1){for(var i=this.element.querySelectorAll("ul"),r=this.element.querySelector("."+u),t=0;t<i.length;t++)this.dataSourceLevel.length>2?i[t].getAttribute("pid")===this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.currentUlElement,i[t],!0),this.currentUlElement=i[t]):i[t].style.display="none":null===i[t].getAttribute("pid")?(this.switchView(this.currentUlElement,i[t],!0),this.currentUlElement=i[t]):i[t].style.display="none";(this.dataSourceLevel.pop(),this.showCheckBox)||this.currentUlElement.querySelectorAll("."+n)[0].setAttribute("aria-selected","false");this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]));this.currentDataSourceKey=this.dataSourceLevel[this.dataSourceLevel.length-1];1===this.dataSourceLevel.length&&r&&(r.children[0].style.display="none");f={IsInteracted:!(!event&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerBackEvent",f)}},o.prototype.setHoverLI=function(n){this.element.classList.contains(r)||n.classList.contains(r)||n.classList.add("e-hover")},o.prototype.mouseHoverHandler=function(n){var t=sf.base.closest(n.target.parentNode,"."+i);t&&this.setHoverLI(t)},o.prototype.mouseOutHandler=function(){this.removeHover()},o.prototype.removeHover=function(){var n=this.element.querySelector(".e-hover");n&&n.classList.remove("e-hover")},o.prototype.removeFocus=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var t=0,i=this.currentUlElement.querySelectorAll("."+n);t<i.length;t++)i[t].classList.remove(n);this.isRestrictFocus=void 0},o.prototype.isValidLI=function(n){return n&&n.classList.contains(i)&&!n.classList.contains("e-list-group-item")&&!n.classList.contains(r)},o.prototype.setSelectLI=function(i){if(this.enable&&this.isValidLI(i)&&!i.classList.contains(n)){var r=this.currentUlElement.querySelector("."+n);r&&this.removeFocusId(r.getAttribute("data-uid"));this.removeFocus();this.addAriaAttribute(!0,i);this.removeHover();i.classList.contains(t)&&this.renderSubList(i)}},o.prototype.addAriaAttribute=function(i,r){i?(this.isCheckAll||r.classList.add(n),this.addFocusId(r.getAttribute("data-uid"))):this.showCheckBox||i||!r.classList.contains(n)||(r.classList.remove(n),this.focusId.indexOf(r.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(r.getAttribute("data-uid")),1));(this.showCheckBox||r.classList.contains(t))&&r.setAttribute("aria-selected",i.toString())},o.prototype.renderSubList=function(i){var f=i,r=i.getAttribute("data-uid"),e=this.element.querySelector("."+u),o;(i.classList.remove(n),i.classList.add(n),this.showHeader&&e&&(e.children[0].style.display=null),f.classList.contains(t)&&r)&&(this.element.querySelector("[pid='"+r+"']")?this.renderChildList(r,[r]):(o={ElementId:r,Key:this.currentDataSourceKey},this.dotNetRef.invokeMethodAsync("ListChildDataSource",o)),this.isTemplate||(this.headerTitleInfo.push(f.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),this.dataSourceLevel.push(r),this.currentDataSourceKey=r)},o.prototype.renderChildList=function(n,t){var i=this.element.querySelectorAll("ul"),r,u,f;for(i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",n),r=0;r<i.length;r++)if(i[r].getAttribute("pid")===n){if(this.switchView(this.currentUlElement,i[r],!1),this.currentUlElement=i[r],u=i[r].querySelectorAll(".e-list-item"),u[0].getAttribute("aria-level")!==r.toString())for(f=0;f<u.length;f++)u[f].setAttribute("aria-level",r.toString());t&&(this.selectedItems[n]=t)}},o.prototype.mouseDownHandler=function(){this.isRestrictFocus=null==this.isRestrictFocus||this.isRestrictFocus},o.prototype.focusHandler=function(n){this.isRestrictFocus?this.isRestrictFocus=!1:sf.base.isNullOrUndefined(this.focusId)||0==this.focusId.length?(this.isRootFocus=!0,this.arrowKeyHandler(n),this.isRootFocus=!1):this.updateFocusElement(n)},o.prototype.keyActionHandler=function(n){switch(n.keyCode){case 36:this.homeKeyHandler(n);break;case 35:this.homeKeyHandler(n,!0);break;case 40:this.arrowKeyHandler(n);break;case 38:this.arrowKeyHandler(n,!0);break;case 39:this.arrowKeyHandler(n);break;case 37:this.arrowKeyHandler(n,!0);break;case 13:this.enterKeyHandler(n);break;case 8:this.showCheckBox&&this.currentDataSourceKey&&this.uncheckAllItems();this.back();break;case 32:this.spaceKeyHandler(n)}},o.prototype.addFocusId=function(n){this.focusId.indexOf(n)<0&&this.focusId.push(n)},o.prototype.removeFocusId=function(n){this.focusId.indexOf(n)>=0&&this.focusId.splice(this.focusId.indexOf(n),1)},o.prototype.updateFocusElement=function(t){var u=this.currentUlElement.querySelector("."+n),r,i;for(u&&(u.classList.remove(n),this.focusId.indexOf(u.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(u.getAttribute("data-uid")),1)),r=this.currentUlElement.children,i=0;i<r.length;i++)this.focusId.indexOf(r[i].getAttribute("data-uid"))>=0&&(r[i].classList.add(n),this.addFocusId(r[i].getAttribute("data-uid")),this.addAriaAttribute(!0,r[i]),this.element.setAttribute("aria-activedescendant",r[i].id.toString()),this.enableSelectEvent&&this.getSelectEventData(r[i],t))},o.prototype.homeKeyHandler=function(t,i){var f,r,u;t.preventDefault();f=this.currentUlElement.querySelector("."+n);f&&(f.classList.remove(n),this.removeFocusId(f.getAttribute("data-uid")));r=i?this.currentUlElement.children.length-1:0;r=this.currentUlElement.children[r].classList.contains("e-list-group-item")&&this.currentUlElement.children.length>1?r+1:r;u=this.currentUlElement.children[r];this.addAriaAttribute(!0,u);u.classList.add(n);this.addFocusId(u.getAttribute("data-uid"));this.currentUlElement.children[r]?this.element.setAttribute("aria-activedescendant",this.currentUlElement.children[r].id.toString()):this.element.removeAttribute("aria-activedescendant");this.enableSelectEvent&&this.getSelectEventData(u,t)},o.prototype.onArrowKeyDown=function(r,u){var f,e;return!sf.base.isNullOrUndefined(this.currentUlElement.querySelector("."+t))||this.showCheckBox?((e=this.currentUlElement.querySelector("."+n)||this.currentUlElement.querySelector("."+n))&&this.removeFocusId(e.getAttribute("data-uid")),f=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+i),e,u),sf.base.isNullOrUndefined(f)||(e&&(e.classList.remove(n),this.showCheckBox||e.classList.remove(n),this.removeFocusId(e.getAttribute("data-uid"))),f.classList.contains(t)||this.showCheckBox?f.classList.add(n):this.setSelectLI(f,r))):(e=this.currentUlElement.querySelector("."+n),f=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+i),e,u),this.setSelectLI(f,r)),f?this.element.setAttribute("aria-activedescendant",f.id.toString()):this.element.removeAttribute("aria-activedescendant"),f},o.prototype.getSiblingLI=function(n,t,i){var r=Array.prototype.slice.call(n),u=r.indexOf(t);return i?r[u-1]:r[u+1]},o.prototype.arrowKeyHandler=function(n,t){var i,u,e,f;if(this.isRootFocus||n.preventDefault(),this.currentUlElement){i=this.onArrowKeyDown(n,t);i&&this.addFocusId(i.getAttribute("data-uid"));var o=this.element.getBoundingClientRect().top,s=this.element.getBoundingClientRect().height,r=void 0;i&&(u=i.getBoundingClientRect().top,e=i.getBoundingClientRect().height,t?(r=this.isWindow?u:u-o)<0&&(this.isWindow?window.scroll(0,pageYOffset+r):this.element.scrollTop=this.element.scrollTop+r):(f=this.isWindow?window.innerHeight:s,(r=this.isWindow?u+e:u-o+e)>f&&(this.isWindow?window.scroll(0,pageYOffset+(r-f)):this.element.scrollTop=this.element.scrollTop+(r-f))))}},o.prototype.enterKeyHandler=function(i){if(this.currentUlElement){var r=this.currentUlElement.querySelector("."+n);this.currentUlElement.querySelector("."+t)&&r?(r.classList.remove(n),this.showCheckBox&&(this.removeFocus(),this.removeHover()),this.setSelectLI(r,i)):sf.base.isNullOrUndefined(r)||this.spaceKeyHandler(i)}},o.prototype.checkAllItems=function(){this.isCheckAll=!0;this.updateCheckBoxState(!0);this.isCheckAll=!1},o.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},o.prototype.updateCheckBoxState=function(n){var i;if(this.showCheckBox)for(var r=this.currentUlElement.querySelectorAll("li"),u=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").childElementCount:this.currentUlElement.childElementCount,t=0;t<u;t++)i=r[t].querySelector(".e-frame"),i&&(n&&!i.classList.contains("e-check")?this.checkItem(r[t]):!n&&i.classList.contains("e-check")&&this.uncheckItem(r[t]))},o.prototype.checkItem=function(n){this.toggleCheckBox(n,!0)},o.prototype.getCheckData=function(n,t,i){var e=n.id,r,u,f;if(i!==n.id||sf.base.isNullOrUndefined(n.id))for(i=i.toLowerCase(),r=0,u=Object.entries(n);r<u.length;r++){var o=u[r],s=""+o[0],h=""+o[1];(s=s.toLowerCase())===i&&(e=h)}f=this.currentUlElement.querySelector("[data-uid='"+e+"']");t?this.checkItem(f):this.uncheckItem(f);this.removeFocus()},o.prototype.spaceKeyHandler=function(t){if(t.preventDefault(),this.enable&&this.showCheckBox&&this.currentUlElement){var i=this.currentUlElement.querySelector("."+n);!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(i.querySelector(".e-check"))?this.setChecked(i,i.querySelector(".e-checkbox-wrapper")):this.uncheckItem(i);this.enableSelectEvent&&this.getSelectEventData(i,t)}},o.prototype.setChecked=function(t,i){this.removeFocus();t.classList.add(n);this.addAriaAttribute(!0,t);i&&(i.querySelector(".e-frame").classList.add("e-check"),i.setAttribute("aria-checked","true"));this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(t.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(t.getAttribute("data-uid"))},o.prototype.toggleCheckBox=function(n,t){var r,i;this.showCheckBox&&(r=n,sf.base.isNullOrUndefined(r)||(i=r.querySelector(".e-frame"),this.addAriaAttribute(t,r),sf.base.isNullOrUndefined(i)||(t?i.classList.add("e-check"):i.classList.remove("e-check"),i.parentElement.setAttribute("aria-checked",t?"true":"false"))))},o.prototype.uncheckItem=function(n){n&&(this.selectedItems[this.currentDataSourceKey]&&-1!==this.selectedItems[this.currentDataSourceKey].indexOf(n.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(n.getAttribute("data-uid")),1),this.toggleCheckBox(n,!1))},o.prototype.addCheckClass=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var i=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").children:this.currentUlElement.children,r=this.selectedItems[this.currentDataSourceKey],t=0;t<i.length;t++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===i[t].getAttribute("data-uid")?i[t].classList.add(n):i[t].classList.remove(n)),r.length>0&&(-1!==r.indexOf(i[t].getAttribute("data-uid"))?this.toggleCheckBox(i[t],!0):this.toggleCheckBox(i[t],!1))):r[0]===i[t].getAttribute("data-uid")?i[t].classList.add(n):i[t].classList.remove(n);for(t=0;t<i.length;t++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===i[t].getAttribute("data-uid")?i[t].classList.add(n):i[t].classList.remove(n)),r.length>0&&(-1!==r.indexOf(i[t].getAttribute("data-uid"))?this.toggleCheckBox(i[t],!0):this.toggleCheckBox(i[t],!1))):r&&r[0]===i[t].getAttribute("data-uid")?i[t].classList.add(n):i[t].classList.remove(n)},o.prototype.getSelectedItems=function(){var r=this.currentUlElement.querySelectorAll(".e-check"),n,t;for(this.selectedItems[this.currentDataSourceKey]=[],n=0;n<r.length;n++)t=sf.base.closest(r[n],"."+i),this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(t.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(t.getAttribute("data-uid"));return{ElementId:this.selectedItems[this.currentDataSourceKey],Key:this.currentDataSourceKey}},o.prototype.getSelectEventData=function(n,i){if(n){var r=!!n.querySelector(".e-check"),u={ElementId:n.getAttribute("data-uid"),IsChecked:r,Key:n.classList.contains(t)&&!i.target.classList.contains("e-frame")?this.dataSourceLevel[this.dataSourceLevel.length-2]:this.currentDataSourceKey,IsInteracted:!(!i&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerClickEvent",u)}},o.prototype.switchView=function(n,t,i){var u=this;if(n&&t){var s=n.style.position,h="hidden"!==this.element.style.overflow?this.element.style.overflow:"",r=void 0,o=this.animation.duration;(n.style.position="absolute",n.classList.add("e-view"),this.animation.effect)?r=this.enableRtl?e[this.animation.effect]:f[this.animation.effect]:(r=f.SlideLeft,i=this.enableRtl,o=0);this.element.style.overflow="hidden";this.animationObject.animate(n,{name:i?r[0]:r[1],duration:o,timingFunction:this.animation.easing,end:function(){n.style.display="none";u.element.style.overflow=h;n.style.position=s;n.classList.remove("e-view")}});t.style.display="";this.animationObject.animate(t,{name:i?r[2]:r[3],duration:o,timingFunction:this.animation.easing,end:function(){u.dotNetRef.invokeMethodAsync("TriggerActionComplete",u.datasource)}});this.currentUlElement=t}},o.prototype.setAnimation=function(n){this.animation=n},o.prototype.setSelectedItems=function(n){var i=this.element.querySelector("."+u),t;sf.base.isNullOrUndefined(n)||(this.selectedItems={defaultData_Key:n});this.currentUlElement=n.length>0?this.element.querySelector('[data-uid="'+n+'"]').closest("ul"):this.element.querySelector("ul");t=this.element.querySelector('[data-uid="'+n+'"]').classList.contains("e-has-child");t?(this.dataSourceLevel=["defaultData_Key"],this.currentUlElement.style.removeProperty("display"),this.addCheckClass(),this.currentDataSourceKey="defaultData_Key"):this.selectedItems[this.currentDataSourceKey]=[this.currentDataSourceKey];this.showCheckBox&&this.removeFocus();this.headerElement&&t&&(this.headerTitleInfo=this.headerTitleInfo.splice(0,1),this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]);1===this.dataSourceLevel.length&&i&&t&&(i.children[0].style.display="none")},o.prototype.updateHeaderTitle=function(n){this.headerTitleInfo[0]=n;this.headerElement&&(this.headerElement.innerText=n)},o.prototype.destroy=function(){this.element.style.display="none";this.unWireEvents()},o}();return{initialize:function(n,t,i,r,u,f){this.isValid(n)&&(new o(n,t,i,r,f),n.blazor__instance.initialize(),n.blazor__instance.updateElementDifference(u))},renderChildList:function(n,t,i){this.isValid(n)&&n.blazor__instance.renderChildList(t,i)},addActiveClass:function(n){this.isValid(n)&&n.blazor__instance.addCheckClass()},showHideItem:function(n,t,i){this.isValid(n)&&n.blazor__instance.showHideItem(t,i)},enableState:function(n,t,i){this.isValid(n)&&n.blazor__instance.enableState(t,i)},back:function(n){this.isValid(n)&&n.blazor__instance.back()},checkAllItems:function(n){this.isValid(n)&&n.blazor__instance.checkAllItems()},uncheckAllItems:function(n){this.isValid(n)&&n.blazor__instance.uncheckAllItems()},getCheckData:function(n,t,i,r){if(this.isValid(n)&&null!=t)for(var u=0;u<t.length;u++)n.blazor__instance.getCheckData(t[u],i,r)},selectItem:function(n,t){if(n&&null!=t)for(var i=0;i<t.length;i++)n.blazor__instance.selectItem(t[i])},preventSelection:function(n,t){n.blazor__instance.preventSelection(t)},updateLiElementHeight:function(n){this.isValid(n)&&n.blazor__instance.updateLiElementHeight()},getCheckedItems:function(n){return this.isValid(n)?n.blazor__instance.getSelectedItems():{}},setAnimation:function(n,t){this.isValid(n)&&n.blazor__instance.setAnimation(t)},setCheckedItems:function(n,t){this.isValid(n)&&n.blazor__instance.setSelectedItems(t)},updateHeaderTitle:function(n,t){this.isValid(n)&&n.blazor__instance.updateHeaderTitle(t)},destroy:function(n){this.isValid(n)&&n.blazor__instance.destroy()},updateElementDifference:function(n,t){this.isValid(n)&&n.blazor__instance.updateElementDifference(t)},isValid:function(n){return!!n}}}()},"./modules/sf-maps.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Maps=function(){"use strict";function r(n){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",n),t}function f(n,t,i){var r="";switch(n){case"Balloon":r="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":r="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"Diamond":r="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+i.y+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+i.y+" Z";break;case"Star":r="M "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x-t.width/3)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" Z";break;case"Triangle":r="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/2)+" Z";break;case"HorizontalLine":r=" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"VerticalLine":r="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2);break;case"InvertedTriangle":r="M "+(i.x-t.width/2)+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" Z";break;case"Pentagon":for(var f=void 0,e=void 0,u=0;u<5;u++)f=t.width/2*Math.cos(Math.PI/180*72*u),e=t.height/2*Math.sin(Math.PI/180*72*u),r+=(0===u?"M ":"L ")+(i.x+f)+" "+(i.y+e);r+=" Z"}return r}var t=function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})},i=function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==e[0]&&2!==e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},n=document.createElementNS("http://www.w3.org/2000/svg","rect"),u=function(n,t){this.x=n;this.y=t},e=function(){function e(n,t,i,r){this.previousMarkerId="";this.previousId="";this.enableSelectionZoom=!1;this.allowPanning=!1;this.isPanning=!1;this.isPan=!0;this.zoomClick=!1;this.mouseClick=!1;this.position=null;this.height=0;this.width=0;this.mapsBorderWidth=0;this.toolbarButtonOpacity=1;this.toolbarShapeOpacity=1;this.markerClusterExpandCheck=!1;this.svgCreated=!1;this.zoomIn=1;this.zoomOut=1;this.scaleFactor=1;this.factorCount=0;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.lastScale=1;this.clusterLocation=[];this.isTouch=!1;this.touchMoveList=[];this.touchStartList=[];this.newTiles=[];this.tileTranslatePoint=null;this.isToolbarTooltip=!1;this.marginTop=0;this.marginLeft=0;this.isPinchZoomed=!1;this.panComplete=!1;this.pinchComplete=!1;this.id=n;this.element=t;this.dotNetRef=r;this.layerCount=i.layerCount;this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null;this.dataSource=i.dataSource?JSON.parse(i.dataSource):null;this.navigation=i.navigationSettings?JSON.parse(i.navigationSettings):null;this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null;this.shapeBorderWidth=i.shapeBorderWidth;this.projectionType=i.projectionType;this.options=i;this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings);this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings);this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings);this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings);this.options.selectionSettings=JSON.parse(this.options.selectionSettings);this.element.blazor__instance=this;this.marginLeft=0;this.urlTemplate=i.urlTemplate?i.urlTemplate:null;this.newTiles=[];this.isToolbarTooltip=!1;this.isTouch=!1;this.pinchFactor=1;this.lastScale=1;this.touchStartList=[];this.touchMoveList=[]}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this);sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this);sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this);sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this);sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this);sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this);sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this);window.addEventListener("resize",this.reSize.bind(this))},e.prototype.rightClick=function(n){var i=n.target.id,t=this.getMousePosition(n.pageX,n.pageY);this.dotNetRef.invokeMethodAsync("TriggerMouseClick",t.x,t.y,document.getElementById(i))},e.prototype.reSize=function(){var n,t;null!==this.element&&(n=this.element.getBoundingClientRect().width,t=this.element.getBoundingClientRect().height);this.previousHeight===t&&this.previousWidth===n||(this.previousHeight=t,this.previousWidth=n,this.dotNetRef.invokeMethodAsync("TriggerResize",n,t))},e.prototype.doubleClick=function(n){var e,o,t,i,r,s,u,f;2===n.detail&&this.options.enableZoom&&this.options.doubleClickZoom&&(e=document.getElementById(this.id).getBoundingClientRect(),o=this.scaleFactor+1,o>=1&&(this.scaleFactor=o,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",n.pageX-e.x,n.pageY-e.y,n.which,"doubleClick")));t=n.target.id;i=this.getMousePosition(n.pageX,n.pageY);"DoubleClick"===this.options.tooltipDisplayMode&&(r=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),t.indexOf("shapeIndex")>-1?(s=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,r,s,"Shape",0)):t.indexOf("_MarkerIndex_")>-1&&-1===t.indexOf("_cluster_")?(u=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),f=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,r,f,"Marker",u)):t.indexOf("_BubbleIndex_")>-1?(u=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),f=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,r,f,"Bubble",u)):-1===t.indexOf("_shapeIndex_")&&-1===t.indexOf("_MarkerIndex_")&&-1===t.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0));this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",i.x,i.y,document.getElementById(t))},e.prototype.mapMouseWheel=function(n){n.preventDefault();document.getElementById(this.element.id).getBoundingClientRect();var t=sf.base.isNullOrUndefined(n.wheelDelta)?-n.deltaY:n.wheelDelta,i="ZoomIn"==(t/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1,r=this.getMousePosition(n.pageX,n.pageY);this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",r.x,r.y,t,"wheelZoom"))},e.prototype.mouseUp=function(n){var h,c,t=n.target.id,o=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,l=!1,u,a,v,s,y,p,r,f,d,g;if(this.lastScale=1,"touchend"===n.type?(n.preventDefault(),h=0,c=0,l=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=n.pageX,this.moveClientY=n.pageY,h=n.layerX,c=n.layerY),u=this.getMousePosition(this.moveClientX,this.moveClientY),this.moveClientX=u.x,this.moveClientY=u.y,t.split("_")[0],t.indexOf("_Zooming_")>-1||!this.options.enableZoom||!this.options.zoomOnClick||this.isPanning||"mouseleave"===n.type||(a=this.scaleFactor+1,a>=1&&(this.scaleFactor=a,this.removeCluster(),v=this.getMousePosition(n.pageX,n.pageY),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",v.x,v.y,n.which,"click"))),this.allowPanning&&this.isPanning&&this.options.enablePanning){if(this.isTileMap)for(s=0;s<this.newTiles.length;s++)y=document.getElementById(this.element.id+"tile"+this.newTiles[s]),y.parentNode.removeChild(y);this.newTiles=[];this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor);this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,o.x,o.y,this.scaleFactor)}if((this.isPinchZoomed&&(this.isPinchZoomed=!1,this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",o.x,o.y)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick)&&(this.svgCreated=!1,this.mouseClick=!1,p=document.getElementById(this.element.id+"drawRect"),p&&(p.remove(),this.removeCluster(),r=0,this.height>0&&this.width>0&&(f=this.element.getBoundingClientRect(),this.isTileMap?(r=this.scaleFactor+Math.round(this.scaleFactor+(f.width/this.width+f.height/this.height)/2),r-=2):r=this.scaleFactor+Math.round((f.width/this.width+f.height/this.height)/2),this.scaleFactor=r),r>=1&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width))),t.indexOf("_LayerIndex_")>-1){var w=void 0,i=void 0,b=void 0,k=void 0,e=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);(t.indexOf("shapeIndex")>-1&&(w=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),i=-1!==t.indexOf("_dataIndex_")?parseInt(t.split("_dataIndex_")[1].split("_")[0],10):null,this.options.selectionSettings&&this.options.selectionSettings[e]&&this.options.selectionSettings[e].Enable&&this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",t,e,w,"Shape",i)),t.indexOf("_BubbleIndex_")>-1&&(b=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),i=-1!==t.indexOf("_dataIndex_")?parseInt(t.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",t,e,i,"Bubble",b)),t.indexOf("_NavigationIndex_")>-1&&(k=parseInt(t.split("_NavigationIndex_")[1].split("_")[0],10),i=-1!==t.indexOf("_Line_")?parseInt(t.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",t,e,i,"NavigationLine",k)),l&&t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1))&&(d=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),g=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),i=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",d,g,i,u.x,u.y,l))}t.indexOf("_Zooming_")>-1||"mouseleave"===n.type||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,h,c,document.getElementById(t),this.isTileMap)},e.prototype.targetTouches=function(n){for(var i=[],t=0;t<n.length;t++)i.push({pageX:n[t].pageX,pageY:n[t].pageY});return i},e.prototype.mouseMove=function(t){var c,l,i=t.target.id,y,p,f,a,d,w,u,tt,r,it,g,o,v,nt,e,rt,ut,s,h;if(this.moveClientX=t.pageX,this.moveClientY=t.pageY,f=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,a=!1,"touchmove"===t.type?(this.moveClientX=y=t.touches[0].clientX,this.moveClientY=p=t.touches[0].clientY,2===t.touches.length&&(this.touchMoveList=this.targetTouches(t.touches)),t.preventDefault(),c=0,l=0,a=!0):(this.moveClientX=t.pageX,this.moveClientY=t.pageY,y=t.clientX,p=t.clientY,c=t.layerX,l=t.layerY,i.indexOf("_Zooming")>-1)?document.getElementById(this.element.id+"_Zooming_ToolBar").setAttribute("opacity","1"):(d=document.getElementById(this.element.id+"_Zooming_ToolBar"),sf.base.isNullOrUndefined(d)||d.setAttribute("opacity","0.3")),i.indexOf("_Zooming_ToolBar_")>-1){for(w=document.getElementById(this.element.id+"_Zooming_KitCollection"),u=0;u<w.childElementCount;u++)w.children[u].setAttribute("class"," e-maps-toolbar");w&&(!this.options.enableSelectionZooming&&i.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),!this.options.enablePanning&&i.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),1===this.options.factor?(this.isTileMap?(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):(this.options.enablePanning&&i.indexOf("_Pan_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""),this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)),i.indexOf("_ZoomOut_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""):i.indexOf("_Pan_")>-1&&!this.isPan?document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",""):i.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")):this.options.maxZoom===this.options.factor?(this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),i.indexOf("_ZoomIn_")>-1?document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""):i.indexOf("_Zoom_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class","")):this.options.factor>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===this.options.factor&&this.minZoomSelection(i)));this.previousId=i}if((this.previousId.indexOf("_Zooming_ToolBar_")>-1&&-1===i.indexOf("_Zooming_ToolBar_")&&(this.removeZoomOpacity(this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.previousId=""),"Interactive"===this.legendType&&i.indexOf("_MapAreaBorder")>-1)&&null!==document.getElementById(this.element.id+"_Interactive_Legend")&&this.dotNetRef.invokeMethodAsync("MapsAreaInteractive"),"Interactive"===this.legendType&&i.indexOf("_LayerIndex")>-1&&(tt=document.getElementById(t.target.id).getAttribute("fill"),this.dotNetRef.invokeMethodAsync("RenderInteractive",tt)),r=this.getMousePosition(this.moveClientX,this.moveClientY),this.moveClientX=r.x,this.moveClientY=r.y,it=i.split("_")[0],(this.highlightMap(t),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom)&&(t.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,y,p),this.svgCreated=!0),this.position=this.svgPoint(this.svg,y,p),g=document.getElementById(this.element.id).getBoundingClientRect(),this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-g.x,this.position.y=this.position.y-g.y,n.setAttributeNS(null,"x",this.position.x.toString()),n.setAttributeNS(null,"y",this.position.y.toString()),n.setAttributeNS(null,"id",this.element.id+"drawRect"),n.setAttributeNS(null,"width",this.width.toString()),n.setAttributeNS(null,"height",this.height.toString()),n.setAttributeNS(null,"fill","#d3d3d3"),n.setAttributeNS(null,"stroke-dasharray","3"),n.setAttributeNS(null,"opacity","0.5"),n.setAttributeNS(null,"stroke","#009900"),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(n):document.getElementById(this.element.id+"_svg").appendChild(n)),this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)){if(this.isPanning=!0,!this.isTileMap){for(o=document.getElementById(this.element.id+"_LayerCollections"),u=0;u<o.children.length;u++)for(v=0;v<o.children[u].childElementCount;v++)if(o.children[u].children[v].id.indexOf("Polygon_Group")>-1){this.scaleFactor=o.children[u].children[v].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var b=this.clientX-this.moveClientX,k=this.clientY-this.moveClientY,ft=f.x-b/this.scaleFactor,et=f.y-k/this.scaleFactor;this.panComplete||this.pinchComplete||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",f.x,f.y,ft,et,this.scaleFactor));this.panning(b,k,c,l,this.scaleFactor);this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length;this.clientX=this.moveClientX;this.clientY=this.moveClientY}}i.indexOf(it)>-1&&null!==(o=document.getElementById(t.currentTarget.id+"_animated_tiles"))&&(this.isTileMap=!0,this.scaleFactor=parseInt(o.className,10),b=this.clientX-this.moveClientX,k=this.clientY-this.moveClientY,nt=this.getTileGeoLocation(c,l),this.panComplete||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,f.x,f.y,this.scaleFactor,nt.latitude,nt.longitude)),this.panning(b,k,c,l,this.scaleFactor),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY)}(this.options.enableZoom&&this.options.enablePinchZooming&&2===this.touchMoveList.length&&2===this.touchStartList.length&&(this.isPinchZoomed=!0,this.pinchComplete||this.panComplete||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",f.x,f.y),this.pinchZooming(t),this.pinchComplete=!0),!(this.allowPanning||this.mouseClick&&this.zoomClick)&&i.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode)&&(e=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),rt=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,r.x,r.y,e,rt,"Shape",0));((-1===i.indexOf("_shapeIndex_")&&-1===i.indexOf("_MarkerIndex_")&&-1===i.indexOf("_BubbleIndex_")&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&-1===i.indexOf("_Zooming_ToolBar_")&&"MouseMove"!==this.options.tooltipDisplayMode)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",r.x,r.y,0,0,"",0),this.isToolbarTooltip=!1,i.indexOf("_Zooming_ToolBar_")>-1)&&(this.isToolbarTooltip=!0,ut=i.split("_Zooming_ToolBar_")[1].split("_")[0],this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,r.x,r.y,0,0,ut,0));(i.indexOf("_LayerIndex_")>-1&&i.indexOf("_MarkerIndex_")>-1||a&&i.indexOf("MarkerIndex")>-1&&!(i.indexOf("cluster")>-1))&&(e=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e,s,h,i,r.x,r.y,i.indexOf("cluster")>-1?"cluster":"marker",a));i.indexOf("_LayerIndex_")>-1&&i.indexOf("_BubbleIndex_")>-1&&(e=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10),h=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",e,s,h,i,r.x,r.y));this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!=i&&(e=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",e,s,h,r.x,r.y,a));this.previousMarkerId=i.indexOf("MarkerIndex")>-1&&!(i.indexOf("cluster")>-1)?i:""},e.prototype.mouseDown=function(n){var t=n.target.id,i=this.options.factor+(t.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(t.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0),r;if(i=t.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,"touchstart"===n.type?(n.preventDefault(),this.clientX=n.touches[0].clientX,this.clientY=n.touches[0].clientY,2===n.touches.length&&(this.touchStartList=this.targetTouches(n.touches)),this.isTouch=!0):(this.clientX=n.pageX,this.clientY=n.pageY),r=this.getMousePosition(this.clientX,this.clientY),this.clientX=r.x,this.clientY=r.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,n.preventDefault()),this.mouseClick||-1!==t.indexOf("ToolBar_Pan")||(t.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),t.indexOf("")>-1&&!(t.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),this.isTouch&&t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1)){var u=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),e=parseInt(t.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",u,f,e,t,r.x,r.y,null,"marker",this.isTouch)}document.getElementById(this.element.id+"_Zooming_KitCollection")&&(1===i?(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",""),this.removePanColor(this.toolbarColor),this.isTileMap&&(!this.enableSelectionZoom||this.previousId.indexOf("_Reset_")>-1)?(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&this.removePanColor(this.toolbarSelection),this.allowPanning?this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection)):this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,.3,.3,.3,.3)):(this.options.maxZoom===i||this.options.maxZoom<i)&&!this.allowPanning?(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",""),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",""),""!=this.previousId&&this.removeZoomOpacity(.3,.3,.3,.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom===i&&this.enableSelectionZoom&&document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",this.toolbarColor),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",this.toolbarColor),this.isPan=!1),this.options.maxZoom>=i&&1!=i&&!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.options.minZoom===i&&this.minZoomSelection(t)):i>1&&(this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.toolbarShapeOpacity,this.toolbarButtonOpacity,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity),this.options.maxZoom>=i&&1!=i&&(!this.enableSelectionZoom&&this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.isTileMap&&this.removePanColor(this.toolbarColor)),this.enableSelectionZoom&&this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarSelection),this.options.minZoom===i&&this.minZoomSelection(t)))},e.prototype.pinchZooming=function(){var u,n;this.pinchFactor=this.scaleFactor;u=this.scaleFactor;n=this.areaRect;this.previousScale=this.scaleFactor;this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var f=this.calculateScale(this.touchStartList,this.touchMoveList),t=this.getTouchCenter(this.touchMoveList),o=f/this.lastScale;if(this.lastScale=f,this.pinchFactor*=o,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor)),this.isTileMap)this.getTileTranslatePosition(u,this.pinchFactor,{x:t.x,y:t.y},null),this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers();else{var s=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),h=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),e=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,i=this.shapeTranslatePoint.x-(n.width/this.scaleFactor-n.width/this.pinchFactor)/(n.width/t.x),r=this.shapeTranslatePoint.y-(n.height/this.scaleFactor-n.height/this.pinchFactor)/(n.height/t.y);i=e<this.areaRect.height?n.x+(-this.baseMapBounds.minBounds.x+(n.width/2-s/2)):i;r=e<this.areaRect.height?n.y+(-this.baseMapBounds.minBounds.y+(n.height/2-h/2)):r;this.scaleFactor=this.pinchFactor;this.shapeTranslatePoint={x:i,y:r};this.applyTransform()}},e.prototype.minZoomSelection=function(n){this.removeZoomOpacity(this.options.enableSelectionZooming?this.toolbarShapeOpacity:.3,this.options.enableSelectionZooming?this.toolbarButtonOpacity:.3,this.toolbarShapeOpacity,this.toolbarButtonOpacity,.3,.3,this.options.enablePanning?this.toolbarShapeOpacity:.3,this.options.enablePanning?this.toolbarButtonOpacity:.3,.3,.3);n.indexOf("_ZoomOut_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class","");n.indexOf("_Reset_")>-1&&document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class","")},e.prototype.removeZoomOpacity=function(n,t,i,r,u,f,e,o,s,h){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect").setAttribute("stroke-opacity",t.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("opacity",n.toString()));document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").setAttribute("stroke-opacity",r.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Path").setAttribute("opacity",i.toString()));document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").setAttribute("stroke-opacity",f.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Path").setAttribute("opacity",u.toString()));document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("stroke-opacity",o.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("opacity",e.toString()));document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Rect").setAttribute("stroke-opacity",h.toString()),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Path").setAttribute("opacity",s.toString()))},e.prototype.removePanColor=function(n){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",n),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",n))},e.prototype.removeZoomColor=function(n){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",n),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",n))},e.prototype.getTileTranslatePosition=function(n,t,i,r){var o="ZoomOut"===r?10:"Reset"===r&&t>1?0:10,u=256*Math.pow(2,n),f=256*Math.pow(2,t),s=(i.x-this.tileTranslatePoint.x)/u*100,h=(i.y-this.tileTranslatePoint.y)/u*100,e=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===t?e.width/2-256:i.x-s*f/100;this.tileTranslatePoint.y=1===t?e.height/2-256+2*o:i.y-h*f/100},e.prototype.calculateScale=function(n,t){var i=this.getDistance(n[0],n[1]);return this.getDistance(t[0],t[1])/i},e.prototype.getDistance=function(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)},e.prototype.sum=function(n,t){return n+t},e.prototype.getTouchCenter=function(n){return{x:n.map(function(n){return n.pageX}).reduce(this.sum)/n.length,y:n.map(function(n){return n.pageY}).reduce(this.sum)/n.length}},e.prototype.highlightMap=function(n){var r=n.target,t=r.id,i,h,c,f,e,o,u,s;if(this.removeAllHighlight(),this.targetElementPath=r,t.indexOf("_LayerIndex_")>-1)i=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),h=t.indexOf("_dataIndex_")>-1?parseInt(t.split("_dataIndex_")[1].split("_")[0],10):0,t.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[i]&&this.options.layerHighlightSettings[i].Enable?r.classList.contains("mapShapeSelection")||(c=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",i,c,t)):t.indexOf("_BubbleIndex_")>-1?(f=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),this.options.bubbleHighlightSettings[i][f]&&this.options.bubbleHighlightSettings[i][f].Enable&&!r.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",i,f,h,t)):t.indexOf("_NavigationIndex_")>-1?(e=parseInt(t.split("_NavigationIndex_")[1].split("_")[0],10),this.options.navigationHighlightSettings[i][e]&&this.options.navigationHighlightSettings[i][e].Enable&&!r.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",i,e,0,t)):t.indexOf("_MarkerIndex_")>-1&&-1===t.indexOf("_cluster_")&&(o=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),this.options.markerHighlightSettings[i][o]&&this.options.markerHighlightSettings[i][o].Enable&&!r.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",i,o,h,t));else if(t.indexOf("_Legend_Shape_")>-1&&this.options.layerHighlightSettings[0]&&this.options.layerHighlightSettings[0].Enable&&!r.classList.contains("mapShapeSelection")&&(r.classList.add("highlightShape"),u=document.querySelectorAll('path[fill*="'+r.getAttribute("fill")+'"]'),u&&u.length>0))for(s=0;s<u.length;s++)this.handleHighlight(u[s],"Shape",this.options.layerHighlightSettings[0])},e.prototype.removeAllHighlight=function(){this.removeHighlight("Shape");this.removeHighlight("Marker");this.removeHighlight("Bubble");this.removeHighlight("Navigation")},e.prototype.handleHighlight=function(n,t,i){var r,u;if("Shape"===t&&(r=document.querySelectorAll('rect[id*="'+this.element.id+'_Legend_Shape_Index"]'),r&&r.length>0))for(u=0;u<r.length;u++)r[u].getAttribute("fill")===n.getAttribute("fill")&&r[u].classList.add("highlight"+t);"Arrow"!==t?(n.classList.add("highlight"+t),null!==document.querySelector("#highlight"+t+"Style")&&0!==document.querySelector("#highlight"+t+"Style").length?this.customizeStyle("highlight"+t+"Style","highlight"+t,i,n.id):this.createStyle("highlight"+t+"Style","highlight"+t,i,n.id)):(n.setAttribute("fill",i.Fill),n.setAttribute("fill-opacity",i.opacity),n.setAttribute("stroke-opacity",i.BorderOpacity))},e.prototype.removeHighlight=function(n){var t=document.querySelectorAll(".highlight"+n),i;if(t&&t.length>0)for(i=0;i<t.length;i++)if(t[i].classList.remove("highlight"+n),"Navigation"===n&&(""!==t[i].getAttribute("marker-start")||""!==t[i].getAttribute("marker-end"))){var r=document.getElementById(t[i].id+"_triangle"),u=parseInt(t[i].id.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(t[i].id.split("_NavigationIndex_")[1].split("_")[0],10);r.setAttribute("fill",this.navigation[u][f].ArrowColor);r.setAttribute("opacity","1")}},e.prototype.createStyle=function(n,t,i,r){var u=document.createElement("style");u.id=n;this.highlightStyle(u,t,i,r);document.body.appendChild(u)},e.prototype.highlightStyle=function(n,t,i,r){if(r.indexOf("NavigationIndex")>-1){var u=parseInt(r.split("_LayerIndex_")[1].split("_")[0],10),f=parseInt(r.split("_NavigationIndex_")[1].split("_")[0],10);n.innerHTML=0===this.navigation[u][f].Angle?"."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity:"."+t+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else n.innerHTML="."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity},e.prototype.customizeStyle=function(n,t,i,r){var u=document.getElementById(n);this.highlightStyle(u,t,i,r)},e.prototype.renderMarkers=function(){for(var s,h,u,i,f,t,e,r,c,l,a,o=document.getElementById(this.element.id+"_LayerCollections"),n=0;n<this.layerCount;n++)s=document.getElementById(this.element.id+"_LayerIndex_"+n+"_Markers_Template_Group"),this.markerTemplateTranslate(s,0,this.translatePoint.x,this.translatePoint.y),h=document.getElementById(this.element.id+"_LayerIndex_"+n+"_DataLabel_Group"),this.labelTemplateTranslate(h,this.translatePoint.x,this.translatePoint.y);for(u=0;u<o.childElementCount;u++)if(i=o.childNodes[u],"g"===i.tagName)for(i.id.indexOf("_LayerIndex_")>-1&&parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),f=0;f<i.childNodes.length;f++)if(t=i.childNodes[f],t.COMMENT_NODE!==t.nodeType)if(t.id.indexOf("Polygon")>-1)t.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(t.id.indexOf("_MarkerGroup")>-1)for(n=0;n<t.childElementCount;n++)this.markerTranslate(t.childNodes[n],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor,!1);else if(t.id.indexOf("_line_Group")>-1)if(this.isTileMap)for(e=0;e<t.childElementCount;e++)for(r=document.getElementById(t.children[e].id),n=0;n<r.childElementCount;n++)""!==r.childNodes[n].id&&(c=parseInt(r.childNodes[n].id.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(r.childNodes[n].id.split("_NavigationIndex_")[1].split("_")[0],10),this.navigationTranslate(r.children[n],0,c,l));else t.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(t.id.indexOf("_dataLableIndex_Group")>-1)for(a=Math.pow(2,this.scaleFactor-1),n=0;n<t.childNodes.length;n++)this.dataLabelTranslate(t.childNodes[n],0,this.translatePoint.x,this.translatePoint.y,a,"DataLabel")},e.prototype.setMarkerTranslate=function(n,t,i,r,u){"Balloon"!==this.dataSource[t][i][r][this.markerSettings[t][i].ShapeValuePath]&&"Balloon"!=this.markerSettings[t][i].Type||n.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[t][i][r][this.markerSettings[t][i].ShapeValuePath]&&"Rectangle"!=this.markerSettings[t][i].Type||n.id.indexOf("cluster")>-1?n.setAttribute("transform","translate( "+u.x+" "+u.y+" )"):n.setAttribute("transform","translate( "+(u.x-this.markerSettings[t][i].Width/2)+" "+(u.y-this.markerSettings[t][i].Height/2)+" )"):n.setAttribute("transform","translate( "+(u.x-this.markerSettings[t][i].Width/2)+" "+(u.y-this.markerSettings[t][i].Height)+" )scale("+this.markerSettings[t][i].Width/30+" "+this.markerSettings[t][i].Height/30+" )")},e.prototype.markerTranslate=function(n,t,i,r,u,f){var e=parseInt(n.id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(n.id.split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),l=0!==this.dataSource[e].length&&0!==this.dataSource[e][o].length?this.dataSource[e][o][c].Longitude:null,a=0!==this.dataSource[e].length&&0!==this.dataSource[e][o].length?this.dataSource[e][o][c].Latitude:null,s,h;a&&l&&(this.isTileMap?(s=this.convertTileLatLongToPoint({x:l,y:a},this.tileZoomLevel,this.tileTranslatePoint,!0),s.x=s.x+this.markerSettings[e][o].X,s.y=s.y+this.markerSettings[e][o].Y,f?(n.style.left=s.x+"px",n.style.top=s.y+"px"):this.setMarkerTranslate(n,e,o,c,s)):(h=this.convertGeoToPoint(a,l,t),h.x=(h.x+i)*u+this.markerSettings[e][o].X,h.y=(h.y+r)*u+this.markerSettings[e][o].Y,f?(n.style.left=h.x-this.areaRect.x+"px",n.style.top=h.y-this.areaRect.y+"px"):this.setMarkerTranslate(n,e,o,c,h)))},e.prototype.navigationTranslate=function(n,t,i,r){var o,l,u,h;if(!sf.base.isNullOrUndefined(this.navigation[i])){var e=this.navigation[i][r].Angle,s=void 0,c=void 0,f=[];if(this.navigation[i][r].Latitude.length===this.navigation[i][r].Longitude.length)for(o=0;o<this.navigation[i][r].Latitude.length;o++)l=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][r].Longitude[o],y:this.navigation[i][r].Latitude[o]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][r].Latitude[o],this.navigation[i][r].Longitude[o],t),f.push(l);for(u=0;u<f.length-1;u++)e=1<(e=-1>e?-1:e)?1:e,h=this.convertRadius(f[u],f[u+1]),e<=1&&e>0&&(s=0,f[u].x>f[u+1].x&&(s=1)),e>=-1&&e<0&&(s=1,f[u].x>f[u+1].x&&(s=0)),f[u].x!==f[u+1].x&&(c=0===(e=Math.abs(e))?"M "+f[u].x+","+f[u].y+"L "+f[u+1].x+","+f[u+1].y+" ":"M "+f[u].x+","+f[u].y+" A "+(h/2+(1-e)*h/(10*e))+" "+(h/2+(1-e)*h/(10*e))+" 0,0,"+s+" , "+f[u+1].x+","+f[u+1].y+" "),n.setAttribute("d",c)}},e.prototype.dataLabelTranslate=function(n,t,i,r,u,f){var e,o,h=parseInt(n.id.split("_LayerIndex_")[1].split("_")[0],10),c=parseFloat(n.id.split("_shapeIndex_")[1].split("_")[0]),s;"Template"!==f?(e=(s=this.labelCollection[h][c]).LocationX,o=s.LocationY,e=(e+i)*u-s.BorderSize.Height/4,o=(o+r)*u+s.BorderSize.Height/2,n.id.indexOf("_RectIndex_")>-1?(n.setAttribute("x",(e-parseInt(n.getAttribute("width"))/2).toString()),n.setAttribute("y",(o-5-parseInt(n.getAttribute("height"))/2).toString())):n.setAttribute("transform","translate( "+e+" "+o+" )")):(e=((s=this.dataLabelTemplateCollection[h][c]).LocationX+i)*u,o=(s.LocationY+r)*u,n.style.left=e+"px",n.style.top=o+"px")},e.prototype.convertTileLatLongToPoint=function(n,t,i,r){var u=256*Math.pow(2,t),s=(n.x+180)/360,f=Math.sin(n.y*Math.PI/180),h=.5-Math.log((1+f)/(1-f))/(4*Math.PI),e=n.x,o=n.y;return r&&(e=s*u+.5+i.x,o=h*u+.5+i.y),{x:e,y:o}},e.prototype.panning=function(n,t,i,r,u){if(this.isTileMap)o=this.tileTranslatePoint.x-n,s=this.tileTranslatePoint.y-t,this.tileTranslatePoint.x=o,this.tileTranslatePoint.y=s,(this.tileTranslatePoint.y>-10&&t<0||this.tileTranslatePoint.y<-256*(Math.pow(2,u)-2)&&t>0)&&(this.tileTranslatePoint.x=o+n,this.tileTranslatePoint.y=s+t),this.translatePoint.x=(this.tileTranslatePoint.x-n)/Math.pow(2,u-1),this.translatePoint.y=(this.tileTranslatePoint.y-t)/Math.pow(2,u-1),this.generateTiles(),this.renderMarkers();else{this.shapeTranslatePoint;var o=this.shapeTranslatePoint.x-n/u,s=this.shapeTranslatePoint.y-t/u,f=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),e=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),h=n<0?f.left<=e.left+this.areaRect.x:f.left+f.width>=e.left+e.width+this.areaRect.x+this.marginLeft,c=t<0?f.top<=e.top+this.areaRect.y:f.top+f.height+this.marginTop>=e.top+e.height;h&&c?(this.shapeTranslatePoint={x:o,y:s},this.applyTransform()):h?(this.shapeTranslatePoint={x:o,y:this.shapeTranslatePoint.y},this.applyTransform()):c&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:s},this.applyTransform())}},e.prototype.applyTransform=function(){for(var i,o,n,t,f,e,y,p,r=this.isTileMap?this.translatePoint.x:this.shapeTranslatePoint.x,u=this.isTileMap?this.translatePoint.y:this.shapeTranslatePoint.y,l=document.getElementById(this.element.id+"_LayerCollections"),s=this.calculateFactor(),h=0;h<l.childNodes.length;h++)if(i=l.childNodes[h],i.COMMENT_NODE!==i.nodeType&&"g"===i.tagName)for(i.id.indexOf("_LayerIndex_")>-1&&parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),o=0;o<i.childNodes.length;o++)if(n=i.childNodes[o],n.COMMENT_NODE!==n.nodeType&&!sf.base.isNullOrUndefined(n.id))if(n.id.indexOf("Polygon")>-1||n.id.indexOf("_line_Group")>-1)n.setAttribute("transform","scale("+this.scaleFactor+") translate( "+r+" "+u+" )");else if(n.id.indexOf("_MarkerGroup")>-1)for(t=0;t<n.childNodes.length;t++)sf.base.isNullOrUndefined(n.childNodes[t].id)||this.markerTranslate(n.childNodes[t],s,r,u,this.scaleFactor,!1);else if(n.id.indexOf("_bubble_Group_")>-1){for(t=0;t<n.childNodes.length;t++)if(f=n.childNodes[t],!sf.base.isNullOrUndefined(f.id)){var c=parseFloat(f.id.split("_LayerIndex_")[1].split("_")[0]),a=parseFloat(f.id.split("_BubbleIndex_")[1].split("_")[0]),w=parseFloat(f.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[c]&&this.bubbleCollection[c][a]){var v=this.bubbleCollection[c][a][w],b=v.ZoomTranslatePoint.X,k=v.ZoomTranslatePoint.Y,d=(b+r)*this.scaleFactor,g=(k+u)*this.scaleFactor;f.setAttribute("transform","translate( "+d+" "+g+" )")}}}else if(n.id.indexOf("_dataLableIndex_Group")>-1)for(t=0;t<n.childNodes.length;t++)this.dataLabelTranslate(n.childNodes[t],s,r,u,this.scaleFactor,"DataLabel");for(e=0;e<this.layerCount;e++)y=document.getElementById(this.element.id+"_LayerIndex_"+e+"_Markers_Template_Group"),this.markerTemplateTranslate(y,s,r,u),p=document.getElementById(this.element.id+"_LayerIndex_"+e+"_DataLabel_Group"),this.labelTemplateTranslate(p,r,u)},e.prototype.markerTemplateTranslate=function(n,t,i,r){if(n)for(var u=0;u<n.childElementCount;u++)this.markerTranslate(n.childNodes[u],t,i,r,this.scaleFactor,!0)},e.prototype.labelTemplateTranslate=function(n,t,i){if(n)for(var u=this.isTileMap?Math.pow(2,this.scaleFactor-1):this.scaleFactor,r=0;r<n.childElementCount;r++)this.dataLabelTranslate(n.childNodes[r],0,t,i,u,"Template")},e.prototype.calculateFactor=function(){var o,n,t,s=1,i=this.baseMapBounds,r=this.areaRect.width,u=this.areaRect.height,f,e;return i?(f=this.convertGeoToPoint(i.latitudeMin,i.longitudeMin,null),e=this.convertGeoToPoint(i.latitudeMax,i.longitudeMax,null),n=e.y-f.y,t=e.x-f.x):n=t=500,o=n<u?parseFloat(Math.abs(100*Number(u/Number(n.toString()+"e+1"))).toString().split(".")[0])/10:u/n,s=t<r?parseFloat(Math.abs(100*Number(r/Number(t.toString()+"e+1"))).toString().split(".")[0])/10:r/t,Math.min(s,o)},e.prototype.convertRadius=function(n,t){var i=t.x-n.x,r=t.y-n.y;return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))},e.prototype.convertGeoToPoint=function(n,t,i){var v,y,e,f,o={width:this.areaRect.width,height:this.areaRect.height},r=this.degreesToRadians(n),u=this.degreesToRadians(t),s=null==i?Math.min(o.width,o.height):Math.min(o.width,o.height)*i,h,c,l,a;switch(this.projectionType){case"Mercator":h={x:s/2,y:s/2};v=h.x+t*(s/360);c=this.calculateBound(Math.sin(this.degreesToRadians(n)),-.9999,.9999);y=h.y+.5*Math.log((1+c)/(1-c))*(-s/(2*Math.PI));break;case"Winkel3":((e=this.aitoff(u,r)).x+u/(Math.PI/2))/2;(e.y+r)/2;break;case"Miller":u;1.25*Math.log(Math.tan(Math.PI/4+.4*r));break;case"Eckert3":2/(f=Math.sqrt(Math.PI*(4+Math.PI)))*u*(1+Math.sqrt(1-4*r*r/(Math.PI*Math.PI)));4/f*r;break;case"AitOff":(e=this.aitoff(u,r)).x;e.y;break;case"Eckert5":u*(1+Math.cos(r))/Math.sqrt(2+Math.PI);2*r/Math.sqrt(2+Math.PI);break;case"Equirectangular":u;r;break;case"Eckert6":for(f=(1+Math.PI/2)*Math.sin(r),l=1/0,a=0;a<10&&Math.abs(l)>1e-6;a++)r-=l=(r+Math.sin(r)-f)/(1+Math.cos(r));f=Math.sqrt(2+Math.PI);u*(1+Math.cos(r))/f;2*r/f}return{x:v,y:y}},e.prototype.aitoff=function(n,t){var i=Math.cos(t),r=Math.sin(Math.cos(i*Math.cos(n/=2)));return{x:2*i*Math.sin(n)*r,y:Math.sin(t)*r}},e.prototype.degreesToRadians=function(n){return n*(Math.PI/180)},e.prototype.calculateBound=function(n,t,i){return sf.base.isNullOrUndefined(t)||(n=Math.max(n,t)),sf.base.isNullOrUndefined(i)||(n=Math.min(n,i)),n},e.prototype.getTileGeoLocation=function(n,t){var i=this.getBound(this.element.id),r=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(n+this.areaRect.x-(r.x-i.x),t+this.areaRect.y-(r.y-i.y))},e.prototype.pointToLatLong=function(n,t){var i=256*Math.pow(2,this.scaleFactor),r=this.clip(n-this.translatePoint.x*this.scaleFactor,0,i-1)/i-.5,u=.5-this.clip(t-this.translatePoint.y*this.scaleFactor,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-u*Math.PI))/Math.PI,longitude:360*r}},e.prototype.generateTiles=function(){var f,e=this.baseMapBounds.availableSize.width,y=this.baseMapBounds.availableSize.height,i=0,a=0,v=0,r,n,h,c,l,u,p;i=f=Math.pow(2,this.tileZoomLevel);r=[];this.tileTranslatePoint.x+256*i<e&&(a=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,v=this.tileTranslatePoint.x+256*i<e?Math.ceil((e-(this.tileTranslatePoint.x+256*i))/256):0);i+=a+v;i=this.horizontalPanXCount>=i?this.horizontalPanXCount:i;this.horizontalPan=!1;for(var b=Math.min(f,(-this.tileTranslatePoint.y+y)/256+1),k=Math.min(i,(-this.tileTranslatePoint.x+e+256*v)/256+1),d=-(this.tileTranslatePoint.x+256*a+256)/256,g=-(this.tileTranslatePoint.y+256)/256,o=Math.round(d);o<Math.round(k);o++)for(n=Math.round(g);n<Math.round(b);n++)h=256*o+this.tileTranslatePoint.x,c=256*n+this.tileTranslatePoint.y,h>-256&&h<=e&&c>-256&&c<y&&n>=0&&(l=o,o<0&&(l=l%f+f),u={x:l%f,y:n,left:h,top:c,height:256,width:256,src:null},u.src=-1===this.urlTemplate.indexOf("virtualearth")?this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",u.x.toString()).replace("tileY",u.y.toString()):this.getBingMap(u,this.urlTemplate),r.push(u));for(p=document.getElementById(this.element.id+"_animated_tiles"),n=0;n<r.length;n++){var t=document.getElementById(this.element.id+"tile"+n),s=null,w=!1;t?s=t.childNodes[0]:((t=document.createElement("div")).id=this.element.id+"tile"+n,t.style.userSelect="none",s=document.createElement("img"),-1===this.newTiles.indexOf(n)&&this.newTiles.push(n),w=!0);s.src!==r[n].src&&s.setAttribute("src",r[n].src);t.style.position="absolute";t.style.left=r[n].left+"px";t.style.top=r[n].top+"px";t.style.height=r[n].height+"px";t.style.width=r[n].width+"px";w&&(t.appendChild(s),p.appendChild(t))}},e.prototype.getBingMap=function(n,t){for(var r,f,o,i="",e=["t0","t1","t2","t3"],u=Math.min(this.tileZoomLevel,this.options.maxZoom);u>0;u--)r=0,f=1<<u-1,0!=(n.x&f)&&r++,0!=(n.y&f)&&(r+=2),i=i+""+r;return o=e[Math.min(parseInt(i.substr(i.length-1,1),10),e.length)],(t=t.replace("{quadkey}",i).replace("{subdomain}",o))+"&mkt=en-US&ur=IN&Key="+this.key},e.prototype.clip=function(n,t,i){return Math.min(Math.max(n,t),i)},e.prototype.svgPoint=function(n,t,i){var r=this.svg.createSVGPoint();return r.x=t,r.y=i,r.matrixTransform(n.getScreenCTM().inverse())},e.prototype.clusterExpand=function(n,t){var o,r=JSON.parse(t.dataSource),c=parseInt(n[0].split("_LayerIndex_")[1].split("_")[0],10),p=this.markerClusterCollection[c],u=n[0].split("_LayerIndex_"),w=parseInt(u[1].split("_")[0],10),k=[],l=[],a,v,f,i,e,s,h,y,b;if(n[0].indexOf("_MarkerIndex_")>-1&&(a=parseInt(u[1].split("_MarkerIndex_")[1].split("_")[0],10),v=parseInt(u[1].split("_dataIndex_")[1].split("_")[0],10),!isNaN(a))){if(o=r[v],f=[],n[0].indexOf("_cluster_")>-1&&p.AllowClustering)for(i=0;i<r.length;i++)r[i].Latitude===o.Latitude&&r[i].Longitude===o.Longitude&&f.push({data:o,index:w});if(n[0].indexOf("_cluster_")>-1){for(e=document.getElementById(n[0].indexOf("_datalabel_")>-1?n[0].split("_datalabel_")[0]:n[0]),s=void 0,"Balloon"===this.markerClusterCollection[c].Shape||sf.base.isNullOrUndefined(e)?sf.base.isNullOrUndefined(e.firstElementChild)||(s=e.firstElementChild.innerHTML.split(",").map(Number)):s=e.innerHTML.split(",").map(Number),f=[],h=0,y=s;h<y.length;h++)i=y[h],f.push({data:r[i],index:i}),r[i].text="",k.push(r[i]);l.push({data:f,layerIndex:w,markerIndex:a,dataIndex:v,targetClusterIndex:+(n[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?n[0].split("_cluster_")[1].split("_datalabel_")[0]:n[0].split("_cluster_")[1]),isClusterSame:!1})}}l.length>0&&(this.sameMarkerData=l,b=document.getElementById(u[0]+"_LayerIndex_"+c+"_MarkerGroup"),this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.sameMarkerData,u[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.sameMarkerData,b,!0,u[0],p),this.markerClusterExpandCheck=!0))},e.prototype.mergeSeparateCluster=function(n,t){var r,u=n[0].layerIndex,f=n[0].targetClusterIndex,e=n[0].markerIndex,o=t+"_LayerIndex_"+u+"_MarkerIndex_"+e,s=o+"_dataIndex_"+n[0].dataIndex+"_cluster_"+f,c=this.getElementId(s),l=this.getElementId(s+"_datalabel_"+f),h,i;if(c.setAttribute("visibility","visible"),l.style.visibility="visible",h=n[0].data.length,0!=this.clusterLocation.length)for(i=0;i<h;i++)(r=this.getElementId(o+"_dataIndex_"+n[0].data[i].index)).setAttribute("transform","translate( "+this.clusterLocation[i].x+" "+this.clusterLocation[i].y+")"),r.setAttribute("style","visibility:hidden; content:marker");this.clusterLocation=[];this.removeElement(t+"_LayerIndex_"+u+"_MarkerIndex_"+e+"_markerClusterConnectorLine")},e.prototype.removeElement=function(n){var t=document.getElementById(n);sf.base.isNullOrUndefined(t)||t.remove()},e.prototype.drawPath=function(n){var t=document.getElementById(n.id);return sf.base.isNullOrUndefined(t)&&(t=document.createElementNS("http://www.w3.org/2000/svg","path")),t.setAttribute("id",n.id),t.setAttribute("d",n.d),t.setAttribute("opacity",n.opacity.toString()),t.setAttribute("stroke",n.stroke),t.setAttribute("stroke-width",n.strokeWidth.toString()),t},e.prototype.clusterSeparate=function(n,t,i,u,f){var s=n[0].layerIndex,v=n[0].markerIndex,et=n[0].targetClusterIndex,tt=n[0].dataIndex,ot=document.getElementById(u).getBoundingClientRect(),h=i?this.getElementId:t.querySelector.bind(t),y=i?"":"#",p=u+"_LayerIndex_"+s+"_MarkerIndex_"+v,st=p+"_dataIndex_"+tt+"_cluster_"+et,it=h(y+""+st),ht=h(y+""+st+"_datalabel_"+et),g,nt,ut,o,yt,ft;it.setAttribute("visibility","hidden");ht.setAttribute("visibility","hidden");var w=h(y+""+p+"_dataIndex_"+tt),ct=+it.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],lt=+it.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),b=30,c=6.28*b,rt=0,e=Math.round(c/25);rt+=e;for(var k=n[0].data.length,l=Math.round(2500/c),at=(l=k<e?100/k:l)/100*360,a=k<e?45:0,pt=1,wt="M "+ct+" "+lt+" ",vt="",d=0;d<k;d++){if(rt===d||Math.round(a)>=360){for(a=0,c=6.28*(b=30*++pt),e=Math.round(c/25),l=Math.round(2500/c);l*e<100;)e++;at=l/100*360;rt+=e}g=ct+b*Math.sin(2*Math.PI*a/360);nt=lt+b*Math.cos(2*Math.PI*a/360);vt+=wt+"L "+g+" "+nt+" ";ut=(w=h(y+""+p+"_dataIndex_"+n[0].data[d].index)).getBoundingClientRect();this.clusterLocation.push({x:ut.left-ot.left,y:ut.top-ot.top});o=this.markerSettings[s][v];"Balloon"===o.Type?w.setAttribute("transform","translate( "+(g-o.Width/2)+" "+(nt-o.Height)+"  ) scale( "+o.Width/30+" "+o.Height/30+" ) "):w.setAttribute("transform","translate( "+g+" "+nt+")");w.style.visibility="visible";ht.style.visibility="hidden";a+=at}yt={d:vt,id:u+"_LayerIndex_"+s+"_MarkerIndex_"+v+"_dataIndex_"+tt+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(f.LineColor)?"#000000":f.LineColor,opacity:f.LineOpacity,strokeWidth:f.LineWidth};t=i?h(u+"_LayerIndex_"+s+"_MarkerGroup"):t;ft=r(u+"_LayerIndex_"+s+"_MarkerIndex_"+v+"_markerClusterConnectorLine");ft.appendChild(this.drawPath(yt));t.insertBefore(ft,t.querySelector("#"+p+"_dataIndex_0"))},e.prototype.getElementId=function(n){return document.getElementById(n)},e.prototype.shapeHighlightHandle=function(n,t,i){var r=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:r.BorderColor,BorderWidth:r.BorderWidth,BorderOpacity:r.BorderOpacity,Enable:r.Enable,EnableMultiSelect:r.EnableMultiSelect,Fill:n,Opacity:t})},e.prototype.itemHighlightHandle=function(n,t,i,r,u){var e,o,s,f;"Bubble"===u&&(e=this.options.bubbleHighlightSettings[i][r],this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:e.BorderColor,BorderWidth:e.BorderWidth,BorderOpacity:e.BorderOpacity,Enable:e.Enable,EnableMultiSelect:e.EnableMultiSelect,Fill:n,Opacity:t}));"Marker"===u&&(o=this.options.markerHighlightSettings[i][r],this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:o.BorderColor,BorderWidth:o.BorderWidth,BorderOpacity:o.BorderOpacity,Enable:o.Enable,EnableMultiSelect:o.EnableMultiSelect,Fill:n,Opacity:t}));"Navigation"===u&&(s=this.options.navigationHighlightSettings[i][r],(this.handleHighlight(this.targetElementPath,"Navigation",{BorderColor:s.BorderColor,BorderWidth:s.BorderWidth,BorderOpacity:s.BorderOpacity,Enable:s.Enable,EnableMultiSelect:s.EnableMultiSelect,Fill:n,Opacity:t}),""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end"))&&(f=document.getElementById(this.targetElementPath.id+"_triangle"),this.handleHighlight(f,"Arrow",{BorderColor:f.BorderColor,BorderWidth:f.BorderWidth,BorderOpacity:f.BorderOpacity,Enable:f.Enable,EnableMultiSelect:f.EnableMultiSelect,Fill:n,Opacity:t})))},e.prototype.elementAnimate=function(n,t,i,r,u,f,e,o,s,h,c,l){var v=this;sf.base.isNullOrUndefined(e)&&(e=0);var y=r,p=u,a=0;new sf.base.Animation({}).animate(n,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(a=(t.timeStamp-t.delay)/t.duration,n.style.visibility="visible",n.setAttribute("transform","translate( "+(y-e*a)+" "+(p-e*a)+" ) scale("+a+")"))},end:function(){n.setAttribute("transform","");"Balloon"===s||"Balloon"===h?n.setAttribute("transform","translate( "+r+" "+u+"  ) scale( "+c/30+" "+l/30+" ) "):n.setAttribute("transform","translate( "+r+" "+u+"  )");v.dotNetRef.invokeMethodAsync("TriggerAnimation",n)}})},e.prototype.markerAnimation=function(n,t,i){for(var r,e,o,s,f=JSON.parse(t.markerData),u=0;u<f.length;u++)for(r=0;r<f[u].MarkerAnimation.length;r++)if(f[u].MarkerAnimation[r].IsMarkerShape)for(e=0;e<f[u].MarkerAnimation[r].DataSourceLength;e++)o=document.getElementById(n+"_LayerIndex_"+u+"_MarkerIndex_"+r+"_dataIndex_"+e),s=sf.base.isNullOrUndefined(this.dataSource[f[u].MarkerAnimation[r].Layer][r][e][f[u].MarkerAnimation[r].ShapeValuePath])?" ":this.dataSource[f[u].MarkerAnimation[r].Layer][r][e][f[u].MarkerAnimation[r].ShapeValuePath],this.elementAnimate(o,f[u].MarkerAnimation[r].AnimationDelay,f[u].MarkerAnimation[r].AnimationDuration,o.transform.baseVal[0].matrix.e,o.transform.baseVal[0].matrix.f,null,0,i,f[u].MarkerAnimation[r].MarkerType,s,f[u].MarkerAnimation[r].Width,f[u].MarkerAnimation[r].Height)},e.prototype.bubbleAnimation=function(n,t,i){for(var u,e,o,f=JSON.parse(t.bubbleData),r=0;r<f.length;r++)for(u=0;u<f[r].MarkerAnimation.length;u++)for(e=0;e<f[r].MarkerAnimation[u].DataSourceLength;e++)o=document.getElementById(n+"_LayerIndex_"+r+"_BubbleIndex_"+u+"_dataIndex_"+e),this.elementAnimate(o,f[r].MarkerAnimation[u].AnimationDelay,f[r].MarkerAnimation[u].AnimationDuration,o.transform.baseVal[0].matrix.e,o.transform.baseVal[0].matrix.f,null,0,i," "," ",0,0)},e.prototype.toolbarOpacity=function(n,t){this.removeZoomOpacity(t,n,t,n,t,n,t,n,t,n)},e.prototype.clusterMarkers=function(n){var t=this.markerClusterCollection[n],i,ot,y,s,at,k,rt,ct,lt,d,vt,o,yt,pt,wt,h,st,ht,g;if(t.AllowClustering){var nt=void 0,tt=void 0,a=this.id,p=[],ut=[],c=0,l=0,e=r(a+"_LayerIndex_"+n+"_cluster"),ft=0,et=void 0,v=void 0,b=void 0,w=[],it=void 0,bt=document.getElementById(a),u=document.getElementById(a+"_LayerIndex_"+n+"_MarkerGroup");if(!sf.base.isNullOrUndefined(u)&&u.childElementCount<=0&&u.childElementCount<=0&&(u=document.getElementById(a+"_LayerIndex_"+n+"_Markers_Template_Group"),it=!0),u=sf.base.isNullOrUndefined(u)?document.getElementById(a+"_LayerIndex_"+n+"_Markers_Template_Group"):u)for(i=0;i<u.childElementCount;i++)if(!(u.children[i].id.indexOf("markerClusterConnectorLine")>-1)&&(p=[],ot=parseInt(u.children[i].id.split("_MarkerIndex_")[1].split("_")[0],10),"hidden"!==u.children[i].style.visibility&&0===ot&&(y=(v=u.children[i]).getBoundingClientRect(),p.push(i),null!==y))){for(s=i+1;s<u.childElementCount;s++)at=parseInt(u.children[s].id.split("_MarkerIndex_")[1].split("_")[0],10),"hidden"!==u.children[s].style.visibility&&0===at&&(k=(v=u.children[s]).getBoundingClientRect(),null!==k&&(y.left>k.right||y.right<k.left||y.top>k.bottom||y.bottom<k.top||(ut.push(k),u.children[s].setAttribute("style","visibility:hidden; content:marker"),p.push(s))));if(c=y.left+y.width/2,l=y.top+y.height,ut.length>0){rt=bt.getBoundingClientRect();c=this.isTileMap?c-rt.left-this.areaRect.x:c-rt.left;l=this.isTileMap?l-rt.top-this.areaRect.y:l-rt.top;ct=parseInt(u.children[i].id.split("_dataIndex_")[1].split("_")[0],10);lt=parseInt(u.children[i].id.split("_LayerIndex_")[1].split("_")[0],10);u.children[i].getAttribute("transform")?(c+=this.isTileMap?0:it?this.areaRect.x:0,l+=this.isTileMap?0:it?this.areaRect.y:0):(c=parseFloat(u.children[i].style.left.replace("px",""))+(this.isTileMap?0:it?this.areaRect.x:0),l=parseFloat(u.children[i].style.top.replace("px",""))+(this.isTileMap?0:it?this.areaRect.y:0));d=a+"_LayerIndex_"+lt+"_MarkerIndex_"+ot+"_dataIndex_"+ct+"_cluster_"+ft;vt=a+"_LayerIndex_"+lt+"_MarkerIndex_"+ot+"_dataIndex_"+ct+"_cluster_"+ft+"_datalabel_"+ft;ft++;o=void 0;switch(t.Shape){case"Circle":(o=this.createClusterShape("circle",d,t.Fill,t.Opacity,"translate( "+c+" "+l+" )",!0,p,t)).setAttribute("r",(t.Height+t.Width)/4);break;case"Rectangle":(o=this.createClusterShape("rect",d,t.Fill,t.Opacity,"translate( "+c+" "+l+" )",!0,p,t)).setAttribute("x",-t.Width/2);o.setAttribute("y",-t.Height/2);o.setAttribute("height",t.Height);o.setAttribute("width",t.Width);break;case"Balloon":b=r(d);(o=this.createClusterShape("path",d,t.Fill,t.Opacity,"translate( "+-t.Width/2+", "+-t.Height+" ) scale( "+t.Width/30+", "+t.Height/30+" )",!0,p,t)).setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z");b.appendChild(o);b.setAttribute("style","visibility:visible");b.setAttribute("style","cursor: pointer");b.setAttribute("class","clusterGroup");b.setAttribute("transform","translate( "+c+" "+l+" )");break;case"Image":yt=-(0+t.Width/2);pt=-(0+t.Height/2);(o=this.createClusterShape("image",d,null,null,"translate( "+c+" "+l+" )",!0,p,t)).setAttributeNS(null,"height",t.Height);o.setAttributeNS(null,"width",t.Width);o.setAttributeNS("http://www.w3.org/1999/xlink","href",t.ImageUrl);o.setAttributeNS(null,"x",yt);o.setAttributeNS(null,"y",pt);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":wt=f(t.Shape,{height:t.Height,width:t.Width},{x:0,y:0});(o=this.createClusterShape("path",d,t.Fill,t.Opacity,"translate( "+c+" "+l+" )",!1,p,t)).setAttribute("d",wt);"Cross"!==t.Shape&&"HorizontalLine"!==t.Shape&&"VerticalLine"!==t.Shape||(o.setAttribute("stroke",t.Fill),o.setAttribute("stroke-width",((t.Width+t.Height)/4).toString()))}o.setAttribute("class","clusterGroup");h=document.createElementNS("http://www.w3.org/2000/svg","text");h.setAttribute("id",vt);h.setAttribute("x","0");h.setAttribute("y",3.75.toString());h.setAttribute("fill",t.LabelColor);h.setAttribute("font-size",t.LabelSize);h.setAttribute("font-style",t.LabelFontStyle);h.setAttribute("font-family",t.LabelFontFamily);h.setAttribute("font-weight",t.LabelFontWeight);h.setAttribute("text-anchor","middle");h.setAttribute("transform","translate( "+c+" "+l+" )");h.setAttribute("opacity",t.LabelOpacity);h.setAttribute("style","cursor: pointer");h.setAttribute("style","visibility: visible");h.setAttribute("class","clusterGroup");h.innerHTML=(ut.length+1).toString();e.appendChild(h);e.setAttribute("class","clusterGroup");"Balloon"!==t.Shape?e.appendChild(o):e.appendChild(b);u.children[i].setAttribute("style","visibility:hidden; content:marker")}ut=[]}if(e.childElementCount>0){for(st=document.getElementById(a+"_LayerIndex_"+n),st.appendChild(e),et=document.getElementById(a+"_LayerIndex_"+n+"_MarkerGroup"),i=0;i<e.childElementCount;i++)if("hidden"!==e.childNodes[i].style.visibility&&null!==(nt=(v=e.childNodes[i]).getBoundingClientRect())&&!(v.id.indexOf("_datalabel_")>-1)){for(s=i+1;s<e.childElementCount;s++)"hidden"!==e.childNodes[s].style.visibility&&(ht=e.children[s],null===(tt=ht.getBoundingClientRect())||ht.id.indexOf("_datalabel_")>-1||nt.left>tt.right||nt.right<tt.left||nt.top>tt.bottom||nt.bottom<tt.top||(w.push(ht),w.push(e.childNodes[s-1]),e.childNodes[s].style.visibility="hidden",e.childNodes[s-1].style.visibility="hidden",p.push(s)));if(w.length>0)for(v=e.childNodes[i],g=0;g<w.length;g++)"g"===v.tagName?v.childNodes[0].textContent=v.childNodes[0].textContent+","+w[g].textContent:v.textContent=v.textContent+","+w[g].textContent,e.childNodes[i-1].textContent=(+e.childNodes[i-1].textContent+ +w[g+1].textContent).toString(),g++;w=[]}for(;0<e.childNodes.length;)et.insertBefore(e.childNodes[0],et.firstChild);(st=document.getElementById(a+"_LayerIndex_"+n)).appendChild(et);st.removeChild(e)}}},e.prototype.createClusterShape=function(n,t,i,r,u,f,e,o){var s=document.createElementNS("http://www.w3.org/2000/svg",n);return s.setAttribute("id",t),s.setAttribute("fill",i),s.setAttribute("stroke",o.BorderColor),s.setAttribute("stroke-width",o.BorderWidth),s.setAttribute("stroke-dasharray",o.DashArray),s.setAttribute("fill-opacity",r),s.setAttribute("stroke-opacity",o.BorderOpacity),s.setAttribute("transform",u),s.setAttribute("style","visibility:visible"),s.setAttribute("style","cursor: pointer"),f?s.setAttribute("class","clusterGroup"):s.setAttribute(null,"class","clusterGroup"),s.innerHTML=e.toString(),s},e.prototype.click=function(n){var t=n.target.id,i=this.getMousePosition(n.pageX,n.pageY),r,f,e,l;if(t.split("_")[0],((t.indexOf("_Left_Page_Rect")>-1||t.indexOf("_Right_Page_Rect")>-1)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",t.indexOf("_Left_Page_Rect")>-1?1:0),(t.indexOf("shapeIndex")>-1||t.indexOf("Tile")>-1||this.markerClusterExpandCheck)&&this.sameMarkerData&&(this.mergeSeparateCluster(this.sameMarkerData,this.id),this.markerClusterExpandCheck=!1),t.indexOf("_Zooming_")>-1&&this.options.enableZoom)&&(r=1,t.indexOf("_ZoomIn_")>-1&&(f=t.split("_Zooming_ToolBar_")[1].split("_")[0],e=n.type,r=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,r>=1&&(this.scaleFactor=r,this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",f,e))),t.indexOf("_ZoomOut_")>-1&&(f=t.split("_Zooming_ToolBar_")[1].split("_")[0],e=n.type,r=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,r>=1&&(this.scaleFactor=r,this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",f,e))),t.indexOf("_Reset_")>-1&&(this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),f=t.split("_Zooming_ToolBar_")[1].split("_")[0],e=n.type,this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",f,e)),t.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.handleToolbarSelection("_Zooming_ToolBar_Zoom_Path","_Zooming_ToolBar_Pan_Path"),this.allowPanning=!1,this.enableSelectionZoom=!0),t.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.handleToolbarSelection("_Zooming_ToolBar_Pan_Path","_Zooming_ToolBar_Zoom_Path"),this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)),t.indexOf("_LayerIndex_")>-1&&t.indexOf("_MarkerIndex_")>-1){var o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),u=document.getElementById(t),c=void 0;"Balloon"===this.markerClusterCollection[o].Shape?!sf.base.isNullOrUndefined(u.firstElementChild)&&u.firstElementChild.innerHTML.length>0&&(c=u.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(u)&&u.innerHTML.length>0&&(c=u.innerHTML.split(","));this.removeAllHighlight();this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",o,s,h,t,i.x,i.y,c,t.indexOf("cluster")>-1?"cluster":"marker",this.isTouch)}t.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&(o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,o,l,"Shape",0));t.indexOf("_LayerIndex_")>-1&&t.indexOf("BubbleIndex")>-1&&(o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),s=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),h=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),u=document.getElementById(t),this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",o,s,h,t,i.x,i.y));t.indexOf("_Legend_")>-1&&(this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(t.split("_Index_")[1].split("_")[0],10)));-1===t.indexOf("_shapeIndex_")&&-1===t.indexOf("_MarkerIndex_")&&-1===t.indexOf("_BubbleIndex_")&&"Click"===this.options.tooltipDisplayMode&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0)},e.prototype.handleToolbarSelection=function(n,t){var r=document.getElementById(this.element.id+n),i;r&&(r.setAttribute("stroke",this.toolbarSelection),r.setAttribute("fill",this.toolbarSelection));i=document.getElementById(this.element.id+t);i&&(i.setAttribute("stroke",this.toolbarColor),i.setAttribute("fill",this.toolbarColor))},e.prototype.removeCluster=function(){var t=document.querySelectorAll('[class="clusterGroup"]'),n,i;if(t.length>0)for(n=0;n<t.length;n++)document.getElementById(t[n].id).remove();for(i=document.querySelectorAll('[style="visibility:hidden; content:marker"]'),n=0;n<i.length;n++)document.getElementById(i[n].id).setAttribute("style","visibility: visible;")},e.prototype.createImageUrl=function(n,t){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+n.outerHTML+"<\/svg>";return window.URL.createObjectURL(new Blob("SVG"===t?[i]:[(new XMLSerializer).serializeToString(n)],{type:"image/svg+xml"}))},e.prototype.imageExport=function(n,r,u){return t(this,void 0,void 0,function(){var t;return i(this,function(){return t=this,[2,new Promise(function(i){var s=document.createElement("canvas"),h=t.element.getBoundingClientRect(),o,a,c,v,l;s.width=h.width;s.height=h.height;var p=document.getElementById(t.element.id+"_svg"),w=t.createImageUrl(p,n),y=document.getElementById(t.element.id+"_animated_tiles").childNodes.length,f=s.getContext("2d"),e=document.getElementById(t.element.id+"_Map_title"),b=document.getElementById(t.element.id+"_MapBorder");for(sf.base.isNullOrUndefined(b)||(f.fillStyle=document.getElementById(t.element.id+"_MapBorder").getAttribute("fill"),f.fillStyle="transparent"===f.fillStyle?"#ffffff":f.fillStyle,f.fillStyle=t.options.background?t.options.background:"#ffffff"),sf.base.isNullOrUndefined(e)||(f.font=e.getAttribute("font-size")+" Arial",f.fillStyle=e.getAttribute("fill"),f.fillText(e.textContent,parseFloat(e.getAttribute("x")),parseFloat(e.getAttribute("y")))),f.save(),o=document.getElementById(t.element.id+"_Tile_SVG_Parent"),f.rect(parseFloat(o.style.left),parseFloat(o.style.top),parseFloat(o.style.width),parseFloat(o.style.height)),f.clip(),f.fillRect(0,0,h.width,h.height),t.exportedCount=0,a=[],c=0;c<y;c++)v=document.getElementById(t.element.id+"tile"+c),l=new Image,l.crossOrigin="Anonymous",a.push(t.renderImages(s,v,f,l,y,n,r,w,t,u)),l.src=v.children[0].getAttribute("src");Promise.all(a).then(function(n){for(var t=0;t<n.length;t++)if(null!=n[t]){i(n[t]);break}})})]})})},e.prototype.renderImages=function(n,t,i,r,u,f,e,o,s,h){return new Promise(function(c){r.onload=function(){var l,a;(s.exportedCount++,i.setTransform(1,0,0,1,parseFloat(t.style.left)+10,parseFloat(t.style.top)+parseFloat(document.getElementById(s.element.id+"_tile_parent").style.top)),i.drawImage(r,0,0),s.exportedCount===u)?(l=document.getElementById(s.element.id+"_Tile_SVG_Parent"),o=s.createImageUrl(l.childNodes[0],f),a=new Image,a.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(l.style.left),parseFloat(l.style.top)),i.drawImage(a,0,0),h)s.triggerDownload(f,e,n.toDataURL("image/png").replace("image/png","image/octet-stream")),c(null);else{var t="JPEG"===f?n.toDataURL("image/jpeg"):"PNG"===f?n.toDataURL("image/png"):"";c(t)}},a.src=o):c(null)}})},e.prototype.triggerDownload=function(n,t,i){var r=document.createElement("a");r.download=t+"."+n.toLocaleLowerCase();r.href=i;r.click()},e.prototype.getMousePosition=function(n,t){var i=this.element.getBoundingClientRect(),r=this.element.ownerDocument.defaultView.pageXOffset,f=this.element.ownerDocument.defaultView.pageYOffset,e=this.element.ownerDocument.documentElement.clientTop,o=this.element.ownerDocument.documentElement.clientLeft,s=i.left+r-o,h=i.top+f-e;return new u(n-s,t-h)},e.prototype.getBound=function(n){var t=document.getElementById(n);return{x:t.offsetLeft,y:t.offsetTop}},e.prototype.createToolbarStyle=function(n,t){var u=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path"),i,f,r;sf.base.isNullOrUndefined(u)||u.setAttribute("stroke",this.toolbarColor);this.zoomClick=!1;i=document.getElementById(this.element+"_zoomToolbar_style");i&&i.parentNode.removeChild(i);f=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+n+"; } .e-maps-toolbar:hover > path { fill: "+n+" ;  stroke: "+n+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }";r=document.createElement("style");r.id=this.element+"_zoomToolbar_style";r.appendChild(document.createTextNode(f));t.appendChild(r)},e.prototype.render=function(){this.wireEvents()},e}();return{getMarker:function(n,t,i,r){r&&r.blazor__instance&&r.blazor__instance.clusterExpand(n,t,i)},markerCluster:function(n){if(n&&n.blazor__instance)for(var i=!1,t=0;t<n.blazor__instance.layerCount;t++)i||(n.blazor__instance.removeCluster(),i=!0),n.blazor__instance.clusterMarkers(t)},itemHighlight:function(n,t,i,r,u,f){f&&f.blazor__instance&&f.blazor__instance.itemHighlightHandle(n,t,i,r,u)},shapeHighlight:function(n,t,i,r){r&&r.blazor__instance&&r.blazor__instance.shapeHighlightHandle(n,t,i)},panDirection:function(n,t,i,r,u,f){f&&f.blazor__instance&&f.blazor__instance.panning(n,t,i,r,u)},initialize:function(n,t,i){return new e(n.id,n,t,i).render(),this.getElementSize(n)},getElementSize:function(n){var i,r,u,f,t;return null!==n&&(t=n.getBoundingClientRect(),i=t.width,r=t.height,u=t.x,f=t.y),{width:i,height:r,isIE:sf.base.Browser.isIE,x:u,y:f}},getElementBounds:function(n){var i=document.getElementById(n),t;return i?(t=i.getBoundingClientRect(),{width:t.width,height:t.height,top:t.top,bottom:t.bottom,left:t.left,right:t.right}):null},getBound:function(n){var t=document.getElementById(n);return{x:t.offsetLeft,y:t.offsetTop}},getBoundData:function(n){var t=document.getElementById(n);return{x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}},getTileZoom:function(n,r,u,f,e,o,s,h){return t(this,void 0,void 0,function(){var v,p,w,c,t,l,a,b,k,d,y;return i(this,function(i){switch(i.label){case 0:v=document.getElementById(n+"_animated_tiles");p=parseInt(v.className,10);v.children[s].setAttribute("style","top:"+u+"; height:"+e+";width:"+o+"; left:"+r+"; position:absolute;");v.children[s].innerHTML="";(w=document.createElement("img")).src=f;v.children[s].appendChild(w);c=document.getElementById(n+"_LayerCollections");t=0;i.label=1;case 1:if(!(t<c.children.length))return[3,8];l=0;i.label=2;case 2:if(!(l<c.children[t].childElementCount))return[3,7];if(!(c.children[t].children[l].id.indexOf("MarkerGroup")>-1))return[3,6];a=0;i.label=3;case 3:return a<c.children[t].children[l].childElementCount?(b=parseInt(c.children[t].children[l].children[a].id.split("_LayerIndex_")[1].split("_")[0],10),k=parseInt(c.children[t].children[l].children[a].id.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(c.children[t].children[l].children[a].id.split("_dataIndex_")[1].split("_")[0],10),[4,h.invokeMethodAsync("ZoomMarker",b,k,d,0,0,p,h)]):[3,6];case 4:y=i.sent();c.children[t].children[l].children[a].setAttribute("transform","translate("+y[0]+","+y[1]+")");i.label=5;case 5:return a++,[3,3];case 6:return l++,[3,2];case 7:return t++,[3,1];case 8:return[2,s]}})})},getLayer:function(n){var t=document.getElementById(n+"_LayerCollections").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getElement:function(n){var t=document.getElementById(n).getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getSvg:function(n){var t=document.getElementById(n+"_svg").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},updateTileTranslatePoint:function(n,t,i,r,u,f,e,o,s,h){h&&h.blazor__instance&&(h.blazor__instance.tileTranslatePoint={x:n.x,y:n.y},h.blazor__instance.translatePoint={x:t.x,y:t.y},h.blazor__instance.areaRect={x:i,y:r,width:u,height:f},h.blazor__instance.marginLeft=e,h.blazor__instance.marginTop=o,h.blazor__instance.tileZoomLevel=h.blazor__instance.options.factor=h.blazor__instance.scaleFactor=s,(s===h.blazor__instance.options.maxZoom||s>1||1===s)&&""===h.blazor__instance.previousId&&(h.blazor__instance.toolbarOpacity(h.blazor__instance.toolbarButtonOpacity,h.blazor__instance.toolbarShapeOpacity),s===h.blazor__instance.options.maxZoom&&document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",h.blazor__instance.toolbarColor),document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",h.blazor__instance.toolbarColor),h.blazor__instance.isPan=!1)),h.blazor__instance.isTileMap&&h.blazor__instance.previousId.indexOf("_Reset_")>-1&&(h.blazor__instance.options.enablePanning||document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",h.blazor__instance.toolbarColor),document.getElementById(h.blazor__instance.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",h.blazor__instance.toolbarColor)),h.blazor__instance.enableSelectionZoom=!h.blazor__instance.enableSelectionZoom&&h.blazor__instance.enableSelectionZoom),h.blazor__instance.isPan=!!(h.blazor__instance.previousId.indexOf("_Reset_")>-1&&h.blazor__instance.options.enablePanning)||h.blazor__instance.isPan)},updateTranslatePoint:function(n,t,i,r,u,f,e,o,s){s&&s.blazor__instance&&(s.blazor__instance.shapeTranslatePoint=n,s.blazor__instance.areaRect={x:t,y:i,width:r,height:u},s.blazor__instance.marginLeft=f,s.blazor__instance.marginTop=e,s.blazor__instance.options.factor=s.blazor__instance.scaleFactor=o,s.blazor__instance.previousId.indexOf("_Reset_")>-1&&document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Pan_Rect")&&(1===s.blazor__instance.options.minZoom&&(document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",s.blazor__instance.toolbarColor),document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",s.blazor__instance.toolbarColor)),s.blazor__instance.enableSelectionZoom=!1,s.blazor__instance.isPan=!0),o===s.blazor__instance.options.maxZoom&&s.blazor__instance.enableSelectionZoom&&(s.blazor__instance.isPan=!1),(o===s.blazor__instance.options.maxZoom||o>1||1===o)&&""===s.blazor__instance.previousId&&(s.blazor__instance.toolbarOpacity(s.blazor__instance.toolbarButtonOpacity,s.blazor__instance.toolbarShapeOpacity),o===s.blazor__instance.options.maxZoom&&document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",s.blazor__instance.toolbarColor),document.getElementById(s.blazor__instance.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",s.blazor__instance.toolbarColor))))},updateMapBound:function(n,t){n&&n.blazor__instance&&(n.blazor__instance.baseMapBounds=t)},updateZoomSettings:function(n,t){n&&n.blazor__instance&&(n.blazor__instance.options.enableZoom=t.enable,n.blazor__instance.options.zoomOnClick=t.zoomOnClick,n.blazor__instance.options.doubleClickZoom=t.doubleClickZoom,n.blazor__instance.options.enablePanning=t.enablePanning,n.blazor__instance.options.enablePinchZooming=t.pinchZooming,n.blazor__instance.options.enableSelectionZooming=t.enableSelectionZooming,n.blazor__instance.options.enableMouseWheelZoom=t.mouseWheelZoom)},updateCollection:function(n,t){n&&n.blazor__instance&&(n.blazor__instance.bubbleCollection=JSON.parse(t.bubble),n.blazor__instance.labelCollection=JSON.parse(t.dataLabel),n.blazor__instance.dataLabelTemplateCollection=JSON.parse(t.dataLabelTemplate),n.blazor__instance.markerSettings=JSON.parse(t.markerSettings),n.blazor__instance.markerClusterCollection=JSON.parse(t.markerCluster),n.blazor__instance.baseMapBounds={latitudeMax:t.latitudeMax,latitudeMin:t.latitudeMin,longitudeMax:t.longitudeMax,longitudeMin:t.longitudeMin,minBounds:t.minBounds,maxBounds:t.maxBounds,availableSize:t.availableSize},n.blazor__instance.isTileMap=t.isTileMap,n.blazor__instance.legendType=t.legendSettings,n.blazor__instance.urlTemplate=t.urlTemplate,n.blazor__instance.key=t.key,n.blazor__instance.dataSource=JSON.parse(t.markerDataSource),n.blazor__instance.toolbarSelection=t.toolbarSelection,n.blazor__instance.toolbarColor=t.toolbarColor,n.blazor__instance.mapsBorderWidth=t.mapsBorder,n.blazor__instance.toolbarButtonOpacity=t.toolbarButtonOpacity,n.blazor__instance.toolbarShapeOpacity=t.toolbarShapeOpacity)},updateLayerHighlight:function(n,t,i,r){r&&r.blazor__instance&&(i?(r.blazor__instance.options.layerHighlightSettings[n].BorderColor=t.borderColor,r.blazor__instance.options.layerHighlightSettings[n].BorderWidth=t.borderWidth,r.blazor__instance.options.layerHighlightSettings[n].BorderOpacity=t.borderOpacity):(r.blazor__instance.options.layerHighlightSettings[n].Fill=t.fill,r.blazor__instance.options.layerHighlightSettings[n].Opacity=t.opacity,r.blazor__instance.options.layerHighlightSettings[n].Enable=t.enable))},updateMarkerHighlight:function(n,t,i,r,u){u&&u.blazor__instance&&(r?(u.blazor__instance.options.markerHighlightSettings[n][t].BorderColor=i.borderColor,u.blazor__instance.options.markerHighlightSettings[n][t].BorderWidth=i.borderWidth,u.blazor__instance.options.markerHighlightSettings[n][t].BorderOpacity=i.borderOpacity):(u.blazor__instance.options.markerHighlightSettings[n][t].Fill=i.fill,u.blazor__instance.options.markerHighlightSettings[n][t].Opacity=i.opacity,u.blazor__instance.options.markerHighlightSettings[n][t].Enable=i.enable))},updateBubbleHighlight:function(n,t,i,r,u){u&&u.blazor__instance&&(r?(u.blazor__instance.options.bubbleHighlightSettings[n][t].BorderColor=i.borderColor,u.blazor__instance.options.bubbleHighlightSettings[n][t].BorderWidth=i.borderWidth,u.blazor__instance.options.bubbleHighlightSettings[n][t].BorderOpacity=i.borderOpacity):(u.blazor__instance.options.bubbleHighlightSettings[n][t].Fill=i.fill,u.blazor__instance.options.bubbleHighlightSettings[n][t].Opacity=i.opacity,u.blazor__instance.options.bubbleHighlightSettings[n][t].Enable=i.enable))},updateTooltipDisplayMode:function(n,t){n&&n.blazor__instance&&(n.blazor__instance.options.tooltipDisplayMode=t)},updateNavigationHighlight:function(n,t,i,r,u){u&&u.blazor__instance&&(r?(u.blazor__instance.options.navigationHighlightSettings[n][t].BorderColor=i.borderColor,u.blazor__instance.options.navigationHighlightSettings[n][t].BorderWidth=i.borderWidth,u.blazor__instance.options.navigationHighlightSettings[n][t].BorderOpacity=i.borderOpacity):(u.blazor__instance.options.navigationHighlightSettings[n][t].Fill=i.fill,u.blazor__instance.options.navigationHighlightSettings[n][t].Opacity=i.opacity,u.blazor__instance.options.navigationHighlightSettings[n][t].Enable=i.enable))},exportToImage:function(n,r,u,f){return t(this,void 0,void 0,function(){var e,o=this;return i(this,function(s){switch(s.label){case 0:return f&&f.blazor__instance?[4,f.blazor__instance.imageExport(n,r,u)]:[3,2];case 1:e=s.sent();s.label=2;case 2:return _instanceof(e,Promise)?[4,e.then(function(n){return t(o,void 0,void 0,function(){return i(this,function(){return[2,n]})})})]:[3,4];case 3:return s.sent(),[3,5];case 4:return[2,e];case 5:return[2]}})})},getLegendRect:function(n){var t=document.getElementById(n).getBoundingClientRect(),r=n.split("_Legend_")[0],i=document.getElementById(r).getBoundingClientRect();return{x:t.left-i.left,y:t.top-i.top,width:t.width,height:t.height}},markerAnimation:function(n,t,i,r){r&&r.blazor__instance&&r.blazor__instance.markerAnimation(n,t,i)},layerAnimation:function(n,t,i,r,u,f,e){if(e&&e.blazor__instance&&n!==e.id)for(var s=document.getElementById(n+"_LayerIndex_0"),o=0;o<s.children.length;o++)null!==s.children[o].getAttribute("transform")&&this.zoomAnimation(s.children[o],0,1e3,r,u,t,i,f)},slope:function(n,t){return n.x===t.x?null:(t.y-n.y)/(t.x-n.x)},interception:function(n,t){return null===t?n.x:n.y-t*n.x},zoomAnimation:function(n,t,i,r,u,f,e){var a=this,h=0,o={x:r.x,y:r.y},v=u-e,s={x:0,y:0},c=1;if(u!==e){var l=this.slope(f,o),y=this.interception(f,l),p=o.x-f.x,w=o.y-f.y;new sf.base.Animation({}).animate(n,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(n.style.visibility="visible",h=(t.timeStamp-t.delay)/t.duration,c=e+h*v,s.x=f.x+h*p/(c/u),s.y=sf.base.isNullOrUndefined(l)?l*s.x+y:f.y+h*w,n.setAttribute("transform","scale( "+c+" ) translate( "+s.x+" "+s.y+" )"))},end:function(){n.setAttribute("transform","scale( "+u+" ) translate( "+o.x+" "+o.y+" )");a.dotNetRef.invokeMethodAsync("TriggerAnimation",n)}})}else n.setAttribute("transform","scale( "+u+" ) translate( "+o.x+" "+o.y+" )")},bubbleAnimation:function(n,t,i,r){r&&r.blazor__instance&&r.blazor__instance.bubbleAnimation(n,t,i)},getToolbarAlign:function(n,t,i){var s=t.verticalAlignment,h=t.horizontalAlignment,u=document.getElementById(n+"_Zooming_KitCollection").getBoundingClientRect(),f=0,e=0,r,o;switch(s){case 0:e=t.y;break;case 1:e=t.height/2-u.height/2+t.mapsBorder;break;case 2:e=t.height-u.height+t.mapsBorder-2*t.buttonPadding}switch(h){case 0:f=t.x;break;case 1:f=t.width/2-u.width/2+t.mapsBorder;break;case 2:f=t.width-u.width-2*t.buttonPadding+t.mapsBorder}r=document.getElementById(n+"_ToolBar");r.style.left=f+"px";r.style.top=e+"px";r.style.visibility="visible";o=t.color;i&&i.blazor__instance&&i.blazor__instance.createToolbarStyle(o,r)},getTemplate:function(n,t,i,r,u,f,e,o){for(var s,a,v,y=n[0],c=Object.keys(y),l=t,h=0;h<c.length;h++)"latitude"!==c[h].toLowerCase()&&"longitude"!==c[h].toLowerCase()&&(l=l.replace(new RegExp("{{:"+c[h]+"}}","g"),y[c[h].toString()]));return s=document.createElementNS("http://www.w3.org/2000/svg","div"),s.setAttribute("id",u),s.style.position="absolute",s.style.transform="translate(-50 %, -50 %)",s.style.left=r.toString(),s.style.top=i.toString(),s.innerHTML=l.toString(),a=document.getElementById(o+"_LayerIndex_0_Markers_Template_Group"),a.appendChild(s),v=document.getElementById(o+"_Secondary_Element"),v.appendChild(a),document.getElementById(o).appendChild(v),l}}}()},"./modules/sf-maskedtextbox.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.MaskedTextBox=function(){"use strict";var n=function(){function n(n,t,i,r){this.ismultipledelete=!1;this.isClicked=!1;this.previousVal="";this.inputData=null;this.isFocusInput=!1;this.wrapperElement=n;this.isClicked=!1;this.sIndex=0;this.eIndex=0;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i;this.previousVal=this.options.maskedValue}return n.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this);sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this);sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this);sf.base.EventHandler.add(this.element,"cut",this.cutHandler,this);sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this);sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this);sf.base.EventHandler.add(this.element,"input",this.inputHandler,this);sf.base.EventHandler.add(this.element,"select",this.selectionHandler,this)},n.prototype.focusOutHandler=function(){var n=this.wrapperElement.querySelector(".e-clear-icon");null!==n&&n.classList.add("e-clear-icon-hide")},n.prototype.mouseDownHandler=function(){this.isClicked=!0},n.prototype.mouseUpHandler=function(){this.isClicked=!1;sf.base.Browser.isDevice&&(this.ismultipledelete=!1,this.sIndex=this.eIndex=0)},n.prototype.selectionHandler=function(){var n=this.element;n.selectionStart!==n.selectionEnd&&sf.base.Browser.isDevice&&(this.sIndex=n.selectionStart,this.eIndex=n.selectionEnd)},n.prototype.keyDownHandler=function(){var n=this.element;this.previousVal=n.value;sf.base.Browser.isDevice||(n.selectionStart!==n.selectionEnd?(this.sIndex=n.selectionStart,this.eIndex=n.selectionEnd):(this.ismultipledelete=!1,this.sIndex=this.eIndex=0))},n.prototype.inputHandler=function(n){var t,f;if(this.options.mask)if(t=this.element,n.data||n.inputType){var r=n.data?n.data:"deleteContentBackward"===n.inputType?"Backspace":"deleteContentForward"===n.inputType?"Delete":null,i=t.selectionStart,u=t.selectionEnd;(this.sIndex!==this.eIndex?(this.ismultipledelete=!0,i=this.sIndex,u=this.eIndex,this.sIndex=this.eIndex=0):u=i=n.data?i-1:"deleteContentBackward"===n.inputType?i+1:i,t.value=this.previousVal,t.selectionStart=t.selectionEnd=i,this.ismultipledelete)?(this.ismultipledelete=!1,f=this.multipleDeletion(this.previousVal,i,u),t.value=f,this.previousVal=t.value,t.selectionStart=t.selectionEnd=i,null!==r&&"Backspace"!==r&&"Delete"!==r&&this.updateMask(r,i)):this.updateMask(r,i);this.previousVal=t.value;this.updateServerValue()}else this.inputData=t.value,t.value=this.previousVal,t.selectionStart=t.selectionEnd=t.selectionStart,this.pasteHandler(n)},n.prototype.multipleDeletion=function(n,t,i){for(var u=n,r=t;r<i;r++)u=u.substring(0,r)+this.options.promptMask[r]+u.substring(r+1);return u},n.prototype.updateServerValue=function(){var n=this,t=this.element;setTimeout(function(){n.dotNetRef.invokeMethodAsync("UpdateInputValue",t.value,!1)},20)},n.prototype.updateMask=function(n,t){var i=this.element,r,u,f,e;this.ismultipledelete||(r=this.previousVal,u="",t>=0&&t<this.options.customRegExpCollec.length&&(u=1===this.options.customRegExpCollec[t].length?this.getRegex(this.options.customRegExpCollec[t]):this.options.customRegExpCollec[t]),f=new RegExp(u),"Backspace"===n||"Delete"===n?"Backspace"===n?(i.value=this.options.promptMask[t-1]===this.options.promptCharacter?r.substring(0,t-1)+this.options.promptCharacter+r.substring(t):r.substring(0,t-1)+this.options.promptMask[t-1]+r.substring(t),i.selectionStart=i.selectionEnd=t-1):(i.value=this.options.promptMask[t]===this.options.promptCharacter?r.substring(0,t)+this.options.promptCharacter+r.substring(t+1):r.substring(0,t)+this.options.promptMask[t]+r.substring(t+1),i.selectionStart=i.selectionEnd=t):t<this.options.promptMask.length&&(this.options.promptMask[t]===this.options.promptCharacter?f.test(n)&&(e=this.getLetterCase(n,t),i.value=r.substring(0,t)+e+r.substring(t+1),i.selectionStart=i.selectionEnd=t+1):(i.selectionStart=i.selectionEnd=t+1,this.updateMask(n,i.selectionStart))))},n.prototype.getRegex=function(n){var t="";switch(n){case"0":t="\\d";break;case"9":t="[0-9 ]";break;case"L":t="[A-Za-z]";break;case"A":t="[A-Za-z0-9]";break;case"a":t="[A-Za-z0-9 ]";break;case"C":t="[^]+";break;case"#":t="[0-9 +-]";break;case"?":t="[A-Za-z ]";break;case"&":t="[^ ]+";break;default:t="("===n||"+"===n||")"===n?"\\"+n:n}return t},n.prototype.getLetterCase=function(n,t){for(var e=!1,o=!1,s=!1,h=!1,r=this.options.hiddenMask,u=[],f=[],i=0;i<r.length;i++)"<"!==r[i]&&!e||">"===r[i]||"|"===r[i]?">"!==r[i]&&!o||"<"===r[i]||"|"===r[i]?"|"!==r[i]&&!s||"<"===r[i]||">"===r[i]?h||(u[i]=!1,f[i]=!1):(s=h=!0,o=e=!1,u[i]=!1,f[i]=!1,"|"===r[i]&&(r=r.replace(r[i],""))):(o=h=!0,e=s=!1,u[i]=!1,f[i]=!0,">"===r[i]&&(r=r.replace(r[i],""))):(e=h=!0,o=s=!1,u[i]=!0,f[i]=!1,"<"===r[i]&&(r=r.replace(r[i],"")));return f[t]?n.toUpperCase():u[t]?n.toLowerCase():n},n.prototype.focusHandler=function(){var t=this,n=this.element,i=0,r=this.stripValue(n.value),u=!1,f=!1;if(null!==this.options.mask&&(null!==r&&""!==r||"Always"===this.options.floatLabelType||null===this.options.placeHolder||""===this.options.placeHolder||(n.value=this.options.maskedValue),setTimeout(function(){if(n.selectionStart===t.options.mask.length||n.value[n.selectionStart]===t.options.promptCharacter)u=!0;else for(var i=n.selectionStart;i<t.options.mask.length;i++){if(n.value[i]===t.options.promptCharacter){u=!0;break}if(n.value[i]!==t.options.mask[i]){u=!1;break}}}),setTimeout(function(){var r=n.selectionStart-1,i;if(r===t.options.mask.length-1||n.value[r]===t.options.promptCharacter)f=!0;else for(i=r;i>=0;i--){if(n.value[i]===t.options.promptCharacter){f=!0;break}if(n.value[i]!==t.options.mask[i]){f=!1;break}}}),this.isClicked||this.isFocusInput||"Always"!==this.options.floatLabelType&&(null===r||""===r)&&null!==this.options.placeHolder&&""!==this.options.placeHolder)){for(this.isFocusInput=!0,i=0;i<this.options.mask.length;i++)if(n.value[i]===this.options.promptCharacter){setTimeout(function(){(u||f)&&(n.selectionEnd=i,n.selectionStart=i)});break}this.isClicked=!1}},n.prototype.stripValue=function(n){var i="",t;if(null!==this.options.mask&&null!=n&&""!==n)for(t=0;t<this.options.mask.length;t++)this.options.mask[t]!==n[t]&&(i+=n[t]);return i},n.prototype.pasteHandler=function(n){var u=this,t,i,r;null!==this.options.mask&&!this.options.readonly&&this.options.enabled&&(t=this.element,i=void 0,(void 0===n.clipboardData||this.inputData?(i=this.inputData,t.selectionStart=t.selectionEnd=0,this.inputData=null):i=n.clipboardData.getData("text/plain"),null!==i)&&(r={Readonly:!1,Enabled:!0,Value:t.value,selectionEnd:t.selectionEnd,selectionStart:t.selectionStart,IsMultipleDelete:this.ismultipledelete,PasteValue:i},n.preventDefault(),this.dotNetRef.invokeMethodAsync("UpdatePasteValue",r).then(function(n){t.value=n.inputValue;t.selectionStart=t.selectionEnd=n.cursorPosition;u.previousVal=t.value})))},n.prototype.cutHandler=function(n){var u;if(this.options.mask){var t=this.element,i=t.selectionStart,r=t.selectionEnd;i!==r&&null!==this.options.mask&&(this.ismultipledelete=!0,u=t.value.substring(i,r),n.clipboardData.setData("text",u),window.clipboardData.setData("text",u),t.value=this.multipleDeletion(t.value,i,r),t.selectionStart=t.selectionEnd=i,this.previousVal=t.value,this.updateServerValue())}},n.prototype.propertyChange=function(n){this.options=n;this.previousVal=this.options.maskedValue},n}();return{initialize:function(t,i,r,u){i&&new n(t,i,r,u);i&&i.blazor__instance&&i.blazor__instance.initialize()},propertyChange:function(n,t){n&&n.blazor__instance&&n.blazor__instance.propertyChange(t)},focusIn:function(n){n&&(n.blazor__instance.isFocusInput=!0,n.focus())},focusOut:function(n){n&&n.blur()}}}()},"./modules/sf-menu.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Menu=function(){"use strict";function t(n,t,r,u){var o,l;if(40===r||38===r){var f=void 0,e=void 0,s=void 0;t.classList.contains("e-menu-parent")?((s=(e=t).querySelector(".e-menu-item.e-focused"))?(f=Array.prototype.indexOf.call(e.children,s),f=40===r?f===e.childElementCount-1?0:f+1:0===f?e.childElementCount-1:f-1):f=0,f=i(e,f,40===r)):t.classList.contains("e-menu-item")&&(s=(e=t.parentElement).querySelector(".e-menu-item.e-focused"),f=Array.prototype.indexOf.call(e.children,s||t),f=i(e,f=40===r?f===e.childElementCount-1?0:f+1:0===f?e.childElementCount-1:f-1,40===r));e&&-1!==f&&e.children[f].focus()}else if(((n.classList.contains("e-rtl")?39===r:37===r)||27===r||13===r&&sf.base.closest(t,".e-menu-container"))&&(t.classList.contains("e-ul")||t.classList.contains("e-menu-item")&&!t.parentElement.classList.contains("e-contextmenu"))){o=void 0;u&&(o=sf.base.select(u));e=t.classList.contains("e-ul")?t:t.parentElement;var c=sf.base.closest(e,".e-menu-vscroll"),h=void 0,a=c?c.previousElementSibling:e.previousElementSibling;!o||a&&13!==r?(l=sf.base.closest(e,".e-hamburger"),h=l?sf.base.select(".e-menu-item.e-selected",l):sf.base.select(".e-menu-item.e-selected",a)):(h=sf.base.select(".e-menu-item.e-selected",o),(c=sf.base.select(".e-menu-vscroll",n))&&o.blazor__instance.destroyScroll("none"));h&&h.focus()}}function i(n,t,r,u){void 0===u&&(u=0);var f=n.children[t];return u===n.childElementCount?-1:((f.classList.contains("e-separator")||f.classList.contains("e-disabled")||f.classList.contains("e-menu-hide"))&&(t=r?t===n.childElementCount-1?0:t+1:0===t?n.childElementCount-1:t-1,u++),((f=n.children[t]).classList.contains("e-separator")||f.classList.contains("e-disabled")||f.classList.contains("e-menu-hide"))&&(t=i(n,t,r)),t)}var n="e-menu-item",r=function(){function i(n,t){this.element=n.element;this.dotnetRef=t;this.enableScroller=n.enableScrolling;this.element.blazor__instance=this;this.addEventListener();this.updateScroll(n.enableScrolling,n.isRtl,!1)}return i.prototype.calculatePosition=function(t){var u,s,i=t.element.getElementsByClassName(n)[t.itemIndex].getBoundingClientRect(),f=t.popup.blazor__instance.hideMenu(!0),h,o,e,c,r,l,a;f&&((this.popup=t.popup,t.enableScrolling)&&(this.destroyScroll(null,f),t.scrollHeight&&(f=sf.navigations.addScrolling(sf.base.createElement,t.popup,f,"vscroll",t.isRtl,t.scrollHeight)),h=this.popup.querySelector(".e-vscroll-bar"),h&&sf.base.EventHandler.add(h,"scroll",this.scrollHandler,this)),o=f.classList.contains("e-menu-parent")?f:sf.base.select(".e-menu-parent",f),t.popup.blazor__instance.setBlankIconStyle(o,t.isRtl),c=o.getBoundingClientRect(),r=t.popup.blazor__instance.getMenuWidth(o,c.width,t.isRtl),t.isVertical?(s=i.top,t.isRtl)?(u=i.left)-r<document.documentElement.clientLeft&&(e=i.right+r)<document.documentElement.clientWidth&&(u=e):(u=i.right)+r>document.documentElement.clientWidth&&(e=i.left-r)>document.documentElement.clientLeft&&(u=e):(s=i.bottom,t.isRtl)?(u=i.right,i.right-r<document.documentElement.clientLeft)&&(e=i.left+r)<document.documentElement.clientWidth&&(u=e):(u=i.left)+r>document.documentElement.clientWidth&&(e=i.right-r)>document.documentElement.clientLeft&&(u=e),l=t.scrollHeight||c.height,s+l>document.documentElement.clientHeight&&(a=document.documentElement.clientHeight-l-20,a>document.documentElement.clientTop&&(s=a)),t.popup.blazor__instance.updateProperty(t.showItemOnClick,t.element),this.popup.style.zIndex=sf.popups.getZindexPartial(this.popup).toString(),f.style.width=Math.ceil(r)+"px",this.popup.style.left=Math.ceil(u)+"px",this.popup.style.top=Math.ceil(s)+"px",o.style.visibility="",o.focus())},i.prototype.subMenuPosition=function(n){var t=n.popup.blazor__instance.hideMenu();n.enableScrolling&&t&&(this.destroyScroll(null,t),n.scrollHeight&&(t=sf.navigations.addScrolling(sf.base.createElement,n.popup,t,"vscroll",n.isRtl,n.scrollHeight)));n.popup.blazor__instance.subMenuPosition(t,n.isRtl,n.showItemOnClick,!1,n.scrollHeight)},i.prototype.clickHandler=function(t){var i=t.target,u,r;!sf.base.isNullOrUndefined(this.popup)&&sf.base.closest(i,"#"+this.popup.id)?(r=sf.base.closest(i,"."+n))&&!r.classList.contains("e-menu-caret-icon")&&(sf.base.closest(i,"."+n+".e-selected")||this.destroyScroll("none"),u=sf.base.select(".e-selected",this.element),!u||sf.base.closest(document.activeElement,"#"+this.popup.id)&&"LI"!==document.activeElement.tagName||u.focus()):!sf.base.closest(i,"#"+this.element.id+".e-hamburger")||i.classList.contains("e-menu-parent")||i.classList.contains("e-menu-container")||(r=i.classList.contains(n)?i:sf.base.closest(i,"."+n+".e-focused"))&&!r.classList.contains("e-menu-caret-icon")&&this.focusMenu(!0)},i.prototype.resizeMenu=function(){var i;if(this.enableScroller){var n=this.element.parentElement.querySelectorAll(".e-menu-container")[0],t=n.getElementsByClassName("e-menu-parent")[0],u=sf.base.select(".e-menu-hscroll",n),f=t&&t.offsetWidth,r=window.innerWidth-t.getBoundingClientRect().left;f>r&&(n.style.width=Math.ceil(r)+"px",!u)&&(i=sf.base.select(".e-menu",n),i&&sf.navigations.addScrolling(sf.base.createElement,n,i,"hscroll",!1))}},i.prototype.scrollHandler=function(){var n=this.popup.querySelector(".e-menu-parent");null!=n&&n.classList.contains("e-transparent")&&n.classList.remove("e-transparent")},i.prototype.keyDownHandler=function(n){(n.preventDefault(),this.element.classList.contains("e-hamburger"))?t(this.element,n.target,n.keyCode):sf.base.select(".e-menu",this.element).classList.contains("e-vertical")?38!==n.keyCode&&40!==n.keyCode||t(this.element,n.target,n.keyCode):37!==n.keyCode&&39!==n.keyCode||t(this.element,n.target,37===n.keyCode?38:40)},i.prototype.focusMenu=function(t){var r,i,u;sf.base.select(".e-menu-vscroll",this.popup)?(this.destroyScroll(""),r=this.popup.blazor__instance.getLastMenu(),r&&r.focus()):(i=sf.base.selectAll(".e-menu-parent",this.element),i.length&&(t?i[0].focus():(u=sf.base.select("."+n+".e-focused",i[i.length-1]),(u||i[i.length-1]).focus())))},i.prototype.destroyScroll=function(n,t,i){var r,e=sf.base.selectAll(".e-menu-vscroll",this.popup),u=[].slice.call(sf.base.selectAll(".e-menu-parent",this.popup)),f=-1;!sf.base.isNullOrUndefined(n)&&t&&(f=u.indexOf(t));e.forEach(function(e){r=sf.base.select(".e-ul",e);i||r&&!sf.base.isNullOrUndefined(n)?t?u.indexOf(r)>f&&(e.style.display=n):e.style.display=n:sf.navigations.destroyScroll(sf.base.getInstance(e,sf.navigations.VScroll),e,t)})},i.prototype.mouseDownHandler=function(t){var r=t.target,u=!document.body.contains(this.element),i,f,e;(sf.base.isNullOrUndefined(this.element)||u)&&this.removeEventListener(!1);i=sf.base.closest(r,".e-scroll-nav");(sf.base.isNullOrUndefined(this.popup)||!sf.base.closest(r,"#"+this.popup.id)||i)&&(f=sf.base.selectAll(".e-ul",this.element).length,(u||!sf.base.select(".e-focused",this.element)&&!sf.base.select(".e-selected",this.element)||sf.base.closest(t.target,"#"+this.element.id)||i&&!(f>1)||this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!0,!1,!sf.base.isNullOrUndefined(i),!1,!1),sf.base.isNullOrUndefined(this.popup)||sf.base.isNullOrUndefined(this.popup.blazor__instance)||sf.base.closest(t.target,"."+n+".e-selected")&&this.popup.blazor__instance.subMenuOpen||i)||(this.popup.blazor__instance.subMenuOpen?this.destroyScroll("none"):(e=sf.base.closest(t.target,".e-ul"),sf.base.select(".e-menu-vscroll",this.popup)&&this.destroyScroll("none",e))))},i.prototype.mouseOverHandler=function(t){var r=document.body.contains(this.element),i;!sf.base.isNullOrUndefined(this.element)&&r||this.removeEventListener(!1);i=sf.base.closest(t.target,"."+n);this.popup&&this.popup.blazor__instance.subMenuOpen&&sf.base.closest(t.target,"#"+this.element.id)&&i&&(i.querySelector(".e-caret")&&parseInt(this.popup.style.top)===Math.ceil(t.target.getBoundingClientRect().top)||this.destroyScroll("none",sf.base.closest(t.target,".e-ul"),!0));r&&sf.base.select(".e-focused",this.element)&&!sf.base.closest(t.target,"#"+this.element.id)&&this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!1,!1,!1,!0,!0)},i.prototype.updateScroll=function(n,t,i){var u,r,f;n?(sf.base.EventHandler.add(window,"resize",this.resizeMenu,this),u=sf.base.select(".e-menu",this.element),u&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,u,u.classList.contains("e-vertical")?"vscroll":"hscroll",t)):i&&(r=sf.base.select(".e-menu-"+(this.element.classList.contains("e-vertical")?"vscroll":"hscroll"),this.element),r&&(sf.base.EventHandler.remove(window,"resize",this.resizeMenu),f=this.element.classList.contains("e-vertical")?sf.base.getInstance(r,sf.navigations.VScroll):sf.base.getInstance(r,sf.navigations.HScroll),sf.navigations.destroyScroll(f,r)))},i.prototype.addEventListener=function(){sf.base.EventHandler.add(document,"mousedown touchstart",this.mouseDownHandler,this);sf.base.EventHandler.add(document,"mouseover",this.mouseOverHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this);sf.base.EventHandler.add(document,"click",this.clickHandler,this)},i.prototype.removeEventListener=function(n){sf.base.EventHandler.remove(document,"mousedown touchstart",this.mouseDownHandler);sf.base.EventHandler.remove(document,"mouseover",this.mouseOverHandler);n&&sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler);sf.base.EventHandler.remove(document,"click",this.clickHandler)},i}();return{initialize:function(n,t){sf.base.isNullOrUndefined(n.element)||new r(n,t)},calculatePosition:function(n){sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||sf.base.isNullOrUndefined(n.popup)||sf.base.isNullOrUndefined(n.popup.blazor__instance)||n.element.blazor__instance.calculatePosition(n)},subMenuPosition:function(n){sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||sf.base.isNullOrUndefined(n.popup)||sf.base.isNullOrUndefined(n.popup.blazor__instance)||n.element.blazor__instance.subMenuPosition(n)},focusMenu:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.focusMenu(!1)},updateScroll:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.updateScroll(t,i,!0)},destroy:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.removeEventListener(!0)}}}()},"./modules/sf-multiselect.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.MultiSelect=function(){"use strict";var n="e-list-group-item",t=function(){function t(n,t,i,r,u){this.containerElement=n;this.childContainerElement=t;this.element=i;this.options=u;this.element.blazor__instance=this;this.dotNetRef=r;this.isDisposed=!1}return t.prototype.initialize=function(){sf.base.EventHandler.add(window,"resize",this.windowResize,this);sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this)},t.prototype.blurHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("InvokeBlur")},t.prototype.getPopupHeight=function(n,t,i){var r=Math.round(i.getBoundingClientRect().height);return(parseInt(n,10)-(r+t)).toString()+"px"},t.prototype.renderPopup=function(n,t,i,r,u){var s,f,e,h,c,a,v,o,l;if(this.options=u,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content"),this.liCollections=this.getItems(),f=sf.base.formatUnit(this.options.popupHeight),(document.body.appendChild(n),n.style.visibility="hidden",this.options.allowFiltering&&"CheckBox"===this.options.mode?(this.filterInput=n.querySelector("input.e-input"),s=this.filterInput.parentElement,sf.base.EventHandler.add(this.filterInput,"keypress",this.filterKeydown,this)):this.filterInput=this.element,"auto"!==this.options.popupHeight)?(e=0,sf.base.isNullOrUndefined(s)||(e=s.parentElement.getBoundingClientRect().height,f=(parseInt(f,10)-e).toString()+"px"),h=0,c=n.querySelector(".e-selectall-parent"),(c&&(h=c.getBoundingClientRect().height,f=(parseInt(f,10)-h).toString()+"px"),n.querySelector(".e-ddl-header"))&&(a=n.querySelector(".e-ddl-header"),f=this.getPopupHeight(f,e,a)),n.querySelector(".e-ddl-footer")&&(v=n.querySelector(".e-ddl-footer"),f=this.getPopupHeight(f,e,v)),this.list.style.maxHeight=(parseInt(f,10)-2).toString()+"px",n.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)):n.style.height="auto",this.popupCreation(n),sf.base.Browser.isDevice&&"CheckBox"===this.options.mode&&this.options.allowFiltering&&(this.popupObj.element.classList.add("e-ddl-device"),this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition()),n.style.visibility="visible",sf.base.addClass([n],"e-popup-close"),sf.base.attributes(this.element,{"aria-expanded":"true"}),null!==i&&null!==i.popup&&r){for(o=0,l=Object.keys(i.popup);o<l.length;o++)switch(l[o]){case"collision":i.popup.collision&&(this.popupObj.collision.X!==i.popup.collision.X.toLowerCase()||this.popupObj.collision.Y!==i.popup.collision.Y.toLowerCase())&&(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":this.popupObj.position&&(this.popupObj.position.X!==i.popup.position.X||this.popupObj.position.Y!==i.popup.position.Y)&&(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}this.popupObj.dataBind();this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.setSearchBoxPosition=function(){var n=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%";this.popupObj.element.style.width="100%";this.list.style.maxHeight=window.innerHeight-n+"px";this.list.style.height=window.innerHeight-n+"px"},t.prototype.filterKeydown=function(n){""===this.filterInput.value&&32===n.keyCode&&this.list.querySelector(".e-item-focus")&&n.preventDefault()},t.prototype.setWidth=function(){var n=sf.base.formatUnit(this.options.popupWidth);return n.indexOf("%")>-1&&(n=(this.containerElement.offsetWidth*parseFloat(n)/100).toString()+"px"),n},t.prototype.popupCreation=function(t){var i=this;this.popupContainer=t;this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.options.enableRtl,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(i.list,"scroll",i.setFloatingHeader);sf.base.removeClass([i.containerElement],"e-icon-anim");i.fixedHeaderElement=null;i.popupHolder.appendChild(i.popupContainer);sf.base.EventHandler.remove(document,"mousedown",i.onDocumentClick);sf.base.Browser.isDevice&&i.isFilterLayout()&&(sf.base.removeClass([document.body,i.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(i.list,"scroll",i.listScroll));i.options.enableVirtualization&&sf.base.EventHandler.remove(i.list,"scroll",i.virtualScroll);i.popupObj&&i.popupObj.destroy();sf.base.isNullOrUndefined(i.isDisposed)||i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup");i.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",i.onDocumentClick,i);i.options.allowFiltering&&i.filterInput&&i.filterInput.focus();i.list.querySelector("li")&&i.list.querySelector("li").classList.contains(n)&&!t.classList.contains("e-multiselect-group")&&sf.base.EventHandler.add(i.list,"scroll",i.setFloatingHeader,i);i.setScrollPosition()},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){var n,t;this.popupObj&&this.popupObj.element&&(n=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10),n=0==n?1:n,t=this.popupObj.element.classList.contains("e-popup-open"),this.list.scrollTop+this.list.offsetHeight+n>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandler"))},t.prototype.onDocumentClick=function(n){var t=n.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"#"+this.popupObj.element.id)||this.containerElement.contains(n.target)?t===this.element||this.options.allowFiltering&&"CheckBox"===this.options.mode&&t===this.filterInput||!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||n.preventDefault():(!this.isDisposed&&this.containerElement.classList.contains("e-input-focus")||this.isPopupOpen())&&this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setFloatingHeader=function(t){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(n)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader());this.scrollStop(t)},t.prototype.isFilterLayout=function(){return"CheckBox"===this.options.mode&&this.options.allowFiltering},t.prototype.setFixedHeader=function(){var t,i,r;this.list.parentElement.style.display="block";t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));i=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px";sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});r=this.list.querySelector("."+n);this.fixedHeaderElement.innerHTML=r.innerHTML},t.prototype.scrollStop=function(t){for(var u,f=t.target,e=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),o=Math.round(f.scrollTop/e),r=this.list.querySelectorAll("li"),i=o;i>-1;i--){if(!sf.base.isNullOrUndefined(r[i])&&r[i].classList.contains(n)){u=r[i];this.fixedHeaderElement.innerHTML=u.innerHTML;this.fixedHeaderElement.style.top=t.target.scrollTop+"px";this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none";this.fixedHeaderElement.style.top="none"}},t.prototype.closePopup=function(n,t){(this.options=t,this.isPopupOpen()&&!n.cancel&&this.popupObj)&&this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:100,delay:0}))},t.prototype.setScrollPosition=function(n){if(sf.base.isNullOrUndefined(n)||""===n)this.scrollBottom(!0);else switch(n){case"PageDown":case"ArrowDown":case"End":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){var i;if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var r=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),f=this.list.offsetHeight,o=this.list.querySelector("li").classList.contains(n),e=r.offsetTop+r.offsetHeight-this.list.scrollTop,u=this.list.scrollTop+e-f;u=t?u+2*parseInt(getComputedStyle(this.list).paddingTop,10):u;i=r.offsetTop+r.offsetHeight-this.list.scrollTop;i=o&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;(e>f||!(i>0&&this.list.offsetHeight>i))&&(this.list.scrollTop=u)}},t.prototype.scrollTop=function(){var r;if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),t=i.offsetTop-this.list.scrollTop,u=this.list.querySelector("li").classList.contains(n);t=u&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?t-this.fixedHeaderElement.offsetHeight:t;r=i.offsetTop+i.offsetHeight-this.list.scrollTop;t<0?this.list.scrollTop=this.list.scrollTop+t:r>0&&this.list.offsetHeight>r||(this.list.scrollTop=i.offsetTop-(u&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.windowResize=function(){"Box"!==this.options.mode&&this.viewContainer&&this.updateDelimViews(this.viewContainer,this.options)},t.prototype.updateDelimViews=function(n,t){var i,e,w,r,h,b,y,k;if(this.options=t,this.viewContainer=n,this.viewContainer&&this.viewContainer.previousElementSibling&&this.viewContainer.previousElementSibling.classList.add("e-delim-hide"),i=this.options.delimValue,!sf.base.isNullOrUndefined(i)&&i.length>0?this.viewContainer.classList.remove("e-delim-hide"):this.viewContainer.innerHTML="",this.dropIconEle=this.containerElement.querySelector(".e-input-group-icon e-ddl-icon"),this.clearIconEle=this.containerElement.querySelector(".e-clear-icon"),this.viewContainer.classList.remove("e-delim-total"),i&&i.length>0){var c="",l=void 0,o=void 0,p=1,u=void 0,f=void 0,s=0,a=0,v=void 0;if(this.viewContainer.innerHTML="",e=sf.base.createElement("span",{className:"e-remain"}),e.innerHTML=this.options.overFlowContent,this.viewContainer.appendChild(e),w=e.offsetWidth,sf.base.remove(e),this.dropIconEle&&(s=this.dropIconEle.offsetWidth+parseInt(window.getComputedStyle(this.dropIconEle).marginRight,10)),this.clearIconEle&&(a=this.clearIconEle.offsetWidth+parseInt(window.getComputedStyle(this.clearIconEle).marginRight,10)),sf.base.isNullOrUndefined(i))this.viewContainer.innerHTML="",this.viewContainer.style.display="none";else{for(r=0;!sf.base.isNullOrUndefined(i[r]);r++){if(c+=0===r?"":this.options.delimiterChar+" ",c+=l=i[r],l=this.viewContainer.innerHTML,this.viewContainer.innerHTML=c,(u=this.viewContainer.offsetWidth+parseInt(window.getComputedStyle(this.viewContainer).paddingRight,10))+s+a>(v=this.childContainerElement.offsetWidth-parseInt(window.getComputedStyle(this.childContainerElement).paddingLeft,10)-parseInt(window.getComputedStyle(this.childContainerElement).paddingRight,10))){for(sf.base.isNullOrUndefined(o)||""===o||(l=o,r=p+1),this.viewContainer.innerHTML=l,f=i.length-r,u=this.viewContainer.offsetWidth;u+w+s>v&&0!==u&&""!==this.viewContainer.innerHTML;)h=this.viewContainer.innerHTML.split(this.options.delimiterChar),b=h.length,h.pop(),y=h.length,this.viewContainer.innerHTML=h.join(this.options.delimiterChar),y!==b&&0!==y&&(f=f-y+b),""===this.viewContainer.innerHTML&&f++,u=this.viewContainer.offsetWidth;break}u+w+s+a<=v?(o=c,p=r):0===r&&(o="",p=-1)}f>0&&(k=v-s-a,this.updateRemainElement(e,this.viewContainer,f,k))}}},t.prototype.updateRemainWidth=function(n,t){n.classList.contains("e-delim-total")&&t<n.offsetWidth+parseInt(window.getComputedStyle(n).paddingLeft,10)+parseInt(window.getComputedStyle(n).paddingLeft,10)&&(n.style.width=t+"px")},t.prototype.updateRemainElement=function(n,t,i,r){var u=this;t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild);n.innerHTML="";this.isDisposed||this.dotNetRef.invokeMethodAsync("RemainCount",i).then(function(i){var e=u.options.overFlowContent.replace("${count}",i),o=u.options.totalCountContent.replace("${count}",i),f;n.innerHTML=t.firstChild&&3===t.firstChild.nodeType?e:o;t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),u.updateRemainWidth(t,r));f=u.viewContainer.querySelector(".e-remain");f&&sf.base.remove(f);u.viewContainer.appendChild(n);u.updateRemainWidth(u.viewContainer,r)})},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition(this.containerElement)},t}();return{initialize:function(n,i,r,u,f){r&&(new t(n,i,r,u,f),r.blazor__instance&&r.blazor__instance.initialize())},renderPopup:function(n,t,i,r,u,f,e){n&&n.blazor__instance&&t&&i&&n.blazor__instance.renderPopup(t,i,r,u,f,e)},closePopup:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.closePopup(t,i)},refreshPopup:function(n){n&&n.blazor__instance&&n.blazor__instance.refreshPopup()},updateScrollPosition:function(n,t){n&&n.blazor__instance&&n.blazor__instance.setScrollPosition(t)},getPageCount:function(n){var t=n&&n.querySelector(".e-content"),i;return t?(i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item:not(.e-hide-listitem)")[0],null).getPropertyValue("height"),Math.round(t.getBoundingClientRect().height/parseInt(i,10))):0},updateDelimViews:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.updateDelimViews(t,i)},destroy:function(n,t,i,r,u){n&&n.blazor__instance&&t&&_instanceof(t,HTMLElement)&&i&&(n.blazor__instance.isDisposed=!0,n.blazor__instance.closePopup(r,u))},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()}}}()},"./modules/sf-numerictextbox.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.NumericTextBox=function(){"use strict";var n=new RegExp("^(-)?(\\d*)$"),t=function(){function t(n,t,i,r){this.wrapperElement=n;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i}return t.prototype.initialize=function(){this.spinButtonEvents();sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this);sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this);sf.base.EventHandler.add(this.element,"keypress",this.keyPressHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this);sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this)},t.prototype.keyPressHandler=function(n){var i;if(!this.options.enabled||this.options.readonly||(i=n.keyCode,0===n.which||n.metaKey||n.ctrlKey||8===i||13===i))return!0;var u=String.fromCharCode(n.which),t=this.element.value,r=this.element;return t=t.substring(0,r.selectionStart)+u+t.substring(r.selectionEnd),!!this.numericRegex().test(t)||(n.preventDefault(),n.stopPropagation(),!1)},t.prototype.pasteHandler=function(n){if(this.options.enabled&&!this.options.readonly){var t=n.clipboardData.getData("text/plain");this.numericRegex().test(t)?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t):n.preventDefault()}},t.prototype.keyDownHandler=function(n){this.options.readonly||(38===n.keyCode?(n.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",n)):40===n.keyCode&&(n.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",n)))},t.prototype.numericRegex=function(){var t=this.options.decimalSeparator,i="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?n:(this.options.decimals&&this.options.validateDecimalOnType&&(i="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},t.prototype.mouseWheel=function(n){var i,t;n.preventDefault();t=n;t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3);i>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",n):i<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",n)},t.prototype.focusHandler=function(){this.isFocused=!0;this.options.enabled&&!this.options.readonly&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this))},t.prototype.focusOutHandler=function(n){this.isFocused=!1;n.preventDefault();sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},t.prototype.mouseDownOnSpinner=function(n){var i=this,t,r;this.options.enabled&&!this.options.readonly&&(this.isFocused&&(this.isPrevFocused=!0,n.preventDefault()),t=n.currentTarget,r=t.classList.contains("e-spin-up")?"increment":"decrement",sf.base.EventHandler.add(t,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0;i.dotNetRef.invokeMethodAsync("ServerAction",r,n)},150),sf.base.EventHandler.add(document,"mouseup",this.mouseUpClick,this))},t.prototype.mouseUpOnSpinner=function(n){if(this.options.enabled&&!this.options.readonly){if(this.isPrevFocused&&(this.element.focus(),sf.base.Browser.isDevice||(this.isPrevFocused=!1)),sf.base.Browser.isDevice||n.preventDefault(),!this.getElementData(n))return;var t=n.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.remove(t,"mouseleave",this.mouseUpClick);this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,n);this.isCalled=!1;sf.base.EventHandler.remove(document,"mouseup",this.mouseUpClick)}},t.prototype.touchMoveOnSpinner=function(n){this.options.enabled&&!this.options.readonly||document.elementFromPoint(n.clientX,n.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut)},t.prototype.getElementData=function(n){return!(n.which&&3===n.which||n.button&&2===n.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},t.prototype.mouseUpClick=function(n){n.stopPropagation();clearInterval(this.timeOut);this.isCalled=!1;sf.base.EventHandler.remove(this.spinUp,"mouseleave",this.mouseUpClick);sf.base.EventHandler.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.selectRange=function(n){var i=this,t;sf.base.Browser.isDevice||"11.0"!==sf.base.Browser.info.version?(t=sf.base.Browser.isDevice&&sf.base.Browser.isIos?600:90,setTimeout(function(){i.element.setSelectionRange(0,n.length)},t)):this.element.setSelectionRange(0,n.length)},t.prototype.isDevice=function(){return sf.base.Browser.isDevice},t.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null;this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null;this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},t.prototype.bindSpinButton=function(){sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this);sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this);sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this);sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this);sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this);sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unBindSpinButton=function(){sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner);sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner);sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner);sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner);sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner);sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler);sf.base.EventHandler.remove(this.element,"blur",this.focusOutHandler);sf.base.EventHandler.remove(this.element,"keypress",this.keyPressHandler);sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler);sf.base.EventHandler.remove(this.element,"paste",this.pasteHandler)},t}();return{initialize:function(n,i,r,u){i&&new t(n,i,r,u);i&&i.blazor__instance&&i.blazor__instance.initialize()},selectRange:function(n,t){n&&n.blazor__instance&&n.blazor__instance.selectRange(t)},propertyChanges:function(n,t){n&&n.blazor__instance&&(n.blazor__instance.options=t)},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()},spinButtonEvents:function(n){n&&n.blazor__instance&&n.blazor__instance.spinButtonEvents()},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.destroy()}}}()},"./modules/sf-pivotview.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.PivotView=function(){"use strict";var r="e-icons",o="e-group-row",l="e-format",v="e-pivot-formula",e="e-remove-report",i="e-pivot-toolbar",t="e-list-icon",a="e-hover",u="e-rowsheader",s="e-columnsheader",h="e-cellselectionbackground",c="e-selectionbackground",n="e-table",p=function(){function n(n){this.parent=n;this.parent.pivotButtonModule=this}return n.prototype.createPivotButtonDrop=function(){for(var t,n=0,i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));n<i.length;n++)t=i[n],new sf.base.Droppable(t,{}),this.unWireEvents(t),this.wireEvents(t)},n.prototype.setPivotButtonDrag=function(){for(var n=0,i=[].slice.call(this.parent.parentElement.querySelectorAll("."+(_instanceof(this.parent,f)?"e-grouping-bar":"e-pivotfieldlist")+"-button"));n<i.length;n++){var r=i[n],u=!!sf.base.closest(r,".e-group-all-fields"),t=r.querySelector(".e-pivot-button");this.parent.pivotButtonModule.createDraggable(u,_instanceof(this.parent,f)?t.querySelector(".e-content"):t.firstElementChild,u?this.parent.commonActionModule.getFieldInfo(t.getAttribute("data-uid")).fieldItem:JSON.parse(t.getAttribute("data-fieldInfo")))}},n.prototype.createDraggable=function(n,t,i){var r=this;this.draggable=new sf.base.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.createDragClone.bind(this,i,n),dragStart:this.onDragStart.bind(this,n),drag:function(n){r.draggable.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(n.event.targetTouches)||sf.base.Browser.isDevice?60:-20}})},dragStop:this.onDragStop.bind(this,n),abort:_instanceof(this.parent,f)?this.parent.groupingBarSettings.allowDragAndDrop&&i.allowDragAndDrop?"":".e-pivot-button":i.allowDragAndDrop?"":".e-pivot-button"});n||(this.unWireEvents(_instanceof(this.parent,f)?sf.base.closest(t,".e-grouping-bar-button"):t),this.wireEvents(_instanceof(this.parent,f)?sf.base.closest(t,".e-grouping-bar-button"):t))},n.prototype.createDragClone=function(n,t,i){var u=t?null:sf.base.closest(i.element,".e-pivot-button"),r,f;return n=u?JSON.parse(u.getAttribute("data-fieldInfo")):n,r=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"}),f=sf.base.createElement("span",{className:"e-text-content",innerHTML:n?n.caption?n.caption:n.name:""}),r.appendChild(f),document.body.appendChild(r),r},n.prototype.onDragStart=function(n,t){var i=this,r=sf.base.closest(t.element,"."+(n?_instanceof(this.parent,f)?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",r.getAttribute("data-uid")).then(function(u){var o,c,e,s,l,h;if(u.cancel)i.parent.isDragging=!1,i.draggable.intDestroy(t.event),sf.base.detach(document.getElementById(i.parent.element.id+"_DragClone"));else{if(i.parent.isDragging=!0,o=i.parent.fieldList[r.getAttribute("data-uid")],c=["e-rows","e-columns","e-filters"],sf.base.addClass([n?_instanceof(i.parent,f)?r:r.querySelector(".e-list-text"):r],"e-list-selected"),o&&"CalculatedField"===o.aggregateType)for(e=0,s=c;e<s.length;e++)l=s[e],sf.base.addClass([i.parent.parentElement.querySelector("."+l)],"e-drag-restrict");document.getElementById(i.parent.element.id+"_DragClone")&&(h=sf.popups.getZindexPartial(r),document.getElementById(i.parent.element.id+"_DragClone").style.zIndex=h?h.toString():"100000");t.bindEvents(t.dragElement)}})},n.prototype.onDragStop=function(n,t){var r,i,u,e,o;for(this.parent.isDragging=!1,r=!1,t.target&&t.element&&sf.base.closest(t.element,".e-group-all-fields")&&!sf.base.closest(t.target,".e-droppable")&&(r=!0),i=sf.base.closest(t.element,"."+(n?_instanceof(this.parent,f)?"e-pivot-button":"e-list-item":"e-pivot-button")),this.parent.parentElement.querySelector(".e-list-selected")&&sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-list-selected")),"e-list-selected"),u=0,e=["e-rows","e-columns","e-filters"];u<e.length;u++)o=e[u],sf.base.removeClass([this.parent.parentElement.querySelector("."+o)],"e-drag-restrict");sf.base.removeClass([n?_instanceof(this.parent,f)?i:i.querySelector(".e-list-text"):i],"e-list-selected");document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(t.helper?t.helper:document.getElementById(this.parent.element.id+"_DragClone"));document.body.style.cursor="auto";!this.isNodeDropped(n,t,i)||!n&&r||this.nodeStateModified(n,t,r,i.getAttribute("data-uid"))},n.prototype.nodeStateModified=function(n,t,i,r){var u=sf.base.closest(t.target,".e-droppable")?JSON.stringify(sf.base.closest(t.target,".e-droppable").className.split(" ")):void 0,f=n||!t.element.parentElement?void 0:JSON.stringify({isvalue:t.element.parentElement.getAttribute("isvalue")});this.parent.dotNetRef.invokeMethodAsync("OnFieldDropped",window.sfBlazor.getDomObject("target",t.target).xPath,u,f,!(!n&&!i),r)},n.prototype.isNodeDropped=function(n,t,i){var c=!0,f=i.getAttribute("data-uid"),a;if(this.parent.fieldList[f]&&this.parent.fieldList[f].isSelected||!n){var e=n?this.getButton(f):i,o=sf.base.closest(e,".e-droppable"),v=sf.base.closest(t.target,".e-droppable");if(e&&o&&o===v){for(var u=[].slice.call(o.querySelectorAll(".e-pivot-button")),l=sf.base.closest(t.target,".e-pvt-btn-div"),s=void 0,h=-1,r=0;r<u.length;r++)(u[r].id===e.id&&(s=r),l)&&(a=l.querySelector(".e-pivot-button"),u[r].id===a.id&&(h=r));(s===h||s===u.length-1&&-1===h)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),c=!1)}}return c},n.prototype.getButton=function(n){for(var r,t=0,i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++)if(r=i[t],r.id===n)return r},n.prototype.getButtonPosition=function(n,t){var i=sf.base.closest(n,".e-pvt-btn-div");if(i){i=i.querySelector(".e-pivot-button");for(var u=[].slice.call(this.parent.parentElement.querySelector(".e-"+t).querySelectorAll(".e-pivot-button")),r=0,f=u.length;r<f;r++)if(u[r].id===i.id)return r}return-1},n.prototype.wireEvents=function(n){sf.base.EventHandler.add(n,"mouseover",this.parent.commonActionModule.updateDropIndicator,this);sf.base.EventHandler.add(n,"mouseleave",this.parent.commonActionModule.updateDropIndicator,this)},n.prototype.unWireEvents=function(n){sf.base.EventHandler.remove(n,"mouseover",this.parent.commonActionModule.updateDropIndicator);sf.base.EventHandler.remove(n,"mouseleave",this.parent.commonActionModule.updateDropIndicator)},n.prototype.destroy=function(){for(var i,n=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));n<t.length;n++)i=t[n],this.unWireEvents(i);this.draggable&&this.draggable.isDestroyed&&this.draggable.destroy()},n}(),w=function(){function n(n){this.parent=n;this.parent.groupingBarModule=this;this.parent.pivotButtonModule=new p(this.parent)}return n.prototype.updatePivotButtons=function(){this.createPivotButtonDrop();this.parent.pivotButtonModule.setPivotButtonDrag()},n.prototype.createPivotButtonDrop=function(){for(var t,n=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));n<i.length;n++)t=i[n].firstElementChild,this.parent.groupingBarSettings.allowDragAndDrop&&new sf.base.Droppable(t,{}),this.unWireEvent(t),this.wireEvent(t)},n.prototype.refreshUI=function(){var n=this.parent.element.querySelector(".e-pivot-grouping-bar"),u,b,t,r,f,e,s,v,y;if(n){n.style.minWidth="400px";var i=n.querySelector(".e-group-rows"),p=n.querySelector(".e-group-values"),h=n.querySelector(".e-group-columns"),w=n.querySelector(".e-group-filters"),g=n.querySelector(".e-left-axis-fields"),nt=n.querySelector(".e-right-axis-fields");if(n.style.width=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).offsetWidth+"px",u=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],b=n.offsetWidth-parseInt(u.style.width,10)+"px",g.style.minWidth=u.style.width,p.style.width=u.style.width,nt.style.width=b,sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element)){t=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");t.querySelector(".e-headercell").classList.add(o);t.style.height=t.querySelector(".e-rhandler").style.height="auto";sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")&&t.querySelector(".e-axis-row")?i?(i.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",sf.base.remove(t.querySelector(".e-axis-row")),t.querySelector("."+o).appendChild(n.querySelector(".e-axis-row"))):(i=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")).style.height="auto":(i.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",t.querySelector("."+o).appendChild(n.querySelector(".e-axis-row")));t.querySelector("."+o).querySelector(".e-headercelldiv").style.display="none";t.querySelector("."+o).querySelector(".e-sortfilterdiv").style.display="none";for(var c=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")).filter(function(n){return n.childNodes.length>0}),l=0,k=c;l<k.length;l++)r=k[l],sf.base.setStyleAttribute(r,{height:"auto"});f=this.parent.element.querySelector(".e-headercontent").offsetHeight;i.style.height=f+"px";h.style.height=w.style.height="auto";e=p.offsetHeight/2;e>h.offsetHeight&&(sf.base.setStyleAttribute(w,{height:sf.base.formatUnit(e)}),sf.base.setStyleAttribute(h,{height:sf.base.formatUnit(e+2)}));this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(t.style.height=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=f+"px");for(var tt=f/c.length,a=0,d=c;a<d.length;a++)for(r=d[a],sf.base.setStyleAttribute(r,{height:tt+"px"}),s=0,v=[].slice.call(r.querySelectorAll(".e-rhandler"));s<v.length;s++)y=v[s],sf.base.setStyleAttribute(y,{height:sf.base.closest(y,"th").offsetHeight+"px"})}}},n.prototype.wireEvent=function(n){sf.base.EventHandler.add(n,"mouseover",this.dropIndicatorUpdate,this);sf.base.EventHandler.add(n,"mouseleave",this.dropIndicatorUpdate,this)},n.prototype.unWireEvent=function(n){sf.base.EventHandler.remove(n,"mouseover",this.dropIndicatorUpdate);sf.base.EventHandler.remove(n,"mouseleave",this.dropIndicatorUpdate)},n.prototype.dropIndicatorUpdate=function(n){(this.parent.isDragging&&n.target.classList.contains("e-droppable")&&"mouseover"===n.type||"mouseleave"===n.type)&&(sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"))},n.prototype.destroy=function(){for(var i,n=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));n<t.length;n++)i=t[n],this.unWireEvent(i.firstElementChild)},n}(),y=function(){function n(n){this.parent=n;this.parent.calculatedFieldModule=this}return n.prototype.getNodeLocation=function(n,t){var i=n.querySelector('li[data-uid="'+CSS.escape(JSON.parse(t))+'"]').getBoundingClientRect();return JSON.stringify([i.top+(window.scrollY||document.documentElement.scrollTop),i.left])},n.prototype.setSelectionRange=function(n){n&&sf.base.select("#"+this.parent.element.id+"droppable").setSelectionRange(n,n);sf.base.select("#"+this.parent.element.id+"droppable").focus()},n.prototype.getIconInfo=function(n,t){var i=document.elementFromPoint(t,n);if(i){if(i.classList.contains(l))return JSON.stringify(l);if(i.classList.contains("e-edit"))return JSON.stringify("e-edit");if(i.classList.contains(e))return JSON.stringify(e);if(i.classList.contains("e-edited"))return JSON.stringify("e-edited")}},n.prototype.emptyFieldName=function(n){sf.base.addClass([document.getElementById(n+"ddlelement")],["e-empty-field","e-pivot-calc-input"]);document.getElementById(n+"ddlelement").focus()},n.prototype.editCalculatedFieldInfo=function(n,i,r,u){var f=sf.base.closest(document.elementFromPoint(r,i),"li");n?("pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),sf.base.addClass([f.querySelector("."+t)],"e-edited"),sf.base.removeClass([f.querySelector("."+t)],"e-edit"),f.querySelector(".e-edited").setAttribute("title",u)),sf.base.select("#"+this.parent.element.id+"droppable").value=f.getAttribute("data-uid")):this.updatedCalculatedFieldInfo(f,u)},n.prototype.updatedCalculatedFieldInfo=function(n,t){"pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),n.querySelector(".e-edit").setAttribute("title",t));sf.base.select("#"+this.parent.element.id+"droppable").value=""},n.prototype.updateNodeExpandIcons=function(n,i){for(var o,h,s=n.querySelector('li[data-uid="'+CSS.escape(i)+'"]'),f=[].slice.call(s.querySelectorAll("li")),u=0;u<f.length;u++)o=f[u].querySelector(".e-text-content"),"CalculatedField"===f[u].getAttribute("data-type")&&o&&f[u].querySelector("."+t+".e-calc-member")&&!f[u].querySelector("."+e)&&(h=sf.base.createElement("span",{className:e+" "+r+" "+t}),o.classList.add("e-calcfieldmember"),o.appendChild(h)),(f[u].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||f[u].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||f[u].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(f[u]);return this.olapExpand(s)},n.prototype.olapExpand=function(n){if(n&&n.querySelector("."+t)&&n.querySelector(".e-icon-expandable")&&n.querySelector("."+t).className.indexOf("e-folderCDB-icon")>-1){var i=n.querySelector("."+t);return sf.base.removeClass([i],"e-folderCDB-icon"),sf.base.addClass([i],"e-folderCDB-open-icon"),JSON.stringify(!1)}return n&&n.querySelector("."+t)&&n.querySelector(".e-icon-collapsible")&&n.querySelector("."+t).className.indexOf("e-folderCDB-open-icon")>-1?(n=n.querySelector("."+t),sf.base.removeClass([n],"e-folderCDB-open-icon"),sf.base.addClass([n],"e-folderCDB-icon"),JSON.stringify(!1)):JSON.stringify(!0)},n.prototype.updateEditOptions=function(n){var f=[].slice.call(sf.base.selectAll("#"+n+" .e-acrdn-item")),i,u,o;for(sf.base.addClass(sf.base.selectAll("#"+n),"e-pivot-accord"),i=0;i<f.length;i++)f[i].querySelector('[data-type="CalculatedField"]')&&(u=f[i].querySelector(".e-acrdn-header .e-toggle-icon"),sf.base.removeClass([u],"e-toggle-icon"),sf.base.addClass([u],"e-acrdn-header-icon"),o=u.querySelector(".e-tgl-collapse-icon"),sf.base.removeClass([o],"e-tgl-collapse-icon"),sf.base.addClass([o],[t,"e-edit"]),u.appendChild(sf.base.createElement("span",{className:e+" "+r+" "+t})))},n.prototype.updateAccordionLabel=function(n){var t=document.elementFromPoint(JSON.parse(n).ClientX,JSON.parse(n).ClientY),i=t.parentElement.querySelector(".e-label").innerText,r=sf.base.closest(t,".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption");sf.base.closest(t,".e-acrdn-item").querySelector(".e-label").innerText=r+" ("+i+")";sf.base.closest(t,".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",t.getAttribute("data-value"))},n.prototype.accordionClick=function(n,i,r){var f=document.elementFromPoint(JSON.parse(n),JSON.parse(i)),s,o,u;return sf.base.closest(f,".e-acrdn-header-icon")&&(s=sf.base.closest(f,".e-acrdn-header").querySelector(".e-pivot-calc-check input"),s)?(o=void 0,u=sf.base.closest(f,".e-acrdn-header-icon"),u.querySelector(".e-edit")&&f.classList.contains("e-edit")?(sf.base.addClass([u.querySelector("."+t)],"e-edited"),sf.base.removeClass([u.querySelector("."+t)],"e-edit"),o="e-edit"):u.querySelector(".e-edited")&&f.classList.contains("e-edited")?(sf.base.addClass([u.querySelector("."+t)],"e-edit"),sf.base.removeClass([u.querySelector("."+t)],"e-edited"),o="e-edited"):u.querySelector("."+e)&&f.classList.contains(e)&&(o=e),JSON.stringify([s.getAttribute("data-field"),o,s.getAttribute("id").split(r+"_")[1]])):JSON.stringify([])},n.prototype.getAccordionValue=function(){for(var u,r,t="",i=[].slice.call(document.querySelectorAll(".e-accordion .e-check")),n=0;n<i.length;n++)u=i[n].parentElement.querySelector("[data-field]").getAttribute("data-field"),r=i[n].parentElement.querySelector("[data-type]").getAttribute("data-type"),-1===r.indexOf("CalculatedField")?t=t+'"'+r+"("+u+')"':t+=i[n].parentElement.querySelector("[data-formula]").getAttribute("data-formula");return t},n.prototype.createFormulaDroppable=function(n,i,u,f,o,s,h){var y=document.getElementById(this.parent.element.id+h),a,c,p,w;if(y.querySelector("."+v))for(new sf.base.Droppable(y.querySelector("."+v),{}),a=[].slice.call(y.querySelectorAll(".e-pivot-treeview ul li")),c=0;c<a.length;c++)if(p=a[c].getAttribute("data-field"),"olap"===this.parent.options.dataType)a[c].querySelector(".e-measure-icon")&&(a[c].querySelector("."+t).style.display="none"),w=a[c].querySelector(".e-text-content"),"CalculatedField"===a[c].getAttribute("data-type")&&w&&a[c].querySelector("."+t+".e-calc-member")&&(w.classList.add("e-calcfieldmember"),w.appendChild(sf.base.createElement("span",{className:e+" "+r+" "+t}))),(a[c].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||a[c].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||a[c].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(a[c]);else if("pivot"===this.parent.options.dataType&&a[c].querySelector(".e-text-content span")){var k=a[c].getAttribute("data-type"),b=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:i},className:r+" e-drag"}),d=sf.base.createElement("div",{className:" e-iconspace"});sf.base.prepend([b],a[c].querySelector(".e-text-content"));sf.base.append([d,a[c].querySelector("."+l)],a[c].querySelector(".e-text-content"));"CalculatedField"===k&&(a[c].querySelector("."+l).setAttribute("title",u),sf.base.addClass([a[c].querySelector("."+l)],e),o&&s===p&&(sf.base.select("#"+this.parent.element.id+"droppable",y).value=a[c].getAttribute("data-uid")),sf.base.addClass([a[c].querySelector(".e-iconspace")],[o&&s===p?"e-edited":"e-edit",r,t]),a[c].querySelector(".e-edit,.e-edited").setAttribute("title",o&&s===p?f:n),a[c].querySelector(".e-edit,.e-edited").setAttribute("aria-disabled","false"),a[c].querySelector(".e-edit,.e-edited").setAttribute("tabindex","-1"),sf.base.removeClass([a[c].querySelector("."+l)],l),sf.base.removeClass([a[c].querySelector(".e-iconspace")],"e-iconspace"));this.createDraggable(b)}},n.prototype.createDraggable=function(n){new sf.base.Draggable(n,{dragTarget:".e-list-item",clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.calculatedDragClone.bind(this),dragStart:this.onCalcDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onCalcDragStop.bind(this)})},n.prototype.onDragging=function(n){var i=sf.base.select("#"+this.parent.element.id+"_DragClone ."+r);n.target&&n.target.classList.contains(v)?(sf.base.removeClass([i],"e-drag-restrict"),sf.base.addClass([n.target],"e-copy-drop")):(sf.base.addClass([i],"e-drag-restrict"),sf.base.removeClass([n.target],"e-copy-drop"),sf.base.addClass([i],"e-icon-expandable"),sf.base.removeClass([i],t))},n.prototype.onCalcDragStop=function(n){var t=document.getElementById(this.parent.element.id+"droppable"),i=sf.base.closest(n.element,".e-list-item"),r;sf.base.removeClass([t],"e-copy-drop");sf.base.removeClass([i.querySelector(".e-list-text")],"e-list-selected");r=t.selectionStart;n.target.id===this.parent.element.id+"droppable"&&this.parent.dotNetRef.invokeMethodAsync("UpdateCalcDroppable",i.getAttribute("data-uid"),r,n.target.id);document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(n.helper);document.body.style.cursor="auto";this.parent.isDragging=!1},n.prototype.onCalcDragStart=function(n){var t=sf.base.closest(n.element,".e-list-item"),i=document.getElementById(this.parent.element.id+"_DragClone"),r;i&&t&&("pivot"===this.parent.options.dataType&&n.target&&n.target.classList.contains("e-drag")||"olap"===this.parent.options.dataType&&(t.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.querySelector(".e-level-members,.e-namedSetCDB-icon")))?(sf.base.addClass([t.querySelector(".e-list-text")],"e-list-selected"),r=sf.popups.getZindexPartial(t),i.style.zIndex=r?r.toString():document.querySelector(".e-pivot-calc-dialog-div.e-olap-calc-dialog-div").style.zIndex+1,i.style.display="inline",this.parent.isDragging=!0):this.parent.isDragging=!1;n.bindEvents(n.dragElement)},n.prototype.calculatedDragClone=function(n){var t=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-drag-item e-treeview e-pivot-calc"}),i=sf.base.createElement("div",{className:"e-text-content e-calcfieldmember"});return i.appendChild(sf.base.createElement("div",{className:r})),i.appendChild(sf.base.createElement("span",{className:"e-list-text",innerHTML:sf.base.closest(n.element,"li").getAttribute("data-caption")})),t.appendChild(i),document.body.appendChild(t),t},n}(),b=function(){function n(n){this.parent=n;this.parent.toolbarModule=this}return n.prototype.renderToolbar=function(){this.parent.element.querySelector("."+i)&&this.updateItemElements(this.parent.element.querySelector("."+i))},n.prototype.updateItemElements=function(n){for(var t,i=0,r=[].slice.call(n.querySelectorAll(".e-toolbar-item"));i<r.length;i++)t=r[i],t.querySelector("button")?t.classList.contains("e-overlay")||t.querySelector("button").setAttribute("tabindex","0"):t.querySelector(".e-menu.e-menu-parent")&&(t.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),!t.classList.contains("e-overlay")&&t.querySelector(".e-menu-item.e-menu-caret-icon")&&t.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))},n.prototype.focusToolBar=function(){sf.base.removeClass(document.querySelector("."+i).querySelectorAll(".e-menu-item.e-focused"),"e-focused");sf.base.removeClass(document.querySelector("."+i).querySelectorAll(".e-menu-item.e-selected"),"e-selected");document.querySelector(".e-toolbar-items")&&sf.base.addClass([document.querySelector(".e-toolbar-items")],"e-focused")},n.prototype.selectInputRange=function(n){if(n.querySelector(".e-pivotview-report-input")){var t=n.querySelector(".e-pivotview-report-input input");t.setSelectionRange(t.value.length,t.value.length)}},n.prototype.copyMdxQuery=function(n){if(n.querySelector(".e-mdx-query-content")){var t=n.querySelector(".e-mdx-query-content");try{t.select();document.execCommand("copy")}catch(n){window.alert("Oops, unable to copy")}}},n}(),nt=function(){function n(n){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E","delete":"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow"};this.parent=n;this.parent.parentElement.tabIndex=-1===this.parent.parentElement.tabIndex?0:this.parent.parentElement.tabIndex;this.keyboardModule=new sf.base.KeyboardEvents(this.parent.parentElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return n.prototype.keyActionHandler=function(n){switch(n.action){case"shiftF":this.processFilter(n);break;case"shiftS":this.processSort(n);break;case"shiftE":this.processEdit(n);break;case"delete":this.processDelete(n);break;case"enter":this.processEnter(n);break;case"escape":this.processClose(n);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(n)}},n.prototype.getButtonElement=function(n){for(var i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button")),t=0,r=i.length;t<r;t++)if(i[t].getAttribute("data-uid")===n.getAttribute("data-uid"))return i[t];return n},n.prototype.processEnter=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-pivot-button"))return t.querySelector(".e-dropdown-icon")&&sf.base.closest(t,".e-values")?t.querySelector(".e-dropdown-icon").click():t.querySelector(".e-edit")?t.querySelector(".e-edit").click():!t.querySelector(".e-sort")||sf.base.closest(t,".e-values")||sf.base.closest(t,".e-axis-filter")?t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values")&&t.querySelector(".e-btn-filter").click():(t.querySelector(".e-sort").click(),this.getButtonElement(t).focus()),void n.preventDefault()},n.prototype.processSort=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-sort")&&!sf.base.closest(t,".e-values")&&!sf.base.closest(t,".e-axis-filter"))return t.querySelector(".e-sort").click(),this.getButtonElement(t).focus(),void n.preventDefault()},n.prototype.processEdit=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-edit"))return t.querySelector(".e-edit").click(),void n.preventDefault()},n.prototype.processFilter=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values"))return t.querySelector(".e-btn-filter").click(),void n.preventDefault()},n.prototype.processFilterNodeSelection=function(n){var i=n.target,r,t,u;if(i&&sf.base.closest(i,".e-select-all")&&40===n.keyCode){if((t=sf.base.closest(i,".e-member-editor-outer-container").querySelector(".e-member-editor-container"))&&t.querySelector("li"))return r=t.querySelector("li"),t.querySelector("li#_active")&&(sf.base.removeClass([t.querySelector("li#_active")],[a,"e-node-focus"]),t.querySelector("li#_active").removeAttribute("id")),r.setAttribute("id","_active"),sf.base.addClass([r],[a,"e-node-focus"]),t.focus(),n.stopPropagation(),void n.preventDefault()}else if(i&&sf.base.closest(i,".e-member-editor-container")&&38===n.keyCode&&(t=sf.base.closest(i,".e-member-editor-container")).querySelector("li#_active."+a+".e-node-focus")&&t.querySelector("li")&&t.querySelector("li")===t.querySelector("li#_active."+a+".e-node-focus")&&(sf.base.removeClass(t.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),u=sf.base.closest(i,".e-member-editor-outer-container").querySelector(".e-select-all"),u&&u.querySelector("li")))return(r=u.querySelector("li")).setAttribute("id","_active"),sf.base.addClass([r],[a,"e-node-focus"]),u.focus(),n.stopPropagation(),void n.preventDefault()},n.prototype.processDelete=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-remove"))return t.querySelector(".e-remove").click(),void n.preventDefault()},n.prototype.processClose=function(n){var i=n.target,t,r,u;i&&sf.base.closest(i,".e-popup.e-popup-open")&&(t=sf.base.closest(i,".e-popup.e-popup-open").blazor__instance,r=this,t&&!t.closeOnEscape&&(u=t.element.getAttribute("data-fieldName"),t.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:n.altKey,ctrlKey:n.ctrlKey,code:n.code,key:n.key,location:n.location,repeat:n.repeat,shiftKey:n.shiftKey,metaKey:n.metaKey,type:n.type}).then(function(){var t,i,f;if(r.parent.parentElement)for(t=0,i=[].slice.call(r.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++)if(f=i[t],f.getAttribute("data-uid")===u){f.focus();break}n.preventDefault()})))},n.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},n}(),k=function(){function n(n){this.parent=n;this.parent.commonActionModule=this;this.keyboardModule=new nt(n);this.getElementInfo()}return n.prototype.getElementInfo=function(){if(_instanceof(this.parent,f)){var n=this.parent.element.getBoundingClientRect();this.parent.dotNetRef.invokeMethodAsync("GetElementInfo",n.width,n.height)}},n.prototype.updateActiveNode=function(n,t){var i=n.querySelectorAll("li.e-node-focus");return sf.base.removeClass(n.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),sf.base.addClass([n.querySelector('li[data-uid="'+t+'"]')],"e-prev-active-node"),i&&i.length>0&&n.querySelectorAll("li")[0]===i[0]},n.prototype.isFullRowElement=function(n,t){return JSON.stringify(document.elementFromPoint(t,n).classList.contains("e-fullrow"))},n.prototype.validateInputs=function(n){var t=n.value1,r=n.value2,u=n.condition,f=n.type,i;(sf.base.isNullOrUndefined(t)||""===t||["Between","NotBetween"].indexOf(u)>-1&&(sf.base.isNullOrUndefined(r)||""===r))&&(i=sf.base.select("#"+this.parent.element.id+"_"+f.toLowerCase()+(sf.base.isNullOrUndefined(t)||""===t?"_input_option_1":"_input_option_2"),this.parent.parentElement),sf.base.addClass([i],"e-empty-field"),i.focus())},n.prototype.updateDropIndicator=function(n){if(this.parent.isDragging&&n.target.classList.contains("e-axis-content")&&"mouseover"===n.type?(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),(t=[].slice.call(n.target.querySelectorAll(".e-pvt-btn-div"))).length>0&&sf.base.addClass([t[t.length-1].querySelector(".e-drop-indicator-last")],"e-drop-hover")):"mouseleave"===n.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover")),this.parent.isDragging&&sf.base.closest(n.target,".e-pvt-btn-div")&&"mouseover"===n.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.closest(n.target,".e-droppable"))){var t=sf.base.closest(n.target,".e-pvt-btn-div");sf.base.addClass([t.querySelector(".e-drop-indicator")],"e-drop-hover")}},n.prototype.getFieldInfo=function(n,t){for(var u,e,i,f=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],r=0,o=f.length;r<o;r++)for(u=0,e=f[r]?f[r].length:0;u<e&&!t;u++)if(f[r][u]&&f[r][u].name===n)return{fieldName:n,fieldItem:f[r][u],axis:0===r?"rows":1===r?"columns":2===r?"values":"filters",position:u};return i=this.parent.fieldList[n],{fieldName:n,fieldItem:i||t?{name:n,caption:i?i.caption:n,baseField:i?i.baseField:void 0,baseItem:i?i.baseItem:void 0,isCalculatedField:!!i&&i.isCalculatedField,isNamedSet:!!i&&i.isNamedSets,showNoDataItems:!!i&&i.showNoDataItems,showSubTotals:!!i&&i.showSubTotals,type:i?i.aggregateType:void 0,showFilterIcon:!!i&&i.showFilterIcon,showSortIcon:!!i&&i.showSortIcon,showRemoveIcon:!i||i.showRemoveIcon,showValueTypeIcon:!!i&&i.showValueTypeIcon,showEditIcon:!!i&&i.showEditIcon,allowDragAndDrop:!i||i.allowDragAndDrop}:void 0,axis:t?"row"===this.parent.dataSourceSettings.valueAxis?"rows":"columns":"fieldlist",position:-1}},n.prototype.getTreeNode=function(n,t,i){return n?JSON.stringify(window.sfBlazor.getDomObject("currentNode",sf.base.closest(document.elementFromPoint(i,t),"li"))):null},n.prototype.destroy=function(){this.keyboardModule.destroy()},n}(),tt=function(){function n(n){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",ctrlShiftF:"ctrl+shift+f"};this.parent=n;this.event=void 0;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;this.pivotViewKeyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return n.prototype.keyActionHandler=function(n){switch(n.action){case"tab":this.processTab(n);break;case"shiftTab":this.processShiftTab(n);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(n);break;case"ctrlShiftF":this.toggleFieldList(n)}},n.prototype.getAdjacentButton=function(n,t){var i=this.allpivotButtons(n),u,r,f;if(sf.base.removeClass(i,"e-btn-focused"),this.parent.internalGrid&&i)for(u=i.length,r=0;r<u;r++)if(i[r].getAttribute("data-uid")===n.getAttribute("data-uid"))return f="next"===t?i[r+1]:i[r-1],f||n;return n},n.prototype.allpivotButtons=function(n){var t=[],h,c;if(n&&this.parent.options.showGroupingBar){var i=sf.base.closest(n,".e-pivot-grouping-bar"),r=sf.base.closest(n,".e-group-pivot-rows"),f=sf.base.closest(n,".e-chart-grouping-bar"),l=n.classList.contains(u),e=void 0,o=void 0,s=void 0;(null!==i?o=i.classList.contains("e-pivot-grouping-bar"):null!==r?s=r.classList.contains("e-group-pivot-rows"):null!==f&&(e=f.classList.contains("e-chart-grouping-bar")),o||s||l)?(h=[].slice.call(this.parent.element.querySelector(".e-pivot-grouping-bar").querySelectorAll(".e-pivot-button")),c=[].slice.call(this.parent.element.querySelector(".e-group-pivot-rows").querySelectorAll(".e-pivot-button")),t=h.concat(c)):e&&(t=[].slice.call(this.parent.element.querySelector(".e-chart-grouping-bar").querySelectorAll(".e-pivot-button")))}return t},n.prototype.processTab=function(n){var f=this,t=n.target,r,u;if(t&&(sf.base.closest(t,".e-pivot-button")||t.classList.contains(o))){if(this.parent.internalGrid)return t.parentElement.parentElement.classList.contains("e-group-rows")&&t.classList.contains("e-btn-focused")?(r=this.getAdjacentButton(t,"next"),r.getAttribute("data-uid")!==t.getAttribute("data-uid")&&(sf.base.addClass([r],"e-btn-focused"),r.focus()),n.stopPropagation(),void n.preventDefault()):(u=this.getAdjacentButton(t,"next"),u.getAttribute("data-uid")!==t.getAttribute("data-uid")&&(sf.base.addClass([u],"e-btn-focused"),u.focus()),void n.preventDefault())}else t&&sf.base.closest(t,"."+i)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){var n=f.getAdjacentToolbarItem(document.activeElement,"next");sf.base.removeClass(sf.base.closest(t,"."+i).querySelectorAll(".e-menu-item.e-focused"),"e-focused");n&&n.classList.contains("e-menu-item")&&sf.base.addClass([n],"e-focused")}))},n.prototype.getAdjacentToolbarItem=function(n,t){var f,u,r;if(n.classList.contains("e-menu-item")&&n.classList.contains("e-focused"))if(f=sf.base.closest(n,".e-toolbar-item"),u=[].slice.call(sf.base.closest(n,"."+i).querySelectorAll(".e-toolbar-item:not(.e-overlay)")),"next"===t){for(r=0;r<u.length;r++)if(f.id===u[r].id)return this.getActiveElement(u[r+1])}else for(r=u.length-1;r>-1;r--)if(f.id===u[r].id)return this.getActiveElement(u[r-1]);return n},n.prototype.getActiveElement=function(n){if(n){if("button"===n.firstElementChild.tagName.toLowerCase())return n.firstElementChild.focus(),n.firstElementChild;if(n.querySelector(".e-menu-item"))return n.querySelector(".e-menu-item").focus(),n.querySelector(".e-menu-item")}return document.activeElement},n.prototype.processShiftTab=function(n){var s=this,t=n.target,r,e,f;if(t&&(sf.base.closest(t,".e-pivot-button")||t.classList.contains(o))){if(this.parent.internalGrid){if(t.classList.contains(o)&&t.querySelector(".e-btn-focused"))t=t.querySelector(".e-btn-focused");else if(t.classList.contains(o)&&(t=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector(".e-pivot-grouping-bar"),r=this.allpivotButtons(t),r.length>0&&r[r.length-1]))return r[r.length-1].focus(),sf.base.removeClass(r,"e-btn-focused"),sf.base.addClass([r[r.length-1]],"e-btn-focused"),n.stopPropagation(),void n.preventDefault();if(e=this.getAdjacentButton(t,"previous"),e.getAttribute("data-uid")!==t.getAttribute("data-uid"))return e.focus(),n.stopPropagation(),void n.preventDefault()}}else if(t&&this.parent.internalGrid&&(t.classList.contains("e-movablefirst")||t.classList.contains(u)&&sf.base.closest(t,"tr").getAttribute("data-uid")===this.parent.internalGrid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){if(f=this.allpivotButtons(t),f.length>0)return setTimeout(function(){f[f.length-1].focus()}),sf.base.removeClass(f,"e-btn-focused"),sf.base.addClass([f[f.length-1]],"e-btn-focused"),n.stopPropagation(),void n.preventDefault()}else t&&sf.base.closest(t,"."+i)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout(function(){var n=s.getAdjacentToolbarItem(document.activeElement,"previous");sf.base.removeClass(sf.base.closest(t,"."+i).querySelectorAll(".e-menu-item.e-focused"),"e-focused");n&&n.classList.contains("e-menu-item")&&sf.base.addClass([n],"e-focused")}))},n.prototype.processEnter=function(n){var t=n.target;if(t&&sf.base.closest(t,".e-grid"))return 13!==n.keyCode||n.shiftKey||n.ctrlKey?13===n.keyCode&&n.shiftKey&&!n.ctrlKey?this.parent.options.enableValueSorting&&(this.event=n,t.click()):13===n.keyCode&&!n.shiftKey&&n.ctrlKey&&this.parent.options.hyperlinkSettings&&t.querySelector("a")&&t.querySelector("a").click():t.querySelector("."+r)?(this.event=n,t.querySelector("."+r).click()):t.classList.contains("e-valuescontent")&&t.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),void n.preventDefault()},n.prototype.toggleFieldList=function(n){var t=this.parent,r=n.target,i;if(t&&t.options.showFieldList&&t.element.querySelector(".e-toggle-field-list")){if(!t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide"))return t.element.querySelector(".e-toggle-field-list").click(),void n.preventDefault();(t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide")||t.options.showToolbar)&&r&&sf.base.closest(r,".e-pivotview")&&t.pivotFieldListModule&&t.pivotFieldListModule.parentElement&&t.pivotFieldListModule.parentElement.classList.contains("e-popup-open")&&(i=t.pivotFieldListModule.parentElement.blazor__instance,i&&!i.closeOnEscape&&i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:n.altKey,ctrlKey:n.ctrlKey,code:n.code,key:n.key,location:n.location,repeat:n.repeat,shiftKey:n.shiftKey,metaKey:n.metaKey,type:n.type}))}},n.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},n}(),d=function(){function n(n){this.isPopupClicked=!1;this.shiftLockedPos=[];this.savedSelectedCellsPos=[];this.cellSelectionPos=[];this.parent=n;this.parent.selectionModule=this}return n.prototype.addInternalEvents=function(){this.wireEvents()},n.prototype.wireEvents=function(){this.unWireEvents();sf.base.EventHandler.add(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler)},n.prototype.mouseClickHandler=function(n){(3===n.which||0===n.which)&&(this.lastCellClicked=n.target);var t=n.target;(t.classList.contains("e-headercell")||t.classList.contains("e-headercelldiv")||t.classList.contains(u)||t.classList.contains("e-rowcell")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadertext"))&&"pivot"===this.parent.options.dataType?(t.classList.contains("e-headercell")||t.classList.contains(u)||t.classList.contains("e-rowcell")?t:t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-ascending")||t.classList.contains("e-descending")?t.parentElement:t.classList.contains("e-headertext")&&t.parentElement.parentElement,this.cellClicked(t,n)):this.cellClicked(t,n)},n.prototype.cellClicked=function(n,t){var f=this,i=null,o;if(n.classList.contains("e-headercell")||n.classList.contains("e-stackedheadercell")||n.classList.contains("e-rowcell")?i=n:n.classList.contains("e-stackedheadercelldiv")||n.classList.contains("e-cellvalue")||n.classList.contains("e-headercelldiv")?i=n.parentElement:n.classList.contains("e-headertext")?i=n.parentElement.parentElement.parentElement:n.classList.contains("e-stackedheadertext")?i=n.parentElement.parentElement:n.classList.contains("e-rowselect")&&(this.isPopupClicked=n.classList.contains("e-spanclicked")?!1:!0),i){var r=Number(i.getAttribute("aria-colindex")),u=Number(i.getAttribute("index")),e=Number(i.getAttribute("aria-colspan"));this.parent.gridSettings.allowSelection&&(("Both"===this.parent.gridSettings.selectionSettings.mode?!i.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?i.classList.contains(s):"Row"!==this.parent.gridSettings.selectionSettings.mode)?this.parent.dotNetRef.invokeMethodAsync("ColumnSelectHandler",u,r,t).then(function(n){f.clearSelection(i,t,r,u);n||f.applyColumnSelection(t,i,r,r+(e>0?e-1:0),u)}):this.clearSelection(i,t,r,u));this.getSelectedCellsPos();o=JSON.stringify(this.savedSelectedCellsPos);("Both"===this.parent.gridSettings.selectionSettings.mode?!i.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?i.classList.contains(s):"Row"!==this.parent.gridSettings.selectionSettings.mode)&&(this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",u,r,t),this.parent.dotNetRef.invokeMethodAsync("SelectHandler",r,u,o),this.savedSelectedCellsPos=[]);this.parent.gridSettings.allowSelection||n.classList.contains("e-expand")||n.classList.contains("e-collapse")||this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",u,r,t)}},n.prototype.clearSelection=function(n,t){var i,r,u;if(!t.shiftKey&&!t.ctrlKey||"Single"===this.parent.gridSettings.selectionSettings.type)if("Cell"===this.parent.gridSettings.selectionSettings.mode)n.classList.contains(s)?sf.base.removeClass(this.parent.element.querySelectorAll(".e-rowcell."+h),h):sf.base.removeClass(this.parent.element.querySelectorAll("."+s+".e-active"),["e-active",c]);else if("Both"===this.parent.gridSettings.selectionSettings.mode)if(n.classList.contains("e-rowcell"))for(i=0,r=[].slice.call(this.parent.element.querySelectorAll("."+c+", ."+h));i<r.length;i++)u=r[i],sf.base.removeClass([u],["e-active",c,h]);else sf.base.removeClass(this.parent.element.querySelectorAll("."+h),h)},n.prototype.applyColumnSelection=function(n,t,i,r,f){var ft=Number(t.getAttribute("index")),o,a,d,e,g,nt,v,tt,y;if(!t.classList.contains(u)||"Cell"!==this.parent.gridSettings.selectionSettings.mode||t.classList.contains(s)){o=n.ctrlKey;"Multiple"===this.parent.gridSettings.selectionSettings.type&&null!==this.parent.element.querySelector(".e-rowselect")&&(this.isPopupClicked?(this.parent.element.querySelector(".e-rowselect").classList.add("e-spanclicked"),o=!0):(this.parent.element.querySelector(".e-rowselect").classList.remove("e-spanclicked"),o=!1));for(var rt=[],p=this.parent.gridSettings.selectionSettings.type,w=t.classList.contains("e-active"),l=[],b={},k=i;k<=r;k++)l.push(k.toString());if(o&&"Single"!==p)w=!1;else{for(a=0,d=[].slice.call(this.parent.element.querySelectorAll(".e-active"));a<d.length;a++)e=d[a],sf.base.removeClass([e],["e-active",c]),-1===l.indexOf(e.getAttribute("aria-colindex"))&&(w=!1),g=Number(e.getAttribute("aria-colindex")),b[g]=g;l=Object.keys(b).length>0?Object.keys(b).sort(function(n,t){return n-t}):l}if("Multiple"===p&&n.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?l:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=i?i=Number(this.shiftLockedPos[0]):r=r<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):r):this.shiftLockedPos=[],nt=[],n.ctrlKey&&"Both"===this.parent.gridSettings.selectionSettings.mode&&"Multiple"===p&&!t.classList.contains(u))for(v=0,tt=[].slice.call(this.parent.element.querySelectorAll("."+u+"."+h));v<tt.length;v++)e=tt[v],nt.push(e.getAttribute("index"));for(y=i;y<=r;)rt.push('[aria-colindex="'+y+'"]'+("Cell"===this.parent.gridSettings.selectionSettings.mode?'[index="'+f+'"]':"")),y++;if(!w){f=t.classList.contains("e-headercell")?f:this.parent.scrollPageInfo.rowStartPos-1;for(var et=t.classList.contains("e-active"),it=0,ut=[].slice.call(this.parent.element.querySelectorAll(rt.toString()));it<ut.length;it++)e=ut[it],Number(e.getAttribute("index"))>=f&&(et&&o&&-1===nt.indexOf(ft.toString())?sf.base.removeClass([e],["e-active",c]):sf.base.addClass([e],["e-active",c]))}}},n.prototype.getSelectedCellsPos=function(){for(var n,i,u,t=0,r=[].slice.call(this.parent.element.querySelectorAll("."+c));t<r.length;t++)n=r[t],this.savedSelectedCellsPos.push({rowIndex:n.getAttribute("index"),colIndex:n.getAttribute("aria-colindex")});for(i=0,u=[].slice.call(this.parent.element.querySelectorAll("."+h));i<u.length;i++)n=u[i],this.cellSelectionPos.push({rowIndex:n.getAttribute("index"),colIndex:n.getAttribute("aria-colindex")})},n.prototype.destroy=function(){this.unWireEvents()},n}(),g=function(){function t(n){this.previousValues={top:0,left:0};this.frozenPreviousValues={top:0,left:0};this.eventType="";this.isScrolling=!1;this.parent=n;this.parent.virtualScrollModule=this}return t.prototype.addInternalEvents=function(){this.wireEvents()},t.prototype.wireEvents=function(){var u;if(this.unWireEvents(),"Chart"!==this.parent.displayOptions.view){var n=this.parent.element.querySelector(".e-movablecontent"),i=this.parent.element.querySelector(".e-frozencontent"),t=this.parent.element.querySelector(".e-movableheader"),r=n.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.clearEvents(n);sf.base.EventHandler.clearEvents(i);u=this.parent.isAdaptive?n:n.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.add(u,"scroll touchmove pointermove",this.onHorizondalScroll(t,n,i),this);sf.base.EventHandler.add(n.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(i,n),this);sf.base.EventHandler.add(n.parentElement.parentElement,"mouseup touchend",this.common(t,n,i),this);sf.base.EventHandler.add(r,"scroll",this.onCustomScrollbarScroll(n,t),this);sf.base.EventHandler.add(n,"scroll",this.onCustomScrollbarScroll(r,t),this);sf.base.EventHandler.add(t,"scroll",this.onCustomScrollbarScroll(r,n),this);sf.base.EventHandler.add(t,"touchstart pointerdown",this.setPageXY(),this);sf.base.EventHandler.add(t,"touchmove pointermove",this.onTouchScroll(t,n,i),this);sf.base.EventHandler.add(n,"touchstart pointerdown",this.setPageXY(),this);sf.base.EventHandler.add(n,"touchmove pointermove",this.onTouchScroll(t,n,i),this)}},t.prototype.unWireEvents=function(){var n=this.parent.element.querySelector(".e-movablecontent"),i=this.parent.element.querySelector(".e-frozencontent"),t=this.parent.element.querySelector(".e-movableheader"),r=n.parentElement.parentElement.querySelector(".e-movablescrollbar"),u=this.parent.isAdaptive?n:n.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.remove(u,"scroll touchmove pointermove",this.onHorizondalScroll(t,n,i));sf.base.EventHandler.remove(n.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(i,n));sf.base.EventHandler.remove(n.parentElement.parentElement,"mouseup touchend",this.common(t,n,i));sf.base.EventHandler.remove(r,"scroll",this.onCustomScrollbarScroll(n,t));sf.base.EventHandler.remove(n,"scroll",this.onCustomScrollbarScroll(r,t));sf.base.EventHandler.remove(t,"scroll",this.onCustomScrollbarScroll(r,n));sf.base.EventHandler.remove(t,"touchstart pointerdown",this.setPageXY());sf.base.EventHandler.remove(t,"touchmove pointermove",this.onTouchScroll(t,n,i));sf.base.EventHandler.remove(n,"touchstart pointerdown",this.setPageXY());sf.base.EventHandler.remove(n,"touchmove pointermove",this.onTouchScroll(t,n,i))},t.prototype.onWheelScroll=function(n){var t=this,i=n;return function(n){var r=i.parentElement.scrollTop+(1===n.deltaMode?30*n.deltaY:n.deltaY);t.frozenPreviousValues.top!==r&&(n.preventDefault(),t.frozenPreviousValues.top=r,t.eventType=n.type)}},t.prototype.getPointXY=function(n){var t={x:0,y:0};return n.touches&&n.touches.length?(t.x=n.touches[0].pageX,t.y=n.touches[0].pageY):(t.x=n.pageX,t.y=n.pageY),t},t.prototype.onCustomScrollbarScroll=function(n,t){var i=this,r=n,u=t;return function(n){if(null!==i.parent.element.querySelector(".e-movablecontent").parentElement.querySelector("tbody")){var t=n.target.scrollLeft;i.previousValues.left!==t&&(r.scrollLeft=t,u.scrollLeft=t,i.previousValues.left=t)}}},t.prototype.onTouchScroll=function(n,t){var i=this,r=t;return function(u){if("mouse"!==u.pointerType){var e=i.getPointXY(u),o=r.parentElement.scrollTop+(i.pageXY.y-e.y),s=i.parent.isAdaptive?t:r.parentElement.parentElement.querySelector(".e-movablescrollbar"),f=s.scrollLeft+(i.pageXY.x-e.x);i.frozenPreviousValues.left===f||f<0||(n.scrollLeft=f,s.scrollLeft=f,i.pageXY.x=e.x,i.frozenPreviousValues.left=f,i.frozenPreviousValues.top===o||o<0||(i.pageXY.y=e.y,i.frozenPreviousValues.top=o,i.eventType=u.type))}}},t.prototype.update=function(n,t,i,r){var u=this,s,e,h,c;if(this.isScrolling=!0,this.parent.pageSettings)if("vertical"===this.direction){var o="pivot"===this.parent.options.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,l=this.parent.pageSettings.rowSize*o*this.parent.gridSettings.rowHeight,f=Math.ceil(i/l);if(this.parent.scrollPosObject.vertical===f||this.parent.pageSettings.rowSize>=this.parent.scrollPageInfo.rowCount)return;this.parent.scrollPosObject.vertical=f;this.parent.pageSettings.rowCurrentPage=f>1?f:1;s=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",f,this.direction).then(function(n){u.parent.getScrollInfo(n);s=u.parent.scrollPageInfo.rowStartPos;var t=Math.ceil(s/(u.parent.pageSettings.rowSize*o)),i=l*t-u.parent.scrollPageInfo.rowFirstLvl*o*u.parent.gridSettings.rowHeight;u.parent.scrollPosObject.verticalSection=i})}else{if(e="pivot"===this.parent.options.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,h=this.parent.pageSettings.columnSize*e*this.parent.gridSettings.columnWidth,f=Math.ceil(r/h),this.parent.scrollPosObject.horizontal===f)return;this.parent.scrollPosObject.horizontal=f;this.parent.pageSettings.columnCurrentPage=f>1?f:1;c=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",f,this.direction).then(function(n){u.parent.getScrollInfo(n);c=u.parent.scrollPageInfo.colStartPos;var t=Math.ceil(c/(u.parent.pageSettings.columnSize*e)),i=h*t-u.parent.scrollPageInfo.colFirstLvl*e*u.parent.gridSettings.columnWidth;u.parent.scrollPosObject.horizontalSection=i})}},t.prototype.setPageXY=function(){var n=this;return function(t){"mouse"!==t.pointerType&&(n.pageXY=n.getPointXY(t))}},t.prototype.common=function(n,t){var i=this;return function(r){i.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");i.update(n,t,t.parentElement.scrollTop*i.parent.verticalScrollScale,t.scrollLeft*i.parent.horizontalScrollScale,r)}},t.prototype.onHorizondalScroll=function(t,i){var u,r=this;return function(f){var h=r.parent.isAdaptive?i:i.parentElement.parentElement.querySelector(".e-movablescrollbar"),e=i.scrollLeft*r.parent.horizontalScrollScale,o,l,s,p,c,a,v,y,w;("wheel"!==f.type&&"touchmove"!==f.type&&"wheel"!==r.eventType&&"touchmove"!==r.eventType||(clearTimeout(u),u=setTimeout(function(){e="touchmove"===f.type?i.scrollLeft:e;r.update(t,i,i.parentElement.scrollTop*r.parent.verticalScrollScale,e,f)},300)),r.previousValues.left!==e)&&(r.scrollDirection=r.direction="horizondal",o=-(e-r.parent.scrollPosObject.horizontalSection-i.scrollLeft),l=i.querySelector("."+n).style.transform.split(",").length>1?i.querySelector("."+n).style.transform.split(",")[1].trim():"0px)",i.scrollLeft<r.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(i.querySelector("."+n),{transform:"translate("+o+"px,"+l}),sf.base.setStyleAttribute(t.querySelector("."+n),{transform:"translate("+o+"px,0px)"})),s=r.parent.scrollPosObject.horizontalSection>e?-(r.parent.scrollPosObject.horizontalSection-e):e+t.offsetWidth-(r.parent.scrollPosObject.horizontalSection+i.querySelector("."+n).offsetWidth),p=Math.ceil(r.parent.scrollPosObject.horizontalSection/r.parent.horizontalScrollScale)<r.parent.scrollerBrowserLimit,(r.parent.scrollPosObject.horizontalSection>e||s>1&&p)&&(e>t.clientWidth?(r.parent.scrollPosObject.left<1&&(r.parent.scrollPosObject.left=t.clientWidth),r.parent.scrollPosObject.left=r.parent.scrollPosObject.left-50,s=r.parent.scrollPosObject.horizontalSection>e?s-r.parent.scrollPosObject.left:s+r.parent.scrollPosObject.left):s=-r.parent.scrollPosObject.horizontalSection,o=-(e-(r.parent.scrollPosObject.horizontalSection+s)-i.parentElement.parentElement.querySelector(".e-movablescrollbar").scrollLeft),c=r.parent.gridSettings.columnWidth*r.parent.scrollPageInfo.columnCount,c>r.parent.scrollerBrowserLimit&&(r.parent.horizontalScrollScale=c/r.parent.scrollerBrowserLimit,c=r.parent.scrollerBrowserLimit),o>c&&o>e&&(o=e,s=0),sf.base.setStyleAttribute(i.querySelector("."+n),{transform:"translate("+o+"px,"+l}),sf.base.setStyleAttribute(t.querySelector("."+n),{transform:"translate("+o+"px,0px)"}),r.parent.scrollPosObject.horizontalSection=r.parent.scrollPosObject.horizontalSection+s),a=h.scrollWidth-(h.scrollLeft+h.offsetWidth),a<=0&&(v=i.querySelector(".e-virtualtrack"),v.style.display="none",y=i.scrollWidth-(i.scrollLeft+i.offsetWidth),v.style.display="",w=i.scrollWidth-(i.scrollLeft+i.offsetWidth),r.parent.scrollPosObject.horizontalSection-=y>a?y:-w,o=h.scrollLeft>r.parent.scrollerBrowserLimit?Number(i.querySelector("."+n).style.transform.split(",")[0].split("px")[0].trim()):-(h.scrollLeft*r.parent.horizontalScrollScale-r.parent.scrollPosObject.horizontalSection-h.scrollLeft),sf.base.setStyleAttribute(i.querySelector("."+n),{transform:"translate("+o+"px,"+l}),sf.base.setStyleAttribute(t.querySelector("."+n),{transform:"translate("+o+"px,0px)"})),r.previousValues.left=e,r.frozenPreviousValues.left=e,r.eventType="",t.scrollLeft=i.scrollLeft)}},t.prototype.onVerticalScroll=function(t,i){var u,r=this;return function(f){var e=i.parentElement.scrollTop*r.parent.verticalScrollScale,o,c,s,l,a,h;("wheel"===f.type||"touchmove"===f.type||"wheel"===r.eventType||"touchmove"===r.eventType||"keyup"===f.type||"keydown"===f.type)&&(r.parent.isAdaptive||i.parentElement.parentElement.querySelector(".e-movablescrollbar"),clearTimeout(u),u=setTimeout(function(){r.update(null,i,i.parentElement.scrollTop*r.parent.verticalScrollScale,i.scrollLeft*r.parent.horizontalScrollScale,f)},300));r.previousValues.top!==e&&(r.scrollDirection=r.direction="vertical",o=-(e-r.parent.scrollPosObject.verticalSection-i.parentElement.scrollTop),c=i.querySelector("."+n).style.transform.split(",")[0].trim(),o>r.virtualDiv.clientHeight&&(o=r.virtualDiv.clientHeight),i.parentElement.scrollTop<r.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(t.querySelector("."+n),{transform:"translate(0px,"+o+"px)"}),sf.base.setStyleAttribute(i.querySelector("."+n),{transform:c+","+o+"px)"})),s=r.parent.scrollPosObject.verticalSection>e?-(r.parent.scrollPosObject.verticalSection-e):e+t.parentElement.clientHeight-(r.parent.scrollPosObject.verticalSection+t.querySelector("."+n).offsetHeight),l=Math.ceil(r.parent.scrollPosObject.verticalSection/r.parent.verticalScrollScale)<r.parent.scrollerBrowserLimit,(r.parent.scrollPosObject.verticalSection>e||s>1&&l)&&(e>t.parentElement.clientHeight?(r.parent.scrollPosObject.top<1&&(r.parent.scrollPosObject.top=t.parentElement.clientHeight),r.parent.scrollPosObject.top=r.parent.scrollPosObject.top-50,s=r.parent.scrollPosObject.verticalSection>e?s-r.parent.scrollPosObject.top:s+r.parent.scrollPosObject.top):s=-r.parent.scrollPosObject.verticalSection,a=r.parent.element.querySelector(".e-movablecontent").querySelector("."+n),o=-(e-(r.parent.scrollPosObject.verticalSection+s)-i.parentElement.scrollTop),h=r.parent.gridSettings.rowHeight*r.parent.scrollPageInfo.rowCount+.1-a.clientHeight,h>r.parent.scrollerBrowserLimit&&(r.parent.verticalScrollScale=h/r.parent.scrollerBrowserLimit,h=r.parent.scrollerBrowserLimit),o>h&&o>e&&(o=e,s=0),sf.base.setStyleAttribute(t.querySelector("."+n),{transform:"translate(0px,"+o+"px)"}),sf.base.setStyleAttribute(i.querySelector("."+n),{transform:c+","+o+"px)"}),r.parent.scrollPosObject.verticalSection=r.parent.scrollPosObject.verticalSection+s),r.previousValues.top=e,r.frozenPreviousValues.top=e,r.eventType="")}},t.prototype.updateScrollInfo=function(t,i,r){var a,s,e,o,c;if(this.parent.options.enableVirtualization){t.querySelector(".e-movablecontent")&&!t.querySelector(".e-movablecontent").querySelector(".e-virtualtrack")&&(this.virtualDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),t.querySelector(".e-movablecontent").appendChild(this.virtualDiv));t.querySelector(".e-movableheader")&&!t.querySelector(".e-movableheader").querySelector(".e-virtualtrack")?(this.virtualHeaderDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),t.querySelector(".e-movableheader").appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=t.querySelector(".e-movableheader").querySelector(".e-virtualtrack");a=t.querySelector(".e-movablecontent").querySelector("."+n);s=this.parent.gridSettings.rowHeight*r+.1-a.clientHeight;s>this.parent.scrollerBrowserLimit&&(this.parent.verticalScrollScale=s/this.parent.scrollerBrowserLimit,s=this.parent.scrollerBrowserLimit);e=this.parent.gridSettings.columnWidth*i;e>this.parent.scrollerBrowserLimit&&(this.parent.horizontalScrollScale=e/this.parent.scrollerBrowserLimit,e=this.parent.scrollerBrowserLimit);sf.base.setStyleAttribute(this.virtualDiv,{height:(s>.1?s:.1)+"px",width:(e>.1?e:.1)+"px"});sf.base.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(e>.1?e:.1)+"px"});var u=t.querySelector(".e-movablecontent"),v=t.querySelector(".e-frozencontent"),p=t.querySelector(".e-movableheader");this.parent.isAdaptive&&(u.parentElement.parentElement.querySelector(".e-movablescrollbar").children[0].style.minHeight="1px",u.parentElement.parentElement.querySelector(".e-movablescrollbar").style.minHeight="1px");var f=this.parent.isAdaptive?u:u.parentElement.parentElement.querySelector(".e-movablescrollbar"),y=u.parentElement.scrollTop>this.parent.scrollerBrowserLimit?u.querySelector("."+n).style.transform.split(",")[1].trim():-(u.parentElement.scrollTop*this.parent.verticalScrollScale-this.parent.scrollPosObject.verticalSection-u.parentElement.scrollTop)+"px)",l=f.scrollLeft>this.parent.scrollerBrowserLimit?u.querySelector("."+n).style.transform.split(",")[0].trim()+",":"translate("+-(f.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-f.scrollLeft)+"px,";sf.base.setStyleAttribute(v.querySelector("."+n),{transform:"translate(0px,"+y});sf.base.setStyleAttribute(u.querySelector("."+n),{transform:l+y});sf.base.setStyleAttribute(p.querySelector("."+n),{transform:l+0+"px)"});t.querySelector(".e-movablechild").style.width=e+(u.parentElement.offsetWidth-u.parentElement.clientWidth)+"px";var b="pivot"===this.parent.options.dataType&&"column"===this.parent.options.dataSourceSettings.valueAxis?this.parent.options.dataSourceSettings.values.length:1,w=this.parent.pageSettings.columnSize*b*this.parent.options.gridSettings.columnWidth,h=f.scrollWidth-(f.scrollLeft+f.offsetWidth);this.parent&&w>0&&h<=w&&f.scrollLeft>0&&(this.virtualDiv.style.display="none",o=u.scrollWidth-(u.scrollLeft+u.offsetWidth),this.virtualDiv.style.display="",c=u.scrollWidth-(u.scrollLeft+u.offsetWidth),this.parent.scrollPosObject.horizontalSection-=h<=0?o>h?o:-c:c===o?o-h:o<c&&(h===c||h>o)?-(c-o):0,l=f.scrollLeft>this.parent.scrollerBrowserLimit?u.querySelector("."+n).style.transform.split(",")[0].trim()+",":"translate("+-(f.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-f.scrollLeft)+"px,",sf.base.setStyleAttribute(u.querySelector(".e-table"),{transform:l+y}),sf.base.setStyleAttribute(p.querySelector(".e-table"),{transform:l+0+"px)"}));this.parent.internalGrid&&this.parent.internalGrid.options&&"auto"!==this.parent.internalGrid.options.height||this.parent.internalGrid.element&&"auto"!==this.parent.internalGrid.element.style.height?(v.style.height=(this.virtualDiv.offsetHeight+a.clientHeight).toString()+"px",u.style.height=(this.virtualDiv.offsetHeight+a.clientHeight).toString()+"px"):(v.style.height=t.querySelector(".e-frozencontent ."+n).toString()+"px",u.style.height=t.querySelector(".e-frozencontent ."+n).toString()+"px")}},t.prototype.destroy=function(){this.unWireEvents()},t}(),it=function(){function n(n){this.keyConfigs={escape:"escape"};this.parent=n;this.event=void 0;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;var t=document.getElementById(this.parent.element.id+"_drillthrough");this.drillThroughKeyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return n.prototype.keyActionHandler=function(n){switch(n.action){case"escape":this.processClose(n)}},n.prototype.processClose=function(n){var i=n.target,t,r,u;i&&sf.base.closest(i,".e-popup.e-popup-open")&&(t=sf.base.closest(i,".e-popup.e-popup-open").blazor__instance,r=this,t&&!t.closeOnEscape&&(u=t.element.getAttribute("data-fieldName"),t.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:n.altKey,ctrlKey:n.ctrlKey,code:n.code,key:n.key,location:n.location,repeat:n.repeat,shiftKey:n.shiftKey,metaKey:n.metaKey,type:n.type}).then(function(){var t,i,f;if(r.parent.parentElement)for(t=0,i=[].slice.call(r.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++)if(f=i[t],f.getAttribute("data-uid")===u){f.focus();break}n.preventDefault()})))},n.prototype.destroy=function(){this.drillThroughKeyboardModule&&!this.drillThroughKeyboardModule.isDestroyed&&this.drillThroughKeyboardModule.destroy()},n}(),f=function(){function t(n,t,i){this.scrollPageInfo={rowCount:0,columnCount:0,colFirstLvl:0,rowFirstLvl:0,colStartPos:0,rowStartPos:0};this.verticalScrollScale=1;this.horizontalScrollScale=1;this.scrollerBrowserLimit=8e6;this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}};this.element=n;this.element.blazor__instance=this;this.dotNetRef=i;this.getOptions(n,t);this.initModules()}return t.prototype.getOptions=function(n,t){this.element=n;this.options=t;this.element.blazor__instance=this;this.parentElement=n;this.isAdaptive=sf.base.Browser.isDevice;this.internalGrid=t.internalGrid&&t.internalGrid.blazor__instance?t.internalGrid.blazor__instance:{element:t.internalGrid};this.pivotFieldListModule=t.fieldListModule&&t.fieldListModule.blazor__instance?t.fieldListModule.blazor__instance:t.fieldListModule;this.fieldList=t.fieldList;this.dataSourceSettings=t.dataSourceSettings;this.gridSettings=t.gridSettings;this.editSettings=t.editSettings;this.displayOptions=t.displayOptions;this.enableValueSorting=t.enableValueSorting;this.currentView="Both"===this.displayOptions.view?this.displayOptions.primary:this.displayOptions.view;this.groupingBarSettings=this.options.groupingBarsettings;this.pageSettings=this.options.pageSettings;this.options.scrollPageInfo&&this.getScrollInfo(this.options.scrollPageInfo)},t.prototype.initModules=function(){this.options.showGroupingBar&&(this.groupingBarModule=new w(this));this.options.showToolbar&&(this.toolbarModule=new b(this));this.options.allowCalculatedField&&(this.calculatedFieldModule=new y(this));this.options.enableVirtualization&&(this.virtualScrollModule=new g(this));this.gridSettings.allowSelection&&(this.selectionModule=new d(this));this.keyboardModule=new tt(this);this.commonActionModule=new k(this);this.contentReady();this.unWireEvents();this.wireEvents()},t.prototype.updateModuleProperties=function(){this.options.showGroupingBar&&(this.groupingBarModule?this.groupingBarModule.parent=this.pivotButtonModule.parent=this:this.groupingBarModule=new w(this));this.options.showToolbar&&(this.toolbarModule?this.toolbarModule.parent=this:this.toolbarModule=new b(this));this.options.allowCalculatedField&&(this.calculatedFieldModule?this.calculatedFieldModule.parent=this:this.calculatedFieldModule=new y(this));this.gridSettings.allowSelection&&(this.selectionModule?this.selectionModule.parent=this:this.selectionModule=new d(this));this.options.enableVirtualization&&(this.virtualScrollModule?this.virtualScrollModule.parent=this:this.virtualScrollModule=new g(this));this.editSettings.allowEditing&&this.drillThroughModule&&(this.drillThroughModule.parent=this);this.keyboardModule.parent=this.commonActionModule.parent=this.commonActionModule.keyboardModule.parent=this},t.prototype.getChartHeight=function(n){var t;return this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.width=this.element.querySelector(".e-pivotchart").style.width,n=this.element.querySelector(".e-chart-grouping-bar").clientHeight),this.options.showToolbar&&this.options.showGroupingBar?t=(n-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString():this.options.showToolbar?t=(n-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.options.showGroupingBar&&(t=(n-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString()),t},t.prototype.contentReady=function(){var n,t,i;if(this.updateModuleProperties(),this.options.renderGrid){if(this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.updatePivotButtons(),this.groupingBarModule.refreshUI();else if(this.element&&this.element.querySelectorAll(".e-axis-container").length>0)for(n=0,t=[].slice.call(this.element.querySelectorAll(".e-axis-container"));n<t.length;n++)i=t[n],sf.base.remove(i);this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.addInternalEvents();this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.addInternalEvents()}},t.prototype.getSelectedCellDom=function(n){return n?JSON.stringify(window.sfBlazor.getDomObject("currentCell",n)):null},t.prototype.selectedCell=function(n,t,i){return i?this.getSelectedCellDom(this.element.querySelector("."+(0===n?"e-frozenheader":"e-movableheader")+' th[index="'+t+'"][aria-colindex="'+n+'"]')):this.getSelectedCellDom(this.element.querySelector("."+(0===n?"e-frozencontent":"e-movablecontent")+' td[index="'+t+'"][aria-colindex="'+n+'"]'))},t.prototype.hyperlinkCellclick=function(n,t){if(null!=n){n.currentCell=window.sfBlazor.getElementByXpath(t);var i=n.currentCell.getAttribute("data-url")?n.currentCell.getAttribute("data-url"):n.currentCell.querySelector("a").getAttribute("data-url");window.open(i)}},t.prototype.createSheet=function(n,t,i){this.createStyleSheet().insertRule(".format"+t+i+"{"+n+"}",0)},t.prototype.getScrollInfo=function(n){n&&(this.scrollPageInfo.colFirstLvl=n.colFirstLvl,this.scrollPageInfo.rowFirstLvl=n.rowFirstLvl,this.scrollPageInfo.columnCount=n.columnCount,this.scrollPageInfo.rowCount=n.rowCount,this.scrollPageInfo.colStartPos=n.colStartPos,this.scrollPageInfo.rowStartPos=n.rowStartPos)},t.prototype.exportDocument=function(n,t,i){var o,r;if(navigator.msSaveBlob){for(var f=window.atob(i),e=new Uint8Array(f.length),u=0;u<f.length;u++)e[u]=f.charCodeAt(u);o=new Blob([e.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,t)}else r=document.createElement("a"),r.download=t,r.href="data:application/octet-stream;base64,"+i,document.body.appendChild(r),r.click(),document.body.removeChild(r)},t.prototype.createStyleSheet=function(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),n.sheet},t.prototype.getSelectedCells=function(){for(var r,t=[],n=0,i=[].slice.call(this.element.querySelectorAll("."+h+",."+c));n<i.length;n++)r=i[n],t.push(window.sfBlazor.getDomObject("currentCell",r));return JSON.stringify(t)},t.prototype.onContextMenuOpen=function(){if(this.options.allowGrouping&&this.lastCellClicked){var n=sf.base.closest(this.lastCellClicked,"td."+u+",th."+s);return this.lastCellClicked=void 0,n&&!n.classList.contains("e-valuesheader")?JSON.stringify(window.sfBlazor.getDomObject("currentCell",n)):null}return null},t.prototype.mouseRclickHandler=function(n){this.lastCellClicked=n.target},t.prototype.mouseClickHandler=function(n){var t,f,e,r;this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused");this.element.querySelector("."+i)&&this.element.querySelector("."+i).querySelectorAll(".e-menu-item.e-focused").length>0&&sf.base.removeClass(this.element.querySelector("."+i).querySelectorAll(".e-menu-item.e-focused"),"e-focused");t=n.target;this.enableValueSorting&&"pivot"===this.options.dataType&&(t.classList.contains("e-sortfilterdiv")||t.classList.contains("e-stackedheadertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-headercell")||t.classList.contains("e-cellvalue")||t.classList.contains(s)||t.classList.contains(u))?(r=sf.base.closest(t,"td."+u+",th."+s))&&(sf.base.closest(r,".e-movableheader")&&"column"===this.dataSourceSettings.valueAxis||sf.base.closest(r,"tr.e-row")&&"row"===this.dataSourceSettings.valueAxis&&(r.classList.contains(u)||r.classList.contains("e-stot")))&&(this.enableValueSorting&&(f=Number(r.getAttribute("aria-colindex")),e=Number(r.getAttribute("index")),"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(f=Number(r.getAttribute("aria-colindex"))+Number(r.getAttribute("aria-colspan"))-1),this.dotNetRef.invokeMethodAsync("MouseClickHandler",e,f)),n.preventDefault()):this.gridSettings.allowSelection||null!==(r=sf.base.closest(t,"td."+u+",th."+s+",td.e-rowcell"))&&(f=Number(r.getAttribute("aria-colindex")),e=Number(r.getAttribute("index")),t.classList.contains("e-expand")||t.classList.contains("e-collapse")||this.dotNetRef.invokeMethodAsync("CellClickedHandler",e,f,n))},t.prototype.getHeightAsNumber=function(){var n;return isNaN(this.options.height)?this.options.height.toString().indexOf("%")>-1?n=parseFloat(this.options.height.toString())/100*this.element.offsetHeight:this.options.height.toString().indexOf("px")>-1?n=Number(this.options.height.toString().split("px")[0]):"auto"===this.options.height&&(n=this.element.offsetHeight):n=Number(this.options.height),n<300&&(n=300),n},t.prototype.calculateGridHeight=function(t,r,u){var f=this.options.height,e=this.getHeightAsNumber(),o=r*this.gridSettings.rowHeight;if(isNaN(e)&&(e=e>300?e:300),"auto"===this.gridSettings.height&&e&&this.element.querySelector(".e-gridheader")){if(f=e-(u*this.gridSettings.rowHeight+(this.element.querySelector(".e-gridheader").offsetHeight-this.element.querySelector(".e-headercontent").offsetHeight)+(this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").offsetHeight:0)+(this.element.querySelector("."+i)?this.element.querySelector("."+i).clientHeight:0))-1,t){var s=this.internalGrid&&this.internalGrid.options&&!isNaN(this.internalGrid.options.height)?Number(this.internalGrid.options.height):this.element.querySelector(".e-movablecontent").offsetHeight,c=this.element.querySelector(".e-movablecontent ."+n).offsetWidth,h=this.element.querySelector(".e-movablecontent").offsetWidth<c;if(f>=o&&(!h||f>=s)&&!(s<o)&&!!!(h&&f-o<18))return"auto"}else if(f>r*this.gridSettings.rowHeight)return"auto"}else f=this.gridSettings.height;return f<this.gridSettings.rowHeight?this.gridSettings.rowHeight.toString():o<f?o.toString():f.toString()},t.prototype.updateGridUI=function(t,i,r,u){var f;if((i&&this.getOptions(t,i),this.options.showGroupingBar&&this.groupingBarModule)?this.groupingBarModule.refreshUI():(f=t.querySelector(".e-frozenheader").querySelector(".e-columnheader"),f&&f.querySelector(".e-rhandler")&&(f.style.height=f.querySelector(".e-rhandler").style.height="auto",f.style.height=f.querySelector(".e-rhandler").style.height=t.querySelector(".e-headercontent").offsetHeight+"px")),t.querySelector(".e-movableheader ."+n)&&"0px"===t.querySelector(".e-movableheader ."+n).style.width&&(t.querySelector(".e-movablecontent ."+n).style.width=t.querySelector(".e-movableheader ."+n).style.width=""),t.querySelector(".e-movableheader ."+n+" th.e-firstcell.e-lastcell")&&t.querySelector(".e-movableheader ."+n+" th.e-firstcell.e-lastcell").offsetWidth<=0){var e=t.querySelector(".e-movableheader ."+n+" colgroup").children,o=t.querySelector(".e-movablecontent ."+n+" colgroup").children,c=sf.base.formatUnit(this.options.gridSettings.columnWidth);e.length>1&&"auto"===e[e.length-1].style.width&&(e[e.length-1].style.width=c);o.length>1&&"auto"===o[o.length-1].style.width&&(o[o.length-1].style.width=c)}i&&this.virtualScrollModule&&this.virtualScrollModule.updateScrollInfo(t,r,u);var h=t.querySelector(".e-gridcontent .e-content"),s=h.scrollHeight>h.clientHeight,l=Number(t.querySelector(".e-movablechild").style.width.split("px")[0])>Number(t.querySelector(".e-movablescrollbar").style.width.split("px")[0]);sf.base.setStyleAttribute(h,{overflow:s?"hidden scroll":"hidden auto",display:"flex"});sf.base.setStyleAttribute(t.querySelector(".e-gridheader"),this.options.enableRtl?{paddingLeft:s?"16px":""}:{paddingRight:s?"16px":""});sf.base.setStyleAttribute(t.querySelector(".e-headercontent"),this.options.enableRtl?{borderLeftWidth:s?"1px":""}:{borderRightWidth:s?"1px":""});t.querySelector(".e-scrollbar").style.display=l?"flex":"none";t.querySelector(".e-gridcontent .e-frozencontent").style.borderBottom=l?"":"0px"},t.prototype.updateView=function(n,t){n&&(this.displayOptions=JSON.parse(t),"Both"===this.displayOptions.view&&"Table"===this.displayOptions.primary?(this.element.querySelector(".e-pivotchart").style.display="none",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="",this.options.showGroupingBar&&this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.display="none",this.element.querySelector(".e-pivot-grouping-bar").style.display="")):"Both"===this.displayOptions.view&&"Chart"===this.displayOptions.primary&&(this.element.querySelector(".e-pivotchart").style.display="",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="none",this.options.showGroupingBar&&this.element.querySelector(".e-pivot-grouping-bar")&&(this.element.querySelector(".e-pivot-grouping-bar").style.display="none",this.element.querySelector(".e-chart-grouping-bar").style.display="")))},t.prototype.updateGridSettings=function(n,t){n&&null!==t&&(this.gridSettings=JSON.parse(t))},t.prototype.getClientWidth=function(n,t){return n&&null!==t?document.getElementById(t).clientWidth:null},t.prototype.getTableCellNode=function(n,t,i){var r;if(n&&(r=document.elementFromPoint(i,t),r)){var f=Number(r.getAttribute("aria-colindex")),e=Number(r.getAttribute("index")),u={};if(f&&e)return u.index=e,u["aria-colindex"]=f,JSON.stringify(u)}return null},t.prototype.updateColorPickerUI=function(n){var t,i,f;if(n){for(var o=[].slice.call(n.querySelectorAll(".e-colorpicker-container.e-format-font-color-picker-container")),s=[].slice.call(n.querySelectorAll(".e-colorpicker-container.e-format-back-color-picker-container")),u=0,e=o;u<e.length;u++)t=e[u],sf.base.addClass([t],["e-format-color-picker","e-format-font-color-picker"]),sf.base.addClass([t.querySelector(".e-colorpicker")],"e-format-font-color"),sf.base.addClass([t.querySelector(".e-selected-color")],r);for(i=0,f=s;i<f.length;i++)t=f[i],sf.base.addClass([t],"e-format-color-picker"),sf.base.addClass([t.querySelector(".e-colorpicker")],"e-format-back-color"),sf.base.addClass([t.querySelector(".e-selected-color")],r)}},t.prototype.onWindowResize=function(){var n=this;clearTimeout(this.timeOutObj);this.timeOutObj=setTimeout(function(){var t=n.element.getBoundingClientRect();n.dotNetRef.invokeMethodAsync("LayoutRefresh",t.width,t.height)},500)},t.prototype.drillthroughIntialize=function(n){n&&this.editSettings.allowEditing&&(this.drillThroughModule=new it(this))},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this);sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this);this.onWindowResize=this.onWindowResize.bind(this);window.addEventListener("resize",this.onWindowResize,!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler);sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler);window.removeEventListener("resize",this.onWindowResize,!0)},t.prototype.destroy=function(){this.unWireEvents();this.keyboardModule.destroy();this.commonActionModule.destroy();this.options.showGroupingBar&&(this.groupingBarModule.destroy(),this.pivotButtonModule.destroy());this.options.showFieldList&&this.pivotFieldListModule&&this.pivotFieldListModule.destroy();this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.destroy();this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.destroy();this.editSettings.allowEditing&&this.drillThroughModule&&this.drillThroughModule.destroy()},t}(),rt=function(){function n(n){this.parent=n;this.parent.treeRendererModule=this}return n.prototype.updateFieldListIcons=function(n,t,i){for(var r,e=document.getElementById(n),f=[].slice.call(e.querySelectorAll("ul li")),u=0;u<f.length;u++)for(r=0;r<t.length;r++)if(t[r].id===f[u].getAttribute("data-uid")){this.updateTreeNode(f[u],t[r],i);break}},n.prototype.updateTreeNode=function(n,i,u){var s=!1,e,h,f,o;s="olap"!==this.parent.options.dataType||this.updateOlapTreeNode(n);e=n.querySelector(".e-text-content");n.querySelector("."+t)&&e&&(h=n.querySelector("."+t),e.insertBefore(h,n.querySelector(".e-list-text")));s&&!this.parent.isAdaptive&&(f=this.parent.commonActionModule.getFieldInfo(i.id),s=!1,o=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}}),o.appendChild(sf.base.createElement("span",{attrs:{tabindex:"-1",title:f.fieldItem?f.fieldItem.allowDragAndDrop?u:"":u,"aria-disabled":"false"},className:r+" e-drag "+(f.fieldItem?f.fieldItem.allowDragAndDrop?"":"e-disable-drag":"")})),n.querySelector(".e-checkbox-wrapper")&&!n.querySelector(".e-drag")&&e&&e.insertBefore(o,n.querySelector(".e-checkbox-wrapper")),this.parent.pivotButtonModule.createDraggable(!0,o,f.fieldItem));n.querySelector(".e-check")&&sf.base.addClass([n.querySelector(".e-list-text")],"e-selected-node")},n.prototype.updateOlapTreeNode=function(n){if("olap"!==this.parent.options.dataType||!n)return!0;var i=n.querySelector(".e-text-content");return i.querySelector(".e-calcMemberGroupCDB,.e-measureGroupCDB-icon,.e-folderCDB-icon,.e-folderCDB-open-icon,.e-dimensionCDB-icon,.e-kpiCDB-icon")&&(i.querySelector(".e-checkbox-wrapper").style.display="none"),i.querySelector("."+t)&&i.querySelector("."+t).className.indexOf("e-level-members")>-1&&(this.parent.isAdaptive?i.querySelector(".e-checkbox-wrapper").style.display="none":i.querySelector(".e-checkbox-wrapper").style.visibility="hidden"),!!(i.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||i.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||i.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))&&(!i.querySelector(".e-measure-icon")||(i.querySelector("."+t).style.display="none",!0))},n}(),ut=function(){function n(n,t,i){this.element=n;this.element.blazor__instance=this;this.dotNetRef=i;this.getOptions(n,t);this.dotNetRef=i}return n.prototype.getOptions=function(n,t){this.element=n;this.options=t;this.element.blazor__instance=this;this.parentElement=document.getElementById(n.id+"_Dialog_Container");this.isAdaptive=sf.base.Browser.isDevice;this.pivotGridModule=t.pivotGridModule&&t.pivotGridModule.blazor__instance?t.pivotGridModule.blazor__instance:t.pivotGridModule;this.fieldList=t.fieldList;this.dataSourceSettings=t.dataSourceSettings;this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},n.prototype.initModules=function(){this.treeRendererModule=new rt(this);this.commonActionModule=new k(this);this.pivotButtonModule=new p(this);this.options.allowCalculatedField&&(this.calculatedFieldModule=new y(this));this.unWireEvents();this.wireEvents()},n.prototype.contentReady=function(){this.initModules();this.pivotButtonModule&&(this.pivotButtonModule.createPivotButtonDrop(),this.pivotButtonModule.setPivotButtonDrag());this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},n.prototype.onShowFieldList=function(n,t){n.querySelector(".e-toggle-field-list")&&sf.base.addClass([n.querySelector(".e-toggle-field-list")],"e-hide");t.style.top=parseInt(t.style.top,10)<0?"0px":t.style.top},n.prototype.removeFieldListIcon=function(n){(!document.getElementById(n.id+"calculateddialog")||document.getElementById(n.id+"calculateddialog").classList.contains("e-popup-close"))&&n.querySelector(".e-toggle-field-list")&&sf.base.removeClass([n.querySelector(".e-toggle-field-list")],"e-hide")},n.prototype.updateFieldList=function(n){var t=n.querySelector(".e-footer-content");sf.base.select("#"+n.id+"_dialog-content",n)?(sf.base.setStyleAttribute(sf.base.select("#"+n.id+"_dialog-content",n),{padding:"0"}),sf.base.addClass([t],"e-field-list-footer")):n.querySelector(".e-adaptive-container").appendChild(t)},n.prototype.updateSelectedNodes=function(n,t){var i,r,u,f;if(n=sf.base.closest(n,".e-text-content"),"check"===t?sf.base.addClass([n.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([n.querySelector(".e-list-text")],"e-selected-node"),i=sf.base.closest(n,"li"),i&&i.querySelector("ul"))for(r=0,u=[].slice.call(i.querySelectorAll("li"));r<u.length;r++)f=u[r],"check"===t?sf.base.addClass([f.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([f.querySelector(".e-list-text")],"e-selected-node")},n.prototype.removeFocusedElements=function(){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused")},n.prototype.wireEvents=function(){sf.base.EventHandler.add(document,"click",this.removeFocusedElements,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"click",this.removeFocusedElements)},n.prototype.destroy=function(){this.unWireEvents();this.commonActionModule.destroy();this.pivotButtonModule.destroy();this.pivotGridModule&&this.pivotGridModule.destroy()},n}();return{initialize:function(n,t,i){sf.base.enableBlazorMode();new f(n,t,i)},initializeFieldList:function(n,t,i){sf.base.enableBlazorMode();new ut(n,t,i)},contentReady:function(n,t,i){n&&n.blazor__instance&&(n.blazor__instance.options=t,n.blazor__instance.getOptions(n,t),i||n.blazor__instance.contentReady())},getChartHeight:function(n,t){n&&n.blazor__instance&&n.blazor__instance.getChartHeight(t)},onShowFieldList:function(n,t){n&&n.blazor__instance&&n.blazor__instance.onShowFieldList(n,t)},removeFieldListIcon:function(n){n&&n.blazor__instance&&n.blazor__instance.removeFieldListIcon(n)},updateFieldListIcons:function(n,t,i,r){n&&n.blazor__instance&&n.blazor__instance.treeRendererModule.updateFieldListIcons(t,i,r)},setPivotButtonDraggable:function(n,t){n&&n.blazor__instance&&n.blazor__instance.pivotButtonModule&&(n.blazor__instance.options=t,n.blazor__instance.getOptions(n,t),n.blazor__instance.pivotButtonModule.createPivotButtonDrop(),n.blazor__instance.pivotButtonModule.setPivotButtonDrag())},isFullRowElement:function(n,t,i){return n&&n.blazor__instance?n.blazor__instance.commonActionModule.isFullRowElement(t,i):JSON.stringify(!1)},getTreeNode:function(n,t,i,r){return n&&n.blazor__instance?n.blazor__instance.commonActionModule.getTreeNode(t,i,r):null},updateActiveNode:function(n,t,i){var r=!1;return n&&n.blazor__instance&&(r=n.blazor__instance.commonActionModule.updateActiveNode(t,i)),JSON.stringify(r)},updateSelectedNodes:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.updateSelectedNodes(window.sfBlazor.getElementByXpath(t),i)},updateFieldList:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateFieldList(t)},renderToolbar:function(n){n&&n.blazor__instance&&n.blazor__instance.toolbarModule.renderToolbar()},focusToolBar:function(n){n&&n.blazor__instance&&n.blazor__instance.toolbarModule.focusToolBar()},getButtonPosition:function(n,t,i){return n&&n.blazor__instance?JSON.stringify(n.blazor__instance.pivotButtonModule.getButtonPosition(window.sfBlazor.getElementByXpath(t),i)):null},getButtonLocation:function(n){var t=n.querySelector(".e-dropdown-icon").getBoundingClientRect();return JSON.stringify([t.top+(window.scrollY||document.documentElement.scrollTop),t.left])},selectInputRange:function(n,t){n&&n.blazor__instance&&n.blazor__instance.toolbarModule.selectInputRange(t)},focusOnElement:function(n){n.focus()},copyMdxQuery:function(n,t){n&&n.blazor__instance&&n.blazor__instance.toolbarModule.copyMdxQuery(t)},validateInputs:function(n,t){n&&n.blazor__instance&&n.blazor__instance.commonActionModule.validateInputs(t)},selectedCell:function(n,t,i,r){if(n&&n.blazor__instance)return n.blazor__instance.selectedCell(t,i,r)},hyperlinkCellclick:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.hyperlinkCellclick(JSON.parse(t),JSON.parse(i))},updateEditOptions:function(n,t){n&&n.blazor__instance&&n.blazor__instance.calculatedFieldModule.updateEditOptions(t)},accordionClick:function(n,t,i,r){if(n&&n.blazor__instance)return n.blazor__instance.calculatedFieldModule.accordionClick(t,i,r)},getAccordionValue:function(n){if(n&&n.blazor__instance)return n.blazor__instance.calculatedFieldModule.getAccordionValue()},updateAccordionLabel:function(n,t){n&&n.blazor__instance&&n.blazor__instance.calculatedFieldModule.updateAccordionLabel(t)},getNodeLocation:function(n,t,i){if(n&&n.blazor__instance)return n.blazor__instance.calculatedFieldModule.getNodeLocation(t,i)},getIconInfo:function(n,t,i){if(n&&n.blazor__instance)return n.blazor__instance.calculatedFieldModule.getIconInfo(t,i)},emptyFieldName:function(n){n&&n.blazor__instance&&n.blazor__instance.calculatedFieldModule.emptyFieldName(n.id)},updateCalculatedFields:function(n,t,i,r,u){n&&n.blazor__instance&&n.blazor__instance.calculatedFieldModule.editCalculatedFieldInfo(t,i,r,u)},updateCalculatedFieldExpandIcons:function(n,t,i){return n&&n.blazor__instance?n.blazor__instance.calculatedFieldModule.updateNodeExpandIcons(t,i):JSON.stringify(!1)},createFormulaDroppable:function(n,t,i,r,u,f,e,o){n&&n.blazor__instance&&n.blazor__instance.calculatedFieldModule.createFormulaDroppable(t,i,r,u,f,e,o)},createSheet:function(n,t,i,r){n&&n.blazor__instance&&n.blazor__instance.createSheet(t,i,r)},updateScrollInfo:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.virtualScrollModule.updateScrollInfo(n,t,i)},getScrollInfo:function(n,t){n&&n.blazor__instance&&n.blazor__instance.getScrollInfo(t)},exportDocument:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.exportDocument(n,t,i)},calculateGridHeight:function(n,t,i,r){return n&&n.blazor__instance?n.blazor__instance.calculateGridHeight(t,i,r):null},onContextMenuOpen:function(n){return n&&n.blazor__instance?n.blazor__instance.onContextMenuOpen():null},getSelectedCells:function(n){return n&&n.blazor__instance?n.blazor__instance.getSelectedCells():null},updateGridUI:function(n,t,i,r){n&&n.blazor__instance&&n.blazor__instance.updateGridUI(n,t,i,r)},updateView:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateView(n,t)},updateGridSettings:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateGridSettings(n,t)},getClientWidth:function(n,t){return n&&n.blazor__instance?n.blazor__instance.getClientWidth(n,t):null},getTableCellNode:function(n,t,i){return n&&n.blazor__instance?n.blazor__instance.getTableCellNode(n,t,i):null},updateColorPickerUI:function(n,t){if(n&&n.blazor__instance)return n.blazor__instance.updateColorPickerUI(t)},drillthroughIntialize:function(n){n&&n.blazor__instance&&n.blazor__instance.drillthroughIntialize(n)},getElementInfo:function(n){if(n){var i=n.getBoundingClientRect(),t={};return t.width=i.width,t.height=i.height,JSON.stringify(t)}return null},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.destroy()}}}()},"./modules/sf-progressbar.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Progressbar=function(){"use strict";var n=function(){function n(n,t){this.resizeTo=0;this.element=n;this.dotNetRef=t;this.element.blazor__instance=this}return n.prototype.wireEvents=function(){window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},n.prototype.unWireEvents=function(){window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this));this.element=null;this.dotNetRef=null},n.prototype.resize=function(){var n=this;(this.dotNetRef&&!this.cancelResize||this.lineardata&&this.lineardata.isActive||this.circularData&&this.circularData.isActive)&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout(function(){n.dotNetRef.invokeMethodAsync("TriggerResize")},500))},n.prototype.getPathArc=function(n,t,i,r,u,f,e){var o=this.degreeToLocation(n,t,i,r),s=this.degreeToLocation(n,t,i,u),h="0",c=f?"0":"1";return h=f?(r>=u?r:r+360)-u<=180?"0":"1":(u>=r?u:u+360)-r<=180?"0":"1",e?"M "+n+" "+t+" L "+o.x+" "+o.y+" A "+i+" "+i+"  0  "+h+" "+c+" "+s.x+" "+s.y+" Z":"M"+o.x+" "+o.y+"A"+i+" "+i+" 0 "+h+" "+c+" "+s.x+" "+s.y},n.prototype.degreeToLocation=function(n,t,i,r){var u=(r-90)*(Math.PI/180);return{x:n+i*Math.cos(u),y:t+i*Math.sin(u)}},n.prototype.effect=function(n,t,i,r,u){return(u?i:-i)*Math.cos(n/r*(Math.PI/2))+(t+(u?-i:i))},n.prototype.activeAnimate=function(n,t,i,r){var u=1-Math.pow(1-n,3);return t+(r?-u*i:u*i)},n.prototype.getPathLine=function(n,t){var i=t.enableRtl?"Round"===t.cornerRadius?n+t.rectWidth-.45*t.thickness:n+t.rectWidth:"Round"===t.cornerRadius?n+.45*t.thickness:n,r=t.enableRtl?"Round"===t.cornerRadius&&t.progressWidth?i-t.progressWidth+.9*t.thickness:i-t.progressWidth:"Round"===t.cornerRadius&&t.progressWidth?i+t.progressWidth-.9*t.thickness:i+t.progressWidth;return"M"+i+" "+(t.rectX+t.rectHeight/2)+"L"+r+" "+(t.rectY+t.rectHeight/2)},n.prototype.circularAnimation=function(){var n=this,r=new sf.base.Animation({}),t=document.getElementById(this.element.id+"_clippathcircle"),i=0;t&&this.circularData&&(t.style.visibility="hidden",r.animate(t,{duration:this.circularData.duration,delay:this.circularData.delay,progress:function(r){if(n.cancelResize=!0,r.timeStamp>=r.delay){if(t.style.visibility="visible",n.circularData.isActive){i=n.activeAnimate(r.timeStamp/r.duration,n.circularData.startPos,n.circularData.endPos,n.circularData.enableRtl);var u=document.getElementById(n.element.id+"_CircularActiveProgress");u&&u.setAttribute("opacity",n.effect(r.timeStamp,.5,.5,r.duration,!0).toString())}else i=n.effect(r.timeStamp,n.circularData.startPos,n.circularData.endPos,r.duration,n.circularData.enableRtl);t.setAttribute("d",n.getPathArc(n.circularData.x,n.circularData.y,n.circularData.pathRadius,n.circularData.start,i%360,n.circularData.enableRtl,!0))}},end:function(){n.cancelResize=!1;t.setAttribute("d",n.getPathArc(n.circularData.x,n.circularData.y,n.circularData.pathRadius,n.circularData.start,n.circularData.progressEnd,n.circularData.enableRtl,!0));n.circularData.isActive&&n.circularAnimation();n.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},n.prototype.circularBufferAnimation=function(){var n=this,r=new sf.base.Animation({}),t=document.getElementById(this.element.id+"_clippathBuffercircle"),i=0;t&&this.circularBufferData&&(t.style.visibility="hidden",r.animate(t,{duration:this.circularBufferData.duration,delay:this.circularBufferData.delay,progress:function(r){n.cancelResize=!0;r.timeStamp>=r.delay&&(t.style.visibility="visible",i=n.effect(r.timeStamp,n.circularBufferData.startPos,n.circularBufferData.endPos,r.duration,n.circularBufferData.enableRtl),t.setAttribute("d",n.getPathArc(n.circularBufferData.x,n.circularBufferData.y,n.circularBufferData.pathRadius,n.circularBufferData.start,i%360,n.circularBufferData.enableRtl,!0)))},end:function(){n.cancelResize=!1;t.setAttribute("d",n.getPathArc(n.circularBufferData.x,n.circularBufferData.y,n.circularBufferData.pathRadius,n.circularBufferData.start,n.circularBufferData.progressEnd,n.circularBufferData.enableRtl,!0));n.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},n.prototype.circularIndeterminateAnimation=function(n,t){var i=this,r,u;void 0===n&&(n=0);void 0===t&&(t=0);r=document.getElementById(this.element.id+"_clippathcircle");u=new sf.base.Animation({});r&&this.circularData&&(u.destroy(),u.animate(r,{duration:this.circularData.duration,delay:0,progress:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&(r.style.visibility="visible",n+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,t+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,r.setAttribute("d",i.getPathArc(i.circularData.x,i.circularData.y,i.circularData.pathRadius,n%360,t%360,i.circularData.enableRtl,!i.circularData.enableProgressSegments)))},end:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&i.circularIndeterminateAnimation(n,t)}}))},n.prototype.annotationAnimation=function(){var r,t,n=this,u=new sf.base.Animation({}),i=document.getElementById(this.element.id+"Annotation0").children[0];i&&i.children[0]&&"SPAN"===i.children[0].tagName&&(t=i.children[0]);t&&this.annotationData&&(r="Linear"===this.annotationData.type?document.getElementById(this.element.id+"_clippathrect"):document.getElementById(this.element.id+"_clippathcircle"),this.annotationData.isContent?t.innerHTML=this.annotationData.annotateValue+"%":r&&u.animate(r,{duration:this.annotationData.duration,delay:this.annotationData.delay,progress:function(i){n.cancelResize=!0;var u=n.effect(i.timeStamp,n.annotationData.startPos,n.annotationData.endPos,i.duration,!1),r=parseInt(((Math.round(u)-n.annotationData.start)/n.annotationData.totalAngle*100).toString(),10);t.innerHTML=r?r.toString()+"%":"0%"},end:function(){n.cancelResize=!1;t.innerHTML=n.annotationData.annotateValue+"%"}}))},n.prototype.labelAnimation=function(){var t,n=this,i,r;this.labelData&&(t="Linear"===this.labelData.type?document.getElementById(this.element.id+"_linearLabel"):document.getElementById(this.element.id+"_circularLabel"));i=new sf.base.Animation({});r=new sf.base.Animation({});t&&this.labelData&&!this.labelData.isStriped&&(t.style.visibility="hidden",i.animate(t,{duration:this.labelData.duration,delay:this.labelData.delay,progress:function(i){var r,u,f;(n.cancelResize=!0,"Linear"===n.labelData.type&&i.timeStamp>=i.delay&&""===n.labelData.labelText)?(t.style.visibility="visible",r=n.effect(i.timeStamp,n.labelData.progressPos,Math.round(n.labelData.end-n.labelData.progressPos),i.duration,!1),u=parseInt((r/n.labelData.width*100).toString(),10),(t.innerHTML=u.toString()+"%","Far"===n.labelData.labelPos||"Center"===n.labelData.labelPos)&&(f=n.effect(i.timeStamp,n.labelData.startPos,n.labelData.endPos-(n.labelData.enableRtl?0:n.labelData.startPos),i.duration,n.labelData.enableRtl),t.setAttribute("x",f.toString()))):"Circular"===n.labelData.type&&""===n.labelData.labelText&&(t.style.visibility="visible",r=n.effect(i.timeStamp,n.labelData.start,n.labelData.end-n.labelData.start,i.duration,!1),u=parseInt((r/n.labelData.totalAngle*100).toString(),10),t.innerHTML=u.toString()+"%")},end:function(){n.cancelResize=!1;t&&""===n.labelData.labelText?(t.style.visibility="visible",t.innerHTML=n.labelData.text,t.setAttribute("x",n.labelData.x.toString())):r.animate(t,{progress:function(i){t.style.visibility="visible";var r=n.effect(i.timeStamp,0,1,i.duration,!1);t.setAttribute("opacity",r.toString())},end:function(){t.setAttribute("opacity","1")}})}}))},n.prototype.stripeAnimation=function(n){var t=this,r,i;void 0===n&&(n=0);r=new sf.base.Animation({});i=document.getElementById(this.element.id+"_LinearStriped");i&&this.stripeData&&r.animate(i,{duration:this.stripeData.duration,delay:this.stripeData.delay,progress:function(){t.stripeData.enable&&(n+=t.stripeData.enableRtl?-t.stripeData.durationValue:t.stripeData.durationValue,i.setAttribute("gradientTransform","translate("+n+") rotate(-45)"))},end:function(){t.stripeData.enable&&t.stripeAnimation(n)}})},n.prototype.linearIndeterminateAnimation=function(){var n=this,i=new sf.base.Animation({}),t=document.getElementById(this.element.id+"_clippathrect");t&&this.lineardata&&(t.style.visibility="hidden",i.animate(t,{duration:this.lineardata.duration,delay:0,progress:function(i){if(t.style.visibility="visible",n.lineardata.enableRtl&&n.lineardata.enableRtl&&n.lineardata.enable&&n.lineardata.isIndeterminate){var r=n.effect(i.timeStamp,n.lineardata.x||n.lineardata.rectX+n.lineardata.progressWidth,n.lineardata.end,i.duration,n.lineardata.enableRtl);n.lineardata.enableProgressSegments?t.setAttribute("d",n.getPathLine(r,n.lineardata)):t.setAttribute("x",r.toString())}else n.lineardata.enable&&n.lineardata.isIndeterminate&&(r=n.effect(i.timeStamp,n.lineardata.start,n.lineardata.end,i.duration,n.lineardata.enableRtl),n.lineardata.enableProgressSegments?t.setAttribute("d",n.getPathLine(r,n.lineardata)):t.setAttribute("x",r.toString()))},end:function(){n.lineardata&&n.lineardata.enable&&n.lineardata.isIndeterminate&&(n.lineardata.enableRtl&&!n.lineardata.enableProgressSegments&&"Round4px"!==n.lineardata.cornerRadius?t.setAttribute("x",n.lineardata.x.toString()):n.lineardata.enableProgressSegments||t.setAttribute("x",n.lineardata.start.toString()),n.linearIndeterminateAnimation(),n.dotNetRef.invokeMethodAsync("TriggerAnimationComplete"))}}))},n.prototype.linearAnimation=function(){var n=this,r=new sf.base.Animation({}),t=document.getElementById(this.element.id+"_clippathrect"),i=0;t&&this.lineardata&&(t.style.visibility="hidden",r.animate(t,{duration:this.lineardata.duration,delay:this.lineardata.delay,progress:function(r){if(n.cancelResize=!0,n.lineardata.enableRtl&&"Round4px"!==n.lineardata.cornerRadius&&r.timeStamp>=r.delay)if(t.style.visibility="visible",n.lineardata.isActive){var u=document.getElementById(n.element.id+"_LinearActiveProgress");i=n.activeAnimate(r.timeStamp/r.duration,n.lineardata.x,n.lineardata.width,!0);u&&(u.setAttribute("opacity",n.effect(r.timeStamp,.5,.5,r.duration,!0).toString()),t.setAttribute("x",i.toString()))}else t.setAttribute("x",n.effect(r.timeStamp,n.lineardata.start,n.lineardata.end,r.duration,!0).toString());else r.timeStamp>=r.delay&&((t.style.visibility="visible",n.lineardata.isActive)?(u=document.getElementById(n.element.id+"_LinearActiveProgress"),i=n.activeAnimate(r.timeStamp/r.duration,0,n.lineardata.width,n.lineardata.enableRtl),u&&(u.setAttribute("opacity",n.effect(r.timeStamp,.5,.5,r.duration,!0).toString()),t.setAttribute("width",i.toString()))):t.setAttribute("width",n.effect(r.timeStamp,n.lineardata.start,n.lineardata.end,r.duration,!1).toString()))},end:function(){n.cancelResize=!1;n.lineardata&&n.lineardata.enable&&n.lineardata.enableRtl&&"Round4px"!==n.lineardata.cornerRadius?n.lineardata.isActive?(t.setAttribute("x",n.lineardata.x.toString()),n.linearAnimation()):t.setAttribute("x",n.lineardata.rtlX.toString()):n.lineardata&&n.lineardata.enable&&(t.setAttribute("width",n.lineardata.width.toString()),n.lineardata.isActive&&n.linearAnimation());n.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},n.prototype.linearBufferAnimation=function(){var n=this,i=new sf.base.Animation({}),t=document.getElementById(this.element.id+"_clippathBufferrect");t&&this.linearBufferdata&&(t.style.visibility="hidden",i.animate(t,{duration:this.linearBufferdata.duration,delay:this.linearBufferdata.delay,progress:function(i){n.cancelResize=!0;n.linearBufferdata.enableRtl&&"Round4px"!==n.linearBufferdata.cornerRadius&&i.timeStamp>=i.delay?i.timeStamp>=i.delay&&(t.style.visibility="visible",t.setAttribute("x",n.effect(i.timeStamp,n.linearBufferdata.start,n.linearBufferdata.end,i.duration,!0).toString())):i.timeStamp>=i.delay&&(t.style.visibility="visible",t.setAttribute("width",n.effect(i.timeStamp,n.linearBufferdata.start,n.linearBufferdata.end,i.duration,!1).toString()))},end:function(){n.cancelResize=!1;t.style.visibility="";n.lineardata&&n.linearBufferdata.enable&&n.linearBufferdata.enableRtl&&"Round4px"!==n.linearBufferdata.cornerRadius?t.setAttribute("x",n.linearBufferdata.rtlX.toString()):n.linearBufferdata&&n.linearBufferdata.enable&&t.setAttribute("width",n.linearBufferdata.width.toString());n.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},n}();return{initialize:function(t,i,r,u){return new n(t,u).wireEvents(),this.getElementSize(t,i,r)},setSecondaryElementStyle:function(n){if(n){var i=document.getElementById(n.id+"SVG").getBoundingClientRect(),t=document.getElementById(n.id+"Secondary_Element"),r=n.getBoundingClientRect();t&&i&&(t.style.visibility="visible",t.style.left=Math.max(i.left-r.left,0)+"px",t.style.top=Math.max(i.top-r.top,0)+"px")}},getElementSize:function(n,t,i){var u,f,r;return n&&(n.style.height=t,n.style.width=i,r=n.getBoundingClientRect(),u=r.width,f=r.height,n.style.width="",n.style.height=""),{width:u,height:f}},doLinearBufferAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.linearBufferdata=t,n.blazor__instance.linearBufferAnimation())},doLinearAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.lineardata=t,n.blazor__instance.linearAnimation())},doLinearIndeterminate:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.lineardata=t,n.blazor__instance.linearIndeterminateAnimation())},doStripedAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.stripeData=t,n.blazor__instance.stripeAnimation())},doCircularAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.circularData=t,n.blazor__instance.circularAnimation())},doCircularBufferAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.circularBufferData=t,n.blazor__instance.circularBufferAnimation())},doCircularIndeterminate:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.circularData=t,n.blazor__instance.circularIndeterminateAnimation(t.start,t.end))},doAnnotationAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.annotationData=t,n.blazor__instance.annotationAnimation())},doLabelAnimation:function(n,t){sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.labelData=t,n.blazor__instance.labelAnimation())},update:function(n,t,i,r,u){if(!sf.base.isNullOrUndefined(n.blazor__instance)){if("Linear"===i){var f=t;f.isStriped?n.blazor__instance.stripeData=f:n.blazor__instance.lineardata=f}else n.blazor__instance.circularData=t;r&&(n.blazor__instance.labelData=t);u&&(n.blazor__instance.annotationData=t)}},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.unWireEvents()}}}()},"./modules/sf-range-navigator.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.RangeNavigator=function(){"use strict";var t=function(){function t(n,t,i){this.mouseY=0;this.mouseX=0;this.reSizeTo=0;this.isTooltipHide=!0;this.isDrag=!1;this.tooltip=[];this.id=n;this.element=t;this.dotNetRef=i;this.element.blazor__instance=this}return t.prototype.destroy=function(){this.unWireEvents(this.id,this.dotNetRef)},t.prototype.unWireEvents=function(t,i){var r,u;this.dotNetRef=i;n.dotnetrefCollection=n.dotnetrefCollection.filter(function(n){return n.id!==t});r=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown);sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove);sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd);sf.base.EventHandler.remove(this.element,"click",this.rangeOnMouseClick);sf.base.EventHandler.remove(this.element,r,this.mouseLeave);u=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,u,n.resizeBound)},t.prototype.wireEvents=function(t,i){var r,u;this.dotNetRef=i;n.dotnetrefCollection.push({id:t,dotnetref:i});r=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this);sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd,this);sf.base.EventHandler.add(this.element,"click",this.rangeOnMouseClick,this);sf.base.EventHandler.add(this.element,r,this.mouseLeave,this);n.resizeBound=n.rangeResize.bind(this,n.dotnetrefCollection);u=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,u,n.resizeBound)},t.prototype.rangeOnMouseDown=function(n){this.setMouseX(this.getPageX(n));n.target.id.indexOf("_Thumb")>-1&&(this.element.blazor__instance.isDrag=!0);this.dotNetRef.invokeMethodAsync("OnRangeMouseDown",this.getEventArgs(n))},t.prototype.mouseMove=function(n){document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg")&&(this.setMouseX(this.getPageX(n)),this.element.blazor__instance.isDrag&&this.sliderChangeValue&&this.element.blazor__instance.changeSlider())},t.prototype.changeSlider=function(){var n,t;if(this.sliderChangeValue.isDrag&&this.mouseX>=this.sliderChangeValue.boundsX){switch(this.sliderChangeValue.currentSlider){case"Left":this.sliderChangeValue.startValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Right":this.sliderChangeValue.endValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Middle":n=Math.max(this.getRangeValue(Math.abs(this.sliderChangeValue.startX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMin);t=Math.min(this.getRangeValue(Math.abs(this.sliderChangeValue.endX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMax);Math.floor(Math.abs(this.getXLocation(t)-this.getXLocation(n)))===Math.floor(this.sliderChangeValue.sliderWidth)&&(this.sliderChangeValue.startValue=n,this.sliderChangeValue.endValue=t)}this.setSlider(this.sliderChangeValue.startValue,this.sliderChangeValue.endValue);this.sliderChangeValue.previousMoveX=this.mouseX}},t.prototype.setSlider=function(n,t){var r=this.element.blazor__instance,s=document.getElementById(r.id+"_SelectedArea"),c=document.getElementById(r.id+"_leftUnSelectedArea"),h=document.getElementById(r.id+"_rightUnSelectedArea"),l=document.getElementById(r.id+"_LeftSlider"),a=document.getElementById(r.id+"_RightSlider"),i,f,u;t>=n||(n=[t,t=n][0]);i=this.sliderChangeValue.boundsX;n=t>=n?n:[t,t=n][0];n=Math.max(n,this.sliderChangeValue.rangeMin);t=Math.min(t,this.sliderChangeValue.rangeMax);this.sliderChangeValue.startX=i+this.getXLocation(n);this.sliderChangeValue.endX=i+this.getXLocation(t);f=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX;u=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX;this.sliderChangeValue.sliderWidth=Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX);s.setAttribute("x",f+"");s.setAttribute("width",this.sliderChangeValue.sliderWidth+"");c.setAttribute("width",f-i+"");h.setAttribute("x",u+"");h.setAttribute("width",this.sliderChangeValue.boundsWidth-(u-i)+"");l.setAttribute("transform","translate("+(this.sliderChangeValue.startX-this.sliderChangeValue.thumpPadding)+", 0)");a.setAttribute("transform","translate("+(this.sliderChangeValue.endX-this.sliderChangeValue.thumpPadding)+", 0)");var e=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,o=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX,v={x:this.sliderChangeValue.isLeightWeight?0+i:i,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?e-i:e,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},y={x:this.sliderChangeValue.isLeightWeight?0+o:o,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.boundsWidth-(u-i),height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},p={x:this.sliderChangeValue.isLeightWeight?e+0:0,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX):o,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight};r.tooltip.length>0&&this.updateTooltip(v,y,p,this.sliderChangeValue.startX,this.sliderChangeValue.endX)},t.prototype.updateTooltip=function(t,i,r,u,f){var e=this.element.blazor__instance,h=this.getTooltipContent(this.sliderChangeValue.endValue),s=this.sliderChangeValue.enableRtl?t:i,o=e.tooltip[0].textStyle;n.measureText(h,o.size,o.fontWeight,o.fontStyle,o.fontFamily).Width>s.width&&(s=r);e.tooltip[0].location.x=f;e.tooltip[0].areaBounds=s;e.tooltip[0].content=[h];e.tooltip[0].dataBind();h=this.getTooltipContent(this.sliderChangeValue.startValue);s=this.sliderChangeValue.enableRtl?i:t;o=e.tooltip[1].textStyle;n.measureText(h,o.size,o.fontWeight,o.fontStyle,o.fontFamily).Width>s.width&&((s=r).x=e.sliderChangeValue.isLeightWeight?0:s.x);e.tooltip[1].location.x=u;e.tooltip[1].content=[h];e.tooltip[1].areaBounds=s;e.tooltip[1].dataBind()},t.prototype.getTooltipContent=function(n){var t=this.sliderChangeValue.format,i=null!==t.match("{value}");return"DateTime"===this.sliderChangeValue.valueType?(new sf.base.Internationalization).getDateFormat({format:t||"MM/dd/yyyy"})(new Date(n)):(new sf.base.Internationalization).getNumberFormat({format:i?"":t,useGrouping:this.sliderChangeValue.useGrouping})("Logarithmic"===this.sliderChangeValue.valueType?Math.pow(this.sliderChangeValue.logBase,n):n)},t.prototype.getRangeValue=function(n){return(this.sliderChangeValue.enableRtl?1-n/this.sliderChangeValue.boundsWidth:n/this.sliderChangeValue.boundsWidth)*this.sliderChangeValue.rangeDelta+this.sliderChangeValue.rangeMin},t.prototype.getXLocation=function(n){var t=(n-this.sliderChangeValue.rangeMin)/this.sliderChangeValue.rangeDelta;return(this.sliderChangeValue.enableRtl?1-t:t)*this.sliderChangeValue.boundsWidth},t.prototype.mouseEnd=function(n){this.element.blazor__instance.isDrag&&this.sliderChangeValue&&(this.dotNetRef.invokeMethodAsync("SetStartEndValue",this.sliderChangeValue.startValue,this.sliderChangeValue.endValue,!0,this.sliderChangeValue.enableTooltip),this.element.blazor__instance.isDrag=!1);this.dotNetRef.invokeMethodAsync("OnRangeMouseEnd",this.getEventArgs(n))},t.prototype.rangeOnMouseClick=function(n){this.dotNetRef.invokeMethodAsync("OnRangeMouseClick",this.getEventArgs(n))},t.prototype.mouseLeave=function(n){this.setMouseX(this.getPageX(n));this.element.blazor__instance.isDrag=!1;this.dotNetRef.invokeMethodAsync("OnRangeMouseLeave",this.getEventArgs(n));this.isTooltipHide&&this.fadeOutTooltip()},t.prototype.fadeOutTooltip=function(){if(this.sliderChangeValue&&this.sliderChangeValue.isTooltipHide){window.clearInterval(this.toolTipInterval);var n=this.element.blazor__instance;n.tooltip[1]&&(this.toolTipInterval=window.setTimeout(function(){n.tooltip[0].fadeOut();n.tooltip[1].fadeOut()},1e3))}},t.prototype.getPageX=function(n){return"touchmove"===n.type?n.changedTouches[0].clientX:n.clientX},t.prototype.setMouseX=function(n){var i=document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg"),r,t;i&&(r=i.getBoundingClientRect(),t=document.getElementById(this.id).getBoundingClientRect(),this.mouseX=n-t.left-Math.max(r.left-t.left,0))},t.prototype.getEventArgs=function(n){return{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType,target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0}}},t}(),n={getParentElementBoundsById:function(n,i){var r=document.getElementById(n),f,u;return r?(f=new t(n,r,i),f.unWireEvents(n,i),f.wireEvents(n,i),r.style.width="100%",r.style.height="100%",u=r.getBoundingClientRect(),{width:u.width||r.clientWidth||r.offsetWidth,height:u.height||r.clientHeight||r.offsetHeight,left:u.left,top:u.top,right:u.right,bottom:u.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(n,i,r,u,f){if(r=document.getElementById(n)){var e=new t(n,r,i);return e.unWireEvents(n,i),e.wireEvents(n,i),this.getElementSize(r,u,f)}return{width:0,height:0}},getElementSize:function(n,t,i){return n?(n.style.height=t,n.style.width=i,{width:n.clientWidth||n.offsetWidth,height:n.clientHeight||n.offsetHeight}):{width:0,height:0}},destroy:function(n){var t=n.blazor__instance;sf.base.isNullOrUndefined(t)||t.destroy()},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(n,t,i,r,u){var f=document.getElementById("chartmeasuretext");return null===f&&(f=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(f))," "===n&&(n="&nbsp;"),f.innerHTML=n,f.style.position="fixed",f.style.fontSize=t,f.style.fontWeight=i,f.style.fontStyle=r,f.style.fontFamily=u,f.style.visibility="hidden",f.style.top="-100",f.style.left="0",f.style.whiteSpace="nowrap",f.style.lineHeight="normal",{Width:f.clientWidth,Height:f.clientHeight}},getCharSizeByFontKeys:function(n){for(var f={},i=this.charCollection,h=n.length,r=0;r<h;r++)for(var u=n[r].split("_"),e=u[0],o=u[1],s=u[2],c="_"+e+"_"+o+"_"+s,t=0;t<i.length;t++)f[i[t]+c]=this.measureText(i[t],"100px",e,o,s);return JSON.stringify(f)},getCharSizeByCharKey:function(n){var t=n.split("_");return this.measureText(t[0],"100px",t[2],t[3],t[4])},dotnetref:{},setValueOnSliderSelect:function(n,t){var i=(n=document.getElementById(n.id)).blazor__instance;sf.base.isNullOrUndefined(i)||(i.sliderChangeValue=t,i.isTooltipHide=t.isTooltipHide,i.isDrag=!0)},getElementRect:function(n){var t,i=document.getElementById(n);return i&&(t=i.getBoundingClientRect(),sf.base.remove(i)),{Left:t.left,Right:t.right,Top:t.top,Bottom:t.bottom,Width:t.width,Height:t.height}},dotnetrefCollection:[],renderTooltip:function(n,t,i,r,u){var o,e,s,h=[i,r],c=[n,t],f;for(u=document.getElementById(u.id),f=1;f>=0;f--)e=h[f],!((o=document.getElementById(e.replace("_stockChart_rangeSelector","")+"_svg"))&&parseInt(o.getAttribute("opacity"),10)>0),s=JSON.parse(c[f]),u.blazor__instance.tooltip[f]=new sf.svgbase.Tooltip(s),u.blazor__instance.tooltip[f].appendTo("#"+e)},performSliderAnimation:function(n,t,i,r,u,f,e,o,s,h){var l=this,c=(n=document.getElementById(n.id)).blazor__instance;c.sliderChangeValue=h;new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:r,progress:function(n){var r=l.linear(n.timeStamp,0,t-u,n.duration)+u,e=l.linear(n.timeStamp,0,i-f,n.duration)+f;c.setSlider(r,e)},end:function(){c.setSlider(t,i);o?s.invokeMethodAsync("PerformSnapping",t,i,!0,e):c.dotNetRef.invokeMethodAsync("SetStartEndValue",t,i,!0,e)}})},linear:function(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t},setAttribute:function(n,t,i){var r=document.getElementById(n);r&&r.setAttribute(t,i)},getAndSetTextContent:function(n,t,i){var r=document.getElementById(n);if(r){if(t)return r.textContent;r.textContent=i}return null},resizeBound:{},resize:{},rangeResize:function(n,t){var i=this;return this.element.blazor__instance.isDrag=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout(function(){for(var u,f=n.length,r=0;r<f;r++)u=n[r].dotnetref,n[r].id.indexOf("_stockChart_")<0&&u.invokeMethodAsync("OnRangeResize",t);clearTimeout(i.resize)},500),!1}};return n}()},"./modules/sf-richtexteditor.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.RichTextEditor=function(){"use strict";function oi(n,t){var i,u,r;if(t.enableHtmlSanitizer){if(i=sf.base.SanitizeHtmlHelper.beforeSanitize(),sf.base.extend(i,i,{cancel:!1,helper:null}),!sf.base.isNullOrUndefined(t.deniedSanitizeSelectors)&&t.deniedSanitizeSelectors.length>0)for(u=function(n){for(var f,u,r=0;r<i.selectors.tags.length;r++)i.selectors.tags[r]===t.deniedSanitizeSelectors[n]&&(i.selectors.tags=i.selectors.tags.filter(function(i){return i!=t.deniedSanitizeSelectors[n]}));for(f=function(r){(i.selectors.attributes[r].attribute||i.selectors.attributes[r].selector)===t.deniedSanitizeSelectors[n]&&(i.selectors.attributes=i.selectors.attributes.filter(function(n){return n!=i.selectors.attributes[r]}))},u=0;u<i.selectors.attributes.length;u++)f(u)},r=0;r<t.deniedSanitizeSelectors.length;r++)u(r);return i.cancel||(n=sf.base.SanitizeHtmlHelper.serializeValue(i,n)),n}return n}function fr(n,t){var i=-1;return t.some(function(t,r){return!sf.base.isNullOrUndefined(t)&&"string"==typeof t.subCommand&&n===t.subCommand.toLocaleLowerCase()&&(i=r,!0)}),i}function ht(n,t,i,r){for(var f,e,u=0;u<n.length;u++){if("value"===i&&n[u].value.toLocaleLowerCase()===t.toLocaleLowerCase()){f=n[u];break}if("text"===i&&n[u].text.toLocaleLowerCase()===t.toLocaleLowerCase()){f=n[u];break}if("subCommand"===i&&n[u].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){f=n[u];break}}if(!sf.base.isNullOrUndefined(f))switch(r){case"text":e=f.text;break;case"value":e=f.value;break;case"cssClass":e=f.cssClass}return e}function si(n,t){var i;return null!==n&&""!==n?(i=t.enableHtmlEncode?t.encode(hi(d(n))):hi(n),t.value=i):i=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/><\/p>",i}function hi(n){var t=document.createElement("div"),u=document.createElement("div"),s=t.childNodes,r,i;if(t.innerHTML=n,t.setAttribute("class","tempDiv"),s.length>0){for(var e=void 0,o=void 0,f=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||rr.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(e?o.appendChild(t.firstChild):(f=sf.base.createElement("p"),u.appendChild(f),f.appendChild(t.firstChild)),o=f,e=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?sf.base.detach(t.firstChild):(u.appendChild(t.firstChild),e=!1);for(r=u.querySelectorAll("img"),i=0;i<r.length;i++)r[i].classList.contains("e-rte-image")||r[i].classList.add("e-rte-image"),r[i].classList.contains("e-imginline")||r[i].classList.contains("e-imgbreak")||r[i].classList.add("e-imginline")}return u.innerHTML}function o(){return sf.base.Browser.isDevice&&sf.base.Browser.isIos}function d(n){return n.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function rt(n,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0);n.dispatchEvent(i)}function pt(n,t){var i=!1;return n.classList.contains(t)&&(i=!0),i}function wt(n){for(var i=n.split(","),f=i[0].match(/:(.*?);/)[1],r=atob(i[1]),t=r.length,u=new Uint8Array(t);t--;)u[t]=r.charCodeAt(t);return new Blob([u],{type:f})}function er(n){return sf.base.isNullOrUndefined(n)?"":n}function ci(n,t){var i,r,o,c,l,w,a,b,v,y,k;n.dropDownModule;for(var e=n.args,h=0,p=Object.keys(n.args);h<p.length;h++)for(i=p[h],r=0;r<n.tbItems.length;r++)if(o=n.tbItems[r]&&n.tbItems[r].subCommand,c=o&&o.toLocaleLowerCase(),o&&c===i||"UL"===o&&"unorderedlist"===i||"OL"===o&&"orderedlist"===i||"pre"===c&&"insertcode"===i)if("boolean"==typeof e[i])!0===e[i]?sf.base.addClass([n.tbElements[r]],["e-active"]):sf.base.removeClass([n.tbElements[r]],["e-active"]);else if(("string"==typeof e[i]||null===e[i])&&fr(i,n.parent.toolbarSettings.items)>-1){var s=e[i]?e[i]:"",u="",f=void 0;switch(i){case"formats":if(t)break;l=n.parent.format.items;u=ht(l,s,"subCommand","text");w=sf.base.isNullOrUndefined(n.parent.format.default)?l[0].text:n.parent.format.default;(f=n.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=sf.base.isNullOrUndefined(u)?w:u;f.parentElement.style.width=n.parent.format.width;break;case"alignments":u=ht(n.parent.alignments,s,"subCommand","cssClass");f=n.tbElements[r].querySelector(".e-btn-icon.e-icons");sf.base.removeClass([f],["e-justify-left","e-justify-center","e-justify-right","e-justify-full"]);sf.base.addClass([f],sf.base.isNullOrUndefined(u)?["e-icons","e-justify-left"]:u.split(" "));break;case"fontname":if(t)break;a=n.parent.fontFamily.items;u=ht(a,s,"value","text");b=sf.base.isNullOrUndefined(n.parent.fontFamily.default)?a[0].text:n.parent.fontFamily.default;v=sf.base.isNullOrUndefined(u)?b:u;n.tbElements[r].title=v;(f=n.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=v;f.parentElement.style.width=n.parent.fontFamily.width;break;case"fontsize":y=n.parent.fontSize.items;k=sf.base.isNullOrUndefined(n.parent.fontSize.default)?y[1].text:n.parent.fontSize.default;u=ht(y,""===s?k.replace(/\s/g,""):s,"value","text");(f=n.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=er(u);f.parentElement.style.width=n.parent.fontSize.width}}}function v(){var n=!1;return sf.base.Browser.isDevice&&sf.base.Browser.isIos&&(n=!0),n}function nt(n,t){if("BODY"===n.nodeName&&!sf.base.isNullOrUndefined(t)){var i=top.window.document.querySelector(t);sf.base.isNullOrUndefined(i)||i.contentWindow.focus()}}function vr(n){for(var i=n.split(","),f=i[0].match(/:(.*?);/)[1],r=atob(i[1]),t=r.length,u=new Uint8Array(t);t--;)u[t]=r.charCodeAt(t);return new Blob([u],{type:f})}var fi,vt,ei,yt="e-rte-character-count",l="initial-end",t="destroy",k="keyUp",s="keyDown",h="selection-save",c="selection-restore",et="paste-content",tr=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.renderCount=function(){this.parent.showCharCount&&(this.addEventListener(),this.countElement=this.parent.element.querySelector("."+yt),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},n.prototype.appendCount=function(){var n,t;this.countElement=this.parent.element.querySelector("."+yt);n="Markdown"===this.parent.editorMode?this.parent.getEditPanel().value.trim():this.parent.getEditPanel().textContent.trim();this.htmlLength="Markdown"!==this.parent.editorMode&&-1!==n.indexOf("​")?n.replace(/\u200B/g,"").length:n.length;t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.countElement.innerHTML=t},n.prototype.charCountBackground=function(n){this.countElement=this.parent.element.querySelector("."+yt);var t=n/this.parent.maxLength*100;t<85?(this.countElement.classList.remove("e-warning"),this.countElement.classList.remove("e-error")):t>85&&t<=90?(this.countElement.classList.remove("e-error"),this.countElement.classList.add("e-warning")):t>90&&(this.countElement.classList.remove("e-warning"),this.countElement.classList.add("e-error"))},n.prototype.refresh=function(){!sf.base.isNullOrUndefined(this.parent.element)&&this.parent.showCharCount&&(this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},n.prototype.destroy=function(){this.countElement=null;this.removeEventListener()},n.prototype.toggle=function(n){this.parent.showCharCount&&(this.countElement.style.display="viewSource"===n.member?"none":"block")},n.prototype.addEventListener=function(){this.parent.observer.on(l,this.renderCount,this);this.parent.observer.on(k,this.refresh,this);this.parent.observer.on("count",this.refresh,this);this.parent.observer.on("refresh-begin",this.refresh,this);this.parent.observer.on("mouseDown",this.refresh,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on("sourceCode",this.toggle,this);this.parent.observer.on("updateSource",this.toggle,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(l,this.renderCount);this.parent.observer.off(k,this.refresh);this.parent.observer.off("refresh-begin",this.refresh);this.parent.observer.off("count",this.refresh);this.parent.observer.off("mouseDown",this.refresh);this.parent.observer.off(t,this.destroy);this.parent.observer.off("sourceCode",this.toggle);this.parent.observer.off("updateSource",this.toggle)},n}(),ir=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(l,this.renderResizable,this);this.parent.observer.on(t,this.destroy,this)},n.prototype.renderResizable=function(){if(this.parent.enableResize){var n="e-icons e-resize-handle ";n+=this.parent.enableRtl?"e-south-west":"e-south-east";this.resizer=sf.base.createElement("div",{id:this.parent.id+"-resizable",className:n});this.parent.element.classList.add("e-rte-resize");this.parent.element.appendChild(this.resizer);this.parent.setContentHeight();this.touchStartEvent="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(this.resizer,"mousedown",this.resizeStart,this);sf.base.EventHandler.add(this.resizer,this.touchStartEvent,this.resizeStart,this)}},n.prototype.resizeStart=function(n){var t=this;n.cancelable&&n.preventDefault();this.wireResizeEvents();this.parent.observer.notify("resizeInitialized",{});this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"editor"}).then(function(n){n.cancel&&t.unwireResizeEvents()})},n.prototype.performResize=function(n){var t=this.parent.element.getBoundingClientRect(),i;this.isMouseEvent(n)?(this.parent.element.style.height=n.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-n.clientX:n.clientX-t.left)+"px"):(i="msie"!==sf.base.Browser.info.name?n.touches[0]:n,this.parent.element.style.height=i.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-i.clientX:i.clientX-t.left)+"px");this.parent.refresh()},n.prototype.stopResize=function(){this.parent.refresh();this.unwireResizeEvents();this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"editor"})},n.prototype.getEventType=function(n){return n.indexOf("mouse")>-1?"mouse":"touch"},n.prototype.isMouseEvent=function(n){var t=!1;return("mouse"===this.getEventType(n.type)||!sf.base.isNullOrUndefined(n.pointerType)&&"mouse"===this.getEventType(n.pointerType))&&(t=!0),t},n.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.performResize,this);sf.base.EventHandler.add(document,"mouseup",this.stopResize,this);this.touchMoveEvent="msie"===sf.base.Browser.info.name?"pointermove":"touchmove";this.touchEndEvent="msie"===sf.base.Browser.info.name?"pointerup":"touchend";sf.base.EventHandler.add(document,this.touchMoveEvent,this.performResize,this);sf.base.EventHandler.add(document,this.touchEndEvent,this.stopResize,this)},n.prototype.unwireResizeEvents=function(){sf.base.EventHandler.remove(document,"mousemove",this.performResize);sf.base.EventHandler.remove(document,"mouseup",this.stopResize);sf.base.EventHandler.remove(document,this.touchMoveEvent,this.performResize);sf.base.EventHandler.remove(document,this.touchEndEvent,this.stopResize)},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.removeEventListener=function(){this.parent.observer.off(l,this.renderResizable);this.parent.element.classList.remove("e-rte-resize");sf.base.EventHandler.remove(this.resizer,"mousedown",this.resizeStart);sf.base.EventHandler.remove(this.resizer,this.touchStartEvent,this.resizeStart);this.resizer&&sf.base.detach(this.resizer);this.parent.observer.off(t,this.destroy)},n}(),rr=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],ur={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}},li,ai;!function(n){n[n.Toolbar=0]="Toolbar";n[n.Content=1]="Content";n[n.Popup=2]="Popup";n[n.LinkToolbar=3]="LinkToolbar";n[n.TextToolbar=4]="TextToolbar";n[n.ImageToolbar=5]="ImageToolbar";n[n.InlineToolbar=6]="InlineToolbar";n[n.TableToolbar=7]="TableToolbar"}(fi||(fi={})),function(n){n.Expand="Expand";n.MultiRow="MultiRow";n.Scrollable="Scrollable"}(vt||(vt={})),function(n){n.InsertLink="InsertLink";n.InsertImage="InsertImage";n.InsertTable="InsertTable"}(ei||(ei={}));li=function(){function n(n){this.isToolbar=!1;this.isTransformChild=!1;this.parent=n;this.tbElement=this.parent.getToolbarElement();this.checkIsTransformChild();this.addEventListener();this.wireEvents()}return n.prototype.getToolbarHeight=function(){return this.parent.getToolbar().offsetHeight},n.prototype.getExpandTBarPopHeight=function(){var t=0,n;return this.parent.toolbarSettings.type===vt.Expand&&this.parent.getToolbar().classList.contains("e-extended-toolbar")&&(n=sf.base.select(".e-toolbar-extended",this.parent.getToolbar()),n&&this.parent.getToolbar().classList.contains("e-expand-open")||n&&n.classList.contains("e-popup-open")?(sf.base.addClass([n],["e-visible"]),t+=n.offsetHeight,sf.base.removeClass([n],["e-visible"])):sf.base.removeClass([this.parent.getToolbar()],["e-expand-open"])),t},n.prototype.updateToolbarStatus=function(n){this.parent.getToolbarElement()&&(!this.parent.inlineMode.enable||!o()&&sf.base.Browser.isDevice)&&ci({args:n,dropDownModule:null,parent:this.parent,tbElements:sf.base.selectAll(".e-toolbar-item",this.parent.getToolbarElement()),tbItems:this.parent.toolbarSettings.items},!!this.parent.inlineMode.enable)},n.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var t=sf.base.selectAll('[style*="transform"]',document),n=0;n<t.length;n++)if(!sf.base.isNullOrUndefined(t[n].contains)&&t[n].contains(this.parent.element)){this.isTransformChild=!0;break}},n.prototype.toggleFloatClass=function(n){var t,r,f=!1,o=!1,u=this.parent.floatingToolbarOffset,h,c,l,a,e;if(n&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===n.target?r=n.target.body:n&&n.target!==document?r=n.target:(f=!0,r=document.body),h=this.getToolbarHeight()+this.getExpandTBarPopHeight(),this.isTransformChild){t=0;c=0;l=this.parent.element.offsetHeight;f&&(a=window.getComputedStyle(r),c=parseFloat(a.marginTop.split("px")[0])+parseFloat(a.paddingTop.split("px")[0]));var i=this.parent.element.getBoundingClientRect().top,y=sf.base.Browser.isMSPointer&&f?window.pageYOffset:r.parentElement.scrollTop,v=r.getBoundingClientRect(),s=f?v.top+y:v.top;i>s+u||i<-l||i<0&&!(i-(f?0:s)+l>h+u)?(o=!1,sf.base.removeClass([this.tbElement],["e-rte-tb-abs-float"])):i<s+u&&(t=i<0?-i+s:s-i,t=f?t-c:t,sf.base.addClass([this.tbElement],["e-rte-tb-abs-float"]),o=!0)}else{if(e=this.parent.element.getBoundingClientRect(),window.innerHeight<e.top)return;t=n&&n.target!==document?r.getBoundingClientRect().top:0;e.bottom<u+h+t||e.bottom<0||e.top>u+t?o=!1:e.top<u&&(o=!0)}o?(sf.base.addClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:u+t+"px"})):(sf.base.removeClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{top:"0px",width:"100%"}))},n.prototype.getDOMVisibility=function(n){return!(!n.offsetParent&&0===n.offsetWidth&&0===n.offsetHeight)},n.prototype.showFixedTBar=function(){this.tbElement=this.parent.getToolbarElement();sf.base.addClass([this.tbElement],["e-show"]);sf.base.Browser.isIos&&sf.base.addClass([this.tbElement],["e-tbar-ios-fixed"])},n.prototype.hideFixedTBar=function(){this.tbElement=this.parent.getToolbarElement();this.isToolbar?this.isToolbar=!1:sf.base.removeClass([this.tbElement],["e-show","e-tbar-ios-fixed"])},n.prototype.dropDownBeforeOpenHandler=function(n){this.isToolbar=!0;!sf.base.isNullOrUndefined(sf.base.closest(n.element,".e-rte-toolbar"))&&sf.base.isNullOrUndefined(sf.base.closest(n.element,".e-rte-quick-toolbar"))&&this.parent.hideTableQuickToolbar()},n.prototype.addEventListener=function(){this.parent.observer.on("scroll",this.scrollHandler,this);this.parent.observer.on("refresh-begin",this.onRefresh,this);this.parent.observer.on("bind-on-end",this.toolbarBindEvent,this);this.parent.observer.on("mouseDown",this.mouseDownHandler,this);this.parent.observer.on("focusChange",this.focusChangeHandler,this);this.parent.observer.on("toolbar-updated",this.updateToolbarStatus,this);this.parent.observer.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("scroll",this.scrollHandler);this.parent.observer.off("refresh-begin",this.onRefresh);this.parent.observer.off("bind-on-end",this.toolbarBindEvent);this.parent.observer.off("mouseDown",this.mouseDownHandler);this.parent.observer.off("focusChange",this.focusChangeHandler);this.parent.observer.off("toolbar-updated",this.updateToolbarStatus);this.parent.observer.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler)},n.prototype.wireEvents=function(){this.parent.inlineMode.enable&&o()||(this.tbElement=this.parent.getToolbarElement(),this.tbElement&&(sf.base.EventHandler.add(this.tbElement,"focusin",this.tbFocusHandler,this),sf.base.EventHandler.add(this.tbElement,"keydown",this.tbKeydownHandler,this)))},n.prototype.unWireEvents=function(){this.tbElement&&(sf.base.EventHandler.remove(this.tbElement,"focusin",this.tbFocusHandler),sf.base.EventHandler.remove(this.tbElement,"keydown",this.tbKeydownHandler))},n.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new sf.base.KeyboardEvents(this.parent.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))},n.prototype.onRefresh=function(){this.parent.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow");this.parent.setContentHeight("",!0)},n.prototype.tbFocusHandler=function(){var i=document.activeElement,r=sf.base.closest(i,".e-rte-toolbar"),t,n;if(i===this.parent.getToolbarElement()||r===this.parent.getToolbarElement())for(t=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),n=0;n<t.length;n++)sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?t[n].setAttribute("tabindex","0"):t[n].setAttribute("tabindex","1")},n.prototype.tbKeydownHandler=function(n){(n.target.classList.contains("e-dropdown-btn")||n.target.getAttribute("id")===this.parent.id+"_toolbar_CreateTable")&&n.target.setAttribute("tabindex","0")},n.prototype.toolBarKeyDown=function(n){switch(n.action){case"escape":this.parent.getEditPanel().focus()}},n.prototype.scrollHandler=function(n){this.parent.inlineMode.enable||(this.tbElement=this.parent.getToolbarElement(),this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(n.args))},n.prototype.mouseDownHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!o()&&this.showFixedTBar()},n.prototype.focusChangeHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!o()&&(this.isToolbar=!1,this.hideFixedTBar())},n}();ai=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];var vi=function(){return(vi=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},or=function(){function n(n){this.parent=n;this.rteId=this.parent.element.id;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this);this.parent.observer.on(s,this.onKeyDown,this);this.parent.observer.on("unLink",this.removeLink,this);this.parent.observer.on("insertLink",this.linkDialog,this);this.parent.observer.on("link-toolbar-action",this.onToolbarAction,this);this.parent.observer.on("iframe-click",this.onIframeMouseDown,this);this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this);this.parent.observer.on("insertCompleted",this.showLinkQuickToolbar,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy);this.parent.observer.off(s,this.onKeyDown);this.parent.observer.off("unLink",this.removeLink);this.parent.observer.off("insertLink",this.linkDialog);this.parent.observer.off("link-toolbar-action",this.onToolbarAction);this.parent.observer.off("iframe-click",this.onIframeMouseDown);this.parent.observer.off("editAreaClick",this.editAreaClickHandler);this.parent.observer.off("insertCompleted",this.showLinkQuickToolbar);sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)},n.prototype.linkDialog=function(n,t){var i,r;"HTML"===this.parent.editorMode&&n.selectParent.length>0&&!sf.base.isNullOrUndefined(n.selectParent[0].classList)&&n.selectParent[0].classList.contains("e-rte-anchor")&&sf.base.isNullOrUndefined(t)?this.editLink(n):(this.selectionObj={selection:n.selection,selectParent:n.selectParent,args:n.args},i={url:"",text:"",title:"",target:!0},sf.base.isNullOrUndefined(t)||(i={url:t.url,text:t.text,title:t.title,target:""!==t.target}),r="HTML"===this.parent.editorMode?n.selection.getRange(this.parent.getDocument()).toString():n.text,("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(t)&&(!sf.base.isNullOrUndefined(r)&&""!==r&&0===n.selection.range.startOffset||n.selection.range.startOffset!==n.selection.range.endOffset)||"Markdown"===n.module)&&(i.text=r),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.isNullOrUndefined(sf.base.select(".e-rte-link-dialog",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowLinkDialog",i,sf.base.isNullOrUndefined(t)?null:"Edit"):this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.hideInlineQTBar()))},n.prototype.insertLink=function(n){var o,t=n.url,i=n.text,s,r,u,h,f,e;"HTML"===this.parent.editorMode&&(o=n.title);s=n.target?"_blank":null;""!==t?((this.isUrl(t)?this.checkUrl(!1):(i=""===i?t:i,t=this.parent.enableAutoUrl||t.indexOf("http")>-1?t:"http://"+t),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id)))&&(this.parent.getEditPanel().focus(),sf.base.Browser.isIE&&this.parent.iframeSettings.enable&&this.selectionObj.selection.restore(),r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(r,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(r)),h={url:t,text:i,title:o,target:s,selection:this.selectionObj.selection,selectParent:this.selectionObj.selectParent},(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),v()&&this.parent.iframeSettings.enable&&sf.base.select("iframe",this.parent.element).contentWindow.focus(),"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.selectionObj.args)||"KeyK"!==this.selectionObj.args.code)?u=this.selectionObj.args:(f=this.selectionObj.args,e={item:{command:"Links",subCommand:"CreateLink"},originalEvent:f=vi({},f,{target:null})},sf.base.extend(this.selectionObj.args,e,!0),u=e),this.parent.formatter.process(this.parent,u,!sf.base.isNullOrUndefined(this.selectionObj.args)&&this.selectionObj.args.originalEvent,h),this.parent.getEditPanel().focus()):this.checkUrl(!0)},n.prototype.isUrl=function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(n)},n.prototype.checkUrl=function(n){var t=this.parent.element.querySelector(".e-rte-link-dialog .e-rte-linkurl");n?(sf.base.addClass([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):sf.base.removeClass([t],"e-error")},n.prototype.cancelDialog=function(){v()?this.selectionObj.selection.restore():this.parent.getEditPanel().focus()},n.prototype.linkDialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel())},n.prototype.getAnchorNode=function(n){var t=sf.base.closest(n,"a");return t||n},n.prototype.openLink=function(n){var t=this.getAnchorNode(n.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,n.args,n.args,{url:t.href,target:""===t.target?"_self":"_blank",selectNode:n.selectNode,subCommand:n.args.item.subCommand})},n.prototype.editLink=function(n){var i=this.getAnchorNode(n.selectNode[0]),t=this.getAnchorNode(n.selectParent[0]),r;((t="A"===i.nodeName?i:t).classList.contains("e-rte-anchor")||"A"===t.tagName)&&(r={url:t.getAttribute("href"),text:t.innerText,title:t.title,target:t.target},this.linkDialog(n,r))},n.prototype.removeLink=function(n){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();this.parent.formatter.process(this.parent,n.args,n.args,{selectNode:n.selectNode,selectParent:n.selectParent,selection:n.selection,subCommand:n.args.item.subCommand});v()&&this.parent.iframeSettings.enable?sf.base.select("iframe",this.parent.element).contentWindow.focus():this.parent.getEditPanel().focus();this.hideLinkQuickToolbar()},n.prototype.onToolbarAction=function(n){switch(n.args.item.subCommand){case"OpenLink":this.openLink(n);break;case"EditLink":this.editLink(n);break;case"RemoveLink":this.removeLink(n)}},n.prototype.editAreaClickHandler=function(n){var t,r,i,u;if(this.parent.readonly)this.hideLinkQuickToolbar();else if(t=n.args,r=this.parent.quickToolbarSettings.showOnRightClick,!(2===t.which||r&&1===t.which||!r&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule)if(i=t.target,i=this.getAnchorNode(i),u=document.body.querySelector("#"+this.rteId+"_Link_Quick_Popup").classList.contains("e-rte-pop"),"A"===i.nodeName&&i.childNodes.length>0&&"IMG"!==i.childNodes[0].nodeName&&"IMG"!==n.args.target.nodeName){if(u)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()},n.prototype.showLinkQuickToolbar=function(n){var i,r,t;if("enter"!==n.args.action&&"space"!==n.args.action){if(i=void 0,r=void 0,"Links"!==n.type||sf.base.isNullOrUndefined(this.parent.quickToolbarModule))return;this.quickToolObj=this.parent.quickToolbarModule;var f,u=this.parent.element.getBoundingClientRect().top,e=this.parent.element.getBoundingClientRect().left,a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),o=this.parent.getToolbarElement(),s=o?o.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;if([].forEach.call(n.elements,function(n,t){0===t&&(f="#text"===n.nodeName?n.parentNode:n)}),n.isNotify){var h=f.getBoundingClientRect(),c=h.top,l=h.left,v=c-u;i=this.parent.iframeSettings.enable?e+l:l;r=window.pageYOffset+(this.parent.iframeSettings.enable?u+s+c:u+v)}else t=void 0,t=n.args.touches?n.args.changedTouches[0]:t=n.args,i=this.parent.iframeSettings.enable?window.pageXOffset+e+t.clientX:t.pageX,r=this.parent.iframeSettings.enable?window.pageYOffset+u+s+t.clientY:t.pageY;this.quickToolObj.showLinkQTBar(i,r,a.endContainer,"Link")}},n.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideLinkQTBar()},n.prototype.showDialog=function(n,t){var r;if(n&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),u=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),f=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),e=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),o={args:n?{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0}:t.args,selectNode:f,selection:u,selectParent:e};this.linkDialog(o)}else r=this.parent.getEditPanel(),this.parent.formatter.editorManager.markdownSelection.save(r.selectionStart,r.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:n?void 0:t.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertLink"})},n.prototype.onKeyDown=function(n){var t=n.args;switch(t.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog");break;case"insert-link":this.showDialog(!1,n);t.preventDefault()}},n.prototype.onDocumentClick=function(n){var t=n.target,r="#"+this.rteId+"_rtelink",i=this.parent.getToolbarElement(),u="#"+this.rteId+"_toolbar_CreateLink",f=this.parent.element.querySelector(r);sf.base.isNullOrUndefined(f)||(sf.base.closest(t,r)||!this.parent.toolbarSettings.enable||!i||i.contains(n.target))&&(!(i&&i.contains(n.target)||this.parent.inlineMode.enable&&!sf.base.closest(t,r))||sf.base.closest(t,u)||t.querySelector(u))||(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,sf.base.Browser.isIE&&rt(this.parent.element,"focusout"))},n.prototype.onIframeMouseDown=function(){this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog")},n.prototype.destroy=function(){this.removeEventListener()},n}(),sr=function(){function n(n){this.pageX=null;this.pageY=null;this.moveEle=null;this.rzProgress=!1;this.ensureInsideTableList=!0;this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(k,this.keyUp,this);this.parent.observer.on(s,this.keyDown,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on("docClick",this.docClick,this);this.parent.observer.on(l,this.afterRender,this);this.parent.observer.on("mouseUp",this.selectionTable,this);this.parent.observer.on("createTable",this.renderDlgContent,this);this.parent.observer.on("dropDownSelect",this.dropdownSelect,this);this.parent.observer.on("iframe-click",this.onIframeMouseDown,this);this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this);this.parent.observer.on("table-toolbar-action",this.onToolbarAction,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(k,this.keyUp);this.parent.observer.off(s,this.keyDown);this.parent.observer.off(t,this.destroy);this.parent.observer.off("docClick",this.docClick);this.parent.observer.off("mouseDown",this.cellSelect);this.parent.observer.off(l,this.afterRender);this.parent.observer.off("mouseUp",this.selectionTable);this.parent.observer.off("createTable",this.renderDlgContent);this.parent.observer.off("dropDownSelect",this.dropdownSelect);this.parent.observer.off("iframe-click",this.onIframeMouseDown);this.parent.observer.off("tableColorPickerChanged",this.setBGColor);this.parent.observer.off("editAreaClick",this.editAreaClickHandler);this.parent.observer.off("table-toolbar-action",this.onToolbarAction)},n.prototype.afterRender=function(){this.parent.observer.on("mouseDown",this.cellSelect,this);this.parent.observer.on("tableColorPickerChanged",this.setBGColor,this);this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this);!sf.base.Browser.isDevice&&this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this)},n.prototype.selectionTable=function(n){var t=n.args.target;"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","true")},n.prototype.tabSelection=function(n,t,i){var e=this.insideList(t.range),u,f,r;(37===n.keyCode||39===n.keyCode)&&3===t.range.startContainer.nodeType||e||((n.preventDefault(),i.classList.remove("e-cell-select"),n.shiftKey||37===n.keyCode)?(u=sf.base.isNullOrUndefined(i.previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:"td"===sf.base.closest(i,"table").previousSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").previousSibling:i:sf.base.closest(i,"tr").previousSibling.childNodes[sf.base.closest(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling,i===u&&0===i.cellIndex&&sf.base.closest(i,"table").tHead&&(f=sf.base.closest(i,"table"),u=f.rows[0].cells[f.rows[0].cells.length-1]),37===n.keyCode&&i===u&&(u=sf.base.closest(i,"table").previousSibling),u&&(""!==u.textContent.trim()&&sf.base.closest(u,"td")?t.setSelectionNode(this.parent.getDocument(),u):t.setSelectionText(this.parent.getDocument(),u,u,0,0))):(r=sf.base.isNullOrUndefined(i.nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:"td"===sf.base.closest(i,"table").nextSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").nextSibling:i:sf.base.closest(i,"tr").nextSibling.childNodes[0]:i.nextSibling,i===r&&"TH"===i.nodeName&&(r=sf.base.closest(i,"table").rows[1].cells[0]),39===n.keyCode&&i===r&&(r=sf.base.closest(i,"table").nextSibling),r&&(""!==r.textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0)),i===r&&39!==n.keyCode&&r&&(i.classList.add("e-cell-select"),this.addRow(t,n,!0),i.classList.remove("e-cell-select"),""!==(r=r.parentElement.nextSibling.firstChild).textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0))))},n.prototype.insideList=function(n){for(var i=this.parent.formatter.editorManager.domNode.blockNodes(),r=[],t=0;t<i.length;t++)"LI"===i[t].parentNode.tagName?r.push(i[t].parentNode):"LI"===i[t].tagName&&"P"!==i[t].childNodes[0].tagName&&"OL"!==i[t].childNodes[0].tagName&&"UL"!==i[t].childNodes[0].tagName&&r.push(i[t]);return r.length>1||r.length&&0===n.startOffset&&0===n.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},n.prototype.tableArrowNavigation=function(n,t,i){var r=t.range.startContainer;40===n.keyCode&&3===r.nodeType&&(r.nextSibling&&"BR"===r.nextSibling.nodeName||r.parentNode&&"TD"!==r.parentNode.nodeName)||38===n.keyCode&&3===r.nodeType&&(r.previousSibling&&"BR"===r.previousSibling.nodeName||r.parentNode&&"TD"!==r.parentNode.nodeName)||(n.preventDefault(),i.classList.remove("e-cell-select"),(i=40===n.keyCode?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextElementSibling)?sf.base.closest(i,"table").tHead&&"TH"===i.nodeName?sf.base.closest(i,"table").rows[1].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:sf.base.closest(i,"table").nextSibling:sf.base.closest(i,"tr").nextElementSibling.children[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousElementSibling)?sf.base.closest(i,"table").tHead&&"TH"!==i.nodeName?sf.base.closest(i,"table").tHead.rows[0].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:sf.base.closest(i,"table").previousSibling:sf.base.closest(i,"tr").previousElementSibling.children[i.cellIndex])&&t.setSelectionText(this.parent.getDocument(),i,i,0,0))},n.prototype.cellSelect=function(n){var t=n.args.target,i=sf.base.closest(t,"td,th");t="TD"!==t.nodeName&&i&&this.parent.getEditPanel().contains(i)?i:t;sf.base.removeClass(this.parent.getEditPanel().querySelectorAll("table td, table th"),"e-cell-select");!t||"TD"!==t.tagName&&"TH"!==t.tagName||(t.removeAttribute("class"),sf.base.addClass([t],"e-cell-select"),this.curTable=this.curTable?this.curTable:sf.base.closest(t,"table"),this.removeResizeEle(),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper));"mozilla"===sf.base.Browser.info.name&&!sf.base.isNullOrUndefined(sf.base.closest(t,"table"))&&"TABLE"===sf.base.closest(t,"table").tagName&&this.parent.getEditPanel().contains(sf.base.closest(t,"table"))&&this.parent.getEditPanel().setAttribute("contenteditable","false")},n.prototype.renderDlgContent=function(n){if(this.tableNotifyArgs=n,this.parent.observer.notify(h,{}),sf.base.Browser.isDevice||this.parent.inlineMode.enable)this.insertTableDialog();else{this.hideTableQuickToolbar();var r=this.parent.getToolbarElement(),t=this.parent.element.querySelector("#"+this.parent.element.id+"_toolbar_CreateTable"),i=0;i=this.parent.getToolbar().classList.contains("e-expand-open")?t.offsetTop+t.offsetHeight+r.offsetHeight:t.offsetTop+t.offsetHeight;sf.base.isNullOrUndefined(sf.base.select(".e-rte-table-popup",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowCreateTableDialog",t.offsetLeft,i):this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog")}},n.prototype.createTablePopupOpened=function(){for(var r,t,u,i=sf.base.selectAll(".e-rte-table-popup .e-rte-table-row",this.parent.element),n=0;n<i.length;n++)for(sf.base.EventHandler.add(i[n],"mouseleave",this.tableCellLeave,this),r=sf.base.selectAll(".e-rte-tablecell",i[n]),t=0;t<r.length;t++)sf.base.EventHandler.add(r[t],"mouseup",this.tableCellClick,this),sf.base.EventHandler.add(r[t],"mousemove",this.tableCellSelect,this);u=this.parent.element.querySelector(".e-rte-table-popup");u&&u.focus();sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1")},n.prototype.insertTableDialog=function(){this.createDialog()},n.prototype.createDialog=function(n,t){n&&t?this.parent.dotNetRef.invokeMethodAsync("ShowEditTableDialog",n,t):this.parent.dotNetRef.invokeMethodAsync("ShowTableDialog");this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.hideInlineQTBar()},n.prototype.tableCellSelect=function(n){var t=n.target,u=this.parent.element.querySelector(".e-rte-table-popup"),f=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header"),i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),r=Array.prototype.slice.call(t.parentElement.children).indexOf(t),e=u.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(e,function(n){var t=Array.prototype.slice.call(n.parentElement.parentElement.children).indexOf(n.parentElement),u=Array.prototype.slice.call(n.parentElement.children).indexOf(n);sf.base.removeClass([n],"e-active");t<=i&&u<=r&&sf.base.addClass([n],"e-active")});f.innerHTML=r+1+"x"+(i+1)},n.prototype.tableCellLeave=function(){var n=this.parent.element.querySelector(".e-rte-table-popup"),t=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header");sf.base.removeClass(n.querySelectorAll(".e-rte-tablecell"),"e-active");sf.base.addClass([n.querySelector(".e-rte-tablecell")],"e-active");t.innerHTML="1x1"},n.prototype.tableCellClick=function(n){var t=n.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,r=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.tableInsert(i,r,"Create",this)},n.prototype.tableInsert=function(n,t,i,r){var u=r.self?r.self:this,f=this.tableNotifyArgs.selection.range.startContainer,e,o,s;"P"!==f.nodeName||""!==f.textContent.trim()||f.childNodes.length>0||(f.innerHTML="<br />");e=f.parentNode;"HTML"===u.parent.editorMode&&(u.parent.iframeSettings.enable&&!pt(e.ownerDocument.querySelector("body"),"e-lib")||!u.parent.iframeSettings.enable&&sf.base.isNullOrUndefined(sf.base.closest(e,"#"+u.parent.getPanel().id)))&&(u.parent.getEditPanel().focus(),o=u.parent.formatter.editorManager.nodeSelection.getRange(u.parent.getDocument()),this.tableNotifyArgs.selection=u.parent.formatter.editorManager.nodeSelection.save(o,u.parent.getDocument()));s={rows:n,columns:t,width:{minWidth:u.parent.tableSettings.minWidth,maxWidth:u.parent.tableSettings.maxWidth,width:u.parent.tableSettings.width},selection:this.tableNotifyArgs.selection};"Create"===i?this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"):this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog");this.parent.observer.notify(c,{});u.parent.formatter.process(u.parent,this.tableNotifyArgs.args,this.tableNotifyArgs.args.originalEvent,s);u.parent.getEditPanel().focus();u.parent.observer.on("mouseDown",u.cellSelect,u)},n.prototype.customTable=function(n,t){if(n&&t){var i=sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(this.tableNotifyArgs.args)&&!sf.base.isNullOrUndefined(this.tableNotifyArgs.args.originalEvent)&&"insert-table"===this.tableNotifyArgs.args.originalEvent.action||this.parent.inlineMode.enable?this.tableNotifyArgs:this;this.tableInsert(n,t,"",i)}},n.prototype.applyTableProperties=function(n){var t=sf.base.closest(this.tableNotifyArgs.selectNode[0],"table"),i,r;(t.style.width=n.width+"px",""!==n.padding.toString())&&(i=t.querySelectorAll("th"),this.applyCellPadding(i,n.padding),r=t.querySelectorAll("td"),this.applyCellPadding(r,n.padding));t.cellSpacing=n.spacing.toString();t.cellSpacing&&"0"!==t.cellSpacing?sf.base.addClass([t],"e-rte-table-border"):sf.base.removeClass([t],"e-rte-table-border");this.parent.formatter.saveData();this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},n.prototype.applyCellPadding=function(n,t){for(var r,u,i=0;i<n.length;i++)r="",""===n[i].style.padding?(u=n[i].getAttribute("style"),r=(sf.base.isNullOrUndefined(u)?"":u)+" padding:"+t+"px;"):(n[i].style.padding=t+"px",r=n[i].getAttribute("style")),n[i].setAttribute("style",r)},n.prototype.resizeHelper=function(n){if(!this.parent.readonly){var t=n.target||n.targetTouches[0].target,i=sf.base.closest(t,"table");sf.base.isNullOrUndefined(this.curTable)||sf.base.isNullOrUndefined(i)||i===this.curTable||(this.removeResizeEle(),this.removeHelper(n),this.cancelResizeAction());"TABLE"!==t.nodeName&&"TD"!==t.nodeName&&"TH"!==t.nodeName||this.rzProgress||(this.curTable=i&&this.parent.getEditPanel().contains(i)&&("TD"===t.nodeName||"TH"===t.nodeName)?i:t,this.removeResizeEle(),this.tableResizeEleCreation(this.curTable,n))}},n.prototype.tableResizeEleCreation=function(n,t){var f,e,l,o;this.parent.defaultResize(t,!1);for(var s=Array.prototype.slice.call(n.rows[this.calMaxCol(n)].cells,1),u=[],i=0;i<n.rows.length;i++)u.push(Array.prototype.slice.call(n.rows[i].cells,0,1)[0]);var h=parseInt(getComputedStyle(n).height,10),c=parseInt(getComputedStyle(n).width,10),r=this.calcPos(n);for(i=0;s.length>i;i++)f=sf.base.createElement("span",{attrs:{"data-col":(i+1).toString(),unselectable:"on",contenteditable:"false"}}),f.classList.add("e-rte-table-resize","e-column-resize"),f.style.cssText="height: "+h+"px; width: 4px; top: "+r.top+"px; left:"+(r.left+this.calcPos(s[i]).left)+"px;",this.parent.getEditPanel().appendChild(f);for(i=0;u.length>i;i++)e=sf.base.createElement("span",{attrs:{"data-row":i.toString(),unselectable:"on",contenteditable:"false"}}),e.classList.add("e-rte-table-resize","e-row-resize"),l=sf.base.isNullOrUndefined(n.getAttribute("cellspacing"))&&""===n.getAttribute("cellspacing")?this.calcPos(u[i]).left:0,e.style.cssText="width: "+c+"px; height: 4px; top: "+(this.calcPos(u[i]).top+r.top+u[i].offsetHeight-2)+"px; left:"+(l+r.left)+"px;",this.parent.getEditPanel().appendChild(e);o=sf.base.createElement("span",{className:"e-table-box",attrs:{"data-col":s.length.toString(),unselectable:"on",contenteditable:"false"}});o.style.cssText="top: "+(r.top+h-4)+"px; left:"+(r.left+c-4)+"px;";sf.base.Browser.isDevice&&o.classList.add("e-rmob");this.parent.getEditPanel().appendChild(o)},n.prototype.resizeStart=function(n){var r=this,t,i;this.parent.readonly||(sf.base.Browser.isDevice&&this.resizeHelper(n),t=n.target,(t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box"))&&((n.preventDefault(),this.parent.defaultResize(n,!1),t.classList.contains("e-table-box"))||(i=this.parent.getEditPanel().querySelector(".e-table-box"),sf.base.isNullOrUndefined(i)||(i.classList.add("e-hide"),this.rzProgress=!0)),(sf.base.removeClass(this.curTable.querySelectorAll("td,th"),"e-cell-select"),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.pageX=this.getPointX(n),this.pageY=this.getPointY(n),this.resizeBtnInit(),this.hideTableQuickToolbar(),t.classList.contains("e-column-resize")&&(this.resizeBtnStat.column=!0,this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(t.getAttribute("data-col"),10)],this.colIndex=this.columnEle.cellIndex,this.moveEle=n.target,this.appendHelper()),t.classList.contains("e-row-resize")&&(this.rowEle=this.curTable.rows[parseInt(t.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),t.classList.contains("e-table-box")&&(this.resizeBtnStat.tableBox=!0),sf.base.Browser.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))?(this.helper.classList.add("e-reicon"),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Table"}).then(function(n){n.cancel&&r.cancelResizeAction()}),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)))},n.prototype.calMaxCol=function(n){for(var i,r=0,t=0;t<n.rows.length;t++)r<n.rows[t].cells.length&&(i=t,r=n.rows[t].cells.length);return i},n.prototype.resizing=function(n){var f=this.getPointX(n),e=this.getPointY(n),o=this.parent.enableRtl?-(f-this.pageX):f-this.pageX,c=this.parent.enableRtl?-(e-this.pageY):e-this.pageY,a,v,h,y;this.pageX=f;this.pageY=e;var r=this.parent.getEditPanel().querySelector(".e-table-box"),t=parseInt(getComputedStyle(this.curTable).width,10),s=parseInt(getComputedStyle(this.curTable).height,10),p=+getComputedStyle(this.parent.getEditPanel()).paddingRight.match(/\d/g).join(""),w=this.parent.getEditPanel().offsetWidth-2*p;if(this.resizeBtnStat.column){for(var b=this.curTable.rows[this.calMaxCol(this.curTable)].cells,u=parseFloat(this.columnEle.offsetWidth.toString())-o,l=parseFloat(this.columnEle.offsetWidth.toString())+parseFloat(b[this.colIndex-1].offsetWidth.toString()),i=0;i<this.curTable.rows.length;i++)l-u>20&&u>20&&(a=l-u,v=u,this.curTable.rows[i].cells[this.colIndex-1]&&(this.curTable.rows[i].cells[this.colIndex-1].style.width=this.convertPixelToPercentage(a,t)+"%"),this.curTable.rows[i].cells[this.colIndex]&&(this.curTable.rows[i].cells[this.colIndex].style.width=this.convertPixelToPercentage(v,t)+"%"));this.updateHelper()}else this.resizeBtnStat.row?(this.parent.defaultResize(n,!1),h=parseFloat(this.rowEle.clientHeight.toString())+c,h>20&&(this.rowEle.style.height=h+"px"),this.curTable.style.height="",sf.base.isNullOrUndefined(r)||(r.style.cssText="top: "+(this.calcPos(this.curTable).top+s-4)+"px; left:"+(this.calcPos(this.curTable).left+t-4)+"px;"),this.updateHelper()):this.resizeBtnStat.tableBox&&(sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.parent.getEditPanel(),"mouseover",this.resizeHelper),y=this.curTable.style.width.indexOf("%")>-1,this.curTable.style.width=y?this.convertPixelToPercentage(t+o,w)+"%":t+o+"px",this.curTable.style.height=s+c+"px",sf.base.isNullOrUndefined(r)||(r.classList.add("e-rbox-select"),r.style.cssText="top: "+(this.calcPos(this.curTable).top+s-4)+"px; left:"+(this.calcPos(this.curTable).left+t-4)+"px;"))},n.prototype.resizeEnd=function(){this.resizeBtnInit();var n=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(n)||(n.classList.remove("e-hide"),this.rzProgress=!1);sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd);n&&this.parent.getEditPanel().contains(n)&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this),this.removeResizeEle(),this.helper&&this.parent.getEditPanel().contains(this.helper)&&(sf.base.detach(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null);this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Table"});this.parent.formatter.saveData()},n.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},n.prototype.removeResizeEle=function(){var t=this.parent.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box"),n;if(t.length>0)for(n=0;n<t.length;n++)sf.base.detach(t[n])},n.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:"e-table-rhelper"});sf.base.Browser.isDevice&&this.helper.classList.add("e-reicon");this.parent.getEditPanel().appendChild(this.helper);this.setHelperHeight()},n.prototype.setHelperHeight=function(){var n=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+n.top+"px; left:"+(n.left+this.calcPos(this.columnEle).left-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+n.top+this.rowEle.offsetHeight)+"px; left:"+(this.calcPos(this.rowEle).left+n.left)+"px;")},n.prototype.updateHelper=function(){var n=this.calcPos(this.curTable),t,i;this.resizeBtnStat.column?(t=n.left+this.calcPos(this.columnEle).left-1,this.helper.style.left=t+"px"):(i=this.calcPos(this.rowEle).top+n.top+this.rowEle.offsetHeight,this.helper.style.top=i+"px")},n.prototype.removeHelper=function(n){!n.target.classList.contains("e-reicon")&&this.helper&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper),this.pageX=null,this.helper=null)},n.prototype.convertPixelToPercentage=function(n,t){return n/t*100},n.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd);this.removeResizeEle()},n.prototype.calcPos=function(n){n.getBoundingClientRect();for(var i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===t.style.position;)t=t.parentNode;return"TD"===t.nodeName&&"TABLE"===n.nodeName&&(t=sf.base.closest(t,".e-rte-content")),t&&t!==n&&1===t.nodeType&&t.getBoundingClientRect(),{top:n.offsetTop,left:n.offsetLeft}},n.prototype.getPointX=function(n){return n.touches&&n.touches.length?n.touches[0].pageX:n.pageX},n.prototype.getPointY=function(n){return n.touches&&n.touches.length?n.touches[0].pageY:n.pageY},n.prototype.editAreaClickHandler=function(n){var t,r,s,h,c;if(!this.parent.readonly&&sf.base.isNullOrUndefined(sf.base.closest(n.args.target,".e-img-caption"))&&(t=n.args,r=this.parent.quickToolbarSettings.showOnRightClick,!(2===t.which||r&&1===t.which||!r&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var u=this.parent.element.getBoundingClientRect(),i=t.target,f=this.parent.getToolbarElement(),l=f?f.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0,e=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),o=sf.base.closest(i,"table");i&&"A"!==i.nodeName&&"IMG"!==i.nodeName&&("TD"===i.nodeName||"TH"===i.nodeName||"TABLE"===i.nodeName||o&&this.parent.getEditPanel().contains(o))&&(3!==e.startContainer.nodeType||e.collapsed)?(s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.save(s,this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),h=this.parent.iframeSettings.enable?window.pageXOffset+u.left+t.clientX:t.pageX,c=this.parent.iframeSettings.enable?window.pageYOffset+u.top+l+t.clientY:t.pageY,this.quickToolObj.showTableQTBar(h,c,i,"Table"),this.parent.formatter.editorManager.nodeSelection.restore()):this.hideTableQuickToolbar()}},n.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideTableQTBar()},n.prototype.onToolbarAction=function(n){switch(n.args.item.subCommand){case"TableHeader":this.tableHeader(n.selection,n.args);break;case"TableRemove":this.removeTable(n.selection,n.args);break;case"TableEditProperties":this.editTable(n)}},n.prototype.tableHeader=function(n,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:n,subCommand:t.item.subCommand})},n.prototype.removeTable=function(n,t,i){var r,u;i&&(r={item:{command:"Table",subCommand:"TableRemove"}});u={selection:n,subCommand:i?r.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?r:t,t.originalEvent,u);this.parent.getEditPanel().focus();this.removeResizeEle();this.hideTableQuickToolbar()},n.prototype.editTable=function(n){var t=n.selectParent[0];this.tableNotifyArgs.selectNode=n.selectParent;var u=sf.base.closest(t,"table").getClientRects()[0].width,r=sf.base.closest(t,"td").style.padding,i=sf.base.closest(t,"table").getAttribute("cellspacing");this.hideTableQuickToolbar();this.createDialog({width:u,padding:parseFloat((""!==r?parseInt(r,null):0).toString()),spacing:parseFloat((""===i||sf.base.isNullOrUndefined(i)?0:parseInt(i,null)).toString())},"Edit")},n.prototype.dropdownSelect=function(n){var i,r,t;if(this.parent.observer.notify(h,{}),i=n.item,document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Table"===i.command){r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());t={args:n,selection:this.parent.formatter.editorManager.nodeSelection.save(r,this.parent.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(r)};switch(i.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(t.selection,n);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(t.selection,n);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(t.selection,n);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(t,n);break;case"Dashed":case"Alternate":case"Custom":this.tableStyles(t,i.subCommand)}}},n.prototype.addRow=function(n,t,i){var r,u;i&&(r={item:{command:"Table",subCommand:"InsertRowAfter"}});u={selection:n,subCommand:i?r.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?r:t,t,u)},n.prototype.addColumn=function(n,t){this.parent.formatter.process(this.parent,t,t,{selection:n,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},n.prototype.removeRowColumn=function(n,t){this.parent.observer.notify(c,{});this.parent.formatter.process(this.parent,t,t,{selection:n,subCommand:t.item.subCommand});this.hideTableQuickToolbar();this.parent.observer.notify(h,{})},n.prototype.verticalAlign=function(n,t){var i=sf.base.closest(n.selectParent[0],"td")||sf.base.closest(n.selectParent[0],"th");i&&this.parent.formatter.process(this.parent,t,t,{tableCell:i,subCommand:t.item.subCommand})},n.prototype.tableStyles=function(n,t){var i=sf.base.closest(n.selectParent[0],"table"),u,r;if("Dashed"===t&&(this.parent.element.classList.contains("e-dashed-border")?this.parent.element.classList.remove("e-dashed-border"):this.parent.element.classList.add("e-dashed-border"),i.classList.contains("e-dashed-border")?i.classList.remove("e-dashed-border"):i.classList.add("e-dashed-border")),"Alternate"===t&&(this.parent.element.classList.contains("e-alternate-border")?this.parent.element.classList.remove("e-alternate-border"):this.parent.element.classList.add("e-alternate-border"),i.classList.contains("e-alternate-border")?i.classList.remove("e-alternate-border"):i.classList.add("e-alternate-border")),n.args&&n.args.item.cssClass)for(u=n.args.item.cssClass.split(" "),r=0;r<u.length;r++)i.classList.contains(u[r])?i.classList.remove(u[r]):i.classList.add(u[r]);this.parent.formatter.saveData();this.parent.formatter.editorManager.nodeSelection.restore();this.hideTableQuickToolbar()},n.prototype.setBGColor=function(n){var u=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),t=this.parent.formatter.editorManager.nodeSelection.save(u,this.parent.getDocument()).range.startContainer,r,i;if((t=3===t.nodeType?sf.base.closest(t.parentNode,"td,th"):sf.base.closest(t,"td, th"))&&("TD"===t.nodeName||"TH"===t.nodeName)){for(r=sf.base.closest(t,"table").querySelectorAll(".e-cell-select"),i=0;i<r.length;i++)r[i].style.backgroundColor=n.item.value;this.parent.formatter.saveData()}this.hideTableQuickToolbar()},n.prototype.closeOpenedDialog=function(){var n=this.parent.element.querySelector(".e-rte-table-popup"),t=this.parent.element.querySelector(".e-rte-edit-table");n&&this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog");t&&this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},n.prototype.showDialog=function(n,t){var r;if(n&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.getDocument(),u=this.parent.formatter.editorManager.nodeSelection.getRange(i),f=this.parent.formatter.editorManager.nodeSelection.save(u,i);this.parent.observer.notify(h,{});r={originalEvent:n?void 0:t.args,item:{command:"Table",subCommand:"CreateTable"}};this.tableNotifyArgs={args:r,selection:f};this.insertTableDialog()}},n.prototype.keyDown=function(n){var i=n.args,r;switch(i.action){case"insert-table":this.showDialog(!1,n);i.preventDefault()}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&this.parent.getEditPanel()&&"KeyK"!==i.code){var u=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),f=this.parent.formatter.editorManager.nodeSelection.save(u,this.parent.getDocument()),e=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(u),t=e[0!==u.endOffset&&9===i.keyCode?e.length-1:0];if((t=t&&"TD"!==t.tagName&&"TH"!==t.tagName?t.parentElement:t,(8===i.keyCode||46===i.keyCode||i.ctrlKey&&88===i.keyCode)&&(t&&"TBODY"===t.tagName?(i.preventDefault(),this.removeTable(f,i,!0)):t&&t.querySelectorAll("table").length>0&&this.removeResizeEle()),t&&"TD"!==t.tagName&&"TH"!==t.tagName)&&(r=sf.base.closest(t,"td"),t=!sf.base.isNullOrUndefined(r)&&this.parent.inputElement.contains(r)?r:t),t&&("TD"===t.tagName||"TH"===t.tagName))switch(i.keyCode){case 9:case 37:case 39:this.tabSelection(i,f,t);break;case 40:case 38:this.tableArrowNavigation(i,f,t)}}},n.prototype.docClick=function(n){var t=n.args.target,r=this.parent.element.querySelector(".e-rte-table-popup"),u=this.parent.element.querySelector(".e-rte-edit-table"),i,f;t&&t.classList&&(r&&!sf.base.closest(t,"#"+r.id)||u&&!sf.base.closest(t,"#"+u.id))&&!t.classList.contains("e-create-table")&&t.offsetParent&&!t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.closeOpenedDialog(),this.parent.isBlur=!0,sf.base.Browser.isIE&&rt(this.parent.element,"focusout"));i=sf.base.closest(t,"td");f=!(!i||!this.parent.getEditPanel().contains(i));!t||"TD"===t.tagName||"TH"===t.tagName||f||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||(sf.base.removeClass(this.parent.inputElement.querySelectorAll("table td"),"e-cell-select"),sf.base.Browser.isIE||this.hideTableQuickToolbar());!t||!t.classList||t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box")||this.removeResizeEle()},n.prototype.onIframeMouseDown=function(){this.closeOpenedDialog()},n.prototype.keyUp=function(n){var t=n.args;(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)&&this.hideTableQuickToolbar()},n.prototype.destroy=function(){this.removeEventListener()},n}(),hr=function(){function n(n){this.pageX=null;this.pageY=null;this.deletedImg=[];this.parent=n;this.rteId=n.element.id;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(k,this.onKeyUp,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on(et,this.imagePaste,this);this.parent.observer.on(s,this.onKeyDown,this);this.parent.observer.on("imageSize",this.imageSize,this);this.parent.observer.on("caption",this.caption,this);this.parent.observer.on("delete",this.deleteImg,this);this.parent.observer.on("imgAltText",this.insertAltText,this);this.parent.observer.on(l,this.afterRender,this);this.parent.observer.on("insertImgLink",this.insertImgLink,this);this.parent.observer.on("insertImage",this.imageDialog,this);this.parent.observer.on("resize",this.onWindowResize,this);this.parent.observer.on("dropDownSelect",this.alignmentSelect,this);this.parent.observer.on("iframe-click",this.onIframeMouseDown,this);this.parent.observer.on("image-toolbar-action",this.onToolbarAction,this);this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this);this.parent.observer.on("insertCompleted",this.showImageQuickToolbar,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(k,this.onKeyUp);this.parent.observer.off(t,this.destroy);this.parent.observer.off(et,this.imagePaste);this.parent.observer.off(s,this.onKeyDown);this.parent.observer.off("imageSize",this.imageSize);this.parent.observer.off("caption",this.caption);this.parent.observer.off("delete",this.deleteImg);this.parent.observer.off("imgAltText",this.insertAltText);this.parent.observer.off(l,this.afterRender);this.parent.observer.off("insertImgLink",this.insertImgLink);this.parent.observer.off("insertImage",this.imageDialog);this.parent.observer.off("resize",this.onWindowResize);this.parent.observer.off("dropDownSelect",this.alignmentSelect);this.parent.observer.off("iframe-click",this.onIframeMouseDown);this.parent.observer.off("image-toolbar-action",this.onToolbarAction);this.parent.observer.off("editAreaClick",this.editAreaClickHandler);this.parent.observer.off("insertCompleted",this.showImageQuickToolbar);var n=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;n.removeEventListener("drop",this.dragDrop.bind(this),!0);n.removeEventListener("dragstart",this.dragStart.bind(this),!0);n.removeEventListener("dragenter",this.dragEnter.bind(this),!0);n.removeEventListener("dragover",this.dragOver.bind(this),!0);sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off("checkUndoStack",this.undoStack),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},n.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick,this);this.parent.insertImageSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this));var n=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;n.addEventListener("drop",this.dragDrop.bind(this),!0);n.addEventListener("dragstart",this.dragStart.bind(this),!0);n.addEventListener("dragenter",this.dragOver.bind(this),!0);n.addEventListener("dragover",this.dragOver.bind(this),!0)},n.prototype.imageDialog=function(n){var t,i,r;(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.uploadUrl={url:""},this.selectionObj={selfImage:this,selection:n.selection,args:n.args,selectParent:n.selectParent},(sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)||"Markdown"!==this.parent.editorMode)&&"HTML"!==this.parent.editorMode)||(t=this.parent.iframeSettings.enable,"HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(n.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(n.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))?(this.parent.getEditPanel().focus(),i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),this.imgUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.imgUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)):(this.imgUploadSave=n.selection,this.imgUploadSelectedParent=n.selectParent));r={mode:n.selectNode&&"IMG"===n.selectNode[0].nodeName?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",r);this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(n.selectParent)||sf.base.removeClass([n.selectParent[0]],"e-img-focus"),this.quickToolObj.hideInlineQTBar())},n.prototype.checkImageBack=function(n){"#text"!==n.startContainer.nodeName||0!==n.startOffset||sf.base.isNullOrUndefined(n.startContainer.previousSibling)||"IMG"!==n.startContainer.previousSibling.nodeName?"#text"===n.startContainer.nodeName||sf.base.isNullOrUndefined(n.startContainer.childNodes[n.startOffset-1])||"IMG"!==n.startContainer.childNodes[n.startOffset-1].nodeName||this.deletedImg.push(n.startContainer.childNodes[n.startOffset-1]):this.deletedImg.push(n.startContainer.previousSibling)},n.prototype.checkImageDel=function(n){"#text"!==n.startContainer.nodeName||n.startOffset!==n.startContainer.textContent.length||sf.base.isNullOrUndefined(n.startContainer.nextSibling)||"IMG"!==n.startContainer.nextSibling.nodeName?"#text"===n.startContainer.nodeName||sf.base.isNullOrUndefined(n.startContainer.childNodes[n.startOffset])||"IMG"!==n.startContainer.childNodes[n.startOffset].nodeName||this.deletedImg.push(n.startContainer.childNodes[n.startOffset]):this.deletedImg.push(n.startContainer.nextSibling)},n.prototype.getDropRange=function(n,t){var i=this.parent.getDocument().createRange(),e;this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var f=this.parent.getDocument().elementFromPoint(n,t),u=f.childNodes.length>0?f.childNodes[0]:f,r=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(u,r),i.setEnd(u,r);else{e=void 0;do r++,i.setStart(u,r),i.setEnd(u,r+1),e=i.getBoundingClientRect();while(e.left<n&&r<u.length-1)}return i},n.prototype.selectRange=function(n){var t;this.parent.getDocument().caretRangeFromPoint?t=this.parent.getDocument().caretRangeFromPoint(n.clientX,n.clientY):n.rangeParent?(t=this.parent.getDocument().createRange()).setStart(n.rangeParent,n.rangeOffset):t=this.getDropRange(n.clientX,n.clientY);this.parent.observer.notify("selectRange",{range:t})},n.prototype.imageDropInitialized=function(n){var e=this.imageDragArgs,f;if(this.parent.element.querySelector(".e-img-resize")&&sf.base.detach(this.imgResizeDiv),this.selectRange(this.imageDragArgs),!(this.dropFiles.length>1)){this.parent.observer.notify("drop",{args:e});for(var i=this.dropFiles,r=i[0].name,o=r.substring(r.lastIndexOf(".")),u=this.parent.insertImageSettings.allowedTypes,t=0;t<u.length;t++)if(o.toLocaleLowerCase()===u[t].toLowerCase())if(this.parent.insertImageSettings.saveUrl||n)this.onSelect(this.dropFiles);else f={text:"",file:i[0]},this.imagePaste(f)}},n.prototype.insertDragImage=function(n,t){var f=this,r,u,i,e;n.preventDefault();r=this.parent.element.querySelector("e-popup-open");(this.parent.observer.notify("drop",{args:n}),r&&r.classList.add("e-hide"),t.length<=0)&&(u=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image"),i&&"IMG"===i.tagName&&(i.nextElementSibling&&i.nextElementSibling.classList.contains("e-img-inner")?u.insertNode(i.parentElement.parentElement):u.insertNode(i),i.classList.remove("e-rte-drag-image"),i.addEventListener("load",function(){f.parent.actionCompleteEnabled&&f.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)}),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),e=n,this.resizeStart(e,i),this.hideImageQuickToolbar()))},n.prototype.onSelect=function(n){var i=this,f=this,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),e={name:"",size:0,status:"",statusCode:"",type:"",rawFile:n[0],validationMessages:{}},u,t;this.droppedImage=sf.base.createElement("IMG");this.droppedImage.style.opacity="0.5";this.droppedImage.classList.add("e-rte-image");this.droppedImage.classList.add("e-imginline");this.droppedImage.classList.add("e-resize");u=e.rawFile;t=new FileReader;t.addEventListener("load",function(){var n=URL.createObjectURL(wt(t.result));i.droppedImage.src="Blob"===f.parent.insertImageSettings.saveFormat?n:t.result});u&&t.readAsDataURL(u);r.insertNode(this.droppedImage);r.selectNodeContents(this.droppedImage);this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),r);this.droppedImage.addEventListener("load",function(){i.parent.actionCompleteEnabled&&i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)})},n.prototype.removeDroppedImage=function(){sf.base.detach(this.droppedImage)},n.prototype.dropUploadSuccess=function(n,t){this.droppedImage.style.opacity="1";this.droppedImage.classList.add("e-img-focus");this.droppedImage.src=n;this.droppedImage.alt=t;this.showImageQuickToolbar({args:this.imageDragArgs,type:"Images",isNotify:void 0,elements:this.droppedImage});this.resizeStart(this.imageDragArgs,this.droppedImage)},n.prototype.dropUploadChange=function(n,t){t&&(this.droppedImage.src=n,this.droppedImage.style.opacity="1")},n.prototype.imagePaste=function(n){var r=this,t,i;0!==n.text.length||sf.base.isNullOrUndefined(n.file)||(t=this,i=new FileReader,n.args&&n.args.preventDefault(),i.addEventListener("load",function(){var u={cssClass:"inline"===t.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:"Base64"!==r.parent.insertImageSettings.saveFormat&&sf.base.isNullOrUndefined(n.callBack)?URL.createObjectURL(wt(i.result)):i.result,width:{width:t.parent.insertImageSettings.width,minWidth:t.parent.insertImageSettings.minWidth,maxWidth:t.getMaxWidth()},height:{height:t.parent.insertImageSettings.height,minHeight:t.parent.insertImageSettings.minHeight,maxHeight:t.parent.insertImageSettings.maxHeight}};sf.base.isNullOrUndefined(n.callBack)?(t.parent.formatter.process(t.parent,{item:{command:"Images",subCommand:"Image"}},n.args,u),r.showPopupToolBar(n,u)):n.callBack(u)}),i.readAsDataURL(n.file))},n.prototype.showPopupToolBar=function(n,t){var r=this,u='img[src="'+t.url+'"]',i=this.parent.inputElement.querySelector(u),f={args:n.args,type:"Images",isNotify:void 0,elements:i};i&&setTimeout(function(){r.showImageQuickToolbar(f);r.resizeStart(n.args,i)},0)},n.prototype.undoStack=function(n){var i,t,o,r,u,e,f;if("undo"===n.subCommand.toLowerCase()||"redo"===n.subCommand.toLowerCase())for(i=0;i<this.parent.formatter.getUndoRedoStack().length;i++)if(t=sf.base.createElement("div"),o=(e=this.parent.formatter.getUndoRedoStack()[i].text,f=void 0,(f=sf.base.createElement("template")).innerHTML=e,_instanceof(f.content,DocumentFragment)?f.content:document.createRange().createContextualFragment(e)),t.appendChild(o),r=t.querySelectorAll("img"),t.querySelector(".e-img-resize")&&r.length>0){for(u=0;u<r.length;u++)r[u].style.outline="";sf.base.detach(t.querySelector(".e-img-resize"));this.parent.formatter.getUndoRedoStack()[i].text=t.innerHTML}},n.prototype.imageResize=function(n){this.resizeBtnInit();this.imgEle=n;sf.base.addClass([this.imgEle],"e-resize");this.imgResizeDiv=sf.base.createElement("span",{className:"e-img-resize",id:this.rteId+"_imgResize"});this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"}));this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"}));this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"}));this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"}));sf.base.Browser.isDevice&&sf.base.addClass([this.imgResizeDiv],"e-mob-rte");n.style.outline="2px solid #4a90e2";this.imgResizePos(n,this.imgResizeDiv);this.resizeImgDupPos(n);this.parent.getEditPanel().appendChild(this.imgResizeDiv);sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},n.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},n.prototype.imgResizePos=function(n,t){var f=this.calcPos(n),r=f.top,u=f.left,e=n.width,o=n.height,i=sf.base.Browser.isDevice?4*parseInt(n.style.outline.slice(-3),10)+2:2*parseInt(n.style.outline.slice(-3),10)+2,s=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=u-i+"px";t.querySelector(".e-rte-botLeft").style.top=o-i+r+"px";t.querySelector(".e-rte-botRight").style.left=e-(i-s)+u+"px";t.querySelector(".e-rte-botRight").style.top=o-i+r+"px";t.querySelector(".e-rte-topRight").style.left=e-(i-s)+u+"px";t.querySelector(".e-rte-topRight").style.top=r-i+"px";t.querySelector(".e-rte-topLeft").style.left=u-i+"px";t.querySelector(".e-rte-topLeft").style.top=r-i+"px"},n.prototype.resizeImgDupPos=function(n){this.imgDupPos={width:""!==n.style.height?this.imgEle.style.width:n.width+"px",height:""!==n.style.height?this.imgEle.style.height:n.height+"px"}},n.prototype.calcPos=function(n){for(var i=n.ownerDocument,t=(n.offsetParent&&(n.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(n.offsetParent.tagName)>-1)?sf.base.closest(n,"#"+this.rteId+"_rte-edit-view"):n.offsetParent)||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===t.style.position;)t=t.parentNode;return t&&t!==n&&1===t.nodeType&&t.getBoundingClientRect(),{top:n.offsetTop,left:n.offsetLeft}},n.prototype.getPointX=function(n){return n.touches&&n.touches.length?n.touches[0].pageX:n.pageX},n.prototype.getPointY=function(n){return n.touches&&n.touches.length?n.touches[0].pageY:n.pageY},n.prototype.pixToPercent=function(n,t){return n/parseFloat(getComputedStyle(t).width)*100},n.prototype.imgDupMouseMove=function(n,t){parseInt(this.parent.insertImageSettings.minWidth,10)>=parseInt(n,10)||parseInt(this.getMaxWidth(),10)<=parseInt(n,10)||!this.parent.insertImageSettings.resizeByPercent&&(parseInt(this.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10))||(this.imgEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.imgEle,parseInt(n,10),parseInt(t,10)),this.resizeImgDupPos(this.imgEle),this.imgResizePos(this.imgEle,this.imgResizeDiv),this.parent.setContentHeight("",!1))},n.prototype.setAspectRatio=function(n,t,i){if(!sf.base.isNullOrUndefined(n.width)){var r=""!==n.style.width?parseInt(n.style.width,10):n.width,u=""!==n.style.height?parseInt(n.style.height,10):n.height;r>u?this.parent.insertImageSettings.resizeByPercent?(n.style.width=this.pixToPercent(r/u*i,n.previousElementSibling||n.parentElement)+"%",n.style.height=null,n.removeAttribute("height")):""===n.style.width&&""!==n.style.height?n.style.height=i+"px":""!==n.style.width&&""===n.style.height?n.style.width=(r/u*i+r/u).toString()+"px":""!==n.style.width?(n.style.width=r/u*i+"px",n.style.height=i+"px"):n.setAttribute("width",(r/u*i+r/u).toString()):u>r?this.parent.insertImageSettings.resizeByPercent?(n.style.width=this.pixToPercent(t,n.previousElementSibling||n.parentElement)+"%",n.style.height=null,n.removeAttribute("height")):""!==n.style.width?(n.style.width=t+"px",n.style.height=u/r*t+"px"):(n.setAttribute("width",t.toString()),n.setAttribute("height",(u/r*t).toString())):this.parent.insertImageSettings.resizeByPercent?(n.style.width=this.pixToPercent(t,n.previousElementSibling||n.parentElement)+"%",n.style.height=null,n.removeAttribute("height")):""!==n.style.width?(n.style.width=t+"px",n.style.height=t+"px"):(n.setAttribute("width",t.toString()),n.setAttribute("height",t.toString()))}},n.prototype.getMaxWidth=function(){var t=this.parent.insertImageSettings.maxWidth,i=this.parent.getEditPanel(),n=window.getComputedStyle(i),r=i.offsetWidth-(14+parseFloat(n.paddingLeft.split("px")[0])+parseFloat(n.paddingRight.split("px")[0])+parseFloat(n.marginLeft.split("px")[0])+parseFloat(n.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(t)?r:t},n.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd);this.imgEle&&this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&(sf.base.detach(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},n.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd);sf.base.detach(this.parent.getEditPanel().querySelector(".e-img-resize"))},n.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-resize"))||this.cancelResizeAction()},n.prototype.editAreaClickHandler=function(n){var t,i,u,r;if(this.parent.readonly)this.hideImageQuickToolbar();else if(t=n.args,i=this.parent.quickToolbarSettings.showOnRightClick,2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule)if(this.quickToolObj=this.parent.quickToolbarModule,r=t.target,u=document.body.querySelector("#"+this.rteId+"_Image_Quick_Popup").classList.contains("e-rte-pop"),"IMG"===r.nodeName&&this.parent.quickToolbarModule){if(u)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),r);o()&&this.parent.observer.notify(h,n);sf.base.addClass([r],"e-img-focus");this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()},n.prototype.showImageQuickToolbar=function(n){var s=this,r="ImageLink",u,f;if("Images"===n.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var i=n.args,t=n.elements,e=this.parent.element.getBoundingClientRect(),o=this.parent.getToolbarElement(),h=o?o.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(n.elements,function(n,i){0===i&&(t=n)});t&&!sf.base.closest(t,"a")&&(r="Image");"IMG"===t.nodeName&&sf.base.addClass([t],["e-img-focus"]);u=this.parent.iframeSettings.enable?window.pageXOffset+e.left+i.clientX:i.pageX;f=this.parent.iframeSettings.enable?window.pageYOffset+e.top+h+i.clientY:i.pageY;this.quickToolObj&&(n.isNotify?setTimeout(function(){s.quickToolObj.showImageQTBar(u,f,t,r)},400):this.quickToolObj.showImageQTBar(u,f,t,r))}},n.prototype.hideImageQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.hideImageQTBar())},n.prototype.onToolbarAction=function(n){switch(this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([n.selectNode[0]],"e-img-focus")),this.selectionObj=n,o()&&this.parent.observer.notify(c,{}),n.args.item.subCommand){case"Replace":this.parent.observer.notify("insertImage",n);break;case"Caption":this.parent.observer.notify("caption",n);break;case"InsertLink":this.parent.observer.notify("insertImgLink",n);break;case"AltText":this.parent.observer.notify("imgAltText",n);break;case"Remove":this.parent.observer.notify("delete",n);break;case"Dimension":this.parent.observer.notify("imageSize",n);break;case"OpenImageLink":this.openImgLink(n);break;case"EditImageLink":this.editImgLink(n);break;case"RemoveImageLink":this.removeImgLink(n)}},n.prototype.openImgLink=function(n){var t=""===n.selectParent[0].parentNode.target?"_self":"_blank";this.parent.formatter.process(this.parent,n.args,n.args,{url:n.selectParent[0].parentNode.href,target:t,selectNode:n.selectNode,subCommand:n.args.item.subCommand})},n.prototype.editImgLink=function(n){var t=n.selectParent[0].parentNode,i={url:t.href,target:t.target};this.insertImgLink(n,i)},n.prototype.removeImgLink=function(n){sf.base.Browser.isIE&&this.parent.getEditPanel().focus();n.selection.restore();var t=!(!this.parent.getEditPanel().contains(this.captionEle)||!sf.base.select("a",this.captionEle)),i=t?[this.captionEle]:[n.selectNode[0].parentElement];this.parent.formatter.process(this.parent,n.args,n.args,{insertElement:n.selectNode[0],selectParent:i,selection:n.selection,subCommand:n.args.item.subCommand});this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(n.selectParent)||sf.base.removeClass([n.selectParent[0]],"e-img-focus"));t&&sf.base.select(".e-img-inner",this.captionEle).focus()},n.prototype.caption=function(n){var t=n.selectNode[0],r,e;if("IMG"===t.nodeName){if(n.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),sf.base.addClass([t],"e-rte-image"),r=n.args.item?n.args.item.subCommand:"Caption",sf.base.isNullOrUndefined(sf.base.closest(t,".e-img-caption"))){this.captionEle=sf.base.createElement("span",{className:"e-img-caption e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false"}});var f=sf.base.createElement("span",{className:"e-img-wrap"}),i=sf.base.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),u=n.selectNode[0].parentElement;"A"===u.tagName&&u.setAttribute("contenteditable","true");f.appendChild("A"===u.tagName?u:n.selectNode[0]);f.appendChild(i);e=this.parent.localeData.imageCaption;i.innerHTML=e;this.captionEle.appendChild(f);t.classList.contains("e-imginline")&&sf.base.addClass([this.captionEle],"e-caption-inline");t.classList.contains("e-imgbreak")&&sf.base.addClass([this.captionEle],"e-imgbreak");t.classList.contains("e-imgleft")&&sf.base.addClass([this.captionEle],"e-imgleft");t.classList.contains("e-imgright")&&sf.base.addClass([this.captionEle],"e-imgright");t.classList.contains("e-imgcenter")&&sf.base.addClass([this.captionEle],"e-imgcenter");this.parent.formatter.process(this.parent,n.args,n.args,{insertElement:this.captionEle,selectNode:n.selectNode,subCommand:r});this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),i.childNodes[0],i.childNodes[0],0,i.childNodes[0].textContent.length)}else sf.base.detach(sf.base.closest(t,".e-img-caption")),sf.base.Browser.isIE&&(this.parent.getEditPanel().focus(),n.selection.restore()),"A"===t.parentElement.tagName?this.parent.formatter.process(this.parent,n.args,n.args,{insertElement:t.parentElement,selectNode:n.selectNode,subCommand:r}):this.parent.formatter.process(this.parent,n.args,n.args,{insertElement:t,selectNode:n.selectNode,subCommand:r});this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([t],"e-img-focus"))}},n.prototype.insertImgLink=function(n,t){var i;"IMG"===n.selectNode[0].nodeName&&(i=sf.base.isNullOrUndefined(t)?{mode:"InsertLink",newWindow:!0,url:""}:{mode:"EditLink",newWindow:!!t.target,url:t.url},this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i))},n.prototype.isUrl=function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(n)},n.prototype.insertLink=function(n,t){var i,r;if("IMG"===this.selectionObj.selectNode[0].nodeName){if(i=document.querySelector(".e-rte-img-dialog .e-img-link"),""===n)return sf.base.addClass([i],"e-error"),i.setSelectionRange(0,n.length),void i.focus();if(this.isUrl(n)?sf.base.removeClass([i],"e-error"):n="http://"+n,"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),"A"===this.selectionObj.selectNode[0].parentElement.nodeName)return this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:n,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),void this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:n,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand,selection:this.selectionObj.selection});r=sf.base.closest(this.selectionObj.selectNode[0],".e-img-caption");r&&sf.base.select(".e-img-inner",r).focus();this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}},n.prototype.insertAltText=function(n){if("IMG"===n.selectNode[0].nodeName){var t=n.selectNode[0].getAttribute("alt"),i={mode:"AltText",altText:null===t?"":t};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},n.prototype.insertAlt=function(n){this.selectionObj.selection.restore();0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{altText:n,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand});this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},n.prototype.deleteImg=function(n,t){if("IMG"===n.selectNode[0].nodeName){var i={src:n.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();n.selection.restore();this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle();this.parent.formatter.process(this.parent,n.args,n.args,{selectNode:n.selectNode,captionClass:"e-img-caption",subCommand:n.args.item.subCommand});this.quickToolObj&&this.quickToolObj.hideImageQTBar();this.cancelResizeAction();sf.base.isNullOrUndefined(t)&&this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},n.prototype.imageSize=function(n){if("IMG"===n.selectNode[0].nodeName){var t=n.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:this.getMaxWidth()};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},n.prototype.insertSize=function(n,t){this.selectionObj.selection.restore();0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:n,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand});this.imgResizeDiv&&this.imgResizePos(this.selectionObj.selectNode[0],this.imgResizeDiv);this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},n.prototype.alignmentSelect=function(n){var r=n.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===r.command){var u=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(u),t={args:n,selectNode:i="IMG"===i[0].nodeName?i:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),r.subCommand){case"JustifyLeft":this.alignImage(t,"JustifyLeft");break;case"JustifyCenter":this.alignImage(t,"JustifyCenter");break;case"JustifyRight":this.alignImage(t,"JustifyRight");break;case"Inline":this.inline(t);break;case"Break":this.break(t)}this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([i[0]],"e-img-focus"));this.cancelResizeAction()}},n.prototype.alignImage=function(n,t){var i=n.args.item?n.args.item.subCommand:t;this.parent.formatter.process(this.parent,n.args,n.args,{selectNode:n.selectNode,subCommand:i})},n.prototype.inline=function(n){if("IMG"===n.selectNode[0].nodeName){var t=n.args.item?n.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,n.args,n.args,{selectNode:n.selectNode,subCommand:t})}},n.prototype.break=function(n){if("IMG"===n.selectNode[0].nodeName){var t=n.args.item?n.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,n.args,n.args,{selectNode:n.selectNode,subCommand:t})}},n.prototype.imageBrowseClick=function(){document.getElementById(this.rteId+"_image").querySelector(".e-rte-img-dialog .e-file-select-wrap button").click()},n.prototype.dialogOpened=function(){var n=this.parent.element.querySelector(".e-rte-img-dialog .e-img-content"),t,i;sf.base.isNullOrUndefined(n)||(t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertImage"),this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.imageBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?n.querySelector("#"+this.rteId+"_insertImage").focus():n.querySelector(".e-img-url").focus())},n.prototype.imageSelected=function(){this.inputUrl.setAttribute("disabled","true")},n.prototype.imageUploadSuccess=function(n,t){this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url");sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)||(this.uploadUrl={url:n,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true"))},n.prototype.imageUploadComplete=function(n,t){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)){var i="Base64"===this.parent.insertImageSettings.saveFormat?n:URL.createObjectURL(wt(n));this.uploadUrl={url:i,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.inputUrl.setAttribute("disabled","true")}},n.prototype.imageUploadChange=function(n,t){this.modifiedUrl=n;this.isStreamUrl=t},n.prototype.removing=function(){this.inputUrl.removeAttribute("disabled");this.uploadUrl&&(this.uploadUrl.url="")},n.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel());this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.imageBrowseClick)},n.prototype.insertImageUrl=function(){var n,t;if(this.inputUrl=sf.base.Browser.isDevice?this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_image").querySelector(".e-rte-img-dialog .e-img-url"):this.parent.element.querySelector(".e-rte-img-dialog .e-img-url"),n=this.inputUrl.value,this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==n){"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))&&(this.parent.getEditPanel().focus(),t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t));var i=/[\w-]+.(jpg|png|jpeg|gif)/g,r=sf.base.isNullOrUndefined(n.match(i))||"HTML"!==this.parent.editorMode?"":n.match(i)[0],u={cssClass:"inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:n,selection:this.selectionObj.selection,altText:r,selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,u);this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}}else this.uploadUrl.cssClass="inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-img-resize")&&(this.imgEle.style.outline="",this.removeResizeEle())},n.prototype.showDialog=function(n,t,i,r,u){var f,e,o,s;n&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(f=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),e=this.parent.formatter.editorManager.nodeSelection.save(f,this.parent.getDocument()),o=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(f),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(f)):(e=i,o=r,s=u);"HTML"===this.parent.editorMode?this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:n?void 0:t},selectNode:o,selection:e,selectParent:s}):this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:n?void 0:t},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertImage"})},n.prototype.onCutHandler=function(){this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},n.prototype.onIframeMouseDown=function(n){this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);this.onDocumentClick(n)},n.prototype.onDocumentClick=function(n){var t=n.target,i;"IMG"===t.nodeName&&(this.imgEle=t);i=document.body.querySelector("#"+this.rteId+"_image.e-rte-img-dialog");sf.base.isNullOrUndefined(i)||(sf.base.closest(t,"#"+this.rteId+"_image")||!this.parent.toolbarSettings.enable||!this.parent.getToolbarElement()||this.parent.getToolbarElement().contains(n.target))&&(!this.parent.getToolbarElement()||!this.parent.getToolbarElement().contains(n.target)||sf.base.closest(t,"#"+this.rteId+"_toolbar_Image")||t.querySelector("#"+this.rteId+"_toolbar_Image"))||(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&rt(this.parent.element,"focusout"));"IMG"!==n.target.tagName&&this.imgResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction();this.parent.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),"IMG"===t.tagName||sf.base.isNullOrUndefined(this.imgEle)?sf.base.isNullOrUndefined(this.prevSelectedImgEle)||this.prevSelectedImgEle===t||(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline="")},n.prototype.imageClick=function(n){sf.base.Browser.isDevice&&("IMG"===n.target.tagName&&"A"===n.target.parentElement.tagName||"IMG"===n.target.tagName?(this.parent.getEditPanel().setAttribute("contenteditable","false"),n.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true"));"IMG"===n.target.tagName&&"A"===n.target.parentElement.tagName&&n.preventDefault()},n.prototype.onKeyDown=function(n){var i,s,u,r,c,t=n.args,o,f,h,e,l;if(this.deletedImg=[],"HTML"===this.parent.editorMode&&(c=(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===i.endContainer&&i.startOffset===i.endOffset),!c&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(t.which)<0)for(o=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),f=0;f<o.length;f++)"IMG"===o[f].nodeName&&this.deletedImg.push(o[f]);"HTML"===this.parent.editorMode&&(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)&&(h=i.startContainer===i.endContainer&&i.startOffset===i.endOffset,8===t.which&&"Backspace"===t.code&&h?this.checkImageBack(i):46===t.which&&"Delete"===t.code&&h&&this.checkImageDel(i));!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==t.code&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),u=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),r=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),!t.ctrlKey&&t.key&&(1===t.key.length||"enter"===t.action)&&"IMG"===r[0].tagName&&r[0].parentElement)&&(e=r[0].parentElement.childNodes[0],this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),e,e,e.textContent.length,e.textContent.length),sf.base.removeClass([r[0]],"e-img-focus"),this.quickToolObj.hideImageQTBar());(!t.ctrlKey||89!==t.keyCode&&90!==t.keyCode||this.undoStack({subCommand:90===t.keyCode?"undo":"redo"}),8===t.keyCode||46===t.keyCode)&&(u&&"IMG"===u[0].nodeName&&u.length<1&&(t.preventDefault(),l={selectNode:u,selection:s,selectParent:r,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:t}},this.deleteImg(l,t.keyCode)),this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle());switch(t.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);break;case"insert-image":this.showDialog(!1,t,s,u,r);t.preventDefault()}},n.prototype.onKeyUp=function(){var n,t;if(!sf.base.isNullOrUndefined(this.deletedImg)&&this.deletedImg.length>0)for(n=0;n<this.deletedImg.length;n++)t={src:this.deletedImg[n].getAttribute("src")},this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",t)},n.prototype.resizeStart=function(n,t){var u=this,i,r;this.parent.readonly||(i=t||n.target,(this.prevSelectedImgEle=this.imgEle,"IMG"===i.tagName)&&(this.parent.defaultResize(n,!1),r=i,this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&sf.base.detach(this.imgResizeDiv),this.imageResize(r)),i.classList.contains("e-rte-imageboxmark")&&((0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(n),this.pageY=this.getPointY(n),n.preventDefault(),n.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),i.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),i.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),i.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),i.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))?sf.base.addClass([this.imgResizeDiv],"e-mob-span"):this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Images"}).then(function(n){n.cancel&&u.cancelResizeAction()}),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)))},n.prototype.resizing=function(n){this.imgEle.offsetWidth>=this.getMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");var t=this.getPointX(n),i=this.getPointY(n),r=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,u=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,f=parseInt(this.imgDupPos.width,10)+r,e=parseInt(this.imgDupPos.height,10)+u;this.pageX=t;this.pageY=i;(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(f+"px",e+"px",n)},n.prototype.resizeEnd=function(n){this.resizeBtnInit();this.imgEle.parentElement.style.cursor="auto";sf.base.Browser.isDevice&&sf.base.removeClass([n.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Images"});this.parent.formatter.editorManager.observer.on("checkUndoStack",this.undoStack,this);this.parent.formatter.saveData()},n.prototype.dragStart=function(n){if("IMG"!==n.target.nodeName)return!0;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",n).then(function(t){t.cancel?n.preventDefault():(n.dataTransfer.effectAllowed="copyMove",n.target.classList.add("e-rte-drag-image"))})},n.prototype.dragOver=function(n){if(!("edge"===sf.base.Browser.info.name&&n.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||sf.base.Browser.isIE&&"Files"===n.dataTransfer.types[0]))return!0;n.preventDefault()},n.prototype.dragEnter=function(n){n.dataTransfer.dropEffect="copy";n.preventDefault()},n.prototype.dragDrop=function(n){var t=this,i;if(this.imageDragArgs=n,this.dropFiles=n.dataTransfer.files,i=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image"),!i||"IMG"!==i.tagName)return!0;n.preventDefault();n.dataTransfer.files.length<=0&&this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",n).then(function(i){if(!i.cancel){if(sf.base.closest(n.target,"#"+t.rteId+"_toolbar")||"false"===t.parent.inputElement.contentEditable)return;if(t.parent.element.querySelector(".e-img-resize")&&sf.base.detach(t.imgResizeDiv),t.selectRange(n),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(n,t.dropFiles)}})},n.prototype.destroy=function(){this.prevSelectedImgEle=void 0;this.removeEventListener()},n}(),cr=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("xhtmlValidation",this.enableXhtmlValidation,this);this.parent.observer.on(t,this.removeEventListener,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("xhtmlValidation",this.enableXhtmlValidation);this.parent.observer.off(t,this.removeEventListener)},n.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(this.currentElement=sf.base.isNullOrUndefined(this.parent.inputElement)?this.parent.element:this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML))},n.prototype.selfEncloseValidation=function(n){var u,i,r;n=n.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/&nbsp;/gi," ").replace(/ /g," ");for(var t=[],o=[],e=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],f=0;f<e.length;f++){for(u=e[f].exec(n);null!==u;)t.push(u[0].toString()),u=e[f].exec(n);for(o=t.slice(0),i=0;i<t.length;i++)-1!==t[i].indexOf("/")&&t[i].lastIndexOf("/")===t[i].length-2||(t[i]=t[i].substr(0,t[i].length-1)+" /"+t[i].substr(t[i].length-1,t[i].length));for(r=0;r<=t.length-1;r++)n=n.replace(o[r],t[r])}return n},n.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var n=document.createElement("div");this.currentElement.childNodes.length>0;)n.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(n)}},n.prototype.clean=function(n){for(var t,i=0;i<n.childNodes.length;i++)t=n.childNodes[i],8===t.nodeType||"V:IMAGE"===t.nodeName?(n.removeChild(t),i--):1===t.nodeType&&this.clean(t);return this.currentElement.innerHTML},n.prototype.ImageTags=function(){for(var t=this.currentElement.querySelectorAll("IMG"),n=t.length-1;n>=0;n--)t[n].hasAttribute("alt")||t[n].setAttribute("alt","")},n.prototype.removeTags=function(){for(var t=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],n=0;n<t.length;n++)this.RemoveElementNode(t[n][0],t[n][1])},n.prototype.RemoveElementNode=function(n,t){for(var f,r,u=this.currentElement.querySelectorAll(t),i=0;i<u.length;i++)for(f=u[i].querySelectorAll(n),r=f.length;r>0;r--)sf.base.detach(f[r-1])},n.prototype.RemoveUnsupported=function(){for(var r,i,u,f,t=this.currentElement.querySelectorAll("u"),n=t.length-1;n>=0;n--)r=document.createElement("span"),r.style.textDecoration="underline",r.innerHTML=t[n].innerHTML,t[n].parentNode.insertBefore(r,t[n]),sf.base.detach(t[n]);for(i=this.currentElement.querySelectorAll("strong"),n=i.length-1;n>=0;n--)u=document.createElement("b"),u.innerHTML=i[n].innerHTML,i[n].parentNode.insertBefore(u,i[n]),sf.base.detach(i[n]);for(f=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"],n=0;n<=f.length;n++)this.RemoveAttributeByName(f[n])},n.prototype.RemoveAttributeByName=function(n){var u,i,f,t,r;if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(u=0;u<this.currentElement.childNodes.length;u++)if(i=this.currentElement.childNodes[u],3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(n)&&i.removeAttribute(n),i.hasChildNodes()))for(f=0;f<i.childNodes.length;f++)if(t=i.childNodes[f],3!==t.nodeType&&"TABLE"!==t.nodeName&&"TBODY"!==t.nodeName&&"THEAD"!==t.nodeName&&"TH"!==t.nodeName&&"TR"!==t.nodeName&&"TD"!==t.nodeName&&t.hasAttribute(n)&&t.removeAttribute(n),t.hasChildNodes())for(r=0;r<t.childNodes.length;r++)3!==t.childNodes[r].nodeType&&"TABLE"!==t.childNodes[r].nodeName&&"TBODY"!==t.childNodes[r].nodeName&&"THEAD"!==t.childNodes[r].nodeName&&"TH"!==t.childNodes[r].nodeName&&"TR"!==t.childNodes[r].nodeName&&"TD"!==t.childNodes[r].nodeName&&t.childNodes[r].hasAttribute(n)&&t.childNodes[r].removeAttribute(n)},n}(),y=function(){function n(){}return n.prototype.getFormattedNode=function(n,t,i){var r=this.getFormatParent(n,t,i);return null!==r&&r!==i?r:null},n.prototype.getFormatParent=function(n,t,i){do n=n.parentNode;while(n&&n!==i&&!this.isFormattedNode(n,t));return n},n.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return n.isBold(t);case"italic":return n.isItalic(t);case"underline":return n.isUnderline(t);case"strikethrough":return n.isStrikethrough(t);case"superscript":return n.isSuperscript(t);case"subscript":return n.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},n.isBold=function(n){return-1!==["strong","b"].indexOf(n.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(n.nodeName.toLowerCase())||!n.style||"bold"!==n.style.fontWeight)},n.isItalic=function(n){return-1!==["em","i"].indexOf(n.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(n.nodeName.toLowerCase())||!n.style||"italic"!==n.style.fontStyle)},n.isUnderline=function(n){return-1!==["u"].indexOf(n.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(n.nodeName.toLowerCase())||!n.style||"underline"!==n.style.textDecoration)},n.isStrikethrough=function(n){return-1!==["del","strike"].indexOf(n.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(n.nodeName.toLowerCase())||!n.style||"line-through"!==n.style.textDecoration)},n.isSuperscript=function(n){return-1!==["sup"].indexOf(n.nodeName.toLowerCase())},n.isSubscript=function(n){return-1!==["sub"].indexOf(n.nodeName.toLowerCase())},n.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},n.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},n.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},n.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==n.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},n.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],n}(),bt="INSERT-IMAGE",it=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],p=["td","th"],ot=["table","tbody","td","tfoot","th","thead","tr"],a=function(){function n(){this.startNodeName=[];this.endNodeName=[]}return n.prototype.saveInstance=function(n,t){return this.range=n.cloneRange(),this.rootNode=this.documentFromRange(n),this.body=t,this.startContainer=this.getNodeArray(n.startContainer,!0),this.endContainer=this.getNodeArray(n.endContainer,!1),this.startOffset=n.startOffset,this.endOffset=n.endOffset,this.html=this.body.innerHTML,this},n.prototype.documentFromRange=function(n){return 9===n.startContainer.nodeType?n.startContainer:n.startContainer.ownerDocument},n.prototype.getRange=function(n){var i=this.get(n),t=i&&i.rangeCount>0?i.getRangeAt(i.rangeCount-1):n.createRange();return t.startContainer!==n||t.endContainer!==n||t.startOffset||t.endOffset||(t.setStart(n.body,0),t.collapse(!0)),t},n.prototype.get=function(n){return n.defaultView.getSelection()},n.prototype.save=function(n,t){return n=n?n.cloneRange():this.getRange(t),this.saveInstance(n,t.body)},n.prototype.getIndex=function(n){var t=0;if(n=n.previousSibling||"BR"!==n.tagName?n.previousSibling:n)for(n.nodeType;n;null)t++,n.nodeType,n=n.previousSibling;return t},n.prototype.isChildNode=function(n,t){for(var i=0;i<t.childNodes.length;i++)if(n.indexOf(t.childNodes[i])>-1)return!0;return!1},n.prototype.getNode=function(n,t,i){return t!==n||3!==n.nodeType&&n.firstChild&&-1===i.indexOf(n.firstChild)&&!this.isChildNode(i,n)?-1===i.indexOf(n.firstChild)&&n.firstChild&&!this.isChildNode(i,n)?n.firstChild:n.nextSibling?n.nextSibling:n.parentNode?n.parentNode:null:null},n.prototype.getNodeCollection=function(n){var t=n.startContainer.childNodes[n.startOffset]||n.startContainer,r=n.endContainer.childNodes[n.endOffset>0?n.endOffset-1:n.endOffset]||n.endContainer,i;if(t===r&&0===t.childNodes.length)return[t];if(n.startOffset===n.endOffset&&0!==n.startOffset&&"PRE"===n.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];i=[];do-1===i.indexOf(t)&&i.push(t),t=this.getNode(t,r,i);while(t);return i},n.prototype.getParentNodeCollection=function(n){return this.getParentNodes(this.getNodeCollection(n),n)},n.prototype.getParentNodes=function(n,t){n=n.reverse();for(var i=0;i<n.length;i++)-1!==n.indexOf(n[i].parentNode)||3===n[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(n.splice(i,1),i--):3===n[i].nodeType&&(n[i]=n[i].parentNode);return n},n.prototype.getSelectionNodeCollection=function(n){return this.getSelectionNodes(this.getNodeCollection(n))},n.prototype.getSelectionNodeCollectionBr=function(n){return this.getSelectionNodesBr(this.getNodeCollection(n))},n.prototype.getSelectionNodes=function(n){n=n.reverse();for(var i=new RegExp(String.fromCharCode(8203),"g"),t=0;t<n.length;t++)(3!==n[t].nodeType||""===n[t].textContent.trim()||1===n[t].textContent.length&&n[t].textContent.match(i))&&(n.splice(t,1),t--);return n.reverse()},n.prototype.getSelectionNodesBr=function(n){n=n.reverse();for(var i=new RegExp(String.fromCharCode(8203),"g"),t=0;t<n.length;t++)"BR"!==n[t].nodeName&&(3!==n[t].nodeType||""===n[t].textContent.trim()||1===n[t].textContent.length&&n[t].textContent.match(i))&&(n.splice(t,1),t--);return n.reverse()},n.prototype.getInsertNodeCollection=function(n){return this.getInsertNodes(this.getNodeCollection(n))},n.prototype.getInsertNodes=function(n){n=n.reverse();for(var t=0;t<n.length;t++)(0!==n[t].childNodes.length&&3!==n[t].nodeType||3===n[t].nodeType&&""===n[t].textContent)&&(n.splice(t,1),t--);return n.reverse()},n.prototype.getNodeArray=function(n,t,i){var r=[];for(t?this.startNodeName=[]:this.endNodeName=[];n!==(i||this.rootNode)&&!sf.base.isNullOrUndefined(n);null)t?this.startNodeName.push(n.nodeName.toLowerCase()):this.endNodeName.push(n.nodeName.toLowerCase()),r.push(this.getIndex(n)),n=n.parentNode;return r},n.prototype.setRangePoint=function(n,t,i,r){for(var u=this.rootNode,f=i.length,e=r;f--;null)u=u&&u.childNodes[i[f]];return u&&e>=0&&"html"!==u.nodeName&&n[t?"setStart":"setEnd"](u,e),n},n.prototype.restore=function(){var n=this.range.cloneRange();return n=this.setRangePoint(n,!0,this.startContainer,this.startOffset),n=this.setRangePoint(n,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,n),n},n.prototype.selectRange=function(n,t){this.setRange(n,t);this.save(t,n)},n.prototype.setRange=function(n,t){var i=this.get(n);i.removeAllRanges();i.addRange(t)},n.prototype.setSelectionText=function(n,t,i,r,u){var f=n.createRange();f.setStart(t,r);f.setEnd(i,u);this.setRange(n,f)},n.prototype.setSelectionContents=function(n,t){var i=n.createRange();i.selectNode(t);this.setRange(n,i)},n.prototype.setSelectionNode=function(n,t){var i=n.createRange();i.selectNodeContents(t);this.setRange(n,i)},n.prototype.getSelectedNodes=function(n){return this.getNodeCollection(this.getRange(n))},n.prototype.Clear=function(n){this.get(n).removeAllRanges()},n.prototype.insertParentNode=function(n,t,i){i.surroundContents(t);this.selectRange(n,i)},n.prototype.setCursorPoint=function(n,t,i){var r=n.createRange(),u=n.defaultView.getSelection();r.setStart(t,i);r.collapse(!0);u.removeAllRanges();u.addRange(r)},n}(),kt={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},lr=function(){function n(){}return n.get=function(n,t,i,r,u,f){for(var e=JSON.parse(JSON.stringify(kt)),s=JSON.parse(JSON.stringify(kt)),c=new a,h=f?[f]:c.getNodeCollection(c.getRange(n)),y=h.length,l=!1,v=c.getRange(n),o=0;o<h.length;o++){for(;3===h[o].nodeType&&3===v.startContainer.nodeType&&h[o].parentNode&&h[o].parentNode.lastElementChild&&"BR"!==h[o].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(h[o].parentNode,t).textContent.replace(/\u200B/g,"").length&&0===v.startContainer.textContent.replace(/\u200B/g,"").length&&0===c.get(n).toString().replace(/\u200B/g,"").length;)h[o]=h[o].parentNode.lastElementChild.firstChild,l=!0;l&&h[o]&&(c.setCursorPoint(n,h[o],h[o].textContent.length),l=!1);("BR"!==h[o].nodeName&&3!==h[o].nodeType||y>1&&3===h[o].nodeType&&""===h[o].textContent.trim())&&(h.splice(o,1),o--)}for(o=0;o<h.length;o++)e=this.getFormatParent(n,e,h[o],t,i,r,u),(0===o&&e.bold||!e.bold)&&(s.bold=e.bold),(0===o&&e.insertcode||!e.insertcode)&&(s.insertcode=e.insertcode),(0===o&&e.italic||!e.italic)&&(s.italic=e.italic),(0===o&&e.underline||!e.underline)&&(s.underline=e.underline),(0===o&&e.strikethrough||!e.strikethrough)&&(s.strikethrough=e.strikethrough),(0===o&&e.superscript||!e.superscript)&&(s.superscript=e.superscript),(0===o&&e.subscript||!e.subscript)&&(s.subscript=e.subscript),(0===o&&e.fontcolor||!e.fontcolor)&&(s.fontcolor=e.fontcolor),(0===o&&e.fontname||!e.fontname)&&(s.fontname=e.fontname),(0===o&&e.fontsize||!e.fontsize)&&(s.fontsize=e.fontsize),(0===o&&e.backgroundcolor||!e.backgroundcolor)&&(s.backgroundcolor=e.backgroundcolor),(0===o&&e.orderedlist||!e.orderedlist)&&(s.orderedlist=e.orderedlist),(0===o&&e.unorderedlist||!e.unorderedlist)&&(s.unorderedlist=e.unorderedlist),(0===o&&e.alignments||!e.alignments)&&(s.alignments=e.alignments),(0===o&&e.formats||!e.formats)&&(s.formats=e.formats),(0===o&&e.createlink||!e.createlink)&&(s.createlink=e.createlink),(0===o&&e.numberFormatList||!e.numberFormatList)&&(s.numberFormatList=e.numberFormatList),(0===o&&e.bulletFormatList||!e.bulletFormatList)&&(s.bulletFormatList=e.bulletFormatList),e=JSON.parse(JSON.stringify(kt));return s},n.getImmediateBlockNode=function(n){do n=n.parentNode;while(n&&it.indexOf(n.nodeName.toLocaleLowerCase())<0);return n},n.getFormatParent=function(n,t,i,r,u,f,e){if(r.contains(i)||3===i.nodeType&&3!==r.nodeType&&r.contains(i.parentNode))do t=this.isFormattedNode(n,t,i,u,f,e),i=i.parentNode;while(i&&i!==r);return t},n.isFormattedNode=function(n,t,i,r,u,f){return t.bold||(t.bold=y.isBold(i)),t.italic||(t.italic=y.isItalic(i)),t.underline||(t.underline=y.isUnderline(i)),t.strikethrough||(t.strikethrough=y.isStrikethrough(i)),t.superscript||(t.superscript=y.isSuperscript(i)),t.subscript||(t.subscript=y.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(n,i)),t.fontname||(t.fontname=this.isFontName(n,i,f)),t.fontsize||(t.fontsize=this.isFontSize(i,u)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,r),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t.numberFormatList||(t.numberFormatList=this.isNumberFormatList(i)),t.bulletFormatList||(t.bulletFormatList=this.isBulletFormatList(i)),t},n.isFontColor=function(n,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(n,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},n.isLink=function(n){return"a"===n.nodeName.toLocaleLowerCase()},n.isBackgroundColor=function(n){var t=n.style&&n.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},n.isFontSize=function(n,t){var i=n.style&&n.style.fontSize;return null!==i&&""!==i&&void 0!==i&&(null==t||t.indexOf(i)>-1)?i:null},n.isFontName=function(n,t,i){var r=t.style&&t.style.fontFamily,u;return null!=r&&""!==r||3===t.nodeType||(r=this.getComputedStyle(n,t,"font-family")),u=null,null!==r&&""!==r&&void 0!==r&&(null==i||i.filter(function(n,t){var i=new RegExp(r,"i");(n.replace(/"/g,"").replace(/ /g,"")===r.replace(/"/g,"").replace(/ /g,"")||n.search(i)>-1)&&(u=t)})&&null!==u)?null!==u?i[u]:r.replace(/"/g,""):null},n.isOrderedList=function(n){return"ol"===n.nodeName.toLocaleLowerCase()},n.isUnorderedList=function(n){return"ul"===n.nodeName.toLocaleLowerCase()},n.isAlignment=function(n){var t=n.style&&n.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},n.isFormats=function(n,t){return null==t&&it.indexOf(n.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(n.nodeName.toLocaleLowerCase())>-1?n.nodeName.toLocaleLowerCase():null},n.getComputedStyle=function(n,t,i){return n.defaultView.getComputedStyle(t,null).getPropertyValue(i)},n.isNumberFormatList=function(n){var t=n.style&&n.style.listStyleType;return"lower-alpha"===t?"Lower Alpha":"number"===t?"Number":"upper-alpha"===t?"Upper Alpha":"lower-roman"===t?"Lower Roman":"upper-roman"===t?"Upper Roman":"lower-greek"===t?"Lower Greek":"none"===t?"None":null},n.isBulletFormatList=function(n){var t=n.style&&n.style.listStyleType;return"circle"===t?"Circle":"square"===t?"Square":"none"===t?"None":"disc"===t?"Disc":null},n}(),ar=function(){function n(n){this.parent=n;this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1};this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this);this.parent.observer.on(t,this.removeEventListener,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler);this.parent.observer.off(t,this.removeEventListener)},n.prototype.onRefreshHandler=function(n){var t;if(!this.parent.readonly){var i=[],r=[],u=[];this.parent.fontSize.items.forEach(function(n){i.push(n.value)});this.parent.fontFamily.items.forEach(function(n){r.push(n.value)});this.parent.format.items.forEach(function(n){u.push(n.value.toLocaleLowerCase())});this.toolbarStatus=lr.get(this.parent.getDocument(),this.parent.getEditPanel(),u,i,r,n.documentNode);t=JSON.stringify(this.toolbarStatus);this.parent.observer.notify("toolbar-updated",this.toolbarStatus);JSON.stringify(this.prevToolbarStatus)!==t&&(this.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(t),markdown:null}),this.prevToolbarStatus=JSON.parse(t))}},n}();var dt,gt,st=function(){return(st=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},yi=function(){function n(){}return n.prototype.process=function(n,t,i,r){var e,c=this,o=n.getDocument().getSelection(),f=o.rangeCount>0?o.getRangeAt(o.rangeCount-1):null,u,s,h;("HTML"===n.editorMode&&(e=this.editorManager.nodeSelection.save(f,n.getDocument())),sf.base.isNullOrUndefined(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||!f||n.getEditPanel().contains(this.getAncestorNode(f.commonAncestorContainer))||n.getEditPanel()===f.commonAncestorContainer||n.getPanel()===f.commonAncestorContainer)&&(sf.base.isNullOrUndefined(t)?(u=i.action,"tab"!==u&&"enter"!==u&&"space"!==u&&"escape"!==u&&(t={},"Markdown"===n.editorMode&&"insert-table"===u&&(r={headingText:n.localeData.headingText,colText:n.localeData.colText}),s={originalEvent:i,cancel:!1,requestType:u||i.key+"Key"},sf.base.extend(t,t,s,!0),delete t.item,t.originalEvent=st({},t.originalEvent,{target:null}),n.actionBeginEnabled&&n.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then(function(){t.cancel&&("paste"!==u&&"cut"!==u&&"copy"!==u||i.preventDefault())})),h=!!sf.base.isNullOrUndefined(n.tableModule)||!!n.tableModule&&n.tableModule.ensureInsideTableList,(9===i.which&&h||9!==i.which)&&this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,n),value:r})):!sf.base.isNullOrUndefined(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(t.originalEvent=st({},t.originalEvent,{target:null}),sf.base.extend(t,t,{requestType:t.item.subCommand,cancel:!1},!0),n.actionBeginEnabled?n.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then(function(u){u.cancel||c.actionBeginCallBack(n,t,e,i,r)}):this.actionBeginCallBack(n,t,e,i,r)),(sf.base.isNullOrUndefined(i)||i&&"copy"!==i.action)&&this.enableUndo(n))},n.prototype.getAncestorNode=function(n){return 3===n.nodeType?n.parentNode:n},n.prototype.onKeyHandler=function(n,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){n.observer.notify("content-changed",{});i.enableUndo(n)}})},n.prototype.onSuccess=function(n,t){var i=this;n.observer.notify("content-changed",{});t&&(sf.base.isNullOrUndefined(t.event)||"copy"!==t.event.action)&&("Paste"===t.requestType?(n.observer.notify("execCommandCallBack",t),this.enableUndo(n)):(this.enableUndo(n),n.observer.notify("execCommandCallBack",t)));t.event=st({},t.event,{target:null});this.successArgs=st({},t);delete t.elements;delete t.range;n.actionCompleteEnabled?n.dotNetRef.invokeMethodAsync("ActionCompleteEvent",t).then(function(t){i.actionCompleteCallBack(n,t)}):this.actionCompleteCallBack(n,t)},n.prototype.saveData=function(n){this.editorManager.undoRedoManager.saveData(n)},n.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},n.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},n.prototype.enableUndo=function(n){var t,i;n.undoRedoStatus&&(t=this.getUndoStatus(),!n.inlineMode.enable||sf.base.Browser.isDevice&&(i=!1,sf.base.Browser.isDevice&&sf.base.Browser.isIos&&(i=!0),!i)?n.toolbarModule&&n.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t):n.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t))},n.prototype.actionBeginCallBack=function(n,t,i,r,u){0===this.getUndoRedoStack().length&&"Links"!==t.item.command&&"Images"!==t.item.command&&this.saveData();n.isBlur=!1;n.getEditPanel().focus();"HTML"===n.editorMode&&i.restore();var f=t.item.subCommand.toLocaleLowerCase();"paste"===f||"cut"===f||"copy"===f?n.clipboardAction(f,r):(this.editorManager.observer.notify("checkUndoStack",{subCommand:t.item.subCommand}),this.editorManager.execCommand(t.item.command,t.item.subCommand,r,this.onSuccess.bind(this,n),t.item.value,"Pre"===t.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:u,"# iframe"))},n.prototype.actionCompleteCallBack=function(n,t){if(n.setPlaceHolder(),"Images"===t.requestType||"Links"===t.requestType&&"HTML"===t.editorMode){var i=this.successArgs;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;n.observer.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}n.autoResize()},n}(),pi={h6:"###### ",h5:"##### ",h4:"#### ",h3:"### ",h2:"## ",h1:"# ",blockquote:"> ",pre:"```\n",p:""},wi={Bold:"**",Italic:"*",StrikeThrough:"~~",InlineCode:"`",SubScript:"<sub>",SuperScript:"<sup>",UpperCase:"A-Z",LowerCase:"a-z"},bi={OL:"1. ",UL:"- "},yr={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab","delete":"46"},pr={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=","full-screen":"ctrl+shift+f","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o"},ki={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},di=["BR","IMG"],e="e-editor-select-start",u="e-editor-select-end",ni=function(){function n(n,t){this.parent=n;this.nodeSelection=new a;this.currentDocument=t}return n.prototype.contents=function(n){return n&&"IFRAME"!==n.tagName?Array.prototype.slice.call(n.childNodes||[]):[]},n.prototype.isBlockNode=function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE&&it.indexOf(n.tagName.toLowerCase())>=0},n.prototype.isLink=function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE&&"a"===n.tagName.toLowerCase()},n.prototype.blockParentNode=function(n){for(;n&&n.parentNode!==this.parent&&(!n.parentNode||!this.hasClass(n.parentNode,"e-node-inner"));null)if(n=n.parentNode,this.isBlockNode(n))return n;return n},n.prototype.rawAttributes=function(n){var u={},i=n.attributes,t,r;if(i.length>0)for(t=0;t<i.length;t++)r=i[t],u[r.nodeName]=r.value;return u},n.prototype.attributes=function(n){var i,t;if(!n)return"";for(var u="",f=this.rawAttributes(n),e=Object.keys(f).sort(),r=0;r<e.length;r++)i=e[r],t=f[i],u+=t.indexOf("'")<0&&t.indexOf('"')>=0?" "+i+"='"+t+"'":t.indexOf('"')>=0&&t.indexOf("'")>=0?" "+i+'="'+(t=t.replace(/"/g,"&quot;"))+'"':" "+i+'="'+t+'"';return u},n.prototype.clearAttributes=function(n){for(var r,i=n.attributes,t=i.length-1;t>=0;t--)r=i[t],n.removeAttribute(r.nodeName)},n.prototype.openTagString=function(n){return"<"+n.tagName.toLowerCase()+this.attributes(n)+">"},n.prototype.closeTagString=function(n){return"<\/"+n.tagName.toLowerCase()+">"},n.prototype.createTagString=function(n,t,i){return"<"+n.toLowerCase()+this.attributes(t)+">"+i+"<\/"+n.toLowerCase()+">"},n.prototype.isList=function(n){return!!n&&["UL","OL"].indexOf(n.tagName)>=0},n.prototype.isElement=function(n){return n===this.parent},n.prototype.isEditable=function(n){return(!n.getAttribute||"true"===n.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(n.tagName)<0},n.prototype.hasClass=function(n,t){return n&&n.classList&&n.classList.contains(t)},n.prototype.replaceWith=function(n,t){n.parentNode.insertBefore(this.parseHTMLFragment(t),n);sf.base.detach(n)},n.prototype.parseHTMLFragment=function(n){var t=sf.base.createElement("template");return t.innerHTML=n,_instanceof(t.content,DocumentFragment)?t.content:document.createRange().createContextualFragment(n)},n.prototype.wrap=function(n,t){return n.parentNode.insertBefore(t,n),(t=n.previousSibling).appendChild(n),t},n.prototype.insertAfter=function(n,t){t.parentNode.insertBefore(n,t.nextSibling)},n.prototype.wrapInner=function(n,t){for(n.appendChild(t),(t=n.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");n.firstChild!==t;)t.appendChild(n.firstChild);return t},n.prototype.unWrap=function(n){for(var i=n.parentNode,t=[];n.firstChild;)t.push(n.firstChild),i.insertBefore(n.firstChild,n);return t=t.length>0?t:[n.parentNode],i.removeChild(n),t},n.prototype.getSelectedNode=function(n,t){return n.nodeType===Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t-1]&&n.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(n.childNodes[t-1].classList.contains(e)||n.childNodes[t-1].classList.contains(u))?n=n.childNodes[t-1]:n.nodeType===Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType===Node.TEXT_NODE&&(n=n.parentNode),n},n.prototype.nodeFinds=function(n,t){for(var r=[],i=0;i<t.length;i++)n.contains(t[i])&&n!==t[i]&&r.push(t[i]);return r},n.prototype.isEditorArea=function(){for(var n=this.getRangePoint(0).commonAncestorContainer;n&&!this.isElement(n);null)n=n.parentNode;return!!this.isElement(n)},n.prototype.getRangePoint=function(n){var t=this.getSelection(),i=[],r;if(t&&t.getRangeAt&&t.rangeCount)for(i=[],r=0;r<t.rangeCount;r++)i.push(t.getRangeAt(r));else i=[this.currentDocument.createRange()];return void 0!==n?i[n]:i},n.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},n.prototype.getPreviousNode=function(n){for(n=n.previousElementSibling;n&&"\n"===n.textContent;null)n=n.previousElementSibling;return n},n.prototype.encode=function(n){var t=document.createElement("div");return t.innerText=n,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},n.prototype.saveMarker=function(n,t){var f,s,i=this.parent.querySelector("."+e),r=this.parent.querySelector("."+u),o;return(""===i.textContent&&sf.base.isNullOrUndefined(r)&&"tab"!==t&&(i.innerHTML=1===i.childNodes.length&&"BR"===i.childNodes[0].nodeName?"&#65279;&#65279;<br>":"&#65279;&#65279;"),this.hasClass(i,e)&&i.classList.length>1)?(o=this.createTagString("p",i,this.encode(i.textContent)),this.replaceWith(i,o),(i=this.parent.querySelector("."+e)).classList.remove(e),f=i.childNodes[0]):f=this.unWrap(i)[0],this.hasClass(r,u)&&r.classList.length>1?(o=this.createTagString("p",r,this.encode(r.textContent)),this.replaceWith(r,o),(r=this.parent.querySelector("."+u)).classList.remove(u),s=r.childNodes[0]):s=r?this.unWrap(r)[0]:f,n.startContainer=n.getNodeArray(f,!0),n.endContainer=n.getNodeArray(s,!1),n},n.prototype.marker=function(n,t){return'<span class="'+n+'">'+t+"<\/span>"},n.prototype.setMarker=function(n){var r=n.range,s=r.startContainer.childNodes,i=(s.length>1&&"TABLE"===s[0].nodeName?function(n){var t=n;do t.childNodes.length>0&&(t=t.childNodes[0]);while(t.childNodes.length>0);return t}(s[r.startOffset+1]):s[r.startOffset>0?r.startOffset-1:r.startOffset])||r.startContainer,f=r.endContainer.childNodes[r.endOffset>0?r.endOffset-1:r.endOffset]||r.endContainer,h;if(i.nodeType===Node.ELEMENT_NODE&&f.nodeType===Node.ELEMENT_NODE&&(i.contains(f)||f.contains(i))&&(h=i.contains(f)?i:f,h.nodeType!==Node.TEXT_NODE)){for(var c=[],o=[],t=h;h.contains(t);null)c.indexOf(t)<0&&t.childNodes&&t.childNodes.length?(c.push(t),t=t.childNodes[0]):t.nextSibling?t=t.nextSibling:t.parentNode&&(t=t.parentNode,c.push(t)),o.indexOf(t)<0&&(t.nodeType===Node.TEXT_NODE||p.indexOf(t.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===t.tagName||"IMG"===t.tagName))&&o.push(t);o.length&&(i=i.contains(f)?o[0]:i,f=o[o.length-1])}i!==f?(i.nodeType!==Node.TEXT_NODE&&("BR"===i.tagName&&p.indexOf(i.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===i.tagName)?(this.replaceWith(i,this.marker(e,this.encode(i.textContent))),r.startContainer.querySelector("."+e).appendChild(i)):this.replaceWith(i,this.marker(e,this.encode(i.textContent))),f.nodeType!==Node.TEXT_NODE&&"BR"===f.tagName&&p.indexOf(f.parentNode.tagName.toLocaleLowerCase())>=0?(this.replaceWith(f,this.marker(u,this.encode(f.textContent))),r.endContainer.querySelector("."+u).appendChild(f)):this.ensureSelfClosingTag(f,u,r)):this.ensureSelfClosingTag(i,e,r)},n.prototype.ensureSelfClosingTag=function(n,t,i){var s=!1,f,o,r,e,h;if(3===n.nodeType)this.replaceWith(n,this.marker(t,this.encode(n.textContent)));else if("BR"===n.tagName)this.replaceWith(n,this.marker(t,this.encode(n.textContent))),i.startContainer.querySelector("."+t).appendChild(n);else{if("IMG"===n.tagName&&(f=document.createElement("p"),n.parentElement.insertBefore(f,n),f.appendChild(n),n=f.children[0]),"TABLE"===n.tagName)if(s=!0,""===n.textContent)o=n.querySelectorAll("td"),n=o[o.length-1],n=sf.base.isNullOrUndefined(n.childNodes[0])?n:n.childNodes[0];else{for(r=n.lastChild;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;n=r}for(e=0;e<di.length;e++)n=n.tagName!==di[e]||s?n:n.parentNode;3===n.nodeType&&"#text"===n.nodeName?this.replaceWith(n,this.marker(t,this.encode(n.textContent))):"BR"===n.nodeName?(this.replaceWith(n,this.marker(u,this.encode(n.textContent))),i.endContainer.querySelector("."+u).appendChild(n)):(h=this.marker(t,""),sf.base.append([this.parseHTMLFragment(h)],n))}},n.prototype.createTempNode=function(n){var r=n.textContent,i,f,t;return"BR"===n.tagName?(i="<p><\/p>",f=n.parentNode,p.indexOf(f.tagName.toLocaleLowerCase())>=0&&(n=this.wrap(n,this.parseHTMLFragment(i)))):(n.nodeType!==Node.TEXT_NODE&&(n.classList.contains(e)||n.classList.contains(u))||r.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||r.length&&r.indexOf("\n")<0)&&(i="<p><\/p>",t=n,n=this.wrap(n,this.parseHTMLFragment(i)),t.nodeType===Node.ELEMENT_NODE&&t.firstChild&&"BR"===t.firstChild.nodeName&&(t.classList.contains(e)||t.classList.contains(u))||!n.nextElementSibling||"BR"!==n.nextElementSibling.tagName||n.appendChild(n.nextElementSibling)),n},n.prototype.getImageTagInSelection=function(){var n=this.getSelection();return this.isEditorArea()&&n.rangeCount?n.focusNode.querySelectorAll("img"):null},n.prototype.blockNodes=function(){var t=[],y=this.getSelection(),c,h,a,o,n,f,v;if(this.isEditorArea()&&y.rangeCount)for(c=this.getRangePoint(),h=0;h<c.length;h++){var r=void 0,s=c[h],i=this.getSelectedNode(s.startContainer,s.startOffset),l=this.getSelectedNode(s.endContainer,s.endOffset);for((this.isBlockNode(i)&&t.indexOf(i)<0&&t.push(i),(r=this.blockParentNode(i))&&t.indexOf(r)<0)&&(p.indexOf(r.tagName.toLocaleLowerCase())>=0&&("BR"===i.tagName||i.nodeType===Node.TEXT_NODE||i.classList.contains(e)||i.classList.contains(u))?(a=i.previousSibling&&i.previousSibling.nodeType===Node.TEXT_NODE?i.previousSibling:i,i.nextSibling||i.previousSibling||"BR"!==i.tagName?t.push(this.createTempNode(a)):t.push(a)):t.push(r)),o=[],n=i;n!==l&&n!==this.parent;null)o.indexOf(n)<0&&n.childNodes&&n.childNodes.length?(o.push(n),n=n.childNodes[0]):n&&8!==n.nodeType&&("BR"===n.tagName||n.nodeType===Node.TEXT_NODE&&""!==n.textContent.trim()||n.nodeType!==Node.TEXT_NODE&&(n.classList.contains(e)||n.classList.contains(u)))&&p.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0?n=this.createTempNode(n):n.nextSibling&&8!==n.nextSibling.nodeType&&("BR"===n.nextSibling.tagName||n.nextSibling.nodeType===Node.TEXT_NODE||n.nextSibling.classList.contains(e)||n.nextSibling.classList.contains(u))&&p.indexOf(n.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?n=this.createTempNode(n.nextSibling):n.nextSibling?n=n.nextSibling:n.parentNode&&(n=n.parentNode,o.push(n)),t.indexOf(n)<0&&n.nodeType===Node.ELEMENT_NODE&&p.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0&&(n.classList.contains(e)||n.classList.contains(u))&&t.push(this.createTempNode(n)),this.isBlockNode(n)&&this.ignoreTableTag(n)&&o.indexOf(n)<0&&t.indexOf(n)<0&&(n!==l||s.endOffset>0)&&t.push(n),"IMG"===n.nodeName&&"true"===n.parentElement.contentEditable&&t.push(n);(r=this.blockParentNode(l))&&this.ignoreTableTag(r)&&t.indexOf(r)<0&&!sf.base.isNullOrUndefined(r.previousElementSibling)&&"IMG"!==r.previousElementSibling.tagName&&t.push(r)}for(f=t.length-1;f>0;f--)if((o=this.nodeFinds(t[f],t)).length){if(v=t[f].querySelectorAll("ul, ol"),"LI"===t[f].tagName&&v.length>0)continue;t.splice(f,1)}return t},n.prototype.ignoreTableTag=function(n){return!(ot.indexOf(n.tagName.toLocaleLowerCase())>=0)},n}(),wr=function(){function n(n){this.parent=n;this.domNode=this.parent.domNode;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this);this.parent.observer.on("keydown-handler",this.keyDownHandler,this);this.parent.observer.on("actionBegin",this.spaceKeyAction,this)},n.prototype.testList=function(n){var i=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],r=sf.base.isNullOrUndefined(n)?null:n.innerText.trim().split(".")[0]+".",t;if(!sf.base.isNullOrUndefined(r))for(t=0;t<i.length;t++)if(i[t].test(r))return!0;return!1},n.prototype.testCurrentList=function(n){var i=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/],t;if(!sf.base.isNullOrUndefined(n.startContainer.textContent.slice(0,n.startOffset)))for(t=0;t<i.length;t++)if(i[t].test(n.startContainer.textContent.replace(/\u200B/g,"").slice(0,n.startOffset).trim()))return!0;return!1},n.prototype.spaceList=function(n){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var u=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),i=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),u.previousElementSibling),r=u.nextElementSibling,f=sf.base.isNullOrUndefined(i)?null:i.innerText.trim().substring(0,1),e=sf.base.isNullOrUndefined(r)?null:r.innerText.trim().substring(0,1),o=this.testCurrentList(t),s=this.testList(i),h=this.testList(r);s||h||"*"===f||"*"===e||(o?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:n.callBack}),n.event.preventDefault()):"*"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()&&"-"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()||(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:n.callBack}),n.event.preventDefault()))},n.prototype.enterList=function(n){var i=this.parent.nodeSelection.getRange(this.parent.currentDocument),t="LI"===i.startContainer.nodeName?i.startContainer:i.startContainer.parentElement.closest("LI"),f="LI"===i.endContainer.nodeName?i.endContainer:i.endContainer.parentElement.closest("LI"),r,e,u;sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(f)||t!==f||"LI"!==t.tagName||""!==t.textContent.trim()||(65279===t.textContent.charCodeAt(0)&&(t.textContent=""),r=t.parentElement,sf.base.isNullOrUndefined(r.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(r.parentElement.closest("OL"))&&(sf.base.isNullOrUndefined(t.nextElementSibling)||(e=this.parent.domNode.blockParentNode(t),this.parent.nodeCutter.GetSpliceNode(i,e)),u=void 0,"DIV"===n.enterAction?(u=sf.base.createElement("div")).innerHTML="<br>":"P"===n.enterAction?(u=sf.base.createElement("p")).innerHTML="<br>":u=sf.base.createElement("br"),this.parent.domNode.insertAfter(u,r),n.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,u,0),""===r.textContent?sf.base.detach(r):sf.base.detach(t)))},n.prototype.backspaceList=function(){var r=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.domNode.getSelectedNode(r.startContainer,r.startOffset),i=this.parent.domNode.getSelectedNode(r.endContainer,r.endOffset),t;if((n="BR"===n.nodeName?n.parentElement:n)===(i="BR"===i.nodeName?i.parentElement:i)&&!sf.base.isNullOrUndefined(sf.base.closest(n,"li"))&&(""===n.textContent.trim()&&65279===n.textContent.charCodeAt(0)||1===n.textContent.length&&8203===n.textContent.charCodeAt(0))&&(n.textContent=""),n===i&&""===n.textContent){if("LI"===n.parentElement.tagName&&"LI"===i.parentElement.tagName)sf.base.detach(n);else if((n.closest("ul")||n.closest("ol"))&&(t=sf.base.isNullOrUndefined(n.closest("ul"))?n.closest("ol"):n.closest("ul")).firstElementChild===n&&!sf.base.isNullOrUndefined(t.children[1])&&("OL"===t.children[1].tagName||"UL"===t.children[1].tagName))if(t.tagName===t.children[1].tagName){for(;t.children[1].lastChild;)this.parent.domNode.insertAfter(t.children[1].lastChild,t.children[1]);sf.base.detach(t.children[1])}else t.parentElement.insertBefore(t.children[1],t)}else if(!(sf.base.isNullOrUndefined(n.firstChild)||"BR"!==n.firstChild.nodeName||sf.base.isNullOrUndefined(n.childNodes[1])||"UL"!==n.childNodes[1].nodeName&&"OL"!==n.childNodes[1].nodeName))if((t=sf.base.isNullOrUndefined(n.closest("ul"))?n.closest("ol"):n.closest("ul")).tagName===n.childNodes[1].nodeName){for(;n.childNodes[1].lastChild;)this.parent.domNode.insertAfter(n.children[1].lastChild,n);sf.base.detach(n.childNodes[1])}else t.parentElement.insertBefore(n.children[1],t)},n.prototype.keyDownHandler=function(n){var t;if(13===n.event.which&&this.enterList(n),32===n.event.which&&this.spaceList(n),8===n.event.which&&this.backspaceList(n),46===n.event.which&&"delete"===n.event.action){var o=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,s=t.startContainer,h=t.endContainer,u=3===s.nodeType?s.parentElement:s,e=3===h.nodeType?h.parentElement:h;"UL"!==o.nodeName&&"OL"!==o.nodeName||u===e||sf.base.isNullOrUndefined(sf.base.closest(u,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(u,"ol"))||sf.base.isNullOrUndefined(sf.base.closest(e,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(e,"ol"))||o.lastElementChild!==sf.base.closest(e,"li")||t.collapsed||sf.base.detach(o)}if(9===n.event.which){t=this.parent.nodeSelection.getRange(this.parent.currentDocument);n.event.action&&"indent"===n.event.action||(this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument));var i=void 0,l=t.startOffset,a=t.endOffset;if((u=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset))===(e=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset))&&("BR"===u.nodeName||"#text"===u.nodeName)&&p.indexOf(u.parentNode.tagName.toLocaleLowerCase())>=0)return;n.event.action&&"indent"===n.event.action||this.domNode.setMarker(this.saveSelection);i=this.domNode.blockNodes();for(var f=[],c=!0,r=0;r<i.length;r++)"LI"===i[r].parentNode.tagName?f.push(i[r].parentNode):"LI"===i[r].tagName&&"P"!==i[r].childNodes[0].tagName&&"OL"!==i[r].childNodes[0].tagName&&"UL"!==i[r].childNodes[0].tagName&&f.push(i[r]);f.length>1||f.length&&(0===l&&0===a||n.ignoreDefault)?(n.event.preventDefault(),n.event.stopPropagation(),this.currentAction=this.getAction(f[0]),n.event.shiftKey?(this.revertList(f),this.revertClean()):c=this.nestedList(f),c&&(this.cleanNode(),this.parent.editableElement.focus()),n.event.action&&"indent"===n.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),n.callBack&&n.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:n.event}))):n.event.action&&"indent"===n.event.action||(n.event&&n.event.shiftKey&&"Tab"===n.event.key&&(n.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,n.event.action),this.saveSelection.restore())}else switch(n.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:n.callBack});n.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:n.callBack});n.event.preventDefault()}},n.prototype.spaceKeyAction=function(n){32===n.event.which&&this.spaceList(n)},n.prototype.getAction=function(n){return"OL"===n.parentNode.nodeName?"OL":"UL"},n.prototype.revertClean=function(){for(var n,t,r,u=this.parent.editableElement.querySelectorAll("ul, ol"),i=0;i<u.length;i++)if(n=u[i].querySelectorAll("ul, ol"),n.length>0)for(t=0;t<n.length;t++)r=n[t].previousSibling,r&&"LI"===r.tagName&&r.appendChild(n[t])},n.prototype.noPreviousElement=function(n){var f,i,h=n.querySelectorAll("ol, ul"),o=n.querySelectorAll("li"),s=this.domNode.contents(o[0])[0],t,e,r,u;if(o.length>0&&("OL"===s.nodeName||"UL"===s.nodeName)?f=o[0]:i=h[0],f)for(t=this.domNode.contents(n)[0];t&&!this.domNode.isList(t);null)e=t.nextSibling,sf.base.prepend([t],f),sf.base.setStyleAttribute(n,{"list-style-type":"none"}),sf.base.setStyleAttribute(f,{"list-style-type":""}),t=e;else if(i){for(r=sf.base.createElement("li"),sf.base.prepend([r],i),t=this.domNode.contents(n)[0];t&&!this.domNode.isList(t);null)e=t.nextSibling,r.appendChild(t),t=e;sf.base.prepend([i],n.parentNode);sf.base.detach(n);u=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([u],i.parentNode);sf.base.append([i],u)}else u=sf.base.createElement("li",{styles:"list-style-type: none;"}),sf.base.prepend([u],n.parentNode),r=sf.base.createElement(n.parentNode.tagName),sf.base.prepend([r],u),sf.base.append([n],r)},n.prototype.nestedList=function(n){for(var r,u,i,s,l,e=!1,t=0;t<n.length;t++)if(r=this.domNode.getPreviousNode(n[t]),r){e=!0;var o=void 0,f=void 0,a=n[t].querySelectorAll("ol, ul"),h=n[t].querySelectorAll("li"),c=this.domNode.contents(h[0])[0];if(h.length>0&&("OL"===c.nodeName||"UL"===c.nodeName)?f=h[0]:o=a[0],o){for(u=sf.base.createElement("li"),sf.base.prepend([u],o),i=this.domNode.contents(n[t])[0];i&&!this.domNode.isList(i);null)s=i.nextSibling,u.appendChild(i),i=s;sf.base.append([o],r);sf.base.detach(n[t])}else if(f){if("LI"===r.tagName){for(i=this.domNode.contents(n[t])[0];i&&!this.domNode.isList(i);null)s=i.nextSibling,sf.base.prepend([i],f),sf.base.setStyleAttribute(n[t],{"list-style-type":"none"}),sf.base.setStyleAttribute(f,{"list-style-type":""}),i=s;sf.base.append([f.parentNode],r);sf.base.detach(n[t])}}else"LI"===r.tagName&&(u=sf.base.createElement(n[t].parentNode.tagName),sf.base.append([u],r),sf.base.append([n[t]],u))}else l=n[t],e=!0,this.noPreviousElement(l);return e},n.prototype.applyListsHandler=function(n){var l=this.parent.nodeSelection.getRange(this.parent.currentDocument),r,t,i,c,o,u,f,e;if(this.saveSelection=this.parent.nodeSelection.save(l,this.parent.currentDocument),this.currentAction=n.subCommand,this.currentAction=n.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection),r=this.domNode.blockNodes(),"BR"===n.enterAction){this.setSelectionBRConfig();var a=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),s=this.parent.nodeSelection.getSelectionNodes(a),h=[];for(0===s.length&&s.push(r[0]),t=0;t<s.length;t++){for(i=s[t],c=void 0;!this.parent.domNode.isBlockNode(i)&&i!==this.parent.editableElement;)c=i,i=i.parentElement;this.parent.domNode.isBlockNode(i)&&i===this.parent.editableElement&&h.push(c)}for(t=0;t<h.length;t++)if(!this.parent.domNode.isBlockNode(h[t])){for(o=i=h[t];i===this.parent.editableElement;)o=i,i=i.parentElement;for(u=void 0,this.parent.domNode.isBlockNode(o.parentElement)&&o.parentElement===this.parent.editableElement?(u=sf.base.createElement("p"),o.parentElement.insertBefore(u,o),u.appendChild(o)):u=o,f=u.previousSibling;!sf.base.isNullOrUndefined(f)&&"BR"!==f.nodeName&&!this.parent.domNode.isBlockNode(f);)u.firstChild.parentElement.insertBefore(f,u.firstChild),f=u.previousSibling;for(sf.base.isNullOrUndefined(f)||"BR"!==f.nodeName||sf.base.detach(f),e=u.nextSibling;!sf.base.isNullOrUndefined(e)&&"BR"!==e.nodeName&&!this.parent.domNode.isBlockNode(e);)u.appendChild(e),e=u.nextSibling;sf.base.isNullOrUndefined(e)||"BR"!==e.nodeName||sf.base.detach(e)}this.setSelectionBRConfig();r=this.parent.domNode.blockNodes()}for(t=0;t<r.length;t++)"TABLE"!==r[t].tagName||l.collapsed||r.splice(t,1),r.length>0&&"LI"!==r[t].tagName&&"LI"===r[t].parentNode.tagName&&(r[t]=r[t].parentNode);this.applyLists(r,this.currentAction,n.selector,n.item);n.callBack&&n.callBack({requestType:this.currentAction,event:n.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},n.prototype.setSelectionBRConfig=function(){var n=this.parent.editableElement.querySelector("."+e),t=this.parent.editableElement.querySelector("."+u);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,n,t,0,0)},n.prototype.applyLists=function(n,t,i,r){var u,f;if(this.isRevert(n,t)&&sf.base.isNullOrUndefined(r))this.revertList(n),this.removeEmptyListElements();else for(this.checkLists(n,t,r),u=0;u<n.length;u++)if(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(r.listStyle)||("listImage"===r.listStyle?sf.base.setStyleAttribute(n[u],{"list-style-image":r.listImage}):(sf.base.setStyleAttribute(n[u],{"list-style-image":"none"}),sf.base.setStyleAttribute(n[u],{"list-style-type":r.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===n[u].getAttribute("contenteditable")&&1===n[u].childNodes.length&&"TABLE"===n[u].childNodes[0].nodeName)f=document.createElement(t),f.innerHTML="<li><br/><\/li>",n[u].appendChild(f);else if("LI"!==n[u].tagName&&sf.base.isNullOrUndefined(r)){var e="<"+t+">",o="<\/"+t+">",s="li"+("IMG"===n[u].tagName?"":this.domNode.attributes(n[u])),h="p"===n[u].tagName.toLowerCase()?n[u].innerHTML:n[u].outerHTML,c=e+this.domNode.createTagString(s,null,h)+o;this.domNode.replaceWith(n[u],c)}else sf.base.isNullOrUndefined(r)||"LI"===n[u].tagName||(e="<"+t+("IMG"===n[u].tagName?"":this.domNode.attributes(n[u]))+">",o="<\/"+t+">",s="li",h="p"===n[u].tagName.toLowerCase()?n[u].innerHTML:n[u].outerHTML,c=e+this.domNode.createTagString(s,null,h)+o,this.domNode.replaceWith(n[u],c));this.cleanNode();this.parent.editableElement.focus();v()&&nt(this.parent.editableElement,i);this.saveSelection=this.domNode.saveMarker(this.saveSelection);this.saveSelection.restore()},n.prototype.removeEmptyListElements=function(){for(var t=this.parent.editableElement.querySelectorAll("ol, ul"),n=0;n<t.length;n++)""===t[n].textContent.trim()&&sf.base.detach(t[n])},n.prototype.isRevert=function(n,t){for(var r=!0,i=0;i<n.length;i++){if("LI"!==n[i].tagName)return!1;n[i].parentNode.tagName!==t&&(r=!1)}return r},n.prototype.checkLists=function(n,t,i){for(var r,e,o,s,u=[],f=0;f<n.length;f++)r=n[f].parentNode,sf.base.isNullOrUndefined(i)||"LI"!==n[f].tagName||sf.base.isNullOrUndefined(i.listStyle)||("listImage"===i.listStyle?sf.base.setStyleAttribute(r,{"list-style-image":i.listImage}):(sf.base.setStyleAttribute(r,{"list-style-image":"none"}),sf.base.setStyleAttribute(r,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===n[f].tagName&&r.tagName!==t&&u.indexOf(r)<0||"LI"===n[f].tagName&&r.tagName===t&&u.indexOf(r)<0&&null!==i)&&u.push(r);for(e=u.length-1;e>=0;e--)o=u[e],s="<"+t.toLowerCase()+" "+this.domNode.attributes(o)+">"+o.innerHTML+"<\/"+t.toLowerCase()+">",this.domNode.replaceWith(u[e],s)},n.prototype.cleanNode=function(){for(var n,u,i,r=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<r.length;t++)if(n=r[t],this.domNode.isList(n.previousElementSibling)&&this.domNode.openTagString(n)===this.domNode.openTagString(n.previousElementSibling)){for(u=this.domNode.contents(n),i=0;i<u.length;i++)n.previousElementSibling.appendChild(u[i]);n.parentNode.removeChild(n)}},n.prototype.findUnSelected=function(n,t){var r,s,h,e,a,c,u;if((n=n.slice().reverse()).length>0){var l=[],i=[],f=[],o=[];for(f=t[t.length-1].childNodes,r=0;r<f.length;r++)if(("OL"===f[r].tagName||"UL"===f[r].tagName)&&(s=f[r].querySelectorAll("li"),s.length>0))for(h=0;h<s.length;h++)o.push(s[h]);for(e=0;e<o.length;e++){for(a=0,c=0;c<n.length;c++)o[e].contains(n[c])||(a+=1);a===n.length&&i.push(o[e])}if(i.length>0)for(u=0;u<i.length;u++)"OL"!==this.domNode.contents(i[u])[0].nodeName&&"UL"!==this.domNode.contents(i[u])[0].nodeName&&l.push(i[u]);l.length>0&&this.nestedList(l)}},n.prototype.revertList=function(n){for(var c,l,i,r,f,o,p,w,d,y,s,h,a,b,k,v=[],t=n.length-1;t>=0;t--)for(c=t-1;c>=0;c--)if(n[c].contains(n[t])||n[c]===n[t]){v.push(n[t]);n.splice(t,1);break}for(this.findUnSelected(v,n),l=[],t=0;t<n.length;t++)i=n[t],3===this.domNode.contents(i)[0].nodeType&&0===this.domNode.contents(i)[0].textContent.trim().length&&sf.base.detach(this.domNode.contents(i)[0]),r=n[t].parentNode,f=i.getAttribute("class"),0===v.length&&(o=n[t].querySelectorAll("ul, ol")[0],o&&o.querySelectorAll("li")&&(p=sf.base.createElement(o.tagName),sf.base.append([p],o.parentNode),w=sf.base.createElement("li",{styles:"list-style-type: none;"}),sf.base.append([w],p),sf.base.append([o],w))),(i.parentNode.insertBefore(this.closeTag(r.tagName),i),"LI"===r.parentNode.tagName)?i.parentNode.insertBefore(this.closeTag("LI"),i):(0===i.querySelectorAll(it.join(", ")).length?(d="<p"+(sf.base.isNullOrUndefined(f)?' class="e-rte-wrap-inner"':' class="'+f+' e-rte-wrap-inner"')+this.domNode.attributes(r)+"><\/p>",this.domNode.wrapInner(i,this.domNode.parseHTMLFragment(d))):3===this.domNode.contents(i)[0].nodeType?(y=this.domNode.createTagString("p",r,this.parent.domNode.encode(this.domNode.contents(i)[0].textContent)),this.domNode.replaceWith(this.domNode.contents(i)[0],y)):this.domNode.contents(i)[0].classList.contains(e)||this.domNode.contents(i)[0].classList.contains(u)?(y=this.domNode.createTagString("p",r,this.domNode.contents(i)[0].outerHTML),this.domNode.replaceWith(this.domNode.contents(i)[0],y)):(s=i.firstChild,f=s.getAttribute("class"),sf.base.attributes(s,this.domNode.rawAttributes(r)),f&&s.getAttribute("class")&&sf.base.attributes(s,{"class":f+" "+s.getAttribute("class")})),sf.base.append([this.openTag("LI")],i),sf.base.prepend([this.closeTag("LI")],i)),this.domNode.insertAfter(this.openTag(r.tagName),i),"LI"===r.parentNode.tagName&&(r=r.parentNode.parentNode),l.indexOf(r)<0&&l.push(r);for(t=0;t<l.length;t++)h=l[t],a=h.innerHTML,a=(a=a.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"<\/$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(h)+">"),this.domNode.replaceWith(h,this.domNode.openTagString(h)+a.trim()+this.domNode.closeTagString(h));for(b=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<b.length;t++)sf.base.detach(b[t]);for(k=this.parent.editableElement.querySelectorAll("li:empty"),t=0;t<k.length;t++)sf.base.detach(k[t])},n.prototype.openTag=function(n){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+n.toLowerCase()+'"><\/span>')},n.prototype.closeTag=function(n){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+n.toLowerCase()+'"><\/span>')},n}(),r=function(){function n(){}return n.WrapBefore=function(n,t,i){return t.innerText=n.textContent,i?this.AppendBefore(t,n,!0):this.AppendBefore(t,n),n.parentNode&&n.parentNode.removeChild(n),t.childNodes[0]},n.Wrap=function(n,t){return this.AppendBefore(t,n),t.appendChild(n),n},n.unwrap=function(n){for(var t=n.parentNode,i=[];n.firstChild;null)i.push(t.insertBefore(n.firstChild,n));return t.removeChild(n),i},n.AppendBefore=function(n,t,i){return t.parentNode?i?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.insertBefore(n,t):t},n}(),ut=function(){function n(){this.enterAction="P";this.position=-1;this.nodeSelection=new a}return n.prototype.GetSpliceNode=function(n,t){return t=this.SplitNode(n,t,!0),t=this.SplitNode(n,t,!1)},n.prototype.SplitNode=function(n,t,i){var o,u;if(t){var e=n.cloneRange(),f=t.parentNode,s=this.nodeSelection.getIndex(t);return e.collapse(i),i?e.setStartBefore(t):e.setEndAfter(t),u=e.extractContents(),i?(t=f.childNodes[s],(u=this.spliceEmptyNode(u,!1))&&u.childNodes.length>0)&&(!(1!==u.childNodes.length||"IMG"===u.childNodes[0].nodeName||!this.isImgElm(u)||""!==u.textContent)||(t?r.AppendBefore(u,t):(f.appendChild(u),(o=document.createElement("div")).innerHTML="&#65279;&#65279;",t=o.firstChild,f.appendChild(t)))):(t=f.childNodes.length>1?f.childNodes[s]:f.childNodes[0],(u=this.spliceEmptyNode(u,!0))&&u.childNodes.length>0)&&(!(1!==u.childNodes.length||"IMG"===u.childNodes[0].nodeName||!this.isImgElm(u)||""!==u.textContent.trim())||(t?r.AppendBefore(u,t,!0):(f.appendChild(u),(o=document.createElement("div")).innerHTML="&#65279;&#65279;",f.insertBefore(o.firstChild,f.firstChild),t=f.firstChild))),t}return null},n.prototype.isImgElm=function(n){var r=!0,t,i;if(1===n.childNodes.length&&"IMG"!==n.childNodes[0].nodeName)for(t=n.childNodes[0],i=0;!sf.base.isNullOrUndefined(t.childNodes)&&i<t.childNodes.length;i++)"IMG"===t.childNodes[i].nodeName&&(r=!1);else r=!0;return r},n.prototype.spliceEmptyNode=function(n,t){var i;return(i=1===n.childNodes.length&&"#text"===n.childNodes[0].nodeName&&""===n.childNodes[0].textContent||""===n.textContent?-1:n.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(n.childNodes[i],t):i>-1?this.spliceEmptyNode(n.childNodes[0],t):3!==n.nodeType&&11!==n.nodeType&&n.parentNode.removeChild(n),n},n.prototype.GetCursorStart=function(n,t,i){for(var u=(n=i?n:n.reverse())[0],r=0;r<n.length&&(i?n[r]<t:n[r]>=t);r++)u=n[r];return u},n.prototype.GetCursorRange=function(n,t,i){var e=n.createRange(),r=[],f,u,o;for(r.push(0),f=this.TrimLineBreak(i.data),u=f.indexOf(" ",0);-1!==u;)r.indexOf(u)<0&&r.push(u),new RegExp("\\s").test(f[u-1])&&r.indexOf(u-1)<0&&r.push(u-1),new RegExp("\\s").test(f[u+1])&&r.push(u+1),u=f.indexOf(" ",u+1);return(r.push(f.length),r.indexOf(t.startOffset)>=0||r.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(f[0]))||r[r.length-1]-1===t.startOffset)?(e=t,this.position=1):(o=this.GetCursorStart(r,t.startOffset,!0),this.position=t.startOffset-o,e.setStart(t.startContainer,o),e.setEnd(t.startContainer,this.GetCursorStart(r,t.startOffset,!1))),e},n.prototype.GetCursorNode=function(n,t,i){return this.GetSpliceNode(this.GetCursorRange(n,t,i),i)},n.prototype.TrimLineBreak=function(n){return n.replace(/(\r\n\t|\n|\r\t)/gm," ")},n}(),br=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this);this.parent.observer.on("keyup-handler",this.onKeyUp,this);this.parent.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.getParentNode=function(n){for(;n.parentNode&&n.parentNode!==this.parent.editableElement;null)n=n.parentNode;return n},n.prototype.onKeyUp=function(n){var f=this.parent.nodeSelection.getRange(this.parent.currentDocument),u=f.endContainer,t=u.lastChild,i,r;13===n.event.which&&f.startContainer===u&&3!==u.nodeType&&(i=sf.base.createElement("p"),(i.innerHTML="<br>",!sf.base.isNullOrUndefined(t)&&t&&"BR"===t.nodeName&&t.previousSibling&&"TABLE"===t.previousSibling.nodeName)?(u.replaceChild(i,t),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0)):(r=this.parent.nodeSelection.getSelectionNodeCollectionBr(f)[0],!sf.base.isNullOrUndefined(r)&&"BR"===r.nodeName&&r.previousSibling&&"TABLE"===r.previousSibling.nodeName&&(u.replaceChild(i,r),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0))))},n.prototype.onKeyDown=function(n){if(13===n.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,e=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,r=sf.base.closest(s,"pre"),u=sf.base.closest(e,"pre");if(!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(r.parentElement)&&"LI"===r.parentElement.tagName)return;if((sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(u)||!sf.base.isNullOrUndefined(r)&&sf.base.isNullOrUndefined(u))&&(n.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0)),13===n.event.which&&!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(u)){n.event.preventDefault();this.deleteContent(t);this.removeCodeContent(t);var f=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],o=t.startContainer.childNodes[t.endOffset-1],i=t.startContainer;if(sf.base.isNullOrUndefined(f)||sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(f.nextSibling)||"BR"!==f.nodeName||"BR"!==o.nodeName)if(8203===i.textContent.charCodeAt(0)&&1===i.textContent.length||0===i.textContent.length){for(;"PRE"!==i.parentElement.nodeName&&(1===i.textContent.length||0===i.textContent.length);)i=i.parentElement;!sf.base.isNullOrUndefined(i.previousSibling)&&"BR"===i.previousSibling.nodeName&&sf.base.isNullOrUndefined(i.nextSibling)?this.paraFocus(i.parentElement):this.isNotEndCursor(r,t)}else this.isNotEndCursor(r,t);else this.paraFocus(t.startContainer,n.enterAction)}}},n.prototype.removeCodeContent=function(n){var t=new RegExp(String.fromCharCode(65279),"g"),i;sf.base.isNullOrUndefined(n.endContainer.textContent.match(t))||(i=65279===n.endContainer.textContent.charCodeAt(n.endOffset-1)?n.endOffset-2:n.endOffset,n.endContainer.textContent=n.endContainer.textContent.replace(t,""),""===n.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n.endContainer,i))},n.prototype.deleteContent=function(n){n.startContainer===n.endContainer&&n.startOffset===n.endOffset||n.deleteContents()},n.prototype.paraFocus=function(n,t){var i;"DIV"===t?(i=sf.base.createElement("div")).innerHTML="<br>":"BR"===t?i=sf.base.createElement("br"):(i=sf.base.createElement("p")).innerHTML="<br>";this.parent.domNode.insertAfter(i,n);this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0);sf.base.detach(n.lastChild)},n.prototype.isNotEndCursor=function(n,t){var f=new ut,e=t.startOffset===n.lastChild.textContent.length&&n.lastChild.textContent===t.startContainer.textContent,r,u,i;0===n.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)?(this.insertMarker(n,t),r=sf.base.createElement("br"),n.childNodes[t.endOffset].parentElement.insertBefore(r,n.childNodes[t.endOffset])):(u=f.SplitNode(t,n,!0),this.insertMarker(n,t),i=n.previousElementSibling,"PRE"===i.tagName&&(i.insertAdjacentHTML("beforeend","<br>"+u.innerHTML),sf.base.detach(n)));this.setCursorPosition(e,n)},n.prototype.setCursorPosition=function(n,t){var r=!1,i=this.parent.editableElement.querySelector(".tempSpan"),u=i.parentElement,f;(""===i.parentNode.textContent?r=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),n)?r?u===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),sf.base.detach(i)):this.focusSelectionParent(i,u):(f=sf.base.createElement("br"),this.parent.domNode.insertAfter(f,i),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),sf.base.detach(i)):r?this.focusSelectionParent(i,u):sf.base.detach(i)},n.prototype.focusSelectionParent=function(n,t){sf.base.detach(n);t.innerHTML="​";this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},n.prototype.insertMarker=function(n,t){var i=sf.base.createElement("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?n.childNodes[t.endOffset].parentElement.insertBefore(i,n.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},n.prototype.applyFormats=function(n){var a=this.parent.nodeSelection.getRange(this.parent.currentDocument),tt=!1,y,c,i,r,d,h,f,o,s,t,k,it,g,p,l;if(this.parent.editableElement!==a.endContainer||sf.base.isNullOrUndefined(this.parent.editableElement.children[a.endOffset-1])||"TABLE"!==this.parent.editableElement.children[a.endOffset-1].tagName||a.collapsed||(tt=!0),y=this.parent.nodeSelection.save(a,this.parent.currentDocument),this.parent.domNode.setMarker(y),c=this.parent.domNode.blockNodes(),"BR"===n.enterAction){this.setSelectionBRConfig();var rt=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),w=this.parent.nodeSelection.getSelectionNodes(rt),b=[];for(0===w.length&&w.push(c[0]),i=0;i<w.length;i++){for(r=w[i],d=void 0;!this.parent.domNode.isBlockNode(r)&&r!==this.parent.editableElement;)d=r,r=r.parentElement;this.parent.domNode.isBlockNode(r)&&r===this.parent.editableElement&&b.push(d)}for(i=0;i<b.length;i++)if(!this.parent.domNode.isBlockNode(b[i])){for(h=r=b[i];r===this.parent.editableElement;)h=r,r=r.parentElement;for(f=void 0,this.parent.domNode.isBlockNode(h.parentElement)&&h.parentElement===this.parent.editableElement?(f=sf.base.createElement("div"),h.parentElement.insertBefore(f,h),f.appendChild(h)):f=h,o=f.previousSibling;!sf.base.isNullOrUndefined(o)&&"BR"!==o.nodeName&&!this.parent.domNode.isBlockNode(o);)f.firstChild.parentElement.insertBefore(o,f.firstChild),o=f.previousSibling;for(sf.base.isNullOrUndefined(o)||"BR"!==o.nodeName||sf.base.detach(o),s=f.nextSibling;!sf.base.isNullOrUndefined(s)&&"BR"!==s.nodeName&&!this.parent.domNode.isBlockNode(s);)f.appendChild(s),s=f.nextSibling;sf.base.isNullOrUndefined(s)||"BR"!==s.nodeName||sf.base.detach(s)}this.setSelectionBRConfig();c=this.parent.domNode.blockNodes()}for(i=0;i<c.length;i++)t=void 0,k=void 0,("blockquote"===n.subCommand.toLowerCase()?(t=this.getParentNode(c[i]),k=this.parent.domNode.isList(t)||"TABLE"===t.tagName?t.outerHTML:t.innerHTML):k=(t=c[i]).innerHTML,n.subCommand.toLowerCase()===t.tagName.toLowerCase()&&("pre"!==n.subCommand.toLowerCase()||!sf.base.isNullOrUndefined(n.exeValue)&&"dropDownSelect"===n.exeValue.name)||sf.base.isNullOrUndefined(t.parentNode)||"TABLE"===t.tagName&&"pre"===n.subCommand.toLowerCase())||(this.cleanFormats(t,n.subCommand),it="pre"===n.subCommand.toLowerCase()&&"pre"===t.tagName.toLowerCase()?"p":n.subCommand,g=this.parent.domNode.createTagString(it,t,k.replace(/>\s+</g,"><")),"LI"===t.tagName?(t.innerHTML="",t.insertAdjacentHTML("beforeend",g)):this.parent.domNode.replaceWith(t,g));this.preFormatMerge();p=this.parent.editableElement.querySelector("."+e);l=this.parent.editableElement.querySelector("."+u);sf.base.isNullOrUndefined(p)||sf.base.isNullOrUndefined(l)||(p=p.lastChild,l=l.lastChild);y=this.parent.domNode.saveMarker(y,null);v()&&nt(this.parent.editableElement,n.selector);tt?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,p,l,0,l.textContent.length):y.restore();n.callBack&&n.callBack({requestType:n.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},n.prototype.setSelectionBRConfig=function(){var n=this.parent.editableElement.querySelector("."+e),t=this.parent.editableElement.querySelector("."+u);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,n,t,0,0)},n.prototype.preFormatMerge=function(){var t=this.parent.editableElement.querySelectorAll("PRE"),n,i;if(!sf.base.isNullOrUndefined(t))for(n=0;n<t.length;n++)i=t[n].previousElementSibling,sf.base.isNullOrUndefined(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+t[n].innerHTML),sf.base.detach(t[n]))},n.prototype.cleanFormats=function(n,t){var r=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"],i;for(t=t.toLowerCase(),i=0;i<r.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;i++)n.style.removeProperty(r[i])},n}(),w=function(){function n(){}return n.Insert=function(n,t,i,u){var f,p,c,l,b,d,w;"string"==typeof t?((p=document.createElement("div")).innerHTML=t,f=u?p:p.firstChild):u&&(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.classList)||!t.classList.contains("pasteContent"))?((p=document.createElement("div")).appendChild(t),f=p):f=t;var s=new a,k=new ut,e=s.getRange(n),g=e.startOffset===e.endOffset&&0===e.startOffset&&e.startContainer===e.endContainer,nt=e.collapsed,h=this.getNodeCollection(e,s,f),v="table"===f.nodeName.toLowerCase()?this.closestEle(h[0].parentNode,i):h[0];if(u||!sf.base.isNullOrUndefined(f)&&!sf.base.isNullOrUndefined(f.classList)&&f.classList.contains("pasteContent"))this.pasteInsertHTML(h,f,e,s,k,n,nt,v,i);else if(i!==e.startContainer&&(!nt&&(v.nodeType!==Node.ELEMENT_NODE||-1===ot.indexOf(v.tagName.toLocaleLowerCase()))||"table"===f.nodeName.toLowerCase()&&v&&-1===ot.indexOf(v.tagName.toLocaleLowerCase()))){var y=k.GetSpliceNode(e,v),tt=y.previousSibling,o=y.parentNode;for(1===h.length||"table"===f.nodeName.toLowerCase()&&0===y.childElementCount?(s.setSelectionContents(n,y),e=s.getRange(n)):(c=k.GetSpliceNode(e,h[h.length-1].parentElement),c=sf.base.isNullOrUndefined(c)?y:c,s.setSelectionText(n,y,c,0,3===c.nodeType?c.textContent.length:c.childNodes.length),e=s.getRange(n)),e.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i),l=0;l<h.length;l++)if(3!==h[l].nodeType&&null!=h[l].parentNode){if("IMG"===h[l].nodeName)continue;h[l].parentNode.removeChild(h[l])}if(tt)r.AppendBefore(f,tt,!0);else{for(b=null;o!==i&&o.firstChild&&""===o.textContent.trim();)b=o,o=o.parentNode;null!==b&&(o=b);o.firstChild&&(o!==i||"TABLE"===f.nodeName&&g&&o===e.startContainer&&o===e.endContainer)?""===o.textContent.trim()&&o!==i?(r.AppendBefore(f,o,!1),sf.base.detach(o)):r.AppendBefore(f,o.firstChild,!1):o.appendChild(f)}"IMG"===f.nodeName?this.imageFocus(f,s,n):3!==f.nodeType?s.setSelectionText(n,f,f,0,f.childNodes.length):s.setSelectionText(n,f,f,0,f.textContent.length)}else(e.deleteContents(),g&&""===e.startContainer.textContent&&"BR"!==e.startContainer.nodeName&&(e.startContainer.innerHTML=""),sf.base.Browser.isIE)?(d=n.createDocumentFragment(),d.appendChild(f),e.insertNode(d)):1===e.startContainer.nodeType&&"hr"===e.startContainer.nodeName.toLowerCase()&&"hr"===e.endContainer.nodeName.toLowerCase()?(w=e.startContainer.nextElementSibling,w&&(w.querySelector("br")&&sf.base.detach(w.querySelector("br")),w.appendChild(f))):"BR"===e.startContainer.nodeName?e.startContainer.parentElement.insertBefore(f,e.startContainer):e.insertNode(f),3!==f.nodeType&&f.childNodes.length>0?s.setSelectionText(n,f,f,1,1):"IMG"===f.nodeName?this.imageFocus(f,s,n):3!==f.nodeType?s.setSelectionContents(n,f):s.setSelectionText(n,f,f,f.textContent.length,f.textContent.length)},n.pasteInsertHTML=function(n,t,i,r,u,f,e,o,s){var c,p,w,l,et=i.startOffset===i.endOffset&&i.startContainer===i.endContainer,b,k,a,d,y,h,st,v,ut,ft;for(et&&i.startContainer===s&&""===s.textContent&&(b=this.getImmediateBlockNode(n[n.length-1],s),r.setSelectionText(f,b,b,0,0),i=r.getRange(f)),s!==i.startContainer&&(!e&&(o.nodeType!==Node.ELEMENT_NODE||-1===ot.indexOf(o.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&o&&-1===ot.indexOf(o.tagName.toLocaleLowerCase()))&&(l=u.GetSpliceNode(i,o),p=sf.base.isNullOrUndefined(l.previousSibling)?l.parentNode.previousSibling:l.previousSibling,1===n.length?(r.setSelectionContents(f,l),i=r.getRange(f),w=!0):(c=u.GetSpliceNode(i,n[n.length-1].parentElement),c=sf.base.isNullOrUndefined(c)?l:c,r.setSelectionText(f,l,c,0,3===c.nodeType?c.textContent.length:c.childNodes.length),i=r.getRange(f),w=!1)),k=!1,this.removingComments(t),d=t.childNodes,y=0;y<d.length;y++)if(it.indexOf(d[y].nodeName.toLocaleLowerCase())>=0){k=!0;break}if(h=document.createDocumentFragment(),k){this.insertTempNode(i,t,n,u,s);var g=!0,nt=void 0,tt=void 0,rt=void 0;for(i.deleteContents();t.firstChild;)"#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim()?"#text"===t.firstChild.nodeName&&g||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&g?((a=t.firstChild,sf.base.isNullOrUndefined(t.previousElementSibling))&&(st=sf.base.createElement("p"),t.parentElement.insertBefore(st,t)),t.previousElementSibling.appendChild(t.firstChild)):(a=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(nt?(rt.appendChild(t.firstChild),h.appendChild(rt)):((tt=sf.base.createElement("p")).appendChild(t.firstChild),h.appendChild(tt)),rt=tt,nt=!0):(h.appendChild(t.firstChild),nt=!1),g=!1):sf.base.detach(t.firstChild);t.parentNode.replaceChild(h,t)}else if(et){for(v=sf.base.createElement("span",{className:"tempSpan"}),ut=sf.base.closest(i.startContainer.parentElement,"a"),3===i.startContainer.nodeType&&ut?(ft=this.getImmediateBlockNode(i.startContainer,s),ft.querySelectorAll("br").length>0&&sf.base.detach(ft.querySelector("br")),sf.base.closest(ut,"span").appendChild(v)):i.insertNode(v);t.firstChild;)a=t.firstChild,h.appendChild(t.firstChild);v.parentNode.replaceChild(h,v)}else{for(;t.firstChild;)a=t.firstChild,h.appendChild(t.firstChild);w?l.parentNode.replaceChild(h,l):(i.deleteContents(),sf.base.detach(c),sf.base.isNullOrUndefined(p)?s.appendChild(h):p.parentNode.appendChild(h))}"#text"===a.nodeName?this.placeCursorEnd(a,t,r,f,s):this.cursorPos(a,t,r,f,s)},n.placeCursorEnd=function(n,t,i,r,u){for(n="BR"===n.nodeName?sf.base.isNullOrUndefined(n.previousSibling)?n.parentNode:n.previousSibling:n;!sf.base.isNullOrUndefined(n)&&"#text"!==n.nodeName&&"IMG"!==n.nodeName&&"BR"!==n.nodeName&&"HR"!==n.nodeName;)n=n.lastChild;"IMG"===(n=sf.base.isNullOrUndefined(n)?t:n).nodeName?this.imageFocus(n,i,r):i.setSelectionText(r,n,n,n.textContent.length,n.textContent.length);this.removeEmptyElements(u)},n.getNodeCollection=function(n,t,i){var r=[];return n.startOffset===n.endOffset&&n.startContainer===n.endContainer&&("TD"===n.startContainer.nodeName||3!==n.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?r.push(n.startContainer.childNodes[n.endOffset]):r=t.getInsertNodeCollection(n),r},n.insertTempNode=function(n,t,i,r,u){var f,e,o;n.startContainer!==u||sf.base.isNullOrUndefined(n.startContainer.childNodes[n.endOffset-1])||"TABLE"!==n.startContainer.childNodes[n.endOffset-1].nodeName?n.startContainer!==u||sf.base.isNullOrUndefined(n.startContainer.childNodes[n.endOffset])||"TABLE"!==n.startContainer.childNodes[n.endOffset].nodeName?n.startContainer===n.endContainer&&3!==n.startContainer.nodeType&&"HR"===t.firstChild.nodeName?n.startContainer.classList.contains("e-content")||"BODY"===n.startContainer.nodeName?n.startContainer.appendChild(t):n.startContainer.parentNode.insertBefore(t,n.startContainer):(f=this.getImmediateBlockNode(i[i.length-1],u),((sf.base.isNullOrUndefined(f)||sf.base.isNullOrUndefined(f.parentElement))&&3!==n.endContainer.nodeType&&(f=n.endContainer,n.setEnd(f,n.endContainer.textContent.length)),sf.base.isNullOrUndefined(f)||u!==f||n.startContainer!==u||n.endContainer!==u||(f=u.firstElementChild,n.setStart(u.firstElementChild,u.firstElementChild.textContent.length),n.setEnd(u.firstElementChild,u.firstElementChild.textContent.length)),"BODY"===f.nodeName&&n.startContainer===n.endContainer&&1===n.startContainer.nodeType&&(f=n.startContainer),"TD"===f.nodeName||"TH"===f.nodeName)?(e=sf.base.createElement("span",{className:"tempSpan"}),n.insertNode(e),e.parentNode.replaceChild(t,e)):(o=r.GetSpliceNode(n,f),o.parentNode.replaceChild(t,o))):n.startContainer.insertBefore(t,n.startContainer.childNodes[n.endOffset]):sf.base.isNullOrUndefined(n.startContainer.childNodes[n.endOffset-1].nextSibling)?n.startContainer.appendChild(t):n.startContainer.insertBefore(t,n.startContainer.childNodes[n.endOffset-1].nextSibling)},n.cursorPos=function(n,t,i,r,u){n.classList.add("lastNode");u.innerHTML=function(n){var t=document.createElement("div"),o,f,i,u,r,e;if(t.innerHTML=n,t.setAttribute("class","tempDiv"),o=document.createElement("div"),t.childNodes.length>0){for(var h=void 0,c=void 0,s=void 0;t.firstChild;)"#text"===t.firstChild.nodeName&&(t.firstChild.textContent.indexOf("\n")<0||""!==t.firstChild.textContent.trim())||ai.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(h?c.appendChild(t.firstChild):(s=sf.base.createElement("p"),o.appendChild(s),s.appendChild(t.firstChild)),c=s,h=!0):"#text"===t.firstChild.nodeName&&("\n"===t.firstChild.textContent||t.firstChild.textContent.indexOf("\n")>=0&&""===t.firstChild.textContent.trim())?sf.base.detach(t.firstChild):(o.appendChild(t.firstChild),h=!1);for(f=o.querySelectorAll("table"),i=0;i<f.length;i++){for("0"===f[i].getAttribute("border")&&f[i].removeAttribute("border"),u=f[i].querySelectorAll("td"),r=0;r<u.length;r++)"none"===u[r].style.borderLeft&&u[r].style.removeProperty("border-left"),"none"===u[r].style.borderRight&&u[r].style.removeProperty("border-right"),"none"===u[r].style.borderBottom&&u[r].style.removeProperty("border-bottom"),"none"===u[r].style.borderTop&&u[r].style.removeProperty("border-top"),"none"===u[r].style.border&&u[r].style.removeProperty("border");f[i].classList.contains("e-rte-table")||f[i].classList.add("e-rte-table")}for(e=o.querySelectorAll("img"),i=0;i<e.length;i++)e[i].classList.contains("e-rte-image")||e[i].classList.add("e-rte-image"),e[i].classList.contains("e-imginline")||e[i].classList.contains("e-imgbreak")||e[i].classList.add("e-imginline")}return o.innerHTML}(u.innerHTML);n=u.querySelector(".lastNode");sf.base.isNullOrUndefined(n)||(this.placeCursorEnd(n,t,i,r,u),n.classList.remove("lastNode"),0===n.classList.length&&n.removeAttribute("class"))},n.imageFocus=function(n,t,i){var r=document.createTextNode(" ");n.parentNode.insertBefore(r,n.nextSibling);t.setSelectionText(i,n.nextSibling,n.nextSibling,0,0)},n.getImmediateBlockNode=function(n){do n=n.parentNode;while(n&&it.indexOf(n.nodeName.toLocaleLowerCase())<0);return n},n.removingComments=function(n){var t=n.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,"");n.innerHTML=t},n.findDetachEmptyElem=function(n){return sf.base.isNullOrUndefined(n.parentElement)?null:""===n.parentElement.textContent.trim()&&"true"!==n.parentElement.contentEditable?this.findDetachEmptyElem(n.parentElement):n},n.removeEmptyElements=function(n){for(var r,i=n.querySelectorAll(":empty"),t=0;t<i.length;t++)"IMG"!==i[t].tagName&&"BR"!==i[t].tagName&&"IFRAME"!==i[t].tagName&&"TD"!==i[t].tagName&&"SOURCE"!==i[t].tagName&&"HR"!==i[t].tagName&&(r=this.findDetachEmptyElem(i[t]),sf.base.isNullOrUndefined(r)||sf.base.detach(r))},n.closestEle=function(n,t){for(var i=n;i&&1===i.nodeType;){if(i.parentNode===t||!sf.base.isNullOrUndefined(i.parentNode.tagName)&&-1!==p.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},n.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],n}(),kr=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},n.prototype.linkCommand=function(n){switch(n.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(n);break;case"openlink":this.openLink(n);break;case"removelink":this.removeLink(n)}},n.prototype.createLink=function(n){var r=!sf.base.isNullOrUndefined(n.item.selectParent)&&n.item.selectParent.length>0&&sf.base.closest(n.item.selectParent[0],"a"),f,s,i,e,t,o,u;(r=sf.base.isNullOrUndefined(r)?!sf.base.isNullOrUndefined(n.item.selectParent)&&n.item.selectParent.length>0?n.item.selectParent[0]:null:r,sf.base.isNullOrUndefined(r)||"A"!==r.tagName)?(f=(new a).getRange(this.parent.currentDocument),s=!!sf.base.isNullOrUndefined(n.item.text)||n.item.text.replace(/ /g,"").localeCompare(f.toString().replace(/\n/g," ").replace(/ /g,""))<0,n.event&&"keydown"===n.event.type&&(32===n.event.keyCode||13===n.event.keyCode)||"Paste"===n.item.action||f.collapsed||s?(i=this.createAchorNode(n),(i.innerText=""===n.item.text?n.item.url:n.item.text,n.item.selection.restore(),w.Insert(this.parent.currentDocument,i,this.parent.editableElement),n.event&&"keydown"===n.event.type&&(32===n.event.keyCode||13===n.event.keyCode))?(e=n.item.selection.range.startContainer,e.textContent=this.removeText(e.textContent,n.item.text)):(u="Paste"===n.item.action?i.childNodes[0].textContent.length:0,n.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],u,i.childNodes[0].textContent.length))):this.createLinkNode(n)):(t=r,o="",(sf.base.isNullOrUndefined(n.item.url)||t.setAttribute("href",n.item.url),sf.base.isNullOrUndefined(n.item.title)||t.setAttribute("title",n.item.title),sf.base.isNullOrUndefined(n.item.text)||""===n.item.text||(o=t.innerText,t.innerText=n.item.text),sf.base.isNullOrUndefined(n.item.target)?t.removeAttribute("target"):t.setAttribute("target",n.item.target),o===n.item.text)?(n.item.selection.setSelectionText(this.parent.currentDocument,t,t,1,1),n.item.selection.restore()):(u="Paste"===n.item.action?t.childNodes[0].textContent.length:0,n.item.selection.setSelectionText(this.parent.currentDocument,t.childNodes[0],t.childNodes[0],u,t.childNodes[0].textContent.length)));n.callBack&&n.callBack({requestType:"Links",editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.createLinkNode=function(n){for(var t,d,w,b,c,g,l,o,u,v,k=new a,nt=new ut,y=k.getRange(this.parent.currentDocument),p=this.getSelectionNodes(k.getNodeCollection(y)),tt=k.save(y,this.parent.currentDocument),h=[],r=[],e=[],f=[],i=[],s=0;s<p.length;s++)p[s]=nt.GetSpliceNode(y,p[s]),h[s]=p[s];for(t=0;t<h.length;t++)for(d=!0,u=h[t];!0===d;)"A"===u.parentNode.nodeName&&(w=u.parentNode,u.parentNode.parentNode.insertBefore(w.firstChild,w),u.parentNode.removeChild(w)),this.isBlockNode(u.parentNode)||0===h.length||0===t||t===h.length-1||3===y.startContainer.nodeType?(r[t]=u,d=!1):u=u.parentNode;for(t=0,b=0;t<r.length;t++)if(0===t&&(i[b]=r[t]),r.length>1&&t<r.length-1){if(r[t].parentElement===r[t+1].parentElement&&r[t]===r[t+1])continue;i[b+1]=r[t+1];b++}for(c=0,f[c]=this.createAchorNode(n),t=0;t<i.length;t++)(0===t&&(v=i[t].cloneNode(!0),f[t].appendChild(v)),t<i.length-1)&&(i[t].parentNode===i[t+1].parentNode?(g=i[t+1].cloneNode(!0),f[c].appendChild(g)):(f[c+=1]=this.createAchorNode(n),v=i[t+1].cloneNode(!0),f[c].appendChild(v)));for(this.parent.nodeSelection.setRange(document,tt.range),t=0,l=0,o=0;t<=i.length;t++)0===t&&(i[t].parentNode.insertBefore(f[l],i[t].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,f[l]),e[o]=i[t],o++),t<i.length-1&&(i[t].parentNode===i[t+1].parentNode?(e[o]=i[t+1],o++):(l+=1,i[t+1].parentNode.insertBefore(f[l],i[t+1]),e[o]=i[t+1],o++));for(t=0;t<e.length;t++)e[t].parentNode&&e[t].parentNode.removeChild(e[t])},n.prototype.createAchorNode=function(n){var t=sf.base.createElement("a",{className:"e-rte-anchor",attrs:{href:n.item.url,title:sf.base.isNullOrUndefined(n.item.title)||""===n.item.title?n.item.url:n.item.title}});return sf.base.isNullOrUndefined(n.item.target)||t.setAttribute("target",n.item.target),t},n.prototype.getSelectionNodes=function(n){n=n.reverse();for(var t=0;t<n.length;t++)3===n[t].nodeType&&""!==n[t].textContent.trim()||"IMG"!==n[t].nodeName&&(n.splice(t,1),t--);return n.reverse()},n.prototype.isBlockNode=function(n){return!!n&&n.nodeType===Node.ELEMENT_NODE&&it.indexOf(n.tagName.toLowerCase())>=0},n.prototype.removeText=function(n,t){for(var r=n.split(" "),i=0;i<r.length;i++)r[i]===t&&(r.splice(i,1),i--);return r.join(" ")+" "},n.prototype.openLink=function(n){document.defaultView.open(n.item.url,n.item.target);this.callBack(n)},n.prototype.removeLink=function(n){var e=this.parent.domNode.blockNodes(),f,u,t;if(e.length<2){this.parent.domNode.setMarker(n.item.selection);for(var s=sf.base.closest(n.item.selectParent[0],"a"),i=s||n.item.selectParent[0],o=i.parentNode,r=[];i.firstChild;null)r.push(o.insertBefore(i.firstChild,i));o.removeChild(i);r&&1===r.length&&(n.item.selection.startContainer=n.item.selection.getNodeArray(r[r.length-1],!0),n.item.selection.endContainer=n.item.selection.startContainer);n.item.selection=this.parent.domNode.saveMarker(n.item.selection)}else for(f=0;f<e.length;f++)for(u=e[f].querySelectorAll("a"),t=0;t<u.length;t++)document.getSelection().containsNode(u[t],!0)&&(u[t].outerHTML=u[t].innerHTML);n.item.selection.restore();this.callBack(n)},n.prototype.callBack=function(n){n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n}(),dr=function(){function n(n){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"};this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this);this.parent.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.onKeyDown=function(n){switch(n.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:n.callBack});n.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:n.callBack});n.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:n.callBack});n.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:n.callBack});n.event.preventDefault()}},n.prototype.getTableNode=function(n){var t=n.startContainer.nodeType===Node.ELEMENT_NODE?n.startContainer:n.startContainer.parentNode;return[sf.base.closest(t,"td,th")]},n.prototype.applyAlignment=function(n){var o="Table"===n.value,r=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.save(r,this.parent.currentDocument),u,t,s,f,e;if(o)sf.base.setStyleAttribute(this.getTableNode(r)[0],{"text-align":this.alignments[n.subCommand]});else{for(this.parent.domNode.setMarker(i),u=this.parent.domNode.blockNodes(),t=0;t<u.length;t++)s=u[t],sf.base.setStyleAttribute(s,{"text-align":this.alignments[n.subCommand]});for(f=this.parent.domNode.getImageTagInSelection(),t=0;t<f.length;t++)e=[],e.push(f[t]),this.parent.imgObj.imageCommand({item:{selectNode:e},subCommand:n.subCommand,value:n.subCommand,callBack:n.callBack,selector:n.selector});this.parent.editableElement.focus();i=this.parent.domNode.saveMarker(i);v()&&nt(this.parent.editableElement,n.selector);i.restore()}n.callBack&&n.callBack({requestType:n.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:o?this.getTableNode(r):this.parent.domNode.blockNodes()})},n}(),gr=function(){function n(n){this.indentValue=20;this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this);this.parent.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.onKeyDown=function(n){switch(n.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:n.callBack});n.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:n.callBack});n.event.preventDefault()}},n.prototype.applyIndents=function(n){var o=this.parent.editableElement,s=o.classList.contains("e-rtl"),l=this.parent.nodeSelection.getRange(this.parent.currentDocument),h=this.parent.nodeSelection.save(l,this.parent.currentDocument);this.parent.domNode.setMarker(h);for(var r=this.parent.domNode.blockNodes(),i=r.slice(),c=[],t=0;t<i.length;t++)"LI"!==i[t].tagName&&"LI"===i[t].parentNode.tagName?(r.splice(r.indexOf(i[t]),1),c.push(i[t].parentNode)):"LI"===i[t].tagName&&(r.splice(r.indexOf(i[t]),1),c.push(i[t]));for(c.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==n.subCommand,which:9,action:"indent"},ignoreDefault:!0}),t=0;t<r.length;t++){var u=r[t],e=s?u.style.marginRight:u.style.marginLeft,f=void 0;"Indent"===n.subCommand?(f=""===e?this.indentValue+"px":parseInt(e,null)+this.indentValue+"px",s?u.style.marginRight=f:u.style.marginLeft=f):(f=""===e||"0px"===e?"":parseInt(e,null)-this.indentValue+"px",s?u.style.marginRight=f:u.style.marginLeft=f)}o.focus();v()&&nt(o,n.selector);(h=this.parent.domNode.saveMarker(h)).restore();n.callBack&&n.callBack({requestType:n.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},n}(),i="e-img-caption",nu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(bt,this.imageCommand,this)},n.prototype.imageCommand=function(n){switch(n.value.toString().toLocaleLowerCase()){case"image":case"replace":this.createImage(n);break;case"insertlink":this.insertImageLink(n);break;case"openimagelink":this.openImageLink(n);break;case"editimagelink":this.editImageLink(n);break;case"removeimagelink":this.removeImageLink(n);break;case"remove":this.removeImage(n);break;case"alttext":this.insertAltTextImage(n);break;case"dimension":this.imageDimension(n);break;case"caption":this.imageCaption(n);break;case"justifyleft":this.imageJustifyLeft(n);break;case"justifycenter":this.imageJustifyCenter(n);break;case"justifyright":this.imageJustifyRight(n);break;case"inline":this.imageInline(n);break;case"break":this.imageBreak(n)}},n.prototype.createImage=function(n){var t=this,r=!1,i,f;if((n.item.url=sf.base.isNullOrUndefined(n.item.url)||"undefined"===n.item.url?n.item.src:n.item.url,sf.base.isNullOrUndefined(n.item.selectParent)||"IMG"!==n.item.selectParent[0].tagName)?(i=sf.base.createElement("img"),this.setStyle(i,n),sf.base.isNullOrUndefined(n.item.selection)||n.item.selection.restore(),sf.base.isNullOrUndefined(n.selector)||"pasteCleanupModule"!==n.selector?w.Insert(this.parent.currentDocument,i,this.parent.editableElement):n.callBack({requestType:"Images",editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[i]})):(f=n.item.selectParent[0],this.setStyle(f,n),r=!0),n.callBack&&(sf.base.isNullOrUndefined(n.selector)||!sf.base.isNullOrUndefined(n.selector)&&"pasteCleanupModule"!==n.selector)){var e=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],u="Replace"===n.value||r?n.item.selectParent[0]:sf.base.Browser.isIE?e.previousSibling:e.previousElementSibling,o=!1;u.addEventListener("load",function(){"Replace"===n.value||r?o||(n.callBack({requestType:"Images",editorMode:"HTML",event:n.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[u]}),o=!0):n.callBack({requestType:"Images",editorMode:"HTML",event:n.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[u]})})}},n.prototype.setStyle=function(n,t){sf.base.isNullOrUndefined(t.item.url)||n.setAttribute("src",t.item.url);n.setAttribute("class","e-rte-image"+(sf.base.isNullOrUndefined(t.item.cssClass)?"":" "+t.item.cssClass));sf.base.isNullOrUndefined(t.item.altText)||n.setAttribute("alt",t.item.altText);sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||n.setAttribute("width",this.calculateStyleValue(t.item.width.width));sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||n.setAttribute("height",this.calculateStyleValue(t.item.height.height));sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(n.style.minWidth=this.calculateStyleValue(t.item.width.minWidth));sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(n.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth));sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(n.style.minHeight=this.calculateStyleValue(t.item.height.minHeight));sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(n.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},n.prototype.calculateStyleValue=function(n){return"string"==typeof n&&(n.indexOf("px")||n.indexOf("%")||n.indexOf("auto"))?n:n+"px"},n.prototype.insertImageLink=function(n){var t=sf.base.createElement("a",{attrs:{href:n.item.url}});n.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(n.item.selection.restore(),t.setAttribute("contenteditable","true"));t.appendChild(n.item.selectNode[0]);sf.base.isNullOrUndefined(n.item.target)||t.setAttribute("target",n.item.target);w.Insert(this.parent.currentDocument,t,this.parent.editableElement);this.callBack(n)},n.prototype.openImageLink=function(n){document.defaultView.open(n.item.url,n.item.target);this.callBack(n)},n.prototype.removeImageLink=function(n){var t=n.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=sf.base.select(".e-img-wrap",t),r=sf.base.select(".e-img-inner",t),u=r.cloneNode(!0);sf.base.detach(sf.base.select("a",t));sf.base.detach(r);i.appendChild(n.item.insertElement);i.appendChild(u)}else sf.base.detach(t),sf.base.Browser.isIE&&n.item.selection.restore(),w.Insert(this.parent.currentDocument,n.item.insertElement,this.parent.editableElement);this.callBack(n)},n.prototype.editImageLink=function(n){n.item.selectNode[0].parentElement.href=n.item.url;sf.base.isNullOrUndefined(n.item.target)?n.item.selectNode[0].parentElement.removeAttribute("target"):n.item.selectNode[0].parentElement.target=n.item.target;this.callBack(n)},n.prototype.removeImage=function(n){sf.base.closest(n.item.selectNode[0],"a")?"A"!==n.item.selectNode[0].parentElement.nodeName||sf.base.isNullOrUndefined(n.item.selectNode[0].parentElement.innerText)?sf.base.detach(sf.base.closest(n.item.selectNode[0],"a")):sf.base.detach(n.item.selectNode[0]):sf.base.isNullOrUndefined(sf.base.closest(n.item.selectNode[0],"."+i))?sf.base.detach(n.item.selectNode[0]):sf.base.detach(sf.base.closest(n.item.selectNode[0],"."+i));this.callBack(n)},n.prototype.insertAltTextImage=function(n){n.item.selectNode[0].setAttribute("alt",n.item.altText);this.callBack(n)},n.prototype.imageDimension=function(n){var t=n.item.selectNode[0];t.style.height="";t.style.width="";"auto"!==n.item.width?t.style.width=sf.base.formatUnit(n.item.width):t.removeAttribute("width");"auto"!==n.item.height?t.style.height=sf.base.formatUnit(n.item.height):t.removeAttribute("height");this.callBack(n)},n.prototype.imageCaption=function(n){w.Insert(this.parent.currentDocument,n.item.insertElement,this.parent.editableElement);this.callBack(n)},n.prototype.imageJustifyLeft=function(n){var t=n.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+i))||(sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+i)],"e-imgleft")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgleft"),sf.base.addClass([t],"e-imgleft")):sf.base.addClass([t],"e-imgleft"),this.callBack(n))},n.prototype.imageJustifyCenter=function(n){var t=n.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+i))||(sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+i)],"e-imgcenter")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgcenter"),sf.base.addClass([t],"e-imgcenter")):sf.base.addClass([t],"e-imgcenter"),this.callBack(n))},n.prototype.imageJustifyRight=function(n){var t=n.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+i))||(sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgleft"),sf.base.addClass([sf.base.closest(t,"."+i)],"e-imgright")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.addClass([t.parentElement],"e-imgright"),sf.base.addClass([t],"e-imgright")):sf.base.addClass([t],"e-imgright"),this.callBack(n))},n.prototype.imageInline=function(n){var t=n.item.selectNode[0];t.removeAttribute("class");sf.base.addClass([t],"e-rte-image");sf.base.addClass([t],"e-imginline");sf.base.isNullOrUndefined(sf.base.closest(t,"."+i))||(sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgbreak"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+i)],"e-caption-inline"));this.callBack(n)},n.prototype.imageBreak=function(n){var t=n.item.selectNode[0];t.removeAttribute("class");sf.base.addClass([t],"e-imgbreak");sf.base.addClass([t],"e-rte-image");sf.base.isNullOrUndefined(sf.base.closest(t,"."+i))||(sf.base.removeClass([sf.base.closest(t,"."+i)],"e-caption-inline"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+i)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+i)],"e-imgbreak"));this.callBack(n)},n.prototype.callBack=function(n){n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n}(),tu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this);this.parent.observer.on("INSERT-ROW",this.insertRow,this);this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this);this.parent.observer.on("DELETE-ROW",this.deleteRow,this);this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this);this.parent.observer.on("REMOVE-TABLE",this.removeTable,this);this.parent.observer.on("TABLE-HEADER",this.tableHeader,this);this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this);this.parent.observer.on("TABLE_MERGE",this.cellMerge,this);this.parent.observer.on("TABLE_HORIZONTAL_SPLIT",this.HorizontalSplit,this);this.parent.observer.on("TABLE_VERTICAL_SPLIT",this.VerticalSplit,this);this.parent.observer.on("TABLE_MOVE",this.tableMove,this)},n.prototype.createTable=function(n){var t=sf.base.createElement("table",{className:"e-rte-table"}),o=sf.base.createElement("tbody"),s,u,f,e,r,i;for(sf.base.isNullOrUndefined(n.item.width.width)||(t.style.width=this.calculateStyleValue(n.item.width.width)),sf.base.isNullOrUndefined(n.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(n.item.width.minWidth)),sf.base.isNullOrUndefined(n.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(n.item.width.maxWidth)),s=parseInt(n.item.width.width,10)>100?100/n.item.columns:parseInt(n.item.width.width,10)/n.item.columns,u=0;u<n.item.rows;u++){for(f=sf.base.createElement("tr"),e=0;e<n.item.columns;e++)r=sf.base.createElement("td"),r.appendChild(sf.base.createElement("br")),r.style.width=s+"%",f.appendChild(r);o.appendChild(f)}return(t.appendChild(o),n.item.selection.restore(),w.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),n.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling)&&(i=void 0,"DIV"===n.enterAction?(i=sf.base.createElement("div")).appendChild(sf.base.createElement("br")):"BR"===n.enterAction?i=sf.base.createElement("br"):(i=sf.base.createElement("p")).appendChild(sf.base.createElement("br")),this.insertAfter(i,t)),t.querySelector("td").classList.add("e-cell-select"),n.callBack&&n.callBack({requestType:"Table",editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},n.prototype.calculateStyleValue=function(n){return"string"==typeof n&&(n.indexOf("px")||n.indexOf("%")||n.indexOf("auto"))?n:n+"px"},n.prototype.removeEmptyNode=function(){for(var t,r,i=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),n=0;n<i.length;n++)sf.base.detach(i[n]);for(t=this.parent.editableElement.querySelectorAll("li *:empty"),n=0;n<t.length;n++)sf.base.detach(t[n]),t.length===n+1&&(t=this.parent.editableElement.querySelectorAll("li *:empty"),n=-1);for(r=this.parent.editableElement.querySelectorAll("li:empty"),n=0;n<r.length;n++)sf.base.detach(r[n])},n.prototype.insertAfter=function(n,t){t.parentNode.insertBefore(n,t.nextSibling)},n.prototype.getSelectedCellMinMaxIndex=function(n){for(var t,o,s=this.curTable.querySelectorAll(".e-cell-select"),i=0,r=n.length,u=0,f=n[0].length,e=0;i<s.length;i++)t=this.getCorrespondingIndex(s[i],n),o=this.FindIndex(t[0],t[1],n),r=Math.min(t[0],r),u=Math.max(o[0],u),f=Math.min(t[1],f),e=Math.max(o[1],e);return{startRow:r,endRow:u,startColumn:f,endColumn:e}},n.prototype.insertRow=function(n){var u="InsertRowBefore"!==n.item.subCommand,f=n.item.selection.range.startContainer,s,h,o,e;if("TH"!==f.nodeName&&"TD"!==f.nodeName&&(f=sf.base.closest(f.parentElement,"td,th")),"th"!==f.nodeName.toLowerCase()||"InsertRowBefore"!==n.item.subCommand){if(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length)s=this.curTable.rows[this.curTable.rows.length-1],h=s.cloneNode(!0),h.removeAttribute("rowspan"),this.insertAfter(h,s);else{for(var r=this.getCorrespondingColumns(),a=this.getSelectedCellMinMaxIndex(r),t=u?a.endRow:a.startRow,c=sf.base.createElement("tr"),l=this.curTable.querySelectorAll("th.e-cell-select").length>0,i=0;i<r[t].length;i++)u&&t<r.length-1&&r[t][i]===r[t+1][i]||!u&&0<t&&r[t][i]===r[t-1][i]?(0===i||0<i&&r[t][i]!==r[t][i-1])&&r[t][i].setAttribute("rowspan",(parseInt(r[t][i].getAttribute("rowspan"),10)+1).toString()):(o=sf.base.createElement("td"),o.appendChild(sf.base.createElement("br")),c.appendChild(o),o.setAttribute("style",r[l&&u?t+1:t][i].getAttribute("style")));e=void 0;e=l&&u?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[t];"InsertRowBefore"===n.item.subCommand||l?e.parentElement.insertBefore(c,e):this.insertAfter(c,e)}n.item.selection.setSelectionText(this.parent.currentDocument,n.item.selection.range.startContainer,n.item.selection.range.startContainer,0,0);n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},n.prototype.insertColumn=function(n){var r=n.item.selection.range.startContainer,i;"TH"!==r.nodeName&&"TD"!==r.nodeName&&(r=sf.base.closest(r.parentElement,"td,th"));for(var e,f=sf.base.closest(r,"tr"),o=sf.base.closest(f,"table").rows,h=Array.prototype.slice.call(f.querySelectorAll(":scope > td, :scope > th")).indexOf(r),c=parseInt(n.item.width,10)/f.querySelectorAll(":scope > td, :scope > th").length,s=parseInt(n.item.width,10)/(f.querySelectorAll(":scope > td, :scope > th").length+1),l=sf.base.closest(f,"table"),u=sf.base.closest(f,"table").querySelectorAll("th,td"),t=0;t<u.length;t++)u[t].dataset.oldWidth=u[t].offsetWidth/l.offsetWidth*100+"%";for(t=0;t<o.length;t++)i=(e=o[t].querySelectorAll(":scope > td, :scope > th")[h]).cloneNode(!0),i.innerHTML="",i.appendChild(sf.base.createElement("br")),i.removeAttribute("class"),i.removeAttribute("colspan"),i.removeAttribute("rowspan"),"InsertColumnLeft"===n.item.subCommand?e.parentElement.insertBefore(i,e):this.insertAfter(i,e),i.style.width=s.toFixed(4)+"%",delete i.dataset.oldWidth;for(t=0;t<u.length;t++)u[t].style.width=(Number(u[t].dataset.oldWidth.split("%")[0])*s/c).toFixed(4)+"%",delete u[t].dataset.oldWidth;n.item.selection.setSelectionText(this.parent.currentDocument,r,r,0,0);n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.deleteColumn=function(n){var t=n.item.selection.range.startContainer,f,y,c,r,s,u,a,b,v;if(3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th")),f=sf.base.closest(t,"TH"===t.tagName?"thead":"tbody"),y=f&&Array.prototype.indexOf.call(f.childNodes,t.parentNode),this.curTable=sf.base.closest(t,"table"),1===sf.base.closest(t,"tr").querySelectorAll("th,td").length)n.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else{for(var i=void 0,e=this.getCorrespondingColumns(),p=this.getSelectedCellMinMaxIndex(e),k=p.startColumn,d=p.endColumn,h=0;h<e.length;h++)for(c=e[h],r=0;r<c.length;r++){var o=c[r],w=this.getCorrespondingIndex(o,e),l=parseInt(o.getAttribute("colspan"),10)||1;w[1]+(l-1)>=k&&w[1]<=d&&(l>1?o.setAttribute("colspan",(l-1).toString()):(sf.base.detach(o),i=r,sf.base.Browser.isIE&&(n.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}i>-1&&(s=f.children[y],u=s&&s.children[i<=s.children.length-1?i:i-1],u&&(n.item.selection.setSelectionText(this.parent.currentDocument,u,u,0,0),u.classList.add("e-cell-select")))}n.callBack&&(a=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer,"TD"!==a.nodeName&&(b=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,v=a.children[b],v&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,v,0)),n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},n.prototype.deleteRow=function(n){var f=n.item.selection.range.startContainer,a,v,t,r,i,s,h,c,u,e,l,o;if(3===f.nodeType&&(f=sf.base.closest(f.parentElement,"td,th")),v=Array.prototype.indexOf.call(f.parentNode.childNodes,f),this.curTable=sf.base.closest(f,"table"),i=this.getCorrespondingColumns(),s=this.getSelectedCellMinMaxIndex(i),1===this.curTable.rows.length)n.item.selection.restore(),sf.base.detach(sf.base.closest(f.parentElement,"table"));else for(t=s.endRow;t>=s.startRow;t--){for(a=this.curTable.rows[t],r=0;r<i[t].length;r++)if((0===r||i[t][r]!==i[t][r-1])&&1<parseInt(i[t][r].getAttribute("rowspan"),10)&&(h=parseInt(i[t][r].getAttribute("rowspan"),10)-1,1===h?i[t][r].removeAttribute("rowspan"):i[t][r].setAttribute("rowspan",h.toString())),t<i.length-1&&i[t][r]===i[t+1][r]&&(0===t||i[t][r]!==i[t-1][r]))for(c=i[t][r],u=void 0,u=r;0<u&&i[t][u]===i[t][u-1];u--)0===u?this.curTable.rows[t+1].prepend(c):i[t+1][u-1].insertAdjacentElement("afterend",c);e=a.rowIndex;this.curTable.deleteRow(e);l=sf.base.isNullOrUndefined(this.curTable.rows[e])?this.curTable.querySelectorAll("tbody tr")[e-1]:this.curTable.querySelectorAll("tbody tr")[e];o=l&&l.querySelectorAll("td")[v];o?(n.item.selection.setSelectionText(this.parent.currentDocument,o,o,0,0),o.classList.add("e-cell-select")):(n.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.removeTable=function(n){var t=n.item.selection.range.startContainer,i;t=3===t.nodeType?t.parentNode:t;i=sf.base.closest(t.parentElement,"table");i&&(n.item.selection.restore(),sf.base.detach(i));n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.tableHeader=function(n){var e=!1,i=n.item.selection.range.startContainer,t,s,u,f;if(i=3===i.nodeType?i.parentNode:i,t=sf.base.closest(i.parentElement,"table"),[].slice.call(t.childNodes).forEach(function(n){"THEAD"===n.nodeName&&(e=!0)}),t&&!e){for(var h=t.querySelector("tr").childElementCount,o=0,r=0;r<h;r++)o+=parseInt(t.querySelector("tr").children[r].getAttribute("colspan"),10)||1;for(s=t.createTHead().insertRow(0),u=0;u<o;u++)f=sf.base.createElement("th"),f.appendChild(sf.base.createElement("br")),s.appendChild(f)}else t.deleteTHead();n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.tableVerticalAlign=function(n){n.item.tableCell.style.verticalAlign="AlignTop"===n.item.subCommand?"top":"AlignMiddle"===n.item.subCommand?"middle":"bottom";n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n.prototype.cellMerge=function(n){var r,e,f,i;if(sf.base.isNullOrUndefined(this.curTable)&&(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table")),r=this.curTable.querySelectorAll(".e-cell-select"),!(r.length<2)){this.mergeCellContent();var t=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),u=r[0],o=u.parentElement.querySelectorAll(".e-cell-select");for(t.startColumn<t.endColumn&&u.setAttribute("colspan",(t.endColumn-t.startColumn+1).toString()),t.startRow<t.endRow&&u.setAttribute("rowspan",(t.endRow-t.startRow+1).toString()),e=0,f=o.length-1;f>=0;f--)e+=parseFloat(o[f].style.width);for(u.style.width=e+"%",i=1;i<=r.length-1;i++)sf.base.detach(r[i]);for(i=0;i<this.curTable.rows.length;i++)""===this.curTable.rows[i].innerHTML&&sf.base.detach(this.curTable.rows[i]);this.updateRowSpanStyle(t.startRow,t.endRow,this.getCorrespondingColumns());this.updateColSpanStyle(t.startColumn,t.endColumn,this.getCorrespondingColumns());n.item.selection.setSelectionText(this.parent.currentDocument,n.item.selection.range.startContainer,n.item.selection.range.startContainer,0,0);this.parent.nodeSelection.range&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0);n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},n.prototype.updateColSpanStyle=function(n,t,i){var f,u,o,h,s=0,e=0,r=i;if(n<(t=Math.min(t,r[0].length-1))){for(;u<=t;u++)if(!(n<u&&r[0][u]===r[0][u-1])&&1<(s=Math.min(parseInt(r[0][u].getAttribute("colspan"),10)||1,t-n+1))&&r[0][u]===r[0][u+1])for(e=s-1,f=1;f<r.length;f++){if(r[f][u]!==r[f-1][u])for(o=u;o<u+s;o++)if(1<(h=parseInt(r[f][o].getAttribute("colspan"),10)||1)&&r[f][o]===r[f][o+1])o+=e=Math.min(e,h-1);else if(!(e=Math.max(0,e-1)))break;if(!e)break}e&&this.updateCellAttribute(r,e,"colspan",0,r.length-1,n,t)}},n.prototype.updateRowSpanStyle=function(n,t,i){var u,f,o,h,s=0,e=0,r=i;if(n<(t=Math.min(t,r.length-1))){for(u=n;u<=t;u++)if(!(n<u&&r[u][0]===r[u-1][0])&&1<(s=Math.min(parseInt(r[u][0].getAttribute("rowspan"),10)||1,t-n+1))&&r[u][0]===r[u+1][0])for(e=s-1,f=1;f<r[0].length;f++)if(r[u][f]!==r[u][f-1]){for(o=u;o<u+s;o++)if(1<(h=parseInt(r[o][f].getAttribute("rowspan"),10)||1)&&r[o][f]===r[o+1][f])o+=e=Math.min(e,h-1);else if(!(e=Math.max(0,e-1)))break;if(!e)break}e&&this.updateCellAttribute(r,e,"rowspan",n,t,0,r[0].length-1)}},n.prototype.updateCellAttribute=function(n,t,i,r,u,f,e){for(var s,h,o=r;o<=u;o++)for(s=f;s<=e;s++)r<o&&n[o][s]===n[o-1][s]||f<s&&n[o][s]===n[o][s-1]||1<(h=parseInt(n[o][s].getAttribute(i),10)||1)&&(1<h-t?n[o][s].setAttribute(i,(h-t).toString()):n[o][s].removeAttribute(i))},n.prototype.mergeCellContent=function(){for(var n=this.curTable.querySelectorAll(".e-cell-select"),i=n[0].innerHTML,t=1;t<n.length-1;t++)"<br>"!==n[t].innerHTML&&(i+=n[t].innerHTML);n[0].innerHTML=i},n.prototype.getSelectedMinMaxIndexes=function(n){var i=this.curTable.querySelectorAll(".e-cell-select"),t,s;if(0<i.length){for(var r=n.length,u=0,f=n[0].length,e=0,o=0;o<i.length;o++)t=this.getCorrespondingIndex(i[o],n),s=this.FindIndex(t[0],t[1],n),r=Math.min(t[0],r),u=Math.max(s[0],u),f=Math.min(t[1],f),e=Math.max(s[1],e);return{startRow:r,endRow:u,startColumn:f,endColumn:e}}return null},n.prototype.HorizontalSplit=function(n){var l=n.item.selection.range.startContainer,i,h,r,t,c,f,u;if(this.curTable=sf.base.closest(l.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");i=this.activeCell.cloneNode(!0);i.removeAttribute("class");i.innerHTML="<\/br>";var o=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),e=this.getCorrespondingColumns(),s=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(s>1){for(h=Math.ceil(s/2),1<h?this.activeCell.setAttribute("rowspan",h.toString()):this.activeCell.removeAttribute("rowspan"),1<s-h?i.setAttribute("rowspan",(s-h).toString()):i.removeAttribute("rowspan"),t=void 0,r=o[0]+Math.ceil(s/2),t=0===o[1]?o[1]:o[1]-1;0<=t&&(e[r][t]===e[r][t-1]||0<r&&e[r][t]===e[r-1][t]);)t--;-1===t?this.curTable.rows[r].firstChild?this.curTable.rows[r].prepend(i):this.curTable.appendChild(i):e[r][t].insertAdjacentElement("afterend",i)}else{for(c=sf.base.createElement("tr"),c.appendChild(i),f=e[o[0]],u=0;u<=f.length-1;u++)f[u]!==f[u-1]&&f[u]!==this.activeCell&&f[u].setAttribute("rowspan",((parseInt(f[u].getAttribute("rowspan"),10)?parseInt(f[u].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",c)}n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},n.prototype.VerticalSplit=function(n){var c=n.item.selection.range.startContainer,s,i,u,h,t,f;if(this.curTable=sf.base.closest(c.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){if(this.activeCell=this.curTable.querySelector(".e-cell-select"),s=this.curTable.rows,i=this.activeCell.cloneNode(!0),i.removeAttribute("class"),i.innerHTML="<\/br>",u=parseFloat(this.activeCell.style.width)/2,"TH"===this.activeCell.tagName&&isNaN(u)){for(h=this.curTable.querySelector("tr").childElementCount,t=0;t<h;t++)parseInt(this.curTable.querySelector("tr").children[t].getAttribute("colspan"),10)||1;u=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}var e=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),o=this.getCorrespondingColumns(),r=parseInt(this.activeCell.getAttribute("colspan"),10);if(r>1)1<Math.ceil(r/2)?this.activeCell.setAttribute("colspan",(r/2).toString()):this.activeCell.removeAttribute("colspan"),1<r-r/2?i.setAttribute("colspan",(r-r/2).toString()):i.removeAttribute("colspan");else for(t=0;t<=s.length-1;t++)(0===t||o[t][e[1]]!==o[t-1][e[1]])&&(f=o[t][e[1]],f!==this.activeCell&&f.setAttribute("colspan",((parseInt(f.getAttribute("colspan"),10)?parseInt(f.getAttribute("colspan"),10):1)+1).toString()));this.activeCell.style.width=u+"%";i.style.width=u+"%";this.activeCell.parentNode.insertBefore(i,this.activeCell.nextSibling);n.callBack&&n.callBack({requestType:n.item.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},n.prototype.getCorrespondingColumns=function(){for(var r,t=[],e=this.curTable.rows,i=0;i<=e.length-1;i++)for(var o=e[i],u=0,f=0;f<=o.children.length-1;f++){for(var s=o.children[f],h=s,c=parseInt(h.getAttribute("colspan"),10)||1,l=parseInt(h.getAttribute("rowspan"),10)||1,n=i;n<i+l;n++)for(r=u;r<u+c;r++)t[n]||(t[n]=[]),t[n][r]?u++:t[n][r]=s;u+=0}return t},n.prototype.FindIndex=function(n,t,i){for(var r=n+1,u=t+1;r<i.length;){if(i[r][t]!==i[n][t]){r--;break}r++}for(r===i.length&&r--;u<i[n].length;){if(i[n][u]!==i[n][t]){u--;break}u++}return u===i[n].length&&u--,[r,u]},n.prototype.getCorrespondingIndex=function(n,t){for(var r,i=0;i<t.length;i++)for(r=0;r<t[i].length;r++)if(t[i][r]===n)return[i,r];return[]},n.prototype.highlightCells=function(n,t,i,r,u){for(var l,f,a,e=n,o=t,s=i,h=r,v=new iu,c=e;c<=o;c++){for(((1<(parseInt(u[c][s].getAttribute("rowspan"),10)||1)||1<(parseInt(u[c][s].getAttribute("colspan"),10)||1))&&(a=this.FindIndex((f=this.getCorrespondingIndex(u[c][s],u))[0],f[1],u))||(1<(parseInt(u[c][h].getAttribute("rowspan"),10)||1)||1<(parseInt(u[c][h].getAttribute("colspan"),10)||1))&&(a=this.FindIndex((f=this.getCorrespondingIndex(u[c][h],u))[0],f[1],u)))&&(e=Math.min(f[0],e),o=Math.max(a[0],o),s=Math.min(f[1],s),h=Math.max(a[1],h)),l=s;l<=h;l++)((1<(parseInt(u[e][l].getAttribute("rowspan"),10)||1)||1<(parseInt(u[e][l].getAttribute("colspan"),10)||1))&&(a=this.FindIndex((f=this.getCorrespondingIndex(u[e][l],u))[0],f[1],u))||(1<(parseInt(u[o][l].getAttribute("rowspan"),10)||1)||1<(parseInt(u[o][l].getAttribute("colspan"),10)||1))&&(a=this.FindIndex((f=this.getCorrespondingIndex(u[o][l],u))[0],f[1],u)))&&(e=Math.min(f[0],e),o=Math.max(a[0],o),s=Math.min(f[1],s),h=Math.max(a[1],h));v=e===n&&o===t&&s===i&&h===r?{startRow:n,endRow:t,startColumn:i,endColumn:r}:this.highlightCells(e,o,s,h,u)}return v},n.prototype.tableMove=function(n){var o;this.activeCell=n.selectNode[0];var t=n.event.target,c=this.activeCell.tagName,l=t.tagName;if(this.curTable=sf.base.closest(t,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"===t.tagName||"TH"===t.tagName||c===l){for(var a=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),v=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),y=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),p=Array.prototype.slice.call(t.parentElement.children).indexOf(t),s=this.curTable.querySelectorAll(".e-cell-select"),i=s.length-1;i>=0;i--)this.activeCell!==s[i]&&s[i].classList.remove("e-cell-select");if(a!==y||v!==p){for(var r=this.getCorrespondingColumns(),u=this.getCorrespondingIndex(this.activeCell,r),f=this.getCorrespondingIndex(t,r),e=this.highlightCells(Math.min(u[0],f[0]),Math.max(u[0],f[0]),Math.min(u[1],f[1]),Math.max(u[1],f[1]),r),h=e.startRow;h<=e.endRow;h++)for(o=e.startColumn;o<=e.endColumn;o++)r[h][o].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}},n}(),iu=function(){},gi=function(){function n(){}return n.applyFormat=function(n,t,i,r,u,f){var b,k,d,h,c;if(this.enterAction=r,["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1){"backgroundcolor"===t&&""===u&&(u="transparent");var g,rt=!1,o=new a,ft=new ni(i,n),l=new ut,p=new y,e=o.getRange(n),et=o.save(e,n),s=e.collapsed?o.getSelectionNodeCollection(e):o.getSelectionNodeCollectionBr(e),tt=!1,w=!1,it=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;for(e.collapsed&&(s.length>0?(tt=!0,e=l.GetCursorRange(n,e,s[0])):3===e.startContainer.nodeType&&e.startContainer.parentElement.childElementCount>0&&e.startOffset>0&&"br"!==e.startContainer.parentElement.firstElementChild.tagName.toLowerCase()?(tt=!0,e=l.GetCursorRange(n,e,e.startContainer),s.push(e.startContainer)):(b=this.insertCursorNode(n,o,e,p,l,t,u,i),o.endContainer=o.startContainer=o.getNodeArray(b,!0),k="BR"===b.nodeName&&b.parentNode.childNodes,sf.base.isNullOrUndefined(k)||1!==k.length||"BR"!==k[0].nodeName||0!==s.length?o.endOffset=o.startOffset=1:(o.setSelectionText(n,e.startContainer,e.endContainer,0,0),rt=!0))),g=e.collapsed,d=!1,h=0;h<s.length;h++)c=p.getFormattedNode(s[h],t,i),null===c&&("subscript"===t?d=null!==(c=p.getFormattedNode(s[h],"superscript",i)):"superscript"===t&&(d=null!==(c=p.getFormattedNode(s[h],"subscript",i)))),0===h&&null===c&&(w=!0),s[h]=null===c||w&&!it?this.insertFormat(n,s,h,c,g,w,it,e,l,t,u):this.removeFormat(s,h,c,g,w,it,e,l,t,u,o,i,ft),o=this.applySelection(s,o,l,h,tt);v()&&nt(i,f);rt||et.restore();d&&this.applyFormat(n,t,i,r)}},n.insertCursorNode=function(n,t,i,u,f,e,o,s){var h=t.getNodeCollection(i),l=h.length>0?h.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(u,h,e,s):u.getFormattedNode(h[0],e,s):null,c=null;return l?(c=h[0],r.unwrap(l)):(h.length>1&&i.startOffset>0&&h[0].firstElementChild&&"br"===h[0].firstElementChild.tagName.toLowerCase()&&(h[0].innerHTML=""),1!==h.length||0!==i.startOffset||"BR"!==h[0].nodeName&&"BR"!==h[0].nextSibling.nodeName||sf.base.detach("#text"===h[0].nodeName?h[0].nextSibling:h[0]),c=this.getInsertNode(n,i,e,o).firstChild),c},n.getCursorFormat=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=t[u].lastElementChild?t[u].lastElementChild:t[u];return n.getFormattedNode(f,i,r)},n.removeFormat=function(n,t,i,u,f,e,o,s,h,c,l,a,v){var it,ut,st=null,d,y,nt,ft,ot,p,k,b,tt,et,g,rt;if(o.startContainer!==o.endContainer||0!==o.startOffset||o.endOffset!==o.startContainer.length){d=[];y=n[t];do d.push(l.getIndex(y)),y=y.parentNode;while(y&&y!==i);if("BR"!==n[t].nodeName&&(y=st=u&&i.textContent.length-1===o.startOffset?s.SplitNode(o,i,!0):s.GetSpliceNode(o,i)),u){for(nt=st;null!==nt.firstChild&&3!==nt.firstChild.nodeType;null)nt=nt.firstChild;nt.innerHTML="&#8203;";n[t]=nt.firstChild}else{for(;y&&y.childNodes.length>0&&d.length-1>=0&&y.childNodes.length>d[d.length-1];)y=y.childNodes[d[d.length-1]],d.pop();"BR"!==n[t].nodeName&&(3!==y.nodeType||u&&""===y.nodeValue?(ft=document.createElement("div"),ft.innerHTML="&#8203;",3!==y.nodeType?(y.insertBefore(ft.firstChild,y.firstChild),n[t]=y.firstChild):(y.parentNode.insertBefore(ft.firstChild,y),n[t]=y.previousSibling,y.parentNode.removeChild(y))):n[t]=y)}}("backgroundcolor"===h&&(it=i.style.fontSize),"fontsize"===h)&&(ot=sf.base.closest(n[t].parentElement,"span[style*=background-color]"),sf.base.isNullOrUndefined(ot)||(ut=ot.style.backgroundColor));var ht=i.getAttribute("style"),ct=i.tagName,w=r.unwrap(i);if(w[0]&&!e)for(p=w[t]?w[t]:w[0],k=p;p&&p.parentElement&&p.parentElement!==a;p=p)if(p.parentElement&&p.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&(p.parentElement.childElementCount>1||o.startOffset>1)){if(k.parentElement&&k.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&o.startOffset===o.endOffset&&1!==k.nodeType&&!sf.base.isNullOrUndefined(k.textContent)&&k.parentElement.childElementCount>1&&(o.setStart(k,0),o.setEnd(k,k.textContent.length),s.SplitNode(o,k.parentElement,!1)),"span"===p.parentElement.tagName.toLocaleLowerCase()&&"underline"===i.style.textDecoration&&"underline"!==p.parentElement.style.textDecoration){p=p.parentElement;continue}r.unwrap(p.parentElement);p=sf.base.isNullOrUndefined(p.parentElement)||v.isBlockNode(p.parentElement)?p.parentElement:k}else p=p.parentElement;if(w.length>0&&e){for(b=0;b<w.length;b++)(3!==w[b].nodeType||w[b].textContent&&w[b].textContent.trim().length>0)&&(w[b]=r.Wrap(w[b],this.GetFormatNode(h,c,ct,ht)),0===b?o.setStartBefore(w[b]):b===w.length-1&&o.setEndAfter(w[b]));if(tt=n[t].parentElement,(sf.base.isNullOrUndefined(it)||""===it||(tt.style.fontSize=it),sf.base.isNullOrUndefined(ut)||""===ut||(tt.style.backgroundColor=ut),"backgroundcolor"!==h||sf.base.isNullOrUndefined(it)||""===it||tt.parentElement.innerHTML!==tt.outerHTML)||(et=tt.parentElement,et.parentElement.insertBefore(tt,et),sf.base.detach(et)),"fontsize"===h||"fontcolor"===h){for(g=n[t].parentElement,rt=n[t].parentElement;!sf.base.isNullOrUndefined(rt)&&"li"!==rt.tagName.toLowerCase();)g=rt=rt.parentElement;sf.base.isNullOrUndefined(g)||"li"!==g.tagName.toLowerCase()||g.textContent.trim()!==n[t].textContent.trim()||("fontsize"===h?g.style.fontSize=c:(g.style.color=c,g.style.textDecoration="inherit"))}}return n[t]},n.insertFormat=function(n,t,i,r,u,f,e,o,s,h,c){var a,l,v,y;if(u)"uppercase"!==h&&"lowercase"!==h?(a=this.getInsertNode(n,o,h,c),t[i]=a.firstChild,s.position=1):s.position=o.startOffset;else if(null===r&&f||e){if("BR"!==t[i].nodeName&&(t[i]=s.GetSpliceNode(o,t[i]),t[i].textContent=s.TrimLineBreak(t[i].textContent)),"uppercase"===h||"lowercase"===h)t[i].textContent="uppercase"===h?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==e||""!==c)if(a=this.GetFormatNode(h,c),"fontsize"===h||"fontcolor"===h){for(l=t[i].parentElement,v=t[i].parentElement;!sf.base.isNullOrUndefined(v)&&"li"!==v.tagName.toLowerCase();)l=v=v.parentElement;(sf.base.isNullOrUndefined(l)||"li"!==l.tagName.toLowerCase()||l.textContent.trim()!==t[i].textContent.trim()||("fontsize"===h?l.style.fontSize=c:(l.style.color=c,l.style.textDecoration="inherit")),t[i]=this.applyStyles(t,i,a),"fontsize"===h)&&(y=sf.base.closest(t[i].parentElement,"span[style*=background-color]"),sf.base.isNullOrUndefined(y)||(t[i].parentElement.style.backgroundColor=y.style.backgroundColor))}else t[i]=this.applyStyles(t,i,a)}else t[i]=s.GetSpliceNode(o,t[i]);return t[i]},n.applyStyles=function(n,t,i){return"BR"===n[t].nodeName&&"BR"===this.enterAction||(n[t]=t===n.length-1||"BR"===n[t].nodeName?r.Wrap(n[t],i):r.WrapBefore(n[t],i,!0),n[t]=this.getChildNode(n[t],i)),n[t]},n.getInsertNode=function(n,t,i,r){var u=this.GetFormatNode(i,r),f;return(u.innerHTML="&#8203;",sf.base.Browser.isIE)?(f=n.createDocumentFragment(),f.appendChild(u),t.insertNode(f)):t.insertNode(u),u},n.getChildNode=function(n,t){return null==n&&(t.innerHTML="&#8203;",n=t.firstChild),n},n.applySelection=function(n,t,i,r,u){return 1!==n.length||u?1===n.length&&u?(t.startContainer=t.getNodeArray(n[r],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===r?(t.startContainer=t.getNodeArray(n[r],!0),t.startOffset=0):r===n.length-1&&(t.endContainer=t.getNodeArray(n[r],!1),t.endOffset=n[r].textContent.length):(t.startContainer=t.getNodeArray(n[r],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=n[r].textContent.length),t},n.GetFormatNode=function(n,t,i,r){var u;switch(n){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.textDecoration="underline",u;case"strikethrough":return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.textDecoration="line-through",u;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.color=t,u.style.textDecoration="inherit",u;case"fontname":return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.fontFamily=t,u;case"fontsize":return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.fontSize=t,u;default:return u=document.createElement("span"),this.updateStyles(u,i,r),u.style.backgroundColor=t,u}},n.updateStyles=function(n,t,i){null!==i&&"SPAN"===t&&n.setAttribute("style",i)},n.enterAction="P",n}(),ru=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this);this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},n.prototype.keyDownHandler=function(n){n.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(n.event.action)>-1&&(n.event.preventDefault(),gi.applyFormat(this.parent.currentDocument,n.event.action,this.parent.editableElement,n.enterAction),this.callBack(n,n.event.action))},n.prototype.applySelection=function(n){gi.applyFormat(this.parent.currentDocument,n.subCommand.toLocaleLowerCase(),this.parent.editableElement,n.enterAction,n.value,n.selector);this.callBack(n,n.subCommand)},n.prototype.callBack=function(n,t){n.callBack&&n.callBack({requestType:t,event:n.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n}(),uu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},n.prototype.applyHtml=function(n){if(w.Insert(this.parent.currentDocument,n.value,this.parent.editableElement,!0),"pasteCleanup"===n.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),r=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),u=[].slice.call(r);n.callBack({requestType:n.subCommand,editorMode:"HTML",elements:i,imgElem:u})}else n.callBack&&n.callBack({requestType:n.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n}(),fu=function(){function n(){}return n.clear=function(n,t,i,r){var l,o,y,h,c,p,b;this.domNode=new ni(t,n);this.defaultTag="P"===i?this.defaultTag:"div";var f=new a,s=new ut,e=f.getRange(n),k=e.collapsed,u=f.getInsertNodeCollection(e),w=f.save(e,n);if(!k){if(l=void 0,l="BR"===u[0].nodeName&&sf.base.closest(u[0],"table")?s.GetSpliceNode(e,sf.base.closest(u[0],"table")):s.GetSpliceNode(e,u[u.length>1&&"IMG"===u[0].nodeName?1:0]),1===u.length)f.setSelectionContents(n,l),e=f.getRange(n);else{for(o=1,y=u[u.length-o];u.length<=o&&"BR"===u[u.length-o].nodeName;)o++,y=u[u.length-o];h=s.GetSpliceNode(e,y);f.setSelectionText(n,l,h,0,3===h.nodeType?h.textContent.length:h.childNodes.length);e=f.getRange(n)}c=f.getNodeCollection(e);p=c.slice();this.clearInlines(f.getSelectionNodes(p),p,f.getRange(n),s,t);this.reSelection(n,w,c);e=f.getRange(n);b=(c=f.getNodeCollection(e)).slice();this.clearBlocks(n,b,t,s,f);v()&&nt(t,r);this.reSelection(n,w,c)}},n.reSelection=function(n,t,i){var r=t.getInsertNodes(i),u;t.startContainer=t.getNodeArray(r[0],!0,n);t.startOffset=0;t.endContainer=t.getNodeArray(r[r.length-1],!1,n);u=r[r.length-1];t.endOffset=3===u.nodeType?u.textContent.length:u.childNodes.length;t.restore()},n.clearBlocks=function(n,t,i,r,u){for(var f=[],e=0;e<t.length;e++)this.BLOCK_TAGS.indexOf(t[e].nodeName.toLocaleLowerCase())>-1&&-1===f.indexOf(t[e])?f.push(t[e]):this.BLOCK_TAGS.indexOf(t[e].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===f.indexOf(t[e].parentNode)&&i!==t[e].parentNode&&f.push(t[e].parentNode);f=this.spliceParent(f,t)[0];f=this.removeParent(f);this.unWrap(n,f,r,u)},n.spliceParent=function(n,t){for(var f,r,u,e,o,s,i=0;i<n.length;i++)for(f=n[i].childNodes.length,r=0;r<f;r++)if(t.indexOf(n[i].childNodes[r])>0&&n[i].childNodes[r].childNodes.length>0&&(t=this.spliceParent([n[i].childNodes[r]],t)[1]),t.indexOf(n[i].childNodes[r])<=-1&&""!==n[i].childNodes[r].textContent.trim()){for(u=0;u<f;u++)t.indexOf(n[i].childNodes[u])>-1&&t.splice(t.indexOf(n[i].childNodes[u]),1);r=n[i].childNodes.length;e=n.indexOf(n[i].parentNode);o=t.indexOf(n[i].parentNode);e>-1&&n.splice(e,1);o>-1&&t.splice(o,1);s=t.indexOf(n[i]);s>-1&&t.splice(s,1);n.splice(i,1);i--}return[n,t]},n.removeChild=function(n,t){var r=t.childNodes.length,i;if(r>0)for(i=0;i<r;i++)n.indexOf(t.childNodes[i])>-1&&(n=this.removeChild(n,t.childNodes[i])).splice(n.indexOf(t.childNodes[i]),1);return n},n.removeParent=function(n){for(var t=0;t<n.length;t++)n.indexOf(n[t].parentNode)>-1&&((n=this.removeChild(n,n[t])).splice(t,1),t--);return n},n.unWrap=function(n,t,i,u){for(var e,o,s,f=0;f<t.length;f++)if(this.NONVALID_TAGS.indexOf(t[f].nodeName.toLowerCase())>-1&&t[f].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[f].parentNode.nodeName.toLowerCase())>-1&&(u.setSelectionText(n,t[f],t[f],0,t[f].childNodes.length),r.unwrap(i.GetSpliceNode(u.getRange(n),t[f].parentNode))),"p"!==t[f].nodeName.toLocaleLowerCase())for(!(this.NONVALID_PARENT_TAGS.indexOf(t[f].nodeName.toLowerCase())<0&&"p"!==t[f].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[f].nodeName.toLocaleLowerCase()||"li"===t[f].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[f].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[f].childNodes.length&&"p"===t[f].childNodes[0].nodeName.toLocaleLowerCase()||r.Wrap(t[f],n.createElement(this.defaultTag)),e=r.unwrap(t[f]),1===e.length&&"p"===e[0].parentNode.nodeName.toLocaleLowerCase()&&(r.Wrap(t[f],n.createElement(this.defaultTag)),r.unwrap(t[f])),o=0;o<e.length;o++)this.NONVALID_TAGS.indexOf(e[o].nodeName.toLowerCase())>-1?this.unWrap(n,[e[o]],i,u):this.BLOCK_TAGS.indexOf(e[o].nodeName.toLocaleLowerCase())>-1&&"p"!==e[o].nodeName.toLocaleLowerCase()?(s=this.removeParent([e[o]]),this.unWrap(n,s,i,u)):this.BLOCK_TAGS.indexOf(e[o].nodeName.toLocaleLowerCase())>-1&&e[o].parentNode.nodeName.toLocaleLowerCase()===e[o].nodeName.toLocaleLowerCase()?r.unwrap(e[o]):this.BLOCK_TAGS.indexOf(e[o].nodeName.toLocaleLowerCase())>-1&&"p"===e[o].nodeName.toLocaleLowerCase()&&(r.Wrap(e[o],n.createElement(this.defaultTag)),r.unwrap(e[o]));else r.Wrap(t[f],n.createElement(this.defaultTag)),r.unwrap(t[f])},n.clearInlines=function(n,t,i,r){for(var f,u,e=0;e<n.length;e++){for(f=n[e],u=void 0;!this.domNode.isBlockNode(f);)u=f,f=f.parentElement;u&&y.inlineTags.indexOf(u.nodeName.toLocaleLowerCase())>-1&&(r.GetSpliceNode(i,u),this.removeInlineParent(u))}},n.removeInlineParent=function(n){for(var i=r.unwrap(n),t=0;t<i.length;t++)1===i[t].parentNode.childNodes.length&&y.inlineTags.indexOf(i[t].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(i[t].parentNode):y.inlineTags.indexOf(i[t].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(i[t])},n.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],n.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],n.IGNORE_PARENT_TAGS=["ul","ol","table"],n.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],n.defaultTag="p",n}(),eu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this);this.parent.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.onKeyDown=function(n){switch(n.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:n.callBack,enterAction:n.enterAction});n.event.preventDefault()}},n.prototype.applyClear=function(n){"ClearFormat"===n.subCommand&&(fu.clear(this.parent.currentDocument,this.parent.editableElement,n.enterAction,n.selector),n.callBack&&n.callBack({requestType:n.subCommand,event:n.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},n}(),ou=function(){function n(n,t){this.undoRedoStack=[];this.parent=n;this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps;this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer;this.addEventListener()}return n.prototype.addEventListener=function(){var n=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",n,this);this.parent.observer.on("keydown-handler",this.keyDown,this);this.parent.observer.on("action",this.onAction,this);this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},n.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n.newProp);t<i.length;t++)switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=n.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=n.newProp.undoRedoTimer}},n.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp);this.parent.observer.off("keydown-handler",this.keyDown);this.parent.observer.off("action",this.onAction)},n.prototype.onAction=function(n){"Undo"===n.subCommand?this.undo(n):this.redo(n)},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.keyDown=function(n){var t=n.event;switch(t.action){case"undo":t.preventDefault();this.undo(n);break;case"redo":t.preventDefault();this.redo(n)}},n.prototype.keyUp=function(n){17===n.event.keyCode||n.event.ctrlKey||this.saveData(n)},n.prototype.saveData=function(n){var i=(new a).getRange(this.parent.currentDocument),t=(new a).save(i,this.parent.currentDocument),r={text:this.parent.editableElement.innerHTML,range:t};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1));this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===i.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===t.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===t.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===t.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===r.text.trim()||(this.undoRedoStack.push(r),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),n&&n.callBack&&n.callBack())},n.prototype.undo=function(n){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=i;this.parent.editableElement.focus();v()&&nt(this.parent.editableElement,n.selector);t.restore();this.steps--;n.callBack&&n.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:n.event})}},n.prototype.redo=function(n){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text;this.parent.editableElement.focus();v()&&nt(this.parent.editableElement,n.selector);t.restore();this.steps++;n.callBack&&n.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:n.event})}},n.prototype.getUndoStatus=function(){var n={undo:!1,redo:!1};return this.steps>0&&(n.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(n.redo=!0),n},n}(),su=function(){function n(n){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"];this.ulData=["disc","square","circle","disc","square","circle"];this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"];this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this.borderStyle=["border-top","border-right","border-bottom","border-left"];this.removableElements=["o:p","style"];this.listContents=[];this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},n.prototype.wordCleanup=function(n){var f=n.allowedStylePropertiesArray,r=[],i=n.args.clipboardData.getData("text/HTML"),e=n.args.clipboardData.getData("text/rtf"),t=sf.base.createElement("p"),u;t.setAttribute("id","MSWord-Content");t.innerHTML=i;u=/style='mso-width-source:/i;/class='?Mso|style='[^ ]*\bmso-/i.test(i)||/class="?Mso|style="[^ ]*\bmso-/i.test(i)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(i)||u.test(i)?(this.imageConversion(t,e),i=i.replace(/<img[^>]+>/i,""),this.addListClass(t),r=this.cleanUp(t,r),sf.base.isNullOrUndefined(r[0])||"UL"===r[0].parentElement.tagName||"OL"===r[0].parentElement.tagName||this.listConverter(r),this.styleCorrection(t,f),this.removingComments(t),this.removeUnwantedElements(t),this.removeEmptyElements(t),this.breakLineAddition(t),this.removeClassName(t),u.test(i)&&this.addTableBorderClass(t),n.callBack(t.innerHTML)):n.callBack(t.innerHTML)},n.prototype.addListClass=function(n){for(var i=n.querySelectorAll("*"),t=0;t<i.length;t++)!sf.base.isNullOrUndefined(i[t].getAttribute("style"))&&i[t].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===i[t].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==i[t].tagName.charAt(0)&&i[t].classList.add("msolistparagraph")},n.prototype.addTableBorderClass=function(n){for(var i,r=n.querySelectorAll("table"),u=!1,t=0;t<r.length;t++){for(i=0;i<this.borderStyle.length;i++)if(r[t].innerHTML.indexOf(this.borderStyle[i])>=0){u=!0;break}u&&(r[t].classList.add("e-rte-table-border"),u=!1)}},n.prototype.imageConversion=function(n,t){var i,f;this.checkVShape(n);var r=n.querySelectorAll("img"),u=[],e=[],o=[],s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(r.length>0){for(i=0;i<r.length;i++)u.push(r[i].getAttribute("src")),o.push(r[i].getAttribute("src").split("/")[r[i].getAttribute("src").split("/").length-1].split(".")[0]);for(f=this.hexConversion(t),i=0;i<f.length;i++)e.push(this.convertToBase64(f[i]));for(i=0;i<r.length;i++)u[i].match(s)?r[i].setAttribute("src",u[i]):r[i].setAttribute("src",e[i]),r[i].setAttribute("id","msWordImg-"+o[i])}},n.prototype.checkVShape=function(n){for(var u,r,i=n.querySelectorAll("*"),t=0;t<i.length;t++)switch(i[t].nodeName){case"V:SHAPETYPE":sf.base.detach(i[t]);break;case"V:SHAPE":"V:IMAGEDATA"===i[t].firstElementChild.nodeName&&(u=i[t].firstElementChild.getAttribute("src"),r=sf.base.createElement("img"),r.setAttribute("src",u),i[t].parentElement.insertBefore(r,i[t]),sf.base.detach(i[t]))}},n.prototype.convertToBase64=function(n){var t=this.conHexStringToBytes(n.hex),i=this.conBytesToBase64(t);return n.type?"data:"+n.type+";base64,"+i:null},n.prototype.conBytesToBase64=function(n){for(var t,e="",o=n.length,u=0;u<o;u+=3){var i=n.slice(u,u+3),f=i.length,r=[];if(f<3)for(t=f;t<3;t++)i[t]=0;for(r[0]=(252&i[0])>>2,r[1]=(3&i[0])<<4|i[1]>>4,r[2]=(15&i[1])<<2|(192&i[2])>>6,r[3]=63&i[2],t=0;t<4;t++)e+=t<=f?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[t]):"="}return e},n.prototype.conHexStringToBytes=function(n){for(var i=[],r=n.length/2,t=0;t<r;t++)i.push(parseInt(n.substr(2*t,2),16));return i},n.prototype.hexConversion=function(n){var r,u=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,e=new RegExp("(?:("+u.source+"))([\\da-fA-F\\s]+)\\}","g"),i=n.match(e),f=[],t;if(!sf.base.isNullOrUndefined(i))for(t=0;t<i.length;t++)if(u.test(i[t])){if(-1!==i[t].indexOf("\\pngblip"))r="image/png";else{if(-1===i[t].indexOf("\\jpegblip"))continue;r="image/jpeg"}f.push({hex:r?i[t].replace(u,"").replace(/[^\da-fA-F]/g,""):null,type:r})}return f},n.prototype.removeClassName=function(n){for(var i=n.querySelectorAll("*[class]"),t=0;t<i.length;t++)i[t].removeAttribute("class")},n.prototype.breakLineAddition=function(n){for(var r,u,i=n.querySelectorAll("*"),t=0;t<i.length;t++)0!==i[t].children.length||"&nbsp;"!==i[t].innerHTML||"&nbsp;"!==i[t].innerHTML||i[t].closest("li")||i[t].closest("td")||(r=this.findDetachElem(i[t]),u=sf.base.createElement("br"),sf.base.isNullOrUndefined(r.parentElement)||(r.parentElement.insertBefore(u,r),sf.base.detach(r)))},n.prototype.findDetachElem=function(n){return!sf.base.isNullOrUndefined(n.parentElement)&&""===n.parentElement.textContent.trim()&&"TD"!==n.parentElement.tagName&&sf.base.isNullOrUndefined(n.parentElement.querySelector("img"))?this.findDetachElem(n.parentElement):n},n.prototype.removeUnwantedElements=function(n){for(var r,u,t=n.innerHTML,i=0;i<this.removableElements.length;i++)r=new RegExp("<"+this.removableElements[i]+">","g"),u=new RegExp("<\/"+this.removableElements[i]+">","g"),t=(t=t.replace(r,"")).replace(u,"");n.innerHTML=t;n.querySelectorAll(":empty")},n.prototype.findDetachEmptyElem=function(n){return sf.base.isNullOrUndefined(n.parentElement)?null:""===n.parentElement.textContent.trim()&&"MSWord-Content"!==n.parentElement.getAttribute("id")&&sf.base.isNullOrUndefined(n.parentElement.querySelector("img"))?this.findDetachEmptyElem(n.parentElement):n},n.prototype.removeEmptyElements=function(n){for(var r,i=n.querySelectorAll(":empty"),t=0;t<i.length;t++)(sf.base.isNullOrUndefined(i[t].closest("td"))||sf.base.isNullOrUndefined(i[t].closest("td").querySelector(".MsoNormal"))||(i[t].innerHTML="-"),"IMG"!==i[t].tagName&&"BR"!==i[t].tagName&&"IFRAME"!==i[t].tagName&&"TD"!==i[t].tagName&&"HR"!==i[t].tagName)&&(r=this.findDetachEmptyElem(i[t]),sf.base.isNullOrUndefined(r)||sf.base.detach(r))},n.prototype.styleCorrection=function(n,t){var l=n.querySelectorAll("style"),e,s,h,o,y;if(l.length>0){var a=l[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),v=sf.base.isNullOrUndefined(a)?null:this.findStyleObject(a),r=Object.keys(v),u=r.map(function(n){return v[n]});u=this.removeUnwantedStyle(u,t);this.filterStyles(n,t);for(var f=void 0,c=!1,i=0;i<r.length;i++){if(""===r[i].split(".")[0])f=n.getElementsByClassName(r[i].split(".")[1]),c=!0;else{if(1===r[i].split(".").length&&r[i].split(".")[0].indexOf("@")>=0)continue;f=1===r[i].split(".").length&&r[i].split(".")[0].indexOf("@")<0?n.getElementsByTagName(r[i]):n.querySelectorAll(r[i])}for(e=0;e<f.length;e++)if(s=f[e].getAttribute("style"),sf.base.isNullOrUndefined(s)||""===s.trim())u[i]=u[i].replace(/text-indent:-(.*?)(?=;|$)/gm,""),f[e].setAttribute("style",u[i]);else{if(h=u[i].split(";"),!c)for(o=0;o<h.length;o++)s.indexOf(h[o].split(":")[0])>=0&&(h.splice(o,1),o--);u[i]=h.join(";")+";";y=s+u[i];f[e].setAttribute("style",y)}c=!1}}},n.prototype.filterStyles=function(n,t){for(var r=n.querySelectorAll("*[style]"),i=0;i<r.length;i++){for(var f=r[i].getAttribute("style").split(";"),e="",u=0;u<f.length;u++)t.indexOf(f[u].split(":")[0].trim())>=0&&(e+=f[u]+";");r[i].setAttribute("style",e)}},n.prototype.removeUnwantedStyle=function(n,t){for(var u,r,i=0;i<n.length;i++)for(u=n[i].split(";"),n[i]="",r=0;r<u.length;r++)t.indexOf(u[r].split(":")[0])>=0&&(n[i]+=u[r]+";");return n},n.prototype.findStyleObject=function(n){for(var e,u,f={},r=0;r<n.length;r++){var o=n[r],t=o.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),i=o.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");for(t=t.replace(/^[\s]|[\s]$/gm,""),i=i.replace(/^[\s]|[\s]$/gm,""),t=t.replace(/\n|\r|\n\r/g,""),i=i.replace(/\n|\r|\n\r/g,""),e=t.split(", "),u=0;u<e.length;u++)f[e[u]]=i}return f},n.prototype.removingComments=function(n){var t=n.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,"");n.innerHTML=t},n.prototype.cleanUp=function(n,t){for(var u,f=[],r=n.querySelectorAll("*"),i=0;i<r.length;i++)-1===this.ignorableNodes.indexOf(r[i].nodeName)||3===r[i].nodeType&&""===r[i].textContent.trim()?f.push(r[i]):(r[i].className&&-1!==r[i].className.toLowerCase().indexOf("msolistparagraph")&&1!==r[i].childElementCount&&!sf.base.isNullOrUndefined(r[i].getAttribute("style"))&&r[i].getAttribute("style").indexOf("mso-list:")>=0&&(r[i].className.indexOf("MsoListParagraphCxSpFirst")>=0&&t.length>0&&null!==t[t.length-1]&&t.push(null),t.push(r[i])),!u||-1===this.blockNode.indexOf(r[i].nodeName.toLowerCase())||r[i].className&&-1!==r[i].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(r[i].getAttribute("style"))&&r[i].getAttribute("style").indexOf("mso-list:")>=0||t.push(null),-1!==this.blockNode.indexOf(r[i].nodeName.toLowerCase())&&(u=!!(r[i].className&&-1!==r[i].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(r[i].getAttribute("style"))&&r[i].getAttribute("style").indexOf("mso-list:")>=0)));return t.length&&null!==t[t.length-1]&&t.push(null),t},n.prototype.listConverter=function(n){for(var c,l,o,a,s,u,r,v,i,f=[],h=[],e="",y="",t=0;t<n.length;t++)if(null!==n[t]){if(n[t].getAttribute("style")&&-1!==n[t].getAttribute("style").indexOf("mso-outline-level")&&n[t].setAttribute("style",n[t].getAttribute("style").replace("mso-outline-level","mso-outline")),v=(e=n[t].getAttribute("style"))&&-1!==e.indexOf("level")?parseInt(e.charAt(e.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(n[t]),c=void 0,!sf.base.isNullOrUndefined(this.listContents[0])){for(c=this.listContents[0].trim().length>1?"ol":"ul",l=[],o=1;o<this.listContents.length;o++)l.push(this.listContents[o]);a=void 0;sf.base.isNullOrUndefined(n[t].className)||(a=n[t].className);sf.base.isNullOrUndefined(n[t].getAttribute("style"))||(n[t].setAttribute("style",n[t].getAttribute("style").replace("text-align:start;","")),""!==n[t].style.textAlign&&(n[t].setAttribute("style","text-align:"+n[t].style.textAlign),y=n[t].getAttribute("style")));h.push({listType:c,content:l,nestedLevel:v,"class":a,listStyle:y})}}else f.push({content:this.makeConversion(h),node:n[t-1]}),h=[];for(i=n.shift();i;){for(s=[],u=0;u<f.length;u++)if(f[u].node===i){for(r=0;r<f[u].content.childNodes.length;r++)s.push(f[u].content.childNodes[r]);for(r=0;r<s.length;r++)i.parentElement.insertBefore(s[r],i);break}i.remove();(i=n.shift())||(i=n.shift())}},n.prototype.makeConversion=function(n){for(var u,s,h,i,r,f,e=sf.base.createElement("div"),o=1,c=0,t=0;t<n.length;t++){if(u=sf.base.createElement("p"),u.innerHTML=n[t].content.join(" "),1===n[t].nestedLevel&&0===c&&n[t].content)e.appendChild(i=sf.base.createElement(n[t].listType)),(r=sf.base.createElement("li")).appendChild(u),i.appendChild(r),i.setAttribute("level",n[t].nestedLevel.toString()),i.style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel);else if(n[t].nestedLevel===o)r.parentElement.tagName.toLowerCase()===n[t].listType?(r.parentElement.appendChild(r=sf.base.createElement("li")),r.appendChild(u)):(i=sf.base.createElement(n[t].listType),r.parentElement.parentElement.appendChild(i),(r=sf.base.createElement("li")).appendChild(u),i.appendChild(r),i.setAttribute("level",n[t].nestedLevel.toString()));else if(n[t].nestedLevel>o)if(sf.base.isNullOrUndefined(r))e.appendChild(i=sf.base.createElement(n[t].listType)),(r=sf.base.createElement("li")).appendChild(u),i.appendChild(r),i.setAttribute("level",n[t].nestedLevel.toString()),i.style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel);else{for(s=0;s<n[t].nestedLevel-o;s++)r.appendChild(i=sf.base.createElement(n[t].listType)),r=sf.base.createElement("li",{styles:"list-style-type: none;"}),i.appendChild(r);r.appendChild(u);i.setAttribute("level",n[t].nestedLevel.toString());i.style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel);i.childNodes[0].style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel)}else if(1===n[t].nestedLevel)e.lastChild.tagName.toLowerCase()===n[t].listType?i=e.lastChild:e.appendChild(i=sf.base.createElement(n[t].listType)),(r=sf.base.createElement("li")).appendChild(u),i.appendChild(r),i.setAttribute("level",n[t].nestedLevel.toString()),i.style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel);else for(f=r;f.parentElement;)if((f=f.parentElement).attributes.getNamedItem("level")){if(parseInt(f.attributes.getNamedItem("level").textContent,null)===n[t].nestedLevel){(r=sf.base.createElement("li")).appendChild(u);f.appendChild(r);break}if(n[t].nestedLevel>parseInt(f.attributes.getNamedItem("level").textContent,null)){f.appendChild(i=sf.base.createElement(n[t].listType));(r=sf.base.createElement("li")).appendChild(u);i.appendChild(r);i.setAttribute("level",n[t].nestedLevel.toString());i.style.listStyle=this.getListStyle(n[t].listType,n[t].nestedLevel);break}}r.setAttribute("class",n[t].class);h=r.getAttribute("style");r.setAttribute("style",(sf.base.isNullOrUndefined(h)?"":h)+n[t].listStyle);o=n[t].nestedLevel;c++}return e},n.prototype.getListStyle=function(n,t){return t=t>0?t-1:t,"ol"===n?t<this.olData.length?this.olData[t]:this.olData[0]:t<this.ulData.length?this.ulData[t]:this.ulData[0]},n.prototype.getListContent=function(n){var r="",t=n.firstElementChild,f,i,u;if(""!==t.textContent.trim()||sf.base.isNullOrUndefined(t.firstElementChild)||"IMG"!==t.firstElementChild.nodeName)if(f=["b","em"],t.childNodes.length>0&&(t.querySelectorAll("b").length>0||t.querySelectorAll("em").length>0))for(i=0;i<t.childNodes.length;i++)u=t.childNodes[i].nodeName.toLowerCase(),t.childNodes[i].textContent.trim().length>1&&-1!==f.indexOf(u)?(r="<"+u+">"+t.childNodes[i].textContent+"<\/"+u+">",this.listContents.push(r)):1===t.childNodes[i].textContent.trim().length&&this.listContents.push(t.childNodes[i].textContent.trim());else r=t.textContent.trim(),this.listContents.push(r);else r=n.innerHTML.trim(),this.listContents.push(""),this.listContents.push(r);sf.base.detach(t);this.listContents.push(n.innerHTML)},n}(),hu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},n.prototype.insertText=function(n){var t=document.createTextNode(n.value);w.Insert(this.parent.currentDocument,t);n.callBack&&n.callBack({requestType:n.subCommand,editorMode:"HTML",event:n.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},n}(),cu=function(){function n(n){this.currentDocument=n.document;this.editableElement=n.editableElement;this.nodeSelection=new a;this.nodeCutter=new ut;this.domNode=new ni(this.editableElement,this.currentDocument);this.observer=new sf.base.Observer(this);this.listObj=new wr(this);this.formatObj=new br(this);this.alignmentObj=new dr(this);this.indentsObj=new gr(this);this.linkObj=new kr(this);this.imgObj=new nu(this);this.selectionObj=new ru(this);this.inserthtmlObj=new uu(this);this.insertTextObj=new hu(this);this.clearObj=new eu(this);this.tableObj=new tu(this);this.undoRedoManager=new ou(this,n.options);this.msWordPaste=new su(this);this.wireEvents()}return n.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this);this.observer.on("keyup",this.editorKeyUp,this);this.observer.on("keyup",this.editorKeyUp,this);this.observer.on("model_changed",this.onPropertyChanged,this);this.observer.on("ms_word_cleanup",this.onWordPaste,this);this.observer.on("onBegin",this.onBegin,this)},n.prototype.onWordPaste=function(n){this.observer.notify("ms_word_cleanup_plugin",n)},n.prototype.onPropertyChanged=function(n){this.observer.notify("model_changed_plugin",n)},n.prototype.editorKeyDown=function(n){this.observer.notify("keydown-handler",n)},n.prototype.editorKeyUp=function(n){this.observer.notify("keyup-handler",n)},n.prototype.onBegin=function(n){this.observer.notify("actionBegin",n)},n.prototype.execCommand=function(n,t,i,r,u,f,e,o){switch(n.toLocaleLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:r,selector:e,item:f,enterAction:o});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:r,selector:e,exeValue:f,enterAction:o});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:r,selector:e,value:f});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:r,selector:e});break;case"links":this.observer.notify("INSERT-LINK",{command:n,value:t,item:f,event:i,callBack:r});break;case"files":this.observer.notify(bt,{command:n,value:"Image",item:f,event:i,callBack:r,selector:e});break;case"images":this.observer.notify(bt,{command:n,value:t,item:f,event:i,callBack:r,selector:e});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:f,event:i,callBack:r,enterAction:o});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:f,event:i,callBack:r});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:f,event:i,callBack:r});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:f,event:i,callBack:r});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:f,event:i,callBack:r});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:f,event:i,callBack:r});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:f,event:i,callBack:r});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:f,event:i,callBack:r});break;case"merge":this.observer.notify("TABLE_MERGE",{item:f,event:i,callBack:r});break;case"horizontalsplit":this.observer.notify("TABLE_HORIZONTAL_SPLIT",{item:f,event:i,callBack:r});break;case"verticalsplit":this.observer.notify("TABLE_VERTICAL_SPLIT",{item:f,event:i,callBack:r})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:r,value:u,selector:e,enterAction:o});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:r,value:u});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:r,value:u});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:r,selector:e,enterAction:o});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:r,selector:e})}},n}(),lu=(dt=function(n,t){return(dt=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}dt(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),au=function(n){function t(t){var i=n.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return lu(t,n),t.prototype.initialize=function(){this.keyConfig=yr},t.prototype.updateFormatter=function(n,t,i){n&&t&&(this.editorManager=new cu({document:t,editableElement:n,options:i}))},t}(yi),vu=function(){function n(n){this.rangeCollection=[];this.parent=n;this.xhtmlValidation=new cr(n);this.addEventListener()}return n.prototype.addEventListener=function(){this.nodeSelectionObj=new a;this.parent.observer.on("html-toolbar-click",this.onToolbarClick,this);this.parent.observer.on(s,this.onKeyDown,this);this.parent.observer.on(l,this.render,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on("selectAll",this.selectAll,this);this.parent.observer.on("selectRange",this.selectRange,this);this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this);this.parent.observer.on(h,this.onSelectionSave,this);this.parent.observer.on(c,this.onSelectionRestore,this);this.parent.observer.on("readOnlyMode",this.updateReadOnly,this);this.parent.observer.on(et,this.onPaste,this)},n.prototype.sanitizeHelper=function(n){return oi(n,this.parent)},n.prototype.updateReadOnly=function(){this.parent.readonly?(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"false"}),sf.base.addClass([this.parent.element],"e-rte-readonly")):(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"true"}),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},n.prototype.onSelectionSave=function(){var n=this.parent.getDocument(),t=this.nodeSelectionObj.getRange(n);this.saveSelection=this.nodeSelectionObj.save(t,n)},n.prototype.onSelectionRestore=function(n){this.parent.isBlur=!1;this.parent.getEditPanel().focus();(sf.base.isNullOrUndefined(n.items)||n.items)&&this.saveSelection.restore()},n.prototype.onKeyDown=function(n){var i,e=this,t=n.args,o,r,u,l;if(("chrome"===sf.base.Browser.info.name&&(i=this.parent.getRange(),this.backSpaceCleanup(n,i),this.deleteCleanup(n,i)),9===t.keyCode&&sf.base.isNullOrUndefined(sf.base.closest(t.target,".e-rte-toolbar"))&&this.parent.enableTabKey)&&(o=this.nodeSelectionObj.getRange(this.parent.getDocument()),r=this.nodeSelectionObj.getParentNodeCollection(o),("LI"===r[0].nodeName||sf.base.closest(r[0],"li")||sf.base.closest(r[0],"table"))&&0===o.startOffset||((t.preventDefault(),t.shiftKey)?this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length&&(u=this.rangeCollection[this.rangeCollection.length-1].startContainer,this.nodeSelectionObj.setSelectionText(this.parent.getDocument(),u,u,0,u.textContent.length),w.Insert(this.parent.getDocument(),document.createTextNode("")),this.rangeCollection.pop()):(w.Insert(this.parent.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.parent.getDocument()))))),"space"===n.args.action){var s=this.parent.getRange(),h=s.startContainer.textContent.slice(0,s.startOffset),f=this.isOrderedList(h),c=this.isUnOrderedList(h);(f&&!c||c&&!f)&&(l={callBack:null,event:n.args,name:"keydown-handler"},this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:f?"OL":"UL",cancel:!1}).then(function(n){n.cancel||(e.parent.formatter.editorManager.observer.notify("onBegin",l),e.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{editorMode:e.parent.editorMode,name:"ActionCompleteEvent",requestType:f?"OL":"UL"}))}))}"space"!==n.args.action&&"enter"!==n.args.action||this.spaceLink(t);"chrome"!==sf.base.Browser.info.name||(sf.base.isNullOrUndefined(this.rangeElement)||sf.base.isNullOrUndefined(this.oldRangeElement))&&(sf.base.isNullOrUndefined(this.deleteRangeElement)||sf.base.isNullOrUndefined(this.deleteOldRangeElement))||"TD"===i.startContainer.parentElement.tagName||"TH"===i.startContainer.parentElement.tagName||(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,t.preventDefault())},n.prototype.isOrderedList=function(n){var i,t;if(n=n.replace(/\u200B/g,""),i=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/],!sf.base.isNullOrUndefined(n))for(t=0;t<i.length;t++)if(i[t].test(n))return!0;return!1},n.prototype.isUnOrderedList=function(n){var i,t;if(n=n.replace(/\u200B/g,""),i=[/^[*]$/,/^[-]$/],!sf.base.isNullOrUndefined(n))for(t=0;t<i.length;t++)if(i[t].test(n))return!0;return!1},n.prototype.backSpaceCleanup=function(n,t){var r=!1,i;if("Backspace"===n.args.code&&8===n.args.keyCode&&0===t.startOffset&&0===t.endOffset&&0===this.parent.getSelection().length&&t.startContainer.textContent.length>0&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.rangeElement=this.getRootBlockNode(t.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName)i=this.getRangeLiNode(t.startContainer),i.previousElementSibling&&i.previousElementSibling.childElementCount>0&&(this.oldRangeElement=i.previousElementSibling.lastElementChild,sf.base.isNullOrUndefined(i.lastElementChild)?this.rangeElement=i:(this.rangeElement=i.lastElementChild,r=!0));else{if("TABLE"===this.rangeElement.tagName||!sf.base.isNullOrUndefined(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(sf.base.isNullOrUndefined(this.oldRangeElement))return;if("OL"!==this.oldRangeElement.tagName&&"UL"!==this.oldRangeElement.tagName||(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.oldRangeElement,this.oldRangeElement.childNodes.length),this.oldRangeElement.querySelector("BR")&&sf.base.detach(this.oldRangeElement.querySelector("BR")),!sf.base.isNullOrUndefined(this.rangeElement)&&this.oldRangeElement!=this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);r?sf.base.detach(this.rangeElement.parentElement):sf.base.detach(this.rangeElement);this.oldRangeElement.normalize()}}},n.prototype.deleteCleanup=function(n,t){var i,u,r=!1;if("Delete"===n.args.code&&46===n.args.keyCode&&0!==this.parent.getText().trim().length&&0===this.parent.getSelection().length&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.deleteRangeElement=u=this.getRootBlockNode(t.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)(i=this.getRangeLiNode(t.startContainer)).nextElementSibling&&i.nextElementSibling.childElementCount>0&&!i.nextElementSibling.querySelector("BR")?sf.base.isNullOrUndefined(i.lastElementChild)?this.deleteRangeElement=i:(this.deleteRangeElement=i.lastElementChild,r=!0):this.deleteRangeElement=this.getRangeElement(i);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!sf.base.isNullOrUndefined(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(t,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(this.deleteOldRangeElement=sf.base.isNullOrUndefined(i)?this.deleteRangeElement.nextElementSibling:r||!sf.base.isNullOrUndefined(i.nextElementSibling)?this.getRangeElement(i.nextElementSibling):u.nextElementSibling,sf.base.isNullOrUndefined(this.deleteOldRangeElement))return;if(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.deleteRangeElement.querySelector("BR")&&sf.base.detach(this.deleteRangeElement.querySelector("BR")),sf.base.isNullOrUndefined(this.deleteRangeElement)||"OL"===this.deleteOldRangeElement.tagName||"UL"===this.deleteOldRangeElement.tagName||this.deleteOldRangeElement===this.deleteRangeElement)this.deleteRangeElement=null,this.deleteOldRangeElement=null;else{for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);r?sf.base.detach(this.deleteOldRangeElement.parentElement):sf.base.detach(this.deleteOldRangeElement);this.deleteRangeElement.normalize()}}else this.deleteRangeElement=null}},n.prototype.getCaretIndex=function(n,t){var r=0,i;return 0!==this.parent.getDocument().getSelection().rangeCount&&(i=n.cloneRange(),i.selectNodeContents(t),i.setEnd(n.endContainer,n.endOffset),r=i.toString().length),r},n.prototype.getRangeElement=function(n){return n.lastElementChild?"BR"===n.lastElementChild.tagName?n.lastElementChild.previousElementSibling?n.lastElementChild.previousElementSibling:n:n.lastElementChild:n},n.prototype.getRootBlockNode=function(n){for(;n&&this.parent&&this.parent.inputElement!=n&&n.parentElement!==this.parent.inputElement;n=n)n=n.parentElement;return n},n.prototype.getRangeLiNode=function(n){for(var t=n.parentElement;t!=this.parent.inputElement&&(1!==t.nodeType||"LI"!==t.tagName);)t=t.parentElement;return t},n.prototype.onPaste=function(n){var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi),u,e,r,c;if(n.text.match(a)){n.args.preventDefault();for(var v=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),y=(this.parent.formatter.editorManager.nodeSelection.save(v,this.parent.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),p=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=n.text.split("\n"),s="",i=0;i<o.length;i++)if(""===o[i].trim())s+="<p><br><\/p>";else{for(var f="",l=!0,h=o[i].split(" "),t=0;t<h.length;t++)""===h[t].trim()?f+=l?"&nbsp;":" ":(l=!1,f+=h[t]+" ");s+=0===i?"<span>"+f.trim()+"<\/span>":"<p>"+f.trim()+"<\/p>"}for(u=document.createElement("div"),u.setAttribute("class","pasteContent"),u.style.display="inline",u.innerHTML=s,e=u.querySelectorAll("span, p"),i=0;i<e.length;i++){for(r=e[i].innerHTML.split(" "),c="",t=0;t<r.length;t++)c+=r[t].match(y)||r[t].match(p)?'<a className="e-rte-anchor" href="'+r[t]+'" title="'+r[t]+'">'+r[t]+" <\/a>":r[t]+" ";e[i].innerHTML=c.trim()}n.callBack(u.innerHTML)}},n.prototype.spaceLink=function(n){var i=this.nodeSelectionObj.getRange(this.parent.getDocument()),s=this.nodeSelectionObj.getParentNodeCollection(i),u=i.startContainer.textContent.substr(0,i.endOffset),r=u.split(" "),t=r[r.length-1],h=i.startOffset-(u.length-r[r.length-1].length),f,e,o;t=t.slice(0,h);f=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);"A"!==s[0].nodeName&&t.match(f)&&(e=this.nodeSelectionObj.save(i,this.parent.getDocument()),o={url:t.indexOf("http")>-1?t:"http://"+t,selection:e,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),text:t,title:"",target:"_blank"},this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},n,o))},n.prototype.onToolbarClick=function(n){var i,r,u,t=n.item,e=n.originalEvent.target,o=e&&sf.base.closest(e,".e-rte-quick-popup"),f;if(o&&!o.classList.contains("e-rte-inline-popup"))"SourceCode"!==t.subCommand&&"Preview"!==t.subCommand&&"FontColor"!==t.subCommand&&"BackgroundColor"!==t.subCommand&&(v()&&"Images"===t.command&&this.nodeSelectionObj.restore(),f=this.nodeSelectionObj.getRange(this.parent.getDocument()),i=this.nodeSelectionObj.save(f,this.parent.getDocument()),r=this.nodeSelectionObj.getNodeCollection(f),u=this.nodeSelectionObj.getParentNodeCollection(f)),"Images"===t.command&&this.parent.observer.notify("image-toolbar-action",{member:"image",args:n,selectNode:r,selection:i,selectParent:u}),"Links"===t.command&&this.parent.observer.notify("link-toolbar-action",{member:"link",args:n,selectNode:r,selection:i,selectParent:u}),"Table"===t.command&&this.parent.observer.notify("table-toolbar-action",{member:"table",args:n,selectNode:r,selection:i,selectParent:u});else{"SourceCode"!==t.subCommand&&"Preview"!==t.subCommand&&"FontColor"!==t.subCommand&&"BackgroundColor"!==t.subCommand&&(f=this.nodeSelectionObj.getRange(this.parent.getDocument()),i=this.nodeSelectionObj.save(f,this.parent.getDocument()),r=this.nodeSelectionObj.getNodeCollection(f),u=this.nodeSelectionObj.getParentNodeCollection(f));switch(t.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:n});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:n});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:n,selectNode:r,selection:i,selectParent:u});break;case"RemoveLink":this.parent.observer.notify("unLink",{member:"link",args:n,selectNode:r,selection:i,selectParent:u});break;case"Print":this.parent.print();break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:n,selectNode:r,selection:i,selectParent:u});break;case"CreateTable":this.parent.observer.notify("createTable",{member:"table",args:n,selection:i});break;case"SourceCode":this.parent.observer.notify("sourceCode",{member:"viewSource",args:n});break;case"Preview":this.parent.observer.notify("updateSource",{member:"updateSource",args:n});break;case"FontColor":case"BackgroundColor":break;default:this.parent.formatter.process(this.parent,n,n.originalEvent,null)}}},n.prototype.render=function(){var n=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter=new au({currentDocument:this.parent.getDocument(),element:n,options:t});this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new ar(this.parent));this.parent.inlineMode.enable&&(sf.base.isNullOrUndefined(this.parent.fontFamily.default)||(n.style.fontFamily=this.parent.fontFamily.default),sf.base.isNullOrUndefined(this.parent.fontSize.default)||(n.style.fontSize=this.parent.fontSize.default));this.parent.observer.notify("bind-on-end",{})},n.prototype.selectAll=function(){var n=function n(t,i){var r=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?r.push(i):r=r.concat(n(t,i));return r}(this.parent.getDocument(),this.parent.getEditPanel());n.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),n[0],n[n.length-1],0,n[n.length-1].textContent.length)},n.prototype.selectRange=function(n){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),n.range)},n.prototype.getSelectedHtml=function(n){n.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()).toString())},n.prototype.removeEventListener=function(){this.parent.observer.off(l,this.render);this.parent.observer.off("html-toolbar-click",this.onToolbarClick);this.parent.observer.off(t,this.destroy);this.parent.observer.off(s,this.onKeyDown);this.parent.observer.off("selectAll",this.selectAll);this.parent.observer.off("selectRange",this.selectRange);this.parent.observer.off("getSelectedHtml",this.getSelectedHtml);this.parent.observer.off(h,this.onSelectionSave);this.parent.observer.off(c,this.onSelectionRestore);this.parent.observer.off("readOnlyMode",this.updateReadOnly);this.parent.observer.off(et,this.onPaste)},n.prototype.destroy=function(){this.removeEventListener()},n}(),yu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.showFullScreen=function(){var n=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars();this.scrollableParent=sf.popups.getScrollableParent(this.parent.element);this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Maximize",cancel:!1}).then(function(t){t.cancel||n.showActionBeginCallback()}):this.showActionBeginCallback();setTimeout(function(){n.parent.setContentHeight();n.parent.inputElement.focus()},100)},n.prototype.showActionBeginCallback=function(){this.toggleParentOverflow(!0);this.parent.setContentHeight();this.invokeActionComplete("Maximize")},n.prototype.hideFullScreen=function(){var t=this,i,n;for(!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),i=document.querySelectorAll(".e-rte-overflow"),n=0;n<i.length;n++)sf.base.removeClass([i[n]],["e-rte-overflow"]);this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Minimize",cancel:!1}).then(function(n){n.cancel||t.hideActionBeginCallback()}):this.hideActionBeginCallback();setTimeout(function(){t.parent.setContentHeight();t.parent.inputElement.focus()},100)},n.prototype.hideActionBeginCallback=function(){this.parent.setContentHeight();this.invokeActionComplete("Minimize")},n.prototype.invokeActionComplete=function(n){this.parent.actionCompleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:n})},n.prototype.toggleParentOverflow=function(){var n,t;if(!sf.base.isNullOrUndefined(this.scrollableParent))for(n=0;n<this.scrollableParent.length;n++)"#document"===this.scrollableParent[n].nodeName?(t=document.querySelector("body"),sf.base.addClass([t],["e-rte-overflow"])):(t=this.scrollableParent[n],sf.base.addClass([t],["e-rte-overflow"]))},n.prototype.onKeyDown=function(n){var t=n.args;switch(t.action){case"full-screen":this.parent.dotNetRef.invokeMethodAsync("ShowFullScreenClient");this.showFullScreen(n.args);t.preventDefault();break;case"escape":this.parent.dotNetRef.invokeMethodAsync("HideFullScreenClient");this.hideFullScreen(n.args);t.preventDefault()}},n.prototype.addEventListener=function(){this.parent.observer.on("enableFullScreen",this.showFullScreen,this);this.parent.observer.on("disableFullScreen",this.hideFullScreen,this);this.parent.observer.on(s,this.onKeyDown,this);this.parent.observer.on(t,this.destroy,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("enableFullScreen",this.showFullScreen);this.parent.observer.off("disableFullScreen",this.hideFullScreen);this.parent.observer.off(s,this.onKeyDown);this.parent.observer.off(t,this.destroy)},n.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var t=document.querySelectorAll(".e-rte-overflow"),n=0;n<t.length;n++)sf.base.removeClass([t[n]],["e-rte-overflow"]);this.removeEventListener()},n}(),pu={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,"delete":46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},ti=function(){function n(t,i){var r=this;this.keyPressHandler=function(t){for(var h,i,c=t.altKey,l=t.ctrlKey,a=t.shiftKey,v=t.metaKey,y=t.which,u=0,e=Object.keys(r.keyConfigs);u<e.length;u++)for(var o=e[u],f=0,s=r.keyConfigs[o].split(",");f<s.length;f++)h=s[f],i=n.getKeyConfigData(h.trim()),c===i.altKey&&(l===i.ctrlKey||v)&&a===i.shiftKey&&y===i.keyCode&&(t.action=o);r.keyAction&&r.keyAction(t)};this.element=t;sf.base.extend(this,this,i);this.onKeyPressHandler=this.keyPressHandler.bind(this);this.bind()}return n.prototype.destroy=function(){this.unWireEvents()},n.prototype.bind=function(){this.wireEvents()},n.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.onKeyPressHandler)},n.prototype.unWireEvents=function(){this.element.removeEventListener(this.eventName,this.onKeyPressHandler)},n.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[t];var i=t.toLowerCase().split("+"),r={altKey:-1!==i.indexOf("alt"),ctrlKey:-1!==i.indexOf("ctrl"),shiftKey:-1!==i.indexOf("shift"),keyCode:null};return r.keyCode=i[i.length-1].length>1&&Number(i[i.length-1])?Number(i[i.length-1]):n.getKeyCode(i[i.length-1]),n.configCache[t]=r,r},n.getKeyCode=function(n){return pu[n]||n.toUpperCase().charCodeAt(0)},n.configCache={},n}(),wu=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("sourceCode",this.sourceCode,this);this.parent.observer.on("initial-end",this.onInitialEnd,this);this.parent.observer.on("updateSource",this.updateSourceCode,this);this.parent.observer.on("destroy",this.destroy,this)},n.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.removeEventListener=function(){this.unWireEvent();this.parent.observer.off("sourceCode",this.sourceCode);this.parent.observer.off("updateSource",this.updateSourceCode);this.parent.observer.off("initial-end",this.onInitialEnd);this.parent.observer.off("destroy",this.destroy);this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},n.prototype.getSourceCode=function(){return sf.base.createElement("textarea",{className:"e-rte-srctextarea"})},n.prototype.wireEvent=function(n){this.keyboardModule=new ti(n,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"});sf.base.EventHandler.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},n.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy();this.previewElement&&sf.base.EventHandler.remove(this.previewElement,"mousedown",this.mouseDownHandler)},n.prototype.wireBaseKeyDown=function(){this.keyboardModule=new ti(this.parent.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},n.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},n.prototype.mouseDownHandler=function(n){this.parent.observer.notify("sourceCodeMouseDown",{args:n})},n.prototype.previewKeyDown=function(n){switch(n.action){case"html-source":this.parent.dotNetRef.invokeMethodAsync("PreviewCodeClient");this.updateSourceCode(n);n.preventDefault();break;case"toolbar-focus":this.parent.toolbarSettings.enable&&this.parent.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}},n.prototype.onKeyDown=function(n){switch(n.event.action){case"html-source":n.event.preventDefault();this.parent.dotNetRef.invokeMethodAsync("ViewSourceClient");this.sourceCode(n);n.callBack({requestType:"SourceCode",editorMode:"HTML",event:n.event})}},n.prototype.sourceCode=function(){var n=this;this.parent.isBlur=!1;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"SourceCode",cancel:!1}).then(function(t){var r,i;t.cancel||(r=sf.base.selectAll(".e-toolbar-item",n.parent.element),(sf.base.isNullOrUndefined(n.previewElement)&&(n.previewElement=n.getSourceCode()),n.parent.updateValueData(),n.parent.iframeSettings.enable)?(i=void 0,(i=sf.base.isNullOrUndefined(n.parent.element.querySelector("#"+n.parent.element.id+"_source-view"))?sf.base.createElement("div",{className:"e-source-content",id:n.parent.element.id+"_source-view"}):n.parent.element.querySelector("#"+n.parent.element.id+"_source-view")).appendChild(n.previewElement),n.parent.element.appendChild(i),i.style.height=n.parent.getPanel().style.height,i.style.marginTop=n.parent.getPanel().style.marginTop,n.getPanel().value=n.getTextAreaValue(n.parent.getEditPanel()),n.parent.getPanel().style.display="none",i.style.display="block",n.getPanel().style.display="block"):(n.parent.inputElement.parentElement.appendChild(n.previewElement),n.getPanel().value=n.getTextAreaValue(n.parent.getEditPanel()),n.parent.inputElement.style.display="none",n.previewElement.style.display="block"),(n.parent.isBlur=!1,n.parent.getToolbar()&&sf.base.removeClass([n.parent.getToolbar()],["e-expand-open"]),sf.base.removeClass(r,["e-active"]),n.parent.setContentHeight("sourceCode",!0),n.wireEvent(n.previewElement),n.unWireBaseKeyDown(),n.previewElement.focus(),n.parent.updateValue(),sf.base.isNullOrUndefined(n.parent.placeholder)||n.parent.iframeSettings.enable)||(n.parent.element.querySelector(".rte-placeholder").style.display="none"),n.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"SourceCode"}).then(function(){n.parent.invokeChangeEvent()}))})},n.prototype.updateSourceCode=function(){var n=this;this.parent.isBlur=!1;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Preview",cancel:!1}).then(function(t){if(!t.cancel){var i=n.getPanel(),u=n.parent.serializeValue(i.value),r=null===u||""===u?"<p><br/><\/p>":u;(n.parent.iframeSettings.enable?(i.parentElement.style.display="none",i.style.display="none",n.parent.contentPanel.style.display="block",n.parent.getEditPanel().innerHTML=n.parent.enableHtmlEncode?d(r):r):(i.style.display="none",n.parent.getEditPanel().style.display="block",n.parent.getEditPanel().innerHTML=n.parent.enableHtmlEncode?d(r):r),n.parent.isBlur=!1,n.parent.getToolbar()&&sf.base.removeClass([n.parent.getToolbar()],["e-expand-open"]),n.parent.setContentHeight("preview",!0),n.unWireEvent(),n.wireBaseKeyDown(),n.parent.getEditPanel().focus(),n.parent.updateValue(),sf.base.isNullOrUndefined(n.parent.placeholder)||0!==n.parent.getEditPanel().innerText.length)||(n.parent.element.querySelector(".rte-placeholder").style.display="block");n.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"Preview"}).then(function(){n.parent.invokeChangeEvent()})}})},n.prototype.getTextAreaValue=function(n){var t;return t=this.parent.enableXhtml?this.parent.getXhtmlString(this.parent.value):this.parent.value,"<p><br><\/p>"===n.innerHTML||1===n.childNodes.length&&"P"===n.childNodes[0].tagName&&7===n.innerHTML.length?"":t},n.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},n.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},n.prototype.destroy=function(){this.removeEventListener()},n}(),bu=function(){function n(n){this.parent=n}return n.prototype.quickToolbarOpen=function(){this.parent.dotNetRef.invokeMethodAsync("QuickToolbarOpenEvent",this.popupObj.element.classList.toString(),this.targetType)},n.prototype.renderPopup=function(n,t){this.targetType=t;n.popupObj=new sf.popups.Popup(n.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)});this.popupObj=n.popupObj;n.popupObj.hide()},n}(),ct=function(){function n(n){this.parent=n;this.isDOMElement=!1;this.popupRenderer=new bu(n)}return n.prototype.render=function(n,t){this.element=n;this.popupRenderer.renderPopup(this,t);this.addEventListener()},n.prototype.setPosition=function(n){var r,u,f=sf.base.closest(n.target,".e-img-caption"),t=sf.base.isNullOrUndefined(f)?n.target:f,i=t.offsetTop,e=window.pageYOffset+n.parentData.top;u=i-n.editTop>n.popHeight?e+n.tBarElementHeight+(i-n.editTop)-n.popHeight-5:n.editTop+n.editHeight-(i+t.offsetHeight)>n.popHeight?e+n.tBarElementHeight+(i-n.editTop)+t.offsetHeight+5:n.y;r=t.offsetWidth>n.popWidth?t.offsetWidth/2-n.popWidth/2+n.parentData.left+t.offsetLeft:n.parentData.left+t.offsetLeft;this.popupObj.position.X=r+n.popWidth>n.parentData.right?n.parentData.right-n.popWidth:r;this.popupObj.position.Y=u>=0?u:n.y+5;this.popupObj.dataBind()},n.prototype.checkCollision=function(n,t,i){for(var f,e,r=n.parentData.top,o=n.windowY+r+n.tBarElementHeight,s=[],s="document"===t?sf.popups.isCollide(n.popup):sf.popups.isCollide(n.popup,n.parentElement),u=0;u<s.length;u++)switch(s[u]){case"top":e="document"===t?n.windowY:window.pageYOffset+r+n.tBarElementHeight;break;case"bottom":e="document"===t?"inline"===i?n.y-n.popHeight-10:n.windowHeight-(r+n.tBarElementHeight)>n.popHeight?o-n.windowHeight>n.popHeight?o+(n.windowHeight-r)-n.popHeight:o:n.windowY+(r+n.tBarElementHeight):"IMG"!==n.target.tagName?n.parentData.bottom+window.pageYOffset-n.popHeight-10:n.parentData.bottom+window.pageYOffset-n.popHeight-5;break;case"right":f="inline"===i?window.pageXOffset+(n.windowWidth-(n.popWidth+n.bodyRightSpace+10)):n.x-n.popWidth;break;case"left":f="inline"===i?0:n.parentData.left}this.popupObj.position.X=f||this.popupObj.position.X;this.popupObj.position.Y=e||this.popupObj.position.Y;this.popupObj.dataBind()},n.prototype.showPopup=function(n,t,i,r){var u=this;this.parent.onQuickTbOpenEnabled?this.parent.dotNetRef.invokeMethodAsync("BeforeQuickToolbarOpenEvent").then(function(f){f.cancel||u.onQuickTbOpenCallback(n,t,i,r)}):this.onQuickTbOpenCallback(n,t,i,r)},n.prototype.onQuickTbOpenCallback=function(n,t,i,r){var e,s,u,c=window.getComputedStyle(document.body),a=parseFloat(c.marginRight.split("px")[0])+parseFloat(c.paddingRight.split("px")[0]),v=window.innerHeight,y=window.innerWidth,l=this.parent.element,h=!sf.base.isNullOrUndefined(this.parent.getToolbar()),p=h&&this.parent.toolbarModule.getToolbarHeight(),w=h&&this.parent.toolbarModule.getExpandTBarPopHeight(),b=h?p+w:0,f;(sf.base.addClass([this.element],["e-hide"]),sf.base.Browser.isDevice&&!o()&&sf.base.addClass([this.parent.getToolbar()],["e-hide"]),this.parent.iframeSettings.enable)?(e=(u=this.parent.getPanel().contentWindow).pageYOffset,s=u.innerHeight):(e=(u=sf.base.closest(i,".e-rte-content"))?u.scrollTop:0,s=u?u.offsetHeight:0);this.parent.inlineMode.enable||sf.base.closest(i,"table");sf.base.append([this.element],document.body);this.popupObj.position.X=n+20;this.popupObj.position.Y=t+20;this.popupObj.dataBind();this.popupObj.element.classList.add("e-popup-open");f={x:n,y:t,target:i,editTop:e,editHeight:s,popup:this.popupObj.element,popHeight:this.popupObj.element.offsetHeight,popWidth:this.popupObj.element.offsetWidth,parentElement:l,bodyRightSpace:a,windowY:window.pageYOffset,windowHeight:v,windowWidth:y,parentData:l.getBoundingClientRect(),tBarElementHeight:b};"IMG"===i.tagName&&this.setPosition(f);this.parent.inlineMode.enable||this.checkCollision(f,"parent","");this.checkCollision(f,"document",this.parent.inlineMode.enable?"inline":"");this.popupObj.element.classList.remove("e-popup-close");sf.base.removeClass([this.element],["e-hide"]);this.popupObj.show({name:"ZoomIn",duration:250});sf.base.setStyleAttribute(this.element,{maxWidth:window.outerWidth+"px"});sf.base.addClass([this.element],["e-rte-pop"]);this.isDOMElement=!0;this.parent.dotNetRef.invokeMethodAsync("UpdateClass",this.popupObj.element.classList.toString(),r)},n.prototype.hidePopup=function(){var n=this.parent.viewSourceModule.getViewPanel();sf.base.Browser.isDevice&&!o()&&sf.base.removeClass([this.parent.getToolbar()],["e-hide"]);sf.base.isNullOrUndefined(this.parent.getToolbar())||this.parent.inlineMode.enable||sf.base.isNullOrUndefined(n)||n.style.display;this.removeEleFromDOM();this.isDOMElement=!1},n.prototype.removeEleFromDOM=function(){this.popupObj.hide();this.element.classList.add("e-hide");this.element.classList.add("e-rte-quick-popup-hide");this.isDOMElement&&(sf.base.removeClass([this.element],["e-rte-pop"]),this.popupObj.element.removeAttribute("style"),this.popupObj.destroy(),this.parent.quickTbClosedEnabled&&this.parent.dotNetRef.invokeMethodAsync("QuickToolbarCloseEvent"))},n.prototype.updateStatus=function(n){var t=sf.base.selectAll(".e-toolbar-item",this.element);t.length<=0||ci({args:n,dropDownModule:null,parent:this.parent,tbElements:t,tbItems:this.parent.toolbarSettings.items},!0)},n.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this);this.parent.inlineMode.enable&&this.parent.observer.on("toolbar-updated",this.updateStatus,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy);this.parent.inlineMode.enable&&this.parent.observer.off("toolbar-updated",this.updateStatus)},n.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM());this.removeEventListener()},n}(),ku=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.showImageQTBar=function(n,t,i,r){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var u=document.querySelector("#"+this.parent.element.id+"_Image_Quick_Popup");this.imageQTBar=new ct(this.parent);this.imageQTBar.render(u,r);this.parent.dotNetRef.invokeMethodAsync("ShowImagePopup",this.imageQTBar.popupObj.element.classList.toString(),r);this.imageQTBar.showPopup(n,t,i,r)}},n.prototype.hideImageQTBar=function(){this.imageQTBar&&(this.imageQTBar.hidePopup(),this.imageQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideImagePopup"))},n.prototype.showLinkQTBar=function(n,t,i,r){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var u=document.querySelector("#"+this.parent.element.id+"_Link_Quick_Popup");this.linkQTBar=new ct(this.parent);this.linkQTBar.render(u,r);this.parent.dotNetRef.invokeMethodAsync("ShowLinkPopup",this.linkQTBar.popupObj.element.classList.toString());this.linkQTBar.showPopup(n,t,i,r)}},n.prototype.hideLinkQTBar=function(){this.linkQTBar&&(this.linkQTBar.hidePopup(),this.linkQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideLinkPopup"))},n.prototype.showTableQTBar=function(n,t,i,r){if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var u=document.querySelector("#"+this.parent.element.id+"_Table_Quick_Popup");this.tableQTBar=new ct(this.parent);this.tableQTBar.render(u,r);this.parent.dotNetRef.invokeMethodAsync("ShowTablePopup",this.tableQTBar.popupObj.element.classList.toString());this.tableQTBar.showPopup(n,t,i,r)}},n.prototype.hideTableQTBar=function(){this.tableQTBar&&(this.tableQTBar.hidePopup(),this.tableQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideTablePopup"))},n.prototype.showInlineQTBar=function(n,t,i){var f=this,r,u;!this.parent.readonly&&this.parent.inlineMode.enable&&this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||o())&&(r=document.querySelector("#"+this.parent.element.id+"_Inline_Quick_Popup"),this.inlineQTBar=new ct(this.parent),this.inlineQTBar.render(r,"Inline"),sf.base.EventHandler.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this),u=this.inlineQTBar.popupObj.element.classList.toString(),this.parent.dotNetRef.invokeMethodAsync("ShowInlinePopup",u).then(function(){f.inlineQTBar.showPopup(n,t,i,"Inline")}))},n.prototype.hideInlineQTBar=function(){this.inlineQTBar&&(this.inlineQTBar.hidePopup(),this.inlineQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideInlinePopup"))},n.prototype.hideQuickToolbars=function(){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar();sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar();sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar();!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!o()||this.hideInlineQTBar()},n.prototype.scrollHandler=function(){"hide"===this.parent.quickToolbarSettings.actionOnScroll.toLocaleLowerCase()&&this.hideQuickToolbars()},n.prototype.selectionChangeHandler=function(n){var t=this;this.parent.inlineMode.onSelection&&(clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout(function(){t.onSelectionChange(n)},1e3))},n.prototype.onSelectionChange=function(n){sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document.body))&&(this.parent.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:n}))},n.prototype.toolbarUpdated=function(){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar();sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar();sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar()},n.prototype.deBounce=function(n,t,i){var r=this;clearTimeout(this.deBouncer);this.deBouncer=window.setTimeout(function(){r.showInlineQTBar(n,t,i)},1e3)},n.prototype.onMouseDown=function(){this.parent.isBlur=!1;this.parent.isRTE=!0},n.prototype.mouseUpHandler=function(n){var f,e;if(this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||o())){var i=n.args.touches?n.args.changedTouches[0]:n.args,r=this.parent.getRange(),t=n.args.target,u=sf.base.select(".e-rte-inline-popup",document.body);if(sf.base.isNullOrUndefined(u)||u.classList.contains("e-hide")){if(o()&&n.touchData&&n.touchData.prevClientX!==n.touchData.clientX&&n.touchData.prevClientY!==n.touchData.clientY)return;if(this.hideInlineQTBar(),f=this.parent.element.getBoundingClientRect().left,this.offsetX=this.parent.iframeSettings.enable?window.pageXOffset+f+i.clientX:i.pageX,this.offsetY=function(n,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+n.clientY:n.pageY}(i,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===t.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,t);else if(e=sf.base.closest(t,"a"),!("IMG"===(t=e||t).tagName||"A"===t.tagName||sf.base.closest(t,"td,th")&&r.collapsed)){if(this.parent.inlineMode.onSelection&&r.collapsed)return;this.target=t;this.showInlineQTBar(this.offsetX,this.offsetY,t)}}}},n.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!o()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},n.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!o()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},n.prototype.keyUpHandler=function(n){if(this.parent.inlineMode.enable&&!sf.base.Browser.isDevice){if(this.parent.inlineMode.onSelection)return;var t=n.args;this.deBounce(this.offsetX,this.offsetY,t.target)}},n.prototype.onKeyDown=function(n){var t=n.args;8!==t.which&&46!==t.which||this.imageQTBar&&!pt(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup()},n.prototype.onIframeMouseDown=function(){this.hideQuickToolbars();this.hideInlineQTBar()},n.prototype.addEventListener=function(){this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&o()&&sf.base.EventHandler.add(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler,this);this.parent.observer.on("toolbar-updated",this.toolbarUpdated,this);this.wireInlineQTBarEvents();this.parent.observer.on("scroll",this.scrollHandler,this);this.parent.observer.on("contentscroll",this.scrollHandler,this);this.parent.observer.on("focusChange",this.hideQuickToolbars,this);this.parent.observer.on("iframe-click",this.onIframeMouseDown,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on(s,this.onKeyDown,this)},n.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler);this.parent.observer.off("toolbar-updated",this.toolbarUpdated);this.unWireInlineQTBarEvents();this.parent.observer.off("scroll",this.scrollHandler);this.parent.observer.off("contentscroll",this.scrollHandler);this.parent.observer.off("focusChange",this.hideQuickToolbars);this.parent.observer.off(t,this.destroy);this.parent.observer.off("iframe-click",this.onIframeMouseDown);this.parent.observer.off(s,this.onKeyDown)},n.prototype.wireInlineQTBarEvents=function(){this.parent.observer.on("mouseUp",this.mouseUpHandler,this);this.parent.observer.on("mouseDown",this.inlineQTBarMouseDownHandler,this);this.parent.observer.on(s,this.keyDownHandler,this);this.parent.observer.on(k,this.keyUpHandler,this);this.parent.observer.on("sourceCodeMouseDown",this.mouseUpHandler,this)},n.prototype.unWireInlineQTBarEvents=function(){this.parent.observer.off("mouseUp",this.mouseUpHandler);this.parent.observer.off("mouseDown",this.inlineQTBarMouseDownHandler);this.parent.observer.off(s,this.keyDownHandler);this.parent.observer.off(k,this.keyUpHandler);this.parent.observer.off("sourceCodeMouseDown",this.mouseUpHandler)},n.prototype.destroy=function(){this.linkQTBar&&(sf.base.EventHandler.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy());this.imageQTBar&&(sf.base.EventHandler.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy());this.tableQTBar&&(sf.base.EventHandler.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy());this.inlineQTBar&&(sf.base.EventHandler.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),o()&&sf.base.EventHandler.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy());this.removeEventListener()},n}(),f="e-file-status",nr="e-upload-file-list",g="e-file-abort-btn",lt="e-file-reload-btn",b="e-file-remove-btn",tt="e-file-delete-btn",at="e-upload-progress-bar",ft="e-upload-progress-wrap",du=function(){function n(n,t,i){this.fileList=[];this.filesData=[];this.files=[];this.minFileSize=0;this.maxFileSize=3e7;this.uploadedFilesData=[];this.base64String=[];this.isForm=!1;this.allTypes=!1;this.btnTabIndex="0";this.disableKeyboardNavigation=!1;this.actionCompleteCount=0;this.flag=!0;this.selectedFiles=[];this.uploaderName="UploadFiles";this.element=t;this.parent=i;this.cssClass=n.cssClass;this.asyncSettings=n.asyncSettings;this.allowedExtensions=n.allowedExtensions;this.addEventListener();this.render()}return n.prototype.addEventListener=function(){this.parent.observer.on("beforePasteUploadCallBack",this.beforePasteUploadCallBack,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("beforePasteUploadCallBack",this.beforePasteUploadCallBack)},n.prototype.render=function(){this.browserName=sf.base.Browser.info.name;this.uploaderName=this.element.getAttribute("name");this.initializeUpload();this.wireEvents();this.setExtensions(this.allowedExtensions);this.setRTL();this.setCSSClass()},n.prototype.initializeUpload=function(){this.element.setAttribute("aria-label","Uploader");this.element.setAttribute("tabindex","-1");var n=sf.base.createElement("span",{className:"e-file-select",attrs:{style:"display: none;"}});this.element.parentElement.insertBefore(n,this.element);this.dropAreaWrapper=sf.base.createElement("div",{className:"e-file-select-wrap"});this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element);n.appendChild(this.element);this.dropAreaWrapper.appendChild(n);this.uploadWrapper=sf.base.createElement("div",{className:"e-upload e-lib e-control-wrapper",attrs:{style:"background: white"}});this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper);this.uploadWrapper.appendChild(this.dropAreaWrapper)},n.prototype.setExtensions=function(n){""===n||sf.base.isNullOrUndefined(n)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",n)},n.prototype.setRTL=function(){this.enableRtl?sf.base.addClass([this.uploadWrapper],"e-rtl"):sf.base.removeClass([this.uploadWrapper],"e-rtl")},n.prototype.setCSSClass=function(n){var t=this.cssClass,i;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim());sf.base.isNullOrUndefined(this.cssClass)||""===t||sf.base.addClass([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));i=n;sf.base.isNullOrUndefined(n)||(i=n.replace(/\s+/g," ").trim());sf.base.isNullOrUndefined(n)||""===i||sf.base.removeClass([this.uploadWrapper],i.split(" "))},n.prototype.createFileList=function(n){var e,l,h,c,a,r,i,v;if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(n,this.element.files);else for(e=0,l=n;e<l.length;e++){var t=l[e],o=sf.base.createElement("li",{className:nr,attrs:{"data-file-name":t.name,"data-files-count":"1"}}),u=sf.base.createElement("span",{className:"e-file-container"}),s=sf.base.createElement("span",{className:"e-file-name",attrs:{title:t.name}});s.innerHTML=this.getFileNameOnly(t.name);h=sf.base.createElement("span",{className:"e-file-type"});(h.innerHTML="."+this.getFileType(t.name),this.enableRtl)?(c=sf.base.createElement("span",{className:"e-rtl-container"}),c.appendChild(h),c.appendChild(s),u.appendChild(c)):(u.appendChild(s),u.appendChild(h));a=sf.base.createElement("span",{className:"e-file-size"});a.innerHTML=this.bytesToSize(t.size);u.appendChild(a);r=sf.base.createElement("span",{className:f});u.appendChild(r);r.innerHTML=t.status;o.appendChild(u);i=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&i.classList.add("e-msie");i.setAttribute("title","Remove");o.appendChild(i);sf.base.EventHandler.add(i,"click",this.removeFiles,this);"2"===t.statusCode?(r.classList.add("e-upload-success"),i.classList.add(tt),i.setAttribute("title","Delete file")):"1"!==t.statusCode&&(r.classList.remove("e-upload-success"),r.classList.add("e-validation-fails"));"1"===t.statusCode&&""!==this.asyncSettings.saveUrl&&(r.innerHTML="");i.classList.contains(tt)||i.classList.add(b);this.listParent.appendChild(o);this.fileList.push(o);this.truncateName(s);v=this.flag;this.isPreLoadFile(t)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=v)}},n.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},n.prototype.isFormUpload=function(){var n=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(n=!0),n},n.prototype.getFileType=function(n){var t,i=n.lastIndexOf(".");return i>=0&&(t=n.substring(i+1)),t||""},n.prototype.getFileNameOnly=function(n){var t=this.getFileType(n);return n.split("."+t)[0]},n.prototype.truncateName=function(n){var t=n;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},n.prototype.getSlicedName=function(n){var t;t=n.textContent;n.dataset.tail=t.slice(t.length-10)},n.prototype.setListToFileInfo=function(n,t){for(var i=0,r=n;i<r.length;i++)r[i].list=t},n.prototype.getFileSize=function(n){for(var i=0,t=0,r=n;t<r.length;t++)i+=r[t].size;return i},n.prototype.bytesToSize=function(n){var t=-1;if(!n)return"0.0 KB";do n/=1024,t++;while(n>99);return t>=2&&(n*=1024,t=1),Math.max(n,0).toFixed(1)+" "+["KB","MB"][t]},n.prototype.createFormInput=function(n){var t=this.element.cloneNode(!0),i,r;for(t.classList.add("e-hidden-file-input"),i=0,r=n;i<r.length;i++)r[i].input=t;t.setAttribute("name",this.uploaderName);this.uploadWrapper.querySelector(".e-file-select").appendChild(t);"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},n.prototype.checkActionComplete=function(n){n?++this.actionCompleteCount:--this.actionCompleteCount;this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)},n.prototype.isPreLoadFile=function(n){for(var i=!1,t=0;t<this.files.length;t++)this.files[t].name===n.name.slice(0,n.name.lastIndexOf("."))&&this.files[t].type===n.type&&(i=!0);return i},n.prototype.validatedFileSize=function(n){var t="",i="";return n<this.minFileSize?t="File size is too small":n>this.maxFileSize?i="File size is too large":(t="",i=""),{minSize:t,maxSize:i}},n.prototype.isBlank=function(n){return!n||/^\s*$/.test(n)},n.prototype.addInvalidClass=function(n){n.classList.add("e-file-invalid")},n.prototype.checkExtension=function(n){var e=n,f,t;if(!this.isBlank(this.allowedExtensions)){for(var r=[],i=0,u=this.allowedExtensions.split(",");i<u.length;i++)f=u[i],r.push(f.trim().toLocaleLowerCase());for(t=0;t<n.length;t++)-1===r.indexOf(("."+n[t].type).toLocaleLowerCase())&&(n[t].status="File type is not allowed",n[t].statusCode="0")}return e},n.prototype.getFilesData=function(n){return sf.base.isNullOrUndefined(n)?this.filesData:this.getSelectedFiles(n)},n.prototype.getFilesInArray=function(n){var t=[];return _instanceof(n,Array)?t=n:t.push(n),t},n.prototype.formValidateFileInfo=function(n,t){var i=n.status,r=this.validatedFileSize(n.size),u;return""===r.minSize&&""===r.maxSize||(this.addInvalidClass(t),i=""!==r.minSize?"File size is too small":""!==r.maxSize?"File size is too large":i),u=this.checkExtension(this.getFilesInArray(n))[0].status,"File type is not allowed"===u&&(this.addInvalidClass(t),i=u),i},n.prototype.clearAll=function(){if(sf.base.isNullOrUndefined(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.clearData();this.actionCompleteCount=0},n.prototype.clearData=function(n){sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null);"msie"===this.browserName||n||(this.element.value="");this.fileList=[];this.filesData=[];this.removeActionButtons()},n.prototype.removeActionButtons=function(){this.actionButtons&&(sf.base.detach(this.actionButtons),this.actionButtons=null)},n.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var n=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span.e-upload-success").length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;n>0&&n===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},n.prototype.getSelectedFiles=function(n){for(var t,u=[],f=this.fileList[n],e=this.getFilesData(),o=+f.getAttribute("data-files-count"),i=0,r=0;r<n;r++)i+=+this.fileList[r].getAttribute("data-files-count");for(t=i;t<i+o;t++)u.push(e[t]);return u},n.prototype.formFileList=function(n){var t=sf.base.createElement("li",{className:nr}),o,e,s,h,i,u;t.setAttribute("data-files-count",n.length+"");for(var l,r=sf.base.createElement("span",{className:"e-file-container"}),c=0,a=n;c<a.length;c++)o=a[c],e=sf.base.createElement("span",{className:"e-file-name"}),e.innerHTML=this.getFileNameOnly(o.name),s=sf.base.createElement("span",{className:"e-file-type"}),(s.innerHTML="."+this.getFileType(o.name),this.enableRtl)?(h=sf.base.createElement("span",{className:"e-rtl-container"}),h.appendChild(s),h.appendChild(e),r.appendChild(h)):(r.appendChild(e),r.appendChild(s)),this.truncateName(e),l=this.formValidateFileInfo(o,t);t.appendChild(r);this.setListToFileInfo(n,t);i=sf.base.createElement("span");(t.classList.contains("e-file-invalid")?(i.classList.add(f),i.classList.add("e-file-invalid"),i.innerText=n.length>1?"invalidFileSelection":l):(i.classList.add(n.length>1?"e-file-information":"e-file-size"),i.innerText=n.length>1?"totalFiles: "+n.length+" , size: "+this.bytesToSize(this.getFileSize(n)):this.bytesToSize(n[0].size),this.createFormInput(n)),r.appendChild(i),sf.base.isNullOrUndefined(t.querySelector(".e-icons")))&&(u=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&u.classList.add("e-msie"),u.setAttribute("title","Remove"),t.appendChild(r),t.appendChild(u),sf.base.EventHandler.add(u,"click",this.removeFiles,this),u.classList.add(b));this.listParent.appendChild(t);this.fileList.push(t)},n.prototype.removeFiles=function(n){var e=n.target.parentElement,t=this.fileList.indexOf(e),i=this.fileList[t],f=this.isFormUpload(),r=f?this.getSelectedFiles(t):this.getFilesInArray(this.filesData[t]),u;sf.base.isNullOrUndefined(r)||(n.target.classList.contains(g)&&!f?((r[0].statusCode="5",sf.base.isNullOrUndefined(i))||(u=i.querySelector("."+g),sf.popups.createSpinner({target:u,width:"20px"}),sf.popups.showSpinner(u)),i.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)):sf.base.closest(n.target,".e-spinner-pane")||this.remove(r,!1,!1,!0,n),this.element.value="",this.checkActionButtonStatus())},n.prototype.spliceFiles=function(n){for(var t,u=this.fileList[n],f=this.getFilesData(),e=+u.getAttribute("data-files-count"),i=0,r=0;r<n;r++)i+=+this.fileList[r].getAttribute("data-files-count");for(t=i+e-1;t>=i;t--)f.splice(t,1)},n.prototype.remove=function(n,t,i,r,u){var f,h,l,s,e,k;if(sf.base.isNullOrUndefined(r)&&(r=!0),f={event:u,cancel:!1,filesData:[],customFormData:[],postRawFile:r,currentRequest:null},this.isFormUpload()){f.filesData=n;this.parent.observer.notify("removing",f);for(var v=!1,o=void 0,c=0,y=this.getFilesInArray(n);c<y.length;c++)h=y[c],(v||(o=this.fileList.indexOf(h.list)),o>-1)&&(l=sf.base.isNullOrUndefined(h.input)?null:h.input,l&&sf.base.detach(l),this.spliceFiles(o),sf.base.detach(this.fileList[o]),this.fileList.splice(o,1),v=!0,o=-1)}else if(this.isForm&&(sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))f.filesData=this.getFilesData(),this.parent.observer.notify("removing",f),this.clearAll();else{s=[];_instanceof(n=sf.base.isNullOrUndefined(n)?this.filesData:n,Array)?s=n:s.push(n);f.filesData=s;for(var p=this.asyncSettings.removeUrl,d=""!==p&&!sf.base.isNullOrUndefined(p),a=0,w=s;a<w.length;a++)e=w[a],k=this.uploadedFilesData.indexOf(e),("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==k)&&d?this.removeUploadedFile(e,f,i,t):(i||this.parent.observer.notify("removing",f),this.removeFilesData(e,t)),u&&!u.target.classList.contains(b)&&this.checkActionComplete(!1)}},n.prototype.updateCustomHeader=function(n,t){if(t.length>0&&t[0])for(var r=function(i){var r=t[i],u=Object.keys(r).map(function(n){return r[n]});n.setRequestHeader(Object.keys(r)[0],u)},i=0;i<t.length;i++)r(i)},n.prototype.removeUploadedFile=function(n,t,i,r){var u=this,o=n,f=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null),e;f.emitError=!1;e=new FormData;f.beforeSend=function(){t.currentRequest=f.httpRequest;u.currentRequestHeader&&u.updateCustomHeader(f.httpRequest,u.currentRequestHeader);u.customFormDatas&&u.updateFormData(e,u.customFormDatas);i||u.parent.observer.notify("removing",t);u.removingEventCallback(t,e,o,n)};f.onLoad=function(n){return u.removeCompleted(n,o,r),{}};f.onError=function(n){return u.removeFailed(n,o,r),{}};f.send(e)},n.prototype.getResponse=function(n){var t=n.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},n.prototype.removeCompleted=function(n,t,i){var e=n&&n.currentTarget?this.getResponse(n):null,r=n.target,u,f;4===r.readyState&&r.status>=200&&r.status<=299?(u={e:n,response:e,operation:"Remove",file:this.updateStatus(t,"File removed successfully","2")},this.parent.observer.notify("success",u),this.removeFilesData(t,i),f=this.uploadedFilesData.indexOf(t),this.uploadedFilesData.splice(f,1)):this.removeFailed(n,t,i)},n.prototype.removeFailed=function(n,t,i){var h={e:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"Remove",file:this.updateStatus(t,"Unable to remove file","0")},o,r,e,u,s;i||(o=this.filesData.indexOf(t),r=this.fileList[o],r&&(r.classList.remove("e-upload-success"),r.classList.add("e-upload-fails"),e=r.querySelector("."+f),e&&(e.classList.remove("e-upload-success"),e.classList.add("e-upload-fails"))),this.checkActionButtonStatus());this.parent.observer.notify("failure",h);u=this.getLiElement(t);sf.base.isNullOrUndefined(u)||sf.base.isNullOrUndefined(u.querySelector("."+tt))||(s=u.querySelector("."+tt),sf.popups.hideSpinner(s),sf.base.detach(u.querySelector(".e-spinner-pane")))},n.prototype.updateStatus=function(n,t,i,r){if(void 0===r&&(r=!0),""===t||sf.base.isNullOrUndefined(t)||""===i||sf.base.isNullOrUndefined(i)||(n.status=t,n.statusCode=i),r){var u=this.getLiElement(n);sf.base.isNullOrUndefined(u)||sf.base.isNullOrUndefined(u.querySelector("."+f))||""===t||sf.base.isNullOrUndefined(t)||(u.querySelector("."+f).textContent=t)}return n},n.prototype.removingEventCallback=function(n,t,i,r){var e=this.element.getAttribute("name"),u=this.getLiElement(r),f;sf.base.isNullOrUndefined(u)||sf.base.isNullOrUndefined(u.querySelector("."+tt))&&sf.base.isNullOrUndefined(u.querySelector("."+b))||(f=u.querySelector("."+tt)?u.querySelector("."+tt):u.querySelector("."+b),sf.popups.createSpinner({target:f,width:"20px"}),sf.popups.showSpinner(f));n.postRawFile&&!sf.base.isNullOrUndefined(i.rawFile)&&""!==i.rawFile?t.append(e,i.rawFile,i.name):t.append(e,i.name);this.updateFormData(t,n.customFormData)},n.prototype.updateFormData=function(n,t){if(t.length>0&&t[0])for(var r=function(i){var r=t[i],u=Object.keys(r).map(function(n){return r[n]});n.append(Object.keys(r)[0],u)},i=0;i<t.length;i++)r(i)},n.prototype.getLiElement=function(n){for(var i,t=0;t<this.filesData.length;t++)(sf.base.isNullOrUndefined(this.filesData[t].id)||sf.base.isNullOrUndefined(n.id)?this.filesData[t].name===n.name:this.filesData[t].name===n.name&&this.filesData[t].id===n.id)&&(i=t);return this.fileList[i]},n.prototype.removeFilesData=function(n,t){var r,i;t||(i=this.getLiElement(n),sf.base.isNullOrUndefined(i)||(sf.base.detach(i),r=this.fileList.indexOf(i),this.fileList.splice(r,1),this.filesData.splice(r,1),0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons())))},n.prototype.upload=function(n,t){n=n||this.filesData;this.beforeUploadCustom=!sf.base.isNullOrUndefined(t)&&t;this.beforeUploadFiles=this.getFilesInArray(n);this.parent.observer.notify("beforePasteUpload",{customFormData:[],currentRequest:null,cancel:!1})},n.prototype.beforePasteUploadCallBack=function(n){n.cancel||(this.currentRequestHeader=n.currentRequest?n.currentRequest:this.currentRequestHeader,this.customFormDatas=n.customFormData&&n.customFormData.length>0?n.customFormData:this.customFormDatas,this.uploadFiles(this.beforeUploadFiles,this.beforeUploadCustom))},n.prototype.filterfileList=function(n){for(var i=[],t=0;t<n.length;t++)this.getLiElement(n[t]).classList.contains("e-upload-success")||i.push(n[t]);return i},n.prototype.uploadFiles=function(n,t){var r=[],i;if(""!==this.asyncSettings.saveUrl&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))for(r=!t||sf.base.isNullOrUndefined(t)?this.filterfileList(n):n,i=0;i<r.length;i++)this.uploadFilesRequest(r,i,t)},n.prototype.updateCustomheader=function(n,t){if(t.length>0&&t[0])for(var r=function(i){var r=t[i],u=Object.keys(r).map(function(n){return r[n]});n.setRequestHeader(Object.keys(r)[0],u)},i=0;i<t.length;i++)r(i)},n.prototype.eventCancelByArgs=function(n,t,i){var e=this,r,u;(n.cancel=!0,"5"!==t.fileData.statusCode)&&(t.fileData.statusCode="5",t.fileData.status="File upload canceled",r=this.getLiElement(t.fileData),r&&(sf.base.isNullOrUndefined(r.querySelector("."+f))||(r.querySelector("."+f).innerHTML="File upload canceled",r.querySelector("."+f).classList.add("e-upload-fails")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),u=r.querySelector("."+b),u&&u.parentElement.insertBefore(this.pauseButton,u),this.pauseButton.setAttribute("title","Retry"),this.pauseButton.addEventListener("click",function(n){e.reloadcanceledFile(n,i,r)},!1),this.checkActionButtonStatus()))},n.prototype.reloadcanceledFile=function(n,t,i,r){t.statusCode="1";t.status="Ready to upload";r||(i.querySelector("."+f).classList.remove("e-upload-fails"),sf.base.isNullOrUndefined(i.querySelector("."+lt))||sf.base.detach(i.querySelector("."+lt)),this.pauseButton=null);i.classList.add("e-restrict-retry");this.upload([t])},n.prototype.uploadFilesRequest=function(n,t,i){var r=this,u=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null),f,e,o;u.emitError=!1;f={fileData:n[t],customFormData:[],cancel:!1};e=new FormData;(u.beforeSend=function(i){f.currentRequest=u.httpRequest;f.fileData.rawFile=r.base64String[t];r.currentRequestHeader&&r.updateCustomheader(u.httpRequest,r.currentRequestHeader);r.customFormDatas&&r.updateFormData(e,r.customFormDatas);r.parent.observer.notify("uploading",f);f.cancel&&r.eventCancelByArgs(i,f,n[t]);r.updateFormData(e,f.customFormData)},"1"===n[t].statusCode)&&(o=this.element.getAttribute("name"),e.append(o,n[t].rawFile,n[t].name),u.onLoad=function(u){return r.uploadComplete(u,n[t],i),{}},u.onUploadProgress=function(f){return r.uploadInProgress(f,n[t],i,u),{}},u.onError=function(i){return r.uploadFailed(i,n[t]),{}},u.send(e))},n.prototype.cancelUploadingFile=function(n,t,i,r){var h=this,f,o,u,s,e;"5"===n.statusCode&&(f={event:t,fileData:n,cancel:!1,customFormData:[]},(this.parent.observer.notify("canceling",f),f.cancel)?(n.statusCode="3",sf.base.isNullOrUndefined(r))||(o=r.querySelector("."+g),sf.base.isNullOrUndefined(o)||(sf.popups.hideSpinner(o),sf.base.detach(r.querySelector(".e-spinner-pane")))):(i.emitError=!1,i.httpRequest.abort(),u=new FormData,"5"===n.statusCode&&(s=this.element.getAttribute("name"),u.append(s,n.name),u.append("cancel-uploading",n.name),this.updateFormData(u,f.customFormData),e=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null),e.emitError=!1,e.onLoad=function(t){return h.removecanceledFile(t,n),{}},e.send(u))))},n.prototype.removecanceledFile=function(n,t){var i=this.getLiElement(t),r,u;i.querySelector("."+lt)||sf.base.isNullOrUndefined(i.querySelector("."+g))||(this.updateStatus(t,"File upload canceled","5"),this.renderFailureState(n,t,i),r=i.querySelector("."+b),sf.base.isNullOrUndefined(i)||(sf.popups.hideSpinner(r),sf.base.detach(i.querySelector(".e-spinner-pane"))),u={event:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"Cancel",file:t},this.parent.observer.notify("success",u))},n.prototype.uploadInProgress=function(n,t,i,r){var u=this.getLiElement(t),e;(!sf.base.isNullOrUndefined(u)||i)&&(sf.base.isNullOrUndefined(u)?this.cancelUploadingFile(t,n,r):("5"===t.statusCode&&this.cancelUploadingFile(t,n,r,u),u.querySelectorAll("."+ft).length>0||!u.querySelector("."+f)||(u.querySelector("."+f).classList.add("e-upload-progress"),this.createProgressBar(u),this.updateProgressBarClasses(u,"e-upload-progress"),u.querySelector("."+f).classList.remove("e-upload-fails")),this.updateProgressbar(n,u),e=u.querySelector("."+b),sf.base.isNullOrUndefined(e)||(e.classList.add(g,"e-upload-progress"),e.setAttribute("title","Abort"),e.classList.remove(b))))},n.prototype.changeProgressValue=function(n,t){n.querySelector("."+at).setAttribute("style","width:"+t);n.querySelector(".e-progress-bar-text").textContent=t},n.prototype.updateProgressbar=function(n,t){if(!isNaN(Math.round(n.loaded/n.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+at)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(n.loaded/n.total*100).toString()+"%");else{var i=Math.round(n.loaded/n.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(n.loaded/n.total*100).toString()+"%")}},n.prototype.createProgressBar=function(n){var t=sf.base.createElement("span",{className:ft}),r=sf.base.createElement("progressbar",{className:at,attrs:{value:"0",max:"100"}}),u=sf.base.createElement("span",{className:"e-progress-inner-wrap"}),i;r.setAttribute("style","width: 0%");i=sf.base.createElement("span",{className:"e-progress-bar-text"});i.textContent="0%";u.appendChild(r);t.appendChild(u);t.appendChild(i);n.querySelector(".e-file-container").appendChild(t)},n.prototype.updateProgressBarClasses=function(n,t){var i=n.querySelector("."+at);sf.base.isNullOrUndefined(i)||i.classList.add(t)},n.prototype.raiseSuccessEvent=function(n,t){var u={e:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"upload",file:this.updateStatus(t,"File uploaded successfully","2",!1),statusText:"File uploaded successfully"},i=this.getLiElement(t),r;sf.base.isNullOrUndefined(i)||(r=i.querySelector(".e-spinner-pane"),sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(i),sf.base.detach(r)));this.parent.observer.notify("success",u);this.updateStatus(t,u.statusText,"2");this.uploadedFilesData.push(t);this.checkActionButtonStatus();this.fileList.length>0&&(this.getLiElement(t).classList.contains("e-restrict-retry")?this.getLiElement(t).classList.remove("e-restrict-retry"):this.checkActionComplete(!0))},n.prototype.uploadComplete=function(n,t,i){var f=n.target,r,u;if(4===f.readyState&&f.status>=200&&f.status<=299){if(r=this.getLiElement(t),sf.base.isNullOrUndefined(r)&&(!i||sf.base.isNullOrUndefined(i)))return;sf.base.isNullOrUndefined(r)||(this.updateProgressBarClasses(r,"e-upload-success"),this.removeProgressbar(r,"success"),u=r.querySelector("."+g),sf.base.isNullOrUndefined(u)||(u.classList.add(tt),u.setAttribute("title","Delete file"),u.classList.remove(g),u.classList.remove("e-upload-progress")));this.raiseSuccessEvent(n,t)}else this.uploadFailed(n,t)},n.prototype.uploadFailed=function(n,t){var i=this.getLiElement(t),r={e:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"upload",file:this.updateStatus(t,"File failed to upload","0",!1),statusText:"File failed to upload"};sf.base.isNullOrUndefined(i)||this.renderFailureState(n,t,i);this.parent.observer.notify("failure",r);this.updateStatus(t,r.statusText,"0");this.checkActionButtonStatus();this.checkActionComplete(!0)},n.prototype.renderFailureState=function(n,t,i){var u=this,r;this.updateProgressBarClasses(i,"e-upload-fails");this.removeProgressbar(i,"failure");sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add("e-upload-fails");r=i.querySelector("."+g);sf.base.isNullOrUndefined(r)||(r.classList.remove(g,"e-upload-progress"),r.classList.add(b),r.setAttribute("title","Remove"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title","Retry"),i.querySelector("."+lt).addEventListener("click",function(n){u.reloadcanceledFile(n,t,i,!1)},!1))},n.prototype.removeProgressbar=function(n,t){var i=this;sf.base.isNullOrUndefined(n.querySelector("."+ft))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(n.querySelector("."+ft),{name:"FadeOut"}),this.progressAnimation.animate(n.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(n,t)},750))},n.prototype.animateProgressBar=function(n,t){"success"===t?sf.base.isNullOrUndefined(n.querySelector("."+f))||(n.querySelector("."+f).classList.remove("e-upload-progress"),this.progressAnimation.animate(n.querySelector("."+f),{name:"FadeIn"}),n.querySelector("."+f).classList.add("e-upload-success")):sf.base.isNullOrUndefined(n.querySelector("."+f))||(n.querySelector("."+f).classList.remove("e-upload-progress"),this.progressAnimation.animate(n.querySelector("."+f),{name:"FadeIn"}),n.querySelector("."+f).classList.add("e-upload-fails"));n.querySelector("."+ft)&&sf.base.detach(n.querySelector("."+ft))},n.prototype.onSelectFiles=function(n){var t,i;"drop"===n.type?(i=this.sortFilesList=n.dataTransfer.files,"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.sortFileList(i),this.renderSelectedFiles(n,t))):(t=[].slice.call(n.target.files),this.renderSelectedFiles(n,t))},n.prototype.sortFileList=function(n){for(var o,i=n=n||this.sortFilesList,u=[],t=0;t<i.length;t++)u.push(i[t].name);for(var f=[],r=0,e=u.sort();r<e.length;r++)for(o=e[r],t=0;t<i.length;t++)o===i[t].name&&f.push(i[t]);return f},n.prototype.renderSelectedFiles=function(n,t,i,r){var u,f,e,o;if(this.base64String=[],u={event:n,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null},t.length<1)return u.isCanceled=!0,void this.parent.observer.notify("selected",u);for(this.flag=!0,f=[],e=0;e<t.length;e++)o=i?t[e].file:t[e],this.updateInitialFileDetails(n,t,o,e,f,i,r);u.filesData=f;this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0);this.allTypes||(f=this.checkExtension(f));this.parent.observer.notify("selected",u);u.cancel=!0;this._internalRenderSelect(u,f)},n.prototype._internalRenderSelect=function(n,t){var i,r,u;if(!n.cancel){if(this.currentRequestHeader=n.currentRequest,this.customFormDatas=n.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",n.isModified&&n.modifiedFilesData.length>0){for(i=0;i<n.modifiedFilesData.length;i++)for(r=0;r<t.length;r++)n.modifiedFilesData[i].id===t[r].id&&(n.modifiedFilesData[i].rawFile=t[r].rawFile);u=this.allTypes?n.modifiedFilesData:this.checkExtension(n.modifiedFilesData);this.updateSortedFileList(u);this.filesData=u;this.isForm&&!this.allowUpload()||this.checkAutoUpload(u)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),this.isForm&&!this.allowUpload()||this.checkAutoUpload(t);sf.base.isNullOrUndefined(n.progressInterval)||""===n.progressInterval||(this.progressInterval=n.progressInterval);this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)}},n.prototype.allowUpload=function(){var n=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(n=!0),n},n.prototype.checkAutoUpload=function(n){this.upload(n);this.removeActionButtons();this.checkActionButtonStatus()},n.prototype.updateSortedFileList=function(n){var o=sf.base.createElement("div",{id:"clonewrapper"}),s=-1,r,h,u,e,c,f,t,i;if(this.listParent){for(r=0;r<this.listParent.querySelectorAll("li").length;r++)h=this.listParent.querySelectorAll("li")[r],o.appendChild(h.cloneNode(!0));for(u=0,e=this.listParent.querySelectorAll("li");u<e.length;u++)c=e[u],sf.base.detach(c);for(this.removeActionButtons(),f=[].slice.call(o.childNodes),sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL(),t=0;t<n.length;t++){for(i=0;i<this.filesData.length;i++)this.filesData[i].name===n[t].name&&(this.listParent.appendChild(f[i]),sf.base.EventHandler.add(f[i].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(f[i]),s=t);s!==t&&this.createFileList([n[t]])}}else this.createFileList(n)},n.prototype.updateInitialFileDetails=function(n,t,i,r,u,f,e){var o={name:f?t[r].path.substring(1,t[r].path.length):e?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):i.name,rawFile:i,size:i.size,status:"Ready to upload",type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};e&&(o.fileSource="paste");o.status=""!==o.validationMessages.minSize?"File size is too small":""!==o.validationMessages.maxSize?"File size is too large":o.status;""===o.validationMessages.minSize&&""===o.validationMessages.maxSize||(o.statusCode="0");u.push(o)},n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles)},n.prototype.destroy=function(){this.unWireEvents();this.removeEventListener()},n}(),gu=function(){function i(n){this.containsHtml=!1;this.isNotFromHtml=!1;this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"];this.parent=n;this.addEventListener()}return i.prototype.addEventListener=function(){this.nodeSelectionObj=new a;this.parent.observer.on("success",this.success,this);this.parent.observer.on("failure",this.failure,this);this.parent.observer.on("selected",this.selected,this);this.parent.observer.on("uploading",this.uploading,this);this.parent.observer.on("pasteClean",this.pasteClean,this);this.parent.observer.on("removing",this.cancelingAndRemoving,this);this.parent.observer.on("canceling",this.cancelingAndRemoving,this);this.parent.observer.on("beforePasteUpload",this.beforeImageUpload,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on("afterPasteCleanUp",this.pasteUpdatedValue,this)},i.prototype.destroy=function(){this.removeEventListener()},i.prototype.removeEventListener=function(){this.parent.observer.off("success",this.success);this.parent.observer.off("failure",this.failure);this.parent.observer.off("selected",this.selected);this.parent.observer.off("uploading",this.uploading);this.parent.observer.off("pasteClean",this.pasteClean);this.parent.observer.off("removing",this.cancelingAndRemoving);this.parent.observer.off("canceling",this.cancelingAndRemoving);this.parent.observer.off("beforePasteUpload",this.beforeImageUpload);this.parent.observer.off(t,this.destroy);this.parent.observer.off("afterPasteCleanUp",this.pasteUpdatedValue)},i.prototype.pasteClean=function(t){var r,u=this,s={requestType:"Paste",editorMode:this.parent.editorMode,event:t},i=null,f,h,e,o,c;(t.args&&!sf.base.isNullOrUndefined(t.args.clipboardData)&&(i=t.args.clipboardData.getData("text/html")),this.parent.beforePasteCleanupEnabled&&this.parent.dotNetRef.invokeMethodAsync("BeforePasteCleanUp",{value:i}),t.args&&null!==i&&"HTML"===this.parent.editorMode)&&(0===i.length?(f=new RegExp(/<\/[a-z][\s\S]*>/i),i=t.args.clipboardData.getData("text/plain"),this.isNotFromHtml=""!==i,i=(i=i.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this.containsHtml=f.test(i),h=t&&t.args.clipboardData&&t.args.clipboardData.items.length>0?t.args.clipboardData.items[0].getAsFile():null,(this.parent.observer.notify(et,{file:h,args:t.args,text:i,callBack:function(f){"object"===n(r=f)?u.parent.formatter.editorManager.execCommand("Images","Image",t.args,u.imageFormatting.bind(u,s),"pasteCleanup",r,"pasteCleanupModule"):i=r}}),f.test(i))||(e=sf.base.createElement("div"),e.innerHTML=this.splitBreakLine(i),i=e.innerHTML)):i.length>0&&this.parent.formatter.editorManager.observer.notify("ms_word_cleanup",{args:t.args,text:t.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(n){i=n}}),o=document,c=this.nodeSelectionObj.getRange(o),this.saveSelection=this.nodeSelectionObj.save(c,o),this.pasteArgs=s,t.args.preventDefault(),this.parent.afterPasteCleanupEnabled?this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:i}):this.pasteUpdatedValue(i))},i.prototype.pasteUpdatedValue=function(n){var t=this.parent.afterPasteCleanupEnabled?n.text:n,i;this.parent.pasteCleanupSettings.prompt?(i=sf.base.createElement("div"),i.innerHTML=t,""===i.textContent&&sf.base.isNullOrUndefined(i.querySelector("img"))&&sf.base.isNullOrUndefined(i.querySelector("table"))||this.pasteDialog(t,this.pasteArgs)):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(t,this.pasteArgs):this.parent.pasteCleanupSettings.keepFormat?this.formatting(t,!1,this.pasteArgs):this.formatting(t,!0,this.pasteArgs)},i.prototype.splitBreakLine=function(n){for(var i=n.split("\n"),r="",t=0;t<i.length;t++)r+=""===i[t].trim()?"<p><br><\/p>":"<p>"+this.makeSpace(i[t]).trim()+"<\/p>";return r},i.prototype.makeSpace=function(n){for(var i="",u=!0,r=n.split(" "),t=0;t<r.length;t++)""===r[t].trim()?i+=u?"&nbsp;":" ":(u=!1,i+=r[t]+" ");return i},i.prototype.imgUploading=function(n){var i=n.querySelectorAll(".pasteContent_Img"),r,u;if(i.length>0){for(var f=[],e=[],o=[],t=0;t<i.length;t++)i[t].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(f.push(i[t].getAttribute("src")),e.push(sf.base.getUniqueID("rte_image")),o.push(i[t]));for(r=[],t=0;t<f.length;t++)r.push(this.base64ToFile(f[t],e[t]));for(t=0;t<r.length;t++)this.uploadMethod(r[t],o[t]);(sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)||sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))&&"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(i)}else"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(i);for(u=n.querySelectorAll(".pasteContent_Img"),t=0;t<u.length;t++)u[t].classList.remove("pasteContent_Img"),""===u[t].getAttribute("class").trim()&&i[t].removeAttribute("class")},i.prototype.getBlob=function(n){for(var i,t=0;t<n.length;t++)!sf.base.isNullOrUndefined(n[t].getAttribute("src"))&&n[t].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i=URL.createObjectURL(vr(n[t].getAttribute("src"))),n[t].setAttribute("src",i))},i.prototype.uploadMethod=function(n,t){var i=this,u,f,e,o,s,h,r;this.uploadImgElem=t;u=document.createElement("div");document.body.appendChild(u);u.setAttribute("display","none");this.uploadImgElem.style.opacity="0.5";f=sf.base.createElement("div");this.parent.element.appendChild(f);e=sf.base.createElement("input",{id:this.parent.element.id+"_upload",attrs:{type:"File",name:"UploadFiles"}});o=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new sf.popups.Popup(f,{relateTo:this.uploadImgElem,height:"85px",width:"300px",offsetY:o,content:e,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(){i.parent.isBlur=!1;i.popupObj.destroy();sf.base.detach(i.popupObj.element)}});this.popupObj.element.style.display="none";sf.base.addClass([this.popupObj.element],["e-popup-open","e-rte-upload-popup"]);s=n.size>1e6?300:100;setTimeout(function(){i.refreshPopup(t,i.popupObj)},s);this.rawFile=void 0;h={asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl},cssClass:"e-rte-dialog-upload",enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString()};this.uploadObj=new du(h,this.popupObj.element.childNodes[0],this.parent);r=[{name:n.name,rawFile:n,size:n.size,type:n.type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];this.uploadObj.createFileList(r);this.uploadObj.filesData.push(r[0]);this.rawFile=r;this.uploadObj.upload(r);this.popupObj.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none";sf.base.detach(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},i.prototype.uploading=function(){this.parent.inputElement.contentEditable="false"},i.prototype.success=function(n){var t=this;setTimeout(function(){t.popupClose(t.popupObj,t.uploadImgElem,n)},900)},i.prototype.failure=function(n){var t=this;setTimeout(function(){t.uploadFailure(t.uploadImgElem,t.popupObj,n)},900)},i.prototype.selected=function(n){this.rawFile=n.filesData},i.prototype.cancelingAndRemoving=function(){this.parent.inputElement.contentEditable="true";" "===this.uploadImgElem.nextSibling.textContent&&sf.base.detach(this.uploadImgElem.nextSibling);sf.base.detach(this.uploadImgElem);this.popupObj.close()},i.prototype.beforeImageUpload=function(n){var i,t=this;if(this.parent.beforeUploadImageEnabled)return(i=JSON.parse(JSON.stringify(n))).filesData=this.rawFile,new Promise(function(n){t.parent.dotNetRef.invokeMethodAsync("BeforeUpload",i).then(function(i){i.cancel||(t.uploadObj.currentRequestHeader=i.currentRequest?i.currentRequest:t.uploadObj.currentRequestHeader,t.uploadObj.customFormDatas=i.customFormData&&i.customFormData.length>0?i.customFormData:t.uploadObj.customFormDatas,sf.base.isNullOrUndefined(t.parent.insertImageSettings.saveUrl)?t.popupClose(t.popupObj,t.uploadImgElem,null):t.parent.observer.notify("beforePasteUploadCallBack",i),n())})});sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)?this.popupClose(this.popupObj,this.uploadImgElem,null):this.parent.observer.notify("beforePasteUploadCallBack",n)},i.prototype.uploadFailure=function(n,t,i){this.parent.inputElement.contentEditable="true";sf.base.detach(n);t&&t.close();this.parent.onImageUploadFailedEnabled&&this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadFailed",i);this.uploadObj.destroy();this.uploadObj=void 0},i.prototype.popupClose=function(n,t,i){var r=this;this.parent.inputElement.contentEditable="true";!sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)&&this.parent.onImageUploadSuccessEnabled?this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadSuccess",i).then(function(n){r.pasteUploadSuccessCallback(t,i,n)}):this.pasteUploadSuccessCallback(t,i);n.close();t.style.opacity="1";this.uploadObj.destroy();this.uploadObj=void 0},i.prototype.pasteUploadSuccessCallback=function(n,t,i){if(!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.file)||sf.base.isNullOrUndefined(i.file.name))r=this.parent.insertImageSettings.path+t.file.name,n.src=r,n.setAttribute("alt",t.file.name);else{var r=this.parent.insertImageSettings.path+i.file.name;n.src=r;n.setAttribute("alt",i.file.name)}},i.prototype.refreshPopup=function(n,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+n.offsetTop:n.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display="block"):t&&(t.refreshPosition(n),t.element.style.display="block")},i.prototype.base64ToFile=function(n,t){for(var f,e=n.split(","),i=e[0].match(/:(.*?);/)[1].split("/")[1],o=atob(e[1]),r=o.length,u=new Uint8Array(r);r--;)u[r]=o.charCodeAt(r);return sf.base.Browser.isIE||navigator.appVersion.indexOf("Edge")>-1?(f=new Blob([u],{type:i}),sf.base.extend(f,{name:t+"."+(sf.base.isNullOrUndefined(i)?"":i)}),f):new File([u],t+"."+(sf.base.isNullOrUndefined(i)?"":i),{type:i})},i.prototype.imageFormatting=function(n,t){var r=sf.base.createElement("span");r.appendChild(t.elements[0]);var i=r.innerHTML,u=document,f=this.nodeSelectionObj.getRange(u);this.saveSelection=this.nodeSelectionObj.save(f,u);this.parent.pasteCleanupSettings.prompt?this.pasteDialog(i,n):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(i,n):this.parent.pasteCleanupSettings.keepFormat?this.formatting(i,!1,n):this.formatting(i,!0,n)},i.prototype.selectFormatting=function(n){""!==this.newRTEHeight&&(this.parent.element.style.height=this.preRTEHeight);"KeepFormat"===n?this.formatting(this.currentValue,!1,this.currentArgs):"CleanFormat"===n?this.formatting(this.currentValue,!0,this.currentArgs):"PlainTextFormat"===n&&this.plainFormatting(this.currentValue,this.currentArgs)},i.prototype.pasteDialog=function(n,t){this.currentValue=n;this.currentArgs=t;this.preRTEHeight=this.parent.height.toString();this.newRTEHeight="";this.parent.element.offsetHeight<265&&(this.newRTEHeight=305..toString());""!==this.newRTEHeight&&(this.parent.element.style.height=this.newRTEHeight+"px");this.parent.openPasteDialog()},i.prototype.formatting=function(n,t,i){var e=this,r=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"}),f,u;for(this.isNotFromHtml&&this.containsHtml&&(n=this.splitBreakLine(n)),r.innerHTML=n,null!==this.parent.pasteCleanupSettings.deniedTags&&(r=this.deniedTags(r)),(t||null!==this.parent.pasteCleanupSettings.deniedAttrs)&&(r=this.deniedAttributes(r,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(r=this.allowedStyle(r)),this.saveSelection.restore(),r.innerHTML=this.sanitizeHelper(r.innerHTML),f=r.querySelectorAll("img"),u=0;u<f.length;u++)f[u].classList.add("pasteContent_Img"),"auto"!=this.parent.insertImageSettings.width&&f[u].setAttribute("width",this.parent.insertImageSettings.width),"0"!=this.parent.insertImageSettings.minWidth&&(f[u].style.minWidth=this.parent.insertImageSettings.minWidth.toString()),null!=this.parent.insertImageSettings.maxWidth&&(f[u].style.maxWidth=this.parent.imageModule.getMaxWidth().toString()),"auto"!=this.parent.insertImageSettings.height&&f[u].setAttribute("height",this.parent.insertImageSettings.height),"0"!=this.parent.insertImageSettings.minHeight&&(f[u].style.minHeight=this.parent.insertImageSettings.minHeight.toString()),null!=this.parent.insertImageSettings.maxHeight&&(f[u].style.maxHeight=this.parent.insertImageSettings.maxHeight.toString());this.addTempClass(r);""===r.textContent&&sf.base.isNullOrUndefined(r.querySelector("img"))&&sf.base.isNullOrUndefined(r.querySelector("table"))||(this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",i,function(n){sf.base.extend(i,{elements:n.elements,imageElements:n.imgElem},!0);e.parent.formatter.onSuccess(e.parent,i)},r),this.removeTempClass(),this.parent.observer.notify("toolbar-refresh",{}),this.imgUploading(this.parent.inputElement))},i.prototype.addTempClass=function(n){for(var i=n.children,t=0;t<i.length;t++)i[t].classList.add("pasteContent_RTE")},i.prototype.removeTempClass=function(){for(var t=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),n=0;n<t.length;n++)t[n].classList.remove("pasteContent_RTE"),""===t[n].getAttribute("class")&&t[n].removeAttribute("class")},i.prototype.sanitizeHelper=function(n){return oi(n,this.parent)},i.prototype.plainFormatting=function(n,t){var o=this,i=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"}),r,f;if(i.innerHTML=n,this.detachInlineElements(i),this.getTextContent(i),""!==i.textContent.trim()){if(!sf.base.isNullOrUndefined(i.firstElementChild)&&"BR"!==i.firstElementChild.tagName&&(r=i.firstElementChild,!sf.base.isNullOrUndefined(i.firstElementChild))){for(var e=sf.base.createElement("span"),u=0,s=0;u<r.childNodes.length;u++,s++)if("#text"===r.childNodes[u].nodeName)e.appendChild(r.childNodes[u]),i.insertBefore(e,i.firstElementChild),u--;else{if("#text"===r.childNodes[u].nodeName||0!==s)break;for(f=0;f<r.childNodes[u].childNodes.length;f++)e.appendChild(r.childNodes[u].childNodes[f]),i.insertBefore(e,i.firstElementChild),f--;u--}r.hasChildNodes()||sf.base.detach(r)}this.removeEmptyElements(i);this.saveSelection.restore();i.innerHTML=this.sanitizeHelper(i.innerHTML);this.addTempClass(i);this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",t,function(n){sf.base.extend(t,{elements:n.elements,imageElements:n.imgElem},!0);o.parent.formatter.onSuccess(o.parent,t)},i);this.removeTempClass()}else this.saveSelection.restore(),sf.base.extend(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},i.prototype.getTextContent=function(n){for(var r,t,o,e,s,u=0;u<this.blockNode.length;u++)for(r=n.querySelectorAll(this.blockNode[u]),t=0;t<r.length;t++){for(var f=void 0,i=0,c=0,h=void 0;i<r[t].childNodes.length;i++,c++)"DIV"===r[t].childNodes[i].nodeName||"P"===r[t].childNodes[i].nodeName||"#text"===r[t].childNodes[i].nodeName&&"&nbsp;"!==r[t].childNodes[i].nodeValue.replace(/\u00a0/g,"&nbsp;")&&""===r[t].childNodes[i].textContent.trim()?(f=r[t].childNodes[i].parentElement,r[t].childNodes[i].parentElement.parentElement.insertBefore(r[t].childNodes[i],r[t].childNodes[i].parentElement),i--):((f=r[t].childNodes[i].parentElement,"text"===h)?f.previousElementSibling.appendChild(r[t].childNodes[i]):(o=sf.base.createElement("div",{id:"newDiv"}),o.appendChild(r[t].childNodes[i]),f.parentElement.insertBefore(o,f)),i--,h="text");sf.base.isNullOrUndefined(f)||sf.base.detach(f)}for(e=n.querySelectorAll("*"),u=0;u<e.length;u++)for(s=e[u].attributes,t=0;t<s.length;t++)e[u].removeAttribute(s[t].name),t--},i.prototype.detachInlineElements=function(n){for(var r,t,f,i,u=0;u<this.inlineNode.length;u++)for(r=n.querySelectorAll(this.inlineNode[u]),t=0;t<r.length;t++){for(f=void 0,i=0;i<r[t].childNodes.length;i++)f=r[t].childNodes[i].parentElement,r[t].childNodes[i].parentElement.parentElement.insertBefore(r[t].childNodes[i],r[t].childNodes[i].parentElement),i--;sf.base.isNullOrUndefined(f)||sf.base.detach(f)}},i.prototype.findDetachEmptyElem=function(n){return sf.base.isNullOrUndefined(n.parentElement)?null:""===n.parentElement.textContent.trim()&&"pasteContent"!==n.parentElement.getAttribute("class")?this.findDetachEmptyElem(n.parentElement):n},i.prototype.removeEmptyElements=function(n){for(var r,i=n.querySelectorAll(":empty"),t=0;t<i.length;t++)"BR"!==i[t].tagName&&(r=this.findDetachEmptyElem(i[t]),sf.base.isNullOrUndefined(r)||sf.base.detach(r))},i.prototype.tagGrouping=function(n){for(var u,t=n.slice(),r=Object.keys(ki),f=r.map(function(n){return ki[n]}),e=[],i=0;i<t.length;i++)if(t[i].split("[").length>1&&(t[i]=t[i].split("[")[0].trim()),r.indexOf(t[i])>-1)for(u=0;u<f[r.indexOf(t[i])].length;u++)t.indexOf(f[r.indexOf(t[i])][u])<0&&e.indexOf(f[r.indexOf(t[i])][u])<0&&e.push(f[r.indexOf(t[i])][u]);return n.concat(e)},i.prototype.attributesfilter=function(n){for(var e,o,s,t=0;t<n.length;t++)if(n[t].split("[").length>1){for(var r=n[t].split("[")[1].split("]")[0].split(","),u=[],f=[],i=0;i<r.length;i++)r[i].indexOf("!")<0?u.push(r[i].trim()):f.push(r[i].split("!")[1].trim());e=u.length>1?u.join("]["):u.join();o=f.length>1?f.join("]["):f.join();o.length>0?(s=""!==e?n[t].split("[")[0]+"["+e+"]":n[t].split("[")[0],n[t]=s+":not(["+o+"])"):n[t]=n[t].split("[")[0]+"["+e+"]"}return n},i.prototype.deniedTags=function(n){var r=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice(),u,i,t,f;for(r=this.attributesfilter(r),r=this.tagGrouping(r),u=0;u<r.length;u++)for(i=n.querySelectorAll(r[u]),t=i.length-1;t>=0;t--){for(f=i[t].parentNode;i[t].firstChild;)f.insertBefore(i[t].firstChild,i[t]);f.removeChild(i[t])}return n},i.prototype.deniedAttributes=function(n,t){var r=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice(),i,f,u;for(t&&r.push("style"),i=0;i<r.length;i++)for(f=n.querySelectorAll("["+r[i]+"]"),u=0;u<f.length;u++)f[u].removeAttribute(r[i]);return n},i.prototype.allowedStyle=function(n){var e=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice(),i,t;for(e.push("list-style-type","list-style"),i=n.querySelectorAll("[style]"),t=0;t<i.length;t++){for(var o,r=[],f=i[t].getAttribute("style").split(";"),u=0;u<f.length;u++)e.indexOf(f[u].split(":")[0].trim())>=0&&r.push(f[u]);i[t].removeAttribute("style");(o=""===r.join(";").trim()?r.join(";"):r.join(";")+";")&&i[t].setAttribute("style",o)}return n},i}(),ii=function(){function n(){}return n.prototype.getLineNumber=function(n,t){return n.value.substr(0,t).split("\n").length},n.prototype.getSelectedText=function(n){var t=n.selectionStart,i=n.selectionEnd;return n.value.substring(t,i)},n.prototype.getAllParents=function(n){return n.split("\n")},n.prototype.getSelectedLine=function(n){return this.getAllParents(n.value)[this.getLineNumber(n,n.selectionStart)-1]},n.prototype.getLine=function(n,t){return this.getAllParents(n.value)[t]},n.prototype.getSelectedParentPoints=function(n){var o=this.getAllParents(n.value),h=this.getLineNumber(n,n.selectionStart),c=this.getLineNumber(n,n.selectionEnd),e=this.getSelectedText(n).split("\n"),t=[],s=o[h-1],l=o.slice(0,h-1).join("").length,i={},r,u,f;if(i.line=h-1,i.start=l+i.line,i.end=""!==s?i.start+s.length+1:i.start+s.length,i.text=s,t.push(i),e.length>1){for(r=1;r<e.length-1;r++)u={},u.line=t[r-1].line+1,u.start=(e[r],t[r-1].end),u.end=u.start+e[r].length+1,u.text=e[r],t.push(u);f={};f.line=t[t.length-1].line+1;f.start=t[t.length-1].end;f.end=f.start+o[c-1].length+1;f.text=o[c-1];t.push(f)}return t},n.prototype.setSelection=function(n,t,i){n.setSelectionRange(t,i);n.focus()},n.prototype.save=function(n,t){this.selectionStart=n;this.selectionEnd=t},n.prototype.restore=function(n){this.setSelection(n,this.selectionStart,this.selectionEnd)},n.prototype.isStartWith=function(n,t){var i=!1;return n&&(i=(n.trim()===t.trim()?new RegExp("^("+this.replaceSpecialChar(t.trim())+")","gim"):new RegExp("^("+this.replaceSpecialChar(t)+")","gim")).test(n.trim())),i},n.prototype.replaceSpecialChar=function(n){return n.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/g,"\\$&")},n.prototype.isClear=function(n,t){for(var i=0;i<n.length;i++)if(new RegExp(t,"gim").test(n[i].text))return!0;return!1},n.prototype.getSelectedInlinePoints=function(n){return{start:n.selectionStart,end:n.selectionEnd,text:this.getSelectedText(n)}},n}(),nf=function(){function n(n){this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,lowercase:!1,inlinecode:!1,unorderedlist:!1,formats:null};this.selection=new ii;this.parent=n;this.element=this.parent.getEditPanel();this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this);this.parent.observer.on(t,this.removeEventListener,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler);this.parent.observer.off(t,this.removeEventListener)},n.prototype.onRefreshHandler=function(n){var i=this.selection.getSelectedParentPoints(this.element),t;this.toolbarStatus={orderedlist:!n.documentNode&&this.isListsApplied(i,"OL"),unorderedlist:!n.documentNode&&this.isListsApplied(i,"UL"),formats:this.currentFormat(i,n.documentNode),bold:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Bold"),italic:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Italic"),inlinecode:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode"),strikethrough:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("StrikeThrough"),subscript:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SubScript"),superscript:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SuperScript"),uppercase:!n.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("UpperCase")};this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode")&&(this.toolbarStatus.formats="pre");t=JSON.stringify(this.toolbarStatus);this.parent.observer.notify("toolbar-updated",this.toolbarStatus);JSON.stringify(this.prevToolbarStatus)!==t&&(this.parent.observer.notify("updateTbItemsStatus",{html:null,markdown:JSON.parse(t)}),this.prevToolbarStatus=JSON.parse(t))},n.prototype.isListsApplied=function(n,t){var r=!0,i,u;if("OL"===t){for(i=0;i<n.length;i++)if(u=n[i].text.trim().split(" ",2)[0]+" ",!/^[\d.]+[ ]+$/.test(u)){r=!1;break}}else for(i=0;i<n.length;i++)if(!this.selection.isStartWith(n[i].text,this.parent.formatter.listSyntax[t])){r=!1;break}return r},n.prototype.currentFormat=function(n,t){for(var u="p",r=Object.keys(this.parent.formatter.formatSyntax),f="backward"===this.element.selectionDirection?n[0].text:n[n.length-1].text,i=0;!t&&i<r.length;i++){if("pre"!==r[i]&&this.selection.isStartWith(f,this.parent.formatter.formatSyntax[r[i]])){u=r[i];break}if("pre"===r[i]&&this.codeFormat()){u=r[i];break}}return u},n.prototype.codeFormat=function(){var e,o=!1,i=this.parent.inputElement,s=i.selectionStart,n=(e=s,function(n){return[n.slice(0,e),n.slice(e)]})(i.value),r=this.parent.formatter.formatSyntax.pre,u=this.getSelectedText(i),t,f;return""!==u&&u===u.toLocaleUpperCase()?!0:""===u&&(t=i.value.substr(n[0].length-1,1),f=n[1].substr(0,1),""!==t&&""!==f&&t.match(/[a-z]/i)&&t===t.toLocaleUpperCase()&&f===f.toLocaleUpperCase())?!0:(this.isCode(n[0],r)&&this.isCode(n[1],r)&&n[0].match(this.multiCharRegx(r)).length%2==1&&n[1].match(this.multiCharRegx(r)).length%2==1&&(o=!0),o)},n.prototype.getSelectedText=function(n){return n.value.substring(n.selectionStart,n.selectionEnd)},n.prototype.isCode=function(n,t){return-1!==n.search("\\"+t)},n.prototype.multiCharRegx=function(n){return new RegExp("(\\"+n+")","g")},n}(),tf=function(){function n(n){sf.base.extend(this,this,n,!0);this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("lists-commands",this.applyListsHandler,this);this.parent.observer.on("keydown-handler",this.keyDownHandler,this);this.parent.observer.on("keyup-handler",this.keyUpHandler,this)},n.prototype.keyDownHandler=function(n){switch(n.event.which){case 9:this.tabKey(n)}switch(n.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:n.callBack});n.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:n.callBack});n.event.preventDefault()}},n.prototype.keyUpHandler=function(n){switch(n.event.which){case 13:this.enterKey(n)}},n.prototype.tabKey=function(n){var r=this.parent.element,y,k,i,h,f,w,u;this.selection.save(r.selectionStart,r.selectionEnd);var e=r.selectionStart,o=r.selectionEnd,t=this.selection.getSelectedParentPoints(r),v=0,b=this.isNotFirstLine(r,t[0]);if(b||n.event.shiftKey){for(y=this.olListType(),k=this.getListRegex(),this.currentAction=this.getAction(t[0].text),i=0;i<t.length;i++)if(h=(n.event.shiftKey,t[i].line-1),f=this.selection.getLine(r,h),f&&(!n.event.shiftKey&&b||n.event.shiftKey)){var d=f.split(". "),c=n.event.shiftKey?-1:1,s=t[i].text.split("\t");if(n.event.shiftKey&&1===s.length)break;if("OL"===this.currentAction&&/^\d+$/.test(d[0].trim())&&y){n.event.preventDefault();t[i].text=n.event.shiftKey?s.splice(1,s.length).join("\t"):"\t"+t[i].text;var l=this.getTabSpace(t[i].text),a=this.getTabSpace(f),p=t[i].text.split(". ");if(l===a)this.changeTextAreaValue(p,this.nextOrderedListValue(d[0].trim()),n,r,t,i,o);else if(a<l)this.changeTextAreaValue(p,"1. ",n,r,t,i,o);else for(;a.length>l.length;null)if(h-=1,w=(f=this.selection.getLine(r,h)).trim().split(". "),/^\d+$/.test(w[0])&&(a=this.getTabSpace(f)).length<=l.length){this.changeTextAreaValue(p,this.nextOrderedListValue(w[0]),n,r,t,i,o);break}}else("UL"===this.currentAction&&k.test(f.trim())||!y)&&(n.event.preventDefault(),t[i].text=n.event.shiftKey?s.splice(1,s.length).join("\t"):"\t"+t[i].text,r.value=r.value.substr(0,t[i].start)+t[i].text+"\n"+r.value.substr(t[i].end,r.value.length));if(e=0===i?e+c:e,v+=c,1!==t.length)for(u=i;u<t.length;u++)t[u].start=0!==u?t[u].start+c:t[u].start,t[u].end=t[u].end+c}this.restore(r,e,o+v,n)}else this.restore(r,e,o+v,n)},n.prototype.changeTextAreaValue=function(n,t,i,r,u,f){var b=t,h,p,w;n.splice(0,1);var k,rt=this.selection.getAllParents(r.value).length,e="",s=this.getTabSpace(u[f].text),d=parseInt(b.split(".")[0],null),v=this.getTabSpace(u[f].text),g=!0,l=!0,nt=-1,tt=!0,it=0,y="";for(e=""!==this.selection.getLine(r,u[0].line+1)?"":e+r.value.substr(u[0].end,r.value.length),h=1;h<rt&&!sf.base.isNullOrUndefined(this.selection.getLine(r,u[0].line+h))&&""!==this.selection.getLine(r,u[0].line+h);h++){var a=this.selection.getLine(r,u[0].line+h),o=this.getTabSpace(a),c=a.split(". ");if(1===c.length){e+=r.value.substr(u[0].end+it,r.value.length);break}it+=a.length;p=!1;(k=i.event.shiftKey?s.length+1:s.length-1,o.length>v.length&&(tt=!1),s.length!==o.length&&o.length<v.length?(l=!0,g=!1,p=!(!i.event.shiftKey||s.length!==o.length)&&(l=!1,!0)):tt&&i.event.shiftKey&&s.length===o.length&&o.length===v.length&&(l=!1,p=!0),y=""===e?"":"\n",k===o.length&&l)?(w=i.event.shiftKey?(nt++,this.nextOrderedListValue(nt.toString())):this.previousOrderedListValue(c[0]),c.splice(0,1),e=e+y+o+w+c.join(". ")):s.length===o.length&&g||p?(w=this.nextOrderedListValue(d.toString()),d++,c.splice(0,1),e=e+y+o+w+c.join(". ")):(e=e+y+a,l=!1);v=this.getTabSpace(a)}u[f].text=this.getTabSpace(u[f].text)+b+n.join(". ")+"\n";r.value=r.value.substr(0,u[f].start)+u[f].text+e},n.prototype.getTabSpace=function(n){for(var i=n.split("\t"),r="",t=0;t<i.length&&""===i[t];t++)r+="\t";return r},n.prototype.isNotFirstLine=function(n,t){var s,c=t.text,o=t.line-1,i=this.selection.getLine(n,o),h=this.getListRegex(),r=!1,u,f,e;if(i&&(this.currentAction=this.getAction(i),u=i.split(". "),s="OL"===this.currentAction?/^\d+$/.test(u[0].trim()):h.test(i.trim())),i&&s)for(f=this.getTabSpace(c),e=this.getTabSpace(i),r=f===e||r;e.length>f.length;null)if(o-=1,u=(i=this.selection.getLine(n,o)).trim().split(". "),("OL"===this.currentAction?/^\d+$/.test(u[0]):h.test(i.trim()))&&(e=this.getTabSpace(i)).length<=f.length){r=!0;break}return r},n.prototype.getAction=function(n){var t=n.split(". ")[0],i=/^\d+$/.test(t.trim()),r=n.trim().split(new RegExp("^("+this.selection.replaceSpecialChar(this.syntax.UL).trim()+")"))[1];return i?"OL":r?"UL":"NOTLIST"},n.prototype.nextOrderedListValue=function(n){return(parseInt(n,null)+1).toString()+". "},n.prototype.previousOrderedListValue=function(n){return(parseInt(n,null)-1).toString()+". "},n.prototype.enterKey=function(n){var t=this.parent.element,l,f,u,o,s,a,d;this.selection.save(t.selectionStart,t.selectionEnd);var h=t.selectionStart,g=t.selectionEnd,i=this.selection.getSelectedParentPoints(t),r=this.selection.getLine(t,i[0].line-1),y=this.olListType(),p=this.getListRegex(),c=[];if(sf.base.isNullOrUndefined(r)||(c=r.split(". "),this.currentAction=this.getAction(r)),l=0,"OL"===this.currentAction&&c.length>1&&/^\d+$/.test(c[0].trim())&&y&&""!==c[1]){f=this.getTabSpace(r);this.currentAction=this.getAction(r);u=this.nextOrderedListValue(c[0]);i[0].text=f+u+i[0].text;for(var nt=this.selection.getAllParents(t.value).length,e="\n",w=this.getTabSpace(r),b=this.getTabSpace(i[0].text),k=!0,v=1;v<nt&&""!==t.value.substr(i[0].end,t.value.length);v++)o=this.selection.getLine(t,i[0].line+v),sf.base.isNullOrUndefined(o)?e+="":(s=o.split(". "),a=this.getTabSpace(o),(a.length<b.length&&(k=!1),s.length>1&&/^\d+$/.test(s[0].trim())&&w.length===a.length&&k)?(d=this.nextOrderedListValue(s[0]),s.splice(0,1),e=e+a+d+s.join(". ")+"\n"):(e=e+o+"\n",b=this.getTabSpace(o)));t.value=t.value.substr(0,i[0].start)+w+u+this.selection.getLine(t,i[0].line)+e;h=h+u.length+f.length;l+=u.length+f.length}else("UL"===this.currentAction&&r&&p.test(r.trim())&&""!==r.trim().replace(p,"")||"OL"===this.currentAction&&!y)&&(f=this.getTabSpace(r),u=this.syntax[this.currentAction],i[0].text=f+u+i[0].text+(i[0].text.trim().length>0?"\n":""),t.value=t.value.substr(0,i[0].start)+i[0].text+t.value.substr(i[0].end,t.value.length),h=h+u.length+f.length,l+=u.length+f.length);this.restore(t,h,g+l,n)},n.prototype.olListType=function(){var n=this.syntax.OL.split(".,");return(1===n.length?null:parseInt(n[2].trim(),null)-parseInt(n[0].trim(),null))?1:0},n.prototype.applyListsHandler=function(n){var u=this.parent.element,r,y,f;this.selection.save(u.selectionStart,u.selectionEnd);this.currentAction=n.subCommand;for(var o,s=u.selectionStart,c=u.selectionEnd,l=0,a=0,h=0,t=this.selection.getSelectedParentPoints(u),e="",v=this.olListType(),p={},i=0;i<t.length;i++)if(o=v?"OL"===this.currentAction?i+v+". ":this.syntax[this.currentAction]:"OL"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(t[i].text,o))t[i].text=t[i].text.replace(o,""),u.value=u.value.substr(0,t[i].start+h)+t[i].text+"\n"+u.value.substr(t[i].end+h,u.value.length),h-=o.length,a=o.length,this.restore(u,s-a,c+h,null);else{if(""===t[i].text&&0===i&&(this.selection.save(s,c),1!==t.length))for(r=i;r<t.length;r++)t[r].start=0!==r?1+t[r].start:t[r].start,t[r].end=1+t[r].end;if(y=sf.base.isNullOrUndefined(t[i-1])?0:this.getTabSpace(t[i-1].text).length,f=this.appliedLine(t[i].text,o,p,y),e=f.line?e:o,t[i].text=f.line?f.line:e+t[i].text,f.space=f.space?f.space:0,u.value=u.value.substr(0,t[i].start+h)+t[i].text+"\n"+u.value.substr(t[i].end,u.value.length),s=0===i?s+e.length+f.space>0?s+e.length+f.space:0:s,l+=e.length+f.space,1!==t.length)for(r=i;r<t.length;r++)t[r].start=0!==r?e.length+t[r].start+f.space:t[r].start,t[r].end=e.length+t[r].end+f.space;this.restore(u,s,c+l,null)}this.restore(u,null,null,n)},n.prototype.appliedLine=function(n,t,i,r){var f={},h=new RegExp("^["+this.syntax.UL.trim()+"]"),u=n.split(". "),c=u[0]+". ",a=h.test(n.trim())||n.trim()===this.syntax.OL.trim()||n.trim()===this.syntax.UL.trim()||/^\d+$/.test(u[0].trim()),l=this.olListType(),e=this.getTabSpace(n).length,o,s;return("OL"===this.currentAction&&l&&(i[e.toString()]=sf.base.isNullOrUndefined(i[e.toString()])?1:i[e.toString()].valueOf()+1,t=i[e.toString()].valueOf().toString()+". ",!sf.base.isNullOrUndefined(r)&&r>e&&(i[r.toString()]=0)),a)&&(o=void 0,s=void 0,h.test(n.trim())?(s=this.syntax.UL,o=t,f.space=t.trim().length-this.syntax.UL.trim().length):/^\d+$/.test(u[0].trim())&&l?(s=u[0].trim()+". ",o=t,f.space=this.syntax.UL.trim().length-c.trim().length):/^\d+$/.test(u[0].trim())&&(s=u[0].trim()+". ",o=this.syntax.UL,f.space=this.syntax.UL.trim().length-c.trim().length),f.line=n.replace(s,o)),f},n.prototype.restore=function(n,t,i,r){sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t)||this.selection.save(t,i);sf.base.isNullOrUndefined(r)||this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n.prototype.getListRegex=function(){for(var n,t="",r=Object.keys(this.syntax),i=0;i<r.length;i++)n=this.selection.replaceSpecialChar(this.syntax[r[i]]),t+=""===t?"^("+n+")|^("+n.trim()+")":"|^("+n+")|^("+n.trim()+")";return new RegExp(t)},n}(),rf=function(){function n(n){sf.base.extend(this,this,n,!0);this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this)},n.prototype.applyFormats=function(n){var i,t,r,u;if(n.subCommand=n.subCommand.toLowerCase(),i=this.parent.element,this.selection.save(i.selectionStart,i.selectionEnd),t=this.selection.getSelectedParentPoints(i),this.isAppliedFormat(t)===n.subCommand){if("pre"===n.subCommand){if(!(t.length>1))return;this.applyCodeBlock(i,n,t)}return this.cleanFormat(i),void this.restore(i,i.selectionStart,i.selectionEnd,n)}if("p"===n.subCommand)return this.cleanFormat(i),void this.restore(i,i.selectionStart,i.selectionEnd,n);("pre"===n.subCommand&&1!==t.length||"pre"!==n.subCommand)&&this.cleanFormat(i,n.subCommand);var f=i.selectionStart,o=i.selectionEnd,e=0;if(t=this.selection.getSelectedParentPoints(i),"pre"!==n.subCommand){for(r=0;r<t.length;r++)if(""===t[r].text||this.selection.isStartWith(t[r].text,"\\"+this.syntax[n.subCommand])){if(""===t[r].text&&0===r&&(this.selection.save(f,o),0===this.selection.getSelectedText(i).length&&(t[r].text=this.syntax[n.subCommand],i.value=i.value.substr(0,t[r].start)+this.syntax[n.subCommand]+i.value.substr(t[r].end,i.value.length),f=0===r?f+this.syntax[n.subCommand].length:f,e+=this.syntax[n.subCommand].length),1!==t.length))for(u=r;u<t.length;u++)t[u].start=0!==u?1+t[u].start:t[u].start,t[u].end=1+t[u].end}else if(t[r].text=this.syntax[n.subCommand]+t[r].text,i.value=i.value.substr(0,t[r].start)+t[r].text+"\n"+i.value.substr(t[r].end,i.value.length),f=0===r?f+this.syntax[n.subCommand].length:f,e+=this.syntax[n.subCommand].length,1!==t.length)for(u=r;u<t.length;u++)t[u].start=0!==u?this.syntax[n.subCommand].length+t[u].start:t[u].start,t[u].end=this.syntax[n.subCommand].length+t[u].end;this.restore(i,f,o+e,n)}else t.length>1?this.applyCodeBlock(i,n,t):(sf.base.extend(n,n,{subCommand:"InlineCode"},!0),this.parent.observer.notify("command-type",n))},n.prototype.clearRegex=function(){for(var i="",t=Object.keys(this.syntax),n=0;n<t.length&&"pre"!==t[n]&&"p"!==t[n];n++)i+=""===i?"^("+this.selection.replaceSpecialChar(this.syntax[t[n]].trim())+")":"|^("+this.selection.replaceSpecialChar(this.syntax[t[n]].trim())+")";return i},n.prototype.cleanFormat=function(n,t){var i=this.selection.getSelectedParentPoints(n),o=n.selectionStart,c=n.selectionEnd,l=0,r,s,u,e,h,f;if(this.selection.isClear(i,this.clearRegex())){for(r=0;r<i.length;r++){for(s=Object.keys(this.syntax),u=0;""!==i[r].text&&u<s.length;u++)if(e=this.syntax[s[u]],s[u]!==t&&(h=new RegExp("^("+this.selection.replaceSpecialChar(e)+")","gim"),h.test(i[r].text))){if(i[r].text=i[r].text.replace(h,""),n.value=n.value.substr(0,i[r].start)+i[r].text+"\n"+n.value.substr(i[r].end,n.value.length),o=0===r?o-e.length>0?o-e.length:0:o,l+=e.length,1!==i.length)for(f=0;f<i.length;f++)i[f].start=0!==f?i[f].start-e.length:i[f].start,i[f].end=i[f].end-e.length;break}if(""===i[r].text&&0===r&&(this.selection.save(o,c),1!==i.length))for(u=r;u<i.length;u++)i[u].start=0!==u?1+i[u].start:i[u].start,i[u].end=1+i[u].end}this.restore(n,o,c-l)}},n.prototype.applyCodeBlock=function(n,t,i){var e=t.subCommand,r=i[0].start,u=i[i.length-1].end,h=this.selection.getAllParents(n.value),y=h[i[0].line-1],p=h[i.length+1+1],l,a,s,v;if(this.selection.isStartWith(y,this.syntax.pre.split("\n")[0])||this.selection.isStartWith(p,this.syntax.pre.split("\n")[0])){var f=this.syntax[e],o=this.parent.markdownSelection.getSelectedInlinePoints(n),w=n.value.substr(0,n.selectionStart).lastIndexOf(f),c=n.value.substr(n.selectionEnd,n.selectionEnd).indexOf(f);c+=o.end;l=this.replaceAt(n.value.substr(0,o.start),f,"",w,o.start);a=this.replaceAt(n.value.substr(o.end,n.value.length),f,"",0,c);n.value=l+o.text+a;r=this.selection.selectionStart-f.length;u=this.selection.selectionEnd-f.length}else s=n.value.substring(r,u).split("\n"),v=""===s[s.length-1]?"":"\n",n.value=n.value.substr(0,r)+this.syntax[e]+n.value.substring(r,u)+v+this.syntax[e]+n.value.substr(u,n.value.length),r=this.selection.selectionStart+this.syntax[e].length,u=this.selection.selectionEnd+this.syntax[e].length-1;this.restore(n,r,u,t)},n.prototype.replaceAt=function(n,t,i,r,u){return n.slice(0,r)+n.slice(r,u).replace(t,i)+n.slice(u)},n.prototype.restore=function(n,t,i,r){this.selection.save(t,i);this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:r.subCommand,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n.prototype.isAppliedFormat=function(n,t){for(var u="p",r=(Object.keys(this.syntax),Object.keys(this.syntax)),e="backward"===this.parent.element.selectionDirection?n[0].text:n[n.length-1].text,i=0;!t&&i<r.length;i++){if("pre"!==r[i]&&this.selection.isStartWith(e,this.syntax[r[i]])){u=r[i];break}if("pre"===r[i]){var f=this.selection.getAllParents(this.parent.element.value),o=f[n[0].line-1],s=f[n.length+1];if(this.selection.isStartWith(o,this.syntax[r[i]].split("\n")[0])&&this.selection.isStartWith(s,this.syntax[r[i]].split("\n")[0])){u=r[i];break}}}return u},n}(),uf=function(){function n(n){sf.base.extend(this,this,n,!0);this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("command-type",this.applyCommands,this);this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},n.prototype.keyDownHandler=function(n){switch(n.event.action){case"bold":this.applyCommands({subCommand:"Bold",callBack:n.callBack});n.event.preventDefault();break;case"italic":this.applyCommands({subCommand:"Italic",callBack:n.callBack});n.event.preventDefault();break;case"strikethrough":this.applyCommands({subCommand:"StrikeThrough",callBack:n.callBack});n.event.preventDefault();break;case"uppercase":this.applyCommands({subCommand:"UpperCase",callBack:n.callBack});n.event.preventDefault();break;case"lowercase":this.applyCommands({subCommand:"LowerCase",callBack:n.callBack});n.event.preventDefault();break;case"superscript":this.applyCommands({subCommand:"SuperScript",callBack:n.callBack});n.event.preventDefault();break;case"subscript":this.applyCommands({subCommand:"SubScript",callBack:n.callBack});n.event.preventDefault()}},n.prototype.isBold=function(n,t){return-1!==n.search("\\"+t+"\\"+t)},n.prototype.isItalic=function(n,t){return-1!==n.search("\\"+t)},n.prototype.isMatch=function(n,t){var i=[""];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:i=n.match(this.singleCharRegx(t))}return i},n.prototype.multiCharRegx=function(n){return new RegExp("(\\"+n+"\\"+n+")","g")},n.prototype.singleCharRegx=function(n){return new RegExp("(\\"+n+")","g")},n.prototype.isAppliedCommand=function(n){var s,i=!1,f=this.parent.element,c=f.selectionStart,t=(s=c,function(n){return[n.slice(0,s),n.slice(s)]})(f.value),r=this.syntax.Bold.substr(0,1),h=this.syntax.Italic,e=this.parent.markdownSelection.getSelectedText(f),u,o;return""!==e&&e===e.toLocaleUpperCase()&&"UpperCase"===n?!0:""===e&&(u=f.value.substr(t[0].length-1,1),o=t[1].substr(0,1),""!==u&&""!==o&&u.match(/[a-z]/i)&&u===u.toLocaleUpperCase()&&o===o.toLocaleUpperCase()&&"UpperCase"===n)?!0:(this.isBold(t[0],r)||this.isItalic(t[0],h)||this.isBold(t[1],r)||this.isItalic(t[1],h)||(sf.base.isNullOrUndefined(this.isMatch(t[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(t[1],this.syntax.StrikeThrough))||this.isMatch(t[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(t[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==n||(i=!0),sf.base.isNullOrUndefined(this.isMatch(t[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(t[1],this.syntax.InlineCode))||this.isMatch(t[0],this.syntax.InlineCode).length%2!=1||this.isMatch(t[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==n||(i=!0),sf.base.isNullOrUndefined(t[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(t[1].match(/\<\/sub>/g))||t[0].match(/\<sub>/g).length%2!=1||t[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==n||(i=!0),sf.base.isNullOrUndefined(t[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(t[1].match(/\<\/sup>/g))||t[0].match(/\<sup>/g).length%2!=1||t[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==n||(i=!0)),this.isBold(t[0],r)&&this.isBold(t[1],r)&&t[0].match(this.multiCharRegx(r)).length%2==1&&t[1].match(this.multiCharRegx(r)).length%2==1&&"Bold"===n&&(i=!0),t[0]=this.isBold(t[0],r)?t[0].replace(this.multiCharRegx(r),"$%@"):t[0],t[1]=this.isBold(t[1],r)?t[1].replace(this.multiCharRegx(r),"$%@"):t[1],sf.base.isNullOrUndefined(this.isMatch(t[0],this.syntax.Italic))||sf.base.isNullOrUndefined(this.isMatch(t[1],this.syntax.Italic))||this.isMatch(t[0],this.syntax.Italic).length%2!=1||this.isMatch(t[1],this.syntax.Italic).length%2!=1||"Italic"!==n||(i=!0),sf.base.isNullOrUndefined(this.isMatch(t[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(t[1],this.syntax.StrikeThrough))||this.isMatch(t[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(t[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==n||(i=!0),sf.base.isNullOrUndefined(this.isMatch(t[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(t[1],this.syntax.InlineCode))||this.isMatch(t[0],this.syntax.InlineCode).length%2!=1||this.isMatch(t[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==n||(i=!0),sf.base.isNullOrUndefined(t[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(t[1].match(/\<\/sub>/g))||t[0].match(/\<sub>/g).length%2!=1||t[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==n||(i=!0),sf.base.isNullOrUndefined(t[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(t[1].match(/\<\/sup>/g))||t[0].match(/\<sup>/g).length%2!=1||t[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==n||(i=!0),i)},n.prototype.applyCommands=function(n){var i,e,o,c,s;this.currentAction=n.subCommand;i=this.parent.element;this.selection.save(i.selectionStart,i.selectionEnd);var u=i.selectionStart,f=i.selectionEnd,r=0,t=this.parent.markdownSelection.getSelectedInlinePoints(i);if(this.isAppliedCommand(n.subCommand)&&""!==t.text){var h=this.syntax[n.subCommand],l="SubScript"===n.subCommand?"<\/sub>":"SuperScript"===n.subCommand?"<\/sup>":this.syntax[n.subCommand],a="UpperCase"===n.subCommand||"LowerCase"===n.subCommand?0:h.length,y=i.value.substr(0,t.start).lastIndexOf(h),v=i.value.substr(t.end,i.value.length).indexOf(l);return v+=t.end,e=this.replaceAt(i.value.substr(0,t.start),h,"",y,t.start),o=this.replaceAt(i.value.substr(t.end,i.value.length),l,"",0,v),i.value=e+t.text+o,void this.restore(i,u-a,f-a,n)}""===t.text||this.isApplied(t,n.subCommand)?"UpperCase"!==n.subCommand&&"LowerCase"!==n.subCommand?("SubScript"===n.subCommand||"SuperScript"===n.subCommand?(t.text=this.textReplace(t.text,n.subCommand),t.text=this.syntax[n.subCommand]+t.text+"<\/"+this.syntax[n.subCommand].substring(1,5)):(t.text=this.textReplace(t.text,n.subCommand),t.text=this.syntax[n.subCommand]+t.text+this.syntax[n.subCommand]),i.value=i.value.substr(0,t.start)+t.text+i.value.substr(t.end,i.value.length),r=this.syntax[n.subCommand].length,t.start===t.end?this.restore(i,u+r,f+r,n):this.restore(i,u+r,f-r,n)):this.restore(i,u,f,n):(r="UpperCase"===n.subCommand||"LowerCase"===n.subCommand?0:this.syntax[n.subCommand].length,c=i.value.substr(t.start-this.syntax[n.subCommand].length,this.syntax[n.subCommand].length),s=void 0,c===n.subCommand||t.start-this.syntax[n.subCommand].length===i.value.indexOf(this.syntax[n.subCommand])&&(t.end===i.value.lastIndexOf(this.syntax[n.subCommand])||t.end===i.value.lastIndexOf("<\/"+this.syntax[n.subCommand].substring(1,5)))?(s="SubScript"===n.subCommand||"SuperScript"===n.subCommand?i.value.substr(t.end,this.syntax[n.subCommand].length+1):i.value.substr(t.end,this.syntax[n.subCommand].length),e=this.replaceAt(i.value.substr(0,t.start),c,"",t.start-this.syntax[n.subCommand].length,t.start),o=this.replaceAt(i.value.substr(t.end,i.value.length),s,"",0,s.length),i.value=e+t.text+o,this.restore(i,u-r,f-r,n)):(t.text="SubScript"===n.subCommand||"SuperScript"===n.subCommand?this.syntax[n.subCommand]+t.text+"<\/"+this.syntax[n.subCommand].substring(1,5):"UpperCase"===n.subCommand||"LowerCase"===n.subCommand?"UpperCase"===n.subCommand?t.text.toUpperCase():t.text.toLowerCase():this.syntax[n.subCommand]+t.text+this.syntax[n.subCommand],i.value=i.value.substr(0,t.start)+t.text+i.value.substr(t.end,i.value.length),this.restore(i,u+r,f+r,n)));this.parent.undoRedoManager.saveData()},n.prototype.replaceAt=function(n,t,i,r,u){return n.slice(0,r)+n.slice(r,u).replace(t,i)+n.slice(u)},n.prototype.restore=function(n,t,i,r){this.selection.save(t,i);this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n.prototype.textReplace=function(n,t){var i=this.singleCharRegx(this.syntax[t]),u,r,f;switch(t){case"Bold":i=this.multiCharRegx(this.syntax[t].substr(0,1));n=n.replace(i,"");break;case"Italic":this.isBold(n,this.syntax[t].substr(0,1))?(u=this.multiCharRegx(this.syntax[t].substr(0,1)),r=n,r=r.replace(u,"$%@").replace(i,""),f=new RegExp("\\$%@","g"),n=r.replace(f,this.syntax[t].substr(0,1)+this.syntax[t].substr(0,1))):n=n.replace(i,"");break;case"StrikeThrough":case"InlineCode":n=n.replace(i,"");break;case"SubScript":n=n.replace(/<sub>/g,"").replace(/<\/sub>/g,"");break;case"SuperScript":n=n.replace(/<sup>/g,"").replace(/<\/sup>/g,"")}return n},n.prototype.isApplied=function(n,t){var i=this.singleCharRegx(this.syntax[t]),r,f,u;switch(t){case"SubScript":case"SuperScript":return(i=this.singleCharRegx(this.syntax[t])).test(n.text);case"Bold":case"StrikeThrough":return(i=this.multiCharRegx(this.syntax[t].substr(0,1))).test(n.text);case"UpperCase":case"LowerCase":return(i=new RegExp("^["+this.syntax[t]+"]*$","g")).test(n.text);case"Italic":return r=void 0,f=this.multiCharRegx(this.syntax[t].substr(0,1)),f.test(n.text)?(u=n.text,u=u.replace(f,"$%#"),r=i.test(u)):r=i.test(n.text),r;case"InlineCode":return i.test(n.text)}},n}(),ff=function(){function n(n,t){this.undoRedoStack=[];this.parent=n;this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps;this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer;this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){var n=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",n,this);this.parent.observer.on("keydown-handler",this.keyDown,this);this.parent.observer.on("action",this.onAction,this);this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},n.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n.newProp);t<i.length;t++)switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=n.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=n.newProp.undoRedoTimer}},n.prototype.removeEventListener=function(){var n=sf.base.debounce(this.keyUp,300);this.parent.observer.off("keyup-handler",n);this.parent.observer.off("keydown-handler",this.keyDown);this.parent.observer.off("action",this.onAction);this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.onAction=function(n){"Undo"===n.subCommand?this.undo(n):this.redo(n)},n.prototype.keyDown=function(n){var t=n.event;switch(t.action){case"undo":t.preventDefault();this.undo(n);break;case"redo":t.preventDefault();this.redo(n)}},n.prototype.keyUp=function(n){17===n.event.keyCode||n.event.ctrlKey||this.saveData(n)},n.prototype.saveData=function(n){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,r=t.selectionEnd,u={text:this.parent.element.value,start:i,end:r};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1));this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===i&&this.undoRedoStack[this.undoRedoStack.length-1].end===r||(this.undoRedoStack.push(u),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),n&&n.callBack&&n.callBack())},n.prototype.undo=function(n){if(this.steps>0){this.currentAction="Undo";var t=this.undoRedoStack[this.steps-1].start,i=this.undoRedoStack[this.steps-1].end,r=this.undoRedoStack[this.steps-1].text;this.parent.element.value=r;this.parent.element.focus();this.steps--;this.restore(this.parent.element,t,i,n)}},n.prototype.redo=function(n){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction="Redo";var t=this.undoRedoStack[this.steps+1].start,i=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text;this.parent.element.focus();this.steps++;this.restore(this.parent.element,t,i,n)}},n.prototype.restore=function(n,t,i,r){this.selection.save(t,i);this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n.prototype.getUndoStatus=function(){var n={undo:!1,redo:!1};return this.steps>0&&(n.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(n.redo=!0),n},n}(),ef=function(){function n(n){this.parent=n;this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("link-commands",this.createLink,this)},n.prototype.createLink=function(n){var t=this.parent.element;t.focus();var r=t.selectionStart,u=t.selectionEnd,i="Image"===n.subCommand?this.selection.getSelectedText(t):n.item.text,f="Image"===n.subCommand?r+2:r+1,e="Image"===n.subCommand?u+2:u+1;i="Image"===n.subCommand?"!["+i+"]("+n.item.url+")":"["+i+"]("+n.item.url+")";t.value=t.value.substr(0,r)+i+t.value.substr(u,t.value.length);this.parent.markdownSelection.setSelection(t,f,e);this.restore(t,f,e,n)},n.prototype.restore=function(n,t,i,r){this.selection.save(t,i);this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:r.subCommand,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n}(),hf=function(){function n(n){sf.base.extend(this,this,n,!0);this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("insert-table",this.createTable,this);this.parent.observer.on("keydown-handler",this.onKeyDown,this)},n.prototype.removeEventListener=function(){this.parent.observer.off("insert-table",this.createTable);this.parent.observer.off("keydown-handler",this.onKeyDown)},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.onKeyDown=function(n){"insert-table"===n.event.action&&(n.item=n.value,this.createTable(n))},n.prototype.createTable=function(n){this.element=this.parent.element;var t=this.element.selectionStart,i=this.element.selectionEnd,r=this.element.value;this.locale=n;this.selection.save(t,i);this.restore(this.element.selectionStart,this.element.selectionEnd,null);this.insertTable(t,i,r,n)},n.prototype.getTable=function(){var n="";return n+=this.textNonEmpty(),n+=this.tableHeader(this.locale),n+this.tableCell(this.locale)},n.prototype.tableHeader=function(n){for(var r,t="",i=1;i<=2;i++){for(t+="|",r=1;r<=2;r++)t+=1===i?n.item.headingText+" "+r+"|":"---------|";t+=this.insertLine()}return t},n.prototype.tableCell=function(n){for(var r,t="",i=1;i<=2;i++){for(t+="|",r=1;r<=2;r++)t+=n.item.colText+" "+this.convertToLetters(i)+r+"|";t+=this.insertLine()}return t+this.insertLine()},n.prototype.insertLine=function(){var n=document.createElement("div");return n.innerHTML="\n",n.textContent},n.prototype.insertTable=function(n,t,i,r){var u=this.selection.getSelectedParentPoints(this.element),f=u[u.length-1].text.split(" ",2),e=this.getFormatTag();f.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,n,t)):this.ensureFormatApply(u[u.length-1].text)?this.checkValid(n,t,this.getTable(),i,r,f,u,e):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,n,t));this.restore(this.element.selectionStart,this.element.selectionEnd,r)},n.prototype.makeSelection=function(n,t,i){i=t+(n.length>0?12:10);t+=n.length>0?3:1;this.selection.setSelection(this.element,t,i)},n.prototype.getFormatTag=function(){for(var n,r=Object.keys(this.syntaxTag.Formats),u=Object.keys(this.syntaxTag.List),t=[],i=0;i<r.length;i++)t.push(this.syntaxTag.Formats[r[i]]);for(n=0;n<u.length;n++)t.push(this.syntaxTag.List[u[n]]);return t},n.prototype.ensureFormatApply=function(n){for(var i=this.getFormatTag(),r=n.trim().split(" ",2)[0]+" ",t=0;t<i.length;t++)if(r===i[t]||/^[\d.]+[ ]+$/.test(r))return!0;return!1},n.prototype.ensureStartValid=function(n,t){for(var r=t[0].text.split(" ",2),i=n+1;i<=n+r[0].length+1;i++)if(this.element.selectionStart===i||this.element.selectionEnd===i)return!1;return!0},n.prototype.ensureEndValid=function(n,t){for(var i=n+1;i<=n+t+1;i++)if(this.element.selectionEnd===i)return!1;return!0},n.prototype.updateValueWithFormat=function(n,t){var i=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=i.replace(i,n[0]+" "+i),this.element.value.substr(0,this.element.selectionStart)+t},n.prototype.updateValue=function(n){return this.element.value.substr(0,this.element.selectionStart)+n+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},n.prototype.checkValid=function(n,t,i,r,u,f,e){this.ensureStartValid(e[0].start,e)&&this.ensureEndValid(e[e.length-1].start,f[0].length)&&(this.element.value=n===e[0].start?n!==t&&t!==e[e.length-1].end-1?this.updateValueWithFormat(f,i):this.updateValue(i):t===e[e.length-1].end-1?this.updateValue(i):this.updateValueWithFormat(f,i),this.makeSelection(r,n,t))},n.prototype.convertToLetters=function(n){var i="A".charCodeAt(0),t="";do n-=1,t=String.fromCharCode(i+n%26)+t,n=n/26>>0;while(n>0);return t},n.prototype.textNonEmpty=function(){var n="";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(n+=this.insertLine(),n+=this.insertLine()),n},n.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},n.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},n.prototype.restore=function(n,t,i){this.selection.save(n,t);this.selection.restore(this.element);i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:"Markdown",event:i.event})},n}(),cf=function(){function n(n){this.parent=n;this.selection=this.parent.markdownSelection;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("clear-commands",this.clear,this)},n.prototype.replaceRegex=function(n){return n.replace(/\*/gi,"\\*").replace(/\&/gi,"\\&").replace(/\-/gi,"\\-").replace(/\^/gi,"\\^").replace(/\$/gi,"\\$").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\+/gi,"\\+").replace(/\-/gi,"\\-").replace(/\&/gi,"\\&")},n.prototype.clearSelectionTags=function(n){for(var i,r,u,t=this.parent.selectionTags,e=Object.keys(t),f=0;f<e.length;f++)if(i=e[f],t.hasOwnProperty(i)&&""!==t[i]){var o=this.replaceRegex(t[i]),s=void 0,h=t[i].length,c="<sup>"===t[i]||"<sub>"===t[i]?t[i].length+1:t[i].length;for(s="<sup>"===t[i]?new RegExp("<sup>(.*?)<\/sup>","ig"):"<sub>"===t[i]?new RegExp("<sub>(.*?)<\/sub>","ig"):new RegExp(o+"(.*?)"+o,"ig"),r=n.match(s),u=0;r&&u<r.length&&""!==r[u];u++)n=n.replace(r[u],r[u].substr(h,r[u].length-c-h))}return n},n.prototype.clearFormatTags=function(n){var t=n.split("\n");return this.clearFormatLines(t)},n.prototype.clearFormatLines=function(n){for(var u,r,o=[this.parent.formatTags,this.parent.listTags],f="",t=0;t<n.length;t++){for(u=0;u<o.length;u++)for(var i=o[u],s=Object.keys(i),e=0;e<s.length;e++)r=s[e],i.hasOwnProperty(r)&&""!==i[r]&&0===n[t].indexOf(i[r])&&(n[t]=n[t].replace(i[r],""),n[t]=this.clearFormatLines([n[t]]));f=f+n[t]+(t!==n.length-1?"\n":"")}return f},n.prototype.clear=function(n){var t=this.parent.element;t.focus();var r=t.selectionStart,u=t.selectionEnd,i=this.selection.getSelectedText(t);i=this.clearSelectionTags(i);i=this.clearFormatTags(i);t.value=t.value.substr(0,r)+i+t.value.substr(u,t.value.length);this.parent.markdownSelection.setSelection(t,r,r+i.length);this.restore(t,r,r+i.length,n)},n.prototype.restore=function(n,t,i,r){this.selection.save(t,i);this.selection.restore(n);r&&r.callBack&&r.callBack({requestType:r.subCommand,selectedText:this.selection.getSelectedText(n),editorMode:"Markdown",event:r.event})},n}(),lf=function(){function n(n){this.initialize();sf.base.extend(this,this,n,!0);this.observer=new sf.base.Observer(this);this.markdownSelection=new ii;this.listObj=new tf({parent:this,syntax:this.listTags});this.formatObj=new rf({parent:this,syntax:this.formatTags});this.undoRedoManager=new ff(this,n.options);this.mdSelectionFormats=new uf({parent:this,syntax:this.selectionTags});this.linkObj=new ef(this);this.tableObj=new hf({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}});this.clearObj=new cf(this);this.wireEvents()}return n.prototype.initialize=function(){this.formatTags=pi;this.listTags=bi;this.selectionTags=wi},n.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this);this.observer.on("keyup",this.editorKeyUp,this);this.observer.on("model_changed",this.onPropertyChanged,this)},n.prototype.onPropertyChanged=function(n){this.observer.notify("model_changed_plugin",n)},n.prototype.editorKeyDown=function(n){this.observer.notify("keydown-handler",n)},n.prototype.editorKeyUp=function(n){this.observer.notify("keyup-handler",n)},n.prototype.execCommand=function(n,t,i,r,u,f){switch(n.toLocaleLowerCase()){case"lists":this.observer.notify("lists-commands",{subCommand:t,event:i,callBack:r});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:r});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:r});break;case"style":case"effects":case"casing":this.observer.notify("command-type",{subCommand:t,event:i,callBack:r});break;case"links":case"images":this.observer.notify("link-commands",{subCommand:t,event:i,callBack:r,item:f});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("insert-table",{subCommand:t,item:f,event:i,callBack:r})}break;case"clear":this.observer.notify("clear-commands",{subCommand:t,event:i,callBack:r})}},n}(),af=(gt=function(n,t){return(gt=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}gt(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ri=function(n){function t(t){var i=n.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),t&&i.element&&i.updateFormatter(i.element,document,t.options),i}return af(t,n),t.prototype.initialize=function(){this.keyConfig=pr;this.formatSyntax=pi;this.listSyntax=bi;this.selectionSyntax=wi},t.prototype.updateFormatter=function(n,t,i){n&&(this.editorManager=new lf({element:n,formatTags:this.formatSyntax,listTags:this.listSyntax,selectionTags:this.selectionSyntax,options:i}))},t}(yi),vf=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.saveSelection=new ii;this.parent.observer.on(l,this.render,this);this.parent.observer.on("markdown-toolbar-click",this.onToolbarClick,this);this.parent.observer.on(t,this.destroy,this);this.parent.observer.on("selectAll",this.selectAll,this);this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this);this.parent.observer.on(h,this.onSelectionSave,this);this.parent.observer.on(c,this.onSelectionRestore,this);this.parent.observer.on("readOnlyMode",this.updateReadOnly,this)},n.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.getEditPanel().setAttribute("readonly","readonly"),sf.base.addClass([this.parent.element],"e-rte-readonly")):(this.parent.getEditPanel().removeAttribute("readonly"),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},n.prototype.onSelectionSave=function(){var n=this.parent.getEditPanel();this.saveSelection.save(n.selectionStart,n.selectionEnd)},n.prototype.onSelectionRestore=function(){this.parent.getEditPanel().focus();var n=this.parent.getEditPanel();this.saveSelection.restore(n)},n.prototype.onToolbarClick=function(n){var i,r,u,e=n.item,t=this.parent.getEditPanel(),f;switch(t.focus(),r=t.selectionStart,u=t.selectionEnd,i=t.value.substring(r,u),e.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:n});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:n});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:n,text:i,module:"Markdown"});break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:n,text:i,module:"Markdown"});break;case"CreateTable":f={headingText:this.parent.localeData.headingText,colText:this.parent.localeData.colText};this.parent.formatter.process(this.parent,n,n.originalEvent,f);break;default:this.parent.formatter.process(this.parent,n,n.originalEvent,null)}},n.prototype.removeEventListener=function(){this.parent.observer.off(l,this.render);this.parent.observer.off(t,this.destroy);this.parent.observer.off("markdown-toolbar-click",this.onToolbarClick);this.parent.observer.off("selectAll",this.selectAll);this.parent.observer.off("getSelectedHtml",this.getSelectedHtml);this.parent.observer.off(h,this.onSelectionSave);this.parent.observer.off(c,this.onSelectionRestore);this.parent.observer.off("readOnlyMode",this.updateReadOnly)},n.prototype.render=function(){var n=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter=sf.base.isNullOrUndefined(this.parent.adapter)?new ri({element:n,options:t}):new ri(sf.base.extend({},this.parent.adapter,{element:n,options:t}));this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new nf(this.parent));this.parent.observer.notify("bind-on-end",{})},n.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.getEditPanel(),0,this.parent.getEditPanel().value.length)},n.prototype.getSelectedHtml=function(n){n.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()))},n.prototype.destroy=function(){this.removeEventListener()},n}(),yf=function(){function n(n){this.parent=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on("execCommandCallBack",this.commandCallBack,this);this.parent.observer.on(t,this.removeEventListener,this)},n.prototype.commandCallBack=function(n){"Undo"!==n.requestType&&"Redo"!==n.requestType&&this.parent.formatter.saveData();this.parent.observer.notify("toolbar-refresh",{args:n});this.parent.observer.notify("count",{})},n.prototype.removeEventListener=function(){this.parent.observer.off("execCommandCallBack",this.commandCallBack);this.parent.observer.off(t,this.removeEventListener)},n}(),ui=function(){return(ui=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},pf=function(){function n(n,t,i){this.undoRedoSteps=30;this.undoRedoTimer=300;this.floatingToolbarOffset=0;this.enableHtmlEncode=!1;this.defaultResetValue=null;this.isInitial=!1;this.blurEnabled=!1;this.focusEnabled=!1;this.undoRedoStatus=!1;this.createdEnabled=!1;this.isIframeRteElement=!0;this.actionBeginEnabled=!1;this.imageDeleteEnabled=!1;this.onResizeStopEnabled=!1;this.quickTbClosedEnabled=!1;this.quickTbOpenedEnabled=!1;this.onQuickTbOpenEnabled=!1;this.onResizeStartEnabled=!1;this.actionCompleteEnabled=!1;this.beforeUploadImageEnabled=!1;this.onImageUploadFailedEnabled=!1;this.onImageUploadSuccessEnabled=!1;this.beforePasteCleanupEnabled=!1;this.afterPasteCleanupEnabled=!1;this.inlineCloseItems=["CreateLink","Image","CreateTable","Maximize","Minimize"];sf.base.isNullOrUndefined(n)||(this.element=n,this.element.blazor__instance=this,this.dotNetRef=i,this.updateContext(t),this.observer=new sf.base.Observer(this),this.dotNetRef.invokeMethodAsync("UpdateDeviceData",{isDevice:sf.base.Browser.isDevice,isIDevice:o()}),this.initModules())}return n.prototype.updateContext=function(n){sf.base.extend(this,this,n)},n.prototype.initModules=function(){"HTML"===this.editorMode?(this.htmlEditorModule=new vu(this),this.pasteCleanupModule=new gu(this)):this.markdownEditorModule=new vf(this);this.toolbarSettings.enable&&(this.isUndoRedoStatus(),this.toolbarModule=new li(this));this.fullScreenModule=new yu(this);this.viewSourceModule=new wu(this);this.countModule=new tr(this);this.resizeModule=new ir(this);this.linkModule=new or(this);this.imageModule=new hr(this);this.tableModule=new sr(this);this.quickToolbarModule=new ku(this)},n.prototype.initialize=function(){this.isInitial=!0;this.onBlurHandler=this.blurHandler.bind(this);this.onFocusHandler=this.focusHandler.bind(this);this.onResizeHandler=this.resizeHandler.bind(this);new yf(this);this.id=this.element.id;this.clickPoints={clientX:0,clientY:0};this.updateContentElements();this.inputElement=this.getEditPanel();this.valueContainer=this.element.querySelector("textarea");this.readonly&&this.setReadOnly(!0);this.setHeight(this.height);this.setWidth(this.width);this.setContentHeight();this.iframeSettings&&this.iframeSettings.enable&&this.setIframeSettings();(sf.base.isNullOrUndefined(this.value)||""===this.value)&&(this.value=this.element.querySelector(".e-rte-value-wrapper").innerHTML.replace(/<!--!-->/gi,"").trim());this.setPanelValue(this.value);this.observer.notify(l,{});this.enableXhtml&&(this.value=this.getXhtml());null!==this.value&&(this.defaultResetValue=this.value);this.wireEvents();this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent")},n.prototype.isUndoRedoStatus=function(){for(var n=0;n<this.toolbarSettings.items.length;n++)if(!sf.base.isNullOrUndefined(this.toolbarSettings.items[n])&&("Undo"===this.toolbarSettings.items[n].subCommand||"Redo"===this.toolbarSettings.items[n].subCommand)){this.undoRedoStatus=!0;break}},n.prototype.setPanelValue=function(n,t){n=this.serializeValue(n);"HTML"===this.editorMode&&this.enableXhtml&&(this.inputElement.innerHTML=n,this.observer.notify("xhtmlValidation",{}),n=this.inputElement.innerHTML);"HTML"!==this.editorMode||t||(this.value=si(sf.base.isNullOrUndefined(n)?"":n,this));this.updatePanelValue();this.value!==this.cloneValue&&(this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),rt(this.valueContainer,"change"),this.isInitial?this.isInitial=!1:this.dotNetRef.invokeMethodAsync("UpdateValue",this.value),this.cloneValue=this.value);this.setPlaceHolder()},n.prototype.updateContentElements=function(){"HTML"===this.editorMode&&(sf.base.isNullOrUndefined(this.iframeSettings)||!this.iframeSettings.enable)||"Markdown"===this.editorMode?this.contentPanel=this.element.querySelector(".e-rte-content"):"HTML"===this.editorMode&&this.iframeSettings&&this.iframeSettings.enable&&(this.contentPanel=this.element.querySelector("iframe"),this.updateIframeHtmlContents())},n.prototype.updateIframeHtmlContents=function(){var t='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\n                .e-imgright {float: right;margin: 0 auto;margin-left: 5px;text-align: right;}\n                .e-imgcenter {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-rte-img-caption.e-imgcenter { display: block; margin-left: auto; margin-right: auto; }\n                .e-rte-img-caption.e-imgright { display: block; margin-left: auto; margin-right: 0; }\n                .e-rte-img-caption.e-imgleft { display: block; margin-left: 0; margin-right: auto; }\n                .e-img-caption .e-rte-image.e-imgright {float: none; margin-left: auto; margin-right: 0;}\n                .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                .e-rte-img-caption.e-imgleft .e-img-inner {text-align: left;}\n                .e-rte-img-caption.e-imgright .e-img-inner {text-align: right;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                .e-rtl blockquote {padding-left: 0;padding-right: 5px;border-left: 0;border-right: 2px solid #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                .e-rte-table { border-collapse: collapse; empty-cells: show;}\n                .e-rte-table td, .e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;padding: 2px 5px; min-width: 20px;}\n                .e-rte-table.e-rte-table-border { border: 1px solid #BDBDBD; border-collapse: separate; }\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-hide { display: none; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            <\/style>\n        <\/head><body spellcheck="false" autocorrect="off" contenteditable="true"><\/body><\/html>',n=this.contentPanel;n.srcdoc=t;n.contentDocument.body.id=this.id+"_rte-edit-view";n.contentDocument.body.setAttribute("aria-owns",this.id);n.contentDocument.open();t=this.setThemeColor(t,{color:"#333"});n.contentDocument.write(t);n.contentDocument.close();this.enableRtl&&n.contentDocument.body.setAttribute("class","e-rtl")},n.prototype.setThemeColor=function(n,t){var i=getComputedStyle(this.element,".e-richtexteditor").getPropertyValue("color");return n.replace(t.color,i)},n.prototype.refresh=function(n){void 0===n&&(n={requestType:"refresh"});this.observer.notify(n.requestType+"-begin",n)},n.prototype.setWidth=function(n){"auto"!==n?sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}):this.element.style.width="auto"},n.prototype.setHeight=function(n){this.element.style.height="auto"!==n?sf.base.formatUnit(n):"auto";"Expand"===this.toolbarSettings.type&&("string"==typeof this.height&&this.height.indexOf("px")>-1||"number"==typeof this.height)?this.element.classList.add("e-rte-fixed-tb-expand"):this.element.classList.remove("e-rte-fixed-tb-expand")},n.prototype.openPasteDialog=function(){this.dotNetRef.invokeMethodAsync("PasteDialog")},n.prototype.setContentHeight=function(n,t){var i="",o=0,s="",c="string"==typeof this.height&&this.height.indexOf("%")>-1,h=this.element.querySelector(".e-rte-content .e-rte-srctextarea"),y=sf.base.isNullOrUndefined(h)||"block"!==h.parentElement.style.display?this.getPanel():h.parentElement,r=this.element.offsetHeight,a,v;0!==r||"auto"===this.height||this.getToolbar()||(r=parseInt(this.height,10),c&&(s=this.height));var u=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,l=this.element.querySelector(".e-resize-handle"),f=this.enableResize?sf.base.isNullOrUndefined(l)?0:l.offsetHeight+8:0,e=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;("Expand"===this.toolbarSettings.type&&t&&"preview"!==n?(i="auto"!==this.height||0!==f||this.element.classList.contains("e-rte-full-screen")?r-(u+e+f)+"px":"auto",o=this.toolbarSettings.enableFloating?0:e):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?c&&s?s:(this.element.classList.contains("e-rte-full-screen")?window.innerHeight:r)-(u+e+f)+"px":"auto","windowResize"!==n&&sf.base.setStyleAttribute(y,{height:i,marginTop:o+"px"}),this.iframeSettings.enable&&"sourceCode"===n)&&(a=sf.base.select(".e-rte-content",this.element),sf.base.setStyleAttribute(a,{height:i,marginTop:o+"px"}));this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable&&(v=(sf.base.isNullOrUndefined(this.element.querySelector(".e-rte-toolbar .e-hor-nav.e-nav-active"))?u:u+e)+"px",sf.base.setStyleAttribute(this.getToolbar().parentElement,{height:v}));0===f&&this.autoResize()},n.prototype.getXhtml=function(){var n=this.value;return this.enableXhtml&&(n=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(n)),n},n.prototype.getXhtmlString=function(n){var t=n;return this.enableXhtml&&(t=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(t)),t},n.prototype.getPanel=function(){return this.contentPanel},n.prototype.saveSelection=function(){this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())},n.prototype.restoreSelection=function(){this.formatter.editorManager.nodeSelection.restore()},n.prototype.getEditPanel=function(){return this.iframeSettings&&this.iframeSettings.enable?sf.base.isNullOrUndefined(this.contentPanel.contentDocument)?this.inputElement:this.contentPanel.contentDocument.body:this.element.querySelector(".e-rte-content .e-content")},n.prototype.getText=function(){return this.getEditPanel().innerText},n.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},n.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.getDocument())},n.prototype.updateValueContainer=function(n){this.enableXhtml&&!sf.base.isNullOrUndefined(n)&&(n=this.getXhtmlString(n));this.valueContainer.value=n;rt(this.valueContainer,"change")},n.prototype.getInputInnerHtml=function(){return this.inputElement.innerHTML.replace(/<!--!-->/gi,"")},n.prototype.refreshUI=function(){this.refresh()},n.prototype.getUpdatedValue=function(){var n,t,i;return sf.base.isNullOrUndefined(this.tableModule)||this.tableModule.removeResizeEle(),t=this.element.querySelector(".e-rte-srctextarea"),"HTML"===this.editorMode?(i=this.getInputInnerHtml(),n="<p><br><\/p>"===i?null:this.enableHtmlEncode?this.encode(d(i)):i,t&&"block"===t.style.display&&(n=t.value)):n=""===this.inputElement.value?null:this.inputElement.value,n},n.prototype.countCalculate=function(){this.countModule.renderCount()},n.prototype.updateEnable=function(){this.enabled?(sf.base.removeClass([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),sf.base.isNullOrUndefined(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(sf.base.removeClass(this.getToolbar().querySelectorAll(".e-active"),"e-active"),sf.base.removeClass([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),sf.base.addClass([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},n.prototype.setEnable=function(){this.updateEnable();this.enabled?this.wireEvents():this.unWireEvents()},n.prototype.executeCommand=function(n,t,i){var u,r;(t=this.htmlPurifier(n,t),"HTML"===this.editorMode)&&(u=this.getRange(),this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!this.iframeSettings.enable||u.startContainer!==this.inputElement)&&this.inputElement.contains(u.startContainer)||this.focusIn());r=ur[n];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData();this.formatter.editorManager.execCommand(r.command,r.subCommand?r.subCommand:t||r.value,null,null,t||r.value,t||r.value);i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this));this.setPlaceHolder();this.observer.notify("content-changed",{});this.value=this.inputElement.innerHTML;this.dotNetRef.invokeMethodAsync("UpdateValue",this.value)},n.prototype.htmlPurifier=function(n,t){var u,i,f,r;if("HTML"===this.editorMode)switch(n){case"insertTable":sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"insertImage":u=sf.base.createElement("img",{attrs:{src:t.url}}).outerHTML;i=""!==u&&sf.base.createElement("div",{innerHTML:u}).firstElementChild.getAttribute("src")||null;i=sf.base.isNullOrUndefined(i)?"":i;t.url=i;sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width});sf.base.isNullOrUndefined(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"createLink":f=sf.base.createElement("a",{attrs:{href:t.url}}).outerHTML;r=""!==f&&sf.base.createElement("div",{innerHTML:f}).firstElementChild.getAttribute("href")||null;r=sf.base.isNullOrUndefined(r)?"":r;t.url=r;t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())}return t},n.prototype.serializeValue=function(n){return"HTML"!==this.editorMode||sf.base.isNullOrUndefined(n)||(this.enableHtmlEncode?(n=this.htmlEditorModule.sanitizeHelper(d(n)),n=this.encode(n)):n=this.htmlEditorModule.sanitizeHelper(n)),n},n.prototype.selectAll=function(){this.observer.notify("selectAll",{})},n.prototype.selectRange=function(n){this.observer.notify("selectRange",{range:n})},n.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},n.prototype.sanitizeHtml=function(n){return this.serializeValue(n)},n.prototype.updateValue=function(n){sf.base.isNullOrUndefined(n)&&this.inputElement.innerHTML},n.prototype.clipboardAction=function(n,t){switch(n.toLowerCase()){case"cut":this.onCut();this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy();this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},n.prototype.getContent=function(){return this.iframeSettings.enable?this.inputElement:this.getPanel()},n.prototype.getSelectedHtml=function(){var n=sf.base.createElement("div"),t=this.getDocument().getSelection(),i;return t.rangeCount>0&&(i=t.getRangeAt(0).cloneContents(),n.appendChild(i)),n.innerHTML},n.prototype.getSelection=function(){var n="";return this.observer.notify("getSelectedHtml",{callBack:function(t){n=t}}),n},n.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var n=this.getRange(),t="#text"===n.endContainer.nodeName?n.endContainer.parentElement:n.endContainer,i=n.getClientRects()[0].left,r=n.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,r,t)}},n.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},n.prototype.updateValueData=function(){if(this.enableHtmlEncode)this.setPanelValue(this.encode(d(this.inputElement.innerHTML)));else{var n=/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:d(this.inputElement.innerHTML);this.setPanelValue(n)}},n.prototype.removeSheets=function(n){for(var t=0;t<n.length;t++)sf.base.detach(n[t])},n.prototype.updateReadOnly=function(){this.observer.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},n.prototype.setReadOnly=function(n){this.updateReadOnly();n||(this.readonly&&this.enabled?this.unBindEvents():this.enabled&&this.bindEvents())},n.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var n=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,n);this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t)}this.iframeSettings.attributes&&function(n,t,i,r){var f,e,o,u;if(f=i?t.getDocument().querySelector("body"):t.element,Object.keys(n).length)for(e=0,o=Object.keys(n);e<o.length;e++)u=o[e],"class"===u?f.classList.add(n[u]):"disabled"===u&&"disabled"===n[u]?(t.enabled=!1,t.setEnable()):"readonly"===u&&"readonly"===n[u]?(t.readonly=!0,t.setReadOnly(r)):"style"===u?f.setAttribute("style",n[u]):"tabindex"===u?t.inputElement.setAttribute("tabindex",n[u]):"placeholder"===u?(t.placeholder=n[u],t.setPlaceHolder()):["name","required"].indexOf(u)>-1?t.valueContainer.setAttribute(u,n[u]):f.setAttribute(u,n[u])}(this.iframeSettings.attributes,this,!0,!1)},n.prototype.InjectSheet=function(n,t){var r,i,u,f;try{if(t&&t.length>0)for(r=this.getDocument().querySelector("head"),i=0;i<t.length;i++)n?(u=this.createScriptElement(),u.src=t[i],r.appendChild(u)):(f=this.createStyleElement(),f.href=t[i],r.appendChild(f))}catch(n){return}},n.prototype.createScriptElement=function(){var n=sf.base.createElement("script",{className:"rte-iframe-script-sheet"});return n.type="text/javascript",n},n.prototype.createStyleElement=function(){var n=sf.base.createElement("link",{className:"rte-iframe-style-sheet"});return n.rel="stylesheet",n},n.prototype.setValue=function(){""!==(!sf.base.isNullOrUndefined(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim())&&this.element.tagName},n.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},n.prototype.getHtml=function(){return this.serializeValue(this.getEditPanel().innerHTML)},n.prototype.showSourceCode=function(){this.readonly||this.observer.notify("sourceCode",{})},n.prototype.getCharCount=function(){var n="Markdown"===this.editorMode?this.getEditPanel().value.trim():this.getEditPanel().textContent.trim();return"Markdown"!==this.editorMode&&-1!==n.indexOf("​")?n.replace(/\u200B/g,"").length:n.length},n.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},n.prototype.getToolbar=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},n.prototype.getToolbarElement=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},n.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval);this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},n.prototype.updateValueOnIdle=function(){(sf.base.isNullOrUndefined(this.tableModule)||sf.base.isNullOrUndefined(this.inputElement.querySelector(".e-table-box.e-rbox-select")))&&(this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.invokeChangeEvent())},n.prototype.invokeChangeEvent=function(){this.enableXhtml&&!sf.base.isNullOrUndefined(this.value)&&(this.value=this.getXhtml());this.value!==this.cloneValue&&(this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.dotNetRef.invokeMethodAsync("ChangeEvent"),this.cloneValue=this.value)},n.prototype.preventImgResize=function(n){"img"===n.target.nodeName.toLocaleLowerCase()&&n.preventDefault()},n.prototype.defaultResize=function(n,t){if("msie"===sf.base.Browser.info.name)t?this.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):this.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize);else if("mozilla"===sf.base.Browser.info.name){var i=t?"true":"false";this.getDocument().execCommand("enableObjectResizing",t,i);this.getDocument().execCommand("enableInlineTableEditing",t,i)}},n.prototype.encode=function(n){var t=document.createElement("div");return t.innerText=n.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},n.prototype.print=function(){var n,t=this;this.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"print",cancel:!1}).then(function(i){(n=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===sf.base.Browser.info.name&&n.resizeTo(screen.availWidth,screen.availHeight),n=sf.base.print(t.inputElement,n),i.cancel)||t.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"print"})})},n.prototype.autoResize=function(){var n=this,t;"auto"===this.height?"Markdown"===this.editorMode?setTimeout(function(){n.setAutoHeight(n.inputElement)},0):this.iframeSettings.enable&&(t=this.element.querySelector("#"+this.element.id+"_rte-view"),setTimeout(function(){n.setAutoHeight(t)},100),this.inputElement.style.overflow="hidden"):this.inputElement.style.overflow=null},n.prototype.setAutoHeight=function(n){sf.base.isNullOrUndefined(n)||(n.style.height="",n.style.height=this.inputElement.scrollHeight+"px",n.style.overflow="hidden")},n.prototype.restrict=function(n){if(this.maxLength>=0){for(var u="Markdown"===this.editorMode?this.getText():n.currentTarget.textContent.trim(),i=[8,16,17,37,38,39,40,46,65],r=void 0,t=0;t<=i.length-1;t++)if(n.which===i[t]){if(n.ctrlKey&&65===n.which)return;if(65!==n.which)return void(r=i[t])}u.length>=this.maxLength&&-1!==this.maxLength&&n.which!==r&&n.preventDefault()}},n.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderContainer||(this.placeHolderContainer=this.element.querySelector(".e-rte-placeholder")),this.placeHolderContainer.innerHTML=this.placeholder,this.placeHolderContainer.style.display=0!==this.inputElement.textContent.length||sf.base.isNullOrUndefined(this.inputElement.firstChild)||"P"!==this.inputElement.firstChild.nodeName||sf.base.isNullOrUndefined(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName?"none":"block"):this.inputElement.setAttribute("placeholder",this.placeholder))},n.prototype.updatePanelValue=function(){var n=this.value,t;n=this.enableHtmlEncode&&this.value?d(n):n;t=this.element.querySelector(".e-rte-srctextarea");n?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:n),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.trim()!==n.trim()?this.inputElement.innerHTML=n:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==n.trim()&&(this.inputElement.value=n)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML="<p><br/><\/p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value=""));this.showCharCount&&this.countModule.refresh()},n.prototype.contentChanged=function(){this.autoSaveOnIdle&&(sf.base.isNullOrUndefined(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},n.prototype.notifyMouseUp=function(n){var t=n.touches?n.changedTouches[0]:n;this.observer.notify("mouseUp",{member:"mouseUp",args:n,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}});this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.observer.notify("toolbar-refresh",{args:n});this.triggerEditArea(n)},n.prototype.triggerEditArea=function(n){if(o()){var t=n.touches?n.changedTouches[0]:n;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.observer.notify("editAreaClick",{member:"editAreaClick",args:n})}else this.observer.notify("editAreaClick",{member:"editAreaClick",args:n})},n.prototype.updateStatus=function(n){if(!sf.base.isNullOrUndefined(n.html)||!sf.base.isNullOrUndefined(n.markdown)){var t=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.dotNetRef.invokeMethodAsync("UpdatedToolbarStatusEvent",{undo:t.undo,redo:t.redo,html:n.html,markdown:n.markdown})}},n.prototype.onListDropDownButtonClick=function(n){sf.base.isNullOrUndefined(n)||(n.item.subCommand="BulletFormatList"===n.item.subCommand?"UL":"OL",this.inlineCloseItems.indexOf(n.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode&&this.observer.notify("html-toolbar-click",n))},n.prototype.toolbarItemClick=function(n,t,i){var r;sf.base.isNullOrUndefined(n)||(r="Root"!==i||this.inlineMode.enable?sf.base.select("#"+t,document.body):sf.base.select("#"+t,this.element),n.originalEvent=ui({},n.originalEvent,{target:r}),this.inlineCloseItems.indexOf(n.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode?this.observer.notify("html-toolbar-click",n):this.observer.notify("markdown-toolbar-click",n))},n.prototype.toolbarClick=function(n){var t=sf.base.select("#"+n+" .e-hor-nav",this.element);t&&"Expand"===this.toolbarSettings.type&&!sf.base.isNullOrUndefined(t)?t.classList.contains("e-nav-active")?(sf.base.addClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!0)):(sf.base.removeClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!1)):sf.base.Browser.isDevice||this.inlineMode.enable;sf.base.isNullOrUndefined(t)&&"Expand"===this.toolbarSettings.type&&sf.base.removeClass([this.getToolbar()],["e-expand-open"])},n.prototype.hideTableQuickToolbar=function(){this.quickToolbarModule.hideTableQTBar()},n.prototype.dropDownBeforeOpen=function(n){this.observer.notify(h,n);this.observer.notify("beforeDropDownOpen",n)},n.prototype.dropDownClose=function(n){this.observer.notify(c,n)},n.prototype.dropDownSelect=function(n){if(n.name="dropDownSelect",!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!n.item||"Images"!==n.item.command&&"Display"!==n.item.command&&"Table"!==n.item.command){if(this.observer.notify(c,{}),"Lists"===n.item.command){var t={listStyle:n.item.value,listImage:n.item.listImage,type:n.item.subCommand};this.formatter.process(this,n,n.originalEvent,t)}else this.formatter.process(this,n,n.originalEvent,null);this.observer.notify(h,{})}this.observer.notify("dropDownSelect",n)},n.prototype.colorDropDownBeforeOpen=function(){this.observer.notify(h,{})},n.prototype.colorIconSelected=function(n,t,i){this.observer.notify(h,{});this.observer.notify(c,{});n.value=sf.base.isNullOrUndefined(t)?n.value:t;var r=this.formatter.editorManager.nodeSelection.getRange(this.getDocument()),u=r.startContainer.parentNode;("TD"===r.startContainer.nodeName||"TH"===r.startContainer.nodeName||sf.base.closest(r.startContainer.parentNode,"td,th")||this.iframeSettings.enable&&!pt(u.ownerDocument.querySelector("body"),"e-lib"))&&r.collapsed&&"BackgroundColor"===n.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:n,name:"colorPickerChanged"}):(this.observer.notify(c,{}),this.formatter.process(this,{item:n,name:"colorPickerChanged"},void 0,null),this.observer.notify(h,{}))},n.prototype.colorChanged=function(n,t,i){this.observer.notify(c,{});n.value=sf.base.isNullOrUndefined(t)?n.value:t;var r=this.formatter.editorManager.nodeSelection.getRange(this.getDocument());("TD"===r.startContainer.nodeName||"TH"===r.startContainer.nodeName||sf.base.closest(r.startContainer.parentNode,"td,th"))&&r.collapsed&&"BackgroundColor"===n.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:n,name:"colorPickerChanged"}):(this.observer.notify(c,{}),this.formatter.process(this,{item:n,name:"colorPickerChanged"},void 0,null),this.observer.notify(h,{}))},n.prototype.cancelLinkDialog=function(){this.isBlur=!1;this.linkModule.cancelDialog()},n.prototype.cancelImageDialog=function(){this.isBlur=!1},n.prototype.linkDialogClosed=function(){this.isBlur=!1;this.linkModule.linkDialogClosed()},n.prototype.dialogClosed=function(n){this.isBlur=!1;"restore"===n&&this.observer.notify(c,{})},n.prototype.insertLink=function(n){this.linkModule.insertLink(n)},n.prototype.imageRemoving=function(){this.imageModule.removing()},n.prototype.uploadSuccess=function(n,t){this.imageModule.imageUploadSuccess(n,t)},n.prototype.imageSelected=function(){this.imageModule.imageSelected()},n.prototype.imageUploadComplete=function(n,t){this.imageModule.imageUploadComplete(n,t)},n.prototype.imageUploadChange=function(n,t){this.imageModule.imageUploadChange(n,t)},n.prototype.dropUploadChange=function(n,t){this.imageModule.dropUploadChange(n,t)},n.prototype.insertImage=function(){this.imageModule.insertImageUrl()},n.prototype.imageDialogOpened=function(){this.imageModule.dialogOpened()},n.prototype.imageDialogClosed=function(){this.isBlur=!1;this.imageModule.dialogClosed()},n.prototype.insertTable=function(n,t){this.tableModule.customTable(n,t)},n.prototype.applyTableProperties=function(n){this.tableModule.applyTableProperties(n)},n.prototype.createTablePopupOpened=function(){this.tableModule.createTablePopupOpened()},n.prototype.pasteContent=function(n){this.pasteCleanupModule.selectFormatting(n)},n.prototype.updatePasteContent=function(n){this.observer.notify("afterPasteCleanUp",{text:n})},n.prototype.imageDropInitialized=function(n){this.imageModule.imageDropInitialized(n)},n.prototype.preventEditable=function(){this.inputElement.contentEditable="false"},n.prototype.enableEditable=function(){this.inputElement.contentEditable="true"},n.prototype.removeDroppedImage=function(){this.imageModule.removeDroppedImage()},n.prototype.dropUploadSuccess=function(n,t){this.imageModule.dropUploadSuccess(n,t)},n.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},n.prototype.insertAlt=function(n){this.imageModule.insertAlt(n)},n.prototype.insertSize=function(n,t){this.imageModule.insertSize(n,t)},n.prototype.insertImageLink=function(n,t){this.imageModule.insertLink(n,t)},n.prototype.showLinkDialog=function(){this.linkModule.showDialog(!0)},n.prototype.showImageDialog=function(){this.imageModule.showDialog(!0)},n.prototype.showTableDialog=function(){this.tableModule.showDialog(!0)},n.prototype.destroy=function(){this.unWireEvents()},n.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0);this.element.addEventListener("focusout",this.onBlurHandler,!0);this.observer.on("content-changed",this.contentChanged,this);this.observer.on("model-changed",this.refresh,this);this.observer.on("resizeInitialized",this.updateResizeFlag,this);this.observer.on("updateTbItemsStatus",this.updateStatus,this);this.readonly&&this.enabled||this.bindEvents()},n.prototype.bindEvents=function(){this.keyboardModule=new ti(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:ui({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var n=sf.base.closest(this.valueContainer,"form");n&&sf.base.EventHandler.add(n,"reset",this.resetHandler,this);sf.base.EventHandler.add(this.inputElement,"keyup",this.keyUp,this);sf.base.EventHandler.add(this.inputElement,"paste",this.onPaste,this);sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30),this);sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this);this.wireContextEvent();this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this);this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0);this.iframeSettings.enable&&(sf.base.EventHandler.add(this.inputElement,"focusin",this.focusHandler,this),sf.base.EventHandler.add(this.inputElement,"focusout",this.blurHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown,this));this.wireScrollElementsEvents()},n.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(sf.base.EventHandler.add(this.inputElement,"contextmenu",this.contextHandler,this),sf.base.Browser.isDevice&&(this.touchModule=new sf.base.Touch(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},n.prototype.wireScrollElementsEvents=function(){var n,t,i;for(this.scrollParentElements=sf.popups.getScrollableParent(this.element),n=0,t=this.scrollParentElements;n<t.length;n++)i=t[n],sf.base.EventHandler.add(i,"scroll",this.scrollHandler,this);this.iframeSettings.enable||sf.base.EventHandler.add(this.getPanel(),"scroll",this.contentScrollHandler,this)},n.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0);this.element.removeEventListener("focusout",this.onBlurHandler,!0);this.observer.off("content-changed",this.contentChanged);this.observer.off("resizeInitialized",this.updateResizeFlag);this.observer.off("updateTbItemsStatus",this.updateStatus);this.unBindEvents()},n.prototype.unBindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var n=sf.base.closest(this.valueContainer,"form");n&&sf.base.EventHandler.remove(n,"reset",this.resetHandler);sf.base.EventHandler.remove(this.inputElement,"keyup",this.keyUp);sf.base.EventHandler.remove(this.inputElement,"paste",this.onPaste);sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30));sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler);this.unWireContextEvent();this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown);this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0);this.iframeSettings.enable&&(sf.base.EventHandler.remove(this.inputElement,"focusin",this.focusHandler),sf.base.EventHandler.remove(this.inputElement,"focusout",this.blurHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown));this.unWireScrollElementsEvents()},n.prototype.unWireContextEvent=function(){sf.base.EventHandler.remove(this.inputElement,"contextmenu",this.contextHandler);sf.base.Browser.isDevice&&this.touchModule&&this.touchModule.destroy()},n.prototype.unWireScrollElementsEvents=function(){var n,t,i;for(this.scrollParentElements=sf.popups.getScrollableParent(this.element),n=0,t=this.scrollParentElements;n<t.length;n++)i=t[n],sf.base.EventHandler.remove(i,"scroll",this.scrollHandler);this.iframeSettings.enable||sf.base.EventHandler.remove(this.getPanel(),"scroll",this.contentScrollHandler)},n.prototype.focusHandler=function(n){var r,u,t,f,i;if(!this.isRTE||this.isFocusOut){if(this.isRTE=!this.isFocusOut,this.isFocusOut=!1,sf.base.addClass([this.element],["e-focused"]),this.cloneValue="HTML"===this.editorMode?"<p><br><\/p>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(d(this.inputElement.innerHTML)):this.inputElement.innerHTML:""===this.inputElement.value?null:this.inputElement.value,r=document.activeElement,(r===this.element||r===this.getToolbarElement()||r===this.getEditPanel()||this.iframeSettings.enable&&r===this.getPanel()&&n.target&&!n.target.classList.contains("e-img-inner")&&n.target&&n.target.parentElement&&!n.target.parentElement.classList.contains("e-img-wrap")||sf.base.closest(r,".e-rte-toolbar")===this.getToolbarElement())&&(this.getEditPanel().focus(),!sf.base.isNullOrUndefined(this.getToolbarElement())))for(this.getToolbarElement().setAttribute("tabindex","-1"),u=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),t=0;t<u.length;t++)u[t].setAttribute("tabindex","-1");this.defaultResize(n,!1);f={isInteracted:0!==Object.keys(n).length};this.focusEnabled&&this.dotNetRef.invokeMethodAsync("FocusEvent",f);!sf.base.isNullOrUndefined(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval));sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this)}if(!sf.base.isNullOrUndefined(this.getToolbarElement()))for(i=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]"),t=0;t<i.length;t++)i[t].classList.contains("e-rte-dropdown-btn")||i[t].classList.contains("e-insert-table-btn")||i[t].hasAttribute("tabindex")&&"-1"===i[t].getAttribute("tabindex")||i[t].setAttribute("tabindex","-1")},n.prototype.blurHandler=function(n){var t=n.relatedTarget,i,r;t?(i=sf.base.closest(t,".e-richtexteditor"),i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||!sf.base.isNullOrUndefined(sf.base.closest(t,".e-rte-elements"))?this.isBlur=!1:(this.isBlur=!0,t=null)):this.isIframeRteElement||(this.isBlur=!0,this.isIframeRteElement=!0);this.isBlur&&sf.base.isNullOrUndefined(t)?(sf.base.removeClass([this.element],["e-focused"]),this.observer.notify("focusChange",{}),this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.observer.notify("toolbar-refresh",{args:n,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),rt(this.valueContainer,"focusout"),this.defaultResize(n,!0),r={isInteracted:0!==Object.keys(n).length},this.blurEnabled&&this.dotNetRef.invokeMethodAsync("BlurEvent",r),sf.base.isNullOrUndefined(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)):this.isRTE=!0},n.prototype.resizeHandler=function(){var t=!1,n;document.body.contains(this.element)&&(this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow"),n=this.element.querySelector(".e-rte-toolbar"),t=n&&n.classList.contains("e-expand-open")),this.setContentHeight("windowResize",t),this.observer.notify("resize",null))},n.prototype.touchHandler=function(n){this.notifyMouseUp(n.originalEvent);this.triggerEditArea(n.originalEvent)},n.prototype.resetHandler=function(){var n=this.valueContainer.defaultValue.trim().replace(/<!--!-->/gi,"");this.value=""===n?null:this.defaultResetValue;this.setPanelValue(this.value,!0)},n.prototype.contextHandler=function(n){var t=sf.base.closest(n.target,"a, table, img");!1!==this.inlineMode.onSelection&&(sf.base.isNullOrUndefined(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||n.preventDefault()},n.prototype.scrollHandler=function(n){this.observer.notify("scroll",{args:n})},n.prototype.contentScrollHandler=function(n){this.observer.notify("contentscroll",{args:n})},n.prototype.mouseUp=function(n){if(this.quickToolbarSettings.showOnRightClick&&sf.base.Browser.isDevice){var t=n.target,i=sf.base.closest(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.getEditPanel().contains(i))return}this.notifyMouseUp(n)},n.prototype.mouseDownHandler=function(n){var t=n.touches?n.changedTouches[0]:n;sf.base.addClass([this.element],["e-focused"]);this.defaultResize(n,!1);this.observer.notify("mouseDown",{args:n});this.clickPoints={clientX:t.clientX,clientY:t.clientY}},n.prototype.onIframeMouseDown=function(n){this.isBlur=!1;this.observer.notify("iframe-click",n)},n.prototype.keyDown=function(n){var t,e,o,h,f,u;if(this.observer.notify(s,{member:"keydown",args:n}),this.restrict(n),this.iframeSettings.enable&&!this.enableTabKey&&9===n.which&&"Tab"===n.code&&"BODY"===n.target.nodeName&&(this.isIframeRteElement=!1),"HTML"===this.editorMode&&(8===n.which&&"Backspace"===n.code||46===n.which&&"Delete"===n.code))if(t=this.getRange(),e="#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer,sf.base.closest(e,"pre")&&8===n.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===n.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset))o=new RegExp(String.fromCharCode(8203),"g"),h=8===n.which?t.startOffset-1:t.startOffset,t.startContainer.textContent=t.startContainer.textContent.replace(o,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,h);else if("Backspace"===n.code&&8===n.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){for(var r=t.startContainer.parentElement,c=void 0,i=void 0,i=0;i<r.childNodes.length;i++)r.childNodes[i]===t.startContainer&&(c=i);for(f=!0,u=[],i=c;i>=0;i--)3===r.childNodes[i].nodeType&&8203===r.childNodes[i].textContent.charCodeAt(0)&&f?u.push(i):f=!1;if(u.length>0)for(i=u.length-1;i>0;i--)r.childNodes[u[i]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,t.startOffset)}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==n.action&&(n.action&&"paste"!==n.action&&"space"!==n.action||9===n.which||"Backspace"===n.code&&8===n.which))switch(this.formatter.process(this,null,n),n.action){case"toolbar-focus":this.toolbarSettings.enable&&this.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus();break;case"escape":this.getEditPanel().focus()}sf.base.isNullOrUndefined(this.placeholder)||(sf.base.isNullOrUndefined(this.placeHolderContainer)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderContainer.style.display="none");this.autoResize()},n.prototype.editorKeyDown=function(n){switch(n.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}n.callBack&&("copy"===n.event.action||"cut"===n.event.action||"delete"===n.event.action)&&n.callBack({requestType:n.event.action,editorMode:"HTML",event:n.event})},n.prototype.keyUp=function(n){var t,i,r;if("HTML"===this.editorMode)switch(n.which){case 46:case 8:t=this.getEditPanel().childNodes;(0===t.length||1===t.length&&("BR"===t[0].tagName||"P"===t[0].tagName&&(0===t[0].childNodes.length||""===t[0].textContent)))&&(i=this.getEditPanel(),i.innerHTML="<p><br/><\/p>",this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),i.childNodes[0],0))}this.observer.notify(k,{member:"keyup",args:n});"KeyX"===n.code&&88===n.which&&88===n.keyCode&&n.ctrlKey&&(""===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML)&&(this.inputElement.innerHTML=si("<p><br><\/p>",this));r=32===n.which||13===n.which||8===n.which||46===n.which;("shift"!==n.key&&!n.ctrlKey&&n.key&&1===n.key.length||r||"Markdown"===this.editorMode&&("shift"!==n.key&&!n.ctrlKey&&n.key&&1===n.key.length||r)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,n);(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0)&&this.observer.notify("toolbar-refresh",{args:n});sf.base.isNullOrUndefined(this.placeholder)||"Enter"===n.key&&13===n.keyCode||"<p><br><\/p>"!==this.inputElement.innerHTML||this.setPlaceHolder()},n.prototype.onCut=function(){this.getDocument().execCommand("cut",!1,null)},n.prototype.onCopy=function(){this.getDocument().execCommand("copy",!1,null)},n.prototype.onPaste=function(n){if(sf.base.isNullOrUndefined(sf.base.select(".e-rte-img-dialog",this.element))){var t=this.getText().length-this.getSelection().length+(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.clipboardData)?0:n.clipboardData.getData("text/plain").length);"Markdown"!==this.editorMode?"true"===this.inputElement.contentEditable&&(-1===this.maxLength||t<this.maxLength)?this.observer.notify("pasteClean",{args:n}):n.preventDefault():-1===this.maxLength||t<this.maxLength||n.preventDefault()}},n.prototype.onDocumentClick=function(n){var t=n.target,i=sf.base.closest(t,".e-richtexteditor");this.element.contains(n.target)||document===n.target||i===this.element||sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||(this.isBlur=!0,this.isRTE=!1);this.observer.notify("docClick",{args:n})},n.prototype.propertyChangeHandler=function(n){for(var c,r,e,t,l,a,u,o,i,s={},f=0,h=Object.keys(n);f<h.length;f++)s[t=h[f]]=this[t];for(c=this.value,this.updateContext(n),r=0,e=Object.keys(n);r<e.length;r++)switch(t=e[r]){case"enableXhtml":case"enableHtmlSanitizer":case"value":if("value"===t&&c===this.value)break;this.setPanelValue(this.value);this.enableXhtml&&(this.value=this.getXhtml());break;case"height":this.setHeight(this.height);this.setContentHeight();this.autoResize();break;case"width":this.setWidth(this.width);this.toolbarSettings.enable&&(this.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow"),this.resizeHandler());break;case"readonly":this.setReadOnly(!1);break;case"enabled":this.setEnable();break;case"placeholder":this.placeholder=this.placeholder;this.setPlaceHolder();break;case"showCharCount":this.showCharCount&&this.countModule?this.countModule.renderCount():!1===this.showCharCount&&this.countModule&&this.countModule.destroy();break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"enableHtmlEncode":this.updateValueData();this.updatePanelValue();this.setPlaceHolder();this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:n});break;case"adapter":l=this.getEditPanel();a={undoRedoSteps:this.undoRedoSteps,undoRedoTimer:this.undoRedoTimer};"Markdown"===this.editorMode&&(this.formatter=new ri(sf.base.extend({},this.adapter,{element:l,options:a})));break;case"iframeSettings":u=s[t];u.resources&&(o=this.getDocument().querySelector("head"),i=void 0,u.resources.scripts&&(i=o.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(i)),u.resources.styles&&(i=o.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(i)));this.setIframeSettings();break;case"quickToolbarSettings":this.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent()}},n}();return{initialize:function(n,t,i){n&&(new pf(n,t,i),n.blazor__instance.initialize())},updateProperties:function(n,t){n&&n.blazor__instance.updateContext(t)},setPanelValue:function(n,t){n&&n.blazor__instance.setPanelValue(t)},toolbarItemClick:function(n,t,i,r){n&&n.blazor__instance.toolbarItemClick(t,i,r)},toolbarClick:function(n,t){n&&n.blazor__instance.toolbarClick(t)},listDropDownButtonClick:function(n,t){n&&n.blazor__instance.onListDropDownButtonClick(t)},dropDownBeforeOpen:function(n,t){n&&n.blazor__instance.dropDownBeforeOpen(t)},dropDownClose:function(n,t){n&&n.blazor__instance.dropDownClose(t)},dropDownButtonItemSelect:function(n,t){n&&n.blazor__instance.dropDownSelect(t)},colorDropDownBeforeOpen:function(n){n&&n.blazor__instance.colorDropDownBeforeOpen()},colorIconSelected:function(n,t,i,r){n&&n.blazor__instance.colorIconSelected(t,i,r)},colorPickerChanged:function(n,t,i,r){n&&n.blazor__instance.colorChanged(t,i,r)},cancelLinkDialog:function(n){n&&n.blazor__instance.cancelLinkDialog()},cancelImageDialog:function(n){n&&n.blazor__instance.cancelImageDialog()},linkDialogClosed:function(n){n&&n.blazor__instance.linkDialogClosed()},dialogClosed:function(n,t){n&&n.blazor__instance.dialogClosed(t)},insertLink:function(n,t){n&&n.blazor__instance.insertLink(t)},countCalculate:function(n){n&&n.blazor__instance.countCalculate()},imageRemoving:function(n){n&&n.blazor__instance.imageRemoving()},uploadSuccess:function(n,t,i){n&&n.blazor__instance.uploadSuccess(t,i)},imageSelected:function(n){n&&n.blazor__instance.imageSelected()},imageUploadComplete:function(n,t,i){n&&n.blazor__instance.imageUploadComplete(t,i)},imageUploadChange:function(n,t,i){n&&n.blazor__instance.imageUploadChange(t,i)},dropUploadChange:function(n,t,i){n&&n.blazor__instance.dropUploadChange(t,i)},insertImage:function(n){n&&n.blazor__instance.insertImage()},imageDialogOpened:function(n){n&&n.blazor__instance.imageDialogOpened()},imageDialogClosed:function(n){n&&n.blazor__instance.imageDialogClosed()},propertyChangeHandler:function(n,t){n&&n.blazor__instance.propertyChangeHandler(t)},insertTable:function(n,t,i){n&&n.blazor__instance.insertTable(t,i)},applyTableProperties:function(n,t){n&&n.blazor__instance.applyTableProperties(t)},createTablePopupOpened:function(n){n&&n.blazor__instance.createTablePopupOpened()},pasteContent:function(n,t){n&&n.blazor__instance.pasteContent(t)},updatePasteContent:function(n,t){n&&n.blazor__instance.updatePasteContent(t)},imageDropInitialized:function(n,t){n&&n.blazor__instance.imageDropInitialized(t)},preventEditable:function(n){n&&n.blazor__instance.preventEditable()},enableEditable:function(n){n&&n.blazor__instance.enableEditable()},removeDroppedImage:function(n){n&&n.blazor__instance.removeDroppedImage()},dropUploadSuccess:function(n,t,i){n&&n.blazor__instance.dropUploadSuccess(t,i)},executeCommand:function(n,t,i,r){n&&n.blazor__instance.executeCommand(t,i,r)},getCharCount:function(n){return n&&n.blazor__instance.getCharCount()},focusIn:function(n){return n&&n.blazor__instance.focusIn()},focusOut:function(n){return n&&n.blazor__instance.focusOut()},getContent:function(n){return n&&n.blazor__instance.getContent()},getHtml:function(n){return n&&n.blazor__instance.getHtml()},getSelectedHtml:function(n){return n&&n.blazor__instance.getSelectedHtml()},getSelection:function(n){return n&&n.blazor__instance.getSelection()},getText:function(n){return n&&n.blazor__instance.getText()},print:function(n){return n&&n.blazor__instance.print()},refreshUI:function(n){return n&&n.blazor__instance.refreshUI()},sanitizeHtml:function(n,t){return n&&n.blazor__instance.sanitizeHtml(t)},selectAll:function(n){return n&&n.blazor__instance.selectAll()},selectRange:function(n,t){return n&&n.blazor__instance.selectRange(t)},showFullScreen:function(n){return n&&n.blazor__instance.showFullScreen()},showSourceCode:function(n){return n&&n.blazor__instance.showSourceCode()},insertAlt:function(n,t){return n&&n.blazor__instance.insertAlt(t)},insertSize:function(n,t,i){return n&&n.blazor__instance.insertSize(t,i)},insertImageLink:function(n,t,i){return n&&n.blazor__instance.insertImageLink(t,i)},updateContentHeight:function(n){return n&&n.blazor__instance.setContentHeight()},saveSelection:function(n){n&&n.blazor__instance.saveSelection()},restoreSelection:function(n){n&&n.blazor__instance.restoreSelection()},getXhtml:function(n){return n.blazor__instance.getXhtml()},showLinkDialog:function(n){n&&n.blazor__instance.showLinkDialog()},showImageDialog:function(n){n&&n.blazor__instance.showImageDialog()},showTableDialog:function(n){n&&n.blazor__instance.showTableDialog()},destroy:function(n){n&&n.blazor__instance.destroy()}}}()},"./modules/sf-schedule.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Schedule=function(){"use strict";function e(n,t){var r,i=sf.base.createElement("div",{className:t}).cloneNode();return i.style.visibility="hidden",i.style.position="absolute",n.appendChild(i),r=i.offsetHeight,sf.base.remove(i),r}function ht(n){var t=getComputedStyle(n);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function c(n,t){var i=new Date(n.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function v(n){return new Date(n.getFullYear(),n.getMonth())}function y(n){return new Date(n.getFullYear(),n.getMonth()+1,0)}function n(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function h(n){var t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0).getTimezoneOffset(),i=n.getTimezoneOffset()-t;return n.getTime()-new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0).getTime()-6e4*i}function i(n,t){return n=new Date(""+n),new Date(n.setDate(n.getDate()+t))}function ct(n,t){var i,r=(n=new Date(""+n)).getDate();return n.setDate(1),n.setMonth(n.getMonth()+t),n.setDate(Math.min(r,(i=n,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),n}function f(n,t,r){var f=new Date(n.getTime()),u;return f.setHours(t.getHours()),f.setMinutes(t.getMinutes()),f.setSeconds(t.getSeconds()),u=new Date(n.getTime()),0===r.getHours()?u=i(u,1):(u.setHours(r.getHours()),u.setMinutes(r.getMinutes()),u.setSeconds(r.getSeconds())),{startHour:f,endHour:u}}function l(){var t,n,i;return null!==p?p:(n=sf.base.createElement("div"),n.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(n),i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0,t=n.offsetWidth-n.clientWidth-i|0,document.body.removeChild(n),p=t)}function w(n){var t=getComputedStyle(n);return n.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function t(n){return new Date(+n-6e4*n.getTimezoneOffset())}function lt(n){var t=new Date(+n+6e4*n.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))}function at(n,t){var r=n.getTimezoneOffset(),i;try{return i=new Date(n.toLocaleString("en-US",{timeZone:t})),isNaN(i.getTime())?0:(n.getTime()-i.getTime())/6e4+r}catch(n){return 0}}var r="e-popup-open",u="e-appointment-border",p=null,b,k,d,g,nt,tt,it,rt,ut,ft,et,a=function(){function t(n){this.parent=n}return t.prototype.onDataReady=function(){},t.prototype.getScrollXIndent=function(n){return n.offsetHeight-n.clientHeight>0?l():0},t.prototype.scrollTopPanel=function(n){this.getDatesHeaderElement().firstElementChild.scrollLeft=n.scrollLeft},t.prototype.scrollHeaderLabels=function(n){for(var o,t,i,u,f=this.element.querySelector(".e-date-header-wrap table"),s=f.offsetWidth/f.querySelectorAll("colgroup col").length,h=function(t,i){for(var r,u,e=0,c=0,o=i?-n.scrollLeft:n.scrollLeft,f=0,h=t;f<h.length;f++){if(r=h[f],(c+=parseInt(r.getAttribute("colSpan"),10))>Math.floor(o/s)){u=r;break}e+=r.offsetWidth}sf.base.isNullOrUndefined(u)||(u.children[0].style[i?"right":"left"]=o-e+"px")},r=0,e=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];r<e.length;r++)if(o=e[r],t=[].slice.call(this.element.querySelectorAll(o)),t.length>0){for(i=0,u=t;i<u.length;i++)u[i].children[0].style[this.parent.options.enableRtl?"right":"left"]="";h(t,this.parent.options.enableRtl)}},t.prototype.getHeaderBarHeight=function(n){var t,i,r;return void 0===n&&(n=!1),t=2,i=this.parent.element.querySelector(".e-schedule-toolbar"),(i&&(t+=w(i)),this.parent.uiStateValues.isGroupAdaptive||n)&&(r=this.parent.element.querySelector(".e-schedule-resource-toolbar"),r&&(t+=r.offsetHeight)),t},t.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},t.prototype.highlightCurrentTime=function(){},t.prototype.getStartHour=function(){var n=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(n)&&(n=new Date(2e3,0,0,0)),n},t.prototype.getEndHour=function(){var n=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(n)&&(n=new Date(2e3,0,0,0)),n},t.prototype.isCurrentDate=function(n){return n.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},t.prototype.isCurrentMonth=function(n){return n.getFullYear()===this.parent.getCurrentTime().getFullYear()&&n.getMonth()===this.parent.getCurrentTime().getMonth()},t.prototype.isWorkDay=function(n,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(n.getDay())>=0},t.prototype.isWorkHour=function(n,t,i,r){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(h(n)<h(t)||h(n)>=h(i)||!this.isWorkDay(n,r)))},t.prototype.getRenderDates=function(t){var u=[],e;if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var r=c(n(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),f=0,o=7*this.parent.activeViewOptions.interval;f<o;f++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(r,t))&&u.push(r),r=i(r,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView)for(r=c(n(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),f=0,e=7*this.parent.activeViewOptions.interval;f<e;f++)this.isWorkDay(r,t)&&u.push(r),r=i(r,1);else{r=n(this.parent.options.selectedDate);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(r,t))&&u.push(r),r=i(r,1);while(this.parent.activeViewOptions.interval!==u.length)}return t||(this.renderDates=u),u},t.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},t.prototype.setColWidth=function(n){var t;if(this.parent.isTimelineView()){var i=this.getColElements(),r=this.element.querySelector(".e-content-table tbody"),u=Math.ceil(r.offsetWidth/(i.length/2));(i.forEach(function(n){return sf.base.setStyleAttribute(n,{width:sf.base.formatUnit(u)})}),n.offsetHeight!==n.clientHeight)&&(t=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),sf.base.isNullOrUndefined(t)||sf.base.setStyleAttribute(t,{height:sf.base.formatUnit(n.clientHeight)}))}},t.prototype.resetColWidth=function(){for(var n=0,t=this.getColElements();n<t.length;n++)t[n].style.width=""},t.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},t.prototype.scrollToDate=function(t){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(t)){var r=this.getContentAreaElement(),u=this.parent.getMsFromDate(new Date(n(new Date(+t)).getTime())),i=r.querySelector('.e-work-cells[data-date="'+u+'"]');"Month"===this.parent.options.currentView&&i&&(r.scrollTop=i.offsetTop);"TimelineMonth"===this.parent.options.currentView&&i&&(r.scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-i.offsetLeft-i.offsetWidth):i.offsetLeft)}},t.prototype.getPanel=function(){return this.element},t.prototype.retainScrollPosition=function(){var n,t,i,r;this.parent.options.enablePersistence&&(n=this.element.querySelector(".e-content-wrap"),sf.base.isNullOrUndefined(n)||(t=JSON.parse(window.localStorage.getItem(this.parent.element.id)),sf.base.isNullOrUndefined(t)||(i=t.top,r=t.left,sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(r)||(n.scrollTop=i,n.scrollLeft=r))))},t.prototype.removeVirtualMask=function(){var n=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&n&&n.classList.contains("e-virtual-mask")&&sf.base.removeClass([n],"e-virtual-mask")},t}(),ot=function(){function t(n){this.allDayLevel=0;this.moreIndicatorTop=0;this.parent=n;this.slotCount=n.activeViewOptions.timeScale.slotCount;this.interval=n.activeViewOptions.timeScale.interval;this.element=this.parent.activeView.getPanel()}return t.prototype.renderAppointments=function(){var c=this.element.querySelector(".e-all-day-appointment-section"),l,b,a,o,v,n,u,s,g,h;if(c&&(sf.base.EventHandler.remove(c,"click",this.rowExpandCollapse),sf.base.EventHandler.add(c,"click",this.rowExpandCollapse,this)),l=this.parent.element.querySelector(".e-work-cells"),l){for(var y=this.parent.element.querySelector(".e-content-wrap"),nt=[].slice.call(y.querySelectorAll(".e-appointment")),tt=[].slice.call(y.querySelectorAll(".e-block-appointment")),f=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),p=nt.concat(tt),t=0;t<f.length;t++)f[t].style.removeProperty("display");var e=0,w=0,i=l.offsetParent;for(i&&(e=i.offsetHeight/i.querySelector("tbody").childElementCount,w=i.offsetWidth/i.querySelector("tbody tr").childElementCount),t=0;t<p.length;t++)(n=p[t]).style.removeProperty("display"),sf.base.removeClass([n],"e-event-action"),n.blur(),b=this.getColumn(n),a=this.getAppWidth(this.getColumnCounts(n)),n.style.top=this.getTopStartDuration(n)/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*e+"px",n.style.left=this.getEventLeft(a,b),n.style.width=n.classList.contains("e-block-appointment")?"100%":a,n.style.height=(this.getTopStartDuration(n)+this.getDuration(n))/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*e-this.getTopStartDuration(n)/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*e+"px",this.parent.eventBase.wireAppointmentEvents(n);var k=this.parent.element.querySelector(".e-all-day-row").offsetTop,r=f.length>0?f[0].offsetHeight:0,d=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));for(this.setAllDayRowHeight(0),o=0;o<d.length;o++)for(v=d[o].children,t=0;t<v.length;t++)u=0,((n=v[t]).blur(),n.classList.contains("e-row-count-wrapper"))?(this.moreIndicatorTop=k+4*r,this.parent.uiStateValues.expand||(n.style.top=this.moreIndicatorTop+"px",u=4*r+4,this.setAllDayRowHeight(u))):(this.parent.uiStateValues.expand&&sf.base.removeClass([n],"e-appointment-hide"),s=this.getRowCount(n),g=this.getTotalLength(n),this.allDayLevel=this.allDayLevel<s?s:this.allDayLevel,n.style.top=k+s*r+"px",n.style.width=w*g-15+"px",u=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*r:(this.allDayLevel+1)*r),this.parent.eventBase.wireAppointmentEvents(n),this.setAllDayRowHeight(u));for(h=[].slice.call(this.element.querySelectorAll(".e-more-indicator")),t=0;t<h.length;t++)sf.base.EventHandler.clearEvents(h[t]),sf.base.EventHandler.add(h[t],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},t.prototype.getAppWidth=function(n){var t=(("Day"===this.parent.options.currentView?97:94)-n)/n;return(t<0?0:t)+"%"},t.prototype.getEventLeft=function(n,t){var i=(parseFloat(n)+1)*t;return(i>99?99:i)+"%"},t.prototype.setAllDayRowHeight=function(n){for(var t,u,r=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<r.length;i++)r[i].style.height=n/12+"em";t=this.parent.element.querySelector(".e-date-header-wrap");"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll||sf.base.addClass([t],"e-all-day-auto");u=this.parent.element.querySelector(".e-all-day-row");u.style.height="";this.parent.uiStateValues.expand&&"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll?(u.style.height=n/12+"em",this.parent.eventBase.allDayExpandScroll(t)):(t.scrollTop=0,sf.base.removeClass([t],"e-all-day-scroll"))},t.prototype.getRowCount=function(n){return parseInt(n.getAttribute("data-row-index"),10)},t.prototype.getTotalLength=function(n){return parseInt(n.getAttribute("data-total-length"),10)},t.prototype.getDuration=function(n){return parseInt(n.getAttribute("data-duration"),10)},t.prototype.getTopStartDuration=function(n){return parseInt(n.getAttribute("data-top-start-duration"),10)},t.prototype.getColumnCounts=function(n){return parseInt(n.getAttribute("data-columns-count"),10)},t.prototype.getColumn=function(n){return parseInt(n.getAttribute("data-columns"),10)},t.prototype.rowExpandCollapse=function(){var n=this.element.querySelector(".e-all-day-appointment-section"),t,i,r;this.parent.uiStateValues.expand=n.classList.contains("e-appointment-expand");i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment"));r=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(n.setAttribute("title","Collapse-all-day-section"),n.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*r+4):(n.setAttribute("title","Expand-all-day-section"),n.setAttribute("aria-label","Expand section"),t=4*r+4);this.setAllDayRowHeight(t);this.addOrRemoveClass();this.parent.setDimensions()},t.prototype.addOrRemoveClass=function(){var t=this,n;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter(function(n){!t.parent.uiStateValues.expand&&t.allDayLevel>2?(sf.base.addClass([n],"e-appointment-hide"),n.setAttribute("tabindex","-1")):(sf.base.removeClass([n],"e-appointment-hide"),n.setAttribute("tabindex","0"))});n=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([n],"e-appointment-expand"),sf.base.addClass([n],"e-appointment-collapse")):(sf.base.removeClass([n],"e-appointment-collapse"),sf.base.addClass([n],"e-appointment-expand"));this.allDayLevel>2?sf.base.removeClass([n],"e-disable"):sf.base.addClass([n],"e-disable");[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter(function(n){!t.parent.uiStateValues.expand&&t.allDayLevel>2?(sf.base.removeClass([n],"e-disable"),n.style.top=t.moreIndicatorTop+"px"):sf.base.addClass([n],"e-disable")})},t.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},t.prototype.getHeight=function(n,t){var i=(t.getTime()-n.getTime())/6e4*this.cellHeight*this.slotCount/this.interval;return i<=0?this.cellHeight:i},t.prototype.renderNormalEvents=function(n,t,i,r){var f,e=n,o=e.startTime,h=e.endTime,c=this.getHeight(o,h),u,s;f=this.getTopValue(o,t);u=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(u,{width:this.getEventWidth(),height:c+"px",top:f+"px"});s=this.parent.activeViewOptions.group.byDate?t+i:r;[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[s].appendChild(u)},t.prototype.getEventWidth=function(){var n="Day"===this.parent.options.currentView?97:94;return(n<0?0:n)+"%"},t.prototype.getTopValue=function(t,i){var u=n(this.parent.activeView.renderDates[i]),r;return(new Date).setHours(0,0,0,0),r=this.parent.eventBase.getStEdHours(u,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()).startHour,(60*(t.getHours()-r.getHours())+(t.getMinutes()-r.getMinutes()))*this.cellHeight*this.slotCount/this.interval},t.prototype.renderAllDayEvents=function(n,t,i,r){var f,o=n,s=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,e=1;o.Index=0;this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel;f=100-("Day"===this.parent.options.currentView?4:7);var h=this.parent.activeViewOptions.group.byDate?t+i:r,c=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(h+1)+")"),u=this.parent.inlineModule.createInlineAppointmentElement();c.appendChild(u);e+=s+1;sf.base.setStyleAttribute(u,{width:f+"%",top:sf.base.formatUnit(e)});sf.base.addClass([u],"e-all-day-appointment")},t}(),vt=function(){function t(n){this.slots=[];this.isDoubleTapped=!1;this.parent=n}return t.prototype.getSelectedEventElements=function(n){var r,u;if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(n);else if(this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")===n.getAttribute("data-guid")}).length<=0)for(var f='div[data-guid="'+n.getAttribute("data-guid")+'"]',t=0,i=[].slice.call(this.parent.element.querySelectorAll(f));t<i.length;t++)r=i[t],this.parent.selectedElements.push(r);else u=this.parent.selectedElements.filter(function(t){return t.getAttribute("data-guid")!==n.getAttribute("data-guid")}),this.parent.selectedElements=u;return n&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},t.prototype.getSelectedEvents=function(){var t=[],n=[];return[].slice.call(this.parent.element.querySelectorAll("."+u)).filter(function(i){0===t.filter(function(n){return n===i.getAttribute("data-guid")}).length&&t.push(i.getAttribute("data-guid"));n.push(i)}),{element:n.length>1?n:n[0],guid:t}},t.prototype.removeSelectedAppointmentClass=function(){for(var n=this.getSelectedAppointments(),t=0,i=n;t<i.length;t++)i[t].setAttribute("aria-selected","false");sf.base.removeClass(n,u);"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(n,"e-active-appointment-agenda")},t.prototype.addSelectedAppointments=function(n){for(var t=0,i=n;t<i.length;t++)i[t].setAttribute("aria-selected","true");"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass();sf.base.addClass(n,u)},t.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+u+",.e-appointment:focus"))},t.prototype.focusElement=function(){var r=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper"),n,i,t;r&&r.classList.contains("e-popup-open")||(n=this.parent.getSelectedElements(),n.length>0?this.parent.keyboardInteractionModule&&(i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||n[n.length-1],this.parent.keyboardInteractionModule.selectCells(_instanceof(i,Array),i)):(t=this.getSelectedAppointments(),t.length>0&&t[t.length-1].focus()))},t.prototype.splitEvent=function(t,r){var o=n(new Date(t.startTime+"")).getTime(),e=n(new Date(t.endTime+"")).getTime(),tt,s,k,u,ht,d,g,rt,ct,l,a,f,y,nt,et,p;h(t.endTime)<=0&&(tt=i(n(new Date(t.endTime+"")),-1).getTime(),e=o>tt?o:tt);var w=o,b=e,c=[];if(o!==e)for(o<r[0].getTime()&&(o=r[0].getTime()),e>r[r.length-1].getTime()&&(e=r[r.length-1].getTime()),s=o,k=0;k<this.slots.length;k++){if(u=this.slots[k],"WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var ot=[],it=0,st=u;it<st.length;it++)ht=st[it],ot.push(new Date(ht));if(d=this.getRenderedDates(ot),!sf.base.isNullOrUndefined(d)&&d.length>0)for(u=[],g=0,rt=d;g<rt.length;g++)ct=rt[g],u.push(ct.getTime())}if(l=u[0],(s=s<=l&&e>=l?l:s)>e||l>e)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){if(a=u.indexOf(s),-1!==a){var v=u.indexOf(e),lt=-1!==v,at=(v=lt?v:u.length-1)-a+1,ut=u[a]!==w,ft=u[v]!==b;if(c.push(this.cloneEventObject(t,u[a],u[v],at,ut,ft)),lt)break}}else if(this.dateInRange(s,u[0],u[u.length-1])){for(f=[],y=0;y<u.length;y++)this.dateInRange(u[y],w,b)&&f.push(u[y]);if(f.length>0)if(this.parent.activeViewOptions.group.byDate)for(nt=0,et=f;nt<et.length;nt++)p=et[nt],c.push(this.cloneEventObject(t,p,p,1,p!==w,p!==b));else ut=f[0]!==w,ft=f[f.length-1]!==b,c.push(this.cloneEventObject(t,f[0],f[f.length-1],f.length,ut,ft))}}else c.push(this.cloneEventObject(t,o,e,1,!1,!1));return c},t.prototype.dateInRange=function(n,t,i){return t<=n&&n<=i},t.prototype.cloneEventObject=function(n,t,i,r,u,f){var e=sf.base.extend({},n,null,!0),o={count:r,isLeft:u,isRight:f};return o.startTime=n.startTime,o.endTime=n.endTime,e.data=o,e.startTime=new Date(t),e.endTime=new Date(i),e},t.prototype.getRenderedDates=function(n){var i,r=0,u=n.length,t;if(n[0]<this.parent.options.minDate&&n[n.length-1]>this.parent.options.maxDate){for(t=0;t<n.length;t++)n[t].getTime()===this.parent.options.minDate.getTime()&&(r=t),n[t].getTime()===this.parent.options.maxDate.getTime()&&(u=t);i=n.filter(function(t){return t>=n[r]&&t<=n[u]})}return i},t.prototype.isValidEvent=function(n,t,i,r){var u=i.getTime()>r.startHour.getTime()&&t.getTime()<r.endHour.getTime(),f=r.startHour.getTime()<=t.getTime()&&n.startTime.getTime()>=r.startHour.getTime()&&n.endTime.getTime()<r.endHour.getTime()&&t.getTime()===i.getTime();return u||f},t.prototype.getStEdHours=function(n,t,i){var u=new Date(n.getTime()),r;return u.setHours(t.getHours()),u.setMinutes(t.getMinutes()),u.setSeconds(t.getSeconds()),r=new Date(n.getTime()),0===i.getHours()?r.setDate(r.getDate()+1):(r.setHours(i.getHours()),r.setMinutes(i.getMinutes()),r.setSeconds(i.getSeconds())),{startHour:u,endHour:r}},t.prototype.appointmentBorderRemove=function(n){var t=n.target;sf.base.closest(t,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(t,"."+r)||this.removeSelectedAppointmentClass()},t.prototype.wireAppointmentEvents=function(n,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this.parent.isPrintSchedule&&!n.classList.contains("e-block-appointment")){var r="true"===n.getAttribute("aria-readonly");sf.base.EventHandler.remove(n,"click",this.eventClick);sf.base.EventHandler.remove(n,"dblclick",this.eventDoubleClick);sf.base.EventHandler.remove(n,"touchstart",this.eventTouchClick);("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(n,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(n,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||r||sf.base.EventHandler.add(n,"dblclick",this.eventDoubleClick,this));this.parent.activeViewOptions.readonly||r||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(n),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(n))}},t.prototype.eventTouchClick=function(n){var t=this;setTimeout(function(){return t.isDoubleTapped=!1},250);n.preventDefault();this.isDoubleTapped?this.eventDoubleClick(n):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(n))},t.prototype.eventClick=function(n){var r=n.target,f,t,e,o,i;r.classList.contains("e-drag-clone")||r.classList.contains("e-resize-clone")||r.classList.contains("e-block-appointment")||(this.parent.isAdaptive&&this.parent.isTapHold&&(this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+u)),f=sf.base.closest(n.target,".e-appointment"),t=this.getSelectedEventElements(f),t.length>0?(e=1===t.length?t[0].querySelector(".e-subject").innerHTML:"("+t.length+")&nbsp;selected item(s)",this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=e,t.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")):(this.parent.selectedElements=[],this.parent.onQuickPopupClose())),n.ctrlKey&&1===n.which&&this.parent.keyboardInteractionModule?(this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+u)),o=sf.base.closest(n.target,".e-appointment"),this.getSelectedEventElements(o),i=this.activeEventData(n,!1),this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",i,this.getMouseEvent(n),!0,!1)):(this.removeSelectedAppointmentClass(),i=this.activeEventData(n,!0),this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",i,this.getMouseEvent(n),!1,!1)))},t.prototype.eventDoubleClick=function(n){if("touchstart"===n.type&&this.activeEventData(n,!0),this.removeSelectedAppointmentClass(),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(n,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(n))}},t.prototype.getMouseEvent=function(n){return{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,detail:n.detail,metaKey:n.metaKey,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey,type:n.type}},t.prototype.activeEventData=function(n,t){var i=sf.base.closest(n.target,".e-appointment"),r=i.getAttribute("data-guid");return t&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+r+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[r]},r},t.prototype.allDayExpandScroll=function(n){var t=0,i;[].slice.call(this.parent.element.querySelectorAll(".e-header-row")).forEach(function(n){[].slice.call(n.children).forEach(function(n){n.style.top=t+"px"});t+=n.offsetHeight});t=n.offsetHeight-t;this.parent.element.querySelector(".e-all-day-cells").style.height=t/12+"em";i=this.parent.element.querySelector(".e-content-wrap");this.parent.uiStateValues.expand&&i.offsetWidth-i.clientWidth>0?sf.base.addClass([n],"e-all-day-scroll"):sf.base.removeClass([n],"e-all-day-scroll")},t}(),bt=(b=function(n,t){return(b=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}b(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=function(t){function i(n){var i=t.call(this,n)||this;return i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight,i.withIndicator=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight,i.maxOrIndicator=i.maxHeight||i.withIndicator,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?7:0,i}return bt(i,t),i.prototype.renderAppointments=function(){var u=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),a=this.parent.element.querySelector(".e-work-cells"),c,i,r,f,n,y,p,h,l;if(a){for(c=this.parent.element.querySelector(".e-content-wrap"),this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=c.scrollTop,this.parent.uiStateValues.left=c.scrollLeft),this.removeHeightProperty("e-content-table"),i=0;i<u.length;i++)sf.base.removeClass([u[i]],"e-event-action"),this.removedPositionedStyles(u[i]);for(r=a.offsetParent,r&&(this.cellHeight=r.offsetHeight/r.querySelector("tbody").childElementCount,this.cellWidth=r.offsetWidth/r.querySelector("tbody tr").childElementCount),f=e(this.parent.element.querySelector(".e-current-panel"),"e-appointment"),this.dateRender=this.parent.activeView.renderDates,i=0;i<u.length;i++){n=u[i];n.blur();var o,s,w=this.getStartTime(n),v=this.getOverLapCount(n),b=this.getDataCount(n)*this.cellWidth-5,k=this.getGroupIndex(n),t=this.getCellTd(k,w);t&&(y=sf.base.closest(t,"tr"),this.monthHeaderHeight="Month"===this.parent.options.currentView?t.firstElementChild.offsetHeight:0,p=this.monthHeaderHeight+(v+1)*f+this.moreIndicatorHeight,this.parent.options.rowAutoHeight&&this.updateCellHeight(y.firstElementChild,p),h=t.offsetTop,l=this.monthHeaderHeight+(n.classList.contains("e-block-appointment")?h:h+v*f)+this.eventTop,o=this.parent.options.enableRtl?0:t.offsetLeft,s=this.parent.options.enableRtl?t.parentElement.offsetWidth-t.offsetLeft-this.cellWidth:0,n.classList.contains("e-more-indicator")?this.updateMoreIndicator(n,s,o,h):n.classList.contains("e-block-indicator")?this.updateBlockIndicator(n,s,o,t):(sf.base.setStyleAttribute(n,{width:b+"px",left:o+"px",right:s+"px",top:l+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(n,t),n.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(n,{height:t.offsetHeight-(l-t.offsetTop)+"px"}),n.classList.contains("e-appointment")&&this.parent.eventBase.wireAppointmentEvents(n)))}this.updateRowHeight(f)}},i.prototype.removedPositionedStyles=function(n){n.style.removeProperty("width");n.style.removeProperty("height");n.style.removeProperty("left");n.style.removeProperty("right");n.style.removeProperty("top");n.style.removeProperty("display")},i.prototype.updateMoreIndicator=function(n,t,i,r){var u=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(n,{top:r+u+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},i.prototype.updateBlockIndicator=function(n,t,i,r){this.parent.options.enableRtl?n.style.right=t+this.cellWidth-24+"px":n.style.left=i+this.cellWidth-24+"px";n.style.top=r.offsetTop+r.firstElementChild.offsetTop+22+"px";n.style.position="absolute"},i.prototype.setMaxEventHeight=function(n,t){var i="Month"===this.parent.options.currentView?w(t.querySelector(".e-date-header")):0,r=t.offsetHeight-i-(this.maxHeight?0:this.moreIndicatorHeight);sf.base.setStyleAttribute(n,{height:r+"px","align-items":"center"})},i.prototype.getCellTd=function(n,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+n.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},i.prototype.getGroupIndex=function(n){var t=parseInt(n.getAttribute("data-group-index"),10);return t||0},i.prototype.getOverLapCount=function(n){return parseInt(n.getAttribute("data-index"),10)},i.prototype.getTotalLength=function(n){return parseInt(n.getAttribute("data-total-length"),10)},i.prototype.getRowCount=function(n){return parseInt(n.getAttribute("data-row-index"),10)},i.prototype.getStartTime=function(n){return new Date(parseInt(n.getAttribute("data-start"),10))},i.prototype.getEndTime=function(n){return new Date(parseInt(n.getAttribute("data-end"),10))},i.prototype.getDataCount=function(n){return parseInt(n.getAttribute("data-total-length"),10)},i.prototype.updateRowHeight=function(n){if(this.parent.options.rowAutoHeight){this.updateBlockElements();this.updateNormalEventElements(n);this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.onScrollUiUpdate(t)}},i.prototype.updateBlockIndicatorEle=function(){for(var n=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));n<i.length;n++){var r=i[n],u=this.getStartTime(r),f=this.getGroupIndex(r),t=this.getCellTd(f,u),e=this.parent.options.enableRtl?0:t.offsetLeft,o=this.parent.options.enableRtl?t.parentElement.offsetWidth-t.offsetLeft-this.cellWidth:0;this.updateBlockIndicator(r,o,e,t)}},i.prototype.updateBlockElements=function(){for(var t=0,r=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));t<r.length;t++){var i=r[t],f=this.getStartTime(i),e=this.getGroupIndex(i),n=this.getCellTd(e,f),o=n.offsetHeight-this.monthHeaderHeight-1,u=Math.round(i.offsetWidth/n.offsetWidth);u=n.offsetWidth*u;var s=this.parent.options.enableRtl?0:n.offsetLeft,h=this.parent.options.enableRtl?n.parentElement.offsetWidth-n.offsetLeft-this.cellWidth:0,c=n.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:u+"px",left:s+"px",right:h+"px",height:o+"px",top:c+"px"})}},i.prototype.updateNormalEventElements=function(n){for(var t=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<u.length;t++){var i=u[t],f=this.getStartTime(i),e=this.getGroupIndex(i),r=this.getCellTd(e,f),o=this.getOverLapCount(i),s=this.parent.options.enableRtl?0:r.offsetLeft,h=this.parent.options.enableRtl?r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:0,c=this.monthHeaderHeight+r.offsetTop+o*n+this.eventTop;sf.base.setStyleAttribute(i,{left:s+"px",right:h+"px",top:c+"px"})}},i.prototype.updateCellHeight=function(n,t){t>n.offsetHeight&&sf.base.setStyleAttribute(n,{height:t+"px"})},i.prototype.getSlotDates=function(n){this.slots=[];for(var t=this.dateRender.map(function(n){return+n}),i=this.parent.activeViewOptions.showWeekend?7:n.length;t.length>0;)this.slots.push(t.splice(0,i))},i.prototype.renderEvents=function(t){var r=t.startTime,u=this.parent.getIndexOfDate(this.dateRender,n(r)),f=t.data.count*this.cellWidth-5,e=this.workCells[u],i=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(i,{width:f+"px"});this.renderEventElement(i,e)},i.prototype.renderEventElement=function(n,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(n);t.appendChild(i)},i.prototype.removeHeightProperty=function(n){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+n+" tbody tr"));t<i.length;t++)i[t].firstElementChild.style.height=""},i}(vt),kt=(k=function(n,t){return(k=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}k(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),yt=function(i){function r(n){var t=i.call(this,n)||this;return t.isInverseTableSelect=!0,t.baseCssClass="e-vertical-view",t}return kt(r,i),r.prototype.onDataReady=function(){this.parent.activeViewOptions.timeScale.enable?new ot(this.parent).renderAppointments():new o(this.parent).renderAppointments()},r.prototype.onContentScroll=function(n){this.parent.removeNewEventElement();var t=n.target;this.parent.onVirtualScroll();this.scrollLeftPanel(t);this.scrollTopPanel(t);this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop);this.parent.uiStateValues.left=t.scrollLeft;sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide();this.parent.setPersistence()},r.prototype.onAdaptiveMove=function(n){this.parent.uiStateValues.action&&n.cancelable&&n.preventDefault()},r.prototype.scrollLeftPanel=function(n){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=n.scrollTop)},r.prototype.onScrollUiUpdate=function(n){var f=this.parent.element.querySelector(".e-date-header-wrap"),s=this.getHeaderBarHeight(),e=this.getLeftPanelElement(),t=this.getContentAreaElement(),i=this.getDatesHeaderElement(),h=this.parent.element.offsetHeight-s-i.offsetHeight,r,o,u;this.setColWidth(t);this.setContentHeight(t,e,h);r=l();i.firstElementChild.style[n.cssProperties.rtlBorder]="";i.style[n.cssProperties.rtlPadding]="";o=!this.parent.options.enableAllDayScroll||!(t.offsetWidth-t.clientWidth<=f.offsetWidth-f.clientWidth&&f.classList.contains("e-all-day-scroll"));t.offsetWidth-t.clientWidth>0&&o?(i.firstElementChild.style[n.cssProperties.border]=r>0?"1px":"0px",i.style[n.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[n.cssProperties.border]="",i.style[n.cssProperties.padding]="");n.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(e&&(e.scrollTop=this.parent.uiStateValues.top),t.scrollTop=this.parent.uiStateValues.top,t.scrollLeft=this.parent.uiStateValues.left));this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime();u=this.parent.element.querySelector(".e-table-wrap table");u&&!u.classList.contains("e-outer-table")&&sf.base.addClass([u],"e-outer-table");this.retainScrollPosition()},r.prototype.setContentHeight=function(n,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(n)));n.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},r.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var n=this.element.querySelector(".e-work-hours");n&&(this.getContentAreaElement().scrollTop=n.offsetTop,this.parent.uiStateValues.top=n.offsetTop,this.parent.uiStateValues.left=0)}},r.prototype.scrollToHour=function(n,t){var i=this.parent.getStartEndTime(n);!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(t)&&(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},r.prototype.isWorkHourRange=function(n){return this.getStartHour().getTime()<=n.getTime()&&this.getEndHour().getTime()>=n.getTime()},r.prototype.highlightCurrentTime=function(){var s=this,i,e,o,u;if(!(this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){i=[].slice.call(this.element.querySelectorAll(".e-current-day"));i.length>0&&sf.base.removeClass(i,"e-current-day");for(var h='.e-date-header[data-date="'+t(n(new Date(this.parent.getCurrentTime()))).getTime().toString()+'"]',r=0,f=i=[].slice.call(this.element.querySelectorAll(h));r<f.length;r++)e=f[r],sf.base.addClass([e],"e-current-day");this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())?(o=this.getCurrentTimeIndicatorIndex(),u=this.getLeftPanelElement(),(sf.base.isNullOrUndefined(u)||sf.base.removeClass(u.querySelectorAll(".e-hide-childs"),"e-hide-childs"),o.length>0)?([].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval(function(){s.changeCurrentTimePosition()},6e4))):this.clearCurrentTimeIndicatorTimer()):this.clearCurrentTimeIndicatorTimer()}},r.prototype.getCurrentTimeIndicatorIndex=function(){for(var r=[],u=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),f=t(n(new Date(this.parent.getCurrentTime()))).getTime().toString(),i=0,e=u.length;i<e;i++)u[i].getAttribute("data-date")===f&&r.push(i);return r},r.prototype.clearCurrentTimeIndicatorTimer=function(){if(!sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)){window.clearInterval(this.currentTimeIndicatorTimer);this.currentTimeIndicatorTimer=null;this.removeCurrentTimeIndicatorElements();var n=this.parent.element.querySelector(".e-table-wrap table");n&&this.parent.options.enableRtl&&this.parent.isTimelineView()&&sf.base.removeClass([n],"e-outer-table")}},r.prototype.removeCurrentTimeIndicatorElements=function(){for(var i,n=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));n<t.length;n++)i=t[n],sf.base.remove(i)},r.prototype.changeCurrentTimePosition=function(){var r,e,n,t,o;if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var s=this.getCurrentTimeIndicatorIndex(),l=this.parent.getContentTable().rows[0],h=this.getTopFromDateTime(this.parent.getCurrentTime()),u=sf.base.formatUnit(h),i=Math.floor(h/l.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(i)&&!isNaN(i)){for(var c=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),f=0,a=s[0];f<a;f++)c[f].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+u}));for(r=0,e=s;r<e.length;r++)c[e[r]].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+u}));n=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+u});t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(o=[].slice.call(t.querySelectorAll("tr")),i<=o.length&&(sf.base.removeClass(t.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([o[i].lastElementChild],"e-hide-childs"),sf.base.prepend([n],t),n.style.top=sf.base.formatUnit(n.offsetTop-n.offsetHeight/2)))}}},r.prototype.getTopFromDateTime=function(n){var t=this.getStartHour();return(60*(n.getHours()-t.getHours())+(n.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},r.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},r.prototype.renderLayout=function(){var t,u,n,i,f,r,e;for(this.element=this.parent.element.querySelector(".e-table-wrap"),t=0,u=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));t<u.length;t++)n=u[t],sf.base.EventHandler.clearEvents(n),this.wireMouseEvents(n);for(i=0,f=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));i<f.length;i++)n=f[i],sf.base.EventHandler.clearEvents(n),this.wireCellEvents(n);this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();r=this.element.querySelector(".e-content-wrap");e=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(e);this.wireCellEvents(e);sf.base.EventHandler.clearEvents(r);sf.base.EventHandler.add(r,"scroll",this.onContentScroll,this);sf.base.EventHandler.add(r,sf.base.Browser.touchMoveEvent,this.onAdaptiveMove,this);this.parent.setDimensions()},r.prototype.wireCellEvents=function(n){this.parent.isPrintSchedule||(sf.base.EventHandler.add(n,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(n))},r.prototype.wireMouseEvents=function(n){this.parent.isPrintSchedule||(sf.base.EventHandler.add(n,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(n,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},r.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},r.prototype.getEndDateFromStartDate=function(n){var i=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,t=new Date(n.getTime());return t.setMilliseconds(t.getMilliseconds()+i),t},r.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.element){var n=this.getContentAreaElement();n&&sf.base.EventHandler.remove(n,"scroll",this.onContentScroll);this.element=null}},r}(a),dt=(d=function(n,t){return(d=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}d(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(t){function i(n,i){var r=t.call(this,n)||this,u;return r.startHour=r.parent.activeView.getStartHour(),r.endHour=r.parent.activeView.getEndHour(),r.slotCount=r.parent.activeViewOptions.timeScale.slotCount,r.interval=r.parent.activeViewOptions.timeScale.interval,r.day=0,r.rowIndex=0,r.renderType=i,u=[].slice.call(r.parent.element.querySelectorAll(".e-content-table tbody tr")),r.dayLength=0===u.length?0:u[0].children.length,r.content=r.parent.element.querySelector(".e-content-table"),r}return dt(i,t),i.prototype.getSlotDates=function(){this.slots=[];this.slots.push(this.parent.activeView.renderDates.map(function(n){return+n}));this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},i.prototype.renderAppointments=function(){var y=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),p=this.parent.element.querySelector(".e-work-cells"),h,u,c,f,t,o,l,a,v,r,d,g,nt;if(p){for(h=this.parent.element.querySelector(".e-content-wrap"),this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=h.scrollTop,this.parent.uiStateValues.left=h.scrollLeft),this.removeHeightProperty("e-content-table"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.removeHeightProperty("e-resource-column-table"),u=p.offsetParent,u&&(this.cellHeight=u.offsetHeight/u.querySelector("tbody").childElementCount,this.cellWidth=u.offsetWidth/u.querySelector("tbody tr").childElementCount),c=e(this.parent.element.querySelector(".e-current-panel"),"e-appointment"),this.dateRender=this.parent.activeView.renderDates,this.getSlotDates(),f=0;f<y.length;f++)if(t=y[f],sf.base.removeClass([t],"e-event-action"),t.blur(),this.removedPositionedStyles(t),o=lt(this.getStartTime(t)),l=lt(this.getEndTime(t)),this.day=this.parent.getIndexOfDate(this.dateRender,n(new Date(o.getTime()))),this.day>=0){var w=this.getOverLapCount(t),tt=this.getDataCount(t),b="true"===this.isAllDayData(t),i=this.getEventWidth(o,l,b,tt);i="day"===this.renderType?i-2:i;r=this.getPosition(o,l,!t.classList.contains("e-more-indicator")&&b,this.day);i=i<=0?this.cellWidth:i;var k=this.getGroupIndex(t),s=this.getRowTop(k),it=t.classList.contains("e-block-appointment")?s:s+2+w*(c+2);a=this.parent.options.enableRtl?0:r;v=this.parent.options.enableRtl?r:0;d=(w+1)*(c+2)+this.moreIndicatorHeight;t.classList.contains("e-more-indicator")?(g=this.cellHeight-this.moreIndicatorHeight,t.style.top=s+g+"px",t.style.width=this.cellWidth+"px",t.style.left=Math.floor(a/this.cellWidth)*this.cellWidth+"px",t.style.right=Math.floor(v/this.cellWidth)*this.cellWidth+"px"):t.classList.contains("e-block-indicator")?(r=Math.floor(r/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?t.style.right=r+"px":t.style.left=r+"px",t.style.top=s+this.cellHeight-18+"px"):(sf.base.setStyleAttribute(t,{width:i+"px",left:a+"px",right:v+"px",top:it+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(t),t.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(t,{height:this.cellHeight-1+"px"}),t.classList.contains("e-appointment")&&this.parent.eventBase.wireAppointmentEvents(t),this.parent.options.rowAutoHeight)&&(nt=this.getFirstChild(k),this.updateCellHeight(nt,d))}this.updateRowHeight()}},i.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var n={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight();this.parent.onScrollUiUpdate(n)}},i.prototype.updateBlockElements=function(){for(var o,r,e,t=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));t<u.length;t++){var n=u[t],i=parseInt(n.getAttribute("data-group-index"),10),f=this.getFirstChild(i);n.style.height=f.offsetHeight+"px";o=Math.round(n.offsetWidth/f.offsetWidth);n.style.width=f.offsetWidth*o+"px"}for(r=0,e=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));r<e.length;r++)n=e[r],i=parseInt(n.getAttribute("data-group-index"),10),n.style.top=this.getRowTop(i)+this.getFirstChild(i).offsetHeight-18+"px"},i.prototype.setMaxEventHeight=function(n){sf.base.setStyleAttribute(n,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},i.prototype.getFirstChild=function(n){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+n.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},i.prototype.updateCellHeight=function(n,t){var i,r;t>n.offsetHeight&&((sf.base.setStyleAttribute(n,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0)&&(i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+n.getAttribute("data-group-index")+'"]'),i&&sf.base.setStyleAttribute(i,{height:t+"px"})),r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(n.parentElement.rowIndex+1)+") td"),r&&sf.base.setStyleAttribute(r,{height:t+"px"}))},i.prototype.isAllDayData=function(n){return n.getAttribute("data-all-day")},i.prototype.getEventWidth=function(n,t,i,r){return"day"===this.renderType||i?r*this.slotsPerDay*this.cellWidth:this.isSameDay(n,t)?this.getSameDayEventsWidth(n,t):this.getSpannedEventsWidth(n,t,r)},i.prototype.getSameDayEventsWidth=function(n,t){return(t.getTime()-n.getTime())/6e4*this.cellWidth*this.slotCount/this.interval},i.prototype.getSpannedEventsWidth=function(t,i,r){var u,e=r*this.slotsPerDay*this.cellWidth,c=f(n(new Date(t.getTime())),this.startHour,this.endHour),s=this.getSameDayEventsWidth(c.startHour,t),h,o;return-1===this.parent.getIndexOfDate(this.dateRender,n(new Date(i.getTime())))?u=0:(h=f(n(new Date(i.getTime())),this.startHour,this.endHour),u=this.getSameDayEventsWidth(i,h.endHour),u=this.slotsPerDay*this.cellWidth===u?0:u),o=s+u,e>o?e-o:e-s},i.prototype.isSameDay=function(t,i){return this.parent.getIndexOfDate(this.dateRender,n(new Date(t.getTime())))===this.parent.getIndexOfDate(this.dateRender,n(new Date(i.getTime())))},i.prototype.getAppointmentLeft=function(n,t,i){var r=this.isSameDay(t,n.startHour)?(t.getTime()-n.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;return 0===i?r:Math.round((n.endHour.getTime()-n.startHour.getTime())/6e4/this.interval*this.slotCount)*i+r},i.prototype.getPosition=function(t,i,r,u){if("day"===this.renderType||r)return u*this.slotsPerDay*this.cellWidth;var e=f(n(new Date(this.dateRender[u].getTime())),this.startHour,this.endHour);return(e.endHour.getTime()<=i.getTime()&&e.startHour.getTime()>=t.getTime()?this.getAppointmentLeft(e,e.startHour,u):e.endHour.getTime()<=i.getTime()?this.getAppointmentLeft(e,t,u):e.startHour.getTime()>=t.getTime()?this.getAppointmentLeft(e,e.startHour,u):this.getAppointmentLeft(e,t,u))*this.cellWidth},i.prototype.getRowTop=function(n){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.activeViewOptions.group.resources.length>1||this.parent.virtualScrollModule||this.parent.options.rowAutoHeight?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+n.toString()+'"]').offsetTop:this.cellHeight*n:0},i.prototype.renderEvents=function(t,i){var s=t.data,u=t.startTime,e=t.endTime,f;this.dateRender=this.parent.activeView.renderDates;this.day=this.parent.getIndexOfDate(this.dateRender,n(new Date(u.getTime())));var h=this.getCellTd(),c=this.eventHeight,l=s.count,r=this.getEventWidth(u,e,t.isAllDay,l);r="day"===this.renderType?r-2:r;f=this.getPosition(u,e,t.isAllDay,this.day);r=r<=0?this.cellWidth:r;var a=this.getRowTop(i)+2+(c+2),v=this.parent.options.enableRtl?0:f,y=this.parent.options.enableRtl?f:0,o=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(o,{width:r+"px",left:v+"px",right:y+"px",top:a+"px"});this.renderEventElement(o,h)},i.prototype.getCellTd=function(){var n=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[n]},i}(o),gt=(g=function(n,t){return(g=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}g(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ni=function(n){function t(t){var i=n.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return gt(t,n),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){n.prototype.scrollTopPanel.call(this,t);this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var t=this.parent.getStartEndTime(this.parent.options.workHours.start),i=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(t)?new Date(+this.parent.options.selectedDate).setHours(t.getHours(),t.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),r='[data-date="'+this.parent.getMsFromDate(new Date(i))+'"]',n=this.element.querySelector(r);n&&(this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):n.offsetLeft)},t.prototype.scrollToHour=function(n,t){var i,f,r,u;t&&(f=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0&&(r=n.split(":"),2===r.length&&(i=new Date(t.setHours(parseInt(r[0],10),parseInt(r[1],10),0))));(i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(n):i,sf.base.isNullOrUndefined(i))||(u=sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([f],i),this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-u:u)},t.prototype.changeCurrentTimePosition=function(){var i,r,n;if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var u=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(u,this.parent.getCurrentTime()),f=this.element.querySelector(".e-content-table").offsetHeight,e=this.element.querySelector(".e-date-header-wrap");(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(f)})),this.parent.virtualScrollModule)&&(i=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-wrap table"),sf.base.setStyleAttribute(i,{transform:r.style.transform}));n=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});e.appendChild(n);n.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-n.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(n,t){var i=this.getStartHour(),r=this.getEndHour(),f=0,u=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes()),e;return sf.base.isNullOrUndefined(n)||(e=0===r.getHours()?24:r.getHours(),0!==n[0]&&(f=n[0]*60*(e-i.getHours())+(r.getMinutes()-i.getMinutes())),u=f+u),u*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var n=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&n.push(t),n},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new s(this.parent,"hour").renderAppointments():new s(this.parent,"day").renderAppointments()},t}(yt),ti=(nt=function(n,t){return(nt=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}nt(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),st=function(r){function u(n){var t=r.call(this,n)||this;return t.dayNameFormat="wide",t.isInverseTableSelect=!1,t.allDayLevel=0,t}return ti(u,r),u.prototype.onDataReady=function(){"MonthAgenda"!==this.parent.options.currentView?new o(this.parent).renderAppointments():this.parent.eventBase.removeSelectedAppointmentClass()},u.prototype.onContentScroll=function(n){this.parent.removeNewEventElement();this.parent.onVirtualScroll();this.scrollTopPanel(n.target);this.scrollLeftPanel(n.target);this.parent.setPersistence()},u.prototype.scrollLeftPanel=function(n){var t=this.getLeftPanelElement();t&&(t.scrollTop=n.scrollTop)},u.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},u.prototype.onScrollUiUpdate=function(n){var e=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),t=this.getContentAreaElement(),o=this.parent.element.offsetHeight-e-i.offsetHeight,r=this.getLeftPanelElement(),f,u;"auto"!==this.parent.options.height?this.setContentHeight(t,r,o):(t.style.height="auto",r&&(r.style.height="auto"));f=l();(i.firstElementChild.style[n.cssProperties.rtlBorder]="",i.style[n.cssProperties.rtlPadding]="",t.offsetWidth-t.clientWidth>0?(i.firstElementChild.style[n.cssProperties.border]=f>0?"1px":"0px",i.style[n.cssProperties.padding]=f>0?f-1+"px":"0px"):(i.firstElementChild.style[n.cssProperties.border]="",i.style[n.cssProperties.padding]=""),this.setColWidth(t),n.scrollPosition)?(r&&(r.scrollTop=n.scrollPosition.top),t.scrollTop=n.scrollPosition.top,t.scrollLeft=n.scrollPosition.left):(u=this.element.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]'),t.scrollLeft=sf.base.isNullOrUndefined(u)?0:this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-u.offsetLeft-u.offsetWidth):u.offsetLeft,n.isPreventScrollUpdate||(t.scrollTop=this.parent.uiStateValues.top));this.retainScrollPosition()},u.prototype.setContentHeight=function(n,t,i){n.style.height="auto";"Month"===this.parent.options.currentView&&(n.style.height=sf.base.formatUnit(i));t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(n)))},u.prototype.renderLayout=function(){var i=[].slice.call(this.parent.element.querySelectorAll(".e-current-day")),e,a,r,o,u,f,s,h,c,l;if(i.length>0&&sf.base.removeClass(i,"e-current-day"),e=t(n(new Date(this.parent.getCurrentTime()))),a='.e-work-cells[data-date="'+e.getTime().toString()+'"]',"Month"===this.parent.options.currentView||"MonthAgenda"===this.parent.options.currentView)for((i=[].slice.call(this.parent.element.querySelectorAll(".e-current-date"))).length>0&&sf.base.removeClass(i,"e-current-date"),r=0,o=u=[].slice.call(this.parent.element.querySelectorAll(a));r<o.length;r++){var v=o[r],y=v.cellIndex,p=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells"))[y];sf.base.addClass([v],"e-current-date");sf.base.addClass([p],"e-current-day")}for("TimelineMonth"===this.parent.options.currentView&&(u=this.parent.element.querySelector('.e-header-cells[data-date="'+e.getTime().toString()+'"]'),sf.base.isNullOrUndefined(u)||sf.base.addClass([u],"e-current-day")),this.element=this.parent.element.querySelector(".e-table-wrap"),f=0,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));f<s.length;f++)h=s[f],sf.base.EventHandler.clearEvents(h),this.wireCellEvents(h);c=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(c);this.wireCellEvents(c);this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();l=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(l);sf.base.EventHandler.add(l,"scroll",this.onContentScroll,this);this.renderAppointmentContainer();this.parent.setDimensions()},u.prototype.wireCellEvents=function(n){this.parent.isPrintSchedule||(sf.base.EventHandler.add(n,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(n,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(n,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},u.prototype.renderAppointmentContainer=function(){},u.prototype.getMonthStart=function(n){var t=c(v(n),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},u.prototype.getMonthEnd=function(n){return i(c(y(ct(n,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},u.prototype.getRenderDates=function(t){var u=[],f=n(this.parent.options.selectedDate),r=this.getMonthStart(f),e=this.getMonthEnd(f);do(this.parent.activeViewOptions.showWeekend||this.isWorkDay(r,t))&&u.push(r),r=i(r,1);while(r.getTime()<=e.getTime());return t||(this.renderDates=u),u},u.prototype.getEndDateFromStartDate=function(n){return i(new Date(n.getTime()),1)},u.prototype.destroy=function(){this.parent.isDestroyed||(this.element=null)},u}(a),ii=(tt=function(n,t){return(tt=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}tt(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ri=function(n){function t(t){return n.call(this,t)||this}return ii(t,n),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var n=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),r=this.parent.element.offsetHeight-n-i.offsetHeight-t.offsetHeight,u=this.element.querySelector(".e-wrapper-container"),f=this.element.querySelector(".e-appointment-wrap");"auto"!==this.parent.options.height&&(u.style.height=f.style.height=sf.base.formatUnit(r))},t}(st),ui=(it=function(n,t){return(it=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}it(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),fi=function(t){function i(n){var i=t.call(this,n)||this;return i.isInverseTableSelect=!0,i}return ui(i,t),i.prototype.onDataReady=function(){var n=new s(this.parent,"day");this.removeVirtualMask();n.renderAppointments()},i.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},i.prototype.scrollTopPanel=function(n){t.prototype.scrollTopPanel.call(this,n);this.scrollHeaderLabels(n)},i.prototype.setContentHeight=function(n,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(n)));n.style.height=sf.base.formatUnit(i)},i.prototype.getMonthStart=function(t){var i=v(n(t));return new Date(i.getFullYear(),i.getMonth(),i.getDate())},i.prototype.getMonthEnd=function(t){var i=v(n(t));return y(ct(new Date(+i),this.parent.activeViewOptions.interval-1))},i}(st),ei=(rt=function(n,t){return(rt=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}rt(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),oi=function(n){function t(t){var i=n.call(this,t)||this;return i.isInverseTableSelect=!1,i.moreIndicatorHeight=19,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i}return ei(t,n),t.prototype.renderLayout=function(){var n,t,i;if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView)for(n=0,t=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));n<t.length;n++)i=t[n],sf.base.EventHandler.clearEvents(i),this.wireEvents(i,"cell");this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll");this.parent.setDimensions()},t.prototype.onContentScroll=function(n){var t=n.target,i,r;sf.base.isNullOrUndefined(this.element)&&(this.element=t);i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);r=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");r&&(r.scrollTop=t.scrollTop);this.parent.setPersistence()},t.prototype.onScrollUiUpdate=function(n){var u=this.parent.element.offsetHeight-this.getHeaderBarHeight(),t=this.element.querySelector(".e-date-header-container"),r;t&&(u-=t.offsetHeight);var i=this.element.querySelector(".e-content-wrap"),f=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),e="auto"===this.parent.options.height;(i&&(i.style.height=e?"auto":sf.base.formatUnit(u)),f&&(f.style.height=e?"auto":sf.base.formatUnit(u-this.getScrollXIndent(i))),!this.parent.isAdaptive&&t)&&(r=l(),i.offsetWidth-i.clientWidth>0?(t.firstElementChild.style[n.cssProperties.border]=r>0?"1px":"0px",t.style[n.cssProperties.padding]=r>0?r-1+"px":"0px"):(t.firstElementChild.style[n.cssProperties.border]="",t.style[n.cssProperties.padding]=""));this.resetColWidth();this.setColWidth(this.getContentAreaElement());this.retainScrollPosition()},t.prototype.onDataReady=function(){var n,l;if("TimelineYear"===this.parent.options.currentView){this.element=this.parent.element.querySelector(".e-table-wrap");this.removeCellHeight();var a=this.element.querySelector(".e-work-cells"),i=0,r=0,u=a.offsetParent;u&&(i=u.offsetHeight/u.querySelector("tbody").childElementCount,r=u.offsetWidth/u.querySelector("tbody tr").childElementCount);for(var v=a.querySelector(".e-date-header"),f=sf.base.isNullOrUndefined(v)?0:w(v),o=e(this.element.querySelector(".e-event-table"),"e-appointment"),y=void 0,p=void 0,b=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),s=0;s<b.length;s++){n=b[s];sf.base.removeClass([n],"e-event-action");n.style.removeProperty("display");n.blur();var t=void 0,h=void 0,k=void 0,c=void 0,d=parseInt(n.getAttribute("data-level"),10);(t=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+n.getAttribute("data-date")+'"][data-group-index="'+n.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+n.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?p=t.cellIndex*r:y=t.cellIndex*r,sf.base.isNullOrUndefined(t))||(n.classList.contains("e-appointment")?(h=t.offsetTop+f+o*d+2,this.parent.options.rowAutoHeight||(k=this.parent.options.enableMaxHeight&&!this.parent.options.enableIndicator?i-f:this.parent.options.enableMaxHeight&&this.parent.options.enableIndicator?i-f-this.moreIndicatorHeight:o),c=r-2,this.parent.eventBase.wireAppointmentEvents(n),l=(parseInt(n.getAttribute("data-index"),10)+1)*o+this.moreIndicatorHeight+f,this.parent.options.rowAutoHeight&&i<l&&this.updateCellHeight(t,l)):(h=t.offsetTop+(i-n.offsetHeight),c=r-2),n.style.width=c+"px",n.style.height=k+"px",n.style.right=p+"px",n.style.left=y+"px",n.style.top=h+"px")}}},t.prototype.updateCellHeight=function(n,t){var i,r;t>n.offsetHeight&&((sf.base.setStyleAttribute(n.parentElement.querySelector("td"),{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0)&&(i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+n.getAttribute("data-group-index")+'"]'),i&&sf.base.setStyleAttribute(i,{height:t+"px"})),r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(n.parentElement.rowIndex+1)+") td"),r&&sf.base.setStyleAttribute(r,{height:t+"px"}))},t.prototype.removeCellHeight=function(){for(var n=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));n<t.length;n++)t[n].firstElementChild.style.height=""},t.prototype.getEndDateFromStartDate=function(n){var t=new Date(n.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=y(t)),i(new Date(t.getTime()),1)},t.prototype.wireEvents=function(n,t){this.parent.isPrintSchedule||("cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(n,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(n,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(n,"scroll",this.onContentScroll,this))},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},t}(a),si=(ut=function(n,t){return(ut=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ut(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),hi=function(t){function r(n){var i=t.call(this,n)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return si(r,t),r.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");this.parent.isPrintSchedule||this.wireEvents();this.parent.setDimensions()},r.prototype.onDataReady=function(n,t,i){var r,u;(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.options.enablePersistence)?this.retainScrollPosition():this.parent.activeViewOptions.allowVirtualScrolling&&(r=this.element.querySelector(".e-virtual-track"),r||(r=sf.base.createElement("div",{className:"e-virtual-track"})),u=this.element.querySelector(".e-content-wrap"),r.style.height=t*this.elementHeight-u.offsetHeight+"px",u.appendChild(r),i&&(u.scrollTop=this.translateY=0,this.setTranslate(u)),this.itemCount=t)},r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},r.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},r.prototype.agendaScrolling=function(){var n,i,t;(sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide(),this.parent.activeViewOptions.allowVirtualScrolling)&&(n=this.element.querySelector(".e-content-wrap"),i=this.element.querySelector(".e-agenda-item"),this.elementHeight=i?i.offsetHeight:this.elementHeight,t=void 0,n.scrollTop-this.translateY<0?(t=~~(n.scrollTop/this.elementHeight),this.translateY=n.scrollTop,this.setTranslate(n),this.beforeInvoke(t)):n.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(t=(t=~~(n.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:t,this.translateY=n.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(n),this.beforeInvoke(t)));this.parent.setPersistence()},r.prototype.beforeInvoke=function(n){var t=this;window.clearTimeout(this.timeValue);this.timeValue=window.setTimeout(function(){t.triggerScrolling(n)},100)},r.prototype.triggerScrolling=function(n){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",n)},r.prototype.setTranslate=function(n){sf.base.setStyleAttribute(n.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},r.prototype.getEndDateFromStartDate=function(t){return n(i(t,1))},r.prototype.onScrollUiUpdate=function(){var n=this.getHeaderBarHeight(),t=this.element.querySelector(".e-content-wrap");t.style.height="auto"!==this.parent.options.height?sf.base.formatUnit(this.parent.element.offsetHeight-n):"auto"},r.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},r}(a),ci=function(){function n(n){this.parent=n}return n.prototype.cellMouseDown=function(n){this.isPreventAction(n)||this.parent.onCellMouseDown(n)},n.prototype.cellClick=function(n){var r,i,u,f;if(!this.isPreventAction(n)&&!sf.base.closest(n.target,".e-disable-dates")&&(r=sf.base.closest(n.target,".e-work-cells,.e-all-day-cells,.e-header-cells"),!sf.base.isNullOrUndefined(r))){if(!sf.base.isNullOrUndefined(sf.base.closest(n.target,".e-new-event")))return(i=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=t(i.startTime),i.endTime=t(i.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",i,"Add");var e=sf.base.closest(n.target,".e-navigate"),o=this.parent.getNavigateView(),s=this.parent.options.currentView===o;if(sf.base.isNullOrUndefined(e)||s){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return;if(this.parent.isAdaptive&&(n.target.classList.contains("e-more-indicator")||sf.base.closest(n.target,".e-more-indicator")))return;if((r.classList.contains("e-work-cells")||r.classList.contains("e-all-day-cells"))&&n.shiftKey&&1===n.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(n);this.parent.activeCellsData=this.parent.getCellDetails(r);this.parent.currentCell=r;(i=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(n),name:"cellClick"},!0)).startTime=t(i.startTime);i.endTime=t(i.endTime);this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",i)}else u=this.parent.getDateFromElement(r),sf.base.isNullOrUndefined(u)||this.parent.isAdaptive||(f=new Date(this.parent.getMsFromDate(u)),sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",f,this.parent.getNavigateView()))}},n.prototype.cellDblClick=function(n){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(n)||sf.base.closest(n.target,".e-disable-dates"))){var i=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(n),name:"OnCellDoubleClick"},!0);i.startTime=t(i.startTime);i.endTime=t(i.endTime);this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",i,"Add")}},n.prototype.isPreventAction=function(n){if(sf.base.closest(n.target,".e-navigate"))return!1;if(sf.base.closest(n.target,".e-appointment-wrapper")&&!sf.base.closest(n.target,".e-more-indicator"))return!0;var t=sf.base.closest(n.target,".e-appointment,.e-resource-group-cells");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(n.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},n}(),li=function(){function n(n){this.selectedCells=[];this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",altT:"alt+t",enter:"enter",escape:"escape","delete":"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"};this.parent=n;this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return n.prototype.keyActionHandler=function(n){switch(n.action){case"downArrow":case"shiftDownArrow":this.processDown(n,n.shiftKey);break;case"altT":this.parent.options.selectedDate.getTime()!==(new Date).setHours(0,0,0,0)&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Today");break;case"upArrow":case"shiftUpArrow":this.processUp(n,n.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(n,n.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(n,n.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(n);break;case"enter":this.processEnter(n);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(n,n.shiftKey);break;case"delete":this.processDelete();break;case"escape":this.processEscape()}},n.prototype.onCellMouseDown=function(n){if(!n.shiftKey&&(this.initialTarget=this.getClosestCell(n),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(n.target.classList.contains("e-work-cells")&&3!==n.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),n.target.classList.contains("e-all-day-cells")&&3!==n.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this);sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},n.prototype.onMouseSelection=function(n){var u=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),i,r;if(sf.base.addClass(u,"e-allow-select"),i=this.parent.boundaryValidation(n.pageY,n.pageX),i.bottom||i.top||i.left||i.right){var t=this.parent.element.querySelector(".e-content-wrap"),f=t.offsetHeight<=t.scrollHeight&&t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,e=t.offsetWidth<=t.scrollWidth&&t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;f&&(i.top||i.bottom)&&(t.scrollTop+=i.top?-n.target.offsetHeight:n.target.offsetHeight);e&&(i.left||i.right)&&(t.scrollLeft+=i.left?-n.target.offsetWidth:n.target.offsetWidth)}r=this.getClosestCell(n);r&&this.selectCells(!0,r)},n.prototype.getClosestCell=function(n){return sf.base.closest(n.target,".e-work-cells,.e-all-day-cells")},n.prototype.onMoveup=function(n){var f=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),r,u,i;(sf.base.removeClass(f,"e-allow-select"),n.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),n.target.classList.contains("e-all-day-cells"))&&(r=this.parent.getAllDayRow(),sf.base.EventHandler.remove(r,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(r,"mouseup",this.onMoveup));this.isPreventAction(n)||(u=sf.base.closest(n.target,".e-work-cells,.e-all-day-cells,.e-header-cells"),(this.parent.activeCellsData=this.getSelectedElements(u),this.parent.options.quickInfoOnSelectionEnd)&&(this.parent.currentCell=u,i=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:n,name:"cellClick"},!0),i.startTime=t(i.startTime),i.endTime=t(i.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",i)))},n.prototype.processEnter=function(n){var i,u,r,f;if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(n))if(i=n.target,sf.base.closest(i,".e-quick-popup-wrapper"))i.classList.contains("e-event-details")||i.classList.contains("e-event-create")||i.classList.contains("e-event-edit")||i.classList.contains("e-event-delete")||i.classList.contains("e-close")?(i.click(),n.preventDefault()):i.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),n.preventDefault());else if(i.classList.contains("e-resource-cells")&&i.classList.contains("e-parent-node"))u=i.querySelector(".e-resource-tree-icon"),u&&u.click();else if(i.classList.contains("e-work-cells")||i.classList.contains("e-all-day-cells"))this.parent.activeCellsData=this.getSelectedElements(i),this.parent.currentCell=i,r=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:n}),this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(r.startTime=t(r.startTime),r.endTime=t(r.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",r));else if(i.classList.contains("e-inline-subject"))this.parent.inlineCrudActions(i);else if(i.classList.contains("e-appointment")||i.classList.contains("e-more-event-close")||i.classList.contains("e-all-day-appointment-section")||i.classList.contains("e-more-indicator"))i.click();else if(i.classList.contains("e-header-date"))return f=this.parent.getDateFromElement(i),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",new Date(this.parent.getMsFromDate(f)),this.parent.getNavigateView()),void this.processEscape()},n.prototype.getSelectedElements=function(n){var i,t,r;return this.selectedCells.length>1&&n.classList.contains("e-selected-cell")?(t=this.parent.getCellDetails(this.selectedCells[0]),r=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]),t.endTime=r.endTime,t.element=n,i=t):i=this.parent.getCellDetails(n),i},n.prototype.getCells=function(n,t,i){var h=this.parent.getContentTable(),r=[].slice.call(h.querySelectorAll("td")),a=h.rows.length,c=h.rows[0].cells.length,l,o,s,v;t.classList.contains("e-all-day-cells")&&(l=this.parent.getAllDayRow(),r=[].slice.call(l.cells),a=1,c=l.cells.length);var u=r.indexOf(t),f=r.indexOf(i),e=[];if(n){for(o=0;o<c;o++)for(s=0;s<a;s++)e.push(r[c*s+o]);u=e.indexOf(t);f=e.indexOf(i)}return u>f&&(v=u,u=f,f=v),(n?e:r).slice(u,f+1)},n.prototype.focusFirstCell=function(){var n,t;if("Agenda"===this.parent.options.currentView)return n=this.parent.getContentTable().querySelector(".e-agenda-cells"),n.setAttribute("tabindex","0"),void n.focus();(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView())?(t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)"),this.selectCells(!1,t)):this.selectCells(!1,this.parent.getWorkCellElements()[0])},n.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},n.prototype.selectCells=function(n,t){var i,u,r,f,e;if(this.parent.removeSelectedClass(),i=_instanceof(t,Array)?t.slice(-1)[0]:t,n){if(u=void 0,!this.parent.options.allowMultiRowSelection&&["Day","Week","WorkWeek","Month","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]),r=this.getCells(this.isInverseTableSelect(),this.initialTarget,i),this.parent.activeViewOptions.group.resources.length>0){u=this.initialTarget.getAttribute("data-group-index");for(var h=[],o=0,c=r;o<c.length;o++)(e=c[o]).getAttribute("data-group-index")===u&&h.push(e);r=h}if(this.parent.options.allowMultiCellSelection||(r=[this.initialTarget]),this.selectedCells=r,r.length>2&&!i.classList.contains("e-all-day-cells")){if(f=this.getAllDayCells(r),this.parent.activeViewOptions.group.resources.length>0){for(var l=[],s=0,a=f;s<a.length;s++)(e=a[s]).getAttribute("data-group-index")===u&&l.push(e);f=l}r=r.concat(f)}i.getAttribute("data-group-index")!==u&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]);this.parent.addSelectedClass(r,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},n.prototype.selectAppointment=function(n,t){var i=this.getAppointmentElements(),r,u;i.length<0||((this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment"))?(u=i.indexOf(t),r=i[n?u-1:u+1]):r=n?i[i.length-1]:i[0],r&&(this.parent.eventBase.addSelectedAppointments([r]),r.focus(),sf.base.addClass([r],"e-active-appointment-agenda")))},n.prototype.selectAppointmentElementFromWorkCell=function(){this.parent.eventBase.removeSelectedAppointmentClass();this.parent.removeSelectedClass()},n.prototype.getAllDayCells=function(n){var t=this.parent.getAllDayRow();if(!t)return[];var i=n[0],r=n[n.length-1],u=this.parent.getCellDetails(i);return this.parent.getCellDetails(r).endTime.getTime()-u.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,r.cellIndex+1):[]},n.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},n.prototype.getAppointmentElementsByGuid=function(n){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+n+'"]'))},n.prototype.getUniqueAppointmentElements=function(){var n=this.getAppointmentElements(),t=[];return n.map(function(n){return n.getAttribute("data-guid")}).filter(function(i,r,u){u.indexOf(i)===r&&t.push(n[r])}),t},n.prototype.getWorkCellFromAppointmentElement=function(){return null},n.prototype.processViewNavigation=function(n){var t=parseInt(n.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&i[t].click()},n.prototype.processUp=function(n,t){var u,f;if(!t||!this.parent.isTimelineView()&&"MonthAgenda"!==this.parent.options.currentView){var i=n.target,e=this.parent.getSelectedElements(),o=this.parent.eventBase.getSelectedAppointments(),s=this.parent.element.querySelector(".e-more-popup-wrapper"),h=this.getQuickPopupElement();(e.length>0&&!n.target.classList.contains("e-work-cells")&&(i=e[e.length-1]),o.length>0&&!s.classList.contains(r)&&!h.classList.contains(r)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(i=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),i)&&(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+r)?(u=this.parent.getTableRows(),f=u.indexOf(i.parentElement),f>0&&f<u.length&&this.selectCells(t,u[f-1].cells[i.cellIndex])):"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,i))}},n.prototype.processDown=function(n,t){var u,f;if(!t||!this.parent.isTimelineView()&&"MonthAgenda"!==this.parent.options.currentView){var i=n.target,e=this.parent.getSelectedElements(),o=this.parent.eventBase.getSelectedAppointments(),s=this.parent.element.querySelector(".e-more-popup-wrapper"),h=this.getQuickPopupElement();e.length>0&&!n.target.classList.contains("e-work-cells")&&(i=e[e.length-1]);o.length>0&&!s.classList.contains(r)&&!h.classList.contains(r)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(i=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());u=this.parent.getTableRows();i&&(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+r)?(f=u.indexOf(i.parentElement),f>=0&&f<u.length-1&&this.selectCells(t,u[f+1].cells[i.cellIndex])):"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,i))}},n.prototype.processLeftRight=function(n){var t=this.parent.getContentTable(),i=n.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:n.cellIndex,maxIndex:t.rows[i].cells.length}},n.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},n.prototype.isCancelLeftRightAction=function(n,t){if("Agenda"===this.parent.options.currentView||t&&"MonthAgenda"===this.parent.options.currentView||this.isPreventAction(n)&&t)return!0;var i=this.parent.element.querySelector(".e-more-popup-wrapper"),u=this.getQuickPopupElement();return!(!i.classList.contains(r)&&!u.classList.contains(r))},n.prototype.processRight=function(n,t){var i;if(!this.isCancelLeftRightAction(n,t)){var u,f=this.parent.getSelectedElements(),e=this.parent.eventBase.getSelectedAppointments(),r=n.target;if(f.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=f[f.length-1]),!(e.length>0)||(r=this.getWorkCellFromAppointmentElement(e[e.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&n.target.classList.contains("e-work-cells"))i=this.processLeftRight(r),i.columnIndex>=0&&i.columnIndex<i.maxIndex-1?(u=this.calculateNextPrevDate(r,i.element.rows[i.rowIndex].cells[r.cellIndex+1],"right"),sf.base.isNullOrUndefined(u)||this.selectCells(t,u)):i.columnIndex===i.maxIndex-1&&(!this.isInverseTableSelect()&&i.rowIndex<i.element.rows.length-1?(u=this.calculateNextPrevDate(r,i.element.rows[i.rowIndex+1].cells[0],"right"),sf.base.isNullOrUndefined(u)||this.selectCells(t,u)):t||this.isInverseTableSelect()&&i.rowIndex);else if(r.classList.contains("e-all-day-cells")){var o=r.cellIndex,s=this.parent.getAllDayRow(),h=s.cells.length;o>=0&&o<h-1&&this.selectCells(t,s.cells[o+1])}}},n.prototype.processLeft=function(n,t){var u,i,f,e,r;if(!this.isCancelLeftRightAction(n,t)&&(i=n.target,f=this.parent.getSelectedElements(),f.length>0&&!i.classList.contains("e-work-cells")&&!i.classList.contains("e-all-day-cells")&&(i=f[f.length-1]),e=this.parent.eventBase.getSelectedAppointments(),!(e.length>0)||(i=this.getWorkCellFromAppointmentElement(e[e.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),i)))if(n.target.classList.contains("e-work-cells")&&i.classList.contains("e-work-cells"))r=this.processLeftRight(i),r.columnIndex>0&&r.columnIndex<r.maxIndex?(u=this.calculateNextPrevDate(i,r.element.rows[r.rowIndex].cells[i.cellIndex-1],"left"),sf.base.isNullOrUndefined(u)||this.selectCells(t,u)):0===r.columnIndex&&!this.isInverseTableSelect()&&r.rowIndex>0&&(u=this.calculateNextPrevDate(i,r.element.rows[r.rowIndex-1].cells[r.maxIndex-1],"left"),sf.base.isNullOrUndefined(u)||this.selectCells(t,u));else if(i.classList.contains("e-all-day-cells")){var o=i.cellIndex,s=this.parent.getAllDayRow(),h=s.cells.length;o>0&&o<h&&this.selectCells(t,s.cells[o-1])}},n.prototype.calculateNextPrevDate=function(n,t,i){var u=this.initialTarget.getAttribute("data-group-index"),r,f;return this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&n&&t&&t.getAttribute("data-group-index")!==u&&(r=this.parent.getDateFromElement(n),f="right"===i?new Date(r.setDate(r.getDate()+1)):new Date(r.setDate(r.getDate()-1)),t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(f).toString()+'"][data-group-index="'+u+'"]'))[0]),t},n.prototype.getFocusableElements=function(n){return[].slice.call(n.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},n.prototype.processTabOnPopup=function(n,t){var f=this,i=this.getFocusableElements(t),r=(i=i.filter(function(n){var t=f.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(n.classList.contains("e-edit")||n.classList.contains("e-delete")):!(n.classList.contains("e-event-edit")||n.classList.contains("e-event-delete"))}))[0],u=i[i.length-1];sf.base.isNullOrUndefined(u)||document.activeElement!==u||n.shiftKey||(n.preventDefault(),r.focus());!sf.base.isNullOrUndefined(r)&&document.activeElement===r&&n.shiftKey&&(n.preventDefault(),u.focus())},n.prototype.processTab=function(n,t){var i=n.target,e=sf.base.closest(i,".e-quick-popup-wrapper,.e-more-popup-wrapper"),l,a,v,f,o,y,s,h;if(e&&e.classList.contains(r))return e.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(n,e);if(i.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var u=parseInt(i.getAttribute("data-group-index"),10),p='.e-appointment[data-group-index="'+(t?u-1:u)+'"]',c=[].slice.call(this.parent.element.querySelectorAll(p));c.length>0?(this.parent.eventBase.removeSelectedAppointmentClass(),l=t?c.slice(-1)[0]:c[0],this.parent.eventBase.addSelectedAppointments([l]),l.focus(),n.preventDefault()):u===parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-rendered-index"))?(this.parent.element.focus(),n.preventDefault()):this.parent.virtualScrollModule?(a=this.parent.element.querySelector(".e-virtual-track"),v=Math.round(a.offsetHeight/parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-expanded-index"))),this.parent.element.querySelector(".e-content-wrap").scrollTop=(t?u-1:u+1)*v,this.parent.virtualScrollModule.virtualScrolling()):this.setScrollPosition(u)}else if(i.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else if(i.classList.contains("e-appointment")){if(f=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),o=this.parent.eventBase.getSelectedAppointments(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&(u=parseInt(i.getAttribute("data-group-index"),10),f=[].slice.call(this.parent.element.querySelectorAll('.e-appointment[data-group-index="'+u+'"]')),y='.e-resource-cells[data-group-index="'+(t?u:u+1)+'"]',s=this.parent.element.querySelector(y),s&&(t&&i.getAttribute("data-guid")===f[0].getAttribute("data-guid")||!t&&i.getAttribute("data-guid")===f.slice(-1)[0].getAttribute("data-guid"))))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?s.focus({preventScroll:!0}):s.focus(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(u),void n.preventDefault();if(o.length>0&&(i=o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!t&&i.getAttribute("data-guid")===f[f.length-1].getAttribute("data-guid")||t&&i.getAttribute("data-guid")===f[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(t,i),n.preventDefault())}else{if(h=this.parent.getSelectedElements(),h.length>0&&!i.classList.contains("e-appointment"))return i=h[h.length-1],this.selectAppointmentElementFromWorkCell(t,i),void n.preventDefault();i&&!i.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(i,t)}},n.prototype.processDelete=function(){var t=document.activeElement,n;if("MonthAgenda"===this.parent.options.currentView&&(n=this.parent.eventBase.getSelectedEvents().element,n&&(t=n&&sf.base.isNullOrUndefined(n.length)?n:n[0])),t&&t.classList.contains("e-appointment")){if(sf.base.addClass([t],u),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||t.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},n.prototype.processEscape=function(){this.parent.onClosePopup();this.parent.onMoreEventPopupClose();this.parent.headerPopup&&this.parent.headerPopup.hide();this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},n.prototype.isPreventAction=function(n){var t=sf.base.closest(n.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},n.prototype.processTabOnResourceCells=function(n,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),u=i.indexOf(n),r=t?i[u-1]:i[u+1],f,e;r&&r.classList.contains("e-resource-cells")&&(f=parseInt(r.getAttribute("data-group-index"),10),this.parent.virtualScrollModule?(e=this.parent.element.querySelector(".e-resource-column-wrap"),[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")).forEach(function(n){n.getBoundingClientRect().top<e.getBoundingClientRect().top&&n.setAttribute("tabindex","-1")})):this.setScrollPosition(f))},n.prototype.setScrollPosition=function(n){var t=this.parent.element.querySelector('.e-work-cells[data-group-index="'+n+'"]');t&&(this.parent.element.querySelector(".e-content-wrap").scrollTop=t.offsetTop)},n.prototype.destroy=function(){this.keyboardModule.destroy()},n}(),pt=function(){function i(n){this.daysVariation=0;this.parent=n;this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null};this.scrollArgs={element:null,width:0,height:0};this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1};this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return i.prototype.calculateIntervalTime=function(n){var t=new Date(+n);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},i.prototype.getContentAreaDimension=function(){var r=this.parent.element.querySelector(".e-content-wrap"),n=[].slice.call(r.querySelector("tr").children),t,i;return!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(n=this.getResourceElements(n)),t=n[0].getBoundingClientRect(),i=n.slice(-1)[0].getBoundingClientRect(),{bottom:r.scrollHeight-5,left:this.parent.options.enableRtl?i.left:t.left,right:this.parent.options.enableRtl?t.right:i.right,top:0}},i.prototype.getPageCoordinates=function(n){var t=n.event;return t&&t.changedTouches?t.changedTouches[0]:n.changedTouches?n.changedTouches[0]:t||n},i.prototype.getIndex=function(n){var r=[].slice.call(this.parent.getContentTable().querySelector("tr").children),t={minIndex:0,maxIndex:r.length-1},i;return"resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()&&(i=this.getResourceElements(r),t.minIndex=i[0].cellIndex,t.maxIndex=i.slice(-1)[0].cellIndex),n<t.minIndex&&(n=t.minIndex),n>t.maxIndex&&(n=t.maxIndex),n},i.prototype.updateTimePosition=function(n,t){for(var e,o,s,i,a,r,h,c,u=0,f=0,l=this.actionObj.cloneElement;f<l.length;f++)e=l[f].querySelector(".e-time"),e&&(o=this.actionObj.start,s=this.actionObj.end,t&&t.length>0&&u<t.length&&(o=t[u].startTime,s=t[u].endTime),e.innerHTML=this.parent.getTimeString(o)+" - "+this.parent.getTimeString(s)),u++;this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(i=this.parent.element.querySelector(".e-clone-time-indicator"),i||(i=sf.base.createElement("div",{className:"e-clone-time-indicator"}),a=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap",this.parent.element.querySelector("."+a).appendChild(i)),i.innerHTML=this.parent.getTimeString(n),r=0,this.parent.isTimelineView()?this.parent.options.enableRtl?(h=parseInt(this.actionObj.clone.style.right,10),r="drag"===this.actionObj.action||this.resizeEdges.left?h+this.actionObj.clone.offsetWidth:h,i.style.right=sf.base.formatUnit(r)):(c=parseInt(this.actionObj.clone.style.left,10),r="drag"===this.actionObj.action||this.resizeEdges.left?c:c+this.actionObj.clone.offsetWidth,i.style.left=sf.base.formatUnit(r)):(r="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,i.style.top=sf.base.formatUnit(r)))},i.prototype.getResourceElements=function(n){var t=this;return n.filter(function(n){return parseInt(n.getAttribute("data-group-index"),10)===t.actionObj.groupIndex})},i.prototype.getOriginalElement=function(n){var t,i=n.getAttribute("data-guid"),r;return n.offsetParent&&n.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView()?t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]')):(r=sf.base.closest(n,"tr"),t=[].slice.call(r.querySelectorAll('[data-guid="'+i+'"]'))),t},i.prototype.createCloneElement=function(n){var t=sf.base.createElement("div",{innerHTML:n.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([n],"e-event-action"),sf.base.isNullOrUndefined(n.parentElement)||n.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==n.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:n.style.backgroundColor}),t},i.prototype.removeCloneElementClasses=function(){var n=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(n=[].slice.call(this.parent.element.querySelectorAll(".e-event-action,."+u)));sf.base.removeClass(n,["e-event-action",u])},i.prototype.removeCloneElement=function(){var n,i,e,t,r,u,f;for(this.actionObj.originalElement=[],n=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));n<i.length;n++)e=i[n],sf.base.remove(e);for(t=0,r=this.actionObj.cloneElement;t<r.length;t++)u=r[t],sf.base.isNullOrUndefined(u.parentNode)||sf.base.remove(u);this.actionObj.cloneElement=[];f=this.parent.element.querySelector(".e-clone-time-indicator");f&&sf.base.remove(f)},i.prototype.getCursorElement=function(n){var t=this.getPageCoordinates(n);return document.elementFromPoint(t.clientX,t.clientY)},i.prototype.autoScroll=function(){var n=this.parent.element.querySelector(".e-content-wrap"),t=n.offsetHeight<=n.scrollHeight,i=n.offsetWidth<=n.scrollWidth,r=t&&n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,u=i&&n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;r&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(n.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&n.scrollHeight!==n.offsetHeight+n.scrollTop&&n.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy));u&&(this.scrollEdges.left||this.scrollEdges.right)&&(n.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&n.scrollWidth!==n.offsetWidth+n.scrollLeft&&n.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},i.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var n=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=n,n.bottom||n.top||n.left||n.right},i.prototype.actionClass=function(n){"addClass"===n?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},i.prototype.updateScrollPosition=function(){var n=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval(function(){if(n.autoScrollValidation()&&!n.actionObj.clone.classList.contains("e-all-day-appointment")){if(n.parent.isTimelineView()&&n.parent.activeViewOptions.group.resources.length>0&&n.actionObj.groupIndex<0)return;n.autoScroll();n.actionObj.action}},this.actionObj.scroll.timeDelay))},i.prototype.updateOriginalElement=function(n){var t='[data-id="'+n.getAttribute("data-id")+'"]',i,r;this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+n.getAttribute("data-group-index")+'"]'));i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");r=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(r,"e-event-action")},i.prototype.getUpdatedEvent=function(n,t,i){var r=JSON.parse(JSON.stringify(i));return r.startTime=n,r.endTime=t,r},i.prototype.dynamicYearlyEventsRendering=function(i,r,u){var s,f,o,h,c,e,l;void 0===r&&(r=!1);s=this.actionObj.cellWidth-7;r&&(this.resizeEdges.left||this.resizeEdges.right)&&(s=this.actionObj.cellWidth*i.count);f=this.createAppointmentElement(i,this.actionObj.groupIndex,u);f.setAttribute("drag","true");sf.base.addClass([f],"e-schedule-event-clone");sf.base.setStyleAttribute(f,{width:s+"px",border:"0px","pointer-events":"none",position:"absolute",overflow:"hidden",padding:"3px"});o=u||this.actionObj.clone;""!==o.style.backgroundColor&&sf.base.setStyleAttribute(f,{backgroundColor:o.style.backgroundColor});h=t(n(i.startTime)).getTime();c='.e-work-cells[data-date="'+h+'"]';this.parent.activeViewOptions.group.resources.length>0&&(c='.e-work-cells[data-date="'+h+'"][data-group-index="'+this.actionObj.groupIndex+'"]');e=this.parent.element.querySelector(c);sf.base.isNullOrUndefined(e)||(r&&(l=this.actionObj.cellHeight*i.count-e.querySelector(".e-date-header").offsetHeight-7,(this.resizeEdges.right||this.resizeEdges.left)&&(l=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(f,{height:l+"px"})),sf.base.addClass([f],[].slice.call(o.classList)),this.renderElement(e,f,!0),this.actionObj.cloneElement.push(e.querySelector(".e-appointment-wrapper")))},i.prototype.dynamicEventsRendering=function(t,i){var u=this.parent.activeView.renderDates,s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),p=this.parent.activeViewOptions.workDays,b,f,l,k,e,a,o,y;if(this.parent.activeViewOptions.group.resources.length>0)for(var d='.e-work-cells[data-group-index="'+this.actionObj.groupIndex+'"]',g=(s=[].slice.call(this.parent.element.querySelectorAll(d)))[0].querySelectorAll('[data-group-index="'+this.actionObj.groupIndex+'"]').length,h=0,c=0,w=s;c<w.length;c++)b=w[c],u.push(new Date(b.getAttribute("data-date"))),h<g&&(p.push(u[h].getDay()),h++);if(this.monthEvent.dateRender=u,this.monthEvent.getSlotDates(p),this.resizeEdges.left||this.resizeEdges.right)for(f=0,l=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));f<l.length;f++)k=l[f],sf.base.remove(k);for(e=0,a=this.monthEvent.splitEvent(t,u);e<a.length;e++){var v=a[e],nt=this.parent.getIndexOfDate(u,n(v.startTime)),tt=v.data.count*this.actionObj.cellWidth-7,r=this.createAppointmentElement(v,this.actionObj.groupIndex,i);r.setAttribute("drag","true");sf.base.addClass([r],"e-schedule-event-clone");sf.base.setStyleAttribute(r,{width:tt+"px",border:"0px","pointer-events":"none"});o=i||this.actionObj.clone;""!==o.style.backgroundColor&&sf.base.setStyleAttribute(r,{backgroundColor:o.style.backgroundColor});y=s[nt];y&&(sf.base.addClass([r],[].slice.call(o.classList)),this.renderElement(y,r,!0),this.actionObj.cloneElement.push(r))}},i.prototype.getReadonlyAttribute=function(n){return n.getAttribute("aria-readonly")},i.prototype.createAppointmentElement=function(n,t,i){var u=sf.base.isNullOrUndefined(this.cloneEventDetail)?"":this.cloneEventDetail.outerHTML,r;return i&&(u=(i.querySelector(".e-appointment-details")||i.querySelector(".e-subject")).outerHTML),r=sf.base.createElement("div",{className:"e-appointment",innerHTML:u}),this.parent.activeViewOptions.group.resources.length>0&&r.setAttribute("data-group-index",t.toString()),r},i.prototype.renderElement=function(n,t,i){if(void 0===i&&(i=!1),n.querySelector(".e-appointment-wrapper"))n.querySelector(".e-appointment-wrapper").appendChild(t);else{var r=sf.base.createElement("div",{className:"e-appointment-wrapper"});r.appendChild(t);n.appendChild(r)}},i.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},i}(),ai=(ft=function(n,t){return(ft=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ft(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),vi=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return ai(u,r),u.prototype.wireResizeEvent=function(n){for(var r,t=0,i=[].slice.call(n.querySelectorAll(".e-event-resize"));t<i.length;t++)r=i[t],sf.base.EventHandler.clearEvents(r),sf.base.EventHandler.add(r,sf.base.Browser.touchStartEvent,this.resizeStart,this)},u.prototype.resizeHelper=function(){var n,i,t;if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(n=0,i=this.actionObj.originalElement.length;n<i;n++)t=this.createCloneElement(this.actionObj.originalElement[n]),this.actionObj.cloneElement[n]=t,this.actionObj.element===this.actionObj.originalElement[n]&&(this.actionObj.clone=t);else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},u.prototype.resizeStart=function(n){var t=this,i;this.actionObj.action="resize";this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount;this.actionObj.interval=this.actionObj.slotInterval;i=sf.base.closest(n.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var r=this.actionObj.element.getAttribute("data-guid"),u={cancel:!1,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:30,timeDelay:100}},f=JSON.stringify(u);this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",f,r).then(function(r){var f=r.resizeEventArgs,e,s,h,p,a,u;if(t.actionObj.event=sf.base.extend({},r,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime),e=sf.base.extend({},t.actionObj.event,null,!0),!f.cancel){if(t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0,s=t.parent.element.querySelector(".e-work-cells"),t.actionObj.cellWidth=s.offsetWidth,t.actionObj.cellHeight=s.offsetHeight,h=t.parent.activeViewOptions.headerRows.map(function(n){return n.option}),t.parent.isTimelineView()&&h.length>0&&["Date","Hour"].indexOf(h.slice(-1)[0])<0){for(var c=t.parent.getContentTable().querySelector("tr"),v=0,l=0,y=[].slice.call(c.children);l<y.length;l++)p=y[l],v+=parseInt(p.getAttribute("colspan"),10);t.actionObj.cellWidth=c.offsetWidth/v;t.actionObj.cellHeight=c.offsetHeight}a=t.getPageCoordinates(n);t.actionObj.X=a.pageX;t.actionObj.Y=a.pageY;t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10);t.actionObj.interval=f.interval;t.actionObj.scroll=f.scroll;t.actionObj.start=e.startTime;t.actionObj.end=e.endTime;t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element);"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.cloneEventDetail=t.actionObj.element.querySelector(".e-appointment-details"),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new o(t.parent)));u=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:u,width:u.scrollWidth,height:u.scrollHeight};sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t);sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}})},u.prototype.resizing=function(n){var t;if(0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(n.target)||!n.target.classList.contains("e-disable-dates")){if(t=this.getPageCoordinates(n),"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,r=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),u=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-r;this.actionObj.pageY=t.pageY-u}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition();this.updateResizingDirection(n)}},u.prototype.updateResizingDirection=function(n){var i,t;if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){if(i=this.resizeValidation(n),this.resizeEdges.left){if(i)for(var l=this.getLeftRightStyles(n,!0),r=0,o=this.actionObj.cloneElement;r<o.length;r++)t=o[r],sf.base.setStyleAttribute(t,l),sf.base.addClass([t],"e-left-handler");this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(i)for(var a=this.getLeftRightStyles(n,!1),u=0,s=this.actionObj.cloneElement;u<s.length;u++)t=s[u],sf.base.setStyleAttribute(t,a),sf.base.addClass([t],"e-right-handler");this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(i)for(var v=this.getTopBottomStyles(n,!0),f=0,h=this.actionObj.cloneElement;f<h.length;f++)t=h[f],sf.base.setStyleAttribute(t,v),sf.base.addClass([t],"e-top-handler");this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(i)for(var y=this.getTopBottomStyles(n,!1),e=0,c=this.actionObj.cloneElement;e<c.length;e++)t=c[e],sf.base.setStyleAttribute(t,y),sf.base.addClass([t],"e-bottom-handler");this.verticalResizing(!1)}}else this.monthResizing()},u.prototype.monthResizing=function(){var n,f,t,e,s;if(this.removeCloneElement(),n=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY),!sf.base.isNullOrUndefined(n)){var o=this.parent.getDateFromElement(n),h=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(n.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=this.actionObj.event.startTime,u=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?r=o:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(u=i(o,1)),h&&r<u)this.actionObj.start=r,this.actionObj.end=u,f=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(f):this.dynamicEventsRendering(f),this.updateOriginalElement(this.actionObj.clone);else if("TimelineYear"===this.parent.options.currentView)for(t=0,e=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<e.length;t++)s=e[t],this.actionObj.cloneElement.push(s)}},u.prototype.yearEventsRendering=function(n){for(var s,t,o,f,r,u=0,e=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));u<e.length;u++)s=e[u],sf.base.remove(s);for(t=new Date(n.endTime),o=0,0===this.parent.activeViewOptions.group.resources.length&&(o=this.getMonthDiff(n.startTime,i(t,-1))),f=0;f<=o;f++)r=void 0,0===this.parent.activeViewOptions.group.resources.length?r=this.getEventCount(n,this.actionObj.start.getMonth()+f):(r=sf.base.extend({},n,null,!0),t=this.resizeEdges.left||this.resizeEdges.right?i(t,-1):t,r.count=this.getMonthDiff(n.startTime,t)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(r,!0)},u.prototype.getMonthDiff=function(n,t){var i;return i=12*(t.getFullYear()-n.getFullYear()),i-=n.getMonth(),(i+=t.getMonth())<=0?0:i},u.prototype.getEventCount=function(n,t){var u=new Date(this.parent.options.selectedDate.getFullYear(),t,1),f=i(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),r=sf.base.extend({},n,null,!0),o=r.startTime,s=r.endTime,e=1;return o.getTime()<u.getTime()&&(r.startTime=u),s.getTime()>f.getTime()&&(r.endTime=f),0===this.parent.activeViewOptions.group.resources.length&&(e=Math.ceil((r.endTime.getTime()-r.startTime.getTime())/864e5)),r.count=e,r},u.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing);sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop);clearInterval(this.actionObj.scrollInterval);this.actionObj.scrollInterval=null;this.removeCloneElementClasses();this.removeCloneElement();this.actionClass("removeClass");this.parent.uiStateValues.action=!1;var n=this.actionObj.element.getAttribute("data-guid"),i=t(this.actionObj.start),r=t(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",i,r,n)},u.prototype.verticalResizing=function(t){var u=this.actionObj.clone.offsetTop,f,r,i;t||(u+=this.actionObj.clone.offsetHeight);f=u/this.actionObj.cellHeight*this.actionObj.slotInterval;r=this.actionObj.clone.offsetParent;sf.base.isNullOrUndefined(r)||(i=n(this.parent.getDateFromElement(r)),i.setHours(this.parent.activeView.getStartHour().getHours()),i.setMinutes(f+this.parent.activeView.getStartHour().getMinutes()),t?this.actionObj.start=this.calculateIntervalTime(i):this.actionObj.end=this.calculateIntervalTime(i),this.updateTimePosition(i))},u.prototype.horizontalResizing=function(n){var t,h=this.actionObj.event.startTime,c=this.actionObj.event.endTime,o,u,a,g,e,nt,w,tt,l,s,k;if(this.parent.isTimelineView()){o=this.parent.getContentTable().querySelector("tr");u=this.parent.options.currentView;this.parent.activeViewOptions.headerRows.length>0&&(a=this.parent.activeViewOptions.headerRows.map(function(n){return n.option}),u=a.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===u&&(u=a.slice(-2)[0]||"Month"));t=n?h:c;var r=0,v=[].slice.call(o.children),y=!1;if(-1!==["Year","Month","Week","Date"].indexOf(u)){for(var f=0,p=0,d=v;p<d.length;p++)g=d[p],f+=parseInt(g.getAttribute("colspan"),10);e=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);n||(e+=this.actionObj.clone.offsetWidth-this.actionObj.cellWidth);r=Math.floor(e/Math.floor(o.offsetWidth/f));y=(r=n?r:"TimelineMonth"===this.parent.options.currentView?r+1:r)===v.length;r=r<0?0:r>=f?f-1:r}else nt=this.actionObj.cellWidth,(r=n?Math.floor(this.actionObj.clone.offsetLeft/this.actionObj.cellWidth):Math.ceil((this.actionObj.clone.offsetLeft+(this.actionObj.clone.offsetWidth-nt))/this.actionObj.cellWidth),this.parent.options.enableRtl)&&(w=0,"TimelineMonth"!==u&&(this.parent.activeViewOptions.timeScale.enable||"TimelineMonth"===this.parent.options.currentView)||(w=this.actionObj.cellWidth),tt=Math.floor(parseInt(this.actionObj.clone.style.right,10)/this.actionObj.cellWidth)*this.actionObj.cellWidth+(n?0:this.actionObj.clone.offsetWidth-w),r=Math.floor(tt/this.actionObj.cellWidth)),y=r===v.length,r=this.getIndex(r);l=void 0;(l=-1!==["Year","Month","Week","Date"].indexOf(u)?new Date(this.parent.activeView.renderDates[r].getTime()):this.parent.getDateFromElement(o.children[r]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(u)&&this.parent.activeViewOptions.timeScale.enable)?(e=this.parent.options.enableRtl?parseFloat(this.actionObj.clone.style.right):parseFloat(this.actionObj.clone.style.left),n||(e+=this.actionObj.clone.offsetWidth),s=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(e-Math.floor(e/this.actionObj.cellWidth)*this.actionObj.cellWidth)),s=y||!n&&0===s?this.actionObj.slotInterval:s,(t=new Date(l.getTime())).setMinutes(t.getMinutes()+s),this.updateTimePosition(t)):t=new Date(l.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var it=sf.base.closest(this.actionObj.clone,"td").cellIndex,rt=Math.ceil((n?this.actionObj.element.offsetWidth:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,b=(f=Math.ceil((this.actionObj.clone.offsetWidth-rt)/this.actionObj.cellWidth),o=sf.base.closest(this.actionObj.clone,"tr"),n?it-f:it+f-1);b=this.getIndex(b);t=this.parent.getDateFromElement(o.children[b]);n?t.setHours(h.getHours(),h.getMinutes(),h.getSeconds()):t.setHours(c.getHours(),c.getMinutes(),c.getSeconds())}n?(this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t):(k=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:i(t,1),this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.options.currentView?this.calculateIntervalTime(k):k)},u.prototype.getTopBottomStyles=function(n,t){var f=this.parent.element.querySelector(".e-content-wrap"),u=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,i=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),r=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return i=r<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:i,r=r<0?0:r,i=(r=Math.floor(r/u)*u)+i>=f.scrollHeight?f.scrollHeight-r:Math.ceil(i/u)*u,{height:sf.base.formatUnit(i<this.actionObj.cellHeight?this.actionObj.cellHeight:i),top:sf.base.formatUnit(i<this.actionObj.cellHeight&&t?this.actionObj.clone.offsetTop:r),left:"0px",right:"0px",width:"100%"}},u.prototype.getLeftRightStyles=function(n,t){var s={},f=this.parent.isTimelineView(),c=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,u=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,l=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,h=f?this.actionObj.element.offsetWidth/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.offsetWidth:Math.ceil(this.actionObj.element.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth,e=h+Math.ceil(l/this.actionObj.cellWidth)*this.actionObj.cellWidth,a=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft,o,r,i,v,y;return c&&(e=h+Math.ceil(l/u)*u,e=Math.ceil((a+e)/u)*u-a,this.actionObj.event.isAllDay=!1),o=!t&&e+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.offsetWidth:e<this.actionObj.cellWidth?this.actionObj.cellWidth:e,this.parent.options.enableRtl?(r=f?parseInt(this.actionObj.element.style.right,10):-(e-this.actionObj.cellWidth),r=f?r:t||r>0?0:r,f&&!t&&(r=(r=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.offsetWidth+(this.actionObj.pageX-this.actionObj.X)))/u)*u)<0?Math.abs(r):-r),r=r>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:r,s.right=sf.base.formatUnit(r),o=o+r>this.scrollArgs.width?this.actionObj.clone.offsetWidth:o):(i=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0,f&&(i=t?i:parseInt(this.actionObj.clone.style.left,10),i=this.parent.options.enableRtl?t?i:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.offsetWidth?parseInt(this.actionObj.clone.style.right,10):i:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.offsetWidth&&this.actionObj.clone.offsetWidth===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):i),v=i,(i=f?c?t?Math.floor(i/u)*u:i:Math.floor(i/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(i)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(i=0,o=this.actionObj.clone.offsetWidth),y=Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth,t&&(s.left=sf.base.formatUnit(f?i:t?v<0?-i:Math.ceil((h-y)/this.actionObj.cellWidth)*this.actionObj.cellWidth:i))),s.width=sf.base.formatUnit(o),s},u.prototype.resizeValidation=function(n){var r=this.getPageCoordinates(n),i=this.getContentAreaDimension(),t=!1;return this.resizeEdges.left&&(t=r.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(t=r.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(t=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(t=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),t},u}(pt),yi=(et=function(n,t){return(et=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}et(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),pi=function(r){function u(){var n=null!==r&&r.apply(this,arguments)||this;return n.widthUptoCursorPoint=0,n.heightUptoCursorPoint=0,n.cursorPointIndex=0,n.isHeaderRows=!1,n.isTimelineDayProcess=!1,n.widthPerMinute=0,n.heightPerMinute=0,n.minDiff=0,n.isStepDragging=!1,n.isMorePopupOpened=!1,n.isAllDayDrag=!1,n.isMultiSelect=!1,n.multiData=[],n.updatedData=[],n.swagData=[],n.startTime=0,n.isAllDayTarget=!1,n.targetTd=null,n.cloneElements=[],n}return yi(u,r),u.prototype.wireDragEvent=function(n){n.ej2_instances&&[].slice.call(n.ej2_instances).forEach(function(n){return n.destroy()});var t=new sf.base.Draggable(n,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)});t.enableTapHold&&sf.base.Browser.isDevice&&sf.base.Browser.isTouch||sf.base.EventHandler.remove(n,"touchstart",t.initialize)},u.prototype.dragHelper=function(n){var t=this,i;return this.setDragActionDefaultValues(),this.actionObj.element=n.element,this.actionObj.action="drag",i=[],!this.parent.options.allowMultiDrag||sf.base.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?i=[n.element]:(i=this.parent.selectedElements,this.isMultiSelect=!0),i.forEach(function(n){var i=t.createCloneElement(n);n.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=i,t.parent.options.eventDragArea||"Month"===t.parent.options.currentView||!t.parent.activeViewOptions.timeScale.enable||t.parent.isTimelineView()||t.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=sf.base.formatUnit(t.actionObj.element.offsetTop));t.actionObj.cloneElement.push(i);t.cloneElements.push(i);t.actionObj.originalElement.push(n)}),this.actionObj.clone},u.prototype.dragPosition=function(n){var t,r,u,i,f,e;return this.parent.options.eventDragArea?{left:n.left,top:n.top}:(r=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,u=sf.base.formatUnit(0),((this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(u=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))?t=sf.base.formatUnit(this.actionObj.clone.offsetTop):this.actionObj.clone.classList.contains("e-all-day-appointment")?(t=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)})):(this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"}),i=parseInt(n.top,10),i=i<0?0:i,t=sf.base.formatUnit(Math.ceil(i/r)*r),f=this.parent.element.querySelector(".e-content-wrap").scrollHeight,e=parseInt(t,10)+this.actionObj.clone.offsetHeight,e>f&&(t=parseInt(t,10)-(e-f)+"px")),{left:u,top:t})},u.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag";this.actionObj.isAllDay=null;this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount;this.actionObj.interval=this.actionObj.slotInterval;var n=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=n.offsetWidth;this.actionObj.cellHeight=n.offsetHeight},u.prototype.dragStart=function(i){var r=this,u=[],h=this.actionObj.element.getAttribute("data-guid"),f,e;this.isMultiSelect&&this.parent.selectedElements.forEach(function(n){var t=n.getAttribute("data-guid");-1===u.indexOf(t)&&u.push(t)});f={cancel:!1,excludeSelectors:null,interval:this.actionObj.interval,navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100}};e=JSON.stringify(f);this.parent.uiStateValues.action=!0;this.parent.dotNetRef.invokeMethodAsync("OnDragStart",e,h,u).then(function(u){var e=u.dragEventArgs,h,l,c,f,a;if(r.actionObj.isAllDay=u.isAllDay,r.actionObj.event=sf.base.extend({},u,null,!0),delete r.actionObj.event.dragEventArgs,r.actionObj.event.startTime=new Date(r.actionObj.event.startTime),r.actionObj.event.endTime=new Date(r.actionObj.event.endTime),h=sf.base.extend({},r.actionObj.event,null,!0),e.cancel||!sf.base.isNullOrUndefined(r.actionObj.element)&&sf.base.isNullOrUndefined(r.actionObj.element.parentElement))return l=r.actionObj.element.ej2_instances[0],sf.base.isNullOrUndefined(l)||l.intDestroy(i.event),r.actionObj.action="",r.removeCloneElementClasses(),r.removeCloneElement(),void(r.parent.uiStateValues.action=!1);i.bindEvents(i.dragElement);r.actionClass("addClass");r.isMultiSelect&&!sf.base.isNullOrUndefined(u.selectedData)&&(delete r.actionObj.event.selectedData,delete h.selectedData,r.startTime=h.startTime.getTime(),r.getSelectedData(u.selectedData));r.parent.uiStateValues.action=!0;r.actionObj.start=h.startTime;r.actionObj.end=h.endTime;r.actionObj.groupIndex=parseInt(r.actionObj.element.getAttribute("data-group-index")||"0",10);r.actionObj.interval=e.interval;r.actionObj.navigation=e.navigation;r.actionObj.scroll=e.scroll;r.actionObj.excludeSelectors=e.excludeSelectors;c=r.parent.element.querySelector(".e-content-wrap");(r.scrollArgs={element:c,width:c.scrollWidth,height:c.scrollHeight},r.widthPerMinute=r.actionObj.cellWidth/r.actionObj.slotInterval*r.actionObj.interval,r.heightPerMinute=r.actionObj.cellHeight/r.actionObj.slotInterval*r.actionObj.interval,r.widthUptoCursorPoint=0,r.heightUptoCursorPoint=0,r.cursorPointIndex=-1,r.isHeaderRows=!1,r.isTimelineDayProcess=!1,r.minDiff=0,r.isMorePopupOpened=!1,r.daysVariation=-1,r.isAllDayTarget=r.actionObj.clone.classList.contains("e-all-day-appointment"),r.parent.isTimelineView()||!r.parent.activeViewOptions.timeScale.enable)&&(!sf.base.isNullOrUndefined(r.actionObj.clone.offsetParent)&&r.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(r.isMorePopupOpened=!0),f=r.parent.activeViewOptions.headerRows,r.isHeaderRows=f.length>0&&"Hour"!==f[f.length-1].option&&"Date"!==f[f.length-1].option,r.isTimelineDayProcess=!r.parent.activeViewOptions.timeScale.enable||r.isHeaderRows||"TimelineMonth"===r.parent.options.currentView||f.length>0&&"Date"===f[f.length-1].option,r.isStepDragging=!r.isTimelineDayProcess&&r.actionObj.slotInterval!==r.actionObj.interval,r.timelineEventModule=r.isTimelineDayProcess?new s(r.parent,"day"):new s(r.parent,"hour"));"Month"!==r.parent.options.currentView&&"TimelineYear"!==r.parent.options.currentView&&(r.parent.isTimelineView()||r.parent.activeViewOptions.timeScale.enable)||(r.startTime=n(new Date(r.startTime)).getTime(),r.updateOriginalElement(r.actionObj.clone),a=r.actionObj.clone.querySelector(".e-appointment-details"),r.cloneEventDetail=a||r.actionObj.clone.querySelector(".e-subject"),r.monthEvent=new o(r.parent));"Day"!==r.parent.options.currentView&&"Week"!==r.parent.options.currentView&&"WorkWeek"!==r.parent.options.currentView||(r.verticalEvent=new ot(r.parent),r.splitEvent(r.actionObj.event).forEach(function(i){var u='.e-day-wrapper[data-date="'+t(n(i.startTime)).getTime()+'"]',f,e;r.parent.activeViewOptions.group.resources.length>0&&(u=u.concat('[data-group-index = "'+r.actionObj.groupIndex+'"]'));f=r.parent.element.querySelector(u);f&&(e=f.querySelector('[data-guid="'+r.actionObj.clone.getAttribute("data-guid")+'"]'),e&&sf.base.addClass([e],"e-event-action"))}))})},u.prototype.getSelectedData=function(n){var t=this;n.forEach(function(n){n.startTime=new Date(n.startTime);n.endTime=new Date(n.endTime);t.multiData.push(n)})},u.prototype.drag=function(t){var i,r,f,e,o,u,s;(this.parent.onQuickPopupClose(this.isMultiSelect),sf.base.isNullOrUndefined(t.target)||!t.target.classList.contains("e-disable-dates"))&&(i=sf.base.extend({},this.actionObj.event,null,!0),r=this.getPageCoordinates(t),(this.actionObj.Y=this.actionObj.pageY=r.pageY,this.actionObj.X=this.actionObj.pageX=r.pageX,this.actionObj.target=t.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(i),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0)?(f=this.parent.getDateFromElement(this.actionObj.target),sf.base.isNullOrUndefined(f)?this.daysVariation=0:(e=n(f),o=n(i.startTime),this.daysVariation=(e.getTime()-o.getTime())/864e5)):this.daysVariation=0,this.parent.options.eventDragArea&&(u=r.target,this.actionObj.clone.style.top=sf.base.formatUnit(u.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(u.offsetLeft),sf.base.closest(u,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")),this.updateScrollPosition(),this.updateNavigatingPosition(t),this.updateDraggingDateTime(t),s={data:i,event:t,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end},this.parent.activeViewOptions.group.resources.length>0&&(s.groupIndex=this.actionObj.groupIndex))},u.prototype.calculateMinutesDiff=function(n){this.minDiff=this.parent.options.enableRtl?(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=n.startTime,i=f(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},u.prototype.dragStop=function(n){var u;if(this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(n)){var f=this.actionObj.element.getAttribute("data-guid"),e=t(this.actionObj.start),o=t(this.actionObj.end),r=[];this.updatedData.length>0&&this.updatedData.forEach(function(n){r.push({startTime:t(n.startTime),endTime:t(n.endTime),isAllDay:n.isAllDay,guid:n.guid})});var s=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,h=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,i=[];this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit&&(-1===(i=this.getOriginalElement(this.actionObj.element).map(function(n){return parseInt(n.getAttribute("data-group-index"),10)})).indexOf(this.actionObj.groupIndex)?(u=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10),(i=i.filter(function(n){return n!==u})).push(this.actionObj.groupIndex)):i=[]);this.parent.dotNetRef.invokeMethodAsync("OnDragStop",e,o,f,h,s,this.actionObj.isAllDay,i,r);this.updatedData=[];this.multiData=[];this.isMultiSelect=!1;this.parent.selectedElements=[];this.cloneElements=[]}},u.prototype.updateNavigatingPosition=function(n){var t=this,i;this.actionObj.navigation.enable&&(i=this.parent.getCurrentTime(),sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval(function(){if(i){var u=t.parent.getCurrentTime().getSeconds(),r=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(r=r>=60?r-60:r)===u&&(i=t.parent.getCurrentTime(),t.viewNavigation(),t.updateDraggingDateTime(n))}},this.actionObj.navigation.timeDelay)))},u.prototype.updateDraggingDateTime=function(n){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(n):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(n)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(n):this.calculateVerticalTime(n)},u.prototype.navigationWrapper=function(){var u,n,f,i,e,r,o,s,t;if(this.parent.isTimelineView())u=void 0,n=(u=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper"),n||(n=sf.base.createElement("div",{className:"e-appointment-wrapper"}),u.appendChild(n)),n.appendChild(this.actionObj.clone);else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){if(f=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper",this.parent.element.querySelectorAll(f).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===f){if(i=this.getAllDayEventHeight(),e=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child")),e[0].offsetHeight<i)for(r=0,o=e;r<o.length;r++)o[r].style.height=(i+2)/12+"em";this.actionObj.clone.style.height=sf.base.formatUnit(i)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index,t=s[this.actionObj.index].querySelector(".e-appointment-wrapper"),t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s[this.actionObj.index].appendChild(t)),t.appendChild(this.actionObj.clone)},u.prototype.viewNavigation=function(){var t,n=this.parent.element.querySelector(".e-content-wrap");n&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===n.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(n.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?t=this.parent.options.enableRtl?"Next":"Previous":Math.round(n.scrollLeft)+n.clientWidth===n.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(n.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(t=this.parent.options.enableRtl?"Previous":"Next"),t&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",t))},u.prototype.morePopupEventDragging=function(n){var i,r,o;if(!(sf.base.isNullOrUndefined(n.target)||n.target&&sf.base.isNullOrUndefined(sf.base.closest(n.target,"td")))){var u=sf.base.extend({},this.actionObj.event,null,!0),s=u.endTime.getTime()-u.startTime.getTime(),t=sf.base.closest(n.target,"td"),f=this.parent.getDateFromElement(t),e=new Date(f.getTime());e.setMilliseconds(s);this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(t.getAttribute("data-group-index"),10));this.actionObj.start=new Date(f.getTime());this.actionObj.end=new Date(e.getTime());this.actionObj.clone.style.top=sf.base.formatUnit(t.offsetParent.offsetTop);this.actionObj.clone.style.left=sf.base.formatUnit(t.offsetLeft);this.actionObj.clone.style.width=sf.base.formatUnit(t.offsetWidth);r=t;"TimelineYear"!==this.parent.options.currentView&&this.parent.isTimelineView()&&(o=sf.base.closest(t,"tr").rowIndex,r=this.parent.element.querySelectorAll(".e-appointment-container").item(o));(i=r.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),r.appendChild(i));this.appendCloneElement(i)}},u.prototype.calculateVerticalTime=function(t){var a=this,o,f,e,h,c,b,k,it,rt,r,l;if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(t);var v=this.parent.element.querySelector(".e-content-wrap"),d=sf.base.extend({},this.actionObj.event,null,!0),s=d.startTime,g=d.endTime.getTime()-s.getTime(),u=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;u=u<0?0:u;(this.scrollEdges.top||this.scrollEdges.bottom)&&(u=this.scrollEdges.top?v.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:v.scrollTop+v.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),u=Math.round(u/this.actionObj.cellHeight)*this.actionObj.cellHeight,this.actionObj.clone.style.top=sf.base.formatUnit(u));var y,p,ut=u/this.actionObj.cellHeight,ft=this.actionObj.cellHeight/this.actionObj.slotInterval,et=parseInt(this.actionObj.clone.style.top,10)-u;if(y=this.isAllDayDrag?this.parent.element.querySelector(".e-all-day-row"):[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[ut],(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))&&(p=sf.base.closest(this.actionObj.target,"td").cellIndex),o=sf.base.isNullOrUndefined(p)?sf.base.closest(this.actionObj.clone,"td").cellIndex:p,this.actionObj.index=o,!sf.base.isNullOrUndefined(y)){h=y.children[o];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(h.getAttribute("data-group-index"),10));this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(o)),(f=this.parent.getDateFromElement(h)).setMinutes(f.getMinutes()+et/ft),e=new Date(f.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?e.setMinutes(e.getMinutes()+this.actionObj.slotInterval):e.setMilliseconds(g)):((f=this.parent.getDateFromElement(h)).setDate(f.getDate()-this.daysVariation),f.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),(e=new Date(f.getTime())).setMilliseconds(g),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(e=i(n(e),1)),this.updateAllDayEvents(f,e,this.parent.activeViewOptions.group.byDate?o:void 0));this.actionObj.start=new Date(+f);this.actionObj.end=new Date(+e);for(var nt=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),w=0,tt=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));w<tt.length;w++)c=tt[w],sf.base.remove(c);if(this.multiData.length>0)for(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay&&(b=new Date(parseInt(sf.base.closest(this.actionObj.target,"td").getAttribute("data-date"),10)),k=new Date(+b+6e4*b.getTimezoneOffset()).getTime(),this.multiData.forEach(function(n){if(a.swagData.push(sf.base.extend({},n,null,!0)),n.isAllDay){n.startTime=new Date(n.startTime.getTime()+(k-a.startTime));var t=new Date(n.startTime),i=new Date(t.setMinutes(t.getMinutes()+a.actionObj.slotInterval));n.endTime=i;n.isAllDay=!1}}),this.startTime=k),this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0&&(this.multiData=this.swagData,this.swagData=[],it=sf.base.extend({},this.actionObj.event,null,!0),this.startTime=it.startTime.getTime()),rt=nt.startTime.getTime()-this.startTime,r=0;r<this.multiData.length;r++)this.updatedData[r]=this.updateMultipleData(this.multiData[r],rt),l=this.getDayIndex(this.updatedData[r]),l>=0?(c=this.getEventWrapper(l,this.updatedData[r].isAllDay),this.appendCloneElement(c,this.actionObj.cloneElement[r]),this.updateEventHeight(this.updatedData[r],r,l)):sf.base.isNullOrUndefined(this.actionObj.cloneElement[r].parentNode)||sf.base.remove(this.actionObj.cloneElement[r]);else this.updateEventHeight(nt);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},u.prototype.updateMultipleData=function(t,r){var u=sf.base.extend({},t,null,!0),f;if(!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&u.isAllDay||!this.isAllDayTarget&&!u.isAllDay)&&(u.isAllDay=this.actionObj.isAllDay),f=u.endTime.getTime()-u.startTime.getTime(),u.isAllDay){var o=Math.ceil(r/864e5),s=Math.ceil(f/864e5),e=new Date(u.startTime);u.startTime=n(new Date(e.setDate(e.getDate()+o)));u.endTime=i(u.startTime,s)}else u.startTime=new Date(u.startTime.getTime()+r),u.endTime=new Date(u.startTime.getTime()+f);return u},u.prototype.getDayIndex=function(n){var i=sf.base.extend({},n,null,!0),r=this.parent.getMsFromDate(i.startTime),t="";return t="."+(this.parent.activeViewOptions.timeScale.enable&&i.isAllDay?"e-all-day-appointment-wrapper":"e-work-cells")+'[data-date="'+r+'"]',this.parent.activeViewOptions.group.resources.length>0&&(t=t+'[data-group-index="'+this.actionObj.groupIndex+'"]'),this.targetTd=this.parent.element.querySelector(t),sf.base.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},u.prototype.splitEvent=function(t){var i=[],u=t.startTime,e=t.endTime,r;if(n(new Date(u.getTime()))<n(new Date(e.getTime()))){var o=this.parent.activeView.getStartHour(),s=this.parent.activeView.getEndHour(),c=f(n(u),o,s),l=f(n(e),o,s),h=sf.base.extend({},t,null,!0);h.endTime=c.endHour;i.push(h);r=sf.base.extend({},t,null,!0);r.startTime=l.startHour;i.push(r)}else i.push(t);return i},u.prototype.updateEventHeight=function(i,r){var s,a,v,b,y;this.verticalEvent.initializeValues();for(var k=n(sf.base.extend({},i,null,!0).startTime),c=-1,o=this.parent.getIndexOfDate(this.parent.activeView.renderDates,k),p=this.splitEvent(i),d=(i.endTime.getTime()-i.startTime.getTime())/864e5>=1,l=i.isAllDay||d||p.length>2?[i]:p,u=0;u<l.length;u++)if(u>0&&(s='.e-day-wrapper[data-date="'+t(n(l[u].startTime)).getTime()+'"]',this.parent.activeViewOptions.group.resources.length>0&&(s=s.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]')),a=this.parent.element.querySelector(s),a?(o+=1,c=a.cellIndex):o=-1),o>=0){var h=l[u],w=h.startTime,g=h.endTime,f=0,e=this.verticalEvent.getHeight(w,g);(f=this.verticalEvent.getTopValue(w,o),sf.base.isNullOrUndefined(r))?0===u?(this.actionObj.clone.style.top=sf.base.formatUnit(f),this.actionObj.clone.style.height=sf.base.formatUnit(e)):this.renderSpannedEvents(h,c,f,e):(v=this.actionObj.cellWidth,i.isAllDay&&(f=this.parent.element.querySelector(".e-all-day-row").offsetTop,e=this.getAllDayEventHeight(),b=i.endTime.getTime()-i.startTime.getTime(),y=Math.ceil(b/864e5),y>=0&&(v=y*this.actionObj.cellWidth)),this.actionObj.cloneElement[r]&&(0===u?(this.actionObj.cloneElement[r].style.top=sf.base.formatUnit(f),this.actionObj.cloneElement[r].style.height=sf.base.formatUnit(e),this.actionObj.cloneElement[r].style.width=sf.base.formatUnit(v),this.actionObj.cloneElement[r].style.left=sf.base.formatUnit(0)):this.renderSpannedEvents(h,c,f,e)))}},u.prototype.renderSpannedEvents=function(n,t,i,r){var u,f;n.startTime.getTime()!==n.endTime.getTime()&&(u=this.createAppointmentElement(event,this.actionObj.groupIndex),sf.base.addClass([u],["e-schedule-event-clone","e-dynamic-clone"]),sf.base.setStyleAttribute(u,{width:"100%",height:r+"px",top:i+"px",border:"0px"}),f=this.actionObj.clone,""!==f.style.backgroundColor&&sf.base.setStyleAttribute(u,{backgroundColor:f.style.backgroundColor}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[t].appendChild(u))},u.prototype.isSpannedEvent=function(n,t){var r=f(t,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),i=sf.base.extend({},n,null,!0);return i.isSpanned={isBottom:!1,isTop:!1},n.startTime.getTime()<r.startHour.getTime()&&(i.startTime=r.startHour,i.isSpanned.isTop=!0),n.endTime.getTime()>r.endHour.getTime()&&(i.endTime=r.endHour,i.isSpanned.isBottom=!0),i},u.prototype.updateAllDayEvents=function(n,t,i){var o,u,f,r,e,s;this.parent.eventBase.slots=[];o=this.getUpdatedEvent(n,t,this.actionObj.event);u=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map(function(n){return+n}));this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(u.map(function(n){return+n})));f=this.parent.eventBase.splitEvent(o,u);r='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(f[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(r=r.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));e=[].slice.call(this.parent.element.querySelectorAll(r));(e.length>0||!sf.base.isNullOrUndefined(i))&&(s=sf.base.isNullOrUndefined(i)?e[0].cellIndex:i,this.appendCloneElement(this.getEventWrapper(s)),this.actionObj.clone.style.width=sf.base.formatUnit(f[0].data.count*this.actionObj.cellWidth))},u.prototype.swapDragging=function(){var u=sf.base.closest(this.actionObj.target,"td").cellIndex,n,i,t,r,f;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){if(sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(u)),this.actionObj.isAllDay=!0,n=this.getAllDayEventHeight(),i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child")),i[0].offsetHeight<n)for(t=0,r=i;t<r.length;t++)r[t].style.height=(n+2)/12+"em";sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(n),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")&&(sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(u)),this.actionObj.isAllDay=!1,f=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight,sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(f),width:sf.base.formatUnit(this.actionObj.cellWidth)}))},u.prototype.calculateVerticalDate=function(t){var w=this,h,o,p,s;if(!(sf.base.isNullOrUndefined(t.target)||t.target&&sf.base.isNullOrUndefined(sf.base.closest(t.target,"tr"))||t.target&&"DIV"===t.target.tagName)){this.removeCloneElement();var e=sf.base.extend({},this.actionObj.event,null,!0),b=e.endTime.getTime()-e.startTime.getTime(),r=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(r)){if(h=r.parentElement,this.actionObj.index=h.rowIndex*h.children.length+r.cellIndex,r=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index],sf.base.isNullOrUndefined(r))return;if(o=this.parent.getDateFromElement(r),!sf.base.isNullOrUndefined(o)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(r.getAttribute("data-group-index"),10));var k=new Date(o.setDate(o.getDate()-this.daysVariation)),f=new Date(k.getTime()),v=new Date(f.getTime()),u=e.startTime.getTime()-n(e.startTime).getTime();f=new Date(f.getTime()+u);v=new Date(f.getTime()+b);this.actionObj.start=new Date(f.getTime());this.actionObj.end=new Date(v.getTime())}}for(var c=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),l=0,y=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));l<y.length;l++)p=y[l],sf.base.remove(p);if(this.multiData&&this.multiData.length>0){s=n(new Date(c.startTime));u=s.getTime()-this.startTime;"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0&&(u=12*(s.getFullYear()-new Date(this.startTime).getFullYear()),u-=new Date(this.startTime).getMonth(),u+=s.getMonth());for(var d=function(n){i.updatedData[n]=i.updateMultipleVerticalDate(i.multiData[n],u);var t=i.cloneElements.find(function(t){return t.getAttribute("data-guid")===w.updatedData[n].guid});"TimelineYear"===i.parent.options.currentView?i.dynamicYearlyEventsRendering(i.updatedData[n],!1,t):i.dynamicEventsRendering(i.updatedData[n],t)},i=this,a=0;a<this.multiData.length;a++)d(a)}else"TimelineYear"===this.parent.options.currentView?this.dynamicYearlyEventsRendering(c):this.dynamicEventsRendering(c)}},u.prototype.updateMultipleVerticalDate=function(n,t){var i=sf.base.extend({},n,null,!0),f=i.endTime.getTime()-i.startTime.getTime(),r=new Date(i.startTime),u;return"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0?i.startTime=new Date(r.setMonth(r.getMonth()+t)):(u=Math.ceil(t/864e5),i.startTime=new Date(r.setDate(r.getDate()+u))),i.endTime=new Date(i.startTime.getTime()+f),i},u.prototype.calculateTimelineTime=function(t){var b,u=sf.base.extend({},this.actionObj.event,null,!0),st=u.endTime.getTime()-u.startTime.getTime(),f=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10),tt,a,v,r,i,k,it,y,d,p,o,rt,s,h,c,nt,l,et,ot;if(f=Math.floor(f/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(b=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(b)),f=this.getOffsetValue(f,b),tt=this.getColumnIndex(f),a=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth),this.parent.options.enableRtl&&(a=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(t,u,f,a),v=this.parent.getContentTable().querySelector("tr"),r=this.getCursorCurrentIndex(tt,a,v),r=r<0?0:r,i=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[r].getTime()):this.parent.getDateFromElement(v.children[r]),this.isStepDragging?(k=this.getWidthDiff(v,r),0!==k?(it=Math.round(k/this.widthPerMinute),i.setMinutes(i.getMinutes()+it*this.actionObj.interval),i.setMinutes(i.getMinutes()-this.minDiff)):i=this.actionObj.start):i.setMinutes(i.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval)),(i=this.calculateIntervalTime(i),this.isTimelineDayProcess)&&(y=u.startTime,i.setHours(y.getHours(),y.getMinutes(),y.getSeconds())),this.parent.options.eventDragArea&&(d=this.parent.getDateFromElement(t.target),sf.base.isNullOrUndefined(d)||(i=d)),p=new Date(i.getTime()),p.setMilliseconds(st),o=[this.getUpdatedEvent(i,p,this.actionObj.event)],this.multiData.length>0){for(rt=o[0].startTime.getTime()-this.startTime,s=0;s<this.multiData.length;s++)this.updatedData[s]=this.updateMultipleData(this.multiData[s],rt);o=this.updatedData}for(h=0;h<o.length;h++){if(c=this.timelineEventModule.splitEvent(o[h],this.timelineEventModule.dateRender),0===c.length)return;var g=c[0].data,e=this.getStartTime(c[0],g),ut=this.getEndTime(c[0],g),ft=this.timelineEventModule.getEventWidth(e,ut,u.isAllDay,g.count),w=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,n(new Date(e.getTime())));w=w<0?0:w;nt=this.timelineEventModule.getPosition(e,ut,u.isAllDay,w);l=this.multiData.length>0?this.actionObj.cloneElement[h]:this.actionObj.clone;"TimelineMonth"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable||(e=n(e),et='.e-work-cells[data-date="'+this.parent.getMsFromDate(e)+'"]',ot=this.parent.element.querySelector(et),sf.base.isNullOrUndefined(ot)&&(ft=0));this.parent.options.enableRtl?l.style.right=sf.base.formatUnit(nt):l.style.left=sf.base.formatUnit(nt);this.isMorePopupOpened||(l.style.width=sf.base.formatUnit(ft));this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(t,l);this.actionObj.start=new Date(i.getTime());this.actionObj.end=new Date(p.getTime());this.updateTimePosition(this.actionObj.start,this.updatedData)}},u.prototype.getStartTime=function(n,t){var r=n.startTime,i=f(r,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return r=i.startHour.getTime()>=t.startTime?i.startHour:i.endHour.getTime()<=t.startTime?this.getNextDay(i.startHour,t):t.startTime,t.trimStartTime=n.isAllDay?i.startHour:t.startTime,r},u.prototype.getNextDay=function(t,r){for(var u,f=1;f<=this.timelineEventModule.dateRender.length;f++)if(u=i(t,f),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,n(new Date(t.getTime()))))return r.count=r.count-1,u;return u},u.prototype.getEndTime=function(n,t){var i=n.endTime,r=f(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return"TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?i=t.endTime:(i=t.endTime,r.endHour.getTime()<=t.endTime&&(i=r.endHour),r.startHour.getTime()>=t.endTime.getTime()&&!n.isAllDay&&(i=this.getPreviousDay(r.startHour,r.endHour,t))),t.trimEndTime=n.isAllDay?r.endHour:t.endTime,i},u.prototype.getPreviousDay=function(t,r,u){for(var e,o,s,f=1;f<=this.timelineEventModule.dateRender.length;f++)if(e=i(r,-f),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,n(new Date(t.getTime()))))return(e=n(new Date(e.getTime()))).setHours(r.getHours(),r.getMinutes(),r.getSeconds()),o=u.count,s=u.endTime,u.count=0!==s.getHours()||0!==s.getMinutes()?o-1:o,e;return u.endTime},u.prototype.getOffsetValue=function(n,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(n=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(n=i.scrollLeft)):n=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),n=n<0?0:n,this.actionObj.clone.style.left=sf.base.formatUnit(n))}return n},u.prototype.getWidthDiff=function(n,t){var i=this.scrollArgs.element.getBoundingClientRect(),r,u;return i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX?(r=n.children[t].offsetLeft,u=this.actionObj.pageX-i.left,this.parent.options.enableRtl?r+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+u):this.scrollArgs.element.scrollLeft+u-r):0},u.prototype.getColumnIndex=function(n){var t=Math.floor(n/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},u.prototype.getCursorCurrentIndex=function(n,t,i){var r=n+t,u;return this.isHeaderRows?(u=Math.floor(i.offsetWidth/this.actionObj.cellWidth),r>u-1?u-1:r):r>i.children.length-1?i.children.length-1:r},u.prototype.cursorIndex=function(n,t,i,r){var e=sf.base.closest(n.target,".e-work-cells"),u,o,f,s;sf.base.isNullOrUndefined(e)||this.isMorePopupOpened?this.cursorPointIndex=0:(u=this.parent.getDateFromElement(e),this.isHeaderRows&&(o=Math.floor(i/this.actionObj.cellWidth),u=new Date(this.timelineEventModule.dateRender[o+r].getTime())),f=u.getTime()-new Date(t.startTime).getTime(),this.isTimelineDayProcess?this.cursorPointIndex=Math.abs(Math.ceil(f/864e5)):(s=Math.floor(f/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth)),this.cursorPointIndex=Math.floor(s/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex))},u.prototype.calculateResourceGroupingPosition=function(n,t){var f=this.parent.element.querySelector(".e-content-wrap"),e=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),o=ht(f.querySelector("table")),l,i,c,u,s,h,r;o=sf.base.isNullOrUndefined(o)?0:o;l=this.parent.options.rowAutoHeight?~~(f.querySelector("table").offsetHeight/e.length):this.actionObj.cellHeight;i=Math.floor(Math.floor(this.actionObj.Y+(f.scrollTop-o-window.scrollY)-f.getBoundingClientRect().top)/l);i=i<0?0:i>e.length-1?e.length-1:i;this.actionObj.index=i;c=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(i);u=c.querySelector(".e-appointment-wrapper");u||(u=sf.base.createElement("div",{className:"e-appointment-wrapper"}),c.appendChild(u));this.appendCloneElement(u,t);s=sf.base.closest(n.target,"td");this.actionObj.groupIndex=s&&!isNaN(parseInt(s.getAttribute("data-group-index"),10))?parseInt(s.getAttribute("data-group-index"),10):this.actionObj.groupIndex;h=e[i].offsetTop;this.parent.options.rowAutoHeight&&(r=this.getCursorElement(n),r&&(h=r.classList.contains("e-work-cells")?r.offsetTop:r.offsetParent.classList.contains("e-appointment")?r.offsetParent.offsetTop:h));t.style.top=sf.base.formatUnit(h)},u.prototype.appendCloneElement=function(n,t){void 0===t&&(t=null);t=sf.base.isNullOrUndefined(t)?this.actionObj.clone:t;this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(t):n.appendChild(t)},u.prototype.getEventWrapper=function(n,t){var i,u,r;return(sf.base.isNullOrUndefined(t)&&(t=this.actionObj.clone.classList.contains("e-all-day-appointment")),this.parent.activeViewOptions.timeScale.enable)?(u=t?".e-all-day-appointment-wrapper":".e-appointment-wrapper",i=this.parent.element.querySelectorAll(u).item(n)):(r=this.parent.element.querySelectorAll(".e-work-cells").item(n),(i=r.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),r.appendChild(i))),i},u.prototype.getAllDayEventHeight=function(){var n=sf.base.createElement("div",{className:"e-appointment"}),t;return this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(n),t=n.offsetHeight,sf.base.remove(n),t},u.prototype.isAllowDrop=function(n){var u;if(!this.actionObj.excludeSelectors)return!1;for(var i=!1,t=0,r=this.actionObj.excludeSelectors.split(",");t<r.length;t++)if(u=r[t],n.target.classList.contains(u)){i=!0;break}return i},u}(pt),wi=function(){function n(n){this.translateY=0;this.itemSize=60;this.bufferCount=3;this.renderedLength=0;this.averageRowHeight=0;this.startIndex=0;this.isResourceCell=!1;this.previousTop=0;this.isInitialized=!0;this.parent=n}return n.prototype.getRenderedCount=function(){var n=this.parent.element.querySelector(".e-content-table");return this.renderedLength=n.querySelector("tbody").children.length,this.renderedLength},n.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},n.prototype.setTranslateValue=function(){var n=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),r=this.parent.element.querySelector(".e-current-timeline");this.setItemSize();this.setVirtualTrackHeight(n);this.setTranslate(n,t,i,r);t.scrollTop=n.scrollTop},n.prototype.setVirtualTrackHeight=function(n){var t=this.parent.element.querySelector(".e-virtual-track"),i;t&&(i=parseInt(n.getAttribute("data-expanded-count"),10),t.style.height=i*this.itemSize+"px")},n.prototype.updateVirtualScrollHeight=function(){var i=this.parent.element.querySelector(".e-virtual-track"),n=this.parent.element.querySelector(".e-resource-column-wrap"),r=(parseInt(n.getAttribute("data-rendered-index"),10),parseInt(n.getAttribute("data-expanded-index"),10),parseInt(n.getAttribute("data-expanded-count"),10)),t=this.parent.element.querySelector(".e-content-table");this.renderedLength=t.querySelector("tbody").children.length;i.style.height=t.offsetHeight+(r-this.renderedLength)*t.offsetHeight/this.renderedLength+"px";this.averageRowHeight=i.offsetHeight/r},n.prototype.updateVirtualTrackHeight=function(n){var i=this.parent.element.querySelector(".e-resource-column-wrap"),u=parseInt(i.getAttribute("data-rendered-index"),10),f=parseInt(i.getAttribute("data-expanded-index"),10),t=this.getRenderedCount()+(f-u),r=parseInt(i.getAttribute("data-expanded-count"),10);t=t>r?r:t;n.style.height=t*this.itemSize+"px"},n.prototype.setItemSize=function(){this.itemSize=e(this.parent.activeView.element,"e-work-cells")||this.itemSize},n.prototype.beforeInvoke=function(n,t,i,r){var u=this;window.clearTimeout(this.timeValue);this.timeValue=window.setTimeout(function(){u.triggerScrolling()},250);this.updateContent();document.activeElement&&document.activeElement.classList.contains("e-resource-cells")&&(this.isResourceCell=!0,this.parent.element.focus());this.setTranslate(n,t,i,r);this.previousTop=t.scrollTop},n.prototype.virtualScrolling=function(){var u,f;this.parent.quickPopup&&this.parent.quickPopup.hide();this.parent.morePopup&&this.parent.morePopup.hide();var t=this.parent.element.querySelector(".e-resource-column-wrap"),n=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),r=this.parent.element.querySelector(".e-current-timeline"),e=this.parent.element.querySelector(".e-content-table");this.renderedLength=t.querySelector("tbody").children.length;u=parseInt(t.querySelector("tbody td").getAttribute("data-group-index"),10);f=this.parent.options.rowAutoHeight?e.offsetHeight-n.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([n],"e-transition");this.setItemSize();n.scrollTop-this.translateY<=0&&!this.isInitialized?(this.upScroll(n,u),this.beforeInvoke(t,n,i,r)):n.scrollTop-this.translateY>f&&(this.downScroll(n),this.previousTop!==n.scrollTop&&this.beforeInvoke(t,n,i,r));this.isInitialized=!1},n.prototype.upScroll=function(n,t){var i=~~(n.scrollTop/this.itemSize),r;(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)?this.translateY=n.scrollTop:(r=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,this.translateY=n.scrollTop-this.bufferCount*r>0?n.scrollTop-this.bufferCount*r:0);this.startIndex=i},n.prototype.downScroll=function(n){var u=this.parent.element.querySelector(".e-resource-column-wrap");if(u.getAttribute("data-rendered-index")===u.getAttribute("data-expanded-index"))return null;var t=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,f=~~(n.scrollTop/t),i=f+this.renderedLength,r=parseInt(u.getAttribute("data-expanded-count"),10);i=i>r?f+(r-f):i;this.translateY=n.scrollTop;this.translateY>r*t-this.renderedLength*t&&(this.translateY=r*t-this.renderedLength*t);this.startIndex=i-this.renderedLength},n.prototype.setTranslate=function(n,t,i,r){sf.base.setStyleAttribute(n.querySelector("table"),{transform:"translateY("+this.translateY+"px)"});sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"});sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"});sf.base.isNullOrUndefined(r)||sf.base.setStyleAttribute(r,{transform:"translateY("+this.translateY+"px)"})},n.prototype.setTabIndex=function(){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")),n;i&&t&&i.forEach(function(n){n.getBoundingClientRect().top>=t.getBoundingClientRect().top&&n.setAttribute("tabindex","0")});n=this.parent.element.querySelector('.e-resource-cells[tabindex="0"]');this.isResourceCell&&n&&(n.focus(),this.isResourceCell=!1)},n.prototype.updateContent=function(){[].slice.call(this.parent.element.querySelectorAll(".e-appointment,.e-more-indicator")).forEach(function(n){n.style.display="none"});var n=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&n&&!n.classList.contains("e-virtual-mask")&&sf.base.addClass([n],"e-virtual-mask")},n.prototype.getResourceCount=function(){return Math.ceil(this.parent.element.clientHeight/this.itemSize)+this.bufferCount},n}(),bi=function(){function n(n){this.parent=n}return n.prototype.inlineEdit=function(n,t,i,r,f){if(void 0===i&&(i=null),"Cell"===n)this.removeInlineAppointmentElement(),this.eventWrapColor=f,this.cellEdit();else{if(t)return;var e=this.parent.element.querySelector('.e-appointment[data-guid="'+i+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(e=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+i+'"]'));this.parent.element.querySelector(".e-inline-subject")!==e.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement();this.eventEdit(e);r&&(this.parent.eventBase.removeSelectedAppointmentClass(),sf.base.addClass([e],u))}},n.prototype.cellEdit=function(){var n=this.generateEventData(),u=this.parent.activeCellsData.element.cellIndex,t=this.getEventDaysCount(n),o,r;t>1&&(t=Math.round(t),u-=--t);var f=new Date(""+n.startTime).getTime(),e=new Date(""+n.endTime).getTime(),i=n.groupIndex||0;"Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView?(o=n.startTime.getDay(),this.createVerticalViewInline(n,o,i,u)):"Month"===this.parent.options.currentView?this.createMonthViewInline(n,i,f,e):this.createTimelineViewInline(n,f,e,i);r=this.parent.element.querySelector(".e-inline-subject");r&&r.focus()},n.prototype.createInlineAppointmentElement=function(){var n=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"}),i;return n.appendChild(t),i=sf.base.createElement("input",{className:"e-inline-subject"}),t.appendChild(i),""!==this.eventWrapColor&&sf.base.setStyleAttribute(n,{backgroundColor:this.eventWrapColor}),n},n.prototype.removeInlineAppointmentElement=function(){var t=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment")),n,i;t.length>0&&t.forEach(function(n){return sf.base.remove(n)});n=this.parent.element.querySelector(".e-inline-subject");n&&(i=sf.base.closest(n,".e-appointment"),sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(n))},n.prototype.createVerticalViewInline=function(n,t,i,r){var o=this.getEventDaysCount(n),u=new ot(this.parent),f,e;u.initializeValues();o>=1?(u.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),f=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),e=0,f.length>0&&(e=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/f[0].offsetHeight)-1),u.allDayLevel=e,u.renderAllDayEvents(n,0,i,r)):u.renderNormalEvents(n,0,i,r)},n.prototype.createMonthViewInline=function(n,t,i,r){var a=this.getEventDaysCount(n),v=this.parent.eventBase.cloneEventObject(n,i,r,a,!1,!1),u=new o(this.parent),f,h,l;u.dateRender=this.parent.activeView.renderDates;f=this.parent.activeView.renderDates;h=this.parent.activeViewOptions.workDays;u.workCells=this.parent.activeCellsData.groupIndex>=0?[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+t+'"]')):[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));u.cellWidth=u.workCells[0].offsetWidth;u.cellHeight=u.workCells[0].offsetHeight;u.eventHeight=e(this.parent.element,"e-appointment");u.getSlotDates(h);for(var y=u.getRenderedDates(f),s=0,c=u.splitEvent(v,y||f);s<c.length;s++)l=c[s],u.renderEvents(l,t);this.parent.element.querySelector(".e-inline-subject").focus()},n.prototype.createTimelineViewInline=function(n,t,i,r){var h=this.getEventDaysCount(n),c=this.parent.eventBase.cloneEventObject(n,t,i,h,!1,!1),u=new s(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day"),f,o;u.dateRender=this.parent.activeView.renderDates;u.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"));u.workCells=this.parent.activeCellsData.groupIndex>=0?[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+r+'"]')):[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));f=this.parent.element.querySelector(".e-work-cells");u.inlineValue=this.parent.options.allowInline;u.cellWidth=f.offsetWidth;u.cellHeight=f.offsetHeight;o=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;u.slotsPerDay=o/u.dateRender.length;u.eventHeight=e(u.parent.element,"e-appointment");u.renderEvents(c,r)},n.prototype.getEventDaysCount=function(n){var t=n.startTime,i=n.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},n.prototype.generateEventData=function(n){var i=this.parent.element.querySelector(".e-inline-subject"),r=i?i.value:n?n.innerHTML:"",t={};return t.subject=r,t.startTime=this.parent.activeCellsData.startTime,t.endTime=this.parent.activeCellsData.endTime,t.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(t.groupIndex=this.parent.activeCellsData.groupIndex),t},n.prototype.eventEdit=function(n){var i,t=this.parent.element.querySelector(".e-inline-subject"),r,f,u,e;t?i=t.value:(r=n.querySelector(".e-subject"),f=n.querySelector(".e-time"),(i=r.innerText,t=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:i}}),sf.base.addClass([r],"e-disable"),sf.base.closest(n,".e-more-popup-wrapper"))?n.insertBefore(t,r):["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1?(u=n.querySelector(".e-subject-wrap"),u.insertBefore(t,u.firstChild)):(e=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details",n.querySelector(e).insertBefore(t,f)));t.focus();t.setSelectionRange(i.length,i.length)},n}(),wt=function(){function n(n,t,i,r,u){this.element=n;this.element.blazor__instance=this;this.dotNetRef=r;this.options=t;this.activeViewOptions=i;this.isAdaptive=sf.base.Browser.isDevice;this.isPrintSchedule=!sf.base.isNullOrUndefined(u);this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:t.isGroupAdaptive,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1};this.isAdaptive&&!this.element.classList.contains("e-device")&&sf.base.addClass([this.element],"e-device");this.render()}return n.prototype.render=function(n){if(void 0===n&&(n=!1),this.setHeight(),this.workCellAction=new ci(this),this.initializeLayout(this.options.currentView),this.eventBase=new vt(this),this.isPrintSchedule||(this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new li(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.options.allowDragAndDrop&&(this.dragAndDropModule=new pi(this)),this.options.allowResizing&&(this.resizeModule=new vi(this))),this.options.allowInline&&(this.inlineModule=new bi(this)),this.isPrintSchedule||n||this.wireEvents(),this.virtualScrollModule){var t=this.virtualScrollModule.getResourceCount();this.dotNetRef.invokeMethodAsync("SetRenderedCount",t)}},n.prototype.initializeLayout=function(n){switch(this.activeView&&this.activeView.destroy(),n){case"Day":case"Week":case"WorkWeek":this.activeView=new yt(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new ni(this);break;case"Month":this.activeView=new st(this);break;case"MonthAgenda":this.activeView=new ri(this);break;case"TimelineMonth":this.activeView=new fi(this);break;case"Year":case"TimelineYear":this.activeView=new oi(this);break;case"Agenda":this.activeView=new hi(this)}this.activeView&&(this.virtualScrollModule&&(this.virtualScrollModule=null),-1!==this.options.currentView.indexOf("Timeline")&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new wi(this),this.uiStateValues.top=0),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},n.prototype.scrollContentReady=function(n){var t,i;if(this.virtualScrollModule){if(n)return this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track")),t=this.element.querySelector(".e-current-timeline"),sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px"),i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0},void this.onScrollUiUpdate(i);this.virtualScrollModule.updateContent();this.virtualScrollModule.setTranslateValue()}},n.prototype.scrollToResource=function(n,t){var r=this.element.querySelector(".e-content-wrap"),f,i;if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation)t=this.activeViewOptions.group.byDate?t+1:t,f=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[t],r.scrollLeft=f.children[n].offsetLeft;else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var e=this.element.querySelector(".e-virtual-track"),o=this.element.querySelector(".e-resource-column-wrap"),u=Math.round(e.offsetHeight/parseInt(o.getAttribute("data-expanded-count"),10));(r.scrollTop=n*u-(this.virtualScrollModule.bufferCount-1)*u,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)?(i=this.element.querySelector('.e-work-cells[data-group-index="'+n+'"]'))&&!i.parentElement.classList.contains("e-hidden")&&(r.scrollTop=r.scrollTop<i.offsetTop?i.offsetTop:r.scrollTop+i.offsetTop):r.scrollTop=n*u}else(i=this.element.querySelector('.e-work-cells[data-group-index="'+n+'"]'))&&!i.parentElement.classList.contains("e-hidden")&&(r.scrollTop=i.offsetTop)},n.prototype.dataReady=function(n,t){this.activeView&&(this.virtualScrollModule&&this.activeViewOptions.allowVirtualScrolling&&this.virtualScrollModule.setTabIndex(),[].slice.call(this.element.querySelectorAll(".e-schedule-event-clone")).forEach(function(n){sf.base.remove(n)}),this.activeView.onDataReady({},n,t))},n.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},n.prototype.isAllDayCell=function(n){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},n.prototype.getDateFromElement=function(n){var i=n.getAttribute("data-date");if(!sf.base.isNullOrUndefined(i)){var u=parseInt(i,10),t=new Date(u),r=new Date(+t+6e4*t.getTimezoneOffset());return new Date(r.getTime()+6e4*(r.getTimezoneOffset()-t.getTimezoneOffset()))}},n.prototype.getMsFromDate=function(n){return new Date(+n-6e4*n.getTimezoneOffset()).getTime()},n.prototype.getTimeString=function(n){return this.globalize.formatDate(n,{format:this.options.timeFormat,type:"time"})},n.prototype.getDateTime=function(n){return _instanceof(n,Date)?new Date(n.getTime()):new Date(n)},n.prototype.getStartEndTime=function(n){if(!sf.base.isNullOrUndefined(n)&&""!==n){var i=this.resetTime(this.getCurrentTime()),t=n.split(":");return 2===t.length&&i.setHours(parseInt(t[0],10),parseInt(t[1],10),0),i}return null},n.prototype.resetTime=function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())},n.prototype.getCurrentTime=function(){if(this.options.timezone){var n=(new Date).getTimezoneOffset();return function(n,t,i){"string"==typeof t&&(t=at(n,t));"string"==typeof i&&(i=at(n,i));var r=n.getTimezoneOffset(),u=(n=new Date(n.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(n.getTime()+6e4*(u-r))}(new Date,n,this.options.timezone)}return new Date},n.prototype.boundaryValidation=function(n,t){var r={left:!1,right:!1,top:!1,bottom:!1},i=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return n<i.top+30+window.pageYOffset&&n>i.top+window.pageYOffset&&(r.top=!0),n>i.bottom-30+window.pageYOffset&&n<i.bottom+window.pageYOffset&&(r.bottom=!0),t<i.left+30+window.pageXOffset&&t>i.left+window.pageXOffset&&(r.left=!0),t>i.right-30+window.pageXOffset&&t<i.right+window.pageXOffset&&(r.right=!0),r},n.prototype.onCellMouseDown=function(n){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(n)},n.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},n.prototype.addSelectedClass=function(n,t){for(var i=0,r=n;i<r.length;i++)r[i].setAttribute("aria-selected","true");sf.base.addClass(n,"e-selected-cell");t&&(t.setAttribute("tabindex","0"),t.focus())},n.prototype.removeSelectedClass=function(){for(var t,i=this.getSelectedElements(),n=0,r=i;n<r.length;n++)t=r[n],t.setAttribute("aria-selected","false"),t.removeAttribute("tabindex");sf.base.removeClass(i,"e-selected-cell")},n.prototype.setWorkHours=function(n,t,i,r){var u;u=this.getWorkHourCells(n,t,i,r);sf.base.addClass(u,"e-work-hours")},n.prototype.resetWorkHours=function(n,t,i,r){var u,f;(void 0===n&&(n=this.activeView.renderDates),n&&t&&i)?(u=this.getWorkHourCells(n,t,i,r),sf.base.removeClass(u,"e-work-hours")):(f=[].slice.call(this.element.querySelectorAll(".e-work-hours")),sf.base.removeClass(f,"e-work-hours"))},n.prototype.getWorkHourCells=function(n,t,i,r){var u,l,h,d,f,b,e,g,nt;if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var o=this.getStartEndTime(t),s=this.getStartEndTime(i),c=this.getContentTable();if(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(s)||!c)return[];o.setMilliseconds(0);s.setMilliseconds(0);u=this.activeView.getStartHour();o<u&&(o=u);l=this.activeView.getEndHour();s>l&&(s=l);for(var v=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,y=Math.round((o.getTime()-u.getTime())/v),p=Math.ceil((s.getTime()-u.getTime())/v),tt=y,it=p,a=[],w=0,k=n;w<k.length;w++)if(h=k[w],h=this.getDateTime(h),this.resetTime(h),d=this.activeView.renderDates,f=this.getIndexOfDate(d,h),f>=0)for(this.isTimelineView()&&(b=Math.round((l.getTime()-u.getTime())/v),y=tt+f*b,p=it+f*b),e=y;e<p;e++)this.isTimelineView()?(g=sf.base.isNullOrUndefined(r)?0:r,a.push(c.rows[g].cells[e])):sf.base.isNullOrUndefined(r)?a.push(c.rows[e].cells[f]):(nt=[].slice.call(c.rows[e].querySelectorAll('.e-work-cells[data-group-index="'+r+'"]')),a.push(nt[f]));return a},n.prototype.getCellDetails=function(n){var f=_instanceof(n,Array)?n:[n],r=sf.base.getElement(f[0]),t=sf.base.getElement(f.slice(-1)[0]),e=this.getDateFromElement(r),u=this.getDateFromElement(t);if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(u)){var o=this.isTimelineView()&&!sf.base.isNullOrUndefined(t.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,c=o?parseInt(t.getAttribute("colSpan"),10):1,s={startTime:e,endTime:u=!this.activeViewOptions.timeScale.enable||o||t.classList.contains("e-all-day-cells")||t.classList.contains("e-header-cells")?i(new Date(u.getTime()),c):this.activeView.getEndDateFromStartDate(u),isAllDay:this.isAllDayCell(r),element:r},h=r.getAttribute("data-group-index");return sf.base.isNullOrUndefined(h)||(s.groupIndex=parseInt(h,10)),s}},n.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},n.prototype.selectCell=function(n){this.removeSelectedClass();this.addSelectedClass([n],n)},n.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},n.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},n.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},n.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},n.prototype.getIndexOfDate=function(n,t){return n.map(Number).indexOf(+t)},n.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},n.prototype.setDimensions=function(){this.setHeight();var n={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(n)},n.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},n.prototype.onScrollUiUpdate=function(n){this.activeView&&this.activeView.onScrollUiUpdate(n)},n.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},n.prototype.removeNewEventElement=function(){var n=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(n)||sf.base.remove(n)},n.prototype.closeSidebar=function(n){var t=this.element.querySelector(".e-sidebar");!sf.base.closest(n.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&this.element.querySelector(".e-icon-menu").click()},n.prototype.closeHeaderPopup=function(n){var t=sf.base.closest(n.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},n.prototype.closeQuickPopup=function(n){var t=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",r=sf.base.closest(n.target,t),i=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(r)&&(i&&i.childElementCount>0&&this.quickPopup&&this.quickPopup.hide(),sf.base.closest(n.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(n.target,t)&&this.quickPopup&&(this.quickPopup.hide(),this.removeNewEventElement()))},n.prototype.beforeOpenEditor=function(){this.onClosePopup();this.removeNewEventElement()},n.prototype.createCalendarPopup=function(){var n=this.element.querySelector(".e-header-popup");n&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(n,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0);this.headerPopup&&(this.headerPopup.element.classList.contains(r)?this.headerPopup.hide():this.headerPopup.show())},n.prototype.ctrlKeySelect=function(n){if(!this.isAdaptive){this.selectedElements=[];this.selectedElements=[].slice.call(this.element.querySelectorAll("."+u));var t=this.element.querySelector('.e-appointment[data-guid="'+n+'"]');this.eventBase.getSelectedEventElements(t)}},n.prototype.createQuickPopup=function(n,t,i){var r,f,u;if(this.isAdaptive&&sf.base.isNullOrUndefined(n))return r=this.element.querySelector(".e-new-event"),sf.base.isNullOrUndefined(r)&&(r=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event<\/div>'})),void this.currentCell.appendChild(r);u=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(n)||(f=!0,this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+n+'"]'),this.activeEventData={element:this.currentCell,guid:[n]});sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container"));!(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))||0!==this.getSelectedElements().length&&"TimelineYear"!==this.options.currentView||this.selectCell(this.currentCell);i||(u&&!this.quickPopup&&(this.quickPopup=new sf.popups.Popup(u,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup&&(this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,f&&this.applyEventColor(),this.adjustPopupPosition()),t&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([].slice.call(this.element.querySelectorAll('div[data-guid="'+n+'"]'))),this.activeEventData.element.focus()))},n.prototype.applyEventColor=function(){var i="",n,t,r;i="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";n=this.activeEventData.element.style[i];""!==n&&(t=this.quickPopup.element.querySelector(".e-popup-header"),r=this.quickPopup.element.querySelector(".e-popup-footer"),"block"===getComputedStyle(r).display&&(t=this.quickPopup.element.querySelector(".e-subject"))&&(t.style.borderLeftColor=n,n="rgba("+n.match(/\d+/g).join()+",0.3)"),t&&(t.style.backgroundColor=n))},n.prototype.inlineEdit=function(n,t,i,r,u){void 0===i&&(i=null);this.inlineModule.inlineEdit(n,t,i,r,u)},n.prototype.inlineCrudActions=function(n){var i,r;sf.base.closest(n,".e-inline-appointment")?(i=this.inlineModule.generateEventData(n),i.startTime=t(i.startTime),i.endTime=t(i.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",i,i.groupIndex)):(r=n.value,this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",r));this.inlineModule.removeInlineAppointmentElement()},n.prototype.quickPopupOpen=function(){var n,t,i;this.isAdaptive?this.quickPopup.element.style.top="0px":this.quickPopup.element.querySelector(".e-cell-popup")?(n=this.quickPopup.element.querySelector(".e-subject"),n&&n.focus()):(t=this.quickPopup.element.querySelector(".e-event-edit"),t&&t.focus(),i=this.quickPopup.element.querySelector(".e-edit"),i&&i.focus())},n.prototype.adjustPopupPosition=function(){var i=this.quickPopup.element.style.display,n,t;(this.quickPopup.element.style.display="block",this.isAdaptive)?(this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight)):(this.quickPopup.offsetX=10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0),n=sf.popups.isCollide(this.quickPopup.element,this.element),n.indexOf(this.options.enableRtl?"left":"right")>-1&&(this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,this.quickPopup.dataBind(),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind())),this.virtualScrollModule&&(n.indexOf("top")>-1||n.indexOf("bottom")>-1)&&(t=ht(this.element.querySelector(".e-content-wrap table")),this.quickPopup.offsetY=t,this.quickPopup.dataBind()));this.quickPopup.element.style.display=i;this.quickPopup.dataBind();this.quickPopup.show()},n.prototype.onQuickPopupClose=function(n){void 0===n&&(n=!1);this.isTapHold=!1;this.quickPopup&&this.quickPopup.hide();n||this.eventBase.focusElement()},n.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.hide();this.eventBase.focusElement()},n.prototype.createMoreEventPopup=function(n,t){var u=this.element.querySelector(".e-more-popup-wrapper"),r,i,f;if(u&&!this.morePopup&&(this.morePopup=new sf.popups.Popup(u,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){for(r=this.morePopup.element.querySelectorAll(".e-appointment"),i=0;i<r.length;i++)f=r[i],this.eventBase.wireAppointmentEvents(f,"Year"===this.options.currentView,!0);this.morePopup.relateTo=this.element.querySelector("."+n+'[data-date="'+t+'"]');this.morePopup.show()}},n.prototype.onMoreEventPopupClose=function(){this.morePopup&&this.morePopup.element.classList.contains(r)&&(this.onQuickPopupClose(),this.morePopup.hide())},n.prototype.getTooltipPosition=function(n,t){var i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content");var r=(t?i.querySelector("#QuickInfo"+n):i.querySelector("#"+n)).getBoundingClientRect(),u=i.getBoundingClientRect(),f={};f[n]="top:"+(r.bottom-u.top+i.scrollTop+9)+"px;left:"+(r.left-u.left+i.scrollLeft+r.width/2)+"px;";this.dotNetRef.invokeMethodAsync("ErrorPositioning",f,t)},n.prototype.scrollTo=function(n,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t);this.activeView.scrollToDate&&sf.base.isNullOrUndefined(n)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(n,t)},n.prototype.print=function(){var n=this.element.cloneNode(!0);n.id=this.element.id+"_print";document.body.appendChild(n);var t=this.getScrollableElement(this.element),i=t.scrollTop,r=t.scrollLeft;this.printScheduler(n,r,i,!0)},n.prototype.printScheduler=function(n,t,i,r){for(var e,h,c,u,l=this,o="",f=0,s=[].slice.call(document.querySelectorAll("base, link, style"));f<s.length;f++)o+=s[f].outerHTML;e=sf.base.createElement("div");n.style.width=n.offsetWidth+"px";h=r?550:window.outerHeight;c=r?100*Math.round(parseInt(n.style.width,10)/100):window.outerWidth;e.appendChild(n);u=window.open("","print","height="+h+",width="+c+",tabbar=no");u.document.write("<!DOCTYPE html> <html><head>"+o+"<\/head><body>"+e.innerHTML+"<script> (function() { window.ready = true; })(); <\/script><\/body><\/html>");u.document.close();u.focus();setTimeout(function(){var n=l.getScrollableElement(u.document.body),r,f;n.scrollLeft=t;n.scrollTop=i;r=u.document.querySelector(".e-date-header-wrap");r&&(r.scrollLeft=n.scrollLeft);f=u.document.querySelector(".e-time-cells-wrap");f&&(f.scrollTop=i);u.print();u.close()},2e3)},n.prototype.getScrollableElement=function(n){var t="MonthAgenda"===this.options.currentView?".e-appointment-wrap":".e-content-wrap";return n.querySelector(t)},n.prototype.allDayRowScrollUpdate=function(){var n=this.element.querySelector(".e-date-header-wrap"),t=this.element.querySelector(".e-all-day-row"),i,r;if(!sf.base.isNullOrUndefined(t))if("auto"!==this.options.height&&this.options.enableAllDayScroll?(n.classList.contains("e-all-day-auto")&&sf.base.removeClass([n],"e-all-day-auto"),this.eventBase.allDayExpandScroll(n)):(sf.base.addClass([n],"e-all-day-auto"),n.classList.contains("e-all-day-scroll")&&sf.base.removeClass([n],"e-all-day-scroll"),this.uiStateValues.expand)&&(i=[].slice.call(this.element.querySelectorAll(".e-all-day-cells")),i[0].style.height=t.style.height?t.style.height:i[1].style.height),this.uiStateValues.expand){r={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(r)}else t.style.height=""},n.prototype.wireEvents=function(){this.wireTouchEvents();sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this);sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this);sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},n.prototype.unwireEvents=function(){this.unwireTouchEvents();sf.base.EventHandler.remove(window,"resize",this.onScheduleResize);sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize);sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},n.prototype.wireTouchEvents=function(){var n=this.element.querySelector(".e-table-container");n&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(n,{tapHold:this.tapHoldHandler.bind(this)}))},n.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},n.prototype.tapHoldHandler=function(n){var t=sf.base.closest(n.originalEvent.target,".e-appointment"),i;if(!sf.base.isNullOrUndefined(t)&&this.isAdaptive)return i=t.getAttribute("data-guid"),this.isTapHold=!0,this.selectedElements=[].slice.call(this.element.querySelectorAll("."+u)),this.eventBase.getSelectedEventElements(t),void this.dotNetRef.invokeMethodAsync("OnTapHold",i,this.isTapHold)},n.prototype.onScheduleResize=function(){this.onClosePopup();this.morePopup&&this.morePopup.hide();this.activeView.resetColWidth();this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0});this.dataReady()},n.prototype.onDocumentClick=function(n){var i,t;this.options.allowInline&&(i=this.element.querySelector(".e-inline-subject"),i&&""!==i.value?this.inlineCrudActions(i):this.inlineModule.removeInlineAppointmentElement());this.closeHeaderPopup(n);this.closeSidebar(n);this.closeQuickPopup(n);this.eventBase&&this.eventBase.appointmentBorderRemove(n);t=n.target;!this.morePopup||sf.base.closest(t,".e-more-popup-wrapper")||t.classList.contains("e-more-indicator")||sf.base.closest(t,"."+r)||sf.base.closest(t,".e-work-cells")||this.morePopup.hide()},n.prototype.setPersistence=function(){if(this.options.enablePersistence){var n={selectedDate:this.options.selectedDate,currentView:this.options.currentView},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(n.top=t.scrollTop,n.left=t.scrollLeft);window.localStorage.setItem(this.element.id,JSON.stringify(n))}},n.prototype.destroy=function(){this.isDestroyed=!0;this.setPersistence();this.unwireEvents();this.headerPopup&&this.headerPopup.destroy();this.quickPopup&&this.quickPopup.destroy();this.morePopup&&this.morePopup.destroy();this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy();this.activeView&&(this.activeView.destroy(),this.activeView=null)},n}();return{initialize:function(n,t,i,r){n&&(t.selectedDate=new Date(t.selectedDate),t.minDate=new Date(t.minDate),t.maxDate=new Date(t.maxDate),sf.base.isNullOrUndefined(i.group.resources)&&(i.group.resources=[]),n.blazor__instance?(n.blazor__instance.options=t,n.blazor__instance.activeViewOptions=i,n.blazor__instance.uiStateValues.isGroupAdaptive=t.isGroupAdaptive,n.blazor__instance.render(!0),n.blazor__instance.setPersistence(),n.blazor__instance.allDayRowScrollUpdate()):(new wt(n,t,i,r),n.blazor__instance.dataReady(),n.querySelector(".e-content-placeholder")&&(n.querySelector(".e-content-placeholder").style.display="none"),r.invokeMethodAsync("TriggerCreatedEvent")))},printWithOptions:function(n,t,i){var r,f,u;if(n){r=Object.assign({},n.blazor__instance.options);f=Object.assign({},n.blazor__instance.activeViewOptions);r.selectedDate=new Date(r.selectedDate);r.minDate=new Date(r.minDate);r.maxDate=new Date(r.maxDate);u=n.cloneNode(!0);u.id=u.id+"_print";var e=n.blazor__instance.getScrollableElement(n),o=e.scrollTop,s=e.scrollLeft;document.body.appendChild(u);r.height=i.height;r.width=i.width;new wt(u,r,f,t,!0);"MonthAgenda"!==r.currentView&&u.blazor__instance.dataReady(void 0,void 0);u.blazor__instance.printScheduler(u,s,o);u.blazor__instance.destroy()}},loadCldr:function(n){sf.base.loadCldr(JSON.parse(n))},createCalendarPopup:function(n){n&&n.blazor__instance&&n.blazor__instance.createCalendarPopup()},exportSave:function(n,t){var e,i;if(navigator.msSaveBlob){for(var u=window.atob(t),f=new Uint8Array(u.length),r=0;r<u.length;r++)f[r]=u.charCodeAt(r);e=new Blob([f.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(e,n)}else i=document.createElement("a"),i.download=n,i.href="data:application/octet-stream;base64,"+t,document.body.appendChild(i),i.click(),document.body.removeChild(i)},exportToICS:function(n,t){var u=new Blob([n],{type:"data:text/calendar;charset=utf8"}),i,r;(t=(t||"Calendar")+".ics",navigator.msSaveBlob)?navigator.msSaveBlob(u,t):(i=document.createElementNS("http://www.w3.org/1999/xhtml","a"),i.download=t,i.href=URL.createObjectURL(u),r=document.createEvent("MouseEvent"),r.initEvent("click",!0,!0),i.dispatchEvent(r),setTimeout(function(){URL.revokeObjectURL(i.href);i.href=void 0}))},scrollTo:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.scrollTo(t,i)},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.destroy()},validation:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.getTooltipPosition(t,i)},createQuickPopup:function(n,t,i,r){n&&n.blazor__instance&&n.blazor__instance.createQuickPopup(t,i,r)},adjustPopupPosition:function(n){n&&n.blazor__instance&&n.blazor__instance.adjustPopupPosition()},closeQuickInfoPopup:function(n){n&&n.blazor__instance&&n.blazor__instance.onQuickPopupClose()},createMoreEventPopup:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.createMoreEventPopup(t,i)},moreEventPopupClose:function(n){n&&n.blazor__instance&&n.blazor__instance.onMoreEventPopupClose()},dataReady:function(n,t,i,r){n&&n.blazor__instance&&(n.blazor__instance.uiStateValues.isGroupAdaptive=t,n.blazor__instance.dataReady(i,r))},beforeOpenEditor:function(n){n&&n.blazor__instance&&n.blazor__instance.beforeOpenEditor()},scrollContentReady:function(n,t){n&&n.blazor__instance&&n.blazor__instance.scrollContentReady(t)},scrollToResource:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.scrollToResource(t,i)},printSchedule:function(n){n&&n.blazor__instance&&n.blazor__instance.print()},inlineEdit:function(n,t,i,r,u,f){void 0===r&&(r=null);n&&n.blazor__instance&&n.blazor__instance.inlineEdit(t,i,r,u,f)},setWorkHours:function(n,t,i,r,u){n&&n.blazor__instance&&n.blazor__instance.setWorkHours(t,i,r,u)},resetWorkHours:function(n,t,i,r,u){n&&n.blazor__instance&&n.blazor__instance.resetWorkHours(t,i,r,u)},getSelectedDetails:function(n,i){var f,e,r;return n&&n.blazor__instance?i?(f=[],(e=[].slice.call(n.querySelectorAll("."+u))).forEach(function(n){f.push(n.getAttribute("data-guid"))}),JSON.stringify(f)):(e=n.blazor__instance.getSelectedElements(),r=n.blazor__instance.getCellDetails(e),r.startTime=t(r.startTime),r.endTime=t(r.endTime),JSON.stringify(r)):null},ctrlKeySelect:function(n,t){n&&n.blazor__instance&&n.blazor__instance.ctrlKeySelect(t)},getTargetDetails:function(n,i,r,u){var f,e,o;if(n&&n.blazor__instance){if(f=document.elementFromPoint(i,r),e=void 0,f&&"event"===u){if(e=sf.base.closest(f,".e-appointment"))return JSON.stringify(e.getAttribute("data-guid"))}else if(f&&"cell"===u){if(e=sf.base.closest(f,".e-header-cells,.e-all-day-cells,.e-work-cells"))return o=n.blazor__instance.getCellDetails(e),o.startTime=t(o.startTime),o.endTime=t(o.endTime),JSON.stringify(o)}else if(f&&"resource"===u)return e=sf.base.closest(f,".e-resource-cells"),JSON.stringify(e.getAttribute("data-group-index"));return null}return null},getRowIndex:function(n,t,i){if(n&&n.blazor__instance){var r=document.elementFromPoint(t,i),u=void 0;return r?(u=sf.base.closest(r,".e-resource-cells"),JSON.stringify(u.parentNode.sectionRowIndex)):null}return null}}}()},"./modules/sf-sidebar.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Sidebar=function(){"use strict";var n="Left",t=function(){function t(n,t,i){this.enableGestures=!0;this.isOpen=!1;this.closeOnDocumentClick=!1;this.isPositionChange=!1;this.dockSize="auto";this.width="auto";this.isSwipChange=!1;this.element=n;this.element.blazor__instance=this;this.dotnetRef=t;this.resetProperty(i)}return t.prototype.initialize=function(){this.setTarget();this.addClass();this.setType();this.setCloseOnDocumentClick();this.setMediaQuery();sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth);this.wireEvents()},t.prototype.addClass=function(){var n=document.querySelector(".e-main-content");sf.base.isNullOrUndefined(n||this.targetElement)||sf.base.addClass([n||this.targetElement],["e-content-animation"])},t.prototype.setTarget=function(){this.targetElement=this.element.nextElementSibling;"string"==typeof this.target&&(this.target=document.querySelector(this.target));this.target&&(this.target.insertBefore(this.element,this.target.children[0]),sf.base.addClass([this.element],"e-sidebar-absolute"),sf.base.addClass([this.target],"e-sidebar-context"),this.targetElement=this.getTargetElement())},t.prototype.getTargetElement=function(){for(var n=this.element.nextElementSibling;!sf.base.isNullOrUndefined(n)&&n.classList.contains("e-sidebar");)n=n.nextElementSibling;return n},t.prototype.hide=function(){var i=this,t=document.querySelector(".e-main-content")||this.targetElement;!this.enableDock&&t&&(t.style.transform="translateX(0px)",t.style[this.position===n?"marginLeft":"marginRight"]="0px");this.destroyBackDrop();this.isOpen=!1;this.enableDock&&setTimeout(function(){return i.sidebarTimeout()},50);sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.show=function(n){var t=this;n&&setTimeout(function(){return t.setType()},50);this.isOpen=!0;sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.transitionEnd=function(t){if(this.enableDock&&!this.isOpen){var i=this.position===n?"-100":"100",r=this.position===n?this.setDimension(this.dockSize):"-"+this.setDimension(this.dockSize),u="z-index: "+this.element.style.zIndex+"; width: "+this.element.style.width+"; transform: translateX("+i+"%) translateX("+r+")";this.element.setAttribute("style",u)}this.dotnetRef.invokeMethodAsync("SetDock");sf.base.isNullOrUndefined(t)||this.dotnetRef.invokeMethodAsync("TriggerChange",this.isOpen,t);sf.base.EventHandler.remove(this.element,"transitionend",this.transitionEnd)},t.prototype.createBackDrop=function(n){(this.resetProperty(n),this.showBackdrop&&this.isOpen)&&(this.modal=sf.base.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",this.target?(document.querySelector(".e-main-content")||this.targetElement).appendChild(this.modal):document.body.appendChild(this.modal))},t.prototype.destroyBackDrop=function(){this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.enableGestureHandler=function(t){!this.isOpen&&(this.position===n&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5||"Right"===this.position&&t.swipeDirection===n&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5)?(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerShow",this.eventArgs),this.show(),this.isSwipChange=!0):(this.isOpen&&this.position===n&&t.swipeDirection===n||"Right"===this.position&&"Right"===t.swipeDirection)&&(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs),this.hide(),this.isSwipChange=!1)},t.prototype.resize=function(){this.setMediaQuery();sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth)},t.prototype.setEnableGestures=function(n){this.resetProperty(n);this.enableGestures?(this.mainContentElement=new sf.base.Touch(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarElement=new sf.base.Touch(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentElement&&this.sidebarElement&&(this.mainContentElement.destroy(),this.sidebarElement.destroy())},t.prototype.wireEvents=function(){this.setEnableGestures();window.addEventListener("resize",this.resize.bind(this))},t.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this));sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler);this.mainContentElement&&this.mainContentElement.destroy();this.sidebarElement&&this.sidebarElement.destroy()},t.prototype.documentclickHandler=function(n){sf.base.closest(n.target,".e-control.e-sidebar")||(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs),this.hide())},t.prototype.setCloseOnDocumentClick=function(n){this.resetProperty(n);this.closeOnDocumentClick?sf.base.EventHandler.add(document,"mousedown touchstart",this.documentclickHandler,this):sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler)},t.prototype.setMediaQuery=function(){this.mediaQuery&&this.windowWidth!==window.innerWidth&&(window.matchMedia(this.mediaQuery).matches?this.dotnetRef.invokeMethodAsync("TriggerShow",null):this.isOpen&&this.dotnetRef.invokeMethodAsync("TriggerHide",null))},t.prototype.setDimension=function(n){return"number"==typeof n?sf.base.formatUnit(n):"string"==typeof n?n.match(/px|%|em/)?n:sf.base.formatUnit(n):"100%"},t.prototype.sidebarTimeout=function(){var n=document.querySelector(".e-main-content")||this.targetElement,t=this.isOpen?this.setDimension(this.width):this.setDimension(this.dockSize),i=this.setDimension(this.element.getBoundingClientRect().width);n&&(this.isOpen?this.positionStyles(this.width,n,i,t):this.element.classList.contains("e-close")&&this.positionStyles(this.dockSize,n,i,t))},t.prototype.positionStyles=function(t,i,r,u){this.position===n?i.style.marginLeft="auto"===t?r:u:i.style.marginRight="auto"===t?r:u},t.prototype.siblingStyle=function(t,i){t.style[this.position===n?"marginLeft":"marginRight"]=i},t.prototype.resetProperty=function(n){sf.base.isNullOrUndefined(n)||(this.type=n.Type,this.isOpen=n.IsOpen,this.isPositionChange=this.position!==n.Position,this.position=n.Position,this.enableDock=n.EnableDock,this.showBackdrop=n.ShowBackdrop,this.target=n.Target,this.enableGestures=n.EnableGestures,this.closeOnDocumentClick=n.CloseOnDocumentClick,this.mediaQuery=n.MediaQuery,this.dockSize=n.DockSize,this.width=n.Width)},t.prototype.getXYValue=function(n,t){var u,i=n.changedTouches,r;return(u="X"===t?i?i[0].clientX:n.clientX:i?i[0].clientY:n.clientY)||"focus"!==n.type||!n.target||(r=n.target.getBoundingClientRect(),u=r?"X"===t?r.left:r.top:null),Math.ceil(u)},t.prototype.setType=function(t){var r,i;if(this.resetProperty(t),r=this.element.getBoundingClientRect().width,r=this.enableDock&&!this.isOpen?this.dockSize:r,i=document.querySelector(".e-main-content")||this.targetElement,i){this.isPositionChange&&(i.style[this.position===n?"marginRight":"marginLeft"]="0px");i.style.transform="translateX(0px)";sf.base.Browser.isDevice||"Auto"===this.type||(i.style[this.position===n?"marginLeft":"marginRight"]="0px");this.isPositionChange=!1;var u="string"==typeof r?r:r+"px",e=this.position===n?r:-r,f=i&&(this.enableDock||this.isOpen||this.isSwipChange);switch(this.type){case"Push":f&&this.siblingStyle(i,u);break;case"Slide":f&&(i.style.transform="translateX("+e+"px)");break;case"Over":this.enableDock&&this.element.classList.contains("e-close")&&this.siblingStyle(i,u);break;case"Auto":sf.base.Browser.isDevice?this.enableDock&&!this.isOpen&&this.siblingStyle(i,u):(this.enableDock||this.isOpen||this.isSwipChange)&&this.siblingStyle(i,u);this.isSwipChange=!1}}},t.prototype.destroy=function(){this.destroyBackDrop();this.element.style.width=this.element.style.zIndex=this.element.style.transform="";this.windowWidth=null;var n=document.querySelector(".e-main-content")||this.targetElement;sf.base.isNullOrUndefined(n)||(n.style.margin=n.style.transform="");this.unWireEvents()},t}();return{initialize:function(n,i,r){return new t(n,i,r),this.isValid(n)&&(n.blazor__instance.initialize(),sf.base.removeClass([n],"e-hidden")),!(sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(r.MediaQuery)&&!window.matchMedia(r.MediaQuery).matches)||!(!sf.base.Browser.isDevice||!r.IsOpen)},setType:function(n,t){this.isValid(n)&&n.blazor__instance.setType(t)},hide:function(n,t){this.isValid(n)&&(n.blazor__instance.setType(t),n.blazor__instance.hide())},show:function(n,t,i){this.isValid(n)&&(n.blazor__instance.setType(t),n.blazor__instance.createBackDrop(t),n.blazor__instance.show(i))},onPropertyChange:function(n,t){this.isValid(n)&&(void 0!==t.CloseOnDocumentClick&&n.blazor__instance.setCloseOnDocumentClick(t),void 0!==t.ShowBackdrop&&n.blazor__instance.createBackDrop(t))},destroy:function(n){this.isValid(n)&&n&&n.blazor__instance.destroy()},isValid:function(n){return!(!n||!n.blazor__instance)}}}()},"./modules/sf-slider.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Slider=function(){"use strict";var t="e-handle-focused",i="e-handle-active",n="Horizontal",r=function(){function r(n,t,i){this.activeHandle=1;this.initialRendering=!0;this.isClicked=!1;this.isSliderMove=!1;this.isDragRange=!1;this.isTabPressed=!1;this.isKeyPressed=!1;this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)",scaleTransform:"transform .4s cubic-bezier(.25, .8, .25, 1)"};this.element=n;this.element.blazor__instance=this;this.dotNetRef=t;this.options=i;this.initialRendering=!0;null===this.options.Value&&(this.options.Value="Range"!==this.options.Type?this.options.Min:[this.options.Min,this.options.Max]);this.options.CustomValues&&(this.options.Min=0,this.options.Max=i.CustomValues.length-1)}return r.prototype.initialize=function(){return this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input"),this.setElementWidth(this.options.Width),0===this.element.getBoundingClientRect().height&&"Vertical"===this.options.Orientation&&(this.element.style.height=this.element.parentElement.getBoundingClientRect().height+"px"),this.setHandler(),this.setZindex(),sf.base.isNullOrUndefined(this.options.Limits)||this.setLimitBarPosition(),this.isMaterial="material"===this.getTheme(this.sliderContainer),sf.base.isNullOrUndefined(this.materialHandle)&&this.isMaterial&&null!==this.options.Tooltip&&"Range"!==this.options.Type&&(this.materialHandle=document.createElement("div"),this.materialHandle.className="e-handle e-material-handle",this.element.appendChild(this.materialHandle)),this.setValue(!1),this.updateColorRangeBarPos(),this.initialRendering&&this.options.Enabled&&!this.options.ReadOnly&&this.wireEvents(),this.getTheme(this.sliderContainer)},r.prototype.rangeBarMousedown=function(n){var u,f,t,i,r;("mousedown"===n.type&&n.preventDefault(),this.changedEventValue=this.options.Value,"Range"===this.options.Type&&n.target===this.rangeBar)&&(t=void 0,i=void 0,"mousedown"===n.type?(t=(u=[n.clientX,n.clientY])[0],i=u[1]):"touchstart"===n.type&&(t=(f=[n.changedTouches[0].clientX,n.changedTouches[0].clientY])[0],i=f[1]),"Horizontal"===this.options.Orientation?(this.firstPartRemain=t-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-t):(this.firstPartRemain=i-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-i),this.minDiff=this.handleVal2-this.handleVal1,r=this.element.querySelector(".e-tab-handle"),r&&r.classList.remove("e-tab-handle"),sf.base.EventHandler.add(document,"mousemove touchmove",this.dragRangeBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.dragRangeBarUp,this))},r.prototype.dragRangeBarUp=function(n){this.triggerChangeEvent(this.changedEventValue,n,!0);sf.base.EventHandler.remove(document,"mousemove touchmove",this.dragRangeBarMove);sf.base.EventHandler.remove(document,"mouseup touchend",this.dragRangeBarUp);this.isDragRange=!0},r.prototype.triggerChangeEvent=function(n,t,i){if(null!==this.options.Events){var r="touchend"===t.type||t.currentTarget===document;this.options.Events.onChange.hasDelegate&&r&&!this.options.IsImmediateValue&&this.isValueChange(n)&&this.invokeEvent(n,!1);(r||i)&&this.options.Events.valueChange.hasDelegate&&this.isValueChange(n)&&(this.invokeEvent(n,!0),this.changedEventValue=this.options.Value)}},r.prototype.invokeEvent=function(n,t){this.dotNetRef.invokeMethodAsync("TriggerEvent",{PreviousValue:n,Value:this.options.Value,isValueChanged:t})},r.prototype.handleValueAdjust=function(n,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff);this.handlePos1=this.checkHandlePosition(this.handleVal1);this.handlePos2=this.checkHandlePosition(this.handleVal2)},r.prototype.getLimitValueAndPosition=function(n,t,i,r){return sf.base.isNullOrUndefined(t)&&(t=this.options.Min,sf.base.isNullOrUndefined(n)&&r&&(n=t)),sf.base.isNullOrUndefined(i)&&(i=this.options.Max,sf.base.isNullOrUndefined(n)&&r&&(n=i)),n<t&&(n=t),n>i&&(n=i),[n,this.checkHandlePosition(n)]},r.prototype.dragRangeBarMove=function(n){var o,s,i,r,u,t,f,e;"touchmove"!==n.type&&n.preventDefault();this.isDragRange=!0;this.rangeBar.style.transition="none";this.firstHandle.style.transition="none";this.secondHandle.style.transition="none";"mousemove"===n.type?(r=(o=[n.clientX,n.clientY])[0],u=o[1]):(r=(s=[n.changedTouches[0].clientX,n.changedTouches[0].clientY])[0],u=s[1]);"mousemove"===n.type?i={x:n.clientX,y:n.clientY}:"touchmove"!==n.type&&"touchstart"!==n.type||(i={x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY});t=this.options.Limits;!sf.base.isNullOrUndefined(t)&&(t.enabled&&t.startHandleFixed||t.enabled&&t.endHandleFixed)||((i=this.options.EnableRtl?{x:r+this.secondPartRemain,y:u+this.secondPartRemain}:{x:r-this.firstPartRemain,y:u+this.secondPartRemain},this.handlePos1=this.xyToPosition(i),this.handleVal1=this.positionToValue(this.handlePos1),i=this.options.EnableRtl?{x:r-this.firstPartRemain,y:u-this.firstPartRemain}:{x:r+this.secondPartRemain,y:u-this.firstPartRemain},this.handlePos2=this.xyToPosition(i),this.handleVal2=this.positionToValue(this.handlePos2),!sf.base.isNullOrUndefined(this.options.Limits)&&this.options.Limits.enabled)&&(f=this.getLimitValueAndPosition(this.handleVal1,t.minStart,t.minEnd),this.handleVal1=f[0],this.handlePos1=f[1],this.handleVal1===t.minEnd&&this.handleValueAdjust(this.handleVal1,t.minEnd,1),this.handleVal1===t.minStart&&this.handleValueAdjust(this.handleVal1,t.minStart,1),f=this.getLimitValueAndPosition(this.handleVal2,t.maxStart,t.maxEnd),this.handleVal2=f[0],this.handlePos2=f[1],this.handleVal2===t.maxStart&&this.handleValueAdjust(this.handleVal2,t.maxStart,2),this.handleVal2===t.maxEnd&&this.handleValueAdjust(this.handleVal2,t.maxEnd,2)),this.handleVal2===this.options.Max&&this.handleValueAdjust(this.handleVal2,this.options.Max,2),this.handleVal1===this.options.Min&&this.handleValueAdjust(this.handleVal1,this.options.Min,1));e=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.setHandlePosition(n);this.updateValue();"Default"!==this.options.Type&&(this.rangeBar.style.transition=this.transition.rangeBar,this.setRangeBarPosition());null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.isValueChange(e)&&this.options.IsImmediateValue&&this.invokeEvent(e,!1)},r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this);sf.base.EventHandler.add(this.element,"keydown",this.keyDown,this);sf.base.EventHandler.add(this.element,"keyup",this.keyUp,this);sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this);"Range"===this.options.Type&&sf.base.EventHandler.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this);this.onResize=this.reposition.bind(this);window.addEventListener("resize",this.onResize);this.wireFirstHandleEventArgs();"Range"===this.options.Type&&this.wireSecondHandleEventArgs()},r.prototype.wireFirstHandleEventArgs=function(){sf.base.EventHandler.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this);sf.base.EventHandler.add(this.firstHandle,"mouseup touchend",this.sliderBarUp,this)},r.prototype.wireSecondHandleEventArgs=function(){sf.base.EventHandler.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this);sf.base.EventHandler.add(this.secondHandle,"mouseup touchend",this.sliderBarUp,this)},r.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler);sf.base.EventHandler.remove(this.element,"keydown",this.keyDown);sf.base.EventHandler.remove(this.element,"keyup",this.keyUp);sf.base.EventHandler.remove(this.element,"focusout",this.focusOut);"Range"===this.options.Type&&sf.base.EventHandler.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown);window.removeEventListener("resize",this.onResize);this.unWireFirstHandleEventArgs();"Range"===this.options.Type&&this.unWireSecondHandleEventArgs()},r.prototype.unWireFirstHandleEventArgs=function(){sf.base.EventHandler.remove(this.firstHandle,"mousedown touchstart",this.handleFocus);sf.base.EventHandler.remove(this.firstHandle,"mouseup touchend",this.sliderBarUp)},r.prototype.unWireSecondHandleEventArgs=function(){sf.base.EventHandler.remove(this.secondHandle,"mousedown touchstart",this.handleFocus);sf.base.EventHandler.remove(this.secondHandle,"mouseup touchend",this.sliderBarUp)},r.prototype.isValueChange=function(n){return"Range"===this.options.Type?n[0]!==this.options.Value[0]||n[1]!==this.options.Value[1]:n!==this.options.Value},r.prototype.focusOut=function(){null!==this.options.Tooltip&&this.options.Tooltip.isVisible&&("Range"===this.options.Type||sf.base.isNullOrUndefined(this.materialHandle)||(this.materialHandle.style.transform="scale(1)"),this.dotNetRef.invokeMethodAsync("CloseTooltip"));this.isTabPressed&&this.handleFocusOut()},r.prototype.reposition=function(){this.initialRendering=!1;this.initialize()},r.prototype.handleValueUpdate=function(){return"Range"===this.options.Type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},r.prototype.keyDown=function(n){switch(n.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:n.preventDefault();n.stopImmediatePropagation();this.buttonClick(n)}},r.prototype.buttonClick=function(t){var i,f=this.options.Value,u=this.options.EnableRtl&&this.options.Orientation===n,r=this.handleValueUpdate();this.options.Limits&&(1===this.activeHandle&&this.options.Limits.startHandleFixed||2===this.activeHandle&&this.options.Limits.endHandleFixed)||(40===t.keyCode||37===t.keyCode||t.currentTarget.classList.contains("e-first-button")?i=u?this.add(r,parseFloat(this.options.Step.toString()),!0):this.add(r,parseFloat(this.options.Step.toString()),!1):38===t.keyCode||39===t.keyCode||t.currentTarget.classList.contains("e-second-button")?i=u?this.add(r,parseFloat(this.options.Step.toString()),!1):this.add(r,parseFloat(this.options.Step.toString()),!0):33===t.keyCode||t.currentTarget.classList.contains("e-first-button")?i=u?this.add(r,parseFloat(this.options.Ticks.largeStep.toString()),!1):this.add(r,parseFloat(this.options.Ticks.largeStep.toString()),!0):34===t.keyCode||t.currentTarget.classList.contains("e-second-button")?i=u?this.add(r,parseFloat(this.options.Ticks.largeStep.toString()),!0):this.add(r,parseFloat(this.options.Ticks.largeStep.toString()),!1):36===t.keyCode?i=parseFloat(this.options.Min.toString()):35===t.keyCode&&(i=parseFloat(this.options.Max.toString())),this.options.Value="Range"!==this.options.Type?i:1===this.activeHandle?[i,this.options.Value[1]]:[this.options.Value[0],i],"Range"===this.options.Type&&(this.options.Value[0]>this.options.Value[1]&&1===this.activeHandle?this.options.Value[0]=this.options.Value[1]:this.options.Value[1]<this.options.Value[0]&&(this.options.Value[1]=this.options.Value[0])),"keydown"===t.type&&"Default"!==this.options.Type&&(this.isKeyPressed=!0),this.setValue(),this.invokeEvent(f,!1),this.isKeyPressed=!1)},r.prototype.handleFocusOut=function(){if(this.firstHandle.classList.contains(t)&&this.firstHandle.classList.remove(t),this.firstHandle.classList.contains(i)&&this.firstHandle.classList.remove(i),"Range"===this.options.Type&&(this.secondHandle.classList.contains(t)&&this.secondHandle.classList.remove(t),this.secondHandle.classList.contains(i)&&this.secondHandle.classList.remove(i)),this.isTabPressed){this.isTabPressed=!1;var n=sf.base.select(".e-tab-handle",this.element);n&&sf.base.removeClass([n],"e-tab-handle")}},r.prototype.keyUp=function(n){var r=n.target,f,u;9===n.keyCode&&r.classList.contains("e-handle")&&((this.isTabPressed=!0,r.classList.contains("e-tab-handle"))||(f=sf.base.select(".e-tab-handle",this.element),(f&&sf.base.removeClass([f],"e-tab-handle"),sf.base.addClass([r],"e-tab-handle"),"Range"===this.options.Type)&&(u=r.previousSibling,this.activeHandle=u&&u.classList?u.classList.contains("e-handle")?2:1:1)),this.changedEventValue=this.previousHandleVal,r===this.firstHandle?sf.base.addClass([this.firstHandle],[t,i]):sf.base.addClass([this.secondHandle],[t,i]))},r.prototype.handleFocus=function(n){this.element.focus();this.getHandlePosition(n);this.changedEventValue=this.previousHandleVal;this.sliderBarClick();n.currentTarget===this.firstHandle?(this.firstHandle.classList.add(t),this.firstHandle.classList.add(i)):(this.secondHandle.classList.add(t),this.secondHandle.classList.add(i));sf.base.EventHandler.add(document,"mousemove touchmove",this.sliderBarMove,this);sf.base.EventHandler.add(document,"mouseup touchend",this.sliderBarUp,this)},r.prototype.sliderBarMove=function(n){if("touchmove"===n.type&&n.target.parentElement===this.element||"mousemove"===n.type){"touchmove"!==n.type&&n.preventDefault();this.isSliderMove=!0;var t=void 0;"mousemove"===n.type?t={x:n.clientX,y:n.clientY}:"touchmove"!==n.type&&"touchstart"!==n.type||(t={x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY});this.handlePos=this.xyToPosition(t);this.handleVal=this.positionToValue(this.handlePos);this.handlePos=this.checkHandlePosition(this.handleVal);this.firstHandle.style.transition=this.transition.scaleTransform;"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.scaleTransform);this.rangeBar&&(this.rangeBar.style.transition="none");"Range"===this.options.Type?-1===this.previousHandleVal.indexOf(this.handleVal)&&(1===this.activeHandle&&this.handleVal<=this.handleVal2||2===this.activeHandle&&this.handleVal>=this.handleVal1)&&(null!=this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick()):this.previousHandleVal!==this.handleVal&&(null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick())}},r.prototype.callChangeEvent=function(n){var t=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.sliderBarClick();this.isValueChange(t)&&this.invokeEvent(t,n)},r.prototype.updateHandleAttributes=function(n,t){"aria-valuenow"===n?"Range"===this.options.Type?(this.firstHandle.setAttribute(n,"["+t[0]+","+t[1]+"]"),this.secondHandle.setAttribute(n,"["+t[0]+","+t[1]+"]")):this.firstHandle.setAttribute(n,t[0]):(this.firstHandle.setAttribute(n,t[0]),"Range"===this.options.Type&&this.secondHandle.setAttribute(n,t[0]))},r.prototype.getTheme=function(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")},r.prototype.setZindex=function(){sf.base.isNullOrUndefined(this.options.Ticks)||"None"===this.options.Ticks.placement||(this.element.getElementsByTagName("ul")[0].style.zIndex="-1",this.element.style.zIndex="8");"material"!==this.getTheme(this.sliderContainer)||sf.base.isNullOrUndefined(this.options.Ticks)||"Both"!==this.options.Ticks.placement||(this.element.style.zIndex="8");this.firstHandle.style.zIndex="9";"Range"===this.options.Type&&(this.secondHandle.style.zIndex="10")},r.prototype.sliderBarUp=function(n){this.handleFocusOut();sf.base.EventHandler.remove(document,"mousemove touchmove",this.sliderBarMove);sf.base.EventHandler.remove(document,"mouseup touchend",this.sliderBarUp);this.isSliderMove=!1;this.transitionNode();this.triggerChangeEvent(this.changedEventValue,n,!1)},r.prototype.transitionNode=function(){this.firstHandle.style.transition="none";"Range"===this.options.Type&&(this.secondHandle.style.transition="none");this.rangeBar&&(this.rangeBar.style.transition="none")},r.prototype.clickHandler=function(n){if(this.isDragRange)this.isDragRange=!1;else{n.preventDefault();var t=this.changedEventValue;this.getHandlePosition(n);null!=this.options.Events&&this.options.Events.onChange.hasDelegate||null!=this.options.Events&&this.options.Events.valueChange.hasDelegate?(this.isClicked=!0,this.sliderBarClick(),this.options.Events.onChange.hasDelegate&&this.callChangeEvent(!1),t=this.isSliderMove?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal,this.triggerChangeEvent(t,n,!0)):this.sliderBarClick();this.isClicked&&(this.previousHandleVal=this.options.Value);this.changedEventValue=this.previousHandleVal;this.isClicked=!1}},r.prototype.updateNewHandleValue=function(n,t,i){return(i[0]||i[1])&&(n<i[0]?(n=i[0],t=this.checkHandlePosition(n)):n>i[1]&&(n=i[1],t=this.checkHandlePosition(n))),[n,t]},r.prototype.sliderBarClick=function(){var t,n,i;("Range"!==this.options.Type||1===this.activeHandle&&this.handleVal1<=this.handleVal2||2===this.activeHandle&&this.handleVal1<=this.handleVal2)&&((this.firstHandle.style.transition=this.transition.handle,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.handle),this.rangeBar&&(this.rangeBar.style.transition=this.transition.rangeBar),this.options.Limits)?(t=void 0,1!==this.activeHandle||this.options.Limits.startHandleFixed?2!==this.activeHandle||this.options.Limits.endHandleFixed||(t=[this.options.Limits.maxStart,this.options.Limits.maxEnd],n=this.updateNewHandleValue(this.handleVal,this.handlePos,t),this.updateHandleValue(this.secondHandle,n[0],n[1])):(t=[this.options.Limits.minStart,this.options.Limits.minEnd],n=this.updateNewHandleValue(this.handleVal,this.handlePos,t),this.updateHandleValue(this.firstHandle,n[0],n[1],!0),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,n[0],n[1],1===this.activeHandle))):(i=1===this.activeHandle?this.firstHandle:this.secondHandle,this.updateHandleValue(i,this.handleVal,this.handlePos,1===this.activeHandle),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,this.handleVal,this.handlePos,1===this.activeHandle)),"Default"!==this.options.Type&&this.setRangeBarPosition(),this.updateValue())},r.prototype.updateHandleValue=function(n,t,i,r){void 0===r&&(r=!1);this.applyHandlePosition(n,i);r?(this.handleVal1=t,this.handlePos1=i):(this.handleVal2=t,this.handlePos2=i);this.updateAriaValue()},r.prototype.updateAriaValue=function(){"Range"!==this.options.Type?this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString()]):this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString(),this.options.CustomValues[this.handleVal2].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString(),this.handleVal2.toString()])},r.prototype.positionToValue=function(t){var i,r=parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min));return i=this.options.Orientation===n?t/this.element.getBoundingClientRect().width*r:t/this.element.getBoundingClientRect().height*r,this.add(i,parseFloat(this.options.Min.toString()),!0)},r.prototype.add=function(n,t,i){var r=Math.pow(10,3);return i?(Math.round(n*r)+Math.round(t*r))/r:(Math.round(n*r)-Math.round(t*r))/r},r.prototype.setElementWidth=function(n){sf.base.isNullOrUndefined(n)||("number"==typeof n?this.sliderContainer.style.width=sf.base.formatUnit(n):"string"==typeof n&&(this.sliderContainer.style.width=n.match(/px|%|em/)?n:sf.base.formatUnit(n)))},r.prototype.xyToPosition=function(t){var r=this.element.getBoundingClientRect(),f,u,e,i;return this.options.Min===this.options.Max?100:(this.options.Orientation===n?(f=t.x-r.left,u=this.element.offsetWidth/100,this.posvalue=f/u):(e=t.y-r.top,u=this.element.offsetHeight/100,this.posvalue=100-e/u),i=this.stepValueCalculation(this.posvalue),i<0?i=0:i>100&&(i=100),this.options.EnableRtl&&this.options.Orientation===n&&(i=100-i),this.options.Orientation===n?r.width*(i/100):r.height*(i/100))},r.prototype.stepValueCalculation=function(n){0===this.options.Step&&(this.options.Step=1);var i=parseFloat(sf.base.formatUnit(this.options.Step))/((parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/100),t=n%Math.abs(i);return 0!==t&&(i/2>t?n-=t:n+=Math.abs(i)-t),n},r.prototype.setLimitBarPosition=function(){var i,r,t,u,f;(this.limitBar1=this.element.querySelector(".e-limits"),this.limitBar2=this.element.querySelector(".e-limit-second"),null!==this.options.Limits.minStart||null!==this.options.Limits.minEnd)&&(this.options.Orientation===n?(this.limitBar1.style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.Limits.minEnd)+"px":this.checkHandlePosition(this.options.Limits.minStart)+"px",t="width"):(this.limitBar1.style.bottom=this.checkHandlePosition(this.options.Limits.minStart)+"px",t="height"),u=this.options.Limits.minEnd=null!=this.options.Limits.minEnd?this.options.Limits.minEnd:this.options.Max,sf.base.setStyleAttribute(this.limitBar1,((i={})[t]=this.checkHandlePosition(u)-this.checkHandlePosition(this.options.Limits.minStart)+"px",i)));"Range"===this.options.Type&&(null!==this.options.Limits.maxStart||null!==this.options.Limits.maxEnd)&&(this.options.Orientation===n?this.limitBar2.style.left=this.checkHandlePosition(this.options.Limits.maxStart)+"px":this.limitBar2.style.bottom=this.checkHandlePosition(this.options.Limits.maxStart)+"px",f=this.options.Limits.maxEnd=null!=this.options.Limits.maxEnd?this.options.Limits.maxEnd:this.options.Max,sf.base.setStyleAttribute(this.limitBar2,((r={})[t]=this.checkHandlePosition(f)-this.checkHandlePosition(this.options.Limits.maxStart)+"px",r)))},r.prototype.setHandler=function(){this.options.Min>this.options.Max&&(this.options.Min=this.options.Max);this.createFirstHandle();this.createSecondHandle()},r.prototype.createSecondHandle=function(){this.secondHandle=this.element.querySelector(".e-handle-second")},r.prototype.createFirstHandle=function(){this.firstHandle=this.element.querySelector(".e-handle-first")},r.prototype.setValue=function(n){var i,t;void 0===n&&(n=!0);i="Range"!==this.options.Type?this.options.Value:this.options.Value[0];(this.handleVal1=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Min.toString())):this.checkHandleValue(parseFloat(i.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),null!=this.options.Limits)&&(t=this.updateNewHandleValue(this.handleVal1,this.handlePos1,[this.options.Limits.minStart,this.options.Limits.minEnd]),this.handleVal1=t[0],this.handlePos1=t[1]);"Range"===this.options.Type&&(this.handleVal2=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Max.toString())):this.checkHandleValue(parseFloat(this.options.Value[1].toString())),this.handlePos2=this.checkHandlePosition(this.handleVal2),null!=this.options.Limits)&&(t=this.updateNewHandleValue(this.handleVal2,this.handlePos2,[this.options.Limits.maxStart,this.options.Limits.maxEnd]),this.handleVal2=t[0],this.handlePos2=t[1]);this.setHandlePosition(null);"Default"!==this.options.Type&&this.setRangeBarPosition();null!==this.options.Ticks&&"None"!==this.options.Ticks.placement&&this.setTickValuePosition();this.updateValue(n)},r.prototype.updateColorRangeBarPos=function(){if(null!=this.options.ColorRange)for(var i=this.sliderTrack.children,t=0;t<this.options.ColorRange.length;t++)this.options.Orientation===n?(this.options.EnableRtl||(i[t].style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.ColorRange[t].end)+"px":this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),i[t].style.width=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"):(i[t].style.bottom=this.checkHandlePosition(this.options.ColorRange[t].start)+"px",i[t].style.height=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),i[t].style.removeProperty("display")},r.prototype.setTickValuePosition=function(){var i,e,f,t;this.firstChild=this.element.querySelector("ul").children[0];var u,r,o=this.firstChild.getBoundingClientRect(),s=this.options.Ticks.smallStep,h=Math.abs(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/s;for(this.firstChild.children.length>0&&(u=this.firstChild.children[0].getBoundingClientRect()),e=[this.element.querySelectorAll(".e-tick.e-large .e-tick-value")],i="Both"===this.options.Ticks.placement?[].slice.call(e[0],2):[].slice.call(e[0],1),f=this.options.Orientation!==n?2*o.height:2*o.width,t=0;t<this.firstChild.children.length;t++)this.options.Orientation===n?this.firstChild.children[t].style.left=this.options.EnableRtl?(f-this.firstChild.children[t].getBoundingClientRect().width)/2+"px":-u.width/2+"px":this.firstChild.children[t].style.top=-u.width/2+"px";for(t=0;t<i.length;t++)r=i[t].getBoundingClientRect(),this.options.Orientation===n?(sf.base.setStyleAttribute(i[t],{left:(f-r.width)/2+"px"}),this.options.EnableRtl&&i[t].parentElement.classList.contains("e-last-tick")&&sf.base.setStyleAttribute(i[t],{left:-r.width/2+"px"})):sf.base.setStyleAttribute(i[t],{top:(f-r.height)/2+"px"});0===h&&this.firstChild.classList.remove("e-last-tick");null!=this.firstChild&&(this.options.Orientation===n?this.firstChild.children[0].style.left:u.height);null!=i[0]&&(this.options.Orientation===n?i[0].style.left:r.height);null!=this.firstChild&&null!=i[0]&&(this.options.Orientation===n?(this.firstChild.children[0].style.left,i[0].style.left):(u.height,r.height));this.element.querySelector("ul").style.removeProperty("visibility")},r.prototype.setRangeBarPosition=function(){this.rangeBar=this.element.querySelector(".e-range");this.options.Orientation===n?"MinRange"===this.options.Type?(this.options.EnableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",sf.base.setStyleAttribute(this.rangeBar,{width:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.options.EnableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):"MinRange"===this.options.Type?(this.rangeBar.style.bottom="0px",sf.base.setStyleAttribute(this.rangeBar,{height:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{height:this.handlePos2-this.handlePos1+"px"}))},r.prototype.setHandlePosition=function(){this.updateHandleAttributes("aria-valuemin",[this.options.Min.toString()]);this.updateHandleAttributes("aria-valuemax",[this.options.Max.toString()]);var n=[this.handlePos1,this.handlePos2];this.updateHandlePosition(this.firstHandle,n[0]);this.isMaterial&&"Range"!==this.options.Type&&!sf.base.isNullOrUndefined(this.materialHandle)&&this.updateHandlePosition(this.materialHandle,n[0]);"Range"===this.options.Type&&this.updateHandlePosition(this.secondHandle,n[1]);this.updateAriaValue()},r.prototype.getHandlePosition=function(n){var t,i,r;("mousedown"!==n.type&&"mouseup"!==n.type||n.preventDefault(),"mousedown"===n.type||"mouseup"===n.type||"click"===n.type?t={x:n.clientX,y:n.clientY}:"touchend"!==n.type&&"touchstart"!==n.type||(t={x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handleVal2<this.handleVal)?this.activeHandle=2:this.handleVal1>this.handleVal?this.activeHandle=1:(i=this.handleVal>this.handleVal1?this.handleVal-this.handleVal1:this.handleVal1-this.handleVal,r=this.handleVal>this.handleVal2?this.handleVal-this.handleVal2:this.handleVal2-this.handleVal,this.activeHandle=i>r?2:1)},r.prototype.updateHandlePosition=function(n,t){this.applyHandlePosition(n,t);n.style.removeProperty("visibility")},r.prototype.applyHandlePosition=function(t,i){this.options.Orientation===n?this.options.EnableRtl?t.style.right=i+"px":t.style.left=i+"px":t.style.bottom=i+"px";t.style.transition=this.isKeyPressed?"none":this.transition.handle},r.prototype.checkHandleValue=function(n){if(this.options.Min>this.options.Max&&(this.options.Min=this.options.Max),this.options.Min===this.options.Max)return parseFloat(sf.base.formatUnit(this.options.Max));var t=this.handleStartEnd();return n<t.start?n=t.start:n>t.end&&(n=t.end),n},r.prototype.checkHandlePosition=function(t){var r,i=this.element.getBoundingClientRect();return t=100*(t-parseFloat(sf.base.formatUnit(this.options.Min)))/(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min))),r=this.options.Orientation===n?i.width*(t/100):i.height*(t/100),parseFloat(sf.base.formatUnit(this.options.Max))===parseFloat(sf.base.formatUnit(this.options.Min))&&(r=this.options.Orientation===n?i.width:i.height),r},r.prototype.handleStartEnd=function(){return this.options.Min>this.options.Max?{start:this.options.Max,end:this.options.Min}:{start:this.options.Min,end:this.options.Max}},r.prototype.updateValue=function(n){var t=this;void 0===n&&(n=!0);this.options.Value="Range"===this.options.Type?[this.handleVal1,this.handleVal2]:this.handleVal1;this.isClicked||(this.previousHandleVal=this.options.Value);n&&setTimeout(function(){t.isMaterial&&null!==t.options.Tooltip&&!sf.base.isNullOrUndefined(t.materialHandle)&&"Range"!==t.options.Type&&(t.materialHandle.style.transform="scale(0)");t.dotNetRef.invokeMethodAsync("UpdateValue",t.options.Value,t.activeHandle)},300)},r.prototype.updateLimitData=function(n){this.options.Limits=n;this.setLimitBarPosition();this.setValue()},r.prototype.updateTicksData=function(n){this.options.Ticks=n;this.setTickValuePosition()},r.prototype.updateSliderValue=function(n){var t=this.options.Value;this.options.Value=n;this.setValue();this.invokeEvent(t,!1)},r.prototype.updateStepValue=function(n){this.options.Step=n},r.prototype.destroy=function(){this.element.style.display="none";this.unWireEvents();this.element=null},r.prototype.updateTooltipPosition=function(n){var t=document.getElementById(n);!sf.base.isNullOrUndefined(t)&&"Range"!==this.options.Type&&sf.base.isNullOrUndefined(this.options.Tooltip.format)&&(t.style.transform="Before"===this.options.Tooltip.placement?"rotate(45deg)":"rotate(225deg)")},r.prototype.propertyChanges=function(n){void 0!==n.Enabled&&(this.options.Enabled=n.Enabled);void 0!==n.ShowButtons&&(this.setValue(!1),this.updateColorRangeBarPos());void 0!==n.ReadOnly&&(this.options.ReadOnly=n.ReadOnly);void 0!==n.Value&&(this.options.Value=n.Value,this.setValue());void 0!==n.Max&&(this.options.Max=n.Max);void 0!==n.Step&&(this.options.Step=n.Step);void 0!==n.Min&&(this.options.Min=n.Min);void 0!==n.IsImmediateValue&&(this.options.IsImmediateValue=n.IsImmediateValue);this.options.Enabled&&!this.options.ReadOnly?(this.unWireEvents(),this.wireEvents()):this.unWireEvents()},r}();return{initialize:function(n,t,i){return n&&new r(n,t,i),n&&n.blazor__instance?n.blazor__instance.initialize():null},updateLimitData:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateLimitData(t)},updateTicksData:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateTicksData(t)},updateSliderValue:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateSliderValue(t)},updateSTepValue:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateStepValue(t)},updatedProperties:function(n,t){n&&n.blazor__instance&&n.blazor__instance.propertyChanges(t)},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.destroy()},reposition:function(n){n&&n.blazor__instance&&n.blazor__instance.reposition()},updateTooltipPosition:function(n,t){n&&n.blazor__instance&&n.blazor__instance.updateTooltipPosition(t)}}}()},"./modules/sf-smith-chart.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.SmithChart=function(){"use strict";var n=function(){function n(n,t,i){this.mouseY=0;this.mouseX=0;this.resizeTo=0;this.id=n;this.element=t;this.dotNetRef=i;this.element.blazor__instance=this}return n.prototype.unWireEvents=function(){var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave",n;sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove);sf.base.EventHandler.remove(this.element,"click",this.chartOnMouseClick);sf.base.EventHandler.remove(this.element,t,this.mouseLeave);window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this));sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);n=sf.base.getInstance(this.element,this.keyActionHandler);n&&n.destroy();this.element=null;this.dotNetRef=null},n.prototype.wireEvents=function(){var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this);sf.base.EventHandler.add(this.element,"click",this.chartOnMouseClick,this);sf.base.EventHandler.add(this.element,n,this.mouseLeave,this);window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this));new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"});sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},n.prototype.mouseDown=function(n){n.preventDefault()},n.prototype.keyActionHandler=function(n){"enter"===n.action&&this.chartOnMouseClickProcess(n)},n.prototype.mouseMove=function(n){document.getElementById(this.id+"_svg")&&this.setMouseXY(n);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseMove",this.getEventArgs(n))},n.prototype.chartOnMouseClick=function(n){this.chartOnMouseClickProcess(n)},n.prototype.chartOnMouseClickProcess=function(n){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseClick",this.getEventArgs(n))},n.prototype.mouseLeave=function(n){this.setMouseXY(n);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseLeave",this.getEventArgs(n))},n.prototype.rangeResize=function(n){var t=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout(function(){t.dotNetRef.invokeMethodAsync("OnSmithChartResize",n)},500))},n.prototype.setMouseXY=function(n){var i,r,f,u,t;"touchmove"===n.type?(i=(f=n).changedTouches[0].clientX,r=f.changedTouches[0].clientY):(i=n.clientX,r=n.clientY);u=document.getElementById(this.id+"_svg").getBoundingClientRect();t=document.getElementById(this.id).getBoundingClientRect();this.mouseY=r-t.top-Math.max(u.top-t.top,0);this.mouseX=i-t.left-Math.max(u.left-t.left,0)},n.prototype.getEventArgs=function(n){return{type:n.type,clientX:n.clientX?n.clientX:0,clientY:n.clientY?n.clientY:0,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType?n.pointerType:n.action?n.action:"",target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0}}},n}();return{id:"",mouseY:0,mouseX:0,initialize:function(t,i,r,u,f){return f?(new n(t,f,i).wireEvents(),this.getElementBoundsById(f,r,u)):{width:0,height:0}},getElementBoundsById:function(n,t,i){return n?(n.style.height=t,n.style.width=i,{width:n.clientWidth||n.offsetWidth,height:n.clientHeight||n.offsetHeight}):{width:0,height:0}},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(n,t,i,r,u){var f=document.getElementById("chartmeasuretext");return null===f&&(f=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(f))," "===n&&(n="&nbsp;"),f.innerHTML=n,f.style.position="fixed",f.style.fontSize="100px",f.style.fontWeight=i,f.style.fontStyle=r,f.style.fontFamily=u,f.style.visibility="hidden",f.style.top="-100",f.style.left="0",f.style.whiteSpace="nowrap",f.style.lineHeight="normal",{Width:f.clientWidth,Height:f.clientHeight}},getCharSizeByFontKeys:function(n){for(var f={},i=this.charCollection,h=i.length,c=n.length,r=0;r<c;r++)for(var u=n[r].split("_"),e=u[0],o=u[1],s=u[2],l="_"+e+"_"+o+"_"+s,t=0;t<h;t++)f[i[t]+l]=this.measureText(i[t],"",e,o,s);return JSON.stringify(f)},getCharSizeByCharKey:function(n){var t=n.split("_"),i=t[0],r=t[1],u=t[2],f=t[3],e=t[4];return this.measureText(i,r,u,f,e)},resizeTo:{},linear:function(n,t,i,r){return-i*Math.cos(n/r*(Math.PI/2))+i+t},reverselinear:function(n,t,i,r){return-t*Math.sin(n/r*(Math.PI/2))+i+t},doLinearAnimation:function(n,t,i){var f=this,r=document.getElementById(n);if(r){var e=new sf.base.Animation({}),o=+r.getAttribute("x"),u=+r.getAttribute("width");e.animate(r,{duration:t,delay:0,progress:function(n){n.timeStamp>=n.delay&&(r.setAttribute("visibility","visible"),i?r.setAttribute("width",f.linear(n.timeStamp-n.delay,0,u,n.duration).toString()):r.setAttribute("x",f.reverselinear(n.timeStamp-n.delay,u,0,n.duration).toString()))},end:function(){i?r.setAttribute("width",u.toString()):r.setAttribute("x",o.toString())}})}return null==r},getTemplateSize:function(n){var t=document.getElementById(n);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},fadeOut:function(n){sf.base.isNullOrUndefined(n.blazor__instance)||!sf.base.isNullOrUndefined(n.blazor__instance)&&sf.base.isNullOrUndefined(n.blazor__instance.tooltip)||n.blazor__instance.tooltip.fadeOut()},tooltip:{},renderTooltip:function(n,t,i){var f=document.getElementById(t+"_svg"),e=!(f&&parseInt(f.getAttribute("opacity"),10)>0),u=JSON.parse(n),r=i.blazor__instance;e?(r.tooltip=new sf.svgbase.Tooltip(u),r.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(r.tooltip)||(r.tooltip.location=new sf.svgbase.TooltipLocation(u.location.x,u.location.y),r.tooltip.content=u.content,r.tooltip.header=u.header,r.tooltip.palette=u.palette,r.tooltip.shapes=u.shapes,r.tooltip.data=u.data,r.tooltip.template=u.template,r.tooltip.textStyle.color=u.textStyle.color||r.tooltip.textStyle.color,r.tooltip.textStyle.fontFamily=u.textStyle.fontFamily||r.tooltip.textStyle.fontFamily,r.tooltip.textStyle.fontStyle=u.textStyle.fontStyle||r.tooltip.textStyle.fontStyle,r.tooltip.textStyle.fontWeight=u.textStyle.fontWeight||r.tooltip.textStyle.fontWeight,r.tooltip.textStyle.opacity=u.textStyle.opacity||r.tooltip.textStyle.opacity,r.tooltip.textStyle.size=u.textStyle.size||r.tooltip.textStyle.size,r.tooltip.dataBind())},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.unWireEvents()}}}()},"./modules/sf-sparkline.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Sparkline=function(){"use strict";var n=function(){function n(n,t){this.resizeTo=0;this.element=n;this.dotNetRef=t;this.element.blazor__instance=this}return n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mousemove.bind(this),this);sf.base.EventHandler.add(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave.bind(this),this);sf.base.EventHandler.add(this.element,"click",this.click,this);window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mousemove);sf.base.EventHandler.remove(this.element,"click",this.click);sf.base.EventHandler.remove(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave);window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this));this.element=null;this.dotNetRef=null},n.prototype.resize=function(){var n=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout(function(){n.dotNetRef.invokeMethodAsync("OnResize")},500))},n.prototype.mouseleave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseLeave")},n.prototype.click=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnClick")},n.prototype.mousemove=function(n){var t,r,u,i=this.element.getBoundingClientRect(),o=document.getElementById(this.element.id+"_svg"),f,e;o&&(t=o.getBoundingClientRect());f=document.getElementById(this.element.id+"_Secondary_Element");(f&&(f.style.left=Math.max((t?t.left:0)-(i?i.left:0),0)+"px",f.style.top=Math.max((t?t.top:0)-(i?i.top:0),0)+"px"),n.type.indexOf("touch")>-1)?(e=n,e.changedTouches?(u=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(r=n.clientY,u=n.clientX)):(r=n.clientY,u=n.clientX);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseMove",u,r,i?i.top:0,i?i.left:0,t?t.top:0,t?t.left:0,n.target?n.target.id:"",sf.base.Browser.isIE)},n}();return{initialize:function(t,i,r,u){if(t)return new n(t,i).wireEvents(),this.getElementSize(t,r,u)},getElementSize:function(n,t,i){if(n){n.style.height=t;n.style.width=i;var r=n.parentElement?n.parentElement.clientWidth||0:100,u=n.parentElement?n.parentElement.clientHeight||0:50;return{width:n.clientWidth||n.offsetWidth,height:n.clientHeight||n.offsetHeight,parentWidth:r,parentHeight:u,isDevice:sf.base.Browser.isDevice,windowWidth:window.innerWidth,windowHeight:window.innerHeight}}},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.unWireEvents()}}}()},"./modules/sf-spinner.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Spinner=function(){"use strict";var n=function(){function n(n){this.element=n;this.element.blazor__instance=this}return n.prototype.initialize=function(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")},n}();return{initialize:function(t){return sf.base.isNullOrUndefined(t)?null:(new n(t),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.blazor__instance)?null:t.blazor__instance.initialize(t))}}}()},"./modules/sf-splitter.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Splitter=function(){"use strict";var l=function(){return(l=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},e="e-split-bar",i="e-static-pane",c="e-resize-handler",o="e-arrow-left",s="e-arrow-up",h="e-arrow-down",r="e-icon-hidden",u="msie",t="Horizontal",f="px",a=function(){function a(n,t,i){this.allPanes=[];this.allBars=[];this.previousCoordinates={};this.currentCoordinates={};this.updatePrePaneInPercentage=!1;this.updateNextPaneInPercentage=!1;this.panesDimensions=[];this.border=0;this.isToggleInvoke=!1;this.createdEnabled=!1;this.resizingEnabled=!1;this.expandedEnabled=!1;this.onExpandEnabled=!1;this.collapsedEnabled=!1;this.onCollapseEnabled=!1;this.onResizeStopEnabled=!1;this.onResizeStartEnabled=!1;this.iconsDelay=300;this.collapseFlag=!1;this.expandFlag=!0;this.enablePersistence=!1;this.element=n;this.dotNetRef=i;this.updateContext(t);sf.base.isNullOrUndefined(n)||(this.element.blazor__instance=this)}return a.prototype.updateContext=function(n){sf.base.extend(this,this,n)},a.prototype.initialize=function(){this.id=this.element.id;this.addSeparator();this.collapseFlag=!0;this.isCollapsed();this.collapseFlag=!1;this.updateClass();sf.base.EventHandler.add(document,"touchstart click",this.onDocumentClick,this);document.body.contains(this.element)&&this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent",null);sf.base.EventHandler.add(this.element,"keydown",this.onMove,this);window.addEventListener("resize",this.reportWindowSize.bind(this),!0);sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-splitter-touch");this.enableReversePanes&&this.setReversePane()},a.prototype.setReversePane=function(){this.allPanes=this.allPanes.reverse();this.allBars=this.allBars.reverse();sf.base.addClass([this.allBars[this.allBars.length-1]],"e-last-bar");sf.base.removeClass([this.allBars[0]],"e-last-bar")},a.prototype.onDocumentClick=function(n){n.target.classList.contains(e)||sf.base.isNullOrUndefined(this.currentSeparator)||sf.base.removeClass([this.currentSeparator],["e-split-bar-hover","e-split-bar-active"])},a.prototype.updateClass=function(){var t,n,i;if(sf.base.Browser.info.name===u)for(sf.base.addClass([this.element],"e-ie"),t=this.element.querySelectorAll(".e-splitter ."+c),n=0;n<t.length;n++)i=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize,sf.base.setStyleAttribute(t[n],{"padding-left":i/2+f,"padding-right":i/2+f})},a.prototype.reportWindowSize=function(){for(var r=this,t=this.allPanes.length,n=0;n<t;n++)(sf.base.isNullOrUndefined(this.paneSettings[n].size)&&this.allPanes[n].classList.remove(i),t-1===n)&&this.element.querySelectorAll("."+i).length===t&&sf.base.removeClass([this.allPanes[n]],i);setTimeout(function(){r.updateSplitterSize(!0)},200)},a.prototype.onMove=function(n){if(this.allPanes.length>1&&this.element.children.length>1){this.getPaneDetails();this.getPaneDimensions();var i=this.getSeparatorIndex(this.currentSeparator),f=this.previousPane.classList.contains("e-collapsed"),r=this.previousPane.classList.contains("e-expanded"),u=this.nextPane.classList.contains("e-collapsed");(this.orientation!==t&&38===n.keyCode||this.orientation===t&&39===n.keyCode||this.orientation===t&&37===n.keyCode||this.orientation!==t&&40===n.keyCode)&&(!r&&!u&&!f||r&&!u)&&document.activeElement.classList.contains(e)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(n.preventDefault(),this.checkPaneSize(n),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getKeyBoardEvtArgs(n),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]})):13===n.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(e)&&this.currentSeparator.classList.contains("e-split-bar-active")&&(this.previousPane.classList.contains("e-collapsed")?(this.expand(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")):(this.collapse(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")))}},a.prototype.addSeparator=function(){var n,f=this,t,r,i,o;for(this.allBars=[],this.allPanes=[],t=0;t<this.element.children.length;t++)this.element.children[t].classList.contains("e-pane")&&this.allPanes.push(this.element.children[t]),this.element.children[t].classList.contains(e)&&this.allBars.push(this.element.children[t]);for(r=this.allPanes.length,i=0;i<r;i++)i<r-1?(n=this.allBars[i],this.updateIconClass(),sf.base.isNullOrUndefined(n)||(this.currentSeparator=n,this.addMouseActions(n),sf.base.EventHandler.add(this.currentSeparator,"touchstart click",this.clickHandler,this),n.addEventListener("focus",function(){document.activeElement.classList.contains(e)&&(f.currentSeparator=document.activeElement,sf.base.addClass([f.currentSeparator],"e-split-bar-active"))}),n.addEventListener("blur",function(){sf.base.removeClass([f.currentSeparator],"e-split-bar-active")})),sf.base.isNullOrUndefined(n))||(this.isResizable()?(sf.base.EventHandler.add(n,"mousedown",this.onMouseDown,this),o=sf.base.Browser.info.name===u?"pointerdown":"touchstart",sf.base.EventHandler.add(n,o,this.onMouseDown,this),sf.base.addClass([n],"e-resizable-split-bar"),this.updateResizablePanes(i)):sf.base.addClass([sf.base.select("."+c,n)],"e-hide-handler")):(n&&sf.base.addClass([n],"e-last-bar"),r>1&&this.updateResizablePanes(i))},a.prototype.updateSeparator=function(){for(var t,n=0;n<this.allBars.length;n++)t=this.allBars[n],sf.base.EventHandler.remove(t,"touchstart click",this.clickHandler);this.addSeparator()},a.prototype.updateResizablePanes=function(n){this.getPaneDetails();this.isResizable();sf.base.addClass([this.allPanes[n]],"e-resizable")},a.prototype.getPaneDetails=function(){var n=null,t=null;this.order=parseInt(this.currentSeparator.style.order,10);this.allPanes.length>1&&(n=this.getPrevPane(this.order),t=this.getNextPane(this.order));n&&t&&(this.previousPane=n,this.nextPane=t,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())},a.prototype.getOrderIndex=function(n,t){for(var r,u="pane"===t?this.allPanes:this.allBars,i=0;i<u.length;i++)parseInt(u[i].style.order)===n&&(r=i);return r},a.prototype.getPrevPane=function(n){return this.enableReversePanes?this.getOrderPane(n+1):this.getOrderPane(n-1)},a.prototype.getNextPane=function(n){return this.enableReversePanes?this.getOrderPane(n-1):this.getOrderPane(n+1)},a.prototype.getOrderPane=function(n){for(var i,t=0;t<this.element.children.length;t++)parseInt(this.element.children[t].style.order)===n&&(i=this.element.children[t]);return i},a.prototype.getPreviousPaneIndex=function(){var n=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)+1:parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(n,"pane")},a.prototype.getNextPaneIndex=function(){var n=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)-1:parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(n,"pane")},a.prototype.onMouseDown=function(n){var i,r,t;if(n.preventDefault(),i=n.target,this.splitterDetails(n),!i.classList.contains("e-navigate-arrow")){for(this.updateCurrentSeparator(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active"),this.updateCursorPosition(n,"previous"),this.getPaneDetails(),r=this.element.querySelectorAll("iframe"),t=0;t<r.length;t++)r[t].style.pointerEvents="none";this.onResizeStartEnabled?this.dotNetRef.invokeMethodAsync("ResizeStartEvent",{event:this.getMouseEvtArgs(n),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),cancel:!1}):this.resizeEvent(n)}},a.prototype.getMouseEvtArgs=function(n){return{button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,detail:n.detail,screenX:n.screenX,screenY:n.screenY,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey,altKey:n.altKey,type:n.type}},a.prototype.getKeyBoardEvtArgs=function(n){return{key:n.key,code:n.code,location:n.location,repeat:n.repeat,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey,altKey:n.altKey,type:n.type}},a.prototype.getDomObject=function(n,t){return null!=t?window.sfBlazor.getDomObject(n,t):null},a.prototype.resizeEvent=function(n){this.wireResizeEvents();this.checkPaneSize(n)},a.prototype.checkPaneSize=function(n){var r,u,i=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize,e,o;(r=this.orientation===t?this.previousPane.offsetWidth:this.previousPane.offsetHeight,u=this.orientation===t?this.nextPane.offsetWidth:this.nextPane.offsetHeight,this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0)?(e=this.updatePaneFlexBasis(this.previousPane),o=this.updatePaneFlexBasis(this.nextPane),this.totalPercent=e+o,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"!==n.type||sf.base.isNullOrUndefined(n.keyCode)||((39===n.keyCode||40===n.keyCode)&&u>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")?(this.previousPane.style.flexBasis=e+1+"%",this.nextPane.style.flexBasis=o-1+"%"):(37===n.keyCode||38===n.keyCode)&&r>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(e-1+"%")&&(this.previousPane.style.flexBasis=e-1+"%",this.nextPane.style.flexBasis=o+1+"%"))):(this.totalWidth=this.orientation===t?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"!==n.type||sf.base.isNullOrUndefined(n.keyCode)||((39===n.keyCode||40===n.keyCode)&&u>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<u+i?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=r+i+f,this.nextPane.style.flexBasis=u<i?"0px":u-i+f):(37===n.keyCode||38===n.keyCode)&&r>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<r-i&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=r<i?"0px":r-i+f,this.nextPane.style.flexBasis=u+i+f)))},a.prototype.getMinInPixel=function(n){if(sf.base.isNullOrUndefined(n))return 0;var t=this.convertPixelToNumber(n.toString());return n.indexOf("%")>0&&(t=this.convertPercentageToPixel(n)),this.convertPixelToNumber(t.toString())},a.prototype.addStaticPaneClass=function(){this.previousPane.classList.contains(i)||sf.base.addClass([this.previousPane],i);this.nextPane.classList.contains(i)||sf.base.addClass([this.nextPane],i)},a.prototype.convertPercentageToPixel=function(n,i){var r,u=n.toString(),f;return u.indexOf("%")>-1?(r=parseFloat(u.slice(0,u.indexOf("%"))),f=void 0,f=sf.base.isNullOrUndefined(i)?this.orientation===t?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(i)],r=Math.ceil(f*(r/100))):r=parseInt(u,10),r},a.prototype.updatePaneFlexBasis=function(n){var i,r;return n.style.flexBasis.indexOf("%")>0?i=parseFloat(n.style.flexBasis.slice(0,n.style.flexBasis.indexOf("%"))):""!==n.style.flexBasis?i=this.convertPixelToPercentage(this.convertPixelToNumber(n.style.flexBasis)):(r=this.orientation===t?n.offsetWidth:n.offsetHeight,i=this.convertPixelToPercentage(r)),i},a.prototype.convertPixelToPercentage=function(n){return n/(this.orientation===t?this.element.offsetWidth:this.element.offsetHeight)*100},a.prototype.convertPixelToNumber=function(n){return n.indexOf("p")>-1?parseFloat(n.slice(0,n.indexOf("p"))):parseFloat(n)},a.prototype.updateCurrentSeparator=function(n){this.currentSeparator=n.classList.contains(e)?n:n.parentElement},a.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.onMouseMove,this);sf.base.EventHandler.add(document,"mouseup",this.onMouseUp,this);var n=sf.base.Browser.info.name===u?"pointermove":"touchmove",t=sf.base.Browser.info.name===u?"pointerup":"touchend";sf.base.EventHandler.add(document,n,this.onMouseMove,this);sf.base.EventHandler.add(document,t,this.onMouseUp,this)},a.prototype.unwireResizeEvents=function(){var n=sf.base.Browser.info.name===u?"pointermove":"touchmove",t=sf.base.Browser.info.name===u?"pointerup":"touchend";sf.base.EventHandler.remove(document,"mousemove",this.onMouseMove);sf.base.EventHandler.remove(document,"mouseup",this.onMouseUp);sf.base.EventHandler.remove(document,n,this.onMouseMove);sf.base.EventHandler.remove(document,t,this.onMouseUp);window.removeEventListener("resize",this.reportWindowSize.bind(this))},a.prototype.onMouseMove=function(i){var r,u,f;this.isCursorMoved(i)&&(this.getPaneDetails(),this.getPaneDimensions(),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getMouseEvtArgs(i),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]}),u=this.validateDraggedPosition(this.getSeparatorPosition(i),this.prePaneDimenson,this.nextPaneDimension),(this.getBorder(),r=this.orientation===t?this.element.getBoundingClientRect().left+u-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+u-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"===n(this.nextPaneHeightWidth)&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.prevPaneCurrentWidth=r+this.convertPixelToNumber(this.previousPaneHeightWidth),this.nextPaneCurrentWidth=this.nextPaneHeightWidth-r,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth)&&(f=this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth),this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+f),this.calculateCurrentDimensions(),this.addStaticPaneClass(),this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,this.allPanes.length>2||this.updateSplitterSize())},a.prototype.updateSplitterSize=function(n){for(var r,s,w,a,h,b,c=0,u=[],p=0,l=this.element.children,i=0;i<l.length;i++)c+=this.orientation===t?l[i].offsetWidth:l[i].offsetHeight;for(r=0;r<this.allBars.length;r++)s=getComputedStyle(this.allBars[r]),c+=this.orientation===t?parseInt(s.marginLeft,10)+parseInt(s.marginLeft,10):parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);for(w=this.orientation===t?this.element.offsetWidth-(2*this.border+c):this.element.offsetHeight-(2*this.border+c),i=0;i<this.allPanes.length;i++)this.paneSettings[i].size||""===this.allPanes[i].innerText||(u[p]=i,p++);for(a=w/u.length,r=0;r<u.length;r++)this.allPanes[u[r]].style.flexBasis=this.orientation===t?this.allPanes[u[r]].offsetWidth+a+f:this.allPanes[u[r]].offsetHeight+a+f;if(2===this.allPanes.length&&n){var k=this.allPanes.length,v=void 0,y=void 0,e=void 0,o=void 0;for(i=0;i<k;i++)!sf.base.isNullOrUndefined(this.paneSettings[i].min)&&(y=this.convertPixelToNumber(this.paneSettings[i].min.toString()),this.paneSettings[i].min.indexOf("%")>0&&(y=this.convertPercentageToPixel(this.paneSettings[i].min)),v=this.convertPixelToNumber(y.toString()),this.allPanes[i].offsetWidth<v)&&(0===i?(e=this.allPanes[i],o=this.allPanes[i+1]):(e=this.allPanes[i],o=this.allPanes[i-1]),h=v-this.allPanes[i].offsetWidth,b=e.style.flexBasis.indexOf("%")>-1,e.style.flexBasis=b?this.convertPixelToPercentage(e.offsetWidth+h)+"%":e.offsetWidth+h+"px",o.style.flexBasis=o.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(o.offsetWidth-h)+"%":o.offsetWidth-h+"px")}},a.prototype.calcDragPosition=function(n,i){var r;return(r=(r=(this.orientation===t?this.currentCoordinates.x-n:this.currentCoordinates.y-n)/i)>1?1:r<0?0:r)*i},a.prototype.getSeparatorPosition=function(n){this.updateCursorPosition(n,"current");var i=this.orientation===t?this.element.getBoundingClientRect().left:this.element.getBoundingClientRect().top+window.scrollY,r=this.orientation===t?this.element.offsetWidth:this.element.offsetHeight;return this.calcDragPosition(i,r)},a.prototype.getBorder=function(){var n=this.orientation===t?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2;this.border="chrome"!==sf.base.Browser.info.name?0:n},a.prototype.validateMinMaxValues=function(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane);this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane);this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane);this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)},a.prototype.validateMinRange=function(n,t){var r,u,i=null,f=0;return sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].min)||(i=this.paneSettings[n].min.toString()),sf.base.isNullOrUndefined(i)||(i.indexOf("%")>0&&(i=this.convertPercentageToPixel(i).toString()),t<(r=this.convertPixelToNumber(i))&&(f=t-r<=0?0:t-r,this.totalWidth=this.totalWidth-f,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),u=r)),sf.base.isNullOrUndefined(u)?t:u},a.prototype.validateMaxRange=function(n,t){var r,u,i=null;return sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].max)||(i=this.paneSettings[n].max.toString()),sf.base.isNullOrUndefined(i)||(i.indexOf("%")>0&&(i=this.convertPercentageToPixel(i).toString()),t>(r=this.convertPixelToNumber(i))&&(this.totalWidth=this.totalWidth-(t-r),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),u=r)),sf.base.isNullOrUndefined(u)?t:u},a.prototype.calculateCurrentDimensions=function(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")},a.prototype.equatePaneWidths=function(){var n;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(n=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-n/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-n/2+"%");this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(n=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+n/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+n/2+"%")},a.prototype.validateDraggedPosition=function(n,i,r){var h=this.orientation===t?this.currentSeparator.offsetLeft:this.currentSeparator.offsetTop,f=h-i,e=r+h,c=this.getMinMax(this.prevPaneIndex,"min"),l=this.getMinMax(this.nextPaneIndex,"min"),o=this.getMinMax(this.prevPaneIndex,"max"),s=this.getMinMax(this.nextPaneIndex,"max"),u=n;return n>e-l?u=e-l:n<f+c&&(u=f+c),sf.base.isNullOrUndefined(o)?sf.base.isNullOrUndefined(s)||n<e-s&&(u=e-s):n>f+o&&(u=f+o),u},a.prototype.getMinMax=function(n,t){var r="min"===t?0:null,i=null;return"min"===t?sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].min)||(i=this.paneSettings[n].min):sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].max)||(i=this.paneSettings[n].max),this.paneSettings.length>0&&!sf.base.isNullOrUndefined(this.paneSettings[n])&&!sf.base.isNullOrUndefined(i)?(i.indexOf("%")>0&&(i=this.convertPercentageToPixel(i).toString()),this.convertPixelToNumber(i)):r},a.prototype.isValidSize=function(n){var t;return!sf.base.isNullOrUndefined(this.paneSettings[n])&&!sf.base.isNullOrUndefined(this.paneSettings[n].size)&&this.paneSettings[n].size.indexOf("%")>-1&&(t=!0),t},a.prototype.getPaneDimensions=function(){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis;this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis;this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0);this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0);this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString());this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())},a.prototype.getPaneHeight=function(n){return this.orientation===t?n.offsetWidth.toString():n.offsetHeight.toString()},a.prototype.isCursorMoved=function(n){return"mouse"===this.getEventType(n.type)||!sf.base.isNullOrUndefined(n.pointerType)&&"mouse"===this.getEventType(n.pointerType)?this.checkCoordinates(n.pageX,n.pageY):sf.base.Browser.info.name!==u?this.checkCoordinates(n.touches[0].pageX,n.touches[0].pageY):this.checkCoordinates(n.pageX,n.pageY)},a.prototype.checkCoordinates=function(n,t){var i=!0;return n!==this.previousCoordinates.x&&t!==this.previousCoordinates.y||(i=!1),i},a.prototype.onMouseUp=function(n){sf.base.removeClass([this.currentSeparator],"e-split-bar-active");this.unwireResizeEvents();for(var t=0;t<this.element.querySelectorAll("iframe").length;t++)this.element.querySelectorAll("iframe")[t].style.pointerEvents="auto";this.getPaneDimensions();this.updatePersistData();this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStopEvent",{event:this.getMouseEvtArgs(n),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]})},a.prototype.isMouseEvent=function(n){var t;return("mouse"===this.getEventType(n.type)||!sf.base.isNullOrUndefined(n.pointerType)&&"mouse"===this.getEventType(n.pointerType))&&(t=!0),t},a.prototype.getEventType=function(n){return n.indexOf("mouse")>-1?"mouse":"touch"},a.prototype.updateCursorPosition=function(n,t){if(this.isMouseEvent(n))this.changeCoordinates({x:n.pageX,y:n.pageY},t);else{var i=sf.base.Browser.info.name!==u?n.touches[0]:n;this.changeCoordinates({x:i.pageX,y:i.pageY},t)}},a.prototype.changeCoordinates=function(n,t){"previous"===t?this.previousCoordinates=n:this.currentCoordinates=n},a.prototype.isResizable=function(){var t,n=this.getNextPaneIndex(),i=this.getPreviousPaneIndex();return(!sf.base.isNullOrUndefined(this.paneSettings[i])&&this.paneSettings[i].resizable&&!sf.base.isNullOrUndefined(this.paneSettings[n])&&this.paneSettings[n].resizable||sf.base.isNullOrUndefined(this.paneSettings[n]))&&(t=!0),t},a.prototype.clickHandler=function(n){var u,i;n.target.classList.contains("e-navigate-arrow")||(u=sf.base.selectAll(".e-splitter > ."+e+".e-split-bar-hover"),u.length>0&&sf.base.removeClass(u,"e-split-bar-hover"),sf.base.addClass([n.target],"e-split-bar-hover"));this.updateIconClass();i=n.target;(i.classList.contains(o)||i.classList.contains(s))&&this.collapseAction(n);(i.classList.contains("e-arrow-right")||i.classList.contains(h))&&this.expandAction(n);for(var c=0,f=this.element.children,r=0;r<f.length;r++)c+=this.orientation===t?f[r].offsetWidth:f[r].offsetHeight;c>this.element.offsetWidth&&this.updateSplitterSize()},a.prototype.collapseAction=function(n){if(this.splitterDetails(n),this.collapseFlag)this.collapsePane(n);else{var t={cancel:!1,event:n,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",-1,t):sf.base.isNullOrUndefined(n)?this.collapseMethodEvent(-1,t):this.onCollapseEvent(t)}},a.prototype.onCollapseEvent=function(n){var i=this.orientation===t?o:s,r={target:this.allBars[n.index[0]].querySelector("."+i)};this.collapsePane(r);this.collapsedEnabled&&this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(n),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]})},a.prototype.collapsePane=function(n){var u=this.element.querySelectorAll(".e-collapsed").length,t=this.nextPane.nextElementSibling,f=this.previousPane.classList.contains(i)&&!this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")&&t.classList.contains("e-pane")&&!t.classList.contains(i)&&!t.classList.contains("e-collapsed")&&!(u===this.allPanes.length-2)||this.nextPane.classList.contains("e-collapsed")&&!this.previousPane.classList.contains(i)&&this.nextPane.classList.contains(i),r=["e-collapsed","e-pane-hidden"];this.nextPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],r),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],r),sf.base.addClass([this.nextPane],"e-expanded"),sf.base.addClass([this.previousPane],r),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0));this.updateIconsOnCollapse(n);this.previousPane.setAttribute("aria-expanded","false");this.nextPane.setAttribute("aria-expanded","true");this.updateFlexGrow(this.checkStaticPanes());f&&(sf.base.removeClass([this.nextPane],"e-expanded"),this.nextPane.style.flexGrow="")},a.prototype.updateIconsOnCollapse=function(n){this.splitterProperty();this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")?(sf.base.addClass([n.target],r),this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],r),this.resizableModel(this.currentBarIndex,!1),!this.previousPane.classList.contains("e-collapsed")||this.nextPane.classList.contains("e-collapsed")||this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&(this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),sf.base.isNullOrUndefined(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):this.splitInstance.prevPaneCollapsed||this.splitInstance.nextPaneExpanded||(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains("e-collapsed")&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||sf.base.addClass([n.target],r),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.allBars[this.nextPaneIndex-1],this.rightArrow),!this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),sf.base.isNullOrUndefined(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex===this.allPanes.length-1||!this.nextPane.nextElementSibling||this.nextPane.classList.contains("e-collapsed")||this.nextPane.nextElementSibling.classList.contains("e-collapsed")||this.paneSettings[this.nextPaneIndex+1].collapsible||this.hideTargetBarIcon(this.nextBar,this.rightArrow))},a.prototype.expandAction=function(n){this.splitterDetails(n);this.expandFlag?this.onExpandEnabled?this.dotNetRef.invokeMethodAsync("OnExpandEvent",{cancel:!1,event:this.getMouseEvtArgs(n),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]}):this.onExpandEvent({event:n,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]}):this.expandPane(n)},a.prototype.onExpandEvent=function(n){var i=this.orientation===t?"e-arrow-right":h,r={target:this.allBars[n.index[0]].querySelector("."+i)};this.expandPane(r);this.expandedEnabled&&this.dotNetRef.invokeMethodAsync("ExpandedEvent",{event:this.getMouseEvtArgs(n.event),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]})},a.prototype.getSeparatorIndex=function(n){var r=this.orientation===t?"e-split-bar-horizontal":"e-split-bar-vertical",i;return this.allBars.length<1&&(this.allBars=sf.base.selectAll("."+r,this.element)),i=[].slice.call(this.allBars),(i=this.enableReversePanes?i.reverse():i).indexOf(n)},a.prototype.updateBars=function(n){this.prevBar=this.allBars[n-1];this.nextBar=this.allBars[n+1]},a.prototype.splitterDetails=function(n){this.element.classList.contains("e-splitter-horizontal")?(this.orientation=t,this.arrow=n.target.classList.contains(o)?"e-arrow-right":o):(this.orientation="Vertical",this.arrow=n.target.classList.contains(s)?h:s);this.updateCurrentSeparator(n.target);this.currentBarIndex=this.getOrderIndex(parseInt(this.currentSeparator.style.order),"splitbar");this.updateBars(this.currentBarIndex);this.getPaneDetails()},a.prototype.currentIndex=function(n){this.currentBarIndex=this.getOrderIndex(parseInt(n.parentElement.style.order),"splitbar")},a.prototype.expandPane=function(n){var r=this.element.querySelectorAll(".e-collapsed").length,u=!this.previousPane.classList.contains("e-collapsed")&&this.previousPane.classList.contains(i)&&!this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-expanded")&&this.nextPane.nextElementSibling.classList.contains("e-pane")&&!this.nextPane.nextElementSibling.classList.contains(i)&&!(r===this.allPanes.length-2),t=["e-collapsed","e-pane-hidden"];this.previousPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],t),sf.base.removeClass([this.nextPane],"e-expanded"),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(sf.base.removeClass([this.nextPane],"e-expanded"),sf.base.removeClass([this.previousPane],t),sf.base.addClass([this.previousPane],"e-expanded"),sf.base.addClass([this.nextPane],t),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0));this.updateIconsOnExpand(n);this.previousPane.setAttribute("aria-expanded","true");this.nextPane.setAttribute("aria-expanded","false");this.updateFlexGrow(this.checkStaticPanes());u&&(sf.base.removeClass([this.previousPane],"e-expanded"),this.previousPane.style.flexGrow="")},a.prototype.checkStaticPanes=function(){for(var t=!0,n=0;n<this.allPanes.length;n++)!this.allPanes[n].classList.contains("e-collapsed")&&t&&(t=!!this.allPanes[n].classList.contains(i));return t},a.prototype.splitterProperty=function(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains("e-collapsible"),prevPaneCollapsible:this.previousPane.classList.contains("e-collapsible"),prevPaneExpanded:this.previousPane.classList.contains("e-expanded"),nextPaneExpanded:this.nextPane.classList.contains("e-expanded"),nextPaneCollapsed:this.nextPane.classList.contains("e-collapsed"),prevPaneCollapsed:this.previousPane.classList.contains("e-collapsed"),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}},a.prototype.updateIconsOnExpand=function(n){this.splitterProperty();sf.base.addClass([n.target],r);this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],r),sf.base.isNullOrUndefined(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],r),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([n.target],r),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),sf.base.isNullOrUndefined(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains("e-collapsed")?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))},a.prototype.showResizer=function(n){!sf.base.isNullOrUndefined(this.previousPane)&&this.previousPane.classList.contains("e-resizable")&&!sf.base.isNullOrUndefined(this.nextPane)&&this.nextPane.classList.contains("e-resizable")&&sf.base.removeClass([sf.base.select("."+c,n)],"e-hide-handler")},a.prototype.resizableModel=function(n,t){var i,r=n;i=n===this.allBars.length?n-1:n;sf.base.EventHandler.remove(this.allBars[i],"mousedown",this.onMouseDown);t?(sf.base.EventHandler.add(this.allBars[i],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[i]),sf.base.removeClass([sf.base.select("."+c,this.allBars[i])],"e-hide-handler"),sf.base.addClass([this.allBars[i]],"e-resizable-split-bar"),n===this.allBars.length?sf.base.addClass([this.allPanes[n]],"e-resizable"):sf.base.addClass([this.allPanes[i]],"e-resizable"),this.updateResizablePanes(r))):(this.updateResizablePanes(r),sf.base.addClass([sf.base.select("."+c,this.allBars[i])],"e-hide-handler"),sf.base.removeClass([this.allBars[i]],"e-resizable-split-bar"),n===this.allBars.length?sf.base.removeClass([this.allPanes[n]],"e-resizable"):sf.base.removeClass([this.allPanes[i]],"e-resizable"))},a.prototype.hideTargetBarIcon=function(n,t){sf.base.addClass([sf.base.select("."+t,n)],r)},a.prototype.showTargetBarIcon=function(n,t){sf.base.removeClass([sf.base.select("."+t,n)],r)},a.prototype.updateFlexGrow=function(n){for(var i=this.allPanes,t=0;t<i.length;t++)i[t].style.flexGrow=i[t].classList.contains("e-expanded")?"1":i[t].classList.contains("e-collapsed")?"0":"",n&&!this.nextPane.classList.contains("e-collapsed")&&(this.nextPane.style.flexGrow="1")},a.prototype.updatePaneSettings=function(n,t){this.isToggleInvoke||(this.paneSettings[n].collapsed=t,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateCollapsed",n,t))},a.prototype.addMouseActions=function(n){var t,i,r=this;n.addEventListener("mouseenter",function(){t=setTimeout(function(){sf.base.addClass([n],["e-split-bar-hover"])},r.iconsDelay)});n.addEventListener("mouseleave",function(){clearTimeout(t);sf.base.removeClass([n],["e-split-bar-hover"])});n.addEventListener("mouseout",function(){clearTimeout(i)});n.addEventListener("mouseover",function(){i=setTimeout(function(){sf.base.addClass([n],["e-split-bar-hover"])},r.iconsDelay)})},a.prototype.updateIconClass=function(){this.orientation===t?(this.leftArrow=o,this.rightArrow="e-arrow-right"):(this.leftArrow=s,this.rightArrow=h)},a.prototype.isCollapsed=function(n){var i,r,e;if(!(!sf.base.isNullOrUndefined(n)&&this.paneSettings[n].collapsed&&this.allPanes.length>0&&!sf.base.isNullOrUndefined(this.allPanes[n])&&this.allPanes[n].classList.contains("e-collapsed"))){if(this.expandFlag=!1,sf.base.isNullOrUndefined(n)){for(i=0;i<this.allPanes.length;i++)!sf.base.isNullOrUndefined(this.paneSettings[i])&&this.paneSettings[i].collapsed&&this.updateIsCollapsed(i,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(i=this.allPanes.length-1;i>=0;i--)sf.base.isNullOrUndefined(this.paneSettings[i])||!this.paneSettings[i].collapsed||this.allPanes[i].classList.contains("e-collapsed")||(r=this.orientation===t?"e-arrow-right":h,0!==i&&this.collapseArrow(i-1,r).click(),this.nextPane.classList.contains("e-collapsed")||this.collapseArrow(i-1,r).click())}else{this.collapseFlag=!0;var u=n===this.allBars.length,f=u?n-1:n,o={target:!u&&this.allPanes[n+1].classList.contains("e-collapsed")&&0!==n?this.collapseArrow(f-1,this.targetArrows().lastBarArrow):u?this.collapseArrow(f,this.targetArrows().lastBarArrow):this.collapseArrow(f,this.targetArrows().collapseArrow)};this.splitterDetails(o);e={cancel:!1,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",n,e):this.collapseMethodEvent(n,e)}this.expandFlag=!0}},a.prototype.collapseMethodEvent=function(n,t){var r,u,i,f;for(this.expandFlag=!1,r=[],r[0]=n,u=1,i=0;i<this.allPanes.length;i++)this.allPanes[i].classList.contains("e-collapsed")&&(r[u]=i,u++);for(r=r.sort(),this.updateIsCollapsed(n,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow),i=0;i<r.length;i++)this.allPanes[r[i]].classList.contains("e-collapsed")||this.updateIsCollapsed(r[i],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(i=r.length;i>0;i--)this.allPanes[r[i-1]].classList.contains("e-collapsed")||(f=this.targetArrows(),this.updateIsCollapsed(r[i-1],f.collapseArrow,f.lastBarArrow));this.collapsedEnabled&&this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(t),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]});this.collapseFlag=!1;this.expandFlag=!0},a.prototype.toggle=function(n,t){this.isToggleInvoke=!0;for(var i=0;i<this.paneSettings.length;i++)n.indexOf(i)>-1&&this.paneSettings[i].collapsed&&(this.collapsedOnchange(i),this.paneSettings[i].collapsed=!1);for(i=0;i<this.paneSettings.length;i++)t.indexOf(i)>-1&&!this.paneSettings[i].collapsed&&(this.isCollapsed(i),this.paneSettings[i].collapsed=!0);this.isToggleInvoke=!1;this.updatePersistData();this.dotNetRef.invokeMethodAsync("UpdateSettings",this.paneSettings)},a.prototype.expand=function(n){this.collapsedOnchange(n);this.updatePaneSettings(n,!1)},a.prototype.collapse=function(n){this.isCollapsed(n);this.updatePaneSettings(n,!0)},a.prototype.collapsedOnchange=function(n){sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].collapsed)||!this.allPanes[n].classList.contains("e-collapsed")||this.updateIsCollapsed(n,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)},a.prototype.collapsibleModelUpdate=function(n){var r,u,i;i=n===this.allBars.length?n-1:n;r=this.orientation===t?this.checkArrow(i,o):this.checkArrow(i,s);u=this.orientation===t?this.checkArrow(i,"e-arrow-right"):this.checkArrow(i,h);this.paneCollapsible(this.allPanes[n],n);this.updateCollapseIcons(i,u,r)},a.prototype.updateCollapseIcons=function(n,t,i){sf.base.isNullOrUndefined(this.paneSettings[n])||sf.base.isNullOrUndefined(this.paneSettings[n].collapsible)||(this.paneSettings[n].collapsible?sf.base.removeClass([i],[r]):sf.base.addClass([i],[r]),sf.base.isNullOrUndefined(this.paneSettings[n+1])||(this.paneSettings[n+1].collapsible?sf.base.removeClass([t],[r]):sf.base.addClass([t],[r])))},a.prototype.checkArrow=function(n,t){return this.allBars[n].querySelector(".e-navigate-arrow."+t)},a.prototype.paneCollapsible=function(n,t){this.paneSettings[t].collapsible?sf.base.addClass([n],"e-collapsible"):sf.base.removeClass([n],"e-collapsible")},a.prototype.propertyChanged=function(n,t){var f=l({},this.paneSettings),r,i,u;if(sf.base.extend(this,this,n),this.updateClass(),t)for(r=0;r<=Object.keys(t).length;r++)if(i=parseInt(Object.keys(t)[r],10),Object(t)[i])for(u=0;u<Object(t)[i].length;u++)switch(Object(t)[i][u]){case"Visible":case"Resizable":this.resizableModel(i,this.paneSettings[i].resizable);break;case"Collapsible":this.collapsibleModelUpdate(i);break;case"Collapsed":f[i].collapsed!==n.paneSettings[i].collapsed&&(this.paneSettings[i].collapsed?this.isCollapsed(i):this.collapsedOnchange(i));break;case"Size":""===this.paneSettings[i].size||sf.base.isNullOrUndefined(this.paneSettings[i].size)||this.updatePaneSize(this.paneSettings[i].size,i)}},a.prototype.updatePaneSize=function(n,t){var s,e;this.allPanes[t].style.flexBasis=n;for(var u,f=[],o=0,r=0;r<this.allPanes.length;r++)this.paneSettings[r].size||""===this.allPanes[r].innerText?this.paneSettings[r].size&&(u="Horizontal"===this.orientation?this.allPanes[t].offsetWidth:this.allPanes[t].offsetHeight):(f[o]=r,o++);for(u="Horizontal"===this.orientation?this.allBars[0].offsetWidth*this.allBars.length+u:this.allBars[0].offsetHeight*this.allBars.length+u,s=(("Horizontal"===this.orientation?this.element.offsetWidth:this.element.offsetHeight)-u-2*this.border)/f.length,e=0;e<f.length;e++)this.allPanes[f[e]].style.flexBasis=s+"px";this.allPanes[t].classList.add(i)},a.prototype.targetArrows=function(){return this.splitterProperty(),{collapseArrow:this.orientation===t?o:s,lastBarArrow:"Vertical"===this.orientation?h:"e-arrow-right"}},a.prototype.collapseArrow=function(n,t){return sf.base.selectAll("."+t,this.allBars[n])[0]},a.prototype.updateIsCollapsed=function(n,t,i){if(!sf.base.isNullOrUndefined(n)){var r=n===this.allBars.length,u=r?n-1:n;(!r&&this.allPanes[n+1].classList.contains("e-collapsed")&&0!==n?this.collapseArrow(u-1,i):r?this.collapseArrow(u,i):this.collapseArrow(u,t)).click()}},a.prototype.updatePersistData=function(){for(var t=[],i=this.element.querySelectorAll(".e-pane"),n=0;n<this.paneSettings.length;n++)t.push(JSON.parse(JSON.stringify(this.paneSettings[n]))),delete t[n].collapsible,delete t[n].content,delete t[n].cssClass,delete t[n].resizable,t[n].size=i[n].style.flexBasis;this.enablePersistence&&window.localStorage.setItem(this.id,JSON.stringify(t))},a.prototype.destroy=function(){for(sf.base.EventHandler.remove(document,"touchstart click",this.onDocumentClick),this.updatePersistData();this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name);for(var t=this.element.children,n=t.length-1;n>=0;n--)sf.base.detach(t[n])},a}();return{initialize:function(n,t,i){sf.base.isNullOrUndefined(n)||(new a(n,t,i),n.blazor__instance.initialize())},collapse:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.collapse(t)},expand:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.expand(t)},toggle:function(n,t,i){sf.base.isNullOrUndefined(n)||n.blazor__instance.toggle(t,i)},resizeEvent:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.resizeEvent(t)},onCollapseEvent:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.onCollapseEvent(t)},collapseMethodEvent:function(n,t,i){sf.base.isNullOrUndefined(n)||n.blazor__instance.collapseMethodEvent(i,t)},onExpandEvent:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.onExpandEvent(t)},destroy:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.destroy()},setReversePane:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.setReversePane()},updateSeparator:function(n){sf.base.isNullOrUndefined(n.element)||n.element.blazor__instance.updateSeparator()},propertyChanged:function(n,t){sf.base.isNullOrUndefined(n.element)||n.element.blazor__instance.propertyChanged(n,t)}}}()},"./modules/sf-stock-chart.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.StockChart=function(){"use strict";var t=sf.base.isNullOrUndefined(window._)?null:window._.throttle,i=function(){function i(n,t,i){this.mouseY=0;this.mouseX=0;this.eventInterval=80;this.mouseMoveRef=null;this.mouseLeaveRef=null;this.chartMouseWheelRef=null;this.domMouseMoveRef=null;this.domMouseUpRef=null;this.id=n;this.element=t;this.dotnetref=i;this.element.blazor__instance=this}return i.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref);this.wireEvents(this.id,this.dotnetref)},i.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref)},i.prototype.unWireEvents=function(t,i){var r=document.getElementById(t),u,f;r&&(this.dotnetref=i,n.dotnetrefCollection=n.dotnetrefCollection.filter(function(n){return n.id!==t}),u=sf.base.Browser.isPointer?"pointerleave":"mouseleave",r.removeEventListener("mousemove",this.mouseMoveRef),r.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(r,u,this.mouseLeaveRef),f=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",sf.base.EventHandler.remove(window,f,n.resizeBound))},i.prototype.wireEvents=function(i,r){var f=this,u=document.getElementById(i),e,o;u&&(this.dotnetref=r,n.dotnetrefCollection.push({id:i,dotnetref:r}),e=sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseMoveRef=this.mouseMove.bind(this,r,i),this.mouseLeaveRef=this.mouseLeave.bind(this,r,i),u.addEventListener("mousemove",t(function(n){f.mouseMoveRef(n)},this.eventInterval)),u.addEventListener("touchmove",t(function(n){f.mouseMoveRef(n)},this.eventInterval)),sf.base.EventHandler.add(u,e,this.mouseLeaveRef),n.resizeBound=n.chartResize.bind(this,n.dotnetrefCollection),o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",sf.base.EventHandler.add(window,o,n.resizeBound))},i.prototype.getEventArgs=function(n,t){var e=n.changedTouches?n.changedTouches[0].clientX:n.clientX,o=n.changedTouches?n.changedTouches[0].clientY:n.clientY,r,u,i,f;if(this.setMouseXY(e,o,t),r=n.touches,u=[],n.type.indexOf("touch")>-1)for(i=0,f=r.length;i<f;i++)u.push({pageX:r[i].clientX,pageY:r[i].clientY,pointerId:n.pointerId||0});return{type:n.type,clientX:n.clientX,clientY:n.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:n.pointerType,target:n.target.id,changedTouches:{clientX:n.changedTouches?n.changedTouches[0].clientX:0,clientY:n.changedTouches?n.changedTouches[0].clientY:0},touches:u,pointerId:n.pointerId}},i.prototype.setMouseXY=function(n,t,i){var u=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),r=document.getElementById(i).getBoundingClientRect();this.mouseY=t-r.top-Math.max(u.top-r.top,0);this.mouseX=n-r.left-Math.max(u.left-r.left,0)},i.prototype.mouseMove=function(n,t,i){var r,u,f;return"touchmove"===i.type?(this.isTouch=!0,r=(f=i).changedTouches[0].clientX,u=f.changedTouches[0].clientY,i.preventDefault()):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,r=i.clientX,u=i.clientY),this.dotnetref=n,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(r,u,t),n.invokeMethodAsync("OnStockChartMouseMove",this.getEventArgs(i,t))),!1},i.prototype.mouseLeave=function(n,t,i){return this.dotnetref=n,n.invokeMethodAsync("OnStockChartMouseLeave",this.getEventArgs(i,t)),!1},i}(),n={initialize:function(n,t){new i(n.id,n,t).render()},destroy:function(n){var t=n.blazor__instance;sf.base.isNullOrUndefined(t)||t.destroy()},eventInterval:80,dotnetref:{},dotnetrefCollection:[],renderTooltip:function(n,t,i,r){var e=document.getElementById(t+"_svg"),o=!(e&&parseInt(e.getAttribute("opacity"),10)>0),f=JSON.parse(n),u=r.blazor__instance;o&&!sf.base.isNullOrUndefined(u)?(u.tooltip=new sf.svgbase.Tooltip(f),u.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(u.tooltip)||(u.tooltip.location=new sf.svgbase.TooltipLocation(f.location.x,f.location.y),u.tooltip.content=f.content,u.tooltip.header=f.header,u.tooltip.offset=f.offset,u.tooltip.palette=f.palette,u.tooltip.shapes=f.shapes,u.tooltip.data=f.data,u.tooltip.template=f.template,u.tooltip.textStyle.color=f.textStyle.color||u.tooltip.textStyle.color,u.tooltip.textStyle.fontFamily=f.textStyle.fontFamily||u.tooltip.textStyle.fontFamily,u.tooltip.textStyle.fontStyle=f.textStyle.fontStyle||u.tooltip.textStyle.fontStyle,u.tooltip.textStyle.fontWeight=f.textStyle.fontWeight||u.tooltip.textStyle.fontWeight,u.tooltip.textStyle.opacity=f.textStyle.opacity||u.tooltip.textStyle.opacity,u.tooltip.textStyle.size=f.textStyle.size||u.tooltip.textStyle.size,u.tooltip.isNegative=f.isNegative,u.tooltip.clipBounds=new sf.svgbase.TooltipLocation(f.clipBounds.x,f.clipBounds.y),u.tooltip.arrowPadding=f.arrowPadding,u.tooltip.dataBind())},fadeOut:function(n){if(!(sf.base.isNullOrUndefined(n.blazor__instance)||!sf.base.isNullOrUndefined(n.blazor__instance)&&sf.base.isNullOrUndefined(n.blazor__instance.tooltip))){var t=document.getElementById(n.blazor__instance.tooltip.element.id+"_svg");t&&"0"===t.getAttribute("opacity")||n.blazor__instance.tooltip.fadeOut()}},getParentElementBoundsById:function(n){var t=document.getElementById(n),r;if(t&&t.parentElement){r=t.parentElement.style.width;t.parentElement.style.width="100%";var i=t.parentElement.getBoundingClientRect(),u=window.getComputedStyle(t.parentElement),f=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),e={width:Math.max(0,i.width-f),height:t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom};return t.parentElement.style.width=r,e}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(n){var t=document.getElementById(n),i;return t?(i=t.getBoundingClientRect(),{width:t.clientWidth||t.offsetWidth,height:t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}):{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setAttribute:function(n,t,i){var r=document.getElementById(n);r&&r.setAttribute(t,i)},createTooltip:function(n,t,i,r,u){var f=document.getElementById(n),e="top:"+i.toString()+"px;left:"+r.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+u+";border-radius:2px; z-index:1";f?(f.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),f.setAttribute("styles",e)):(f=sf.base.createElement("div",{id:n,innerHTML:"&nbsp;"+t+"&nbsp;",styles:e}),document.body.appendChild(f))},removeElement:function(n){var t=this.getElement(n);t&&sf.base.remove(t)},resizeBound:{},resize:{},chartResize:function(n,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout(function(){for(var u=n.length,r=0;r<u;r++)n[r].dotnetref.invokeMethodAsync("OnStockChartResize",t);clearTimeout(i.resize)},500),!1}};return n}()},"./modules/sf-tab.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Tab=function(){"use strict";var t="e-tab-header",i="e-tab-wrap",r="e-toolbar-items",n="e-toolbar-item",u=function(){function u(n,t,i){this.show={};this.hide={};this.draggableItems=[{}];this.resizeContext=this.refreshActElePosition.bind(this);this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space","delete":"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"};this.element=n;this.element.blazor__instance=this;this.dotNetRef=i;this.options=t}return u.prototype.render=function(){var t=sf.base.closest(this.element,".e-content"),n,i;this.prevIndex=0;this.isPopup=!1;this.initRender=!0;this.isSwipeed=!1;sf.base.isNullOrUndefined(t)||t.parentElement.classList.add("e-nested");n=sf.base.Browser.info.name;i="msie"===n?"e-ie":"edge"===n?"e-edge":"safari"===n?"e-safari":"";sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.options.width),height:sf.base.formatUnit(this.options.height)});sf.base.attributes(this.element,{"aria-disabled":"false","aria-activedescendant":""});this.setCssClass(this.element,i,!0);this.updatePopAnimationConfig();this.tabId=this.element.id.length>0?"-"+this.element.id:sf.base.getRandomId();this.wireEvents();this.initRender=!1},u.prototype.serverItemsChanged=function(){if(this.enableAnimation=!1,this.setActive(this.options.selectedItem),"Dynamic"!==this.options.loadOn&&!sf.base.isNullOrUndefined(this.cntEle)){var t=[].slice.call(this.cntEle.children),n="e-content"+this.tabId+"_"+this.options.selectedItem;t.forEach(function(t){t.classList.contains("e-active")&&t.id!==n&&t.classList.remove("e-active");t.id===n&&t.classList.add("e-active")});this.prevIndex=this.options.selectedItem;this.triggerAnimation("e-item"+this.tabId+"_"+this.options.selectedItem,!1)}this.enableAnimation=!0},u.prototype.headerReady=function(){var i,u;(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.options.headerPlacement,this.hdrEle),this.tbItems=sf.base.select("."+t+" ."+r,this.element),sf.base.isNullOrUndefined(this.tbItems)||sf.base.rippleEffect(this.tbItems,{selector:".e-tab-wrap"}),sf.base.selectAll("."+n,this.element).length>0)&&(this.bdrLine=sf.base.select(".e-indicator.e-ignore",this.element),i=sf.base.select("."+this.scrCntClass,this.tbItems),sf.base.isNullOrUndefined(i)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):i.insertBefore(this.bdrLine,i.firstElementChild),this.select(this.options.selectedItem));(this.cntEle=sf.base.select(".e-tab > .e-content",this.element),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)}),"auto"===this.options.height||this.isVertical()||(this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)")),"Demand"===this.options.loadOn)&&(u=this.setActiveContent(),this.triggerAnimation(u,!1));this.initRender=!1},u.prototype.setActiveContent=function(){var n="e-item"+this.tabId+"_"+this.options.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(n));return sf.base.isNullOrUndefined(t)||t.classList.add("e-active"),n},u.prototype.removeActiveClass=function(){var t=this.getTabHeader(),i;t&&(i=sf.base.selectAll("."+n+".e-active",t),sf.base.removeClass(i,"e-active"))},u.prototype.checkPopupOverflow=function(n){this.tbPop=sf.base.select(".e-toolbar-pop",this.element);var t=sf.base.select(".e-hor-nav",this.element),i=sf.base.select("."+r,this.element),u=i.lastChild;return(!this.isVertical()&&(this.options.enableRtl&&t.offsetLeft+t.offsetWidth>i.offsetLeft||!this.options.enableRtl&&t.offsetLeft<i.offsetWidth)||this.isVertical()&&t.offsetTop<u.offsetTop+u.offsetHeight)&&(n.classList.add("e-toolbar-popup"),this.tbPop.insertBefore(n,sf.base.selectAll(".e-toolbar-popup",this.tbPop)[0])),!0},u.prototype.popupHandler=function(t){var u=t.querySelector(".e-ripple-element"),f,e;return sf.base.isNullOrUndefined(u)||(u.outerHTML="",t.querySelector("."+i).classList.remove("e-ripple")),this.tbItem=sf.base.selectAll("."+r+" ."+n,this.hdrEle),f=this.tbItem[this.tbItem.length-1],0!==this.tbItem.length&&((t.classList.remove("e-toolbar-popup"),t.removeAttribute("style"),this.tbItems.appendChild(t),this.checkPopupOverflow(f))&&(e=this.tbItems.lastChild.previousElementSibling,this.checkPopupOverflow(e)),this.isPopup=!0),sf.base.selectAll("."+n,this.tbItems).length-1},u.prototype.previousContentAnimation=function(n,t){return this.isPopup||n<=t?"SlideLeftIn"===this.options.animation.previous.effect?{name:"SlideLeftOut",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}:null:"SlideRightIn"===this.options.animation.next.effect?{name:"SlideRightOut",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}:null},u.prototype.triggerPreviousAnimation=function(n,t){var i=this.previousContentAnimation(t,this.options.selectedItem);sf.base.isNullOrUndefined(i)?n.classList.remove("e-active"):(i.begin=function(){sf.base.setStyleAttribute(n,{position:"absolute"});sf.base.addClass([n],["e-progress","e-view"])},i.end=function(){n.style.display="none";sf.base.removeClass([n],["e-active","e-progress","e-view"]);sf.base.setStyleAttribute(n,{display:"",position:""});0===n.childNodes.length&&sf.base.detach(n)},new sf.base.Animation(i).animate(n))},u.prototype.triggerAnimation=function(n,t){var i,r,h=this,c=this.prevIndex,o,l,u,s,f,e;"Dynamic"!==this.options.loadOn?([].slice.call(this.element.querySelector(".e-content").children).forEach(function(n){n.id===h.prevActiveEle&&(i=n)}),o=this.tbItem[c],(r=this.getTrgContent(this.cntEle,this.extIndex(n)),sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(o))&&(l=this.extIndex(o.id),i=this.getTrgContent(this.cntEle,l))):r=this.cntEle.firstElementChild;(sf.base.isNullOrUndefined(r)||(this.prevActiveEle=r.id),this.initRender||!1===t||this.options.animation==={}||sf.base.isNullOrUndefined(this.options.animation))?i&&i!==r&&i.classList.remove("e-active"):(s=sf.base.select(".e-content",this.element),this.prevIndex>this.options.selectedItem&&!this.isPopup?(f=this.options.animation.previous.effect,u={name:"None"===f?"":"SlideLeftIn"!==f?f:"SlideLeftIn",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}):(this.isPopup||this.prevIndex<this.options.selectedItem||this.prevIndex===this.options.selectedItem)&&(e=this.options.animation.next.effect,u={name:"None"===e?"":"SlideRightIn"!==e?e:"SlideRightIn",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}),u.progress=function(){s.classList.add("e-progress");h.setActiveBorder()},u.end=function(){s.classList.remove("e-progress");r.classList.add("e-active")},this.initRender||sf.base.isNullOrUndefined(i)||this.triggerPreviousAnimation(i,c),this.isPopup=!1,""===u.name?r.classList.add("e-active"):new sf.base.Animation(u).animate(r))},u.prototype.keyPressed=function(i){var r=sf.base.closest(i,"."+t+" ."+n),u=this.getEleIndex(r);!sf.base.isNullOrUndefined(this.popEle)&&i.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):i.classList.contains("e-scroll-nav")?i.click():sf.base.isNullOrUndefined(r)||!1!==r.classList.contains("e-active")||(this.select(u),sf.base.isNullOrUndefined(this.popEle)||this.popObj.hide(this.hide))},u.prototype.getTabHeader=function(){var i=[].slice.call(this.element.children).filter(function(n){return n.classList.contains(t)}),n;return i.length>0?i[0]:(n=[].slice.call(this.element.children).filter(function(n){return!n.classList.contains("blazor-template")})[0],n?[].slice.call(n.children).filter(function(n){return n.classList.contains(t)})[0]:void 0)},u.prototype.getEleIndex=function(t){return Array.prototype.indexOf.call(sf.base.selectAll("."+n,this.getTabHeader()),t)},u.prototype.extIndex=function(n){return n.replace("e-item"+this.tabId+"_","")},u.prototype.getTrgContent=function(n,t){return this.element.classList.contains("e-nested")?sf.base.select(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(n.children,"e-content"+this.tabId+"_"+t)},u.prototype.findEle=function(n,t){for(var r,i=0;i<n.length;i++)if(n[i].id===t){r=n[i];break}return r},u.prototype.isVertical=function(){var n="Left"===this.options.headerPlacement||"Right"===this.options.headerPlacement;return this.scrCntClass=n?"e-vscroll-content":"e-hscroll-content",n},u.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100};this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},u.prototype.focusItem=function(){var n=sf.base.select(" #e-item"+this.tabId+"_"+this.options.selectedItem,this.hdrEle);sf.base.isNullOrUndefined(n)||n.firstElementChild.focus()},u.prototype.serverChangeOrientation=function(n,t,i,r){if(this.setOrientation(n,this.hdrEle),sf.base.removeClass([this.element],["e-vertical-tab","e-vertical-left","e-vertical-right"]),r&&this.changeToolbarOrientation(t,i),this.isVertical()){var u="Left"===this.options.headerPlacement?"e-vertical-left":"e-vertical-right";this.element.classList.contains("e-nested")?sf.base.addClass([this.hdrEle],["e-vertical-tab",u]):sf.base.addClass([this.element],["e-vertical-tab",u])}this.setActiveBorder();this.focusItem()},u.prototype.changeToolbarOrientation=function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.width=t?"auto":"100%",n.blazor__instance.options.height=t?"100%":"auto",n.blazor__instance.options.isVertical=t,n.blazor__instance.changeOrientation());this.updatePopAnimationConfig()},u.prototype.setOrientation=function(n,t){var i=Array.prototype.indexOf.call(this.element.children,t),r=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===n&&r>i?this.element.appendChild(t):(sf.base.removeClass([t],["e-horizontal-bottom"]),this.element.insertBefore(t,sf.base.select(".e-content",this.element)))},u.prototype.setCssClass=function(n,t,i){""!==t&&(i?sf.base.addClass([n],t.split(" ")):sf.base.removeClass([n],t.split(" ")))},u.prototype.setActiveBorder=function(){var f=this.getTabHeader(),t=sf.base.select("."+n+".e-active",f),o,i,u,e;null!==t&&(t.classList.contains("e-toolbar-popup")&&this.popupHandler(t),o=sf.base.closest(t,".e-tab"),this.element===o&&(this.tbItems=sf.base.select("."+r,f),i=sf.base.select(".e-indicator",f),u=sf.base.select("."+r+" ."+this.scrCntClass,f),this.isVertical()?(sf.base.setStyleAttribute(i,{left:"",right:""}),0!==(sf.base.isNullOrUndefined(u)?this.tbItems.offsetHeight:u.offsetHeight)?sf.base.setStyleAttribute(i,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):sf.base.setStyleAttribute(i,{top:0,height:0})):(sf.base.setStyleAttribute(i,{top:"",height:""}),e=sf.base.isNullOrUndefined(u)?this.tbItems.offsetWidth:u.offsetWidth,0!==e?sf.base.setStyleAttribute(i,{left:t.offsetLeft+"px",right:e-(t.offsetLeft+t.offsetWidth)+"px"}):sf.base.setStyleAttribute(i,{left:"auto",right:"auto"})),sf.base.isNullOrUndefined(this.bdrLine)||this.bdrLine.classList.remove("e-hidden")))},u.prototype.setActive=function(t){var i,u,r,e,f;this.tbItem=sf.base.selectAll("."+n,this.getTabHeader());sf.base.isNullOrUndefined(this.hdrEle)&&(this.hdrEle=this.getTabHeader());i=this.hdrEle.querySelector("."+n+'[data-index="'+t+'"]');!i||t<0||isNaN(t)||0===this.tbItem.length||((this.options.selectedItem=t,i.classList.contains("e-active"))?this.setActiveBorder():(u=this.tbItem[this.prevIndex],sf.base.isNullOrUndefined(u)||u.removeAttribute("aria-controls"),sf.base.attributes(i,{"aria-controls":"e-content"+this.tabId+"_"+t}),r=i.id,this.removeActiveClass(),i.classList.add("e-active"),i.setAttribute("aria-selected","true"),e=Number(this.extIndex(r)),(sf.base.isNullOrUndefined(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+e),sf.base.attributes(this.element,{"aria-activedescendant":r}),"Init"===this.options.loadOn)&&(this.cntEle=sf.base.select(".e-tab > .e-content",this.element),f=this.getTrgContent(this.cntEle,this.extIndex(r)),sf.base.isNullOrUndefined(f)||f.classList.add("e-active"),this.triggerAnimation(r,this.enableAnimation)),this.setActiveBorder(),this.refreshItemVisibility(i),this.initRender||i.firstElementChild.focus()))},u.prototype.contentReady=function(){var n=this.setActiveContent();this.triggerAnimation(n,this.enableAnimation)},u.prototype.setRTL=function(n){this.setCssClass(this.element,"e-rtl",n);this.refreshActiveBorder()},u.prototype.refreshActiveBorder=function(){sf.base.isNullOrUndefined(this.bdrLine)||this.bdrLine.classList.add("e-hidden");this.setActiveBorder()},u.prototype.setDragAndDrop=function(n){n?this.bindDraggable():this.draggableItems&&this.draggableItems.forEach(function(n){n&&0!==Object.keys(n).length&&n.destroy()})},u.prototype.showPopup=function(n){var t=sf.base.select(".e-popup.e-toolbar-pop",this.hdrEle),i;t&&t.classList.contains("e-popup-close")&&(i=t&&t.ej2_instances[0],i.position.X="Left"===this.options.headerPlacement?"left":"right",i.dataBind(),i.show(n))},u.prototype.initializeDrag=function(r){var u=this,f;this.options.dragArea=sf.base.isNullOrUndefined(this.options.dragArea)?"#"+this.element.id+" ."+t:this.options.dragArea;f=new sf.base.Draggable(r,{dragArea:this.options.dragArea,dragTarget:"."+n,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(r){var e,o=u.getEleIndex(u.dragItem);if(sf.base.isNullOrUndefined(r.target.closest(".e-tab"))||r.target.closest(".e-tab").isEqualNode(u.element)||u.options.dragArea==="."+t){if(r.target.closest(u.options.dragArea)||"Popup"===u.options.overflowMode?(document.body.style.cursor="",u.dragItem.querySelector("."+i).style.visibility="hidden",u.cloneElement.classList.contains("e-hidden")&&sf.base.removeClass([u.cloneElement],"e-hidden")):(document.body.style.cursor="not-allowed",sf.base.addClass([u.cloneElement],"e-hidden"),u.dragItem.classList.contains("e-hidden")&&sf.base.removeClass([u.dragItem],"e-hidden"),u.dragItem.querySelector("."+i).style.visibility="visible"),"Scrollable"===u.options.overflowMode&&!sf.base.isNullOrUndefined(u.element.querySelector(".e-hscroll"))){var h=u.element.querySelector(".e-scroll-right-nav"),s=u.element.querySelector(".e-scroll-left-nav"),c=u.element.querySelector(".e-hscroll-bar");!sf.base.isNullOrUndefined(h)&&Math.abs(h.offsetWidth/2+h.offsetLeft)>u.cloneElement.offsetLeft+u.cloneElement.offsetWidth&&(c.scrollLeft-=10);!sf.base.isNullOrUndefined(s)&&Math.abs(s.offsetLeft+s.offsetWidth-u.cloneElement.offsetLeft)>s.offsetWidth/2&&(c.scrollLeft+=10)}u.cloneElement.style.pointerEvents="none";var a=u.cloneElement.getBoundingClientRect().left,v=u.cloneElement.getBoundingClientRect().top,y=document.elementFromPoint(a,v),f=sf.base.closest(y,"."+n),l=0;"Scrollable"!==u.options.overflowMode||sf.base.isNullOrUndefined(u.element.querySelector(".e-hscroll"))||(l=u.element.querySelector(".e-hscroll-content").offsetWidth);null!=f&&!f.isSameNode(u.dragItem)&&f.closest(".e-tab").isSameNode(u.dragItem.closest(".e-tab"))&&((e=u.getEleIndex(f))<o&&Math.abs(f.offsetLeft+f.offsetWidth-u.cloneElement.offsetLeft)>f.offsetWidth/2&&u.dragAction(f,o,e),e>o&&Math.abs(f.offsetWidth/2)+f.offsetLeft-l<u.cloneElement.offsetLeft+u.cloneElement.offsetWidth&&u.dragAction(f,o,e));u.droppedIndex=u.getEleIndex(u.dragItem)}},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(f)},u.prototype.helper=function(n){return n.element&&(this.cloneElement=n.element.cloneNode(!0),sf.base.addClass([this.cloneElement],["e-tab-clone-element","e-tab"]),sf.base.removeClass([this.cloneElement.querySelector("."+i)],"e-ripple"),sf.base.isNullOrUndefined(this.cloneElement.querySelector(".e-ripple-element"))||sf.base.remove(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},u.prototype.itemDragStart=function(n){var t=this;this.dragItem=n.element;this.dragStartIndex=this.getEleIndex(this.dragItem);this.element.querySelector(".e-toolbar");this.dotNetRef.invokeMethodAsync("OnDragStart",this.dragStartIndex).then(function(r){r?sf.base.detach(t.cloneElement):(t.removeActiveClass(),sf.base.addClass([t.tbItems.querySelector(".e-indicator")],"e-hidden"),t.dragItem.querySelector("."+i).style.visibility="hidden",n.bindEvents(sf.base.getElement(n.dragElement)))})},u.prototype.dragAction=function(n,t,i){var r,u;("MultiRow"===this.options.overflowMode&&n.parentNode.insertBefore(this.dragItem,n.nextElementSibling),t>i)&&(this.dragItem.parentElement.isSameNode(n.parentElement)?this.dragItem.parentNode.insertBefore(this.dragItem,n):"Extended"===this.options.overflowMode?n.isSameNode(n.parentElement.lastChild)?(r=this.dragItem.parentNode,n.parentNode.insertBefore(this.dragItem,n),r.insertBefore(n.parentElement.lastChild,r.childNodes[0])):(this.dragItem.parentNode.insertBefore(n.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),n.parentNode.insertBefore(this.dragItem,n)):(u=n.parentElement.lastChild,n.isSameNode(u)?(r=this.dragItem.parentNode,n.parentNode.insertBefore(this.dragItem,n),r.insertBefore(u,r.childNodes[0])):(this.dragItem.parentNode.insertBefore(n.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),n.parentNode.insertBefore(this.dragItem,n))));t<i&&(this.dragItem.parentElement.isSameNode(n.parentElement)?this.dragItem.parentNode.insertBefore(n,this.dragItem):"Extended"===this.options.overflowMode?(this.dragItem.parentElement.appendChild(n.parentElement.firstElementChild),n.parentNode.insertBefore(this.dragItem,n.nextSibling)):(this.dragItem.parentNode.insertBefore(n.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),n.parentNode.insertBefore(this.dragItem,n)))},u.prototype.itemDragStop=function(n){var t,r,u;sf.base.detach(this.cloneElement);t=this.element.querySelector(".e-toolbar");this.dragItem.querySelector("."+i).style.visibility="visible";sf.base.addClass([t],"e-drag-action");document.body.style.cursor="";r=this.getXYValue(n.event,"X");u=this.getXYValue(n.event,"Y");this.dotNetRef.invokeMethodAsync("Dragged",this.droppedIndex,this.dragStartIndex,r,u)},u.prototype.getXYValue=function(n,t){var r,i=n.changedTouches;return r="X"===t?i?i[0].clientX:n.clientX:i?i[0].clientY:n.clientY,Math.ceil(r)},u.prototype.bindDraggable=function(){var i=this;this.options.allowDragAndDrop&&this.element.querySelectorAll("."+n).forEach(function(n){sf.base.isNullOrUndefined(i.options.dragArea)&&(i.options.dragArea="#"+i.element.id+" ."+t);n.classList.contains("e-draggable")||i.initializeDrag(n)})},u.prototype.wireEvents=function(){this.bindDraggable();window.addEventListener("resize",this.resizeContext);sf.base.EventHandler.add(this.element,"keydown",this.spaceKeyDown,this);sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)}));this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs});this.tabKeyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},u.prototype.unWireEvents=function(){this.keyModule.destroy();this.tabKeyModule.destroy();sf.base.isNullOrUndefined(this.cntEle)||this.touchModule.destroy();window.removeEventListener("resize",this.resizeContext);sf.base.EventHandler.remove(this.element,"keydown",this.spaceKeyDown);sf.base.removeClass([this.element],["e-rtl","e-focused"])},u.prototype.swipeHandler=function(t){var i,r;if(!(t.velocity<3&&sf.base.isNullOrUndefined(t.originalEvent.changedTouches))){if(t.originalEvent&&t.originalEvent.stopPropagation(),this.isSwipeed=!0,"Right"===t.swipeDirection&&0!==this.options.selectedItem){for(i=this.options.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains("e-hidden")&&!this.tbItem[i].classList.contains("e-disable")){this.select(i);break}}else if("Left"===t.swipeDirection&&this.options.selectedItem!==sf.base.selectAll("."+n,this.element).length-1)for(r=this.options.selectedItem+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")&&!this.tbItem[r].classList.contains("e-disable")){this.select(r);break}this.isSwipeed=!1}},u.prototype.spaceKeyDown=function(n){if(32===n.keyCode&&32===n.which||35===n.keyCode&&35===n.which){var i=sf.base.closest(n.target,"."+t);sf.base.isNullOrUndefined(i)||n.preventDefault()}},u.prototype.keyHandler=function(t){var f;if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var e,u,r=t.target,o=this.getTabHeader(),s=sf.base.select(".e-active",o);switch(this.popEle=sf.base.select(".e-toolbar-pop",o),sf.base.isNullOrUndefined(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),t.action){case"space":case"enter":if(r.parentElement.classList.contains("e-disable"))return;if("enter"===t.action&&r.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(r);break;case"tab":case"shiftTab":r.classList.contains(i)&&!1===sf.base.closest(r,"."+n).classList.contains("e-active")&&r.setAttribute("tabindex","-1");this.popObj&&sf.base.isVisible(this.popObj.element)&&this.popObj.hide(this.hide);s.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":e=sf.base.closest(document.activeElement,"."+n);sf.base.isNullOrUndefined(e)||this.refreshItemVisibility(e);break;case"openPopup":t.preventDefault();!sf.base.isNullOrUndefined(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(u=sf.base.closest(r,"."+n),!0===this.options.showCloseButton&&!sf.base.isNullOrUndefined(u)){if(-1===this.getEleIndex(u))return;f=u.nextSibling;!sf.base.isNullOrUndefined(f)&&f.classList.contains(n)&&f.firstElementChild.focus();this.dotNetRef.invokeMethodAsync("RemoveTab",parseInt(u.getAttribute("data-index"),10))}this.setActiveBorder()}}},u.prototype.refreshActElePosition=function(){var t=sf.base.select("."+n+".e-toolbar-popup.e-active",this.element);sf.base.isNullOrUndefined(t)||this.select(this.getEleIndex(t));this.refreshActiveBorder()},u.prototype.refreshItemVisibility=function(n){var s=sf.base.select("."+this.scrCntClass,this.tbItems),r;if(!this.isVertical()&&!sf.base.isNullOrUndefined(s)){var i=sf.base.select(".e-hscroll-bar",this.tbItems),t=i.scrollLeft,u=t+i.offsetWidth,f=n.offsetLeft,o=n.offsetWidth,e=n.offsetLeft+n.offsetWidth;t<f&&u<e?(r=u-f,i.scrollLeft=t+(o-r)):t>f&&u>e&&(r=e-t,i.scrollLeft=t-(o-r))}},u.prototype.enableTab=function(t,i){var r=sf.base.selectAll("."+n,this.element)[t];sf.base.isNullOrUndefined(r)||(!0===i?(r.classList.remove("e-disable","e-overlay"),r.firstElementChild.setAttribute("tabindex","-1")):(r.classList.add("e-disable","e-overlay"),r.firstElementChild.removeAttribute("tabindex"),r.classList.contains("e-active")&&this.select(t+1)),r.setAttribute("aria-disabled",!0===i?"false":"true"))},u.prototype.hideTab=function(t,i){var e,u,f,r;if(void 0===i&&(i=!0),u=sf.base.selectAll("."+n,this.element)[t],!sf.base.isNullOrUndefined(u)){if(this.bdrLine.classList.add("e-hidden"),i)if(u.classList.add("e-hidden"),0!==(e=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems)).length&&u.classList.contains("e-active")){if(0!==t)for(f=t-1;f>=0;f--){if(!this.tbItem[f].classList.contains("e-hidden")){this.select(f);break}if(0===f)for(r=t+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else for(r=t+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else 0===e.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),e=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems),u.classList.remove("e-hidden"),0===e.length&&this.select(t);this.setActiveBorder();u.setAttribute("aria-hidden",""+i)}},u.prototype.select=function(t){var u,e=this.getTabHeader(),i,f,o;this.tbItems=sf.base.select("."+r,e);this.tbItem=sf.base.selectAll("."+n,e);this.prevItem=this.tbItem[this.prevIndex];i=this.options.selectedItem;(sf.base.isNullOrUndefined(i)||i<0||this.tbItem.length<=i||isNaN(i))&&(this.options.selectedItem=0);f=this.tbItem[t];(sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1"),this.initRender)?this.selectingContent(t):(f&&(u=parseInt(f.getAttribute("data-index"),10)),o={previousItem:null,previousIndex:this.prevIndex,selectedItem:null,selectedIndex:this.options.selectedItem,selectedContent:null,selectingItem:null,selectingIndex:u,selectingContent:null,isSwiped:this.isSwipeed,cancel:!1},this.dotNetRef.invokeMethodAsync("SelectingEvent",o,u))},u.prototype.setPersistence=function(n,t){this.options.enablePersistence&&window.localStorage.setItem(n,t)},u.prototype.selectingContent=function(t){if(this.tbItem=sf.base.selectAll("."+n,this.hdrEle),this.tbItem.length>t&&t>=0&&!isNaN(t)){this.prevIndex=this.options.selectedItem;var i=this.hdrEle.querySelector("."+n+'[data-index="'+t+'"]');i&&i.classList.contains("e-toolbar-popup")&&this.popupHandler(i);this.setActive(t)}else this.setActive(0)},u.prototype.disable=function(n){this.setCssClass(this.element,"e-disable",n);this.element.setAttribute("aria-disabled",""+n)},u.prototype.headerItemsUpdate=function(t){var i=this.getTabHeader();this.tbItems=sf.base.select("."+r,i);this.tbItem=sf.base.selectAll("."+n,i);this.prevItem=this.tbItem[this.prevIndex];sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex","-1");this.selectingContent(t)},u.prototype.destroy=function(){var n=this;this.unWireEvents();["aria-disabled","aria-activedescendant","tabindex"].forEach(function(t){n.element.removeAttribute(t)})},u.prototype.getContentElement=function(n){return sf.base.select(".e-content #e-content"+this.tabId+"_"+n,this.element)},u}();return{initialize:function(n,t,i,r,f){if(n){var e=new u(n,t,i);e.render();r&&(e.headerReady(),f||e.dotNetRef.invokeMethodAsync("CreatedEvent",null))}},headerReady:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.headerReady(),t||n.blazor__instance.dotNetRef.invokeMethodAsync("CreatedEvent",null))},contentReady:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.classList.remove("e-focused"),n.blazor__instance.isPopup=i,n.blazor__instance.headerItemsUpdate(t),n.blazor__instance.setPersistence("tab"+n.id,t.toString()),"Init"!==n.blazor__instance.options.loadOn&&n.blazor__instance.contentReady())},selectingContent:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.selectingContent(t),n.blazor__instance.setPersistence("tab"+n.id,t.toString()),"Init"!==n.blazor__instance.options.loadOn&&n.blazor__instance.contentReady())},serverItemsChanged:function(n,t,i,r){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.selectedItem=t,n.blazor__instance.options.animation=i,sf.base.isNullOrUndefined(n.querySelector(".e-toolbar"))||(sf.base.removeClass([n.querySelector(".e-toolbar")],"e-drag-action"),sf.base.removeClass([n.querySelector(".e-indicator")],"e-hidden")),r?sf.base.addClass([n],"e-vertical-icon"):sf.base.removeClass([n],"e-vertical-icon"),n.blazor__instance.serverItemsChanged(),this.options.allowDragAndDrop&&n.blazor__instance.bindDraggable())},enableTab:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.enableTab(t,i)},hideTab:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.hideTab(t,i)},select:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.select(t)},disable:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.disable(t)},setCssClass:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(""!==n.blazor__instance.options.cssClass&&n.blazor__instance.setCssClass(n,n.blazor__instance.options.cssClass,!1),n.blazor__instance.setCssClass(n,t,!0),n.blazor__instance.options.cssClass=t)},showCloseButton:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.showCloseButton=t,n.blazor__instance.refreshActElePosition())},headerPlacement:function(n,t,i,r,u,f,e){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.headerPlacement=t,n.blazor__instance.options.selectedItem=i,sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(r.blazor__instance)||r.blazor__instance.setCssClass(u),n.blazor__instance.serverChangeOrientation(t,r,f,e))},enableRtl:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.enableRtl=t,n.blazor__instance.setRTL(t))},overflowMode:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.refreshActElePosition()},allowDragAndDrop:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.allowDragAndDrop=t,n.blazor__instance.setDragAndDrop(t))},refresh:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.refreshActiveBorder()},destroy:function(n,t,i){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.setPersistence(t,i),n.blazor__instance.destroy())},getTabItem:function(t,i){if(!sf.base.isNullOrUndefined(t)){var r=t.querySelector("."+n+'[data-index="'+i+'"]');if(r)return JSON.stringify(window.sfBlazor.getDomObject("tabitem",r))}return null},getTabContent:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){var i=n.blazor__instance.getContentElement(t);if(i)return JSON.stringify(window.sfBlazor.getDomObject("tabcontent",i))}return null}}}()},"./modules/sf-textbox.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.TextBox=function(){"use strict";var n=function(){function n(n,t,i){this.element=n;this.container=i;this.element.blazor_input_instance=this;this.dotNetRef=t;this.isDestroyed=!1}return n.prototype.initialize=function(){var n,t;if(sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this),n=this.container?this.container.querySelectorAll(".e-input-group-icon"):null,n&&n.length>0)for(t=0;t<n.length;t++)sf.base.EventHandler.add(n[t],"mousedown",this.onMouseDownRipple,this),sf.base.EventHandler.add(n[t],"mouseup",this.onMouseUpRipple,this)},n.prototype.onMouseDownRipple=function(n){var t=n?n.currentTarget:null;!t||this.container.classList.contains("e-disabled")||this.container.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")},n.prototype.onMouseUpRipple=function(n){var t=n?n.currentTarget:null;t&&setTimeout(function(){t.classList.remove("e-input-btn-ripple")},500)},n.prototype.blurHandler=function(){this.isDestroyed?sf.base.EventHandler.remove(this.element,"blur",this.blurHandler):this.dotNetRef.invokeMethodAsync("BlurHandler").catch(function(){})},n.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"blur",this.blurHandler)},n}();return{initialize:function(t,i,r){t&&new n(t,i,r);t&&t.blazor_input_instance&&t.blazor_input_instance.initialize()},focusIn:function(n){n.focus()},focusOut:function(n){n.blur()},destroyInput:function(n){n&&n.blazor_input_instance&&(n.blazor_input_instance.isDestroyed=!0,n.blazor_input_instance.destroy())}}}()},"./modules/sf-timepicker.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.TimePicker=function(){"use strict";var n=(new Date).getDate(),t=(new Date).getMonth(),i=(new Date).getFullYear(),r=function(){function r(n,t,i,r){this.containerElement=n;this.element=t;this.options=r;this.element.blazor__instance=this;this.dotNetRef=i}return r.prototype.initialize=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"};sf.base.Browser.isDevice||(this.keyConfigure=sf.base.extend(this.keyConfigure,this.options.keyConfigs),new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}))},r.prototype.renderPopup=function(n,t,i,r){this.options=r;this.popupHolder=t;this.timeCollections=[];this.listWrapper=t.querySelector(".e-content")||sf.base.select(".e-content");this.getTimeCollection();sf.base.isNullOrUndefined(this.element.value)||(this.removeSelection(),this.selectedElement=this.listWrapper.querySelector('li[data-value = "'+this.element.value+'"]'),this.updateSelection(this.selectedElement));this.popupCreation(n,r);sf.base.Browser.isDevice&&(this.mobilePopupWrapper=sf.base.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper));("model"===i.appendTo?this.mobilePopupWrapper:document.body).appendChild(this.popupWrapper);this.setScrollPosition();this.popupObj.refreshPosition(this.element);var u={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(u),this.element):this.popupObj.show(new sf.base.Animation(u),null);this.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,sf.base.Browser.isDevice);sf.base.EventHandler.add(document,"mousedown touchstart",this.documentClickHandler,this)},r.prototype.getTimeCollection=function(){for(var t=this.listWrapper.querySelectorAll(".e-list-item"),n=0;n<t.length;n++)this.timeCollections.push(t[n].getAttribute("data-value"))},r.prototype.updateSelection=function(n){n&&(sf.base.addClass([n],"e-active"),n.setAttribute("aria-selected","true"))},r.prototype.setScrollPosition=function(){sf.base.isNullOrUndefined(this.selectedElement)?this.popupWrapper&&this.options.scrollTo&&this.checkDateValue(new Date(this.options.scrollTo))&&this.setScrollTo():this.findScrollTop(this.selectedElement)},r.prototype.checkDateValue=function(n){return!sf.base.isNullOrUndefined(n)&&_instanceof(n,Date)&&!isNaN(+n)?n:null},r.prototype.findScrollTop=function(n){var r=this.getPopupHeight(),t=n.nextElementSibling,i=t?t.offsetTop:n.offsetTop,u=n.getBoundingClientRect().height;this.popupWrapper.scrollTop=i+n.offsetTop>r?t?i-(r/2+u/2):i:0},r.prototype.setScrollTo=function(){var n,t,i,r;sf.base.isNullOrUndefined(this.popupWrapper)?this.popupWrapper.scrollTop=0:(t=this.popupWrapper.querySelectorAll(".e-list-item"),t.length&&(i=new Date((new Date).toDateString()+" "+this.timeCollections[0]).setMilliseconds(0),r=this.getDateObject(new Date(this.options.scrollTo)).getTime(),n=t[Math.round((r-i)/(6e4*this.options.step))]));sf.base.isNullOrUndefined(n)?this.popupWrapper.scrollTop=0:this.findScrollTop(n)},r.prototype.getDateObject=function(r){var u,f;if(!sf.base.isNullOrUndefined(r)&&(u=r,f=!sf.base.isNullOrUndefined(this.options.value),this.checkDateValue(u))){var e=f?new Date(this.options.value).getDate():n,o=f?new Date(this.options.value).getMonth():t,s=f?new Date(this.options.value).getFullYear():i;return new Date(s,o,e,u.getHours(),u.getMinutes(),u.getSeconds())}return null},r.prototype.getPopupHeight=function(){var n=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>n?n:t},r.prototype.popupCreation=function(n,t){var i=this;this.popupWrapper=n;this.containerStyle=this.containerElement.getBoundingClientRect();sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className="e-timepicker e-time-modal",document.body.className+=" e-time-overflow",this.modal.style.display="block",document.body.appendChild(this.modal));this.popupObj=new sf.popups.Popup(this.popupWrapper,{width:this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},offsetY:4,targetType:"relative",enableRtl:t.enableRtl,zIndex:t.zIndex,open:function(){i.popupWrapper.style.visibility="visible"},close:function(){i.popupHolder.appendChild(i.popupWrapper);i.popupObj&&i.popupObj.destroy();i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup").catch(function(){});i.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("HidePopup",null)}});sf.base.Browser.isDevice||(this.popupObj.collision={X:"none",Y:"flip"});this.popupObj.element.style.maxHeight="240px"},r.prototype.closePopup=function(n,t){this.options=t;sf.base.removeClass([document.body],"e-time-overflow");this.closeEventCallback(n)},r.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!sf.base.isNullOrUndefined(this.popupWrapper)){var n=this.popupWrapper.querySelectorAll(".e-active");n.length&&(sf.base.removeClass(n,"e-active"),n[0].removeAttribute("aria-selected"))}},r.prototype.removeHover=function(n){var t=this.popupWrapper?this.popupWrapper.querySelectorAll("."+n):[];t&&t.length&&(sf.base.removeClass(t,n),"e-navigation"===n&&t[0].removeAttribute("aria-selected"))},r.prototype.setWidth=function(n){return"number"==typeof n?sf.base.formatUnit(n):"string"==typeof n?n.match(/px|%|em/)?n:sf.base.formatUnit(n):"100%"},r.prototype.setPopupWidth=function(n){return(n=this.setWidth(n)).indexOf("%")>-1&&(n=(this.containerStyle.width*parseFloat(n)/100).toString()+"px"),n},r.prototype.closeEventCallback=function(n){var i=n,t;this.isPopupOpen()&&!i.cancel&&this.popupObj&&(t={name:"FadeOut",duration:50,delay:0},this.popupObj.hide(new sf.base.Animation(t)));sf.base.Browser.isDevice&&(this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.isNullOrUndefined(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null));sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler)},r.prototype.isPopupOpen=function(){return this.popupWrapper&&this.popupWrapper.classList.contains("e-timepicker")},r.prototype.documentClickHandler=function(n){var t=n.target,i,r;!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t)||this.popupObj.element&&this.popupObj.element.contains(t))&&"touchstart"!==n.type&&n.preventDefault();i=this.containerElement.querySelector(".e-clear-icon");r=this.containerElement.querySelector(".e-time-icon.e-icons");sf.base.closest(t,".e-popup-wrapper")||t===this.element||t===r||t===i||t===this.containerElement||this.isPopupOpen()&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("HidePopup",null)},r.prototype.setOverlayIndex=function(n,t,i,r){if(r&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(n)){var u=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(u-1).toString();n.style.zIndex=u.toString()}},r.prototype.selectInputText=function(n,t,i){sf.base.Browser.isDevice||(n.setSelectionRange(0,n.value.length),t&&this.listWrapper&&(this.selectedElement=this.listWrapper.querySelectorAll(".e-list-item")[i],this.setScrollPosition()))},r.prototype.isDevice=function(){return sf.base.Browser.isDevice},r.prototype.inputHandler=function(n){"right"!==n.action&&"left"!==n.action&&"tab"!==n.action&&"enter"!==n.action&&n.preventDefault();"enter"===n.action&&this.isPopupOpen()&&n.stopPropagation();var t={Action:n.action,Key:n.key,KeyCode:n.keyCode,Events:n,SelectDate:null,FocusedDate:null,classList:"",Id:null,TargetClassList:null};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyboardHandler",t)},r}();return{initialize:function(n,t,i,u){t&&new r(n,t,i,u);t&&t.blazor__instance&&t.blazor__instance.initialize()},renderPopup:function(n,t,i,r,u){n&&n.blazor__instance&&t&&i&&n.blazor__instance.renderPopup(t,i,r,u)},closePopup:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.closePopup(t,i)},selectInputText:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.selectInputText(n,t,i)},focusIn:function(n){n&&n.focus()},focusOut:function(n){n&&n.blur()},destroy:function(n,t,i,r,u){n&&n.blazor__instance&&t&&_instanceof(t,HTMLElement)&&i&&(n.blazor__instance.isDisposed=!0,n.blazor__instance.closePopup(r,u))}}}()},"./modules/sf-toast.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Toast=function(){"use strict";var t="e-toast-progress",i=function(){function i(n,t,i){this.progressObj=[];this.element=n;this.dotNetRef=i;this.updateContext(t);this.element.blazor__instance=this}return i.prototype.initialize=function(n){this.refElement=sf.base.createElement("div",{className:"e-toast-ref-element"});this.toastContainer=n;n.parentElement.insertBefore(this.refElement,n);this.isDevice=sf.base.Browser.isDevice;"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px",this.toastContainer.classList.add("e-toast-full-width"));this.isDevice&&screen.width<768&&new sf.base.Touch(this.element,{swipe:this.swipeHandler.bind(this)});this.dotNetRef.invokeMethodAsync("CreatedEvent",null)},i.prototype.show=function(i){var u,r;this.setAnimation(i);u="string"===n(this.target)?document.querySelector(this.target):document.body;(i.rootElement.style.zIndex=sf.popups.getZindexPartial(i.rootElement)+"",sf.base.isNullOrUndefined(u))||("BODY"===u.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",u.style.position="relative"),u.appendChild(this.toastContainer),this.appendToast(i.element),r=parseInt(i.element.id.split("toast_")[1],10),this.progressObj[r]={hideEstimatedTimeOfArrival:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[r].element=i.element,this.extendedTimeout>0&&this.timeOut>0&&(sf.base.EventHandler.add(i.element,"mouseover",this.toastHoverAction.bind(this,r)),sf.base.EventHandler.add(i.element,"mouseleave",this.delayedToastProgress.bind(this,r))),i.showProgressBar&&(this.progressObj[r].progressEle=i.element.querySelector("."+t)),sf.base.EventHandler.add(i.element,"keydown",this.keyDownHandler,this))},i.prototype.getDomObject=function(n,t){return null!=t?window.sfBlazor.getDomObject(n,t):null},i.prototype.swipeHandler=function(n){var t=sf.base.closest(n.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.hideAnimation.effect;sf.base.isNullOrUndefined(t)||("Right"===n.swipeDirection?(this.hideAnimation.effect="SlideRightOut",this.hide("swipe",t)):"Left"===n.swipeDirection&&(this.hideAnimation.effect="SlideLeftOut",this.hide("swipe",t)),this.hideAnimation.effect=i)},i.prototype.delayedToastProgress=function(n){var i=this.progressObj[n],r=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,r),this.extendedTimeout);i.maxHideTime=parseFloat(this.extendedTimeout+"");i.hideEstimatedTimeOfArrival=(new Date).getTime()+i.maxHideTime;sf.base.isNullOrUndefined(r.querySelector("."+t))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},i.prototype.toastHoverAction=function(n){this.dotNetRef.invokeMethodAsync("ClearTimeout",n);clearTimeout(this.progressObj[n].timeOutId);clearInterval(this.progressObj[n].intervalId);this.progressObj[n].hideEstimatedTimeOfArrival=0;var i=this.progressObj[n].element;sf.base.isNullOrUndefined(i.querySelector("."+t))||(this.progressObj[n].progressEle.style.width="0%");this.dotNetRef.invokeMethodAsync("MouseoverEvent",n)},i.prototype.updateProgressBar=function(n){var t=(n.hideEstimatedTimeOfArrival-(new Date).getTime())/n.maxHideTime*100;t="LTR"===this.progressDirection?100-t:t;n.progressEle.style.width=t+"%"},i.prototype.appendToast=function(n){this.newestOnTop&&0!==this.toastContainer.childElementCount&&this.toastContainer.insertBefore(n,this.toastContainer.children[0]);sf.base.removeClass([n],"e-blazor-toast-hidden")},i.prototype.setAnimation=function(n){var r=this,i=this,t=this.showAnimation,u={duration:t.duration,name:t.effect,timingFunction:t.easing,begin:function(){n.element.style.display=""},end:function(){sf.base.isNullOrUndefined(document.querySelector("#"+i.element.id))||i.dotNetRef.invokeMethodAsync("OpenEvent",n.index,r.getDomObject("element",n.element))}};new sf.base.Animation(u).animate(n.element)},i.prototype.hide=function(t,i){var u,f,r;if(!sf.base.isNullOrUndefined(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!==n(i)||"All"!==i)"string"===n(i)&&"All"!==i&&(u=this.toastContainer.querySelector("#toast_"+i),u&&(this.destroyToast(u,t),this.dotNetRef.invokeMethodAsync("DestroyTimer",parseInt(i,10)))),sf.base.isNullOrUndefined(i)&&(i=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(i,t),f=parseInt(i.id.split("toast_")[1],10),this.dotNetRef.invokeMethodAsync("DestroyTimer",f);else for(r=0;r<this.toastContainer.childElementCount;r++)this.destroyToast(this.toastContainer.children[r],t)},i.prototype.destroyToast=function(n,t){var i=parseInt(n.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("OnCloseEvent",i,t)},i.prototype.hideAnimationToast=function(n,t){var r=this,i=this.hideAnimation,u={duration:i.duration,name:i.effect,timingFunction:i.easing,end:function(){sf.base.detach(n);r.dotNetRef.invokeMethodAsync("CloseEvent",t)}};new sf.base.Animation({}).animate(n,u)},i.prototype.destroy=function(){for(;this.toastContainer.attributes.length>0;)this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);for(var t=this.toastContainer.children,n=t.length-1;n>=0;n--)sf.base.detach(t[n]);sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.toastContainer,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},i.prototype.keyDownHandler=function(n){if(n.target.classList.contains("e-toast-close-icon")&&(13===n.keyCode||32===n.keyCode)){var t=n.target,i=sf.base.closest(t,".e-toast");this.destroyToast(i,"key")}},i.prototype.updateContext=function(n){sf.base.extend(this,this,n)},i}();return{initialize:function(n,t,r){sf.base.isNullOrUndefined(n)||(new i(n,t,r),n.blazor__instance.initialize(n))},show:function(n){sf.base.isNullOrUndefined(n.rootElement)||(n.rootElement.blazor__instance.updateContext(n),n.rootElement.blazor__instance.show(n))},hideAnimationToast:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.hideAnimationToast(n.querySelector("#toast_"+t),t)},hide:function(n,t,i,r){sf.base.isNullOrUndefined(n)||(n.blazor__instance.updateContext(i),n.blazor__instance.hide(r,t))},appendToast:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor__instance.appendToast(t)},destroy:function(n){sf.base.isNullOrUndefined(n)||n.blazor__instance.destroy()}}}()},"./modules/sf-toolbar.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Toolbar=function(){"use strict";var n="e-toolbar-items",r="e-blazor-toolbar-items",t="e-toolbar-item",i="e-toolbar-popup",u=function(){function u(n,t,i){this.resizeContext=this.resize.bind(this);this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"};this.element=n;sf.base.isNullOrUndefined(n)||(this.element.blazor__instance=this);this.dotNetRef=i;this.options=t}return u.prototype.destroy=function(){this.unwireEvents();this.clearProperty();this.popObj=null;this.tbarAlign=null},u.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this);window.addEventListener("resize",this.resizeContext);this.options.allowKeyboard&&this.wireKeyboardEvent()},u.prototype.wireKeyboardEvent=function(){this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs});sf.base.EventHandler.add(this.element,"keydown",this.docKeyDown,this);this.element.setAttribute("tabIndex","0")},u.prototype.unwireKeyboardEvent=function(){this.keyModule&&(sf.base.EventHandler.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},u.prototype.docKeyDown=function(n){if("INPUT"!==n.target.tagName){var t=!sf.base.isNullOrUndefined(this.popObj)&&sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===n.keyCode&&!0===n.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100});(40===n.keyCode||38===n.keyCode||35===n.keyCode||36===n.keyCode)&&n.preventDefault()}},u.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler);this.destroyScroll();this.unwireKeyboardEvent();window.removeEventListener("resize",this.resizeContext);sf.base.EventHandler.remove(document,"scroll",this.docEvent);sf.base.EventHandler.remove(document,"click",this.docEvent)},u.prototype.clearProperty=function(){this.tbarEle=[];this.tbarAlgEle={lefts:[],centers:[],rights:[]}},u.prototype.docEvent=function(n){var t=sf.base.closest(n.target,".e-popup");this.popObj&&sf.base.isVisible(this.popObj.element)&&!t&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},u.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&sf.base.addClass([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},u.prototype.destroyMode=function(){this.scrollModule&&(sf.base.removeClass([this.scrollModule.element],"e-rtl"),this.destroyScroll());sf.base.removeClass([this.element],"e-tbar-extended");sf.base.removeClass([this.element],"e-extended-toolbar");var n=this.element.querySelector(".e-toolbar-multirow");n&&sf.base.removeClass([n],"e-toolbar-multirow");this.popObj&&this.popupRefresh(this.popObj.element,!0)},u.prototype.elementFocus=function(n){var t=n.firstElementChild;t?(t.focus(),this.activeEleSwitch(n)):n.focus()},u.prototype.clstElement=function(n,i){return n&&this.popObj&&sf.base.isVisible(this.popObj.element)?this.popObj.element.querySelector("."+t):this.element===i||n?this.element.querySelector("."+t+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):sf.base.closest(i,"."+t)},u.prototype.keyHandling=function(i,r,u,f,e){var h,s,c,o=this.popObj,l=this.element,p={name:"FadeOut",duration:100},a,v,w,y;switch(r.action){case"moveRight":if(this.options.isVertical)return;l===u?this.elementFocus(i):f||this.eleFocus(i,"next");break;case"moveLeft":if(this.options.isVertical)return;f||this.eleFocus(i,"previous");break;case"home":case"end":i&&(a=sf.base.closest(i,".e-popup"),a?sf.base.isVisible(this.popObj.element)&&(s=[].slice.call(a.children),h="home"===r.action?s[0]:s[s.length-1]):(s=this.element.querySelectorAll("."+n+" ."+t),h="home"===r.action?s[0]:s[s.length-1]),h&&this.elementFocus(h));break;case"moveUp":case"moveDown":if(c="moveUp"===r.action?"previous":"next",this.options.isVertical)"moveUp"===r.action?this.eleFocus(i,"previous"):this.eleFocus(i,"next");else if(o&&sf.base.closest(u,".e-popup")){if(v=o.element,w=v.firstElementChild,"previous"===c&&w===i||"next"===c&&v.lastElementChild===i)return;this.eleFocus(i,c)}else"moveDown"===r.action&&o&&sf.base.isVisible(o.element)&&this.elementFocus(i);break;case"tab":e||f||(y=i.firstElementChild,l===u&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(y),y.focus()),this.element.removeAttribute("tabindex")));break;case"popupClose":o&&"Extended"!==this.options.overflowMode&&o.hide(p);break;case"popupOpen":if(!f)return;o&&!sf.base.isVisible(o.element)?(o.element.style.top=l.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(p)}},u.prototype.keyActionHandler=function(n){var t=n.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){n.preventDefault();var i=t.classList.contains("e-hor-nav"),r=t.classList.contains("e-scroll-nav"),u=this.clstElement(i,t);(u||r)&&this.keyHandling(u,n,t,i,r)}},u.prototype.eleContains=function(n){return n.classList.contains("e-separator")||n.classList.contains("e-overlay")||n.getAttribute("disabled")||n.classList.contains("e-hidden")||!sf.base.isVisible(n)},u.prototype.eleFocus=function(n,i){var f=Object(n)[i+"ElementSibling"],r,u;if(f){if(this.eleContains(f))return void this.eleFocus(f,i);this.elementFocus(f)}else this.tbarAlign&&(r=Object(n.parentElement)[i+"ElementSibling"],(sf.base.isNullOrUndefined(r)||0!==r.children.length||(r=Object(r)[i+"ElementSibling"]),!sf.base.isNullOrUndefined(r)&&r.children.length>0)&&("next"===i?(u=r.querySelector("."+t),this.eleContains(u)?this.eleFocus(u,i):(u.firstElementChild.focus(),this.activeEleSwitch(u))):(u=r.lastElementChild,this.eleContains(u)?this.eleFocus(u,i):this.elementFocus(u))))},u.prototype.clickHandler=function(i){var r,c;if(!this.element.classList.contains("e-drag-action")){var s,h,u=i.target,f=u.classList,o=this.element,l=!sf.base.isNullOrUndefined(sf.base.closest(u,".e-toolbar-pop")),a=f.contains("e-close-icon"),e=sf.base.closest(u,".e-hor-nav");e||(e=u);o.children[0].classList.contains("e-hscroll")||o.children[0].classList.contains("e-vscroll")||!f.contains("e-hor-nav")||(f=u.querySelector(".e-icons").classList);(f.contains("e-popup-up-icon")||f.contains("e-popup-down-icon"))&&this.popupClickHandler(o,e,"e-rtl");r=sf.base.closest(i.target,"."+t);(sf.base.isNullOrUndefined(r)||r.classList.contains("e-overlay"))&&!e.classList.contains("e-hor-nav")||(sf.base.isNullOrUndefined(r)||(s=parseInt(r.getAttribute("data-index"),10),h=r.id),c=sf.base.selectAll("."+n+" ."+t,this.element),this.dotNetRef.invokeMethodAsync("TriggerClickEvent",i,l,a,s,h,c.length-1))}},u.prototype.popupClickHandler=function(n,t,i){var r=this.popObj;sf.base.isVisible(r.element)?(t.classList.remove("e-nav-active"),r.hide({name:"FadeOut",duration:100})):((n.classList.contains(i)||this.options.isVerticalLeft)&&(n.classList.contains(i)&&(r.enableRtl=!0),r.position={X:"left",Y:"top"}),0!==r.offsetX||n.classList.contains(i)||this.options.isVerticalLeft||(r.enableRtl=!1,r.position={X:"right",Y:"top"}),r.dataBind(),r.refreshPosition(),r.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(r.element.style.minHeight="0px"),t.classList.add("e-nav-active"),r.show({name:"FadeIn",duration:100}))},u.prototype.render=function(){this.scrollModule=null;this.popObj=null;this.isExtendedOpen=!1;this.popupPriCount=0;var n=sf.base.formatUnit(this.options.width),t=sf.base.formatUnit(this.options.height);this.element&&("msie"===sf.base.Browser.info.name&&"auto"===this.options.height||sf.base.setStyleAttribute(this.element,{height:t}),sf.base.setStyleAttribute(this.element,{width:n}),this.element.setAttribute("aria-haspopup","false"),this.renderControl(),this.wireEvents())},u.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]};this.renderItems();this.renderLayout()},u.prototype.renderLayout=function(){this.renderOverflowMode();this.tbarAlign&&this.itemPositioning();this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1);this.separator()},u.prototype.itemsAlign=function(n,i){var f,e,u,o;for(this.tbarEle||(this.tbarEle=[]),u=0;u<n.length;u++)o=this.element.querySelector("."+r),(f="MultiRow"===this.options.overflowMode?i.querySelector("."+t+'[id="'+n[u].id+'"]'):o.querySelector("."+t+'[id="'+n[u].id+'"]'))&&("Show"!==n[u].overflow&&n[u].showAlwaysInPopup&&!f.classList.contains("e-separator")&&this.popupPriCount++,n[u].htmlAttributes&&this.setAttr(n[u].htmlAttributes,f),"Button"===n[u].type&&(sf.base.EventHandler.remove(f,"click",this.itemClick),sf.base.EventHandler.add(f,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(f)&&this.tbarEle.push(f),"MultiRow"!==this.options.overflowMode&&(this.tbarAlign||this.tbarItemAlign(n[u],i,u),(e=i.querySelector(".e-toolbar-"+n[u].align.toLowerCase()))?(n[u].showAlwaysInPopup&&"Show"!==n[u].overflow||this.tbarAlgEle[(n[u].align+"s").toLowerCase()].push(f),e.appendChild(f)):i.appendChild(f)))},u.prototype.serverItemsRefresh=function(){var t=this.element,u=t.querySelector("."+r),i=t.querySelector("."+n);(i&&i.children.length>0||u.children.length>0)&&(!i&&t&&t.classList.contains("e-toolbar")&&t.firstElementChild&&(i=sf.base.createElement("div",{className:n}),t.insertBefore(i,t.firstElementChild)),this.itemsAlign(this.options.items,i),this.renderLayout(),this.refreshOverflow())},u.prototype.resetServerItems=function(){if("MultiRow"!==this.options.overflowMode){var i=this.element.querySelector("."+r),u=[].slice.call(sf.base.selectAll("."+n+" ."+t,this.element));sf.base.append(u,i);this.clearProperty()}},u.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.options.height),width:sf.base.formatUnit(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height));this.destroyMode();this.refreshOverflow()},u.prototype.initScroll=function(t,i){!this.scrollModule&&this.checkOverflow(t,i[0])&&(this.tbarAlign&&this.element.querySelector("."+n+" .e-toolbar-center").removeAttribute("style"),this.scrollModule=this.options.isVertical?new sf.navigations.VScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]):new sf.navigations.HScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]),sf.base.removeClass([this.scrollModule.element],"e-tbar-pos"),sf.base.setStyleAttribute(this.element,{overflow:"hidden"}))},u.prototype.itemWidthCal=function(n){var i,u=this,r=0;return[].slice.call(sf.base.selectAll("."+t,n)).forEach(function(n){sf.base.isVisible(n)&&(i=window.getComputedStyle(n),r+=u.options.isVertical?n.offsetHeight:n.offsetWidth,r+=parseFloat(u.options.isVertical?i.marginTop:i.marginRight),r+=parseFloat(u.options.isVertical?i.marginBottom:i.marginLeft))}),r},u.prototype.getScrollCntEle=function(n){var t=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return n.querySelector(t)},u.prototype.checkOverflow=function(n,t){var r,i;if(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(t)||!sf.base.isVisible(n))return!1;r=this.options.isVertical?n.offsetHeight:n.offsetWidth;i=this.options.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||r===i)&&(i=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var u=n.querySelector(".e-hor-nav"),f=n.querySelector(".e-scroll-nav"),e=0;return u?e=this.options.isVertical?u.offsetHeight:u.offsetWidth:f&&(e=this.options.isVertical?2*f.offsetHeight:2*f.offsetWidth),i>r-e},u.prototype.refreshOverflow=function(){this.resize()},u.prototype.toolbarAlign=function(n){this.tbarAlign&&(sf.base.addClass([n],"e-tbar-pos"),this.itemPositioning())},u.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+n),r=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,sf.base.removeClass([this.element],"e-toolpop"),"msie"===sf.base.Browser.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":sf.base.isNullOrUndefined(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(n)));break;case"Popup":sf.base.addClass([this.element],"e-toolpop");this.tbarAlign&&this.removePositioning();(this.checkOverflow(t,i)||r)&&this.setOverflowAttributes(t);this.toolbarAlign(i);break;case"MultiRow":sf.base.addClass([i],"e-toolbar-multirow");this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),sf.base.addClass([i],"e-multirow-pos"));"hidden"===t.style.overflow&&(t.style.overflow="");"msie"!==sf.base.Browser.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":sf.base.addClass([this.element],"e-extended-toolbar");(this.checkOverflow(t,i)||r)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t));this.toolbarAlign(i)}},u.prototype.setOverflowAttributes=function(i){this.createPopupEle(i,[].slice.call(sf.base.selectAll("."+n+" ."+t,i)));this.element.querySelector(".e-hor-nav").setAttribute("tabIndex","0");this.element.querySelector(".e-hor-nav").setAttribute("role","list")},u.prototype.separator=function(){var i=this.element,t=[].slice.call(i.querySelectorAll(".e-separator")),u=i.querySelector(".e-multirow-separator"),f=i.querySelector(".e-extended-separator"),r="MultiRow"===this.options.overflowMode?u:f,n;for(null!==r&&("MultiRow"===this.options.overflowMode?r.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&r.classList.remove("e-extended-separator")),n=0;n<=t.length-1;n++)t[n].offsetLeft<30&&0!==t[n].offsetLeft&&("MultiRow"===this.options.overflowMode?t[n].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&t[n].classList.add("e-extended-separator"))},u.prototype.createPopupEle=function(n,t){var i=n.querySelector(".e-hor-nav"),r=this.options.isVertical,u,f;i||this.createPopupIcon(n);i=n.querySelector(".e-hor-nav");u=r?i.offsetHeight:i.offsetWidth;f=(r?n.offsetHeight:n.offsetWidth)-u;this.element.classList.remove("e-rtl");sf.base.setStyleAttribute(this.element,{direction:"initial"});this.checkPriority(n,t,f,!0);this.options.enableRtl&&this.element.classList.add("e-rtl");this.element.style.removeProperty("direction");this.createPopup()},u.prototype.pushingPoppedEle=function(r,u,f,e,o){var v=this.element,s=sf.base.selectAll(".e-overflow-show",f),y=0,p=[].slice.call(sf.base.selectAll("."+i,v.querySelector("."+n))),h=0,l,c,a;for(p.forEach(function(n,t){s=sf.base.selectAll(".e-overflow-show",f);n.classList.contains("e-overflow-show")&&s.length>0?r.tbResize&&s.length>t?(f.insertBefore(n,s[t]),++h):(f.insertBefore(n,f.children[s.length]),++h):n.classList.contains("e-overflow-show")||r.tbResize&&n.classList.contains("e-overflow-hide")&&f.children.length>0&&0===s.length?(f.insertBefore(n,f.firstChild),++h):n.classList.contains("e-overflow-hide")?u.push(n):r.tbResize?(f.insertBefore(n,f.childNodes[y+h]),++y):f.appendChild(n);n.classList.contains("e-separator")?sf.base.setStyleAttribute(n,{display:"",height:o+"px"}):sf.base.setStyleAttribute(n,{display:"",height:e+"px"})}),u.forEach(function(n){f.appendChild(n)}),l=sf.base.selectAll("."+t,v.querySelector("."+n)),c=l.length-1;c>=0;c--){if(a=l[c],!a.classList.contains("e-separator")||"Extended"===this.options.overflowMode)break;sf.base.setStyleAttribute(a,{display:"none"})}},u.prototype.createPopup=function(){var e,u,n=this.element,r,f,o,s,h;"Extended"===this.options.overflowMode&&(u=n.querySelector(".e-separator:not(."+i+")"),e="auto"===n.style.height||""===n.style.height?null:u&&u.offsetHeight);f=n.querySelector("."+t+":not(.e-separator):not(."+i+"):not(.e-hidden)");o="auto"===n.style.height||""===n.style.height?null:f&&f.offsetHeight;n.querySelector("#"+n.id+"_popup.e-toolbar-pop")?r=n.querySelector("#"+n.id+"_popup.e-toolbar-pop"):(s=sf.base.createElement("div",{id:n.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),h=sf.base.createElement("div",{id:n.id+"_popup",className:"e-toolbar-pop"}),r="Extended"===this.options.overflowMode?s:h);this.pushingPoppedEle(this,[],r,o,e);this.popupInit(n,r)},u.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},u.prototype.popupInit=function(n,t){var r,u,f,i,e;this.popObj?(r=this.popObj.element,"Extended"===this.options.overflowMode&&(u=window.getComputedStyle(this.element),this.popObj.width=parseFloat(u.width)+2*parseFloat(u.borderRightWidth),this.popObj.offsetX=0,this.popObj.dataBind()),sf.base.setStyleAttribute(r,{maxHeight:"",display:"block"}),sf.base.setStyleAttribute(r,{maxHeight:r.offsetHeight+"px",display:""})):(n.appendChild(t),sf.base.setStyleAttribute(this.element,{overflow:""}),f=window.getComputedStyle(this.element),i=new sf.popups.Popup(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}}),(i.appendTo(t),"Extended"===this.options.overflowMode&&(i.width=parseFloat(f.width)+2*parseFloat(f.borderRightWidth),i.offsetX=0),sf.base.EventHandler.add(document,"scroll",this.docEvent.bind(this)),sf.base.EventHandler.add(document,"click ",this.docEvent.bind(this)),i.element.style.maxHeight=i.element.offsetHeight+"px",this.options.isVertical&&(i.element.style.visibility="hidden"),this.isExtendedOpen)?(e=this.element.querySelector(".e-hor-nav"),e.classList.add("e-nav-active"),sf.base.classList(e.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")):i.hide(),this.popObj=i,this.element.setAttribute("aria-haspopup","true"))},u.prototype.tbarPopupHandler=function(n){"Extended"===this.options.overflowMode&&(n?sf.base.addClass([this.element],"e-tbar-extended"):sf.base.removeClass([this.element],"e-tbar-extended"))},u.prototype.popupOpen=function(){var n=this.popObj,e,c,o,i,r,u,l,s;this.options.isVertical||(n.offsetY=this.getElementOffsetY(),n.dataBind());var t=this.popObj.element,f=this.popObj.element.parentElement,h=f.querySelector(".e-hor-nav");if(sf.base.setStyleAttribute(n.element,{height:"auto",maxHeight:""}),n.element.style.maxHeight=n.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(n.element.style.minHeight=""),e=t.offsetTop+t.offsetHeight+sf.popups.calculatePosition(f).top,c=h.firstElementChild,h.classList.add("e-nav-active"),sf.base.classList(c,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0),o=sf.base.isNullOrUndefined(window.scrollY)?0:window.scrollY,!this.options.isVertical&&window.innerHeight+o<e&&this.element.offsetTop<t.offsetHeight){for(i=t.offsetHeight-(e-window.innerHeight-o+5),n.height=i+"px",r=0;r<=t.childElementCount;r++)if(u=t.children[r],u.offsetTop+u.offsetHeight>i){i=u.offsetTop;break}sf.base.setStyleAttribute(n.element,{maxHeight:i+"px"})}else this.options.isVertical&&(l=this.element.getBoundingClientRect(),sf.base.setStyleAttribute(n.element,{maxHeight:l.top+this.element.offsetHeight+"px",bottom:0,visibility:""}));n&&(s=t.getBoundingClientRect(),s.right>document.documentElement.clientWidth&&s.width>f.getBoundingClientRect().width&&(n.collision={Y:"none"},n.dataBind()),n.refreshPosition())},u.prototype.popupClose=function(){var n=this.element.querySelector(".e-hor-nav"),t=n.firstElementChild;n.classList.remove("e-nav-active");sf.base.classList(t,["e-popup-down-icon"],["e-popup-up-icon"]);this.tbarPopupHandler(!1)},u.prototype.checkPriority=function(n,r,u,f){for(var o,c,p,l,w,b,v,k=this.popupPriCount>0,d=u,y=0,s=0,h=0,a=function(n,t){var i=!1;return t.forEach(function(t){n.classList.contains(t)&&(i=!0)}),i},e=r.length-1;e>=0;e--)o=void 0,c=window.getComputedStyle(r[e]),this.options.isVertical?(o=parseFloat(c.marginTop),o+=parseFloat(c.marginBottom)):(o=parseFloat(c.marginRight),o+=parseFloat(c.marginLeft)),p=r[e]===this.tbarEle[0],p&&(this.tbarEleMrgn=o),v=this.options.isVertical?r[e].offsetHeight:r[e].offsetWidth,l=p?v+o:v,(a(r[e],["e-popup-alone"])&&k&&(r[e].classList.add(i),this.options.isVertical?sf.base.setStyleAttribute(r[e],{display:"none",minHeight:l+"px"}):sf.base.setStyleAttribute(r[e],{display:"none",minWidth:l+"px"}),h++),this.options.isVertical?r[e].offsetTop+r[e].offsetHeight+o>u:r[e].offsetLeft+r[e].offsetWidth+o>u)&&(r[e].classList.contains("e-separator")?"Extended"===this.options.overflowMode?(s===h&&a(w=r[e],["e-separator","e-ignore"])&&(r[e].classList.add(i),h++),s++):"Popup"===this.options.overflowMode&&(y>0&&s===h&&a(w=r[e+s+(y-1)],["e-separator","e-ignore"])&&sf.base.setStyleAttribute(w,{display:"none"}),y++,s=0,h=0):s++,r[e].classList.contains("e-overflow-show")&&f||a(r[e],["e-separator","e-ignore"])?u-=(this.options.isVertical?r[e].offsetHeight:r[e].offsetWidth)+o:(r[e].classList.add(i),this.options.isVertical?sf.base.setStyleAttribute(r[e],{display:"none",minHeight:l+"px"}):sf.base.setStyleAttribute(r[e],{display:"none",minWidth:l+"px"}),h++));f&&(b=sf.base.selectAll("."+t+":not(."+i+")",this.element),this.checkPriority(n,b,d,!1))},u.prototype.createPopupIcon=function(n){var u=n.id.concat("_nav"),i="e-"+n.id.concat("_nav e-hor-nav"),t,r;i="Extended"===this.options.overflowMode?i+" e-expended-nav":i;t=sf.base.createElement("div",{id:u,className:i});"msie"!==sf.base.Browser.info.name&&"edge"!==sf.base.Browser.info.name||t.classList.add("e-ie-align");r=sf.base.createElement("div",{className:"e-popup-down-icon e-icons"});t.appendChild(r);t.setAttribute("tabindex","0");t.setAttribute("role","list");n.appendChild(t)},u.prototype.tbarPriRef=function(n,t,r,u,f,e,o,s){var l=s,p=this.popObj.element,w=sf.base.selectAll("."+i+":not(.e-overflow-show)",p).length,a=function(n,t){return n.classList.contains(t)},h,v,y,c;0===sf.base.selectAll(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",n).length?(h=n.children[t-(t-r)-1],v=!sf.base.isNullOrUndefined(h)&&a(h,"e-ignore"),!sf.base.isNullOrUndefined(h)&&a(h,"e-separator")&&!sf.base.isVisible(h)||v?(h.style.display="inherit",y=h.offsetWidth+2*parseFloat(window.getComputedStyle(h).marginRight),c=h.previousElementSibling,e+y<o||f?(n.insertBefore(u,n.children[t+l-(t-r)]),sf.base.isNullOrUndefined(c)||(c.style.display="")):c.classList.contains("e-separator")&&(c.style.display="none"),h.style.display=""):n.insertBefore(u,n.children[t+l-(t-r)])):n.insertBefore(u,n.children[t+l-w])},u.prototype.popupRefresh=function(t,i){var h=this,u=this.element,s=this.options.isVertical,r=u.querySelector(".e-hor-nav"),f=u.querySelector("."+n),e,o;sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(f)||(f.removeAttribute("style"),t.style.display="block",e=s?u.offsetHeight-(r.offsetHeight+f.offsetHeight):u.offsetWidth-(r.offsetWidth+f.offsetWidth),o=0,[].slice.call(t.children).forEach(function(n){o+=h.popupEleWidth(n);sf.base.setStyleAttribute(n,{position:""})}),e+(s?r.offsetHeight:r.offsetWidth)>o&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(e,t,i),t.style.display="",0===t.children.length&&r&&this.popObj&&(sf.base.detach(r),r=null,this.popObj.destroy(),sf.base.detach(this.popObj.element),this.popObj=null,u.setAttribute("aria-haspopup","false")))},u.prototype.ignoreEleFetch=function(n,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),r=[],u=0;return i.length>0?(i.forEach(function(n){r.push([].slice.call(t.children).indexOf(n))}),r.forEach(function(t){t<=n&&u++}),u):0},u.prototype.checkPopupRefresh=function(t,i){var r,u,f;return i.style.display="block",r=this.popupEleWidth(i.firstElementChild),i.firstElementChild.style.removeProperty("Position"),u=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,f=t.querySelector("."+n).offsetWidth,i.style.removeProperty("display"),u>r+f},u.prototype.popupEleWidth=function(n){var r,t,i;return n.style.position="absolute",r=this.options.isVertical?n.offsetHeight:n.offsetWidth,t=n.querySelector(".e-tbar-btn-text"),(n.classList.contains("e-tbtn-align")||n.classList.contains("e-popup-text"))&&(i=n.children[0],!sf.base.isNullOrUndefined(t)&&n.classList.contains("e-popup-text")?t.style.display="none":!sf.base.isNullOrUndefined(t)&&n.classList.contains("e-toolbar-text")&&(t.style.display="block"),i.style.minWidth="0%",r=parseFloat(this.options.isVertical?n.style.minHeight:n.style.minWidth),i.style.minWidth="",i.style.minHeight="",sf.base.isNullOrUndefined(t)||(t.style.display="")),r},u.prototype.popupEleRefresh=function(t,r,u){for(var c,e,v=this.popupPriCount>0,l=this.tbarEle,o=this.element.querySelector("."+n),s=0,y=function(r){var h,a,y;if(r.classList.contains("e-popup-alone")&&v&&!u)return"continue";if(h=f.popupEleWidth(r),r===f.tbarEle[0]&&(h+=f.tbarEleMrgn),r.style.position="",!(h<t||u))return"break";(sf.base.setStyleAttribute(r,{minWidth:"",height:"",minHeight:""}),r.classList.contains("e-overflow-hide")||r.classList.remove(i),e=f.tbarEle.indexOf(r),f.tbarAlign)&&(a=f.options.items[e].align,e=f.tbarAlgEle[(a+"s").toLowerCase()].indexOf(r),l=f.tbarAlgEle[(a+"s").toLowerCase()],o=f.element.querySelector("."+n+" .e-toolbar-"+a.toLowerCase()));y=0;"Extended"!==f.options.overflowMode&&l.slice(0,e).forEach(function(n){(n.classList.contains("e-overflow-show")||n.classList.contains("e-separator"))&&(n.classList.contains("e-separator")&&(n.style.display="",t-=n.offsetWidth),y++)});s=f.ignoreEleFetch(e,o);r.classList.contains("e-overflow-show")?(f.tbarPriRef(o,e,y,r,u,h,t,s),t-=r.offsetWidth):0===e?(o.insertBefore(r,o.firstChild),t-=r.offsetWidth):(c=sf.base.selectAll(".e-overflow-show",f.popObj.element).length,o.insertBefore(r,o.children[e+s-c]),t-=r.offsetWidth);r.style.height=""},f=this,h=0,a=[].slice.call(r.children);h<a.length;h++)if("break"===y(a[h]))break;this.checkOverflow(this.element,this.element.getElementsByClassName(n)[0])&&!u&&this.renderOverflowMode()},u.prototype.removePositioning=function(){var t=this.element.querySelector("."+n),i;!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-tbar-pos")&&(sf.base.removeClass([t],"e-tbar-pos"),i=[].slice.call(t.childNodes),i[1].removeAttribute("style"),i[2].removeAttribute("style"))},u.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+n);sf.base.addClass([t],"e-tbar-pos");this.itemPositioning()},u.prototype.itemPositioning=function(){var o,f=this.element.querySelector("."+n),t,i,s,e,r,h,u;!sf.base.isNullOrUndefined(f)&&f.classList.contains("e-tbar-pos")&&(i=this.element.querySelector(".e-hor-nav"),this.scrollModule?(s=this.options.isVertical?"e-vscroll-content":"e-hscroll-content",t=[].slice.call(f.querySelector("."+s).children)):t=[].slice.call(f.childNodes),o=this.options.isVertical?t[0].offsetHeight+t[2].offsetHeight:t[0].offsetWidth+t[2].offsetWidth,e=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth,i&&(e-=this.options.isVertical?i.offsetHeight:i.offsetWidth,r=(this.options.isVertical?i.offsetHeight:i.offsetWidth)+"px",t[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?t[2].style.top=r:t[2].style.bottom=r:this.options.enableRtl?t[2].style.left=r:t[2].style.right=r),e<=o||(h=(e-o-(this.options.isVertical?t[1].offsetHeight:t[1].offsetWidth))/2,t[1].removeAttribute("style"),u=(this.options.isVertical?t[0].offsetHeight:t[0].offsetWidth)+h+"px",this.options.isVertical?this.options.enableRtl?t[1].style.marginBottom=u:t[1].style.marginTop=u:this.options.enableRtl?t[1].style.marginRight=u:t[1].style.marginLeft=u))},u.prototype.tbarItemAlign=function(n,t,i){var e=this,r,f,u;n.showAlwaysInPopup&&"Show"!==n.overflow||(r=[],(r.push(sf.base.createElement("div",{className:"e-toolbar-left"})),r.push(sf.base.createElement("div",{className:"e-toolbar-center"})),r.push(sf.base.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==n.align)?(r.forEach(function(n){t.appendChild(n)}),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")):"Left"!==n.align&&(f=t.childNodes,u=r[0],[].slice.call(f).forEach(function(n){e.tbarAlgEle.lefts.push(n);u.appendChild(n)}),t.appendChild(u),t.appendChild(r[1]),t.appendChild(r[2]),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")))},u.prototype.renderItems=function(){var t=this.element,r=this.options.items,i;t&&r.length>0&&(i=t.querySelector("."+n),i||(i=sf.base.createElement("div",{className:n})),this.itemsAlign(r,i),sf.base.isNullOrUndefined(t.firstElementChild)?t.appendChild(i):t.insertBefore(i,t.firstElementChild))},u.prototype.setAttr=function(n,t){for(var i,u=Object.keys(n),r=0;r<u.length;r++)"class"===(i=u[r])?sf.base.addClass([t],n[i]):t.setAttribute(i,n[i])},u.prototype.itemClick=function(n){this.activeEleSwitch(n.currentTarget)},u.prototype.activeEleSwitch=function(n){this.activeEleRemove(n.firstElementChild);this.activeEle.focus()},u.prototype.activeEleRemove=function(n){sf.base.isNullOrUndefined(this.activeEle)||this.activeEle.setAttribute("tabindex","-1");this.activeEle=n;sf.base.isNullOrUndefined(this.trgtEle)&&!n.parentElement.classList.contains("e-template")?n.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},u.prototype.resize=function(){var t=this.element,i,r,u;this.tbResize=!0;this.tbarAlign&&this.itemPositioning();this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();i=this.checkOverflow(t,t.getElementsByClassName(n)[0]);i||(this.destroyScroll(),r=t.querySelector("."+n),sf.base.isNullOrUndefined(r)||(sf.base.removeClass([r],"e-multirow-pos"),this.tbarAlign&&sf.base.addClass([r],"e-tbar-pos")));i&&this.scrollModule&&this.offsetWid===t.offsetWidth||(((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj)&&("Extended"===this.options.overflowMode&&(u=window.getComputedStyle(this.element),this.popObj.width=parseFloat(u.width)+2*parseFloat(u.borderRightWidth)),this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()),this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator())},u.prototype.extendedOpen=function(){var n=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&n&&(this.isExtendedOpen=n.classList.contains("e-popup-open"))},u.prototype.disable=function(n){var t=this.element;n?t.classList.add("e-overlay"):t.classList.remove("e-overlay");t.setAttribute("tabindex",n?"-1":"0");this.activeEle&&this.activeEle.setAttribute("tabindex",n?"-1":"0");this.scrollModule&&this.scrollModule.disable(n);this.popObj&&(sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",n?"-1":"0"))},u.prototype.setCssClass=function(n){this.extendedOpen();this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" "));n&&sf.base.addClass([this.element],n.split(" "));this.options.cssClass=n},u}();return{initialize:function(n,t,i){0===t.scrollStep&&(t.scrollStep=null);new u(n,t,i).render()},hidePopup:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||sf.base.isNullOrUndefined(n.blazor__instance.popObj)||n.blazor__instance.popObj.hide({name:"FadeOut",duration:100})},setCssClass:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.setCssClass(t)},setWidth:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.blazor__instance)){n.blazor__instance.options.width=t;n.blazor__instance.extendedOpen();var i=n.offsetWidth;sf.base.setStyleAttribute(n,{width:sf.base.formatUnit(t)});n.blazor__instance.renderOverflowMode();n.blazor__instance.popObj&&i<n.offsetWidth&&n.blazor__instance.popupRefresh(n.blazor__instance.popObj.element,!1)}},setHeight:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.height=t,n.blazor__instance.extendedOpen(),sf.base.setStyleAttribute(n,{height:sf.base.formatUnit(t)}))},setOverflowMode:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.overflowMode=t,n.blazor__instance.extendedOpen(),n.blazor__instance.destroyMode(),n.blazor__instance.renderOverflowMode(),n.blazor__instance.options.enableRtl&&sf.base.addClass([n],"e-rtl"),n.blazor__instance.refreshOverflow())},setEnableRTL:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.enableRtl=t,n.blazor__instance.extendedOpen(),t?sf.base.addClass([n],"e-rtl"):sf.base.removeClass([n],"e-rtl"),sf.base.isNullOrUndefined(n.blazor__instance.scrollModule)||(t?sf.base.addClass([n.blazor__instance.scrollModule.element],"e-rtl"):sf.base.removeClass([n.blazor__instance.scrollModule.element],"e-rtl")),sf.base.isNullOrUndefined(n.blazor__instance.popObj)||(t?sf.base.addClass([n.blazor__instance.popObj.element],"e-rtl"):sf.base.removeClass([n.blazor__instance.popObj.element],"e-rtl")),n.blazor__instance.tbarAlign&&n.blazor__instance.itemPositioning())},setScrollStep:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.scrollStep=t,n.blazor__instance.extendedOpen(),n.blazor__instance.scrollModule&&(n.blazor__instance.scrollModule.scrollStep=t))},setEnableCollision:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.enableCollision=t,n.blazor__instance.extendedOpen(),n.blazor__instance.popObj&&(n.blazor__instance.popObj.collision={Y:t?"flip":"none"}))},setAllowKeyboard:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.allowKeyboard=t,n.blazor__instance.extendedOpen(),n.blazor__instance.unwireKeyboardEvent(),t&&n.blazor__instance.wireKeyboardEvent())},serverItemsRerender:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.items=t,n.blazor__instance.extendedOpen(),n.blazor__instance.destroyMode(),n.blazor__instance.resetServerItems(),n.blazor__instance.serverItemsRefresh())},hideItem:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options.items=t,n.blazor__instance.refreshOverflow())},disable:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.disable(t)},refreshOverflow:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.refreshOverflow()},destroy:function(n){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||n.blazor__instance.destroy()},refresh:function(n,t){0===t.scrollStep&&(t.scrollStep=null);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)||(n.blazor__instance.options=t,n.blazor__instance.destroyMode(),n.blazor__instance.resetServerItems(),n.blazor__instance.serverItemsRefresh())}}}()},"./modules/sf-tooltip.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Tooltip=function(){"use strict";var t="e-tooltip",n="e-popup-open",i=function(){function i(n,t,i,r){this.popupObj=null;this.isPositionUpdate=!1;this.isOffsetXUpdate=!1;this.isOffsetYUpdate=!1;this.tipClass="e-tip-bottom";this.tooltipPositionX="Center";this.tooltipPositionY="Top";this.isContiniousOpen=!1;this.isRestrictUpdate=!1;this.showTimer=0;this.hideTimer=0;this.contentTargetValue=null;this.contentEvent=null;this.contentAnimation=null;this.beforeCloseAnimation=null;this.isPopupHidden=!0;this.isMultiTarget=!1;this.mouseAction=!1;this.mouseMoveEvent=null;this.mouseMoveTarget=null;this.element=n;this.properties=i;this.dotnetRef=t;sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,this.element.blazor__instance=this,this.element.eventList=r)}return i.prototype.getTriggerList=function(n){return"Auto"===n&&(n=sf.base.Browser.isDevice?"Hover":"Hover Focus"),n.split(" ")},i.prototype.formatPosition=function(){var n,t;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(n=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=n[0],this.tooltipPositionX=n[1]):(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},i.prototype.getTargetList=function(n){var t=[];return null===n||""===n?t.push(this.element):(t=[].slice.call(sf.base.selectAll(n,this.element)))&&0===t.length&&(t=[].slice.call(sf.base.selectAll(n,document))),t},i.prototype.wireEvents=function(n){for(var t,o=this.getTriggerList(n),s=this.getTargetList(this.properties.target),r=0,f=o;r<f.length;r++)for(var i=f[r],u=0,e=s;u<e.length;u++){if(t=e[u],"Custom"===i)return;"Focus"===i&&sf.base.EventHandler.add(t,"focus",this.targetHover,this);"Click"===i&&sf.base.EventHandler.add(t,sf.base.Browser.touchStartEvent,this.targetClick,this);"Hover"===i&&(sf.base.Browser.isDevice?(this.touchModule=new sf.base.Touch(t,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),sf.base.EventHandler.add(t,sf.base.Browser.touchEndEvent,this.touchEndHandler,this)):(sf.base.EventHandler.add(t,"mouseover",this.targetHover,this),this.properties.isSticky||sf.base.EventHandler.add(t,"mouseleave",this.onMouseOut,this)))}sf.base.EventHandler.add(document,"touchend",this.touchEnd,this);sf.base.EventHandler.add(document,"scroll wheel",this.scrollHandler,this);sf.base.EventHandler.add(document,"keydown",this.keyDown,this);window.addEventListener("resize",this.onWindowResize.bind(this))},i.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},i.prototype.wireMouseEvents=function(n,t){this.tooltipEle&&(this.properties.isSticky||("focus"===n.type&&sf.base.EventHandler.add(t,"blur",this.onMouseOut,this),this.properties.closeDelay&&(sf.base.EventHandler.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),sf.base.EventHandler.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.properties.mouseTrail&&sf.base.EventHandler.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},i.prototype.unwireEvents=function(n){for(var t,o=this.getTriggerList(n),s=this.getTargetList(this.properties.target),r=0,f=o;r<f.length;r++)for(var i=f[r],u=0,e=s;u<e.length;u++){if(t=e[u],"Custom"===i)return;"Focus"===i&&sf.base.EventHandler.remove(t,"focus",this.targetHover);"Click"===i&&sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.targetClick);"Hover"===i&&(sf.base.Browser.isDevice?(this.touchModule&&this.touchModule.destroy(),sf.base.EventHandler.remove(t,sf.base.Browser.touchEndEvent,this.touchEndHandler)):(sf.base.EventHandler.remove(t,"mouseover",this.targetHover),this.properties.isSticky||sf.base.EventHandler.remove(t,"mouseleave",this.onMouseOut)))}sf.base.EventHandler.remove(document,"touchend",this.touchEnd);sf.base.EventHandler.remove(document,"scroll wheel",this.scrollHandler);sf.base.EventHandler.remove(document,"keydown",this.keyDown);window.removeEventListener("resize",this.onWindowResize.bind(this))},i.prototype.unwireMouseEvents=function(n){if(!this.properties.isSticky){for(var t=0,i=this.getTriggerList(this.properties.opensOn);t<i.length;t++)"Focus"===i[t]&&sf.base.EventHandler.remove(n,"blur",this.onMouseOut);this.properties.closeDelay&&(sf.base.EventHandler.remove(n,"mouseenter",this.tooltipHover),sf.base.EventHandler.remove(n,"mouseleave",this.tooltipMouseOut))}this.properties.mouseTrail&&sf.base.EventHandler.remove(n,"mousemove touchstart mouseenter",this.onMouseMove)},i.prototype.findTarget=function(){return sf.base.select('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},i.prototype.addDescribedBy=function(n,t){var i=(sf.base.getAttributeOrDefault(n,"aria-describedby",null)||"").split(/\s+/);i.indexOf(t)<0&&i.push(t);sf.base.attributes(n,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},i.prototype.removeDescribedBy=function(n){var u=sf.base.getAttributeOrDefault(n,"data-tooltip-id",null),t=(sf.base.getAttributeOrDefault(n,"aria-describedby",null)||"").split(/\s+/),r=t.indexOf(u),i;-1!==r&&t.splice(r,1);n.removeAttribute("data-tooltip-id");i=t.join(" ").trim();i?sf.base.attributes(n,{"aria-describedby":i}):n.removeAttribute("aria-describedby")},i.prototype.clear=function(){if(this.tooltipEle&&this.isPopupHidden&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],n)),this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){sf.base.setStyleAttribute(this.tooltipEle,{display:"none"});var t=document.getElementById(this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle);document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!1).catch(function(){})}this.tooltipEle=null;this.popupObj=null}},i.prototype.tapHoldHandler=function(n){this.targetHover(n.originalEvent)},i.prototype.touchEndHandler=function(){this.properties.isSticky||this.hideTooltip(this.properties.animation.close)},i.prototype.targetClick=function(n){var t=this.properties.target?sf.base.closest(n.target,this.properties.target):this.element;sf.base.isNullOrUndefined(t)||(null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)?this.targetHover(n):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,n,t))},i.prototype.restoreElement=function(n){this.unwireMouseEvents(n);sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(n,"data-content",null))||(this.hasTitle&&sf.base.attributes(n,{title:sf.base.getAttributeOrDefault(n,"data-content",null)}),n.removeAttribute("data-content"));this.removeDescribedBy(n)},i.prototype.checkForOpen=function(n,i,r){var u,f;return null==i||sf.base.isNullOrUndefined(r)?!1:(u=this.properties.target?sf.base.closest(r.target,this.properties.target):this.element,null==u)?!1:(f=!0,"Hover"===n?f=sf.base.matches(u,":hover"):"Auto"===n?f=sf.base.matches(u,":hover")||sf.base.matches(u,":focus"):"Focus"===n?f=sf.base.matches(u,":focus"):"Click"===n?f=i===sf.base.closest(r.target,"."+t)&&null===sf.base.getAttributeOrDefault(u,"data-tooltip-id",null):"Custom"===n&&(f=null===sf.base.getAttributeOrDefault(u,"data-tooltip-id",null)),f)},i.prototype.targetHover=function(n){var t,i,r,u;if(this.checkForOpen(this.properties.opensOn,this.element,n)&&(t=this.properties.target?sf.base.closest(n.target,this.properties.target):this.element,!sf.base.isNullOrUndefined(t)&&null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null))){if((this.isMultiTarget=this.getTargetList(this.properties.target).length>1,this.properties.target&&this.isMultiTarget&&n&&!sf.base.isNullOrUndefined(n.target)&&!sf.base.isNullOrUndefined(n.relatedTarget))&&sf.base.closest(n.target,this.properties.target)==sf.base.closest(n.relatedTarget,this.properties.target))return;for(i=0,r=[].slice.call(sf.base.selectAll('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));i<r.length;i++)u=r[i],this.restoreElement(u);this.mouseAction=!1;this.showTooltip(t,this.properties.animation.open,n)}},i.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains(n)},i.prototype.mouseMoveBeforeOpen=function(n){this.mouseMoveEvent=n},i.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&sf.base.EventHandler.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},i.prototype.showTooltip=function(n,t,i){var r=this;this.clear();clearTimeout(this.showTimer);clearTimeout(this.hideTimer);this.properties.mouseTrail&&this.properties.openDelay&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=n,sf.base.EventHandler.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this));this.showTimer=setTimeout(function(){r.isContiniousOpen=!sf.base.isNullOrUndefined(r.tooltipEle);r.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:r.getDomObject("target",n),event:i||null,hasText:r.hasText(),element:r.getDomObject("tooltipElement",r.tooltipEle),isInteracted:!sf.base.isNullOrUndefined(i),name:"beforeRender",left:i?r.getXYValue(i,"x"):null,top:i?r.getXYValue(i,"y"):null};r.contentTargetValue=n;r.contentEvent=i;r.contentAnimation=t;r.isRestrictUpdate=r.element.eventList.beforeRender&&!r.isHidden();r.element.eventList.beforeRender?r.triggerEvent("TriggerBeforeRenderEvent",r.tooltipEventArgs):r.beforeRenderCallBack(!1)},this.properties.openDelay)},i.prototype.triggerEvent=function(n,t){document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync(n,JSON.stringify(t)).catch(function(){})},i.prototype.beforeRenderCallBack=function(n){n?(this.isPopupHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isPopupHidden=!1,sf.base.isNullOrUndefined(this.tooltipEle)?document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!0).catch(function(){}):this.isContiniousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},i.prototype.checkCollision=function(n,t,i){var u={left:t,top:i,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=sf.popups.isCollide(this.tooltipEle,this.checkCollideTarget(),t,i);return r.length>0&&(u.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,u.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),u},i.prototype.checkCollideTarget=function(){return!this.properties.windowCollision&&this.properties.target?this.element:null},i.prototype.collisionFlipFit=function(n,t,i){var r=this.checkCollision(n,t,i),u=r.position,h,e,s,c,o,f;return(this.tooltipPositionY!==r.vertical&&(u=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?r.vertical+this.tooltipPositionX:this.tooltipPositionX+r.vertical),this.tooltipPositionX!==r.horizontal&&(0===u.indexOf("Left")&&(r.vertical="LeftTop"===u||"LeftCenter"===u?"Top":"Bottom",u=r.vertical+"Left"),0===u.indexOf("Right")&&(r.vertical="RightTop"===u||"RightCenter"===u?"Top":"Bottom",u=r.vertical+"Right"),r.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",n),event:null,isInteracted:!1,hasText:this.hasText(),element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:u,name:"beforeCollision",left:null,top:null},this.isRestrictUpdate=this.element.eventList.beforeCollision&&!this.isHidden(),this.element.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs),r.position!==u)?(h=sf.popups.calculatePosition(n,r.horizontal,r.vertical),this.adjustArrow(n,u,r.horizontal,r.vertical),e=this.calculateTooltipOffset(u),e.top-=-1!=="TopBottom".indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(u.split(/(?=[A-Z])/)[0])?2*this.properties.offsetY:0,e.left-=-1!=="RightLeft".indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(u.split(/(?=[A-Z])/)[0])?2*this.properties.offsetX:0,r.position=u,r.left=h.left+e.left,r.top=h.top+e.top):this.adjustArrow(n,u,r.horizontal,r.vertical),s={left:r.left,top:r.top},c=sf.popups.fit(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},s).left,(sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===u.indexOf("Bottom")||0===u.indexOf("Top")))&&(o=sf.base.select(".e-arrow-tip",this.tooltipEle),f=parseInt(o.style.left,10)-(c-r.left),f<0?f=0:f+o.offsetWidth>this.tooltipEle.clientWidth&&(f=this.tooltipEle.clientWidth-o.offsetWidth),sf.base.setStyleAttribute(o,{left:f.toString()+"px"})),sf.base.setStyleAttribute(this.tooltipEle,{display:""}),s.left=c,s},i.prototype.hideTooltip=function(n,t,i){var r=this;clearTimeout(this.hideTimer);clearTimeout(this.showTimer);this.hideTimer=setTimeout(function(){var u;r.checkForOpen(r.properties.opensOn,r.element,t)||r.properties.closeDelay&&r.tooltipEle&&r.isTooltipOpen||(u=t?r.properties.target?i||t.target:r.element:sf.base.select('[data-tooltip-id= "'+r.ctrlId+'_content"]',document),r.tooltipEventArgs={type:t?t.type.toString():null,cancel:!1,target:r.getDomObject("target",u),event:t||null,element:r.getDomObject("tooltipElement",r.tooltipEle),hasText:r.hasText(),isInteracted:!sf.base.isNullOrUndefined(t),name:"beforeClose",collidedPosition:null,left:t?r.getXYValue(t,"x"):null,top:t?r.getXYValue(t,"y"):null},r.beforeCloseTarget=u,r.beforeCloseAnimation=n,r.isRestrictUpdate=r.element.eventList.beforeClose&&!r.isHidden(),r.element.eventList.beforeClose?r.triggerEvent("TriggerBeforeCloseEvent",r.tooltipEventArgs):r.beforeCloseCallBack(!1))},this.properties.closeDelay)},i.prototype.beforeCloseCallBack=function(n){if(n)this.isPopupHidden=!1;else{var t=this;t.mouseMoveBeforeRemove();this.popupObj?this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget):setTimeout(function(){t.isMultiTarget||t.popupHide(t.beforeCloseAnimation,t.beforeCloseTarget)},200)}},i.prototype.popupHide=function(n,t){t&&this.restoreElement(t);this.isPopupHidden=!0;var i={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeIn"};"None"===n.effect&&(i=void 0);this.popupObj&&this.popupObj.hide(i)},i.prototype.calculateTooltipOffset=function(n){var t={top:0,left:0},r=this.tooltipEle.offsetWidth,u=this.tooltipEle.offsetHeight,o=sf.base.select(".e-arrow-tip",this.tooltipEle),f=o?o.offsetWidth:0,e=o?o.offsetHeight:0,i=this.properties.showTipPointer?0:8,s=e/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),h=f/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.properties.mouseTrail&&(i+=2),n){case"RightTop":t.left+=f+i;t.top-=u-s;break;case"RightCenter":t.left+=f+i;t.top-=u/2;break;case"RightBottom":t.left+=f+i;t.top-=s;break;case"BottomRight":t.top+=e+i;t.left-=h;break;case"BottomCenter":t.top+=e+i;t.left-=r/2;break;case"BottomLeft":t.top+=e+i;t.left-=r-h;break;case"LeftBottom":t.left-=f+r+i;t.top-=s;break;case"LeftCenter":t.left-=f+r+i;t.top-=u/2;break;case"LeftTop":t.left-=f+r+i;t.top-=u-s;break;case"TopLeft":t.top-=u+e+i;t.left-=r-h;break;case"TopRight":t.top-=u+e+i;t.left-=h;break;default:t.top-=u+e+i;t.left-=r/2}return t.left+=this.properties.offsetX,t.top+=this.properties.offsetY,t},i.prototype.setTipClass=function(n){this.tipClass=0===n.indexOf("Right")?"e-tip-left":0===n.indexOf("Bottom")?"e-tip-top":0===n.indexOf("Left")?"e-tip-right":"e-tip-bottom"},i.prototype.updateTipPosition=function(n){var t=sf.base.selectAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner",this.tooltipEle);sf.base.removeClass(t,["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"]);this.setTipClass(n);sf.base.addClass(t,this.tipClass)},i.prototype.adjustArrow=function(n,t,i,r){var o,s;if(!1!==this.properties.showTipPointer){this.updateTipPosition(t);sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var u,c=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,a=sf.base.select(".e-arrow-tip",this.tooltipEle),h=sf.base.select(".e-arrow-tip-inner",this.tooltipEle),f=a.offsetWidth,e=a.offsetHeight;(sf.base.setStyleAttribute(this.tooltipEle,{display:""}),"e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass)?("e-tip-bottom"===this.tipClass?(s="99.9%",sf.base.setStyleAttribute(h,{top:"-"+(e-2)+"px"})):(s=-(e-1)+"px",sf.base.setStyleAttribute(h,{top:"-"+(e-6)+"px"})),n)&&(o=(u="Center"!==i||c>n.offsetWidth||this.properties.mouseTrail)&&"Left"===i||!u&&"End"===this.properties.tipPointerPosition?c-f-2+"px":u&&"Right"===i||!u&&"Start"===this.properties.tipPointerPosition?"2px":c/2-f/2+"px"):("e-tip-right"===this.tipClass?(o="99.9%",sf.base.setStyleAttribute(h,{left:"-"+(f-2)+"px"})):(o=-(f-1)+"px",sf.base.setStyleAttribute(h,{left:f-2-f+"px"})),s=(u="Center"!==r||l>n.offsetHeight||this.properties.mouseTrail)&&"Top"===r||!u&&"End"===this.properties.tipPointerPosition?l-e-2+"px":u&&"Bottom"===r||!u&&"Start"===this.properties.tipPointerPosition?"2px":l/2-e/2+"px");sf.base.setStyleAttribute(a,{top:s,left:o})}},i.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},i.prototype.tooltipMouseOut=function(n){this.isTooltipOpen=!1;this.hideTooltip(this.properties.animation.close,n,this.findTarget())},i.prototype.onMouseOut=function(n){var i=n.relatedTarget,t;(this.mouseAction=!0,i&&!this.properties.mouseTrail)?(t=sf.base.closest(i,".e-tooltip-wrap.e-lib.e-popup"),t?sf.base.EventHandler.add(t,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.properties.animation.close,n,this.findTarget()),0===this.properties.closeDelay&&this.clear())):(this.hideTooltip(this.properties.animation.close,n,this.findTarget()),this.clear())},i.prototype.tooltipElementMouseOut=function(n){this.hideTooltip(this.properties.animation.close,n,this.findTarget());sf.base.EventHandler.remove(this.element,"mouseleave",this.tooltipElementMouseOut);this.clear()},i.prototype.onMouseMove=function(t){var r,u,o,f;if(this.tooltipEle){r=0;u=0;t.type.indexOf("touch")>-1?(t.preventDefault(),r=t.touches[0].pageX,u=t.touches[0].pageY):(r=t.pageX,u=t.pageY);sf.base.Animation.stop(this.tooltipEle);sf.base.removeClass([this.tooltipEle],"e-popup-close");sf.base.addClass([this.tooltipEle],n);this.adjustArrow(t.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var e=this.calculateTooltipOffset(this.properties.position),s=r+e.left+this.properties.offsetX,h=u+e.top+this.properties.offsetY,i=this.checkCollision(t.target,s,h);(this.tooltipPositionX!==i.horizontal||this.tooltipPositionY!==i.vertical)&&(o=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?i.vertical+i.horizontal:i.horizontal+i.vertical,i.position=o,this.adjustArrow(t.target,i.position,i.horizontal,i.vertical),f=this.calculateTooltipOffset(i.position),i.left=r+f.left-this.properties.offsetX,i.top=u+f.top-this.properties.offsetY);sf.base.setStyleAttribute(this.tooltipEle,{left:i.left+"px",top:i.top+"px"})}},i.prototype.keyDown=function(n){this.tooltipEle&&27===n.keyCode&&this.hideTooltip(this.properties.animation.close)},i.prototype.touchEnd=function(n){this.tooltipEle&&null===sf.base.closest(n.target,"."+t)&&!this.properties.isSticky&&this.hideTooltip(this.properties.animation.close)},i.prototype.scrollHandler=function(n){this.tooltipEle&&(sf.base.closest(n.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},i.prototype.renderContent=function(n){var t=sf.base.getAttributeOrDefault(n,"title",null),i=sf.base.getAttributeOrDefault(n,"data-title",null);(!sf.base.isNullOrUndefined(t)&&n?(sf.base.attributes(n,{"data-content":t}),this.hasTitle=!0,this.isMultiTarget=!0,n.removeAttribute("title")):!sf.base.isNullOrUndefined(i)&&n&&(sf.base.attributes(n,{"data-content":i}),this.isMultiTarget=!0),this.properties.content)||(sf.base.select(".e-tip-content",this.tooltipEle).innerText=n.getAttribute("data-content"))},i.prototype.setHeigthWidth=function(n,t,i){this.tooltipEle&&sf.base.setStyleAttribute(this.tooltipEle,{height:t,width:n});i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=n)},i.prototype.contentUpdated=function(){if(sf.base.isNullOrUndefined(this.tooltipEle)){if(this.ctrlId=this.element.id,this.tooltipEle=sf.base.select("#"+this.ctrlId+"_content",document),this.tooltipEle&&(sf.base.setStyleAttribute(this.tooltipEle,{position:"absolute"}),this.setHeigthWidth(sf.base.formatUnit(this.properties.width),sf.base.formatUnit(this.properties.height),this.contentTargetValue),this.contentTargetValue)){sf.base.Browser.isDevice&&sf.base.addClass([this.tooltipEle],"e-bigger");document.body.appendChild(this.tooltipEle);sf.base.removeClass([this.tooltipEle],"e-hidden");this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content");this.renderContent(this.contentTargetValue);sf.base.addClass([this.tooltipEle],n);this.renderPopup(this.contentTargetValue);var t=this.properties.position;this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY);sf.base.Animation.stop(this.tooltipEle);this.reposition(this.contentTargetValue);this.afterContentRender()}}else{if(!this.isContiniousOpen||this.isRestrictUpdate)return;(sf.base.addClass([this.tooltipEle],n),document.body.appendChild(this.tooltipEle),this.contentTargetValue)&&(this.renderPopup(this.contentTargetValue),t=this.properties.position,this.adjustArrow(this.contentTargetValue,t,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender())}},i.prototype.afterContentRender=function(){sf.base.removeClass([this.tooltipEle],n);sf.base.addClass([this.tooltipEle],"e-popup-close");this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!sf.base.isNullOrUndefined(this.contentEvent),hasText:this.hasText(),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle),left:this.contentEvent?this.getXYValue(this.contentEvent,"x"):null,top:this.contentEvent?this.getXYValue(this.contentEvent,"y"):null};this.isRestrictUpdate=this.element.eventList.beforeOpen&&!this.isHidden();this.element.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},i.prototype.beforeOpenCallBack=function(n){if(n)this.isPopupHidden=!0,this.contentTargetValue&&this.popupHide(this.properties.animation.close,this.contentTargetValue),this.mouseMoveBeforeRemove();else{if(sf.base.isNullOrUndefined(this.contentAnimation))return;var t={name:this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};"None"===this.contentAnimation.effect&&(t=void 0);this.popupObj&&(this.popupObj.show(t,this.contentTargetValue),this.properties.openDelay&&this.properties.mouseTrail&&this.mouseMoveEvent&&this.onMouseMove(this.mouseMoveEvent))}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue);this.contentTargetValue=this.contentEvent=this.contentAnimation=null},i.prototype.reposition=function(n){if(null!==n&&this.tooltipEle){var t=this.getTooltipPosition(n);this.popupObj&&(this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind())}},i.prototype.renderPopup=function(n){var t=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(n);this.tooltipEle.classList.remove("e-lib");this.popupObj=new sf.popups.Popup(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:t.left,Y:t.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},i.prototype.openPopupHandler=function(){this.tooltipEle&&this.tooltipEle.classList.contains("e-popup-close")&&this.isMultiTarget&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],n));this.properties.mouseTrail||this.reposition(this.findTarget());this.tooltipEventArgs.name="Opened";this.isRestrictUpdate=this.element.eventList.opened&&!this.isHidden();this.element.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs);this.mouseAction&&!sf.base.isNullOrUndefined(this.tooltipEle)&&this.hideTooltip(this.properties.animation.close)},i.prototype.closePopupHandler=function(){this.clear();this.tooltipEventArgs.name="Closed";this.isRestrictUpdate=this.element.eventList.closed&&!this.isHidden();this.element.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},i.prototype.getTooltipPosition=function(n){sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var t=sf.popups.calculatePosition(n,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.properties.position),r=this.collisionFlipFit(n,t.left+i.left,t.top+i.top);return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),r},i.prototype.getDomObject=function(n,t){return t?window.sfBlazor.getDomObject(n,t):null},i.prototype.hasText=function(){return!!this.tooltipEle&&""!==this.tooltipEle.innerText.trim()},i.prototype.getXYValue=function(n,t){var u,i=n.changedTouches,r;return(u="x"===t?i?i[0].clientX:n.clientX:i?i[0].clientY:n.clientY)||"focus"!==n.type||!n.target||(r=n.target.getBoundingClientRect(),u=r?"x"===t?r.left:r.top:null),Math.ceil(u)},i.prototype.destroy=function(){if(this.tooltipEle){var n=sf.base.select("#"+this.ctrlId+"_content_placeholder",document);n&&n.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy();sf.base.removeClass([this.element],t);this.unwireEvents(this.properties.opensOn);this.unwireMouseEvents(this.element);this.tooltipEle=null;this.popupObj=null},i}();return{wireEvents:function(n,t,r,u){this.updateAnimation(r.animation);new i(n,t,r,u);this.isValid(n)&&(n.blazor__instance.formatPosition(),n.blazor__instance.wireEvents(r.opensOn),sf.base.removeClass([n],["e-blazor-hidden"]))},contentUpdated:function(n){this.isValid(n)&&n.blazor__instance.contentUpdated()},updateAnimation:function(n){n.open.duration=n.open.duration?n.open.duration:void 0;n.close.duration=n.close.duration?n.close.duration:void 0},beforeRenderCallBack:function(n,t){this.isValid(n)&&n.blazor__instance.beforeRenderCallBack(t)},beforeOpenCallBack:function(n,t){this.isValid(n)&&n.blazor__instance.beforeOpenCallBack(t)},beforeCloseCallBack:function(n,t){this.isValid(n)&&n.blazor__instance.beforeCloseCallBack(t)},showTooltip:function(n,t,i,r){this.isValid(n)&&(null!==r&&""!==r&&sf.base.select(r,n.blazor__instance.element)&&(t=sf.base.select(r,n.blazor__instance.element)),n.blazor__instance.showTooltip(t,i,null))},hideTooltip:function(n,t){this.isValid(n)&&n.blazor__instance.hideTooltip(t)},destroy:function(n){this.isValid(n)&&n.blazor__instance.destroy()},refresh:function(n){if(this.isValid(n)){var t=n.blazor__instance;t.isPopupHidden||t.hideTooltip(t.properties.animation.close);t.unwireEvents(t.properties.opensOn);t.wireEvents(t.properties.opensOn)}},refreshPosition:function(n,t,i){if(this.isValid(n)){var r=n.blazor__instance;null===t&&(t=null!==i&&""!==i?sf.base.select(i,r.element):r.element);r.reposition(t)}},updateProperties:function(n,t,i){var r,f,e,s,o,u;this.isValid(n)&&(r=n.blazor__instance,f=n.blazor__instance.properties,(r.isRestrictUpdate=!0,i.animation&&this.updateAnimation(i.animation),this.updateAnimation(t.animation),i.opensOn||!sf.base.isNullOrUndefined(i.isSticky))?(r.unwireEvents(r.properties.opensOn),r.properties=t,r.wireEvents(r.properties.opensOn)):(e=r.findTarget(),(i.height||i.width?r.setHeigthWidth(sf.base.formatUnit(i.width),sf.base.formatUnit(i.height),e):i.position?r.isPositionUpdate=!0:i.offsetX?r.isOffsetXUpdate=!0:i.offsetX&&(r.isOffsetYUpdate=!0),r.tooltipEle)?(r.isPositionUpdate&&(s=sf.base.select(".e-arrow-tip-inner",r.tooltipEle),o=sf.base.select(".e-arrow-tip",r.tooltipEle),sf.base.removeClass([o],[r.tipClass]),r.properties=t,r.formatPosition(),r.setTipClass(i.position),sf.base.addClass([o],[r.tipClass]),sf.base.setStyleAttribute(s,{top:null,left:null})),r.isOffsetXUpdate&&(u=parseInt(r.tooltipEle.style.left,10)+(i.offsetX-f.offsetX),sf.base.setStyleAttribute(r.tooltipEle,{left:u.toString()+"px"})),r.isOffsetYUpdate&&(u=parseInt(r.tooltipEle.style.top,10)+(i.offsetY-f.offsetY),sf.base.setStyleAttribute(r.tooltipEle,{top:u.toString()+"px"})),r.properties=t,r.reposition(e)):(r.properties=t,r.isPositionUpdate&&r.formatPosition()),r.isOffsetYUpdate=!1,r.isOffsetXUpdate=!1,r.isPositionUpdate=!1,r.isRestrictUpdate=!1))},isValid:function(n){return!(!n||!n.blazor__instance)}}}()},"./modules/sf-treegrid.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.TreeGrid=function(){"use strict";function n(n,t,i){for(var r=n;r&&!(i?r.id===t:r.classList.contains(t));)r=r.parentElement;return r}var t=function(){function n(n){this.treeCopyContent="";this.copiedUIdCollection=[];this.parent=n;this.gridClipboard=this.parent.grid.clipboardModule}return n.prototype.copy=function(n){document.queryCommandSupported("copy")&&(this.setCopyData(n),document.execCommand("copy"),this.gridClipboard.clipBoardTextArea.blur());this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},n.prototype.setCopyData=function(n){var r,i,t,e,u,f;if(""===window.getSelection().toString()&&(this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent="",r=this.parent.grid.getRows(),"Cell"!==this.parent.grid.options.selectionMode)){for(i=this.parent.grid.getSelectedRowIndexes().sort(function(n,t){return n-t}),t=0;t<i.length;t++)(t>0&&(this.treeCopyContent+="\n"),r[i[t]].classList.contains("e-summaryrow"))||(e=[].slice.call(r[i[t]].querySelectorAll(".e-rowcell")),u=r[i[t]].getAttribute("data-uid"),-1===this.copiedUIdCollection.indexOf(u)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(i[t],r,n,t),this.gridClipboard.getCopyData(e,!1,"\t",n),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUIdCollection.push(u),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(i[t],r,n)));if(n){for(f=[],t=0;t<this.parent.grid.getVisibleColumns().length;t++)f[t]=this.parent.grid.getVisibleColumns()[t].headerText;this.gridClipboard.getCopyData(f,!1,"\t",n);this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent;sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.gridClipboard.clipBoardTextArea.setSelectionRange(0,this.gridClipboard.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.gridClipboard.clipBoardTextArea.select());this.gridClipboard.isSelect=!0;this.copiedUIdCollection=[];this.treeCopyContent=""}},n.prototype.parentContentData=function(n,t,i,r){var e=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,o=t[n].cells[e].className.match(/index(\d+)|level(\d+)/g),v=o[0].match(/\d+/)[0],s=+o[1].match(/\d+/)[0],h=s?s-1:0,c=t.filter(function(n){return n.cells[e].classList.contains("e-gridrowindex"+v+"level"+h)})[0],u,f,a;if(!sf.base.isNullOrUndefined(c))for(var y=h,p=c.getAttribute("data-uid"),l=0;l<y+1;l++)for(u=0;u<t.length;u++)if(f=t[u].getAttribute("data-uid"),f===p&&(n=u,a=[].slice.call(t[n].querySelectorAll(".e-rowcell")),-1===this.copiedUIdCollection.indexOf(f))){this.gridClipboard.getCopyData(a,!1,"\t",i);this.treeCopyContent=r>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent;this.copiedUIdCollection.push(f);this.gridClipboard.copyContent="";break}},n.prototype.childContentData=function(n,t,i){var o=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,s=t[n].cells[o].className.match(/index(\d+)|level(\d+)/g),c=s[0].match(/\d+/)[0],l=+s[1].match(/\d+/)[0]+1,f=t.filter(function(n){return n.cells[o].classList.contains("e-gridrowindex"+c+"level"+l)}),u,r,h,e;if(f.length)for(u=0;u<f.length;u++)for(r=0;r<t.length;r++)if(!sf.base.isNullOrUndefined(f[u].getAttribute("data-uid"))&&t[r].getAttribute("data-uid")===f[u].getAttribute("data-uid")){sf.base.isNullOrUndefined(t[r])||t[r].classList.contains("e-summaryrow")||(h=[].slice.call(t[r].querySelectorAll(".e-rowcell")),e=t[r].getAttribute("data-uid"),-1===this.copiedUIdCollection.indexOf(e)&&(this.gridClipboard.getCopyData(h,!1,"\t",i),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUIdCollection.push(e),this.childContentData(r,t,i)));break}},n}(),i=function(){function t(t){var i=this;this.draggedRows=[];this.selectedRows=[];this.canDrop=!0;this.rowDragStart=function(n){var t,u,r;for(i.gridDragStart.apply(i.parent.grid,[n]),i.startedRow=i.parent.grid.rowDragAndDropModule.startedRow,t=i.parent.grid.getSelectedRowIndexes(),u=parseInt(i.startedRow.getAttribute("aria-rowindex"),10),i.selectedRows=i.parent.grid.getSelectedRows(),0!==i.selectedRows.length&&0!==t.length||(i.selectedRows.push(i.startedRow),t.push(u)),r=0;r<t.length;r++)i.draggedRows.push(i.parent.grid.getRows()[t[r]])};this.rowDraging=function(t){var r,e;i.gridDrag.apply(i.parent.grid,[t]);i.dragTarget=i.parent.grid.rowDragAndDropModule.dragTarget;r=i.parent;e=i.parent.element.querySelector(".e-cloneproperties");e.style.cursor="";var u,o=t.target?sf.base.closest(t.target,"tr"):null,f=o?o.rowIndex:-1,s=r.grid.getRows()[f];(i.removeErrorElem(),i.canDrop=!0,-1!==f?i.ensuredropPosition(i.draggedRows,s):(i.canDrop=!1,i.addErrorElem()),!r.options.rowDropTargetID&&i.canDrop&&r.rowDragAndDropModule.updateIcon(i.selectedRows,f,t),r.options.rowDropTargetID)&&(u=n(t.target,"e-treegrid"))&&u.id===i.parent.options.rowDropTargetID&&u.blazor_instance.rowDragAndDropModule.updateIcon(i.selectedRows,f,t);t.target&&sf.base.closest(t.target,"#"+r.options.rowDropTargetID)&&((u=n(t.target,"e-treegrid"))||(e.style.cursor="default"))};this.rowDropped=function(t){var f=i.getElementFromPosition(t.helper,t.event),r=f&&!f.classList.contains("e-dlg-overlay")?f:t.target,e,u,o;if(i.parent.grid.element.classList.remove("e-rowdrag"),e=document.getElementById(i.parent.options.rowDropTargetID),i.parent.options.allowRowDragAndDrop&&i.parent.options.rowDropTargetID&&!n(r,"e-treegrid")){var h=r.classList.value,c=r.id,l=parseInt(i.startedRow.getAttribute("aria-rowindex"),10),a="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";i.parent.dotNetRef.invokeMethodAsync("ReorderRows",l,0,"add",!1,h,c,null,!0,a)}if(i.parent.options.rowDropTargetID&&e&&e.blazor_instance&&e.blazor_instance.getContent().classList.remove("e-allowRowDrop"),!n(r,"e-gridcontent"))return i.dragTarget=null,sf.base.remove(t.helper),i.removetopOrBottomBorder(),i.removeChildBorder(),void(sf.base.isNullOrUndefined(i.parent.element.getElementsByClassName("e-firstrow-border")[0])?sf.base.isNullOrUndefined(i.parent.element.getElementsByClassName("e-lastrow-border")[0])||i.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():i.parent.element.getElementsByClassName("e-firstrow-border")[0].remove());if(u=i.parent,u.options.rowDropTargetID?(t.target&&sf.base.closest(t.target,"#"+u.options.rowDropTargetID)||n(t.target,"e-treegrid")&&n(t.target,"e-treegrid").id===u.options.rowDropTargetID)&&sf.base.setValue("dropPosition",i.dropPosition,t):n(t.target,"e-content")&&(i.parent.element.querySelector(".e-errorelem")&&(i.dropPosition="Invalid"),sf.base.setValue("dropPosition",i.dropPosition,t),sf.base.isNullOrUndefined(u.getHeaderContent().querySelector(".e-firstrow-border"))||u.getHeaderContent().querySelector(".e-firstrow-border").remove()),i.removetopOrBottomBorder(),i.removeChildBorder(),sf.base.isNullOrUndefined(i.parent.element.getElementsByClassName("e-firstrow-border")[0])?sf.base.isNullOrUndefined(i.parent.element.getElementsByClassName("e-lastrow-border")[0])||i.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():i.parent.element.getElementsByClassName("e-firstrow-border")[0].remove(),i.parent.options.allowRowDragAndDrop&&!i.parent.options.rowDropTargetID){i.parent.grid.rowDragAndDropModule.stopTimer();i.parent.grid.getContent().classList.remove("e-grid-relative");i.parent.grid.rowDragAndDropModule.removeBorder(f);o=i.parent.grid.element.querySelector(".e-dragstartrow");o&&o.classList.remove("e-dragstartrow");var v=i.dragTarget,y=r.classList.value,p=r.id,w=parseInt(i.startedRow.getAttribute("aria-rowindex"),10),s="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";"Invalid"!==s&&setTimeout(function(){i.parent.dotNetRef.invokeMethodAsync("ReorderRows",w,v,"delete",!0,y,p,null,!1,s)},10);i.dragTarget=null;i.draggedRows=[]}};this.drop=function(n){i.treeGridDrop({target:n.target,droppedElement:n.droppedElement});sf.base.remove(n.droppedElement)};this.parent=t;this.parent.options.allowRowDragAndDrop&&(this.gridDrag=this.parent.grid.rowDragAndDropModule.drag,this.gridDragStart=this.parent.grid.rowDragAndDropModule.dragStart,this.parent.grid.rowDragAndDropModule.draggable.drag=this.rowDraging,this.parent.grid.rowDragAndDropModule.draggable.dragStop=this.rowDropped,this.parent.grid.rowDragAndDropModule.draggable.dragStart=this.rowDragStart,this.parent.grid.rowDragAndDropModule.droppable.drop=this.drop)}return t.prototype.removeFirstrowBorder=function(n){var t="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&n&&(0!==n.rowIndex||t)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},t.prototype.removeLastrowBorder=function(n){var i=n&&(n.classList.contains("e-emptyrow")||n.classList.contains("e-columnheader")),t=n&&!i&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")!==n.getAttribute("data-uid"),r=t||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&n&&(t||r)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},t.prototype.updateIcon=function(t,i,r){var u=r.target?sf.base.closest(r.target,"tr"):null,s,o,d,v;for(this.dropPosition=void 0,s=0,this.removeFirstrowBorder(u),this.removeLastrowBorder(u),o=0;o<this.selectedRows.length;o++)(sf.base.isNullOrUndefined(u)||u.getAttribute("data-uid")!==this.selectedRows[o].getAttribute("data-uid"))&&n(r.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var f=this.parent,h=0,y=document.getElementById(f.element.id+"_gridcontrol_toolbarItems"),g=y?y.offsetHeight:0,p=this.getOffset(f.element),nt=f.getHeaderContent().offsetHeight+p.top+g,tt=f.getContent().firstElementChild.scrollTop;sf.base.isNullOrUndefined(u)||(s=u.offsetTop-tt);var c=((h=f.options.allowTextWrap?t[0].offsetHeight:s+nt+0)+t[0].offsetHeight-h)/3,l=h+c,a=l+c,it=a+c,e=(p.left,r.event.pageY),w=e<=l,b=e>l&&e<=a,k=e>a&&e<=it;return(w||b||k)&&((w&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(u),this.removeErrorElem(),this.removeLastrowBorder(u),this.topOrBottomBorder(r.target)),b&&"Invalid"!==this.dropPosition)&&(this.removetopOrBottomBorder(),v=sf.base.closest(r.target,"tr"),(d=sf.base.isNullOrUndefined(v)?[]:[].slice.call(v.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(d,!0,"e-childborder"),this.addLastRowborder(u),this.addFirstrowBorder(u),this.dropPosition="middleSegment"),k&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(u),this.removeFirstrowBorder(u),this.topOrBottomBorder(r.target))),this.dropPosition},t.prototype.removeChildBorder=function(){var n;(n=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(n,!1,"e-childborder")},t.prototype.addFirstrowBorder=function(n){var r=this.parent.element,u=this.parent,i;if(n&&0===n.rowIndex&&!n.classList.contains("e-emptyrow")){var t=sf.base.createElement("div",{className:"e-firstrow-border"}),f=this.parent.getHeaderContent(),e=0;u.options.toolbar&&(e=document.getElementById(u.element.id+"_gridcontrol_toolbarItems").offsetHeight);i=!sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID);i&&(t.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+e+"px");t.style.width=i?r.offsetWidth+"px":r.offsetWidth-this.getScrollWidth()+"px";f.querySelectorAll(".e-firstrow-border").length||f.appendChild(t)}},t.prototype.addLastRowborder=function(n){var r=n&&(n.classList.contains("e-emptyrow")||n.classList.contains("e-columnheader")),t,i;n&&!r&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")===n.getAttribute("data-uid")&&(t=sf.base.createElement("div",{className:"e-lastrow-border"}),i=this.parent.getContent(),t.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",i.querySelectorAll(".e-lastrow-border").length||(i.classList.add("e-treegrid-relative"),i.appendChild(t),t.style.bottom=this.getScrollWidth()+"px"))},t.prototype.getScrollWidth=function(){var n=this.parent.getContent().firstElementChild;return n.scrollWidth>n.offsetWidth?this.parent.grid.Scroll.getScrollBarWidth():0},t.prototype.addErrorElem=function(){var n=document.getElementsByClassName("e-cloneproperties")[0],r,t,u,i;n.querySelectorAll(".e-errorelem").length||this.parent.options.rowDropTargetID||(r=document.createElement("div"),sf.base.classList(r,["e-errorcontainer"],[]),sf.base.classList(r,["e-icons","e-errorelem"],[]),t=n.querySelector(".errorValue"),u=n.querySelector(".e-rowcell").innerHTML,t&&(u=t.innerHTML,t.parentNode.removeChild(t)),n.querySelector(".e-rowcell").innerHTML="",i=document.createElement("span"),i.className="errorValue",i.style.paddingLeft="16px",i.innerHTML=u,n.querySelector(".e-rowcell").appendChild(r),n.querySelector(".e-rowcell").appendChild(i))},t.prototype.removeErrorElem=function(){var n=document.querySelector(".e-errorelem");n&&n.remove()},t.prototype.topOrBottomBorder=function(n){var t,i=sf.base.closest(n,"tr");(t=i?[].slice.call(i.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length&&("topSegment"===this.dropPosition&&(this.addRemoveClasses(t,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(t,!0,"e-dropbottom"))},t.prototype.removetopOrBottomBorder=function(){var n;(n=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(n,!1,"e-dropbottom"),this.addRemoveClasses(n,!1,"e-droptop"))},t.prototype.addRemoveClasses=function(n,t,i){for(var r=0,u=n.length;r<u;r++)t?n[r].classList.add(i):n[r].classList.remove(i)},t.prototype.getOffset=function(n){var r=n.getBoundingClientRect(),t=document.body,i=document.documentElement,u=window.pageYOffset||i.scrollTop||t.scrollTop,f=window.pageXOffset||i.scrollLeft||t.scrollLeft,e=i.clientTop||t.clientTop||0,o=i.clientLeft||t.clientLeft||0,s=r.top+u-e,h=r.left+f-o;return{top:Math.round(s),left:Math.round(h)}},t.prototype.treeGridDrop=function(n){var r,t=this.parent,o=sf.base.closest(n.target,"tr"),i;if(!("true"!==n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&n.droppedElement.parentElement.parentElement.id===t.element.id||"true"===n.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&n.droppedElement.parentElement.parentElement.id!==t.element.id)&&(n.droppedElement.parentElement.parentElement.id!==t.element.id&&(r=n.droppedElement.parentElement.parentElement.blazor_instance),r.element.id===t.element.id||r.options.rowDropTargetID===t.element.id)){i=this.getTargetIdx(o);isNaN(i)&&(i=0);t.options.allowPaging&&(i=i+t.options.currentPage*t.options.pageSize-t.options.pageSize);this.removetopOrBottomBorder();this.removeChildBorder();var u=n.target.classList.value,f=n.target.id,e="topSegment"===this.dropPosition?"Above":"bottomSegment"===this.dropPosition?"Below":"middleSegment"===this.dropPosition?"Child":"Invalid";t.dotNetRef.invokeMethodAsync("ReorderRows",0,i,"add",!1,u,f,r.dotNetRef,!1,e);r.dotNetRef.invokeMethodAsync("ReorderRows",0,i,"delete",!1,u,f,null,!1,e)}},t.prototype.getTargetIdx=function(n){return n?parseInt(n.getAttribute("aria-rowindex"),10):0},t.prototype.getElementFromPosition=function(n,t){var i=this.getPosition(t),r;return n.style.display="none",r=document.elementFromPoint(i.x,i.y),n.style.display="",r},t.prototype.ensuredropPosition=function(n,t){var i=this,u=this.parent.grid.getRows(),r=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex;n.filter(function(n){var e=n.cells[r].className.match(/index(\d+)|level(\d+)/g),o=e[0].match(/\d+/)[0],s=+e[1].match(/\d+/)[0]+1,f=u.filter(function(n){return n.cells[r].classList.contains("e-gridrowindex"+o+"level"+s)});if(f.length){if(-1!==f.map(function(n){return n.getAttribute("data-uid")}).indexOf(t.getAttribute("data-uid")))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(f,t)}})},t.prototype.getPosition=function(n){var t={};return t.x=sf.base.isNullOrUndefined(n.clientX)?n.changedTouches[0].clientX:n.clientX,t.y=sf.base.isNullOrUndefined(n.clientY)?n.changedTouches[0].clientY:n.clientY,t},t}(),r=function(){function n(n,t){this.parent=t;this.dotNetRef=n}return n.prototype.renderHeaderCheckbox=function(n,t){var i=sf.base.createElement("div",{className:"e-checkbox-wrapper e-css e-hierarchycheckbox"}),o=sf.base.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}}),r,e,u,f;i.appendChild(o);r=sf.base.createElement("span",{className:"e-frame e-icons",styles:"width: 18px;"});i.appendChild(r);r.addEventListener("click",this.headerSelect.bind(this));e=sf.base.createElement("span",{className:"e-label"});i.appendChild(e);u=n.querySelectorAll(".e-headercontent th")[t];sf.base.isNullOrUndefined(u.querySelector(".e-checkbox-wrapper"))&&(f=u.querySelector(".e-headercelldiv"),f.insertBefore(i,f.firstChild))},n.prototype.updateHeaderCheckbox=function(n,t){"intermediate"===t?(n.classList.add("e-stop"),n.classList.remove("e-check")):"check"===t?(n.classList.add("e-check"),n.classList.remove("e-stop")):(n.classList.remove("e-stop"),n.classList.remove("e-check"))},n.prototype.headerSelect=function(n){var t=n.currentTarget,i="uncheck";t.classList.contains("e-check")?t.classList.remove("e-check"):t.classList.contains("e-stop")?t.classList.remove("e-stop"):(t.classList.add("e-check"),i="check");this.dotNetRef.invokeMethodAsync("HeaderSelectAll",i)},n}(),u=function(){function n(n,u,f){this.columnModel=[];this.element=n;this.element.blazor_instance=this;this.grid=n.querySelector("#"+n.id+"_gridcontrol").blazor__instance;this.dotNetRef=f;this.options=u;this.header=this.element.querySelector(".e-headercontent");this.content=this.element.querySelector(".e-content");this.footer=this.element.querySelector(".e-summarycontent");this.clipboardModule=new t(this);this.rowDragAndDropModule=new i(this);this.checkboxcolumnModule=new r(f,this);this.wireEvents()}return n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},n.prototype.getContent=function(){return this.content},n.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},n.prototype.getHeaderContent=function(){return this.header},n.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},n.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},n.prototype.KeyDownHandler=function(n){67===n.keyCode&&n.ctrlKey?this.clipboardModule.copy():72===n.keyCode&&n.ctrlKey&&n.shiftKey&&this.clipboardModule.copy(!0)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},n.prototype.destroy=function(){this.unWireEvents()},n}();return{initialize:function(n,t,i){sf.base.enableBlazorMode();new u(n,t,i)},modelChanged:function(n,t){sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor_instance)||!(n.blazor_instance.options=t,t.enableVirtualization&&t.isExpandCollapse)||(n.blazor_instance.grid.virtualContentModule.preventEvent=!0)},headerCheckbox:function(n,t){sf.base.isNullOrUndefined(n)||n.blazor_instance.checkboxcolumnModule.renderHeaderCheckbox(n,t)},updateCheckbox:function(n,t,i){var r=n.querySelectorAll(".e-gridheader th")[t].querySelector("span.e-frame");n.blazor_instance.checkboxcolumnModule.updateHeaderCheckbox(r,i)},copyToClipBoard:function(n,t){"Cell"===n.blazor_instance.grid.options.selectionMode?n.blazor_instance.grid.clipboardModule.copy(t):n.blazor_instance.clipboardModule.copy(t)},paste:function(n,t,i,r){n.blazor_instance.grid.clipboardModule.paste(t,i,r)},destroy:function(n){n.blazor_instance.destroy()}}}()},"./modules/sf-treemap.js":function(){window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Treemap=function(){"use strict";var n=function(){function n(n,t){this.resizeTo=0;this.element=n;this.dotNetRef=t;this.element.blazor__instance=this}return n.prototype.initializeEvents=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUp.bind(this),this);sf.base.EventHandler.add(this.element,"mousemove",this.mouseMove.bind(this),this);sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this);sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeave.bind(this),this);sf.base.EventHandler.add(this.element,"contextmenu",this.contextMenuEvent.bind(this),this);window.addEventListener("resize",this.resize.bind(this));new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"})},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUp);sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMove);sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeave);sf.base.EventHandler.remove(this.element,"contextmenu",this.contextMenuEvent);window.removeEventListener("resize",this.resize.bind(this));sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler);var n=sf.base.getInstance(this.element,this.keyActionHandler);n&&n.destroy();this.element=null;this.dotNetRef=null},n.prototype.keyActionHandler=function(n){"enter"===n.action&&(this.mouseDownProcess(n),this.mouseUpProcess(n))},n.prototype.contextMenuEvent=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerRightClick")},n.prototype.resize=function(){var n,t,i=this;null!=this.element&&(n=this.element.getBoundingClientRect().width,t=this.element.getBoundingClientRect().height);this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout(function(){i.dotNetRef.invokeMethodAsync("TriggerResize",n,t)},500))},n.prototype.mouseDown=function(n){this.mouseDownProcess(n)},n.prototype.mouseDownProcess=function(n){n.preventDefault();var t=this.getElementId(n.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseDown",n.target.id,t)},n.prototype.mouseUp=function(n){this.mouseUpProcess(n)},n.prototype.mouseUpProcess=function(n){var t=this.getElementId(n.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseUp",n.target.id,t,3===n.which)},n.prototype.mouseMove=function(n){var i,r;if(null!=this.element){var t=this.element.children[1],u=t.getBoundingClientRect(),f=t.ownerDocument.defaultView.pageXOffset,e=t.ownerDocument.defaultView.pageYOffset,o=t.ownerDocument.documentElement.clientTop,s=t.ownerDocument.documentElement.clientLeft,h=u.left+f-s,c=u.top+e-o;i=n.pageX-h;r=n.pageY-c}this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",n.target.id,i,r)},n.prototype.mouseLeave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseLeave")},n.prototype.getElementId=function(n){return sf.base.isNullOrUndefined(n)||""===n?"":document.getElementById(n).textContent},n}();return{initialize:function(t,i,r,u){return new n(t,i).initializeEvents(),this.getElementSize(t,r,u)},getElementSize:function(n,t,i){var u,f,r;return null!=n&&(n.style.height=t,n.style.width=i,r=n.getBoundingClientRect(),u=r.width,f=r.height),{width:u,height:f,isIE:sf.base.Browser.isIE}},setElementAttribute:function(n,t,i,r,u,f,e,o,s){for(var h,c,v,y,l,p,a=0;a<i.length;a++)if(h=document.getElementById(i[a]+"_RectPath"),null!==h&&(c=h.getAttribute("class"),v=void 0,sf.base.isNullOrUndefined(c)&&(v=document.createAttribute("class"),c=""),"Selection"===o&&"treeMapHighlight"===c&&(h.setAttribute("class",""),c=""),"treeMapSelection"!==c)){for(y=0;y<t.length;y++)l=document.getElementById(t[y]),null!==l&&(l.setAttribute("fill",r),l.setAttribute("opacity",u),l.setAttribute("stroke",f),l.setAttribute("stroke-width",e));h.setAttribute("fill",r);h.setAttribute("opacity",u);h.setAttribute("stroke",f);h.setAttribute("stroke-width",e);c="Highlight"===o||"LegendHighlight"===o?"treeMapHighlight":"treeMapSelection";!sf.base.isNullOrUndefined(v)&&sf.base.isNullOrUndefined(h.getAttribute("class"))?(v.value=c,h.setAttributeNode(v)):h.setAttribute("class",c);p=s.blazor__instance.getElementId(i[a]+"_Text");"Selection"===o?n.invokeMethodAsync("TriggerItemSelect",p):"Highlight"===o&&n.invokeMethodAsync("TriggerItemHighlight")}},removeElementAttribute:function(n,t,i,r,u,f,e,o,s,h,c){for(var a,p,y,v,l=0;l<f.length;l++)if(a=document.getElementById(f[l]+"_RectPath"),null!=a&&(p=a.getAttribute("class"),"Highlight"===c&&"treeMapSelection"!==p||"Selection"===c&&"treeMapSelection"===p)){for(y=0;y<n.length;y++)v=document.getElementById(n[y]),null!=v&&(v.setAttribute("fill",t),v.setAttribute("opacity",i),v.setAttribute("stroke",r),v.setAttribute("stroke-width",u));a.setAttribute("fill",e[l]);a.setAttribute("opacity",o[l]);a.setAttribute("stroke",s[l]);a.setAttribute("stroke-width",h[l]);a.setAttribute("class","")}},templateElementSize:function(n,t){for(var h,f,c,e,l,a,o,s,u=document.getElementById(n),v=u.clientWidth,y=u.clientHeight,r=u.getAttribute("style").split(";"),i=0;i<r.length;i++)-1!==r[i].indexOf("left")?(h=r[i].split(":"),f=parseFloat(h[h.length-1]),l=-1!==t.indexOf("Left")?f:-1===t.indexOf("Right")?f-v/2:f-v,r[i]="left:"+l+"px"):-1!==r[i].indexOf("top")&&(c=r[i].split(":"),e=parseFloat(c[c.length-1]),a=-1!==t.indexOf("Top")?e:-1===t.indexOf("Bottom")?e-y/2:e-y,r[i]="top:"+a+"px"),s=r[i]+";",o=0===i?s:o.concat(s);u.setAttribute("style",o)},setTemplateTooltipLocation:function(n,t,i){var u=document.getElementById(n.id+"_Tooltip"),o=document.getElementById(n.id+"_TreeMap_Border");if(u&&o){var f,s=Number(o.getAttribute("x")),c=Number(o.getAttribute("y")),h=Number(o.getAttribute("width")),r=u.getBoundingClientRect(),e=void 0;i-r.height<c?(e=t+r.width/2>h?(h-r.width).toString()+"px":t-r.width/2<s?u.style.left=s.toString()+"px":(t-r.width/2).toString()+"px",f=i.toString()+"px"):t+r.width/2>h?(e=(h-r.width).toString()+"px",f=(i-r.height).toString()+"px"):t-r.width/2<s?(e=s.toString()+"px",f=(i-r.height).toString()+"px"):(e=(t-r.width/2).toString()+"px",f=(i-r.height).toString()+"px");u.style.left=e||"0";u.style.top=f||"0";u.style.visibility="visible"}},destroy:function(n){n&&n.blazor__instance&&n.blazor__instance.unWireEvents()}}}()},"./modules/sf-treeview.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.TreeView=function(){"use strict";var t="e-list-item",i="e-list-parent",s="e-hover",e="e-icon-collapsible",r="e-icon-expandable",o="e-icons",c="block",h="e-active",u="e-treeview",p="e-node-focus",a="e-checkbox-wrapper",l="e-text-content",v="e-sibling",b="e-drop-in",y="e-drop-next",w="e-no-drop",f="e-disable",k=function(){function k(n,t,i){this.isHelperElement=!0;this.mouseDownStatus=!1;this.preventExpand=!1;this.keyBoardAction=!1;this.isNodeRendered=!1;this.isEdited=!1;this.element=n;this.element.blazor__instance=this;this.dotNetRef=i;this.options=t}return k.prototype.render=function(){this.dragStartAction=!1;this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:r,expandIconPosition:"Left"};this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"};this.animationObj=new sf.base.Animation({});this.setDisabledMode(this.options.disabled);this.setMultiSelect(this.options.allowMultiSelection);this.options.hasTemplate&&this.element.classList.add("e-interaction")},k.prototype.setDisabledMode=function(n){this.setDragAndDrop(this.options.allowDragAndDrop);this.wireEditingEvents(this.options.allowEditing);this.checkAllDisabled(n);n?this.unWireEvents():this.wireEvents()},k.prototype.checkAllDisabled=function(n){n?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},k.prototype.setEnableRtl=function(){(this.options.enableRtl?sf.base.addClass:sf.base.removeClass)([this.element],"e-rtl")},k.prototype.updateWrap=function(n){var t;if(this.options.fullRowSelect)for(var r=sf.base.selectAll("li",n||this.element),u=r.length,i=0;i<u;i++)t=sf.base.select(".e-fullrow",r[i]),t&&t.nextElementSibling&&(t.style.height=this.options.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")},k.prototype.setTextWrap=function(){this.options.allowTextWrap&&!this.element.classList.contains("e-text-wrap")?sf.base.addClass([this.element],"e-text-wrap"):!this.options.allowTextWrap&&this.element.classList.contains("e-text-wrap")&&sf.base.removeClass([this.element],"e-text-wrap");this.updateWrap()},k.prototype.mouseDownHandler=function(n){this.mouseDownStatus=!0;(n.shiftKey||n.ctrlKey)&&n.preventDefault();n.ctrlKey&&this.options.allowMultiSelection&&sf.base.EventHandler.add(this.element,"contextmenu",this.preventContextMenu,this)},k.prototype.onMouseLeave=function(){this.removeHover()},k.prototype.unWireEvents=function(){this.wireClickEvent(!1);this.wireExpandOnEvent(!1);sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler);sf.base.EventHandler.remove(this.element,"focus",this.focusIn);sf.base.EventHandler.remove(this.element,"blur",this.focusOut);sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver);sf.base.EventHandler.remove(this.element,"mouseout",this.onMouseLeave);!this.options.disabled&&this.keyboardModule&&this.keyboardModule.destroy()},k.prototype.keyboardActionHandler=function(n){var t,i,r,u,f;this.keyAction=n;t=n.target;i=this.getFocusedNode();t&&t.classList.contains("e-input")?(r=t,"enter"===n.action?(r.blur(),this.element.focus(),sf.base.addClass([i],s)):"escape"===n.action&&(r.value=this.oldText,r.blur(),this.element.focus(),sf.base.addClass([i],s))):(n.preventDefault(),u={cancel:!1,event:n},f=i.getAttribute("data-uid"),this.dotNetRef.invokeMethodAsync("TriggerKeyboardEvent",u,f,n.action,n.key))},k.prototype.setMultiSelect=function(n){this.options.allowMultiSelection=n;n?this.element.setAttribute("aria-multiselectable","true"):this.element.removeAttribute("aria-multiselectable")},k.prototype.setCssClass=function(n){this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" "));n&&sf.base.addClass([this.element],n.split(" "));this.options.cssClass=n},k.prototype.wireEditingEvents=function(n){var i=this,t;n&&!this.options.disabled?(t=this,this.touchEditObj=new sf.base.Touch(this.element,{tap:function(n){i.isDoubleTapped(n)&&2===n.tapCount&&(n.originalEvent.preventDefault(),t.editingHandler(n.originalEvent))}})):this.touchEditObj&&this.touchEditObj.destroy()},k.prototype.setDragAndDrop=function(n){n&&!this.options.disabled?this.initializeDrag():this.destroyDrag()},k.prototype.setDragArea=function(n){this.options.allowDragAndDrop&&(this.dragObj.dragArea=n)},k.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},k.prototype.initializeDrag=function(){var e,n=this;this.dragObj=new sf.base.Draggable(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.options.dropArea,dragTarget:"."+l,helper:function(s){var y,c,a,p,w,v,b;return(n.dragTarget=s.sender.target,y=sf.base.closest(n.dragTarget,"."+u),c=sf.base.closest(n.dragTarget,"."+l),n.dragLi=sf.base.closest(n.dragTarget,"."+t),n.options.fullRowSelect&&!c&&n.dragTarget.classList.contains("e-fullrow")&&(c=n.dragTarget.nextElementSibling),!n.dragTarget||!s.element.isSameNode(y)||!c||n.dragTarget.classList.contains(u)||n.dragTarget.classList.contains(i)||n.dragTarget.classList.contains(t)||n.dragLi.classList.contains(f))?!1:(a=c.cloneNode(!0),sf.base.isNullOrUndefined(sf.base.select("div."+o,a))&&(p=sf.base.createElement("div",{className:o+" "+r}),a.insertBefore(p,a.children[0])),w="e-drag-item "+u+" "+n.options.cssClass+" "+(n.options.enableRtl?"e-rtl":""),(e=sf.base.createElement("div",{className:w})).appendChild(a),v=n.element.querySelectorAll("."+h).length,v>1&&n.options.allowMultiSelection&&n.dragLi.classList.contains(h)&&(b=sf.base.createElement("span",{className:"e-drop-count",innerHTML:""+v}),e.appendChild(b)),document.body.appendChild(e),document.body.style.cursor="",n.dragData=n.getNodeData(n.dragLi),n.virtualEle=e,e)},drag:function(t){n.dragObj.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(t.event.targetTouches)||sf.base.Browser.isDevice?60:-20}});n.dragAction(t,e)},dragStart:function(i){var f,r,u,o,s;sf.base.addClass([n.element],"e-dragging");r=sf.base.closest(i.target,t);r&&(f=parseInt(r.getAttribute("aria-level"),10));u=n.getDragEvent(i.event,n,null,i.target,null,e,f);u.draggedNode.classList.contains("e-editing")?(n.dragObj.intDestroy(i.event),n.dragCancelAction(e)):(n.dragStartEventArgs=i,o=n.getXYValue(i.event,"X"),s=n.getXYValue(i.event,"Y"),e.style.display="none",n.dotNetRef.invokeMethodAsync("TriggerDragStartEvent",n.updateObjectValues(u),o,s))},dragStop:function(i){var r,e,f,o,u,s,h;sf.base.removeClass([n.element],"e-dragging");n.removeVirtualEle();r=i.target;n.dropRoot=sf.base.closest(r,".e-droppable");n.isHelperElement=!0;r&&n.dropRoot||(sf.base.remove(i.helper),document.body.style.cursor="",n.isHelperElement=!1);f=sf.base.closest(r,t);f&&(e=parseInt(f.getAttribute("aria-level"),10));o=r;u=n.getDragEvent(i.event,n,r,o,null,i.helper,e);n.dragStopEventArgs=i;u.preventTargetExpand=!1;s=n.getXYValue(i.event,"X");h=n.getXYValue(i.event,"Y");sf.base.isNullOrUndefined(u.dropIndicator)&&(u.dropIndicator=w,document.body.style.cursor="not-allowed");n.dotNetRef.invokeMethodAsync("TriggerDragStopEvent",n.updateObjectValues(u),s,h)}});this.dropObj=new sf.base.Droppable(this.element,{out:function(n){sf.base.isNullOrUndefined(n)||n.target.classList.contains(v)||(document.body.style.cursor="not-allowed")},over:function(){document.body.style.cursor=""}})},k.prototype.updateObjectValues=function(n){return n.clonedNode=null,n.draggedNode=null,n.draggedParentNode=null,n.dropTarget=null,n.droppedNode=null,n.target=null,n},k.prototype.dragNodeStop=function(n){this.dragParent=n.draggedParentNode;this.preventExpand=n.preventTargetExpand;(n.cancel||n.dropIndicator==w)&&(this.dragStopEventArgs.helper.parentNode&&sf.base.remove(this.dragStopEventArgs.helper),document.body.style.cursor="",this.isHelperElement=!1);this.dragStartAction=!1;this.isHelperElement&&this.dropAction(this.dragStopEventArgs,!0)},k.prototype.dragStartActionContinue=function(n){n?(this.dragObj.intDestroy(this.dragStartEventArgs.event),this.dragCancelAction(this.virtualEle)):(this.virtualEle.style.display=c,this.dragStartAction=!0,this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement)))},k.prototype.getId=function(t){return sf.base.isNullOrUndefined(t)?null:"string"==typeof t?t:"object"===n(t)?sf.base.getElement(t).getAttribute("data-uid"):null},k.prototype.getOffsetValue=function(n,t){var i,u=n.target.classList,r;return"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(u)?i="Y"===t?n.event.offsetY:n.event.offsetX:(r=n.target.getBoundingClientRect(),i=Math.ceil("Y"===t?n.event.clientY-r.top:n.event.clientX-r.left)),i},k.prototype.dropAction=function(n,i){var e,a,c=this.getOffsetValue(n,"Y"),s=n.target,v=!1,o,f;if((e=i?n.element.blazor__instance:n.dragData.draggable.blazor__instance)&&e.dragTarget){var y=e.dragTarget,l=sf.base.closest(y,"."+t),r=sf.base.closest(s,"."+t);if(null==r&&s.classList.contains(u)&&(r=s.firstElementChild),i?sf.base.remove(n.helper):sf.base.remove(n.droppedElement),document.body.style.cursor="",!r||r.isSameNode(l)||this.isDescendant(l,r))return;if(e.allowMultiSelection&&l.classList.contains(h))if(o=sf.base.selectAll("."+h,e.element),n.target.offsetHeight<=33&&c>n.target.offsetHeight-10&&c>6)for(f=o.length-1;f>=0;f--)r.isSameNode(o[f])||this.isDescendant(o[f],r)||this.appendNode(s,o[f],r,n,e,c);else for(f=0;f<o.length;f++)r.isSameNode(o[f])||this.isDescendant(o[f],r)||this.appendNode(s,o[f],r,n,e,c);else this.appendNode(s,l,r,n,e,c);a=parseInt(l.getAttribute("aria-level"),10);v=!0}var p=i?n.element:n.dragData.draggedElement,w=this.getDragEvent(n.event,e,s,n.target,p,null,a,v),b=this.getXYValue(n.event,"X"),k=this.getXYValue(n.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDropped",this.updateObjectValues(w),b,k)},k.prototype.isDoubleTapped=function(n){var r,i=n.originalEvent.target;return i&&n.tapCount&&(1===n.tapCount?this.firstTap=sf.base.closest(i,"."+t):2===n.tapCount&&(r=sf.base.closest(i,"."+t))),this.firstTap===r},k.prototype.isDescendant=function(n,t){for(var i=t.parentNode;!sf.base.isNullOrUndefined(i);){if(i===n)return!0;i=i.parentNode}return!1},k.prototype.appendNode=function(n,t,i,o,s,h){var y=sf.base.closest(n,"."+a),c=sf.base.closest(o.target,"."+e),l=sf.base.closest(o.target,"."+r),v=this.getOffsetValue(o,"X");t.classList.contains(f)||y||!(l&&h<5||c&&v<3||l&&h>19||c&&v>19||!l&&!c)?this.dropAsChildNode(t,i,s,null,o,h,!0):"LI"===n.nodeName?this.dropAsSiblingNode(t,i,o,s):n.firstElementChild&&n.classList.contains(u)?"UL"===n.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,o,s):n.classList.contains(e)||n.classList.contains(r)?this.dropAsSiblingNode(t,i,o,s):this.dropAsChildNode(t,i,s,null,o,h)},k.prototype.dropAsSiblingNode=function(n,u,f,o){var s,p=sf.base.closest(u,"."+i),w=sf.base.closest(n,"."+i),c=sf.base.closest(w,"."+t),l=sf.base.closest(p,"."+t),a=null,v=null,y=this.getOffsetValue(f,"X"),h=this.getOffsetValue(f,"Y");f.target.offsetHeight>0&&h>f.target.offsetHeight-2?s=!1:h<2?s=!0:(f.target.classList.contains(r)||f.target.classList.contains(e))&&(h<5||y<3?s=!0:(h>15||y>17)&&(s=!1));l&&(a=l.getAttribute("data-uid"));c&&(v=c.getAttribute("data-uid"));var b=this.isExternalDrop(n),k=this.dropRoot?this.dropRoot.blazor__instance:null,d=b?k:this,g=this.getDropArgs(n,u,v,o,a,s);d.dotNetRef.invokeMethodAsync("DropNodeAsSibling",g);this.updateAriaLevel(n)},k.prototype.updateAriaLevel=function(n){var t=this.parents(n,"."+i).length;n.setAttribute("aria-level",""+t);this.updateChildAriaLevel(sf.base.select("."+i,n),t+1)},k.prototype.updateChildAriaLevel=function(n,t){var u;if(!sf.base.isNullOrUndefined(n))for(var f=n.querySelectorAll("li"),r=0,e=f.length;r<e;r++)u=f[r],u.setAttribute("aria-level",""+t),this.updateChildAriaLevel(sf.base.select("."+i,u),t+1)},k.prototype.dropAsChildNode=function(n,r,f,e,o,s,h){var b=sf.base.closest(n,"."+i),p=sf.base.closest(b,"."+t),k=sf.base.closest(r,"."+i),w=sf.base.closest(k,"."+t),a=null,l=null;w&&(a=w.getAttribute("data-uid"));p&&(l=p.getAttribute("data-uid"));var c,d=this.isExternalDrop(n),v=sf.base.closest(n,"."+u)?sf.base.closest(n,"."+u).blazor__instance:this.element?this.element.blazor__instance:null,g=this.dropRoot?this.dropRoot.blazor__instance:null,y=d?g:this;o&&s<7&&!h?(c=this.getDropArgs(n,r,l,v,a,!0),y.dotNetRef.invokeMethodAsync("DropNodeAsSibling",c)):o&&o.target.offsetHeight>0&&s>o.target.offsetHeight-10&&!h?(c=this.getDropArgs(n,r,l,v,a,!1),y.dotNetRef.invokeMethodAsync("DropNodeAsSibling",c)):(c=this.getDropArgs(n,r,l,v),y.dotNetRef.invokeMethodAsync("DropNodeAsChild",c));this.updateAriaLevel(n)},k.prototype.isExternalDrop=function(n){var t=!1,i=sf.base.closest(n,"."+u)?sf.base.closest(n,"."+u):this.element,r=this.dropRoot;return null==i||null==r||i.isSameNode(r)||(t=!0),t},k.prototype.getDropArgs=function(n,t,i,r,u,f){return{dragLi:n.getAttribute("data-uid"),dropLi:t.getAttribute("data-uid"),dragParentLi:i,dropParentLi:u,pre:f,srcTree:r.dotNetRef,isExternalDrag:this.isExternalDrop(n)}},k.prototype.dragCancelAction=function(n){sf.base.detach(n);sf.base.removeClass([this.element],"e-dragging");this.dragStartAction=!1},k.prototype.removeVirtualEle=function(){var n=sf.base.select("."+v);n&&sf.base.detach(n)},k.prototype.dragAction=function(n,i){var rt=sf.base.closest(n.target,".e-droppable"),nt=sf.base.closest(n.target,"."+l),f=sf.base.select("div."+o,i),ut=this.getOffsetValue(n,"X"),c=this.getOffsetValue(n,"Y"),tt,d,g,et,it,h,ot,st;if(sf.base.removeClass([f],[b,y,"e-drop-out",w]),this.removeVirtualEle(),document.body.style.cursor="",tt=n.target.classList,this.options.fullRowSelect&&!nt&&!sf.base.isNullOrUndefined(tt)&&tt.contains("e-fullrow")&&(nt=n.target.nextElementSibling),rt){var s=sf.base.closest(n.target,"."+t),ft=sf.base.closest(n.target,"."+a),p=sf.base.closest(n.target,"."+e),k=sf.base.closest(n.target,"."+r);rt.classList.contains(u)&&(!nt||s.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,s))?"LI"!==n.target.nodeName||s.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,s)?n.target.classList.contains(v)?sf.base.addClass([f],y):n.target.classList.contains("e-droppable")?sf.base.addClass([f],b):sf.base.addClass([f],"e-drop-out"):(sf.base.addClass([f],y),this.renderVirtualEle(n)):s&&n&&!k&&!p&&c<7&&!ft||k&&c<5||p&&ut<3?(sf.base.addClass([f],y),d=sf.base.createElement("div",{className:v}),g=this.options.fullRowSelect?1:0,s.insertBefore(d,s.children[g])):s&&n&&!k&&!p&&n.target.offsetHeight>0&&c>n.target.offsetHeight-10&&!ft||k&&c>19||p&&ut>19?(sf.base.addClass([f],y),d=sf.base.createElement("div",{className:v}),g=this.options.fullRowSelect?2:1,s.insertBefore(d,s.children[g])):sf.base.addClass([f],b)}else sf.base.addClass([f],w),document.body.style.cursor="not-allowed";it=sf.base.closest(n.target,t);it&&(et=parseInt(it.getAttribute("aria-level"),10));h=this.getDragEvent(n.event,this,n.target,n.target,null,i,et);h.dropIndicator&&sf.base.removeClass([f],h.dropIndicator);this.iconElement=f;this.draggingEventArgs=h;ot=this.getXYValue(n.event,"X");st=this.getXYValue(n.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",this.updateObjectValues(h),ot,st)},k.prototype.nodeDragging=function(){this.draggingEventArgs.dropIndicator&&sf.base.addClass([this.iconElement],this.draggingEventArgs.dropIndicator)},k.prototype.renderVirtualEle=function(n){var t,i=this.getOffsetValue(n,"Y"),r,u;i>n.target.offsetHeight-2?t=!1:i<2&&(t=!0);r=sf.base.createElement("div",{className:v});u=this.options.fullRowSelect?t?1:2:t?0:1;n.target.insertBefore(r,n.target.children[u])},k.prototype.parents=function(n,t){for(var r=[],i=n.parentNode;!sf.base.isNullOrUndefined(i);)sf.base.matches(i,t)&&r.push(i),i=i.parentNode;return r},k.prototype.getDragEvent=function(n,i,r,f,e,s,h,c){var a=r?sf.base.closest(r,"."+t):null,ot=a?this.getNodeData(a):null,d=i?i.dragLi:e,st=i?i.dragData:null,tt=r?this.parents(r,"."+t):null,ut=i.dragLi.parentElement,p=i.dragLi?sf.base.closest(ut,"."+t):null,k=null,v=null,ft=[y,b,"e-drop-out",w],et=null,it=c?d:a,g=it?sf.base.closest(it,".e-list-parent"):null,l=0,nt,rt;if(p=i.dragLi&&null===p?sf.base.closest(ut,"."+u):p,p=c?this.dragParent:p,s)for(;l<4;){if(sf.base.select("."+o,s).classList.contains(ft[l])){et=ft[l];break}l++}if(g){for(nt=0,l=0;l<g.childElementCount;l++){if(nt=c||g.children[l]!==d||a===d?nt:++nt,!c&&g.children[l].classList.contains("e-hover")){v=n.offsetY>=23?l+1:l;break}if(g.children[l]===it){n.offsetY;v=l;break}}v=0!==nt?--v:v}return(r&&(k=0===tt.length?null:r.classList.contains(t)?tt[0]:tt[1]),a===d&&(k=a),r&&f.offsetHeight<=33&&n.offsetY<f.offsetHeight-10&&n.offsetY>6&&(k=a,!c))&&(h=++h,rt=k?sf.base.select(".e-list-parent",k):null,v=rt?rt.children.length:0),{cancel:!1,clonedNode:s,event:n,draggedNode:d,draggedNodeData:st,droppedNode:a,droppedNodeData:ot,dropIndex:v,dropLevel:h,draggedParentNode:p,dropTarget:k,dropIndicator:et,target:f}},k.prototype.editingHandler=function(n){var r=n.target;!r||r.classList.contains(u)||r.classList.contains(i)||r.classList.contains(t)||r.classList.contains(o)||r.classList.contains("e-input")||r.classList.contains("e-input-group")||this.createTextbox(sf.base.closest(r,"."+t),n)},k.prototype.createTextbox=function(n){this.editEventArgs=this.getEditEvent(n,null,null);this.isEdited=!0;this.dotNetRef.invokeMethodAsync("TriggerNodeEditingEvent",this.editEventArgs)},k.prototype.getEditEvent=function(n,t,i){return{newText:t,nodeData:this.getNodeData(n),oldText:this.oldText,innerHtml:i}},k.prototype.focusIn=function(){this.mouseDownStatus||sf.base.addClass([this.getFocusedNode()],s);this.mouseDownStatus=!1},k.prototype.focusOut=function(){sf.base.removeClass([this.getFocusedNode()],s)},k.prototype.wireEvents=function(){if(!this.options.disabled){if(this.setExpandOnType(),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.element,"focus",this.focusIn,this),sf.base.EventHandler.add(this.element,"blur",this.focusOut,this),sf.base.EventHandler.add(this.element,"mouseout",this.onMouseLeave,this),this.options.showCheckBox){var n=sf.base.select(".e-frame",this.element);sf.base.isNullOrUndefined(n)||(sf.base.EventHandler.add(n,"mousedown",this.frameMouseHandler,this),sf.base.EventHandler.add(n,"mouseup",this.frameMouseHandler,this))}this.wireClickEvent(!0);"None"!==this.options.expandOnType&&this.wireExpandOnEvent(!0);this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyboardActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}},k.prototype.frameMouseHandler=function(n){var t=sf.base.select(".e-ripple-container",n.target.parentElement);this.rippleMouseHandler(n,t)},k.prototype.rippleMouseHandler=function(n,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(n.type,!1,!0);t.dispatchEvent(i)}},k.prototype.setExpandOnType=function(){var n=this.options.expandOnType;this.options.expandOnType="DoubleClick"===n?sf.base.Browser.isDevice?"Click":"DoubleClick":n},k.prototype.expandHandler=function(n){var r=n.originalEvent.target;!r||r.classList.contains("e-input")||r.classList.contains(u)||r.classList.contains(i)||r.classList.contains(t)||r.classList.contains(o)||this.options.showCheckBox&&sf.base.closest(r,"."+a)||this.expandCollapseAction(sf.base.closest(r,"."+t),n)},k.prototype.expandCollapseAction=function(n,t){var i=sf.base.select("div."+o,n),u;i&&!i.classList.contains("e-process")&&(u=i.classList,u.contains(r)?this.expandAction(n,t):u.contains(e)&&this.collapseAction(n,t,!1))},k.prototype.animateHeight=function(n,t,i){var r=(i-t)*((n.duration-n.timeStamp)/n.duration)+t;n.element.parentElement.style.height=r+"px"},k.prototype.expandAction=function(n,t){if(this.expandArgs=this.getExpandEvent(n,t),this.options.allowTextWrap){var r=sf.base.select("."+i,n);this.isNodeRendered=!!r}n&&n.classList.contains("e-process")&&sf.base.removeClass([n],"e-process");this.dotNetRef.invokeMethodAsync("TriggerNodeExpandingEvent",this.expandArgs)},k.prototype.collapseAction=function(n,u,f){var y;this.expandArgs=this.getExpandEvent(n,u);var p=0,w=0,s=this,a=sf.base.select("."+i,n),v=n,c=sf.base.select("."+t+"."+h,n);a&&(y=sf.base.select("div."+o,v),sf.base.removeClass([y],e),sf.base.addClass([y],r));sf.base.isNullOrUndefined(n.getAttribute("aria-expanded"))||n.setAttribute("aria-expanded","false");0===this.options.animation.collapse.duration?(a.style.display="none",s.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",s.expandArgs),f&&s.triggerClickEvent(u.originalEvent,n)):this.animationObj.animate(a,{name:this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing,begin:function(){v.style.overflow="hidden";!sf.base.isNullOrUndefined(c)&&_instanceof(c,HTMLElement)&&c.classList.add("e-animation-active");p=sf.base.select("."+l,n).offsetHeight;w=v.offsetHeight},progress:function(n){s.animateHeight(n,p,w)},end:function(t){t.element.style.display="none";!sf.base.isNullOrUndefined(c)&&_instanceof(c,HTMLElement)&&c.classList.remove("e-animation-active");s.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",s.expandArgs);f&&s.triggerClickEvent(u.originalEvent,n)}})},k.prototype.wireExpandOnEvent=function(n){var t=this,i;n?(i=this,this.touchExpandObj=new sf.base.Touch(this.element,{tap:function(n){("Click"===t.options.expandOnType||"DoubleClick"===t.options.expandOnType&&t.isDoubleTapped(n)&&2===n.tapCount)&&3!==n.originalEvent.which&&i.expandHandler(n)}})):this.touchExpandObj&&this.touchExpandObj.destroy()},k.prototype.getNodeData=function(n){if(!sf.base.isNullOrUndefined(n)&&n.classList.contains(t)&&!sf.base.isNullOrUndefined(sf.base.closest(n,".e-control"))&&sf.base.closest(n,".e-control").classList.contains(u)){var f=n.getAttribute("data-uid"),i=sf.base.closest(n.parentNode,"."+t),e=i?i.getAttribute("data-uid"):null,o=n.classList.contains(h),s="true"===n.getAttribute("aria-expanded"),c=null===n.getAttribute("aria-expanded"),r=null;return this.options.showCheckBox&&(r=sf.base.select("."+a,n).getAttribute("aria-checked")),{id:f,text:null,parentID:e,selected:o,expanded:s,isChecked:r,hasChildren:c}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},k.prototype.getExpandEvent=function(n,t){var i=this.getNodeData(n);return{isInteracted:!sf.base.isNullOrUndefined(t),nodeData:i,event:t,isLoaded:null!=n.querySelector("ul"),nodeLevel:parseInt(n.getAttribute("aria-level"),10)}},k.prototype.updateSpinnerClass=function(){var n=this.element.querySelector(".e-icons-spinner");sf.base.removeClass([n],"e-icons-spinner")},k.prototype.expandedNode=function(n){var y=this,s=this.element.querySelector('[data-uid="'+n.nodeData.id+'"]'),u,a;if(this.focussedElement=s,u=sf.base.select("."+i,s),u){u.classList.remove("e-display-none");a=sf.base.select("div."+o,s);this.expandArgs=this.getExpandEvent(s,n.event);var f=s,v=sf.base.select("."+t+"."+h,s),w=0,b=0,p=this;this.setHeight(f,u);0===this.options.animation.expand.duration?(sf.base.removeClass([a],r),sf.base.addClass([a],e),p.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",p.expandArgs),u.style.display=c,f.style.display=c,f.style.overflow="",f.style.height="",sf.base.removeClass([a],"e-icons-spinner"),!this.options.allowTextWrap||this.isNodeRendered&&!this.isEdited||(this.isEdited=!1,this.updateWrap(u))):this.animationObj.animate(u,{name:this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing,begin:function(){f.style.overflow="hidden";!sf.base.isNullOrUndefined(v)&&_instanceof(v,HTMLElement)&&v.classList.add("e-animation-active");w=f.offsetHeight;b=sf.base.select("."+l,s).offsetHeight},progress:function(n){sf.base.removeClass([a],r);sf.base.addClass([a],e);n.element.style.display=c;p.animateHeight(n,w,b)},end:function(n){n.element.style.display=c;!sf.base.isNullOrUndefined(v)&&_instanceof(v,HTMLElement)&&v.classList.remove("e-animation-active");p.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",p.expandArgs);u.style.display=c;f.style.display=c;f.style.overflow="";f.style.height="";sf.base.removeClass([a],"e-icons-spinner");!y.options.allowTextWrap||y.isNodeRendered&&!y.isEdited||(y.isEdited=!1,y.updateWrap(u))}})}this.setHover(this.getFocusedNode())},k.prototype.setHeight=function(n,t){t.style.display=c;t.style.visibility="hidden";n.style.height=n.offsetHeight+"px";t.style.display="none";t.style.visibility=""},k.prototype.collapsedNode=function(n){var t=this.element.querySelector('[data-uid="'+n.nodeData.id+'"]'),i,u;this.focussedElement=t;i=t.querySelector("ul");i&&(i.style.display="none",i.classList.add("e-display-none"));t.style.overflow="";t.style.height="";this.expandArgs=this.getExpandEvent(t,null);u=sf.base.select("div."+o,t);sf.base.removeClass([u],e);sf.base.addClass([u],r);this.dotNetRef.invokeMethodAsync("TriggerNodeCollapsedEvent",this.expandArgs)},k.prototype.preventContextMenu=function(n){n.preventDefault()},k.prototype.clickHandler=function(n){var c=n.originalEvent.target,v=!1,s,u,y,h,l,p;if((sf.base.EventHandler.remove(this.element,"contextmenu",this.preventContextMenu),c)&&(s=c.classList,u=sf.base.closest(c,"."+t),u)){if(3!==n.originalEvent.which){if(y=sf.base.select(".e-ripple-element",u),h=sf.base.select("."+o,u),(this.removeHover(),this.focussedElement=u,this.setFocusElement(u),this.options.showCheckBox&&!u.classList.contains(f))&&(l=sf.base.closest(c,"."+a),!sf.base.isNullOrUndefined(l)))return p=sf.base.select(".e-frame",l),this.validateCheckNode(l,p.classList.contains("e-check"),u,n.originalEvent),void this.triggerClickEvent(n.originalEvent,u);s.contains(r)?this.expandAction(u,n):s.contains(e)?(this.collapseAction(u,n,!0),v=!0):y&&h?h.classList.contains("e-ripple")&&h.classList.contains(r)?this.expandAction(u,n):h.classList.contains("e-ripple")&&h.classList.contains(e)?(this.collapseAction(u,n,!0),v=!0):s.contains(i)||s.contains(t)||this.toggleSelect(u,n.originalEvent,!1):s.contains(i)||s.contains(t)||this.toggleSelect(u,n.originalEvent,!1)}v||this.triggerClickEvent(n.originalEvent,u)}},k.prototype.getXYValue=function(n,t){var u,i=n.changedTouches,r;return(u="X"===t?i?i[0].clientX:n.clientX:i?i[0].clientY:n.clientY)||"focus"!==n.type||!n.target||(r=n.target.getBoundingClientRect(),u=r?"X"===t?r.left:r.top:null),Math.ceil(u)},k.prototype.triggerClickEvent=function(n,t){var i={event:n,node:null};this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",i,t.getAttribute("data-uid"),this.getXYValue(n,"X"),this.getXYValue(n,"Y"))},k.prototype.getCheckEvent=function(n,t,i){return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:this.getNodeData(n)}},k.prototype.validateCheckNode=function(n,i,r,u){var o=sf.base.closest(n,"."+t),f=i?"false":"true",e;sf.base.isNullOrUndefined(f)||n.setAttribute("aria-checked",f);e=this.getCheckEvent(o,i?"uncheck":"check",u);this.dotNetRef.invokeMethodAsync("TriggerNodeCheckingEvent",e)},k.prototype.toggleSelect=function(n,t,i){n.classList.contains(f)||(this.options.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(n)?this.unselectNode(n,t,i):(this.selectNode(n,t,i),this.options.allowMultiSelection&&t&&(t.ctrlKey||t.shiftKey)&&(this.setFocusElement(n),this.focussedElement=n)))},k.prototype.unselectNode=function(n,t,i){var r=this.getSelectEvent(n,"un-select",t,i,[]);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",r)},k.prototype.getSelectEvent=function(n,t,i,r,u){var f=this.getNodeData(n);return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:f,isMultiSelect:r,isCtrKey:!(sf.base.isNullOrUndefined(i)||!i.ctrlKey),isShiftKey:!(sf.base.isNullOrUndefined(i)||!i.shiftKey),nodes:u}},k.prototype.selectNode=function(n,i,r){var h,l,o,s,a;if(sf.base.isNullOrUndefined(n)||!this.options.allowMultiSelection&&this.isActive(n)&&!sf.base.isNullOrUndefined(i))return this.setFocusElement(n),void(this.focussedElement=n);if(h=[],this.options.allowMultiSelection&&i&&i.shiftKey){this.startNode||(this.startNode=n);var c=Array.prototype.slice.call(sf.base.selectAll("."+t,this.element)),u=c.indexOf(this.startNode),e=c.indexOf(n);for(u>e&&(l=u,u=e,e=l),o=u;o<=e;o++)s=c[o],sf.base.isVisible(s)&&!s.classList.contains(f)&&h.push(s.getAttribute("data-uid"))}else this.startNode=n;a=this.getSelectEvent(n,"select",i,r,h);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",a)},k.prototype.setFocusElement=function(n){if(!sf.base.isNullOrUndefined(n)){var t=this.getFocusedNode();t&&sf.base.removeClass([t],p);sf.base.addClass([n],p);this.focussedElement=n;this.updateIdAttr(t,n)}},k.prototype.updateIdAttr=function(n,t){this.element.removeAttribute("aria-activedescendant");n&&n.removeAttribute("id");t.setAttribute("id",this.element.id+"_active");this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},k.prototype.getFocusedNode=function(){var n,i=this.focussedElement?this.focussedElement:sf.base.select("."+t+"."+p,this.element);return sf.base.isNullOrUndefined(i)&&(n=sf.base.select("."+t,this.element)),sf.base.isNullOrUndefined(i)?sf.base.isNullOrUndefined(n)?this.element.firstElementChild:n:i},k.prototype.setFullRow=function(n){(n?sf.base.addClass:sf.base.removeClass)([this.element],"e-fullrow-wrap");this.options.fullRowSelect=n},k.prototype.isActive=function(n){return n.classList.contains(h)},k.prototype.wireClickEvent=function(n){if(n){var t=this;this.touchClickObj=new sf.base.Touch(this.element,{tap:function(n){t.clickHandler(n)}})}else this.touchClickObj&&this.touchClickObj.destroy()},k.prototype.onMouseOver=function(n){var u=n.target,e=u.classList,r=sf.base.closest(u,"."+t);!r||e.contains(i)||e.contains(t)?this.removeHover():r&&!r.classList.contains(f)&&this.setHover(r)},k.prototype.setHover=function(n){n.classList.contains(s)||(this.removeHover(),sf.base.addClass([n],s))},k.prototype.removeHover=function(){var n=sf.base.selectAll("."+s,this.element);n&&n.length&&sf.base.removeClass(n,s)},k.prototype.checkNode=function(n){var t=this.getFocusedNode(),i=sf.base.select("."+a,t),r=sf.base.select(" .e-frame",i).classList.contains("e-check");t.classList.contains(f)||0===t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,r,t,n)},k.prototype.openNode=function(n,u){var s=this.getFocusedNode(),h=sf.base.select("div."+o,s),c;if(n){if(!h)return;h.classList.contains(r)?this.expandAction(s,u):this.focusNextNode(s,!0)}else if(h&&h.classList.contains(e))this.collapseAction(s,u,!1);else{if(c=sf.base.closest(sf.base.closest(s,"."+i),"."+t),!c)return;c.classList.contains(f)||(this.setNodeFocus(s,c),this.navigateToFocus(!0))}},k.prototype.getScrollParent=function(n){return sf.base.isNullOrUndefined(n)?null:n.scrollHeight>n.clientHeight?n:this.getScrollParent(n.parentElement)},k.prototype.navigateToFocus=function(n){var u=this.getFocusedNode().querySelector("."+l),i=u.getBoundingClientRect(),r=this.getScrollParent(this.element),t;sf.base.isNullOrUndefined(r)||(t=r.getBoundingClientRect(),i.bottom>t.bottom?r.scrollTop+=i.bottom-t.bottom:i.top<t.top&&(r.scrollTop-=t.top-i.top));this.isVisibleInViewport(u)||u.scrollIntoView(n)},k.prototype.isVisibleInViewport=function(n){var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},k.prototype.setNodeFocus=function(n,t){sf.base.removeClass([n],[s,p]);t.classList.contains(f)||(this.focussedElement=t,sf.base.addClass([t],[s,p]),this.updateIdAttr(n,t))},k.prototype.focusNextNode=function(n,t){var i=t?this.getNextNode(n):this.getPrevNode(n),r;(this.setNodeFocus(n,i),this.navigateToFocus(!t),i.classList.contains(f))&&(r=i.lastChild,null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&r.classList.contains(l)?this.focusNextNode(i,!1):this.focusNextNode(i,t))},k.prototype.shiftKeySelect=function(n,t){if(this.options.allowMultiSelection){var r=this.getFocusedNode(),i=n?this.getNextNode(r):this.getPrevNode(r);this.removeHover();this.setFocusElement(i);this.focussedElement=i;this.toggleSelect(i,t,!1);this.navigateToFocus(!n)}else this.navigateNode(n)},k.prototype.updateList=function(){this.liList=Array.prototype.slice.call(sf.base.selectAll("."+t,this.element))},k.prototype.getNextNode=function(n){var t,i=this.liList.indexOf(n);do if(i++,t=this.liList[i],sf.base.isNullOrUndefined(t))return n;while(!sf.base.isVisible(t));return t},k.prototype.getPrevNode=function(n){var t,i=this.liList.indexOf(n);do if(i--,t=this.liList[i],sf.base.isNullOrUndefined(t))return n;while(!sf.base.isVisible(t));return t},k.prototype.getRootNode=function(){var n,t=0;do n=this.liList[t],t++;while(!sf.base.isVisible(n));return n},k.prototype.getEndNode=function(){var n,t=this.liList.length-1;do n=this.liList[t],t--;while(!sf.base.isVisible(n));return n},k.prototype.navigateNode=function(n){this.focusNextNode(this.getFocusedNode(),n)},k.prototype.updateOldText=function(n){this.oldText=n},k.prototype.onPropertyChanged=function(n){for(var t=0,i=Object.keys(n);t<i.length;t++)switch(i[t]){case"showCheckBox":this.options.showCheckBox=n.showCheckBox;break;case"allowDragAndDrop":this.setDragAndDrop(n.allowDragAndDrop);break;case"allowTextWrap":this.options.allowTextWrap=n.allowTextWrap;this.setTextWrap();break;case"allowEditing":this.wireEditingEvents(n.allowEditing);break;case"disabled":this.options.disabled=n.disabled;this.checkAllDisabled(n.disabled);break;case"dragArea":this.setDragArea(n.dropArea);break;case"cssClass":this.setCssClass(n.cssClass);break;case"fullRowSelect":this.setFullRow(n.fullRowSelect);break;case"expandOnType":this.options.expandOnType=n.expandOnType;break;case"enableRtl":this.options.enableRtl=n.enableRtl;this.setEnableRtl();break;case"animation":this.options.animation=n.animation}},k.prototype.navigateRootNode=function(n){var i=this.getFocusedNode(),t=n?this.getRootNode():this.getEndNode();t.classList.contains(f)||(this.setNodeFocus(i,t),this.navigateToFocus(n))},k.prototype.selectGivenNodes=function(n){for(var t=0;t<n.length;t++)n[t].classList.contains(f)||this.selectNode(n[t],null,!0)},k.prototype.beginEdit=function(n){var t=this.element.querySelector('[data-uid="'+n+'"]');sf.base.isNullOrUndefined(t)||this.options.disabled||this.createTextbox(t,null)},k.prototype.ensureVisible=function(n){var i=this.element.querySelector('[data-uid="'+n+'"]');if(!sf.base.isNullOrUndefined(i)){for(var u=this.parents(i,"."+t),f=[],r=0;r<u.length;r++)f.push(u[r].getAttribute("data-uid"));this.dotNetRef.invokeMethodAsync("UpdateExpandedNode",f);setTimeout(function(){i.scrollIntoView(!0)},450)}},k.prototype.nodeCollapse=function(n){var t=this.element.querySelector('[data-uid="'+n+'"]');this.collapseAction(t,null,!1)},k.prototype.nodeExpand=function(n){var t=this.element.querySelector('[data-uid="'+n+'"]');this.expandAction(t,null)},k.prototype.KeyActionHandler=function(n,i){var e,u,o,r;this.updateList();e=this.element.querySelector('[data-uid="'+i+'"]');u=sf.base.isNullOrUndefined(e)?this.getFocusedNode():e;switch(n.action){case"space":this.options.showCheckBox&&this.checkNode(this.keyAction);break;case"moveRight":this.keyBoardAction=!0;this.openNode(!this.options.enableRtl,this.keyAction);break;case"moveLeft":this.keyBoardAction=!0;this.openNode(this.options.enableRtl,this.keyAction);break;case"shiftDown":this.shiftKeySelect(!0,this.keyAction);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,this.keyAction);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(u,this.keyAction,!1);break;case"f2":this.options.allowEditing&&!u.classList.contains(f)&&this.createTextbox(u,this.keyAction);break;case"ctrlA":this.options.allowMultiSelection&&(o=sf.base.selectAll("."+t+":not(."+h+")",this.element),this.selectGivenNodes(o))}r=this;setTimeout(function(){r.keyBoardAction&&(r.setHover(r.getFocusedNode()),r.keyBoardAction=!1)},100)},k}();return{initialize:function(n,t,i){var r=new k(n,t,i);r.render();this.valid(n)&&n.blazor__instance.options.allowTextWrap&&n.blazor__instance.updateWrap();document.getElementById(n.id)&&r.dotNetRef.invokeMethodAsync("CreatedEvent",null)},updateTextWrap:function(n){this.valid(n)&&n.blazor__instance.options.allowTextWrap&&n.blazor__instance.updateWrap()},dataSourceChanged:function(n){n.blazor__instance.unWireEvents();n.blazor__instance.wireEvents()},collapseAction:function(n,t){if(this.valid(n)){var i=n.querySelector('[data-uid="'+t+'"]');n.blazor__instance.collapseAction(i,null,!1)}},expandAction:function(n,t){if(this.valid(n)){var i=n.querySelector('[data-uid="'+t+'"]');n.blazor__instance.expandAction(i,null)}},expandedNode:function(n,t){this.valid(n)&&n.blazor__instance.expandedNode(t)},collapsedNode:function(n,t){this.valid(n)&&n.blazor__instance.collapsedNode(t)},KeyActionHandler:function(n,t,i){this.valid(n)&&n.blazor__instance.KeyActionHandler(t,i)},setMultiSelect:function(n,t){this.valid(n)&&n.blazor__instance.setMultiSelect(t)},dragStartActionContinue:function(n,t){this.valid(n)&&n.blazor__instance.dragStartActionContinue(t)},dragNodeStop:function(n,t){this.valid(n)&&n.blazor__instance.dragNodeStop(t)},nodeDragging:function(n,t){this.valid(n)&&n.blazor__instance.nodeDragging(t)},setFocus:function(n,t){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(t)){var i=document.getElementById(n.id);i.focus();i.setSelectionRange(0,i.value.length)}},updateOldText:function(n,t){this.valid(n)&&n.blazor__instance.updateOldText(t)},updateSpinnerClass:function(n){this.valid(n)&&n.blazor__instance.updateSpinnerClass()},onPropertyChanged:function(n,t){this.valid(n)&&n.blazor__instance.onPropertyChanged(t)},valid:function(n){return n&&n.blazor__instance},beginEdit:function(n,t){this.valid(n)&&n.blazor__instance.beginEdit(t)},ensureVisible:function(n,t){this.valid(n)&&n.blazor__instance.ensureVisible(t)},nodeCollapse:function(n,t){this.valid(n)&&n.blazor__instance.nodeCollapse(t)},nodeExpand:function(n,t){this.valid(n)&&n.blazor__instance.nodeExpand(t)}}}()},"./modules/sf-uploader.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.Uploader=function(){"use strict";function y(n,t){var e,r,i,f,o;n.target&&(r=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,i=function(n,t){var i=t("div",{}),r=t("div",{});return i.classList.add("e-spinner-pane"),r.classList.add("e-spinner-inner"),n.appendChild(i),i.appendChild(r),{wrap:i,inner_wrap:r}}(n.target,r),(sf.base.isNullOrUndefined(n.cssClass)||i.wrap.classList.add(n.cssClass),sf.base.isNullOrUndefined(n.template)&&sf.base.isNullOrUndefined(null))?(f=sf.base.isNullOrUndefined(n.type)?function(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")}(i.wrap):n.type,e=function(n,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return n=n?parseFloat(n+""):i,"Bootstrap"===t?n:n/2}(sf.base.isNullOrUndefined(n.width)?void 0:n.width,f),function(n,t,i,r){var f=t.querySelector(".e-spinner-inner"),e=f.querySelector("svg");sf.base.isNullOrUndefined(e)||f.removeChild(e);switch(n){case"Material":!function(n,t,i){var r=l();u[r]={timeOut:0,type:"Material",radius:t};d(n,r,i,"e-spin-material");nt(t,n,"Material","e-spin-material")}(f,i,r);break;case"Fabric":!function(n,t,i){var r=l();u[r]={timeOut:0,type:"Fabric",radius:t};p(n,r,"e-spin-fabric",i);w(t,n,"e-spin-fabric")}(f,i,r);break;case"Bootstrap":!function(n,t){var i=l();u[i]={timeOut:0,type:"Bootstrap",radius:t},function(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),u,r;for(i.setAttribute("id",t),i.setAttribute("class","e-spin-bootstrap"),i.setAttribute("viewBox","0 0 64 64"),n.insertBefore(i,n.firstChild),u=0;u<=7;u++)r=document.createElementNS("http://www.w3.org/2000/svg","circle"),r.setAttribute("class","e-path-circle_"+u),r.setAttribute("r","2"),r.setAttribute("transform","translate(32,32)"),i.appendChild(r)}(n,i),function(n,t){var u=n.querySelector("svg.e-spin-bootstrap"),i,r,f,e;for(u.style.width=u.style.height=t+"px",i=90,r=0;r<=7;r++)f=b(0,0,24,i),e=u.querySelector(".e-path-circle_"+r),e.setAttribute("cx",f.x+""),e.setAttribute("cy",f.y+""),i=i>=360?0:i,i+=45}(n,t)}(f,i);break;case"HighContrast":!function(n,t,i){var r=l();u[r]={timeOut:0,type:"HighContrast",radius:t};p(n,r,"e-spin-high-contrast",i);w(t,n,"e-spin-high-contrast")}(f,i,r);break;case"Bootstrap4":!function(n,t,i){var r=l();u[r]={timeOut:0,type:"Bootstrap4",radius:t};d(n,r,i,"e-spin-bootstrap4");nt(t,n,"Bootstrap4","e-spin-bootstrap4")}(f,i,r);break;case"Tailwind":case"Tailwind-dark":!function(n,t,i){var r=l();u[r]={timeOut:0,type:"Tailwind",radius:t};p(n,r,"e-spin-tailwind",i);w(t,n,"e-spin-tailwind")}(f,i,r)}}(f,i.wrap,e,r),sf.base.isNullOrUndefined(n.label)||function(n,t,i){var r=i("div",{});r.classList.add("e-spin-label");r.innerHTML=t;n.appendChild(r)}(i.inner_wrap,n.label,r)):(o=sf.base.isNullOrUndefined(n.template)?null:n.template,i.wrap.classList.add("e-spin-template"),function(n,t,i){sf.base.isNullOrUndefined(i)||n.classList.add(i);n.querySelector(".e-spinner-inner").innerHTML=t}(i.wrap,o,null)),i.wrap.classList.add("e-spin-hide"),i=null)}function l(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function p(n,t,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),u,f;r.setAttribute("id",t);r.setAttribute("class",i);u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("class","e-path-circle");f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("class","e-path-arc");n.insertBefore(r,n.firstChild);r.appendChild(u);r.appendChild(f)}function d(n,t,i,r){var u=document.createElementNS("http://www.w3.org/2000/svg","svg"),f=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("class",r);u.setAttribute("id",t);f.setAttribute("class","e-path-circle");n.insertBefore(u,n.firstChild);u.appendChild(f)}function g(n){!function(n,t,i,r,f,e,o){var c=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),a=t-n,s=(h=2*o.globalInfo[o.uniqueID].radius+"",parseFloat(h)),v=tt(s),y=-90*(o.globalInfo[o.uniqueID].count||0),h;!function t(f){var o=Math.max(0,Math.min((new Date).getTime()-l,r));!function(n,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",it(s,v,n,e)+"");i.setAttribute("transform","rotate("+y+" "+s/2+" "+s/2+")")}}(i(o,n,a,r),f.container);c===f.globalInfo[f.uniqueID].previousId&&o<r?u[f.uniqueID].timeOut=setTimeout(t.bind(null,f),1):g(f)}(o)}(1,149,ft,1333,n.globalInfo[n.uniqueID].count,75,n);n.globalInfo[n.uniqueID].count=++n.globalInfo[n.uniqueID].count%4}function nt(n,t,i,r){var u=2*n,f=t.querySelector("svg."+r),e=f.querySelector("path.e-path-circle"),o=tt(u),s=u/2+"px";f.setAttribute("viewBox","0 0 "+u+" "+u);f.style.width=f.style.height=u+"px";f.style.transformOrigin=s+" "+s+" "+s;e.setAttribute("d",function(n,t){var i=n/2,r=t/2;return"M"+i+","+r+"A"+(i-r)+","+(i-r)+" 0 1 1 "+r+","+i}(u,o));"Material"===i&&(e.setAttribute("stroke-width",o+""),e.setAttribute("stroke-dasharray",(u-o)*Math.PI*.75+""),e.setAttribute("stroke-dashoffset",it(u,o,1,75)+""))}function tt(n){return.1*n}function it(n,t,i,r){return(n-t)*Math.PI*(3*r/100-i/100)}function ft(n,t,i,r){var u=(n/=r)*n,f=u*n;return t+i*(6*f*u+-15*u*u+10*f)}function w(n,t,i){var e=n,o=n,u=2*n,r=t.querySelector("."+i),s=r.querySelector(".e-path-circle"),h=r.querySelector(".e-path-arc"),f=u/2+"px";s.setAttribute("d",function(n,t,i){return["M",n,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(e,o,n));h.setAttribute("d",function(n,t,i,r,u){var f=b(n,t,i,u),e=b(n,t,i,r);return["M",f.x,f.y,"A",i,i,0,0,0,e.x,e.y].join(" ")}(e,o,n,315,45));r.setAttribute("viewBox","0 0 "+u+" "+u);r.style.transformOrigin=f+" "+f+" "+f;r.style.width=r.style.height=u+"px"}function b(n,t,i,r){var u=(r-90)*Math.PI/180;return{x:n+i*Math.cos(u),y:t+i*Math.sin(u)}}function k(n){rt(n,!1);n=null}function rt(n,t){var i,f,e,r;if(n&&(i=n.classList.contains("e-spinner-pane")?n:n.querySelector(".e-spinner-pane")),n&&i){if(f=i.querySelector(".e-spinner-inner"),t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show")){if(e=i.querySelector("svg"),sf.base.isNullOrUndefined(e))return;r=e.getAttribute("id");switch(u[r].isAnimate=!t,u[r].type){case"Material":t?clearTimeout(u[r].timeOut):function(n,t,i){var r={};u[t].timeOut=0;r[t]=function(n,t,i,r){return{radius:t,count:i,previousId:r}}(0,i,0,0);g({uniqueID:t,container:n,globalInfo:r,timeOutVar:0})}(f,r,u[r].radius);break;case"Bootstrap":t?clearTimeout(u[r].timeOut):function(n){function h(n,t,i,r,f){var e=0;!function t(i){u[f].isAnimate&&(++e,n.setAttribute("r",i+""),e>=r.length&&(e=0),u[f].timeOut=setTimeout(t.bind(null,r[e]),18))}(t)}for(var r,e,o,i,f,s=n.querySelector("svg.e-spin-bootstrap").getAttribute("id"),t=1;t<=8;t++)h(n.getElementsByClassName("e-path-circle_"+(8===t?0:t))[0],t,t,(r=void 0,e=void 0,o=void 0,i=void 0,f=void 0,r=[],o=t,i=!1,f=1,function u(n){r.push(n);(n!==o||1===f)&&(n<=e&&n>1&&!i?n=parseFloat((n-.2).toFixed(2)):1===n?(n=7,n=parseFloat((n+.2).toFixed(2)),i=!0):n<8&&i?8===(n=parseFloat((n+.2).toFixed(2)))&&(i=!1):n<=8&&!i&&(n=parseFloat((n-.2).toFixed(2))),++f,u(n))}(e=t),r),s)}(f)}}t?sf.base.classList(i,["e-spin-hide"],["e-spin-show"]):sf.base.classList(i,["e-spin-show"],["e-spin-hide"]);n=null}}function a(n){rt(n,!0);n=null}var u={},ut="e-upload-file-list",i="e-file-status",r="e-file-remove-btn",o="e-file-delete-btn",t="e-file-abort-btn",s="e-file-reload-btn",c="e-upload-progress-wrap",v="e-upload-progress-bar",h="e-upload-success",e="e-upload-fails",f="e-file-pause-btn",et=function(){function u(n,t,i){this.initialAttr={accept:null,multiple:!1,disabled:!1};this.uploadedFilesData=[];this.base64String=[];this.isForm=!1;this.allTypes=!1;this.pausedData=[];this.uploadMetaData=[];this.btnTabIndex="0";this.disableKeyboardNavigation=!1;this.count=-1;this.actionCompleteCount=0;this.flag=!0;this.selectedFiles=[];this.uploaderName="UploadFiles";this.fileStreams=[];this.newFileRef=0;this.isFirstFileOnSelection=!1;this.dragCounter=0;this.fileList=[];this.filesData=[];this.element=n;this.updateProperty(i);this.element.blazor__instance=this;this.dotNetRef=t}return u.prototype.initialize=function(){this.preRender();this.render()},u.prototype.updateProperty=function(n){sf.base.extend(this,this,n)},u.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},u.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var n=this.dropAreaWrapper.querySelector(".e-file-drop");n&&sf.base.remove(n)}},u.prototype.propertyChanges=function(n,t){this.updateProperty(n);this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl);for(var i=0,r=Object.keys(t);i<r.length;i++)switch(r[i]){case"AllowedExtensions":this.clearAll();break;case"EnableRtl":this.reRenderFileList();break;case"Buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse;this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear;this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload;this.renderButtonTemplates();break;case"DropArea":this.unBindDropEvents();this.updateDropArea();break;case"Files":this.renderPreLoadFiles();break;case"MinFileSize":case"MaxFileSize":case"AutoUpload":case"SequentialUpload":this.clearAll()}},u.prototype.preRender=function(){this.isBlazorTemplate=""!==this.template&&!sf.base.isNullOrUndefined(this.template);this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl);this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1);this.isBlazorSaveUrl||this.formRendered();this.keyConfigs={enter:"enter"};this.browserName=sf.base.Browser.info.name;this.uploaderName=this.element.getAttribute("name")},u.prototype.formRendered=function(){var n=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(n))for(;n&&n!==document.documentElement;n=n.parentElement)"FORM"===n.tagName&&(this.isForm=!0,this.formElement=n,n.setAttribute("enctype","multipart/form-data"),n.setAttribute("encoding","multipart/form-data"))},u.prototype.render=function(){this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap");this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper");this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn");this.setDropArea();this.renderPreLoadFiles();this.wireEvents()},u.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this);sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this);sf.base.EventHandler.add(document,"click",this.removeFocus,this);this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"});this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},u.prototype.renderPreLoadFiles=function(){var t,r,i,u,n,f;if(this.files&&this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;for(t=[].slice.call(this.files),r=[],this.multiple||(this.clearData(),t=[t[0]]),i=0,u=t;i<u.length;i++)n=u[i],f={name:n.name+"."+n.type.split(".")[n.type.split(".").length-1],rawFile:"",size:n.size,status:this.localizedTexts("uploadSuccessMessage"),type:n.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"},r.push(f),this.filesData.push(f);if(this.isBlazorTemplate)return;this.createFileList(r);this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons();this.checkActionButtonStatus();this.sequentialUpload&&(this.count=this.filesData.length-1)}},u.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1");this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=sf.base.createElement("div",{className:"e-upload-actions"}),this.uploadButton=sf.base.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=sf.base.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},u.prototype.setDropArea=function(){var i=this.dropAreaWrapper.querySelector(".e-file-drop"),n,t;if(this.dropArea){for(this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea),n=this.element,t=!1;n.parentNode;)(n=n.parentNode)===this.dropZoneElement&&(t=!0);!t&&i&&sf.base.remove(i)}else sf.base.isNullOrUndefined(this.dropArea)&&(this.dropZoneElement=this.uploadWrapper);this.bindDropEvents()},u.prototype.serverActionButtonsEventBind=function(n){n&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=n,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},u.prototype.serverUlElement=function(n){n&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=n,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},u.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this);sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},u.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick);sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},u.prototype.checkActionButtonStatus=function(){if(this.actionButtons&&!this.isBlazorTemplate){var n=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+h).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;n>0&&n===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},u.prototype.renderButtonTemplates=function(){var n,t;("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton)&&(n=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=n,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload)));this.clearButton&&(t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear)))},u.prototype.checkAutoUpload=function(n){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(n):this.upload(n),this.removeActionButtons()):this.actionButtons||this.renderActionButtons();this.checkActionButtonStatus()},u.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},u.prototype.sequenceUpload=function(t){if(this.filesData.length-t.length==0||"1"!==this.filesData[this.filesData.length-t.length-1].statusCode){++this.count;var i=!this.showFileList;"object"===n(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],i),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(t)):--this.count}},u.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick);sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles);sf.base.EventHandler.remove(document,"click",this.removeFocus);this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm);this.keyboardModule&&this.keyboardModule.destroy()},u.prototype.resetForm=function(){this.clearAll()},u.prototype.keyActionHandler=function(n){var r=n.target,i,u,e;switch(n.action){case"enter":n.target===this.clearButton?this.clearButtonClick():n.target===this.uploadButton?this.uploadButtonClick():n.target===this.browseButton?this.browseButtonClick():r.classList.contains(f)?((i=this.getCurrentMetaData(null,n)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)):r.classList.contains("e-file-play-btn")?this.resumeUpload(this.getCurrentMetaData(null,n),n):r.classList.contains(s)?(i=this.getCurrentMetaData(null,n),sf.base.isNullOrUndefined(i)?(u=n.target.parentElement,e=this.filesData[this.fileList.indexOf(u)],this.retry(e)):(i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file))):(this.removeFiles(n),r.classList.contains(t)||this.browseButton.focus());n.preventDefault();n.stopPropagation()}},u.prototype.getCurrentMetaData=function(n,t){var r,u,f,i;for(sf.base.isNullOrUndefined(n)?(f=t.target.parentElement,r=this.filesData[this.fileList.indexOf(f)]):r=n,i=0;i<this.uploadMetaData.length;i++)this.uploadMetaData[i].file.name===r.name&&(u=this.uploadMetaData[i]);return u},u.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},u.prototype.browseButtonClick=function(){this.element.click()},u.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},u.prototype.clearButtonClick=function(){this.clearAll();this.sequentialUpload&&(this.count=-1);this.actionCompleteCount=0},u.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this),sf.base.EventHandler.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},u.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave),sf.base.EventHandler.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},u.prototype.onDragEnter=function(n){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),this.dragCounter=this.dragCounter+1,n.preventDefault(),n.stopPropagation())},u.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove("e-upload-drag-hover"))},u.prototype.dragHover=function(n){this.enabled&&("Default"!==this.dropEffect&&(n.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),n.preventDefault(),n.stopPropagation())},u.prototype.dropElement=function(n){this.dragCounter=0;this.dropZoneElement.classList.remove("e-upload-drag-hover");this.onSelectFiles(n);n.preventDefault();n.stopPropagation()},u.prototype.onPasteFile=function(n){var i=n.clipboardData.items,t;1===i.length&&(t=[].slice.call(i)[0],"file"===t.kind&&t.type.match("^image/")&&this.renderSelectedFiles(n,[t.getAsFile()],!1,!0))},u.prototype.getSelectedFiles=function(n){for(var t,u=[],f=this.fileList[n],e=this.getFilesData(),o=+f.getAttribute("data-files-count"),i=0,r=0;r<n;r++)i+=+this.fileList[r].getAttribute("data-files-count");for(t=i;t<i+o;t++)u.push(e[t]);return u},u.prototype.removeFiles=function(n){var e,f;if(this.enabled){e=n.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var i=this.fileList.indexOf(e),r=this.fileList[i],o=this.isFormUpload(),u=o?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);sf.base.isNullOrUndefined(u)||(n.target.classList.contains(t)&&!o?((u[0].statusCode="5",sf.base.isNullOrUndefined(r))||(f=r.querySelector("."+t),y({target:f,width:"20px"}),k(f)),this.sequentialUpload&&this.uploadSequential(),r.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)):sf.base.closest(n.target,".e-spinner-pane")||this.remove(u,!1,!1,!0,n),this.element.value="",this.checkActionButtonStatus())}},u.prototype.removeFilesData=function(n,t){var i,r;t?this.showFileList||(i=this.filesData.indexOf(n),this.filesData.splice(i,1)):(r=this.getLiElement(n),sf.base.isNullOrUndefined(r)||(this.isBlazorSaveUrl||sf.base.detach(r),i=this.fileList.indexOf(r),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl||0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)?this.dotNetRef.invokeMethodAsync("RemoveFileData",i):(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons(),this.sequentialUpload&&i<=this.count&&--this.count)))},u.prototype.removeUploadedFile=function(n,t,i,r){var u=this,f=n,e=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null),o,s;e.emitError=!1;o=new FormData;e.beforeSend=function(r){t.currentRequest=e.httpRequest;u.currentRequestHeader&&u.updateCustomheader(e.httpRequest,u.currentRequestHeader);u.customFormDatas&&u.updateFormData(o,u.customFormDatas);!i&&u.removingEnabled?u.dotNetRef.invokeMethodAsync("RemovingEvent",t).then(function(t){t.cancel?r.cancel=!0:u.removingEventCallback(n)}):u.removingEventCallback(n)};s=this.element.getAttribute("name");t.postRawFile&&!sf.base.isNullOrUndefined(f.rawFile)&&""!==f.rawFile?o.append(s,f.rawFile,f.name):o.append(s,f.name);e.onLoad=function(n){return u.removeCompleted(n,f,r),{}};e.onError=function(n){return u.removeFailed(n,f,r),{}};e.send(o)},u.prototype.removeCompleted=function(n,t,i){var e=n&&n.currentTarget?this.getResponse(n):null,r=n.target,u,f;4===r.readyState&&r.status>=200&&r.status<=299?(u={e:n,response:e,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")},this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",u),this.removeFilesData(t,i),f=this.uploadedFilesData.indexOf(t),this.uploadedFilesData.splice(f,1),this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData})):this.removeFailed(n,t,i)},u.prototype.removeFailed=function(n,t,r){var l={e:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")},c,u,s,f;r||(c=this.filesData.indexOf(t),u=this.fileList[c],u&&(u.classList.remove(h),u.classList.add(e),s=u.querySelector("."+i),s&&(s.classList.remove(h),s.classList.add(e))),this.checkActionButtonStatus());this.failuredEnabled&&this.dotNetRef.invokeMethodAsync("FailureEvent",l);f=this.getLiElement(t);sf.base.isNullOrUndefined(f)||sf.base.isNullOrUndefined(f.querySelector("."+o))||(a(f.querySelector("."+o)),sf.base.detach(f.querySelector(".e-spinner-pane")))},u.prototype.removingEventCallback=function(n){var t=this.getLiElement(n),i;sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.querySelector("."+o))&&sf.base.isNullOrUndefined(t.querySelector("."+r))||(y({target:i=t.querySelector("."+o)?t.querySelector("."+o):t.querySelector("."+r),width:"20px"}),k(i))},u.prototype.updateFormData=function(n,t){if(t&&t.length>0&&t[0])for(var r=function(i){var r=t[i],u=Object.keys(r).map(function(n){return r[n]});n.append(Object.keys(r)[0],u)},i=0;i<t.length;i++)r(i)},u.prototype.updateCustomheader=function(n,t){if(t.length>0&&t[0])for(var r=function(i){var r=t[i],u=Object.keys(r).map(function(n){return r[n]});n.setRequestHeader(Object.keys(r)[0],u)},i=0;i<t.length;i++)r(i)},u.prototype.getFilesFromFolder=function(n){var t;if(this.filesEntries=[],t=this.multiple?n.dataTransfer.items:[n.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var u=function(i){var u=t[i].webkitGetAsEntry(),f;u.isFile?(f=[],u.file(function(n){var t=u.fullPath;f.push({path:t,file:n})}),r.renderSelectedFiles(n,f,!0)):u.isDirectory&&r.traverseFileTree(u,n)},r=this,i=0;i<t.length;i++)u(i)},u.prototype.checkDirectoryUpload=function(n){for(var t=0;n&&t<n.length;t++)if(n[t].webkitGetAsEntry().isDirectory)return!0;return!1},u.prototype.traverseFileTree=function(n,t){if(n.isFile)this.filesEntries.push(n);else if(n.isDirectory){var i=n.createReader();this.readFileFromDirectory(i,t)}},u.prototype.readFileFromDirectory=function(n,t){var i=this;n.readEntries(function(r){for(var u=0;u<r.length;u++)i.traverseFileTree(r[u],t);i.pushFilesEntries(t);r.length&&i.readFileFromDirectory(n)})},u.prototype.pushFilesEntries=function(n){for(var t=this,r=[],u=function(i){f.filesEntries[i].file(function(u){if(t.filesEntries.length){var f=t.filesEntries[i].fullPath;r.push({path:f,file:u});i===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(n,r,!0))}})},f=this,i=0;i<this.filesEntries.length;i++)u(i)},u.prototype.onSelectFiles=function(n){var i,t;this.enabled&&("drop"===n.type?this.directoryUpload?this.getFilesFromFolder(n):(t=this.sortFilesList=n.dataTransfer.files,"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=t),t.length>0&&(i=this.multiple?this.sortFileList(t):[t[0]],this.renderSelectedFiles(n,i))):(i=[].slice.call(n.target.files),this.renderSelectedFiles(n,i)))},u.prototype.getBase64=function(n){return new Promise(function(t,i){var r=new FileReader;r.readAsDataURL(n);r.onload=function(){return t(r.result)};r.onerror=function(n){return i(n)}})},u.prototype.renderSelectedFiles=function(n,t,i,r){var s=this,f,u,e,o;if(this.base64String=[],f={event:n,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null,type:n&&n.type},t.length<1)return f.isCanceled=!0,void(this.selectedEnabled&&this.dotNetRef.invokeMethodAsync("SelectedEvent",f));for(this.flag=!0,u=[],this.multiple||(this.clearData(!0),t=[t[0]]),e=0;e<t.length;e++)o=i?t[e].file:t[e],this.updateInitialFileDetails(n,t,o,e,u,i,r);f.filesData=u;this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0);this.allTypes||(u=this.checkExtension(u));this.selectedEnabled?this.dotNetRef.invokeMethodAsync("SelectedEvent",f).then(function(n){s._internalRenderSelect(n,u)}):this._internalRenderSelect(f,u)},u.prototype.updateInitialFileDetails=function(n,t,i,r,u,f,e){var o={name:f?t[r].path.substring(1,t[r].path.length):e?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[r].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),mimeContentType:i.type,lastModifiedDate:new Date(i.lastModified),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};e&&(o.fileSource="paste");o.status=""!==o.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==o.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):o.status;""===o.validationMessages.minSize&&""===o.validationMessages.maxSize||(o.statusCode="0");u.push(o)},u.prototype._internalRenderSelect=function(n,t){var i,r,u;if(!n.cancel){if(this.currentRequestHeader=n.currentRequest,this.customFormDatas=n.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(n.isModified&&n.modifiedFilesData.length>0){for(i=0;i<n.modifiedFilesData.length;i++)for(r=0;r<t.length;r++)n.modifiedFilesData[i].id===t[r].id&&(n.modifiedFilesData[i].rawFile=t[r].rawFile);u=this.allTypes?n.modifiedFilesData:this.checkExtension(n.modifiedFilesData);this.updateSortedFileList(u);this.filesData=u;this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(u)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);sf.base.isNullOrUndefined(n.progressInterval)||""===n.progressInterval||(this.progressInterval=n.progressInterval)}else this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl&&this.dotNetRef.invokeMethodAsync("UpdateServerFileData",this.filesData,this.isForm),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete();this.isFirstFileOnSelection=!0}},u.prototype.allowUpload=function(){var n=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(n=!0),n},u.prototype.isFormUpload=function(){var n=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(n=!0),n},u.prototype.clearData=function(n){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null);"msie"===this.browserName||n||(this.element.value="");this.fileList=[];this.filesData=[];this.isBlazorSaveUrl||this.isBlazorTemplate?this.dotNetRef.invokeMethodAsync("ClearAllFile"):this.removeActionButtons()},u.prototype.updateSortedFileList=function(n){var o=sf.base.createElement("div",{id:"clonewrapper"}),s=-1,r,h,u,e,c,f,t,i;if(this.listParent){for(r=0;r<this.listParent.querySelectorAll("li").length;r++)h=this.listParent.querySelectorAll("li")[r],o.appendChild(h.cloneNode(!0));for(u=0,e=this.listParent.querySelectorAll("li");u<e.length;u++)c=e[u],sf.base.detach(c);for(this.removeActionButtons(),f=[].slice.call(o.childNodes),sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL(),t=0;t<n.length;t++){for(i=0;i<this.filesData.length;i++)this.filesData[i].name===n[t].name&&(this.listParent.appendChild(f[i]),sf.base.EventHandler.add(f[i].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(f[i]),s=t);s!==t&&this.createFileList([n[t]])}}else this.createFileList(n)},u.prototype.isBlank=function(n){return!n||/^\s*$/.test(n)},u.prototype.checkExtension=function(n){var e=n,f,t;if(!this.isBlank(this.allowedExtensions)){for(var r=[],i=0,u=this.allowedExtensions.split(",");i<u.length;i++)f=u[i],r.push(f.trim().toLocaleLowerCase());for(t=0;t<n.length;t++)-1===r.indexOf(("."+n[t].type).toLocaleLowerCase())&&(n[t].status=this.localizedTexts("invalidFileType"),n[t].statusCode="0")}return e},u.prototype.validatedFileSize=function(n){var t="",i="";return n<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):n>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}},u.prototype.isPreLoadFile=function(n){var i=!1,t;if(this.files)for(t=0;t<this.files.length;t++)if(this.files[t].name===n.name.slice(0,n.name.lastIndexOf("."))&&this.files[t].type===n.type){i=!0;break}return i},u.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},u.prototype.formFileList=function(n){var t=sf.base.createElement("li",{className:ut}),h,o,s,a,c,p,u,e,w;t.setAttribute("data-files-count",n.length+"");for(var v,f=sf.base.createElement("span",{className:"e-file-container"}),l=0,y=n;l<y.length;l++)h=y[l],o=sf.base.createElement("span",{className:"e-file-name"}),o.innerHTML=this.getFileNameOnly(h.name),s=sf.base.createElement("span",{className:"e-file-type"}),a=this.getFileType(h.name),(s.innerHTML="."+a,a||s.classList.add("e-hidden"),this.enableRtl)?(c=sf.base.createElement("span",{className:"e-rtl-container"}),c.appendChild(s),c.appendChild(o),f.appendChild(c)):(f.appendChild(o),f.appendChild(s)),this.truncateName(o),v=this.formValidateFileInfo(h,t);t.appendChild(f);this.setListToFileInfo(n,t);p=this.listParent.querySelectorAll("li").length;u=sf.base.createElement("span");(t.classList.contains("e-file-invalid")?(u.classList.add(i),u.classList.add("e-file-invalid"),u.innerText=n.length>1?this.localizedTexts("invalidFileSelection"):v):(u.classList.add(n.length>1?"e-file-information":"e-file-size"),u.innerText=n.length>1?this.localizedTexts("totalFiles")+": "+n.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(n)):this.bytesToSize(n[0].size),this.createFormInput(n)),f.appendChild(u),sf.base.isNullOrUndefined(t.querySelector(".e-icons")))&&(e=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&e.classList.add("e-msie"),e.setAttribute("title",this.localizedTexts("remove")),t.appendChild(f),t.appendChild(e),sf.base.EventHandler.add(e,"click",this.removeFiles,this),e.classList.add(r));w={element:t,fileInfo:this.mergeFileInfo(n,t),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(n,t))};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",w);this.listParent.appendChild(t);this.fileList.push(t)},u.prototype.formValidateFileInfo=function(n,t){var i=n.status,r=this.validatedFileSize(n.size),u;return""===r.minSize&&""===r.maxSize||(this.addInvalidClass(t),i=""!==r.minSize?this.localizedTexts("invalidMinFileSize"):""!==r.maxSize?this.localizedTexts("invalidMaxFileSize"):i),u=this.checkExtension(this.getFilesInArray(n))[0].status,u===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=u),i},u.prototype.addInvalidClass=function(n){n.classList.add("e-file-invalid")},u.prototype.createFormInput=function(n){var t=this.element.cloneNode(!0),i,r;for(t.classList.add("e-hidden-file-input"),i=0,r=n;i<r.length;i++)r[i].input=t;t.setAttribute("name",this.uploaderName);this.uploadWrapper.querySelector(".e-file-select").appendChild(t);"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},u.prototype.getFileSize=function(n){for(var i=0,t=0,r=n;t<r.length;t++)i+=r[t].size;return i},u.prototype.mergeFileInfo=function(n,t){for(var u,i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},f=[],e="",r=0,o=n;r<o.length;r++)u=o[r],f.push(u.name),e=u.type;return i.name=f.join(", "),i.size=this.getFileSize(n),i.type=e,i.status=this.statusForFormUpload(n,t),i},u.prototype.statusForFormUpload=function(n,t){for(var u,r,o,i,f=!0,e=0,s=n;e<s.length;e++)u=s[e],i=u.status,r=this.validatedFileSize(u.size),""===r.minSize&&""===r.maxSize||(f=!1,i=""!==r.minSize?this.localizedTexts("invalidMinFileSize"):""!==r.maxSize?this.localizedTexts("invalidMaxFileSize"):i),o=this.checkExtension(this.getFilesInArray(u))[0].status,o===this.localizedTexts("invalidFileType")&&(f=!1,i=o);return f?i=this.localizedTexts("totalFiles")+": "+n.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(n)):(t.classList.add("e-file-invalid"),i=n.length>1?this.localizedTexts("invalidFileSelection"):i),i},u.prototype.createFileList=function(n,t){var k,a,p,l,w,y,b,e,f,d,g;if(this.isBlazorSaveUrl||this.isBlazorTemplate)k=t?this.filesData=this.filesData.concat(n):n,this.dotNetRef.invokeMethodAsync("CreateFileList",k,this.isForm);else if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(n,this.element.files);else for(a=0,p=n;a<p.length;a++){var u=p[a],c=sf.base.createElement("li",{className:ut,attrs:{"data-file-name":u.name,"data-files-count":"1"}}),s=sf.base.createElement("span",{className:"e-file-container"}),v=sf.base.createElement("span",{className:"e-file-name",attrs:{title:u.name}});v.innerHTML=this.getFileNameOnly(u.name);l=sf.base.createElement("span",{className:"e-file-type"});w=this.getFileType(u.name);(l.innerHTML="."+w,w||l.classList.add("e-hidden"),this.enableRtl)?(y=sf.base.createElement("span",{className:"e-rtl-container"}),y.appendChild(l),y.appendChild(v),s.appendChild(y)):(s.appendChild(v),s.appendChild(l));b=sf.base.createElement("span",{className:"e-file-size"});b.innerHTML=this.bytesToSize(u.size);s.appendChild(b);e=sf.base.createElement("span",{className:i});s.appendChild(e);e.innerHTML=u.status;c.appendChild(s);f=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie");f.setAttribute("title",this.localizedTexts("remove"));c.appendChild(f);sf.base.EventHandler.add(f,"click",this.removeFiles,this);"2"===u.statusCode?(e.classList.add(h),f.classList.add(o),f.setAttribute("title",this.localizedTexts("delete"))):"1"!==u.statusCode&&(e.classList.remove(h),e.classList.add("e-validation-fails"));this.autoUpload&&"1"===u.statusCode&&""!==this.asyncSettings.saveUrl&&(e.innerHTML="");f.classList.contains(o)||f.classList.add(r);d={element:c,fileInfo:u,index:n.indexOf(u),isPreload:this.isPreLoadFile(u)};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",d);this.listParent.appendChild(c);this.fileList.push(c);this.truncateName(v);g=this.flag;this.isPreLoadFile(u)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=g)}},u.prototype.getSlicedName=function(n){var t;t=n.textContent;n.dataset.tail=t.slice(t.length-10)},u.prototype.setListToFileInfo=function(n,t){for(var i=0,r=n;i<r.length;i++)r[i].list=t},u.prototype.truncateName=function(n){var t=n;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},u.prototype.getFileType=function(n){var t,i=n.lastIndexOf(".");return i>=0&&(t=n.substring(i+1)),t||""},u.prototype.getFileNameOnly=function(n){var t=this.getFileType(n);return n.split("."+t)[0]},u.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var n=document.createAttribute("multiple");this.element.setAttributeNode(n)}},u.prototype.filterfileList=function(n){for(var i=[],t=0;t<n.length;t++)this.getLiElement(n[t]).classList.contains(h)||i.push(n[t]);return i},u.prototype.updateStatus=function(n,t,r,u){var f,e;if(void 0===u&&(u=!0),""!==t&&!sf.base.isNullOrUndefined(t)&&""!==r&&!sf.base.isNullOrUndefined(r))if(this.isBlazorSaveUrl)for(f=0;f<this.filesData.length;f++)this.filesData[f].name===n.name&&(this.filesData[f].status=t,this.filesData[f].statusCode=r);else n.status=t,n.statusCode=r;return u&&(e=this.getLiElement(n),sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.querySelector("."+i))||""===t||sf.base.isNullOrUndefined(t)||(e.querySelector("."+i).textContent=t)),n},u.prototype.getLiElement=function(n){for(var i,t=0;t<this.filesData.length;t++)(sf.base.isNullOrUndefined(this.filesData[t].id)||sf.base.isNullOrUndefined(n.id)?this.filesData[t].name===n.name:this.filesData[t].name===n.name&&this.filesData[t].id===n.id)&&(i=t);return this.fileList[i]},u.prototype.createProgressBar=function(n){var t=sf.base.createElement("span",{className:c}),r=sf.base.createElement("progressbar",{className:v,attrs:{value:"0",max:"100"}}),u=sf.base.createElement("span",{className:"e-progress-inner-wrap"}),i;r.setAttribute("style","width: 0%");i=sf.base.createElement("span",{className:"e-progress-bar-text"});i.textContent="0%";u.appendChild(r);t.appendChild(u);t.appendChild(i);n.querySelector(".e-file-container").appendChild(t)},u.prototype.updateProgressbar=function(n,t){if(!isNaN(Math.round(n.loaded/n.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+v)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(n.loaded/n.total*100).toString()+"%");else{var i=Math.round(n.loaded/n.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(n.loaded/n.total*100).toString()+"%")}},u.prototype.changeProgressValue=function(n,t){n.querySelector("."+v).setAttribute("style","width:"+t);n.querySelector(".e-progress-bar-text").textContent=t},u.prototype.uploadInProgress=function(n,u,f,o){var s=this.getLiElement(u),h,l;(!sf.base.isNullOrUndefined(s)||f)&&(sf.base.isNullOrUndefined(s)?this.cancelUploadingFile(u,n,o):("5"===u.statusCode&&this.cancelUploadingFile(u,n,o,s),s.querySelectorAll("."+c).length>0||!s.querySelector("."+i)||(s.querySelector("."+i).classList.add("e-upload-progress"),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"),s.querySelector("."+i).classList.remove(e)),this.updateProgressbar(n,s),h=s.querySelector("."+r),sf.base.isNullOrUndefined(h)||(h.classList.add(t,"e-upload-progress"),h.setAttribute("title",this.localizedTexts("abort")),h.classList.remove(r))),l={e:n,operation:"upload",file:this.updateStatus(u,this.localizedTexts("inProgress"),"3"),lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total},this.progressingEnabled&&this.dotNetRef.invokeMethodAsync("ProgressEvent",l))},u.prototype.cancelEventCallback=function(n,i,r,u){var h=this,o,f,s,e;u.cancel?(n.statusCode="3",sf.base.isNullOrUndefined(r))||(o=r.querySelector("."+t),sf.base.isNullOrUndefined(o)||(a(o),sf.base.detach(r.querySelector(".e-spinner-pane")))):(i.emitError=!1,i.httpRequest.abort(),f=new FormData,"5"===n.statusCode&&(s=this.element.getAttribute("name"),f.append(s,n.name),f.append("cancel-uploading",n.name),e=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null),e.emitError=!1,e.onLoad=function(t){return h.removecanceledFile(t,n),{}},e.send(f)))},u.prototype.cancelUploadingFile=function(n,t,i,r){var f=this,u;"5"===n.statusCode&&(u={event:t,fileData:n,cancel:!1},this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",u).then(function(t){f.cancelEventCallback(n,i,r,t)}):this.cancelEventCallback(n,i,r,u))},u.prototype.removecanceledFile=function(n,i){var u=this.getLiElement(i),f,e;u.querySelector("."+s)||sf.base.isNullOrUndefined(u.querySelector("."+t))||(this.updateStatus(i,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(n,i,u),f=u.querySelector("."+r),sf.base.isNullOrUndefined(u)||(a(f),sf.base.detach(u.querySelector(".e-spinner-pane"))),e={event:n,response:n&&n.currentTarget?this.getResponse(n):null,operation:"cancel",file:i},this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",e))},u.prototype.renderFailureState=function(n,i,u){var o=this,f;this.updateProgressBarClasses(u,e);this.removeProgressbar(u,"failure");sf.base.isNullOrUndefined(u.querySelector(".e-file-status"))||u.querySelector(".e-file-status").classList.add(e);f=u.querySelector("."+t);sf.base.isNullOrUndefined(f)||(f.classList.remove(t,"e-upload-progress"),f.classList.add(r),f.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),f.parentElement.insertBefore(this.pauseButton,f),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),u.querySelector("."+s).addEventListener("click",function(n){o.reloadcanceledFile(n,i,u,!1)},!1))},u.prototype.reloadcanceledFile=function(n,t,r,u){t.statusCode="1";t.status=this.localizedTexts("readyToUploadMessage");u||(r.querySelector("."+i).classList.remove(e),sf.base.isNullOrUndefined(r.querySelector("."+s))||sf.base.detach(r.querySelector("."+s)),this.pauseButton=null);r.classList.add("e-restrict-retry");this.upload([t])},u.prototype.uploadComplete=function(n,i,r){var e=n.target,u,f;if(4===e.readyState&&e.status>=200&&e.status<=299){if(u=this.getLiElement(i),sf.base.isNullOrUndefined(u)&&(!r||sf.base.isNullOrUndefined(r)))return;sf.base.isNullOrUndefined(u)||(this.updateProgressBarClasses(u,h),this.removeProgressbar(u,"success"),f=u.querySelector("."+t),sf.base.isNullOrUndefined(f)||(f.classList.add(o),f.setAttribute("title",this.localizedTexts("delete")),f.classList.remove(t),f.classList.remove("e-upload-progress")));this.raiseSuccessEvent(n,i)}else this.uploadFailed(n,i)},u.prototype.getResponse=function(n){var t=n.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},u.prototype.serverRemoveIconBindEvent=function(){var t,n,i;if(this.uploadWrapper&&this.isBlazorSaveUrl)for(t=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),n=0;n<t.length;n++)i=t[n]?t[n].querySelector(".e-icons"):null,i&&(sf.base.EventHandler.remove(i,"click",this.removeFiles),sf.base.EventHandler.add(i,"click",this.removeFiles,this))},u.prototype.raiseSuccessEvent=function(n,t){var e=this,o=n&&n.currentTarget?this.getResponse(n):null,u=this.localizedTexts("uploadSuccessMessage"),f={e:n,response:o,operation:"upload",file:this.updateStatus(t,u,"2",!1),statusText:u},i,r;this.isBlazorSaveUrl||(i=this.getLiElement(t),sf.base.isNullOrUndefined(i)||(r=i.querySelector(".e-spinner-pane"),sf.base.isNullOrUndefined(r)||(a(i),sf.base.detach(r))));this.successEnabled?this.dotNetRef.invokeMethodAsync("SuccessEvent",f).then(function(n){e.successEventCallback(t,n)}):this.successEventCallback(t,f)},u.prototype.successEventCallback=function(n,t){this.updateStatus(n,t.statusText,"2");this.uploadedFilesData.push(n);!this.isBlazorSaveUrl&&this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData});this.checkActionButtonStatus();this.fileList.length>0&&(this.getLiElement(n).classList.contains("e-restrict-retry")?this.getLiElement(n).classList.remove("e-restrict-retry"):(this.uploadSequential(),this.checkActionComplete(!0)))},u.prototype.uploadFailed=function(n,t){var f=this,i=this.getLiElement(t),e=n&&n.currentTarget?this.getResponse(n):null,r=this.localizedTexts("uploadFailedMessage"),u={e:n,response:e,operation:"upload",file:this.updateStatus(t,r,"0",!1),statusText:r,retryFiles:null};sf.base.isNullOrUndefined(i)||this.renderFailureState(n,t,i);this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",u).then(function(n){f.failureEventCallback(t,n)}):this.failureEventCallback(t,u)},u.prototype.failureEventCallback=function(n,t){this.updateStatus(n,t.statusText,"0");this.checkActionButtonStatus();this.uploadSequential();this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},u.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},u.prototype.checkActionComplete=function(n){n?++this.actionCompleteCount:--this.actionCompleteCount;this.raiseActionComplete()},u.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var n={fileData:[]};n.fileData=this.getSelectedFileStatus(this.selectedFiles);this.actionCompleteEnabled&&this.dotNetRef.invokeMethodAsync("ActionCompleteEvent",n)}},u.prototype.getSelectedFileStatus=function(n){for(var f,t,r=[],u=0,i=0;i<n.length;i++)for(f=n[i],t=0;t<this.filesData.length;t++)this.filesData[t].name===f.name&&(r[u]=this.filesData[t],++u);return r},u.prototype.updateProgressBarClasses=function(n,t){var i=n.querySelector("."+v);sf.base.isNullOrUndefined(i)||i.classList.add(t)},u.prototype.removeProgressbar=function(n,t){var i=this;sf.base.isNullOrUndefined(n.querySelector("."+c))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(n.querySelector("."+c),{name:"FadeOut"}),this.progressAnimation.animate(n.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(n,t)},750))},u.prototype.animateProgressBar=function(n,t){"success"===t?(n.classList.add(h),sf.base.isNullOrUndefined(n.querySelector("."+i))||(n.querySelector("."+i).classList.remove("e-upload-progress"),this.progressAnimation.animate(n.querySelector("."+i),{name:"FadeIn"}),n.querySelector("."+i).classList.add(h),n.querySelector("."+i).classList.remove(e))):sf.base.isNullOrUndefined(n.querySelector("."+i))||(n.querySelector("."+i).classList.remove("e-upload-progress"),this.progressAnimation.animate(n.querySelector("."+i),{name:"FadeIn"}),n.querySelector("."+i).classList.add(e));n.querySelector("."+c)&&sf.base.detach(n.querySelector("."+c))},u.prototype.localizedTexts=function(n){return this.localeText[n]},u.prototype.chunkUpload=function(n,t,i){var r=Math.min(this.asyncSettings.chunkSize,n.size),u={chunkIndex:0,blob:n.rawFile.slice(0,r),file:n,start:0,end:r,retryCount:0,request:null};this.sendRequest(n,u,t,i)},u.prototype.sendRequest=function(n,t,i){var r=this,u=new FormData,o,s,h,f,e;if(!n.rawFile)for(o=0;o<this.selectedFiles.length;o++)n.id===this.selectedFiles[o].id&&(n.rawFile=this.selectedFiles[o].rawFile);s=n.rawFile.slice(t.start,t.end);u.append("chunkFile",s,n.name);u.append(this.uploaderName,s,n.name);u.append("chunk-index",t.chunkIndex.toString());u.append("chunkIndex",t.chunkIndex.toString());h=Math.max(Math.ceil(n.size/this.asyncSettings.chunkSize),1);u.append("total-chunk",h.toString());u.append("totalChunk",h.toString());f=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST","async":!0,contentType:null});f.emitError=!1;f.onLoad=function(n){return r.chunkUploadComplete(n,t,i),{}};f.onUploadProgress=function(n){return r.chunkUploadInProgress(n,t,i),{}};e={fileData:n,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};f.beforeSend=function(i){e.currentRequest=f.httpRequest;e.currentChunkIndex=t.chunkIndex;r.currentRequestHeader&&r.updateCustomheader(f.httpRequest,r.currentRequestHeader);r.customFormDatas&&r.updateFormData(u,r.customFormDatas);0===e.currentChunkIndex?r.uploadingEnabled?r.dotNetRef.invokeMethodAsync("UploadingEvent",e).then(function(t){r.uploadingEventCallback(u,t,i,n)}):r.uploadingEventCallback(u,e,i,n):r.chunkUploadingEnabled?r.dotNetRef.invokeMethodAsync("ChunkUploadingEvent",e).then(function(t){r.uploadingEventCallback(u,t,i,n)}):r.uploadingEventCallback(u,e,i,n)};f.onError=function(n){return r.chunkUploadFailed(n,t,i),{}};f.send(u);t.request=f},u.prototype.uploadingEventCallback=function(n,t,i,r){t.cancel?this.eventCancelByArgs(i,t,r):this.updateFormData(n,t.customFormData)},u.prototype.eventCancelByArgs=function(n,t,u){var s=this,f,o;(n.cancel=!0,"5"!==t.fileData.statusCode)&&(f=this.getLiElement(t.fileData),f.querySelector("."+i).innerHTML=this.localizedTexts("fileUploadCancel"),f.querySelector("."+i).classList.add(e),t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),o=f.querySelector("."+r),o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(n){s.reloadcanceledFile(n,u,f)},!1),this.checkActionButtonStatus())},u.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},u.prototype.chunkUploadComplete=function(n,t,i){var r,h=this,u=n.target,o,s;if(4===u.readyState&&u.status>=200&&u.status<300){var c=n&&n.currentTarget?this.getResponse(n):null,e=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),l={event:n,file:t.file,chunkIndex:t.chunkIndex,totalChunk:e,chunkSize:this.asyncSettings.chunkSize,response:c};if(this.chunkSuccessEnabled&&this.dotNetRef.invokeMethodAsync("ChunkSuccessEvent",l),!sf.base.isNullOrUndefined(i)&&i||(r=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode)o={event:n,fileData:t.file,cancel:!1},this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",o).then(function(n){h.cancelingEventCallback(t,r,u,i,n)}):this.cancelingEventCallback(t,r,u,i,o);else{if(e-1===t.chunkIndex&&e>t.chunkIndex)return s=this.pausedData.indexOf(t),s>=0&&this.pausedData.splice(s,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&r&&(r&&!sf.base.isNullOrUndefined(r.querySelector("."+f))&&sf.base.detach(r.querySelector("."+f)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(n,t.file);"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(n,t)},u.prototype.cancelingEventCallback=function(n,i,r,u,f){var c=this,s,e,h,o;f.cancel?(n.file.statusCode="3",s=i.querySelector("."+t),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(s)||(a(s),sf.base.detach(i.querySelector(".e-spinner-pane"))),this.sendNextRequest(n)):(n.request.emitError=!1,r.abort(),e=new FormData,h=this.element.getAttribute("name"),e.append(h,n.file.name),e.append("cancel-uploading",n.file.name),e.append("cancelUploading",n.file.name),o=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null),o.emitError=!1,o.onLoad=function(t){return c.removeChunkFile(t,n,u),{}},o.send(e))},u.prototype.sendNextRequest=function(n){n.start=n.end;n.end+=this.asyncSettings.chunkSize;n.end=Math.min(n.end,n.file.size);n.chunkIndex+=1;this.sendRequest(n.file,n)},u.prototype.removeChunkFile=function(n,i,u){var c;if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(u)&&!u){var h=this.getLiElement(i.file),o=h.querySelector("."+t),l=o;this.updateStatus(i.file,this.localizedTexts("fileUploadCancel"),"5");this.updateProgressBarClasses(h,e);this.removeProgressbar(h,"failure");o&&o.classList.remove(t);o&&o.classList.add(r);o&&o.setAttribute("title",this.localizedTexts("remove"));c=h.querySelector("."+f);c&&c.classList.add(s);c&&c.classList.remove(f);c&&c.setAttribute("title",this.localizedTexts("retry"));sf.base.isNullOrUndefined(h)||sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(h.querySelector(".e-spinner-pane"))||(a(l),sf.base.detach(h.querySelector(".e-spinner-pane")))}},u.prototype.pauseUpload=function(n,t,i){n.file.statusCode="4";n.file.status=this.localizedTexts("pause");this.updateMetaData(n);var r={event:t||null,file:n.file,chunkIndex:n.chunkIndex,chunkCount:Math.round(n.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(n,i,r)},u.prototype.abortUpload=function(n,i,u){var s,e,o;for("4"!==n.file.statusCode&&(n.request.emitError=!1,n.request.httpRequest.abort()),s=this.getLiElement(n.file),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&(e=s.querySelector("."+f),e.classList.remove(f),e.classList.add("e-file-play-btn"),e.setAttribute("title",this.localizedTexts("resume")),e.nextElementSibling.classList.add(r),e.nextElementSibling.classList.remove(t),e.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))),o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===n.file.name&&this.pausedData.splice(o,1);this.pausedData.push(n);this.pausedEnabled&&this.dotNetRef.invokeMethodAsync("PausingEvent",u)},u.prototype.resumeUpload=function(n,i,u){var o,s=this.getLiElement(n.file),h,e;for(sf.base.isNullOrUndefined(s)||(o=s.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(u)&&u||(o.classList.remove("e-file-play-btn"),o.classList.add(f),o.setAttribute("title",this.localizedTexts("pause")),o.nextElementSibling.classList.remove(r),o.nextElementSibling.classList.add(t),o.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),n.file.status=this.localizedTexts("inProgress"),n.file.statusCode="3",this.updateMetaData(n),h={event:i||null,file:n.file,chunkIndex:n.chunkIndex,chunkCount:Math.round(n.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize},this.resumeEnabled&&this.dotNetRef.invokeMethodAsync("ResumingEvent",h),e=0;e<this.pausedData.length;e++)this.pausedData[e].end===this.pausedData[e].file.size?this.chunkUploadComplete(i,n,u):this.pausedData[e].file.name===n.file.name&&(this.pausedData[e].start=this.pausedData[e].end,this.pausedData[e].end=this.pausedData[e].end+this.asyncSettings.chunkSize,this.pausedData[e].end=Math.min(this.pausedData[e].end,this.pausedData[e].file.size),this.pausedData[e].chunkIndex=this.pausedData[e].chunkIndex+1,this.sendRequest(this.pausedData[e].file,this.pausedData[e],u))},u.prototype.updateMetaData=function(n){-1===this.uploadMetaData.indexOf(n)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(n),1);this.uploadMetaData.push(n)},u.prototype.removeChunkProgressBar=function(n){var r=this.getLiElement(n.file),i;sf.base.isNullOrUndefined(r)||(this.updateProgressBarClasses(r,h),this.removeProgressbar(r,"success"),i=r.querySelector("."+t),sf.base.isNullOrUndefined(i)||(i.classList.add(o),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(t,"e-upload-progress")))},u.prototype.chunkUploadFailed=function(n,t,i){var u,e=this,o=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),r,f;sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&(u=this.getLiElement(t.file));r=n&&n.currentTarget?this.getResponse(n):null;f={event:n,file:t.file,chunkIndex:t.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:r};this.chunkFailuredEnabled?this.dotNetRef.invokeMethodAsync("ChunkFailureEvent",f).then(function(f){e.chunkFailureCallback(n,t,u,r,i,f)}):this.chunkFailureCallback(n,t,u,r,i,f)},u.prototype.chunkFailureCallback=function(n,i,u,h,c,l){var p=this,v,a;if(!l.cancel)if(i.retryCount<this.asyncSettings.retryCount)setTimeout(function(){p.retryRequest(u,i,c)},this.asyncSettings.retryAfterDelay);else{sf.base.isNullOrUndefined(u)||(v=u.querySelector("."+f)?u.querySelector("."+f):u.querySelector(".e-file-play-btn"),sf.base.isNullOrUndefined(v)||(v.classList.add(s),v.classList.remove(f,"e-file-play-btn")),this.updateProgressBarClasses(u,e),this.removeProgressbar(u,"failure"),u.querySelector(".e-icons").classList.remove("e-upload-progress"),a=u.querySelector("."+t)?u.querySelector("."+t):u.querySelector("."+r),a.classList.remove(t),sf.base.isNullOrUndefined(u.querySelector("."+f))||sf.base.detach(u.querySelector("."+f)),i.start>0?(a.classList.add(o),a.setAttribute("title",this.localizedTexts("delete"))):(a.classList.add(r),a.setAttribute("title",this.localizedTexts("remove"))));i.retryCount=0;var y=i.file,w=this.localizedTexts("uploadFailedMessage"),b={e:n,response:h,operation:"upload",file:this.updateStatus(y,w,"0",!1),statusText:w,retryFiles:null};this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",b).then(function(n){p.failureCallback(y,n)}):this.failureCallback(y,b)}},u.prototype.failureCallback=function(n,t){this.updateStatus(n,t.statusText,"0");this.uploadSequential();this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},u.prototype.retryRequest=function(n,t,i){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&n&&this.updateProgressBarClasses(n,e);t.retryCount+=1;this.sendRequest(t.file,t)},u.prototype.checkPausePlayAction=function(n){var i=n.target,r=n.target.parentElement,u=this.fileList.indexOf(r),e=this.filesData[u],t=this.getCurrentMetaData(e);i.classList.contains(f)?this.pauseUpload(t,n):i.classList.contains("e-file-play-btn")?this.resumeUpload(t,n):i.classList.contains(s)&&(t.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(t,!1):this.retryUpload(t,!0))},u.prototype.retryUpload=function(n,t){t?(n.end=n.end+this.asyncSettings.chunkSize,n.start=n.start+this.asyncSettings.chunkSize,this.sendRequest(n.file,n)):(n.file.statusCode="1",n.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(n.file));this.getLiElement(n.file).classList.add("e-restrict-retry")},u.prototype.chunkUploadInProgress=function(n,u){var b=this,h,l,v,a,y,p,w;"4"!==u.file.statusCode&&("4"!==u.file.statusCode&&"5"!==u.file.statusCode&&(u.file.statusCode="3",u.file.status=this.localizedTexts("inProgress")),this.updateMetaData(u),h=this.getLiElement(u.file),sf.base.isNullOrUndefined(h)||(l=h.querySelector("."+s),(sf.base.isNullOrUndefined(l)||(l.classList.add(f),l.setAttribute("title",this.localizedTexts("pause")),l.classList.remove(s)),sf.base.isNullOrUndefined(h))||(h.querySelectorAll("."+c).length>0||(v=h.querySelector("."+i),sf.base.isNullOrUndefined(this.template)&&(v.classList.add("e-upload-progress"),v.classList.remove(e),this.createProgressBar(h),this.updateProgressBarClasses(h,"e-upload-progress")),a=h.querySelector("."+r)?h.querySelector("."+r):h.querySelector("."+o),sf.base.isNullOrUndefined(a)||(a.classList.add(t),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(r))),!isNaN(Math.round(n.loaded/n.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==u.file.statusCode&&(y=void 0,p=Math.ceil(u.file.size/this.asyncSettings.chunkSize)-1,this.asyncSettings.chunkSize&&p&&(y=Math.round(u.chunkIndex/p*100),this.changeProgressValue(h,y.toString()+"%"))),0===u.chunkIndex&&this.checkActionButtonStatus()),sf.base.isNullOrUndefined(h.querySelector("."+f))&&sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(h.querySelector("."+o))&&(this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie"),w=h.querySelector("."+t),w.parentElement.insertBefore(this.pauseButton,w),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(n){b.checkPausePlayAction(n)},!1))))},u.prototype.bytesToSize=function(n){var t=-1;if(!n)return"0.0 KB";do n/=1024,t++;while(n>99);return t>=2&&(n*=1024,t=1),Math.max(n,0).toFixed(1)+" "+["KB","MB"][t]},u.prototype.sortFileList=function(n){for(var o,i=n=n||this.sortFilesList,u=[],t=0;t<i.length;t++)u.push(i[t].name);for(var f=[],r=0,e=u.sort();r<e.length;r++)for(o=e[r],t=0;t<i.length;t++)o===i[t].name&&f.push(i[t]);return f},u.prototype.destroy=function(){var n,t,i;for(this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.element.removeAttribute("accept"),this.setInitialAttributes(),n=0,t=["aria-label","directory","webkitdirectory","tabindex"];n<t.length;n++)i=t[n],this.element.removeAttribute(i)},u.prototype.upload=function(n,t){var u=this,i,r;(n=n||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t))?this.sequenceUpload(n):(i=this.getFilesInArray(n),r={customFormData:[],currentRequest:null,cancel:!1,filesData:i},this.beforeUploadEnabled?this.dotNetRef.invokeMethodAsync("BeforeUploadEvent",r).then(function(n){u.beforeUploadCallback(i,t,n)}):this.beforeUploadCallback(i,t,r))},u.prototype.beforeUploadCallback=function(n,t,i){i.cancel||(this.currentRequestHeader=i.currentRequest?i.currentRequest:this.currentRequestHeader,this.customFormDatas=i.customFormData&&i.customFormData.length>0?i.customFormData:this.customFormDatas,this.uploadFiles(n,t))},u.prototype.getFilesInArray=function(n){var t=[];return _instanceof(n,Array)?t=this.getFileListData(n):t.push(n),t},u.prototype.getFileListData=function(n){var t=[];if(!sf.base.isNullOrUndefined(this.filesData)&&!sf.base.isNullOrUndefined(n))for(var r=function(i){t.push(u.filesData.filter(function(t){return t.name===n[i].name})[0])},u=this,i=0;i<n.length;i++)r(i);return sf.base.isNullOrUndefined(t)?[]:t},u.prototype.serverReadFileBase64=function(n,t,i){var r=this;return new Promise(function(u,f){var o,s=r.fileStreams[n].rawFile,e;try{e=new FileReader;e.onload=(o=e,function(){try{var n=o.result,t=n?n.split(";base64,")[1]:null;u(t)}catch(n){f(n)}});e.readAsDataURL(s.slice(t,t+i))}catch(n){f(n)}})},u.prototype.uploadFileCount=function(){var n=this.filesData;return n&&0!==n.length?n.length:-1},u.prototype.getFileRead=function(n){var t=this.filesData,r,i;return!t||0===t.length?-1:(r=t[n],i=this.newFileRef++,this.fileStreams[i]=r,i)},u.prototype.getFileInfo=function(n){var t=this.filesData;return t&&0!==t.length&&t[n]?this.filesData[n]:null},u.prototype.uploadFiles=function(n,t){var e=this,i=[],r;if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.dotNetRef.invokeMethodAsync("GetFileDetails",n);else{!t||sf.base.isNullOrUndefined(t)?this.multiple?i=this.filterfileList(n):(r=[],r.push(n[0]),i=this.filterfileList(r)):i=n;for(var o=function(n){u.checkChunkUpload()?u.uploadFilesRequest(i,n,t):i[n]&&_instanceof(i[n].rawFile,File)&&u.getBase64(i[n].rawFile).then(function(r){e.base64String.push(r);e.uploadFilesRequest(i,n,t)})},u=this,f=0;f<i.length;f++)o(f)}},u.prototype.uploadFilesRequest=function(n,t,i){var s,r=this,h=[],o=this.checkChunkUpload(),u=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null),f,e,c;u.emitError=!1;s=n.slice(0);h.push(s[t].rawFile);f={fileData:s[t],customFormData:[],cancel:!1};e=new FormData;(u.beforeSend=function(i){f.currentRequest=u.httpRequest;f.fileData.rawFile=o?f.fileData.rawFile:r.base64String[t];r.currentRequestHeader&&r.updateCustomheader(u.httpRequest,r.currentRequestHeader);r.customFormDatas&&r.updateFormData(e,r.customFormDatas);r.uploadingEnabled?r.dotNetRef.invokeMethodAsync("UploadingEvent",f).then(function(u){f=u;r.uploadCallback(i,o,n,e,t,h,u)}):r.uploadCallback(i,o,n,e,t,h,f)},"1"===n[t].statusCode)&&(c=this.element.getAttribute("name"),e.append(c,n[t].rawFile,n[t].name),o&&n[t].size>this.asyncSettings.chunkSize?this.chunkUpload(n[t],i,t):(u.onLoad=function(u){return f.cancel||r.uploadComplete(u,n[t],i),{}},u.onUploadProgress=function(e){return f.cancel||r.uploadInProgress(e,n[t],i,u),{}},u.onError=function(i){return r.uploadFailed(i,n[t]),{}},u.send(e)))},u.prototype.uploadCallback=function(n,t,i,r,u,f,e){t||(i[u].rawFile=e.fileData.rawFile=f[u]);e.cancel&&this.eventCancelByArgs(n,e,i[u]);this.updateFormData(r,e.customFormData)},u.prototype.spliceFiles=function(n){for(var t,u=this.fileList[n],f=this.getFilesData(),e=+u.getAttribute("data-files-count"),i=0,r=0;r<n;r++)i+=+this.fileList[r].getAttribute("data-files-count");for(t=i+e-1;t>=i;t--)f.splice(t,1)},u.prototype.remove=function(n,t,i,r,u){var e=this,f;sf.base.isNullOrUndefined(r)&&(r=!0);f={cancel:!1,customFormData:[],currentRequest:null,filesData:this.getFilesInArray(n),postRawFile:r};this.beforeRemoveEnabled?this.dotNetRef.invokeMethodAsync("BeforeRemoveEvent",f).then(function(r){e.beforeRemoveCallback(n,t,i,u,r)}):this.beforeRemoveCallback(n,t,i,u,f)},u.prototype.beforeRemoveCallback=function(n,t,i,u,f){var h=this,e={event:u,cancel:!1,filesData:[],customFormData:[],postRawFile:f.postRawFile,currentRequest:null},s;if(!f.cancel)if(this.currentRequestHeader=f.currentRequest,this.customFormDatas=f.customFormData,this.isFormUpload()&&!this.isBlazorSaveUrl)e.filesData=n,this.dotNetRef.invokeMethodAsync("RemovingEvent",e).then(function(t){h.removeCallback(n,t)});else if(this.isForm&&(sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&!this.isBlazorSaveUrl)e.filesData=this.getFilesData(),this.removingEnabled?this.dotNetRef.invokeMethodAsync("RemovingEvent",e).then(function(n){n.cancel||h.clearAll()}):this.clearAll();else{s=[];_instanceof(n=sf.base.isNullOrUndefined(n)?this.filesData:n,Array)?s=n:s.push(n);e.filesData=s;for(var l=this.asyncSettings.removeUrl,v=""!==l&&!sf.base.isNullOrUndefined(l),y=function(n){o.filesData.indexOf(n);var f=o.uploadedFilesData.indexOf(n);("2"===n.statusCode||"4"===n.statusCode||"0"===n.statusCode&&-1!==f)&&v?o.removeUploadedFile(n,e,i,t):!i&&o.removingEnabled?o.dotNetRef.invokeMethodAsync("RemovingEvent",e).then(function(i){i.cancel||h.removeFilesData(n,t)}):o.removeFilesData(n,t);u&&!u.target.classList.contains(r)&&o.checkActionComplete(!1)},o=this,c=0,a=s;c<a.length;c++)y(a[c])}},u.prototype.removeCallback=function(n,t){var r,f;if(!t.cancel)for(var e=!1,i=void 0,u=0,o=this.getFilesInArray(n);u<o.length;u++)r=o[u],(e||(i=this.fileList.indexOf(r.list)),i>-1)&&(f=sf.base.isNullOrUndefined(r.input)?null:r.input,f&&sf.base.detach(f),this.spliceFiles(i),sf.base.detach(this.fileList[i]),this.fileList.splice(i,1),e=!0,i=-1)},u.prototype.clearAll=function(){var n=this,t;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);t={cancel:!1,filesData:this.filesData};this.clearEnabled?this.dotNetRef.invokeMethodAsync("ClearingEvent",t).then(function(t){t.cancel||(n.clearData(),n.actionCompleteCount=0,n.count=-1)}):(this.clearData(),this.actionCompleteCount=0,this.count=-1)},u.prototype.getFilesData=function(n){if(sf.base.isNullOrUndefined(n)){for(var t=0;t<this.filesData.length;t++)this.filesData[t].rawFile=this.base64String[t];return this.filesData}return this.getSelectedFiles(n)},u.prototype.pause=function(n,t){n=n||this.filesData;var i=this.getFilesInArray(n);this.pauseUploading(i,t)},u.prototype.pauseUploading=function(n,t){for(var r=this.getFiles(n),i=0;i<r.length;i++)"3"===r[i].statusCode&&this.pauseUpload(this.getCurrentMetaData(r[i],null),null,t)},u.prototype.getFiles=function(n){var t=[];return sf.base.isNullOrUndefined(n)||_instanceof(n,Array)?t=n:t.push(n),t},u.prototype.resume=function(n,t){n=n||this.filesData;var i=this.getFilesInArray(n);this.resumeFiles(i,t)},u.prototype.resumeFiles=function(n,t){for(var r=this.getFiles(n),i=0;i<r.length;i++)"4"===r[i].statusCode&&this.resumeUpload(this.getCurrentMetaData(r[i],null),null,t)},u.prototype.retry=function(n,t,i){n=n||this.filesData;var r=this.getFilesInArray(n);this.retryFailedFiles(r,t,i)},u.prototype.retryFailedFiles=function(n,t,i){for(var f,u=this.getFiles(n),r=0;r<u.length;r++)("5"===u[r].statusCode||"0"===u[r].statusCode)&&(this.asyncSettings.chunkSize>0?this.retryUpload(this.getCurrentMetaData(u[r],null),t):(f=void 0,i||(f=this.fileList[this.filesData.indexOf(u[r])]),this.reloadcanceledFile(null,u[r],f,i)))},u.prototype.cancel=function(n){n=n||this.filesData;var t=this.getFilesInArray(n);this.cancelUpload(t)},u.prototype.cancelUpload=function(n){var i=this.getFiles(n),t,r;if(this.asyncSettings.chunkSize>0)for(t=0;t<i.length;t++)"3"===i[t].statusCode&&(r=this.getCurrentMetaData(i[t],null),r.file.statusCode="5",r.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(r),this.showHideUploadSpinner(i[t]));else for(t=0;t<i.length;t++)"3"===i[t].statusCode&&(i[t].statusCode="5",i[t].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(i[t]))},u.prototype.showHideUploadSpinner=function(n){var r=this.getLiElement(n),i;!sf.base.isNullOrUndefined(r)&&sf.base.isNullOrUndefined(this.template)&&(i=r.querySelector("."+t),y({target:i,width:"20px"}),k(i))},u}();return{initialize:function(n,t,i){n&&new et(n,t,i);n&&n.blazor__instance&&n.blazor__instance.initialize()},uploadFileCount:function(n){return n&&n.blazor__instance?n.blazor__instance.uploadFileCount(n):0},getFileRead:function(n,t){return n&&n.blazor__instance?n.blazor__instance.getFileRead(t,n):0},getFileInfo:function(n,t){return n&&n.blazor__instance?n.blazor__instance.getFileInfo(t,n):null},serverReadFileBase64:function(n,t,i,r){return n&&n.blazor__instance?n.blazor__instance.serverReadFileBase64(t,i,r):null},raiseSuccessEvent:function(n,t){n&&n.blazor__instance&&n.blazor__instance.raiseSuccessEvent(null,t)},serverRemoveIconBindEvent:function(n){n&&n.blazor__instance&&n.blazor__instance.serverRemoveIconBindEvent()},serverFileListElement:function(n,t,i,r){n&&n.blazor__instance&&(n.blazor__instance.serverUlElement(t),r||n.blazor__instance.serverActionButtonsEventBind(i))},bytesToSize:function(n,t){return n&&n.blazor__instance?n.blazor__instance.bytesToSize(t):""},cancel:function(n,t){n&&n.blazor__instance&&n.blazor__instance.cancel(t)},clearAll:function(n){n&&n.blazor__instance&&n.blazor__instance.clearAll()},createFileList:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.createFileList(t,i)},getFilesData:function(n,t){return n&&n.blazor__instance?n.blazor__instance.getFilesData(t):null},pause:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.pause(t,i)},remove:function(n,t,i,r,u,f){n&&n.blazor__instance&&n.blazor__instance.remove(t,i,r,u,f)},resume:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.resume(t,i)},retry:function(n,t,i,r){n&&n.blazor__instance&&n.blazor__instance.retry(t,i,r)},sortFileList:function(n,t){return n&&n.blazor__instance?n.blazor__instance.sortFileList(t):null},upload:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.upload(t,i)},propertyChanges:function(n,t,i){n&&n.blazor__instance&&n.blazor__instance.propertyChanges(t,i)}}}()},"./modules/sortable.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};sf.lists=sf.base.extend({},sf.lists,function(t){"use strict";function u(n,t,i,r){var u=[],f;(t||(t=n),i&&i.length?i.forEach(function(t){u.push(n.children[t])}):u=[].slice.call(n.children),sf.base.isNullOrUndefined(r))?u.forEach(function(n){t.appendChild(n)}):(f=t.children[r],u.forEach(function(n){t.insertBefore(n,f)}))}var r,f=(r=function(n,t){return(r=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}r(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},e=function(n){function t(t,i){var r=n.call(this,i,t)||this;return r.getHelper=function(n){var t,i=r.getSortableElement(n.sender.target);return!!r.isValidTarget(i,r)&&(r.helper?t=r.helper({sender:i,element:n.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),sf.base.addClass([t],["e-sortableclone"]),document.body.appendChild(t),t)},r.onDrag=function(n){var e,t,f,o,h;if(r.trigger("drag",{event:n.event,element:r.element,target:n.target}),t=r.getSortableInstance(n.target),f=r.getSortableElement(n.target,t),(r.isValidTarget(f,t)||n.target.className.indexOf("e-list-group-item")>-1)&&(r.curTarget!==f||!sf.base.isNullOrUndefined(t.placeHolder))&&(!t.placeHolderElement||t.placeHolderElement!==n.target)){if(n.target.className.indexOf("e-list-group-item")>-1&&(f=n.target),r.curTarget=f,r.target===f)return;var i=r.getIndex(t.placeHolderElement,t),s=r.getPlaceHolder(f,t),u=void 0;if(s){if(i=sf.base.isNullOrUndefined(i)?r.getIndex(r.target):i,u=r.getIndex(f,t,n.event),o=r.isPlaceHolderPresent(t),o&&i===u)return;o&&sf.base.remove(t.placeHolderElement);t.placeHolderElement=s;n.target.className.indexOf("e-list-group-item")>-1?t.element.insertBefore(t.placeHolderElement,t.element.children[u]):t.element!==r.element&&u===t.element.childElementCount?t.element.appendChild(t.placeHolderElement):t.element.insertBefore(t.placeHolderElement,t.element.children[u]);r.refreshDisabled(i,u,t)}else i=sf.base.isNullOrUndefined(i)?r.getIndex(r.target):r.getIndex(f,t)<i||!i?i:i-1,u=r.getIndex(f,t),h=t.element!==r.element?u:i<u?u+1:u,r.updateItemClass(t),t.element.insertBefore(r.target,t.element.children[h]),r.refreshDisabled(i,u,t),r.curTarget=r.target,r.trigger("drop",{droppedElement:r.target,element:t.element,previousIndex:i,currentIndex:u,target:n.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:n.event,scope:r.scope})}(t=r.getSortableInstance(r.curTarget),sf.base.isNullOrUndefined(f)&&n.target!==t.placeHolderElement)?r.isPlaceHolderPresent(t)&&r.removePlaceHolder(t):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(n){(e=r.getSortableInstance(n)).element&&e!==t&&r.removePlaceHolder(e)})},r.onDragStart=function(n){var t,i;r.target=r.getSortableElement(n.target);t=!1;r.target.classList.add("e-grabbed");r.curTarget=r.target;n.helper=document.getElementsByClassName("e-sortableclone")[0];i={cancel:!1,element:r.element,target:r.target};r.trigger("beforeDragStart",i,function(i){i.cancel&&(t=i.cancel,r.onDragStop(n))});t||(sf.base.isBlazor?r.trigger("dragStart",{event:n.event,element:r.element,target:r.target,bindEvents:n.bindEvents,dragElement:n.dragElement}):r.trigger("dragStart",{event:n.event,element:r.element,target:r.target}))},r.onDragStop=function(n){var i,u,e,t=r.getSortableInstance(r.curTarget),f,o,s,h;i=r.getIndex(r.target);f=r.isPlaceHolderPresent(t);f&&(o=r.getIndex(t.placeHolderElement,t),s={previousIndex:i,currentIndex:o,target:n.target,droppedElement:r.target,helper:n.helper,cancel:!1,handled:!1},r.trigger("beforeDrop",s,function(u){var o,f;u.cancel||((e=u.handled,r.updateItemClass(t),u.handled)&&(o=r.target.cloneNode(!0),r.target.classList.remove("e-grabbed"),r.target=o),t.element.insertBefore(r.target,t.placeHolderElement),f=r.getIndex(r.target,t),i=r===t&&i-f>1?i-1:i,r.trigger("drop",{event:n.event,element:t.element,previousIndex:i,currentIndex:f,target:n.target,helper:n.helper,droppedElement:r.target,scopeName:r.scope,handled:e}));sf.base.remove(t.placeHolderElement)}));(t=r.getSortableInstance(n.target),u=t.element.childElementCount,i=r.getIndex(r.target),t.element!==n.target&&(f||r.curTarget!==r.target))||(h={previousIndex:i,currentIndex:r.curTarget===r.target?i:u,target:n.target,droppedElement:r.target,helper:n.helper,cancel:!1},r.trigger("beforeDrop",h,function(f){t.element!==n.target||f.cancel||(r.updateItemClass(t),t.element.appendChild(r.target),r.trigger("drop",{event:n.event,element:t.element,previousIndex:i,currentIndex:u,target:n.target,helper:n.helper,droppedElement:r.target,scopeName:r.scope}))}));r.target.classList.remove("e-grabbed");r.target=null;r.curTarget=null;sf.base.remove(n.helper);sf.base.getComponent(r.element,sf.base.Draggable).intDestroy(n.event)},r.bind(),r}var r;return f(t,n),r=t,t.prototype.bind=function(){this.element.id||(this.element.id=sf.base.getUniqueID("sortable"));this.itemClass||(this.itemClass="e-sort-item",this.dataBind());this.initializeDraggable()},t.prototype.initializeDraggable=function(){new sf.base.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})},t.prototype.getPlaceHolder=function(n,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:n});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(n,t){return n&&sf.base.compareElementParent(n,t.element)&&n.classList.contains(t.itemClass)&&!n.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(n){sf.base.remove(n.placeHolderElement);n.placeHolderElement=null},t.prototype.updateItemClass=function(n){this!==n&&(this.target.classList.remove(this.itemClass),this.target.classList.add(n.itemClass))},t.prototype.getSortableInstance=function(n){if(n=sf.base.closest(n,".e-"+this.getModuleName())){var t=sf.base.getComponent(n,r);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(n,t,i){if(i===this)for(var e=void 0,u=n<t,r=void 0,f=u?n:t,o=u?t:n;f<=o;)(e=this.element.children[f]).classList.contains("e-disabled")?(r=this.getIndex(e),this.element.insertBefore(e,this.element.children[u?r+2:r-1]),f=u?r+2:r+1):f++},t.prototype.getIndex=function(n,t,i){var r,u;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach(function(t,f){if((t.classList.contains("e-sortable-placeholder")&&(u=!0),t===n)&&(r=f,!sf.base.isNullOrUndefined(i))){u&&(r-=1);var e=n.getBoundingClientRect(),o=e.bottom-(e.bottom-e.top)/2;r=i.clientY<=o?r:r+1}}),r},t.prototype.getSortableElement=function(n,t){return void 0===t&&(t=this),sf.base.closest(n,"."+t.itemClass)},t.prototype.queryPositionInfo=function(n){return n.left=pageXOffset?parseFloat(n.left)-pageXOffset+"px":n.left,n.top=pageYOffset?parseFloat(n.top)-pageYOffset+"px":n.top,n},t.prototype.isPlaceHolderPresent=function(n){return n.placeHolderElement&&!!sf.base.closest(n.placeHolderElement,"#"+n.element.id)},t.prototype.moveTo=function(n,t,i){u(this.element,n,t,i)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind());sf.base.getComponent(this.element,sf.base.Draggable).destroy();n.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(n,t){for(var i=0,r=Object.keys(n);i<r.length;i++)switch(r[i]){case"itemClass":[].slice.call(this.element.children).forEach(function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass);n.itemClass&&i.classList.add(n.itemClass)})}},i([sf.base.Property(!1)],t.prototype,"enableAnimation",void 0),i([sf.base.Property(null)],t.prototype,"itemClass",void 0),i([sf.base.Property(null)],t.prototype,"scope",void 0),i([sf.base.Property()],t.prototype,"helper",void 0),i([sf.base.Property()],t.prototype,"placeHolder",void 0),i([sf.base.Event()],t.prototype,"drag",void 0),i([sf.base.Event()],t.prototype,"beforeDragStart",void 0),i([sf.base.Event()],t.prototype,"dragStart",void 0),i([sf.base.Event()],t.prototype,"beforeDrop",void 0),i([sf.base.Event()],t.prototype,"drop",void 0),t=r=i([sf.base.NotifyPropertyChanges],t)}(sf.base.Base);return t.Sortable=e,t.moveTo=u,t}({}))},"./modules/spinner.js":function(){window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(n){"use strict";function c(n,t){var o,f,i,e,s;n.target&&(f=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,i=function(n,t){var i=t("div",{}),r=t("div",{});return i.classList.add("e-spinner-pane"),r.classList.add("e-spinner-inner"),n.appendChild(i),i.appendChild(r),{wrap:i,inner_wrap:r}}(n.target,f),(sf.base.isNullOrUndefined(n.cssClass)||i.wrap.classList.add(n.cssClass),sf.base.isNullOrUndefined(n.template)&&sf.base.isNullOrUndefined(r))?(e=sf.base.isNullOrUndefined(n.type)?function(n){return window.getComputedStyle(n,":after").getPropertyValue("content").replace(/['"]+/g,"")}(i.wrap):n.type,o=function(n,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return n=n?parseFloat(n+""):i,"Bootstrap"===t?n:n/2}(sf.base.isNullOrUndefined(n.width)?void 0:n.width,e),l(e,i.wrap,o,f),sf.base.isNullOrUndefined(n.label)||function(n,t,i){var r=i("div",{});r.classList.add("e-spin-label");r.innerHTML=t;n.appendChild(r)}(i.inner_wrap,n.label,f)):(s=sf.base.isNullOrUndefined(n.template)?r:n.template,i.wrap.classList.add("e-spin-template"),function(n,t,i){sf.base.isNullOrUndefined(i)||n.classList.add(i);n.querySelector(".e-spinner-inner").innerHTML=t}(i.wrap,s,u)),i.wrap.classList.add("e-spin-hide"),i=null)}function l(n,r,u,s){var h=r.querySelector(".e-spinner-inner"),c=h.querySelector("svg");switch(sf.base.isNullOrUndefined(c)||h.removeChild(c),n){case"Material":!function(n,r,u){var f=i();t[f]={timeOut:0,type:"Material",radius:r};a(n,f,u,"e-spin-material");y(r,n,"Material","e-spin-material")}(h,u,s);break;case"Fabric":!function(n,r,u){var o=i();t[o]={timeOut:0,type:"Fabric",radius:r};f(n,o,"e-spin-fabric",u);e(r,n,"e-spin-fabric")}(h,u,s);break;case"Bootstrap":!function(n,r){var u=i();t[u]={timeOut:0,type:"Bootstrap",radius:r},function(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),u,r;for(i.setAttribute("id",t),i.setAttribute("class","e-spin-bootstrap"),i.setAttribute("viewBox","0 0 64 64"),n.insertBefore(i,n.firstChild),u=0;u<=7;u++)r=document.createElementNS("http://www.w3.org/2000/svg","circle"),r.setAttribute("class","e-path-circle_"+u),r.setAttribute("r","2"),r.setAttribute("transform","translate(32,32)"),i.appendChild(r)}(n,u),function(n,t){var u=n.querySelector("svg.e-spin-bootstrap"),i,r,f,e;for(u.style.width=u.style.height=t+"px",i=90,r=0;r<=7;r++)f=o(0,0,24,i),e=u.querySelector(".e-path-circle_"+r),e.setAttribute("cx",f.x+""),e.setAttribute("cy",f.y+""),i=i>=360?0:i,i+=45}(n,r)}(h,u);break;case"HighContrast":!function(n,r,u){var o=i();t[o]={timeOut:0,type:"HighContrast",radius:r};f(n,o,"e-spin-high-contrast",u);e(r,n,"e-spin-high-contrast")}(h,u,s);break;case"Bootstrap4":!function(n,r,u){var f=i();t[f]={timeOut:0,type:"Bootstrap4",radius:r};a(n,f,u,"e-spin-bootstrap4");y(r,n,"Bootstrap4","e-spin-bootstrap4")}(h,u,s);break;case"Tailwind":case"Tailwind-dark":!function(n,r,u){var o=i();t[o]={timeOut:0,type:"Tailwind",radius:r};f(n,o,"e-spin-tailwind",u);e(r,n,"e-spin-tailwind")}(h,u,s)}}function i(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function f(n,t,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),u,f;r.setAttribute("id",t);r.setAttribute("class",i);u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("class","e-path-circle");f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("class","e-path-arc");n.insertBefore(r,n.firstChild);r.appendChild(u);r.appendChild(f)}function a(n,t,i,r){var u=document.createElementNS("http://www.w3.org/2000/svg","svg"),f=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("class",r);u.setAttribute("id",t);f.setAttribute("class","e-path-circle");n.insertBefore(u,n.firstChild);u.appendChild(f)}function v(n){!function(n,i,r,u,f,e,o){var c=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),a=i-n,s=(h=2*o.globalInfo[o.uniqueID].radius+"",parseFloat(h)),y=p(s),b=-90*(o.globalInfo[o.uniqueID].count||0),h;!function i(f){var o=Math.max(0,Math.min((new Date).getTime()-l,u));!function(n,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",w(s,y,n,e)+"");i.setAttribute("transform","rotate("+b+" "+s/2+" "+s/2+")")}}(r(o,n,a,u),f.container);c===f.globalInfo[f.uniqueID].previousId&&o<u?t[f.uniqueID].timeOut=setTimeout(i.bind(null,f),1):v(f)}(o)}(1,149,d,1333,n.globalInfo[n.uniqueID].count,75,n);n.globalInfo[n.uniqueID].count=++n.globalInfo[n.uniqueID].count%4}function y(n,t,i,r){var u=2*n,f=t.querySelector("svg."+r),e=f.querySelector("path.e-path-circle"),o=p(u),s=u/2+"px";f.setAttribute("viewBox","0 0 "+u+" "+u);f.style.width=f.style.height=u+"px";f.style.transformOrigin=s+" "+s+" "+s;e.setAttribute("d",function(n,t){var i=n/2,r=t/2;return"M"+i+","+r+"A"+(i-r)+","+(i-r)+" 0 1 1 "+r+","+i}(u,o));"Material"===i&&(e.setAttribute("stroke-width",o+""),e.setAttribute("stroke-dasharray",(u-o)*Math.PI*.75+""),e.setAttribute("stroke-dashoffset",w(u,o,1,75)+""))}function p(n){return.1*n}function w(n,t,i,r){return(n-t)*Math.PI*(3*r/100-i/100)}function d(n,t,i,r){var u=(n/=r)*n,f=u*n;return t+i*(6*f*u+-15*u*u+10*f)}function e(n,t,i){var e=n,s=n,u=2*n,r=t.querySelector("."+i),h=r.querySelector(".e-path-circle"),c=r.querySelector(".e-path-arc"),f=u/2+"px";h.setAttribute("d",function(n,t,i){return["M",n,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(e,s,n));c.setAttribute("d",function(n,t,i,r,u){var f=o(n,t,i,u),e=o(n,t,i,r);return["M",f.x,f.y,"A",i,i,0,0,0,e.x,e.y].join(" ")}(e,s,n,315,45));r.setAttribute("viewBox","0 0 "+u+" "+u);r.style.transformOrigin=f+" "+f+" "+f;r.style.width=r.style.height=u+"px"}function o(n,t,i,r){var u=(r-90)*Math.PI/180;return{x:n+i*Math.cos(u),y:t+i*Math.sin(u)}}function s(n){b(n,!1);n=null}function b(n,i){var r,f,e,u;if(n&&(r=n.classList.contains("e-spinner-pane")?n:n.querySelector(".e-spinner-pane")),n&&r){if(f=r.querySelector(".e-spinner-inner"),i?!r.classList.contains("e-spin-template")&&!r.classList.contains("e-spin-hide"):!r.classList.contains("e-spin-template")&&!r.classList.contains("e-spin-show")){if(e=r.querySelector("svg"),sf.base.isNullOrUndefined(e))return;u=e.getAttribute("id");switch(t[u].isAnimate=!i,t[u].type){case"Material":i?clearTimeout(t[u].timeOut):function(n,i,r){var u={};t[i].timeOut=0;u[i]=function(n,t,i,r){return{radius:t,count:i,previousId:r}}(0,r,0,0);v({uniqueID:i,container:n,globalInfo:u,timeOutVar:0})}(f,u,t[u].radius);break;case"Bootstrap":i?clearTimeout(t[u].timeOut):function(n){function h(n,i,r,u,f){var e=0;!function i(r){t[f].isAnimate&&(++e,n.setAttribute("r",r+""),e>=u.length&&(e=0),t[f].timeOut=setTimeout(i.bind(null,u[e]),18))}(i)}for(var u,e,o,r,f,s=n.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)h(n.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,i,(u=void 0,e=void 0,o=void 0,r=void 0,f=void 0,u=[],o=i,r=!1,f=1,function n(t){u.push(t);(t!==o||1===f)&&(t<=e&&t>1&&!r?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),r=!0):t<8&&r?8===(t=parseFloat((t+.2).toFixed(2)))&&(r=!1):t<=8&&!r&&(t=parseFloat((t-.2).toFixed(2))),++f,n(t))}(e=i),u),s)}(f)}}i?sf.base.classList(r,["e-spin-hide"],["e-spin-show"]):sf.base.classList(r,["e-spin-show"],["e-spin-hide"]);n=null}}function h(n){b(n,!0);n=null}function k(n,t){var e=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,f,i;for(void 0!==n.template&&(r=n.template,void 0!==n.template&&(u=n.cssClass)),f=document.querySelectorAll(".e-spinner-pane"),i=0;i<f.length;i++)g(n.template,f[i],n.type,n.cssClass,e)}function g(n,i,f,e,o){sf.base.isNullOrUndefined(n)&&!i.classList.contains("e-spin-template")?(!function(n,i,r,u){var f,e,o;sf.base.isNullOrUndefined(r)||n.classList.add(r);f=n.querySelector("svg");e="Bootstrap"===i?parseFloat(f.style.height):parseFloat(f.style.height)/2;f.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0&&(o=f.getAttribute("id"),clearTimeout(t[o].timeOut));l(i,n,e,u)}(i,f,e,o),i.classList.contains("e-spin-show")?(i.classList.remove("e-spin-show"),s(i)):(i.classList.remove("e-spin-hide"),h(i))):(r=n,sf.base.isNullOrUndefined(e)||(u=e))}var t={},r=null,u=null;return n.Spinner=function(n,t,i,r){switch(n){case"Create":c({type:r,target:document.querySelector(t.target),cssClass:t.cssClass,label:t.label,width:t.width});break;case"Show":s(document.querySelector(i));break;case"Hide":h(document.querySelector(i));break;case"Set":k({cssClass:t.cssClass,type:r})}},n.createSpinner=c,n.showSpinner=s,n.hideSpinner=h,n.setSpinner=k,n}({}))},"./modules/splitbuttonsbase.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};window.sf.splitbuttons=window.sf.base.extend({},window.sf.splitbuttons,function(t){"use strict";var r,u=(r=function(n,t){return(r=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}r(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},f=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return u(t,n),i([sf.base.Property("")],t.prototype,"iconCss",void 0),i([sf.base.Property("")],t.prototype,"id",void 0),i([sf.base.Property(!1)],t.prototype,"separator",void 0),i([sf.base.Property("")],t.prototype,"text",void 0),i([sf.base.Property("")],t.prototype,"url",void 0),i([sf.base.Property(!1)],t.prototype,"disabled",void 0),t}(sf.base.ChildProperty);return t.getModel=function(n,t){for(var u,i=sf.base.extend({},n),r=0,f=Object.keys(i);r<f.length;r++)u=f[r],t.indexOf(u)<0&&sf.base.deleteObject(i,u);return i},t.upDownKeyHandler=function(n,t){var u=40===t?0:n.childElementCount-1,i=u,f=n.querySelector(".e-selected"),r,e;for(f&&f.classList.remove("e-selected"),r=0,e=n.children.length;r<e;r++)n.children[r].classList.contains("e-focused")&&(i=r,n.children[r].classList.remove("e-focused"),40===t?i++:i--,i===(40===t?n.childElementCount:-1)&&(i=u));-1!==(i=function n(t,i,r,u,f){if(void 0===f&&(f=0),(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(r===(40===u?t.childElementCount-1:0)?r=40===u?0:t.childElementCount-1:40===u?r++:r--),(i=t.children[r]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++f===t.childElementCount)return-1;r=n(t,i,r,u,f)}return r}(n,n.children[i],i,t))&&(sf.base.addClass([n.children[i]],"e-focused"),n.children[i].focus())},t.setBlankIconStyle=function(n){var f=[].slice.call(n.getElementsByClassName("e-blank-icon")),t,i,r,e,u;f.length&&(t=n.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)"),t.classList.contains("e-url")&&(t=t.querySelector(".e-menu-url")),r=t.querySelector(".e-menu-icon"),e=n.classList.contains("e-rtl"),i=e?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},u=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[i.margin],10)+parseInt(getComputedStyle(t).paddingLeft,10)+"px",f.forEach(function(n){n.classList.contains("e-url")?n.querySelector(".e-menu-url").style[i.padding]=u:n.style[i.padding]=u}))},t.Item=f,t}({}))},"./modules/svgbase.js":function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(n){return _typeof(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":_typeof(n)})(t)}window.sf=window.sf||{};window.sf.svgbase=function(t){"use strict";function p(n){var t;switch(n){case"Highcontrast":case"HighContrast":t={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"Bootstrap4":t={tooltipFill:"rgba(0, 0, 0, 0.9)",tooltipBoldLabel:"rgba(255, 255, 255)",tooltipLightLabel:"rgba(255, 255, 255, 0.9)",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)"};break;case"Tailwind":t={tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280"};break;case"TailwindDark":t={tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5":t={tooltipFill:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5Dark":t={tooltipFill:"#E9ECEF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#ADB5BD"};break;default:t={tooltipFill:"rgba(0, 8, 22, 0.75)",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return t}function e(n,t){var e=n||"",i=document.getElementById("chartmeasuretext"),r,u;if(null===i&&(i=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(i)),"string"==typeof n&&(n.indexOf("<")>-1||n.indexOf(">")>-1)){for(r=n.split(" "),u=0;u<r.length;u++)-1===r[u].indexOf("<br/>")&&(r[u]=r[u].replace(/[<>]/g,"&"));n=r.join(" ")}return i.innerHTML=e.indexOf("<br>")>-1||e.indexOf("<br/>")>-1?e:n,i.style.position="fixed",i.style.fontSize=t.size,i.style.fontWeight=t.fontWeight,i.style.fontStyle=t.fontStyle,i.style.fontFamily=t.fontFamily,i.style.visibility="hidden",i.style.top="-100",i.style.left="0",i.style.whiteSpace="nowrap",i.style.lineHeight="normal",new f(i.clientWidth,i.clientHeight)}function b(n,t,i,r,u,f,e,o,s,h,c){var v="",l=i.x,p=i.y,y=i.x+i.width,a=i.y+i.height;return c=c||0,f?(v=(v=v.concat("M "+l+" "+(p+t)+" Q "+l+" "+p+" "+(l+n)+" "+p+"  L "+(y-n)+" "+p+" Q "+y+" "+p+" "+y+" "+(p+t))).concat(" L "+y+" "+(a-t)+" Q "+y+" "+a+" "+(y-n)+" "+a),0!==u&&(v=(v=v.concat(" L "+(r.x+u/2)+" "+a)).concat(" L "+(s+c)+" "+(a+u-c)),v+=" Q "+s+" "+(a+u)+" "+(s-c)+" "+(a+u-c)),v=r.x-u/2>l?v.concat(" L "+(r.x-u/2)+" "+a+" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z"):0===u?v.concat(" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z"):v.concat(" L "+l+" "+(a+t)+" z")):e?(v=(v=v.concat("M "+l+" "+(p+t)+" Q "+l+" "+p+" "+(l+n)+" "+p+" L "+(r.x-u/2)+" "+p)).concat(" L "+(s-c)+" "+(r.y+c)),v=(v=(v+=" Q "+s+" "+r.y+" "+(s+c)+" "+(r.y+c)).concat(" L "+(r.x+u/2)+" "+p+" L "+(y-n)+" "+p+" Q "+y+" "+p+" "+y+" "+(p+t))).concat(" L "+y+" "+(a-t)+" Q "+y+" "+a+" "+(y-n)+" "+a+" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z")):o?(v=(v=(v=v.concat("M "+l+" "+(p+t)+" Q "+l+" "+p+" "+(l+n)+" "+p)).concat(" L "+(y-n)+" "+p+" Q "+y+" "+p+" "+y+" "+(p+t)+" L "+y+" "+(r.y-u/2))).concat(" L "+(y+u-c)+" "+(h-c)),v=(v=(v+=" Q "+(y+u)+" "+h+" "+(y+u-c)+" "+(h+c)).concat(" L "+y+" "+(r.y+u/2)+" L "+y+" "+(a-t)+" Q "+y+" "+a+" "+(y-n)+" "+a)).concat(" L "+(l+n)+" "+a+" Q "+l+" "+a+" "+l+" "+(a-t)+" z")):(v=(v=v.concat("M "+(l+n)+" "+p+" Q "+l+" "+p+" "+l+" "+(p+t)+" L "+l+" "+(r.y-u/2))).concat(" L "+(l-u+c)+" "+(h-c)),v=(v=(v+=" Q "+(l-u)+" "+h+" "+(l-u+c)+" "+(h+c)).concat(" L "+l+" "+(r.y+u/2)+" L "+l+" "+(a-t)+" Q "+l+" "+a+" "+(l+n)+" "+a)).concat(" L "+(y-n)+" "+a+" Q "+y+" "+a+" "+y+" "+(a-t)+" L "+y+" "+(p+t)+" Q "+y+" "+p+" "+(y-n)+" "+p+" z")),v}function u(n){return document.getElementById(n)}function s(n){var t=u(n);t&&sf.base.remove(t)}function g(n,t,i,r,u,f){var s=new c(""),e=nt(n,i,t,u,r),o=s["draw"+e.functionName](e.renderOption);return o.setAttribute("aria-label",f),o}function nt(n,t,i,r,u){var s,a="Path",h=t.width,e=t.height,o=n.x,f=n.y,c=n.x+-h/2,p=n.y+-e/2;switch(i){case"Circle":case"Bubble":a="Ellipse";sf.base.merge(r,{rx:h/2,ry:e/2,cx:o,cy:f});break;case"Cross":s="M "+c+" "+f+" L "+(o+h/2)+" "+f+" M "+o+" "+(f+e/2)+" L "+o+" "+(f+-e/2);sf.base.merge(r,{d:s});break;case"HorizontalLine":s="M "+c+" "+f+" L "+(o+h/2)+" "+f;sf.base.merge(r,{d:s});break;case"VerticalLine":s="M "+o+" "+(f+e/2)+" L "+o+" "+(f+-e/2);sf.base.merge(r,{d:s});break;case"Diamond":s="M "+c+" "+f+" L "+o+" "+(f+-e/2)+" L "+(o+h/2)+" "+f+" L "+o+" "+(f+e/2)+" L "+c+" "+f+" z";sf.base.merge(r,{d:s});break;case"Rectangle":s="M "+c+" "+(f+-e/2)+" L "+(o+h/2)+" "+(f+-e/2)+" L "+(o+h/2)+" "+(f+e/2)+" L "+c+" "+(f+e/2)+" L "+c+" "+(f+-e/2)+" z";sf.base.merge(r,{d:s});break;case"Triangle":s="M "+c+" "+(f+e/2)+" L "+o+" "+(f+-e/2)+" L "+(o+h/2)+" "+(f+e/2)+" L "+c+" "+(f+e/2)+" z";sf.base.merge(r,{d:s});break;case"InvertedTriangle":s="M "+(o+h/2)+" "+(f-e/2)+" L "+o+" "+(f+e/2)+" L "+(o-h/2)+" "+(f-e/2)+" L "+(o+h/2)+" "+(f-e/2)+" z";sf.base.merge(r,{d:s});break;case"Pentagon":for(var v=void 0,y=void 0,l=0;l<=5;l++)v=h/2*Math.cos(Math.PI/180*72*l),y=e/2*Math.sin(Math.PI/180*72*l),s=0===l?"M "+(o+v)+" "+(f+y)+" ":s.concat("L "+(o+v)+" "+(f+y)+" ");s=s.concat("Z");sf.base.merge(r,{d:s});break;case"Image":a="Image";sf.base.merge(r,{href:u,height:e,width:h,x:c,y:p})}return{renderOption:r,functionName:a}}function it(n,t,i,r){var f,o=new c(""),e,u;return f={id:n.id,x:n.x,y:n.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":n.anchor,transform:n.transform,opacity:t.opacity,"dominant-baseline":n.baseLine},e="string"==typeof n.text?n.text:n.text[0],u=o.createText(f,e),u.style.fontFamily=t.fontFamily,u.style.fontStyle=t.fontStyle,u.style.fontSize=t.size,u.style.fontWeight=t.fontWeight,u.style.color=t.color,r.appendChild(u),u}var c=function(){function n(n){this.svgLink="http://www.w3.org/2000/svg";this.rootId=n}return n.prototype.getOptionValue=function(n,t){return n[t]},n.prototype.createSvg=function(n){return sf.base.isNullOrUndefined(n.id)&&(n.id=this.rootId+"_svg"),this.svgObj=document.getElementById(n.id),sf.base.isNullOrUndefined(document.getElementById(n.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(n,this.svgObj),this.setSVGSize(n.width,n.height),this.svgObj},n.prototype.setSVGSize=function(n,t){var i=document.getElementById(this.rootId),r=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)||this.width<=0?this.svgObj.setAttribute("width",n?n.toString():r.width.toString()):this.svgObj.setAttribute("width",this.width.toString());sf.base.isNullOrUndefined(this.height)||this.height<=0?this.svgObj.setAttribute("height",t?t.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},n.prototype.drawPath=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"path")),t=this.setElementAttributes(n,t)},n.prototype.drawLine=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"line")),t=this.setElementAttributes(n,t)},n.prototype.drawRectangle=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"rect")),t=this.setElementAttributes(n,t)},n.prototype.drawCircle=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"circle")),t=this.setElementAttributes(n,t)},n.prototype.drawPolyline=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"polyline")),t=this.setElementAttributes(n,t)},n.prototype.drawEllipse=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"ellipse")),t=this.setElementAttributes(n,t)},n.prototype.drawPolygon=function(n){var t=document.getElementById(n.id);return null===t&&(t=document.createElementNS(this.svgLink,"polygon")),t=this.setElementAttributes(n,t)},n.prototype.drawImage=function(n){var t=document.createElementNS(this.svgLink,"image");return t.setAttributeNS(null,"height",n.height.toString()),t.setAttributeNS(null,"width",n.width.toString()),t.setAttributeNS("http://www.w3.org/1999/xlink","href",n.href),t.setAttributeNS(null,"x",n.x.toString()),t.setAttributeNS(null,"y",n.y.toString()),t.setAttributeNS(null,"id",n.id),t.setAttributeNS(null,"visibility",n.visibility),sf.base.isNullOrUndefined(this.getOptionValue(n,"clip-path"))||t.setAttributeNS(null,"clip-path",this.getOptionValue(n,"clip-path")),sf.base.isNullOrUndefined(n.preserveAspectRatio)||t.setAttributeNS(null,"preserveAspectRatio",n.preserveAspectRatio),t},n.prototype.createText=function(n,t){var i=document.createElementNS(this.svgLink,"text");return i=this.setElementAttributes(n,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},n.prototype.createTSpan=function(n,t){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(n,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},n.prototype.createTitle=function(n){var t=document.createElementNS(this.svgLink,"title");return t.textContent=n,t},n.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},n.prototype.createClipPath=function(n){var t=document.createElementNS(this.svgLink,"clipPath");return this.setElementAttributes(n,t)},n.prototype.createForeignObject=function(n){var t=document.createElementNS(this.svgLink,"foreignObject");return this.setElementAttributes(n,t)},n.prototype.createGroup=function(n){var t=document.createElementNS(this.svgLink,"g");return this.setElementAttributes(n,t)},n.prototype.createPattern=function(n,t){var i=document.createElementNS(this.svgLink,t);return this.setElementAttributes(n,i)},n.prototype.createRadialGradient=function(n,t,i){var r,u;return sf.base.isNullOrUndefined(n[0].colorStop)?r=n[0].color.toString():(u={id:this.rootId+"_"+t+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"},this.drawGradient("radialGradient",u,n),r="url(#"+this.rootId+"_"+t+"radialGradient)"),r},n.prototype.createLinearGradient=function(n,t,i){var r,u;return sf.base.isNullOrUndefined(n[0].colorStop)?r=n[0].color.toString():(u={id:this.rootId+"_"+t+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"},this.drawGradient("linearGradient",u,n),r="url(#"+this.rootId+"_"+t+"linearGradient)"),r},n.prototype.drawGradient=function(n,t,i){for(var e=this.createDefs(),f=document.createElementNS(this.svgLink,n),u,f=this.setElementAttributes(t,f),r=0;r<i.length;r++)u=document.createElementNS(this.svgLink,"stop"),u.setAttribute("offset",i[r].colorStop),u.setAttribute("stop-color",i[r].color),u.setAttribute("stop-opacity",i[r].opacity?i[r].opacity:"1"),sf.base.isNullOrUndefined(i[r].style)||u.setAttribute("style",i[r].style),f.appendChild(u);return e.appendChild(f),e},n.prototype.drawClipPath=function(n){var t=this.createDefs(),i=this.createClipPath({id:n.id}),r;return n.id=n.id+"_Rect",r=this.drawRectangle(n),i.appendChild(r),t.appendChild(i),t},n.prototype.drawCircularClipPath=function(n){var t=this.createDefs(),i=this.createClipPath({id:n.id}),r;return n.id=n.id+"_Circle",r=this.drawCircle(n),i.appendChild(r),t.appendChild(i),t},n.prototype.setElementAttributes=function(n,t){for(var r=Object.keys(n),i=0;i<r.length;i++)t.setAttribute(r[i],n[r[i]]);return t},n.prototype.createCanvas=function(){return null},n}(),et=function(){function n(n){this.rootId=n}return n.prototype.getOptionValue=function(n,t){return n[t]},n.prototype.createCanvas=function(n){var t=document.createElement("canvas");return t.setAttribute("id",this.rootId+"_canvas"),this.ctx=t.getContext("2d"),this.canvasObj=t,this.setCanvasSize(n.width,n.height),this.canvasObj},n.prototype.setCanvasSize=function(n,t){var i=document.getElementById(this.rootId),r=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)?this.canvasObj.setAttribute("width",n?n.toString():r.width.toString()):this.canvasObj.setAttribute("width",this.width.toString());sf.base.isNullOrUndefined(this.height)?this.canvasObj.setAttribute("height",t?t.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},n.prototype.setAttributes=function(n){var t,i;this.ctx.lineWidth=this.getOptionValue(n,"stroke-width");t=this.getOptionValue(n,"stroke-dasharray");sf.base.isNullOrUndefined(t)||(i=t.split(","),this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)]));this.ctx.strokeStyle=this.getOptionValue(n,"stroke")},n.prototype.drawLine=function(n){this.ctx.save();this.ctx.beginPath();this.ctx.lineWidth=this.getOptionValue(n,"stroke-width");this.ctx.strokeStyle=n.stroke;this.ctx.moveTo(n.x1,n.y1);this.ctx.lineTo(n.x2,n.y2);this.ctx.stroke();this.ctx.restore()},n.prototype.drawRectangle=function(n,t){var r=this.ctx,i=n.rx;return this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=this.getOptionValue(n,"opacity"),this.setAttributes(n),this.ctx.rect(n.x,n.y,n.width,n.height),null!==i&&i>=0?this.drawCornerRadius(n):("none"===n.fill&&(n.fill="transparent"),this.ctx.fillStyle=n.fill,this.ctx.fillRect(n.x,n.y,n.width,n.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=r,this.canvasObj},n.prototype.drawCornerRadius=function(n){var t=n.rx,i=n.x,r=n.y,u=n.width,f=n.height;"none"===n.fill&&(n.fill="transparent");this.ctx.fillStyle=n.fill;u<2*t&&(t=u/2);f<2*t&&(t=f/2);this.ctx.beginPath();this.ctx.moveTo(i+u-t,r);this.ctx.arcTo(i+u,r,i+u,r+f,t);this.ctx.arcTo(i+u,r+f,i,r+f,t);this.ctx.arcTo(i,r+f,i,r,t);this.ctx.arcTo(i,r,i+u,r,t);this.ctx.closePath();this.ctx.fill();this.ctx.stroke()},n.prototype.drawPath=function(n,t){var r=n.d.split(" "),h=this.getOptionValue(n,"stroke-width"),c=this.ctx,e=!0,i,u,f,o,s;for(this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=n.opacity?n.opacity:this.getOptionValue(n,"fill-opacity"),this.setAttributes(n),i=0;i<r.length;i+=3){u=parseFloat(r[i+1]);f=parseFloat(r[i+2]);switch(r[i]){case"M":n.innerR||n.cx||this.ctx.moveTo(u,f);break;case"L":n.innerR||this.ctx.lineTo(u,f);break;case"Q":o=parseFloat(r[i+3]);s=parseFloat(r[i+4]);this.ctx.quadraticCurveTo(u,f,o,s);i+=2;break;case"C":var l=parseFloat(r[i+3]),a=parseFloat(r[i+4]),v=parseFloat(r[i+5]),y=parseFloat(r[i+6]);this.ctx.bezierCurveTo(u,f,l,a,v,y);i+=4;break;case"A":n.innerR?e&&(this.ctx.arc(n.x,n.y,n.radius,n.start,n.end,n.counterClockWise),this.ctx.arc(n.x,n.y,n.innerR,n.end,n.start,!n.counterClockWise),e=!1):n.cx?this.ctx.arc(n.cx,n.cy,n.radius,0,2*Math.PI,n.counterClockWise):(this.ctx.moveTo(n.x,n.y),this.ctx.arc(n.x,n.y,n.radius,n.start,n.end,n.counterClockWise),this.ctx.lineTo(n.x,n.y));i+=5;break;case"z":case"Z":this.ctx.closePath();i-=2}}return"none"!==n.fill&&void 0!==n.fill&&(this.ctx.fillStyle=n.fill,this.ctx.fill()),h>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=c,this.canvasObj},n.prototype.createText=function(n,t,i,r,u,f){var e=this.getOptionValue(n,"font-weight");sf.base.isNullOrUndefined(e)||"regular"!==e.toLowerCase()||(e="normal");var s=this.getOptionValue(n,"font-size"),h=this.getOptionValue(n,"font-family"),c=this.getOptionValue(n,"font-style").toLowerCase()+" "+e+" "+s+" "+h,o=this.getOptionValue(n,"text-anchor"),l=void 0!==n.opacity?n.opacity:1;return("middle"===o&&(o="center"),this.ctx.save(),this.ctx.fillStyle=n.fill,this.ctx.font=c,this.ctx.textAlign=o,this.ctx.globalAlpha=l,n.baseline&&(this.ctx.textBaseline=n.baseline),f)||(this.ctx.translate(n.x+0+(i||0),n.y+(r||0)),this.ctx.rotate(n.labelRotation*Math.PI/180)),this.ctx.fillText(t,f?n.x:0,f?u:0),this.ctx.restore(),this.canvasObj},n.prototype.drawCircle=function(n,t){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.cx,n.cy,n.r,0,2*Math.PI),this.ctx.fillStyle=n.fill,this.ctx.globalAlpha=n.opacity,this.ctx.fill(),t&&this.ctx.translate(t[0],t[1]),this.setAttributes(n),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},n.prototype.drawPolyline=function(n){var i,t;for(this.ctx.save(),this.ctx.beginPath(),i=n.points.split(" "),t=0;t<i.length-1;t++){var r=i[t].split(","),u=parseFloat(r[0]),f=parseFloat(r[1]);0===t?this.ctx.moveTo(u,f):this.ctx.lineTo(u,f)}this.ctx.lineWidth=this.getOptionValue(n,"stroke-width");this.ctx.strokeStyle=n.stroke;this.ctx.stroke();this.ctx.restore()},n.prototype.drawEllipse=function(n,t){var r=this.ctx,i=Math.max(n.rx,n.ry),u=n.rx/i,f=n.ry/i;this.ctx.save();this.ctx.beginPath();this.ctx.translate(n.cx,n.cy);t&&this.ctx.translate(t[0],t[1]);this.ctx.save();this.ctx.scale(u,f);this.ctx.arc(0,0,i,0,2*Math.PI,!1);this.ctx.fillStyle=n.fill;this.ctx.fill();this.ctx.restore();this.ctx.lineWidth=this.getOptionValue(n,"stroke-width");this.ctx.strokeStyle=n.stroke;this.ctx.stroke();this.ctx.restore();this.ctx=r},n.prototype.drawImage=function(n){this.ctx.save();var t=new Image;sf.base.isNullOrUndefined(n.href)||(t.src=n.href,this.ctx.drawImage(t,n.x,n.y,n.width,n.height));this.ctx.restore()},n.prototype.createLinearGradient=function(n){var t;return sf.base.isNullOrUndefined(n[0].colorStop)||(t=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(n,t)},n.prototype.createRadialGradient=function(n){var t;return sf.base.isNullOrUndefined(n[0].colorStop)||(t=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(n,t)},n.prototype.setGradientValues=function(n,t){var r,i;if(sf.base.isNullOrUndefined(n[0].colorStop))r=n[0].color.toString();else{for(i=0;i<=n.length-1;i++){var u=n[i].color,f=n[i].colorStop.slice(0,-1),e=parseInt(f,10)/100;t.addColorStop(e,u)}r=t.toString()}return r},n.prototype.setElementAttributes=function(n,t){for(var r=Object.keys(n),u=Object.keys(n).map(function(t){return n[t]}),i=0;i<r.length;i++)t.setAttribute(r[i],u[i]);return null},n.prototype.updateCanvasAttributes=function(n){var i,t;this.setElementAttributes(n,this.canvasObj);i=this.ctx;sf.base.isNullOrUndefined(this.dataUrl)||(t=new Image,t.onload=function(){i.drawImage(t,0,0)},t.src=this.dataUrl)},n.prototype.clearRect=function(n){this.ctx.restore();this.ctx.clearRect(n.x,n.y,n.width,n.height)},n.prototype.createGroup=function(){return null},n.prototype.drawClipPath=function(){return null},n.prototype.canvasClip=function(n){this.ctx.save();this.ctx.fillStyle="transparent";this.ctx.rect(n.x,n.y,n.width,n.height);this.ctx.fill();this.ctx.clip()},n.prototype.canvasRestore=function(){this.ctx.restore()},n.prototype.drawPolygon=function(){return null},n.prototype.createDefs=function(){return null},n.prototype.createClipPath=function(){return null},n.prototype.createSvg=function(){return null},n}(),l,w=(l=function(n,t){return(l=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}l(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),f=function(n,t){this.width=n;this.height=t},o=function(n,t,i,r){this.x=n;this.y=t;this.width=i;this.height=r},k=function(n,t){this.isRight=t;this.isBottom=n},a=function(n){this.id=n},d=function(n){function t(t,i,r,u,f,e,o,s){void 0===e&&(e="");var h=n.call(this,t)||this;return h.transform="",h.baseLine="auto",h.labelRotation=0,h.x=i,h.y=r,h.anchor=u,h.text=f,h.transform=e,h.baseLine=o,h.labelRotation=s,h}return w(t,n),t}(a),tt=function(n){function t(t,i,r,u,f,e,o){var s=n.call(this,t)||this;return s.opacity=f,s.fill=i,s.stroke=u,s["stroke-width"]=r,s["stroke-dasharray"]=e,s.d=o,s}return w(t,n),t}(a),v,r=function(n,t){this.x=n;this.y=t},h=(v=function(n,t){return(v=Object.setPrototypeOf||_instanceof({__proto__:[]},Array)&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}v(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),i=function(t,i,r,u){var e,o=arguments.length,f=o<3?i:null===u?u=Object.getOwnPropertyDescriptor(i,r):u,s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,i,r,u);else for(s=t.length-1;s>=0;s--)(e=t[s])&&(f=(o<3?e(f):o>3?e(i,r,f):e(i,r))||f);return o>3&&f&&Object.defineProperty(i,r,f),f},rt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return h(t,n),i([sf.base.Property(null)],t.prototype,"size",void 0),i([sf.base.Property("")],t.prototype,"color",void 0),i([sf.base.Property("Segoe UI")],t.prototype,"fontFamily",void 0),i([sf.base.Property("Normal")],t.prototype,"fontWeight",void 0),i([sf.base.Property("Normal")],t.prototype,"fontStyle",void 0),i([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),ut=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return h(t,n),i([sf.base.Property("")],t.prototype,"color",void 0),i([sf.base.Property(1)],t.prototype,"width",void 0),t}(sf.base.ChildProperty),ft=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return h(t,n),i([sf.base.Property(0)],t.prototype,"x",void 0),i([sf.base.Property(0)],t.prototype,"y",void 0),i([sf.base.Property(0)],t.prototype,"width",void 0),i([sf.base.Property(0)],t.prototype,"height",void 0),t}(sf.base.ChildProperty),y=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return h(t,n),i([sf.base.Property(0)],t.prototype,"x",void 0),i([sf.base.Property(0)],t.prototype,"y",void 0),t}(sf.base.ChildProperty),ot=function(n){function t(t,i){return n.call(this,t,i)||this}return h(t,n),t.prototype.preRender=function(){this.allowServerDataBinding=!1;this.initPrivateVariable();this.isCanvas||this.removeSVG();this.createTooltipElement()},t.prototype.initPrivateVariable=function(){this.renderer=new c(this.element.id);this.themeStyle=p(this.theme);this.formattedText=[];this.padding=5;this.isFirst=!0;this.markerPoint=[]},t.prototype.removeSVG=function(){var n=document.getElementById(this.element.id+"_svg"),t=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate");n&&n.parentNode&&sf.base.remove(n);t&&t.parentNode&&sf.base.remove(t)},t.prototype.render=function(){var i,n,t;(this.fadeOuted=!1,this.template)?(this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location)):(this.renderText(this.isFirst),i={cancel:!1,name:"tooltipRender",tooltip:this},this.trigger("tooltipRender",i),n=this.renderTooltipElement(this.areaBounds,this.location),this.drawMarker(n.isBottom,n.isRight,this.markerSize));this.trigger("loaded",{tooltip:this});t=document.getElementById("chartmeasuretext");t&&sf.base.remove(t);this.allowServerDataBinding=!0},t.prototype.createTooltipElement=function(){var t,n,i;(this.textElements=[],!this.template||this.shared)&&(t=this.renderer.createSvg({id:this.element.id+"_svg"}),this.element.appendChild(t),n=document.getElementById(this.element.id+"_group"),n||(n=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),t.appendChild(n),i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":this.border.width,fill:this.fill||this.themeStyle.tooltipFill,opacity:"TailwindDark"!==this.theme&&"Tailwind"!==this.theme&&"Bootstrap5"!==this.theme&&"Bootstrap5Dark"!==this.theme||.75!==this.opacity?this.opacity:1,stroke:this.border.color}),n.appendChild(i))},t.prototype.drawMarker=function(n,t,i){var s;if(this.shapes.length<=0)return null;for(var h,e=0,c=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),a=u(this.element.id+"_group"),v=2*this.marginX+i/2+(t?this.arrowPadding:0),o=0,l=this.shapes;o<l.length;o++)s=l[o],"None"!==s&&(h=new tt(this.element.id+"_Trackball_"+e,this.palette[e],1,"#cccccc",1,null),this.markerPoint[e]&&c.appendChild(g(new r(v,this.markerPoint[e]-this.padding+(n?this.arrowPadding:0)),s,new f(i,i),"",h,null)),e++);a.appendChild(c)},t.prototype.renderTooltipElement=function(n,t){var i,tt=u(this.element.id),it=new r(0,0),y=new r(0,0),p=u(this.element.id+"_svg"),w=u(this.element.id+"_group"),l=u(this.element.id+"_path"),s=!1,h=!1,f=!1,d=0,g=0,c,ut,nt,a,v;if(this.tipRadius=1,""!==this.header&&(this.elementSize.height+=this.marginY),this.content.length>1?(i=this.sharedTooltipLocation(n,this.location.x,this.location.y),s=!0):(i=this.tooltipLocation(n,t,it,y),this.inverted?d=(h=i.x<t.x+this.clipBounds.x)?0:this.arrowPadding:(f=!(s=i.y<t.y+this.clipBounds.y),g=s?0:this.arrowPadding)),""!==this.header){var rt=e(this.isWrap?this.wrappedText:this.header,this.textStyle).height+2*this.marginY+(f?this.arrowPadding:0)+(this.isWrap?5:0),ft="M "+(3*this.marginX+(h||s||f?0:this.arrowPadding))+" "+rt+"L "+(i.width+(h||s||f?0:this.arrowPadding)-2*this.marginX)+" "+rt,et=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:.8,stroke:this.themeStyle.tooltipHeaderLine,d:ft});w.appendChild(et)}return c=this.border.width/2,ut=new o(c+d,c+g,i.width-c,i.height-c),(w.setAttribute("opacity","1"),!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(tt,i.x,i.y):this.animateTooltipDiv(tt,i),p.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),p.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),p.setAttribute("opacity","1"),sf.base.isNullOrUndefined(this.tooltipPlacement)||(s=this.tooltipPlacement.indexOf("Top")>-1,f=this.tooltipPlacement.indexOf("Bottom")>-1,h=this.tooltipPlacement.indexOf("Left")>-1),l.setAttribute("d",b(this.rx,this.ry,ut,it,this.arrowPadding,s,f,h,y.x,y.y,this.tipRadius)),this.enableShadow&&"Bootstrap4"!==this.theme)&&(nt=this.element.id+"_shadow","Tailwind"===this.theme||"TailwindDark"===this.theme||"Bootstrap5"===this.theme||"Bootstrap5Dark"===this.theme?l.setAttribute("box-shadow","0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)"):l.setAttribute("filter",sf.base.Browser.isIE?"":"url(#"+nt+")"),a='<filter id="'+nt+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>',a+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',a+='<\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',v=this.renderer.createDefs(),v.setAttribute("id",this.element.id+"SVG_tooltip_definition"),w.appendChild(v),v.innerHTML=a),l.setAttribute("stroke",this.border.color),this.changeText(new r(d,g),f,!h&&!s&&!f),new k(f,!h&&!s&&!f)},t.prototype.changeText=function(n,t,i){var r=document.getElementById(this.element.id+"_text");t&&r.setAttribute("transform","translate(0,"+this.arrowPadding+")");i&&r.setAttribute("transform","translate("+this.arrowPadding+" 0)")},t.prototype.findFormattedText=function(){this.formattedText=[];""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header));this.formattedText=this.formattedText.concat(this.content)},t.prototype.renderText=function(n){var ct,i,r,t,ut,ft=0,p=0,y=0,o=sf.base.extend({},this.textStyle,null,!0).properties,gt=u(this.element.id+"_group"),w="",lt,rt,kt,v,st,ht,dt;this.findFormattedText();lt="rtl"===document.body.getAttribute("dir")?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x;this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var h=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),b=this.header.indexOf("<b>")>-1&&this.header.indexOf("<\/b>")>-1,k=e(this.formattedText[0],o).width+2*this.marginX+this.arrowPadding,ni=this.location.x-k<this.location.x,ti=this.areaBounds.x+this.areaBounds.width<this.location.x+k,at=""!==h?this.marginY:0,et=!0,a=!0;this.markerPoint=[];var vt,g=this.shapes.length>0?10:0,nt=this.shapes.length>0?5:0,l="Normal",tt=this.themeStyle.tooltipLightLabel,yt=22/parseFloat("13px")*parseFloat(o.size);n&&!this.isCanvas||(s(this.element.id+"_text"),s(this.element.id+"_header_path"),s(this.element.id+"_trackball_group"),s(this.element.id+"SVG_tooltip_definition"));for(var pt=new d(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?3:0),lt,""),wt=it(pt,o,null,gt),ii=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1,ot=""!==this.header,bt=ot&&b?16:13,c=0,ri=this.formattedText.length;c<ri;c++)if(r=this.formattedText[c].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"<\/b>").split(/<br.*?>/g),0===c&&!ii&&this.isTextWrap&&(this.leftSpace<k||ni)&&(this.rightSpace<k||ti)&&(vt=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/bt:this.rightSpace/bt),r=(""!==h?h:this.formattedText[c]).match(new RegExp(".{1,"+vt+"}","g")),this.wrappedText=b?"<b>"+r.join("<br>")+"<\/b>":r.join("<br>"),this.isWrap=r.length>1),""!==r[0])for(0===c&&""!==h||this.markerPoint.push((""!==h?this.marginY:0)+pt.y+ft),rt=0,kt=r.length;rt<kt;rt++){for(y=0,a=!0,ft+=yt,v=0,st=(ct=r[rt].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"<\/b><br>").replace(/:/g,"<br>‎:<br>").split("<br>")).length;v<st;v++)t=ct[v],/\S/.test(t)||""===t||(t=" "),(!a&&" "===t||""!==t.replace(/<b>/g,"").replace(/<\/b>/g,"").trim())&&(y+=" "!==t?4:0,a&&!et?(ut={x:2*this.marginX+(g+nt),dy:yt+(a?at:0),fill:""},at=null):ut=et&&a?{x:""===h?2*this.marginX+(g+nt):2*this.marginX+(this.isWrap?g+nt:0)}:{},a=!1,i=this.renderer.createTSpan(ut,""),wt.appendChild(i),t.indexOf("<b>")>-1||b&&0===v&&0===c&&(ot||this.isWrap)?(l="bold",tt=this.themeStyle.tooltipBoldLabel,w="font-weight:"+l,o.fontWeight=l,i.setAttribute("fill",this.textStyle.color||tt)):(w="bold"===l?"font-weight:"+l:"",o.fontWeight=l,i.setAttribute("fill",this.textStyle.color||tt)),(t.indexOf("<\/b>")>-1||b&&v===st-1&&0===c&&(ot||this.isWrap))&&(l="Normal",tt=this.themeStyle.tooltipLightLabel),i.textContent=t=this.getTooltipTextContent(t),y+=e(t,o).width,""!==w&&(i.style.fontWeight=w.split("font-weight:")[1],i.style.color=i.getAttribute("fill")),i.style.fontFamily="inherit",i.style.fontStyle="inherit",i.style.fontSize="inherit",et=!1);y-=4;p=Math.max(p,y)}this.elementSize=new f(p+(p>0?2*this.marginX:0),ft);this.elementSize.width+=g+nt;ht=wt.childNodes[0];""!==h&&ht&&!this.isWrap&&(o.fontWeight="bold",dt=(this.elementSize.width+2*this.padding)/2-e(h,o).width/2,ht.setAttribute("x",dt.toString()))},t.prototype.getTooltipTextContent=function(n){var i=n.match(/<[a-zA-Z\/](.|\n)*?>/g),r,t;if(sf.base.isNullOrUndefined(i))return n;for(r=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(n),t=0;t<i.length;t++)this.isValidHTMLElement(i[t].replace("<","").replace("/","").replace(">","").trim())&&(n=n.replace(i[t],r?"‎":""));return n},t.prototype.isValidHTMLElement=function(n){return"[object HTMLUnknownElement]"!=document.createElement(n).toString()},t.prototype.createTemplate=function(n,t){var y={cancel:!1,name:"tooltipRender",tooltip:this},h,c,i,e,l,a,s,v,o;if(this.trigger("tooltipRender",y),h=document.getElementById(this.element.id),this.isCanvas&&this.removeSVG(),c=h.firstElementChild,c&&sf.base.remove(c),y.cancel)sf.base.remove(u(this.element.id+"_tooltip"));else{for(i=sf.base.createElement("div",{id:this.element.id+"parent_template"}),e=this.templateFn(this.data,this.controlInstance,i.id,i.id+"_blazorTemplate","");e&&e.length>0;)sf.base.isBlazor()||1===e.length?(i.appendChild(e[0]),e=null):i.appendChild(e[0]);h.appendChild(i);l=this.isCanvas?i:this.element;a=l.getBoundingClientRect();this.padding=0;this.elementSize=new f(a.width,a.height);s=this.shared?this.sharedTooltipLocation(n,this.location.x,this.location.y):this.tooltipLocation(n,t,new r(0,0),new r(0,0));(!this.enableAnimation||this.shared||this.isFirst?this.updateDiv(l,s.x,s.y):this.animateTooltipDiv(this.element,s),this.blazorTemplate)&&(v=function(){var e=u(o.element.id).getBoundingClientRect(),i;o.elementSize=new f(e.width,e.height);i=o.tooltipLocation(n,t,new r(0,0),new r(0,0));o.updateDiv(u(o.element.id),i.x,i.y)},o=this,v.bind(o,n,t),sf.base.updateBlazorTemplate(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,v))}},t.prototype.sharedTooltipLocation=function(n,t,i){var f=this.elementSize.width+2*this.marginX,u=this.elementSize.height+2*this.marginY,r=new o(t+2*this.padding,i-u-this.padding,f,u);return r.y<n.y&&(r.y+=r.height+2*this.padding),r.x+r.width>n.x+n.width&&(r.x-=r.width+4*this.padding),r},t.prototype.getCurrentPosition=function(n,t,i,u){var h=this.tooltipPlacement,l=this.clipBounds.x,a=this.clipBounds.y,c=this.offset,e=this.elementSize.width+2*this.marginX,s=this.elementSize.height+2*this.marginY,f=new r(t.x,t.y);return"Top"===h||"Bottom"===h?(f=new r(f.x+l-this.elementSize.width/2-this.padding,f.y+a-this.elementSize.height-2*this.padding-this.arrowPadding-c),i.x=u.x=e/2,"Bottom"===h&&(f.y=t.y+a+c),n.x+n.width<f.x+e?(f.x=n.width>e?n.x+n.width-e+6:n.x,i.x=u.x=n.width>e?n.x+t.x-f.x:t.x):n.x>f.x&&(f.x=n.x,i.x=u.x=t.x)):(f=new r(f.x+l+c,f.y+a-this.elementSize.height/2-this.padding),i.y=u.y=s/2,"Left"===h&&(f.x=t.x+l-c-(e+this.arrowPadding)),n.y+n.height<f.y+s?(f.y=n.height>s?n.y+n.height-s+6:n.y,i.y=u.y=n.height>s?n.y+t.y-f.y:t.y):n.y>f.y&&(f.y=n.y,i.y=u.y=t.y)),new o(f.x,f.y,e,s)},t.prototype.tooltipLocation=function(n,t,i,u){if(!sf.base.isNullOrUndefined(this.tooltipPlacement))return this.getCurrentPosition(n,t,i,u);var f=new r(t.x,t.y),e=this.elementSize.width+2*this.marginX,h=this.elementSize.height+2*this.marginY,l=this.offset,a=this.clipBounds.x,v=this.clipBounds.y,c=n.x,s=n.y;return this.inverted?(f=new r(f.x+a+l,f.y+v-this.elementSize.height/2-this.padding),i.y=u.y=h/2,(f.x+e+this.arrowPadding>c+n.width||this.isNegative)&&(f.x=(t.x>n.width?n.width:t.x)+a-l-(e+this.arrowPadding)),f.x<c&&(f.x=(t.x<0?0:t.x)+a+l),f.y<=s&&(i.y-=s-f.y,u.y-=s-f.y,f.y=s),f.y+h>=s+n.height&&(i.y+=f.y+h-(s+n.height),u.y+=f.y+h-(s+n.height),f.y-=f.y+h-(s+n.height)),i.y+this.arrowPadding/2>h-this.ry&&(i.y=h-this.ry-this.arrowPadding/2,u.y=h,this.tipRadius=0),i.y-this.arrowPadding/2<this.ry&&(i.y=this.ry+this.arrowPadding/2,u.y=0,this.tipRadius=0)):(f=new r(f.x+a-this.elementSize.width/2-this.padding,f.y+v-this.elementSize.height-2*this.padding-this.arrowPadding-l),i.x=u.x=e/2,(f.y<s||this.isNegative)&&(f.y=(t.y<0?0:t.y)+v+l),f.y+h+this.arrowPadding>s+n.height&&(f.y=Math.min(t.y,s+n.height)+v-this.elementSize.height-2*this.padding-this.arrowPadding-l),u.x=e/2,f.x<c&&(i.x-=c-f.x,u.x-=c-f.x,f.x=c),f.x+e>c+n.width&&(i.x+=f.x+e-(c+n.width),u.x+=f.x+e-(c+n.width),f.x-=f.x+e-(c+n.width)),i.x+this.arrowPadding/2>e-this.rx&&(i.x=e-this.rx-this.arrowPadding/2,u.x=e,this.tipRadius=0),i.x-this.arrowPadding/2<this.rx&&(i.x=this.rx+this.arrowPadding/2,u.x=0,this.tipRadius=0)),new o(f.x,f.y,e,h)},t.prototype.animateTooltipDiv=function(n,t){var i,r=this,u=parseFloat(n.style.left),f=parseFloat(n.style.top);new sf.base.Animation({}).animate(n,{duration:this.duration,progress:function(r){i=r.timeStamp/r.duration;n.style.animation=null;n.style.left=u+i*(t.x-u)+"px";n.style.top=f+i*(t.y-f)+"px"},end:function(){r.updateDiv(n,t.x,t.y);r.trigger("animationComplete",{tooltip:r})}})},t.prototype.updateDiv=function(n,t,i){n.style.left=t+"px";n.style.top=i+"px"},t.prototype.updateTemplateFn=function(){if(this.template)try{document.querySelectorAll(this.template).length&&(this.templateFn=sf.base.compile(document.querySelector(this.template).innerHTML.trim()))}catch(n){this.templateFn=sf.base.compile(this.template)}},t.prototype.fadeOut=function(){var i=this,r=this.isCanvas&&!this.template?u(this.element.id+"_svg"):u(this.element.id),n,t;if(r){if(n=r.firstChild,this.isCanvas&&!this.template&&(n=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):n),!n)return null;t=parseFloat(n.getAttribute("opacity"));t=sf.base.isNullOrUndefined(t)?1:t;new sf.base.Animation({}).animate(n,{duration:200,progress:function(r){i.progressAnimation(n,t,r.timeStamp/r.duration)},end:function(){i.fadeOuted=!0;i.endAnimation(n)}})}},t.prototype.progressAnimation=function(n,t,i){n.style.animation="";n.setAttribute("opacity",(t-i).toString())},t.prototype.endAnimation=function(n){n.setAttribute("opacity","0");this.template&&(n.style.display="none");this.trigger("animationComplete",{tooltip:this})},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.destroy=function(){n.prototype.destroy.call(this);this.element.classList.remove("e-tooltip")},t.prototype.onPropertyChanged=function(){this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate");this.isFirst=!1;this.render()},i([sf.base.Property(!1)],t.prototype,"enable",void 0),i([sf.base.Property(!1)],t.prototype,"shared",void 0),i([sf.base.Property(!0)],t.prototype,"enableShadow",void 0),i([sf.base.Property(null)],t.prototype,"fill",void 0),i([sf.base.Property("")],t.prototype,"header",void 0),i([sf.base.Property(.75)],t.prototype,"opacity",void 0),i([sf.base.Complex({size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},rt)],t.prototype,"textStyle",void 0),i([sf.base.Property(null)],t.prototype,"template",void 0),i([sf.base.Property(!0)],t.prototype,"enableAnimation",void 0),i([sf.base.Property(300)],t.prototype,"duration",void 0),i([sf.base.Property(!1)],t.prototype,"inverted",void 0),i([sf.base.Property(!1)],t.prototype,"isNegative",void 0),i([sf.base.Complex({color:"#cccccc",width:.5},ut)],t.prototype,"border",void 0),i([sf.base.Property([])],t.prototype,"content",void 0),i([sf.base.Property(10)],t.prototype,"markerSize",void 0),i([sf.base.Complex({x:0,y:0},y)],t.prototype,"clipBounds",void 0),i([sf.base.Property([])],t.prototype,"palette",void 0),i([sf.base.Property([])],t.prototype,"shapes",void 0),i([sf.base.Complex({x:0,y:0},y)],t.prototype,"location",void 0),i([sf.base.Property(0)],t.prototype,"offset",void 0),i([sf.base.Property(2)],t.prototype,"rx",void 0),i([sf.base.Property(2)],t.prototype,"ry",void 0),i([sf.base.Property(5)],t.prototype,"marginX",void 0),i([sf.base.Property(5)],t.prototype,"marginY",void 0),i([sf.base.Property(12)],t.prototype,"arrowPadding",void 0),i([sf.base.Property(null)],t.prototype,"data",void 0),i([sf.base.Property("Material")],t.prototype,"theme",void 0),i([sf.base.Complex({x:0,y:0,width:0,height:0},ft)],t.prototype,"areaBounds",void 0),i([sf.base.Property(null)],t.prototype,"availableSize",void 0),i([sf.base.Property()],t.prototype,"blazorTemplate",void 0),i([sf.base.Property(!1)],t.prototype,"isCanvas",void 0),i([sf.base.Property(!1)],t.prototype,"isTextWrap",void 0),i([sf.base.Property(null)],t.prototype,"tooltipPlacement",void 0),i([sf.base.Property(null)],t.prototype,"controlInstance",void 0),i([sf.base.Event()],t.prototype,"tooltipRender",void 0),i([sf.base.Event()],t.prototype,"loaded",void 0),i([sf.base.Event()],t.prototype,"animationComplete",void 0),t=i([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);return t.TextStyle=rt,t.TooltipBorder=ut,t.AreaBounds=ft,t.ToolLocation=y,t.Tooltip=ot,t.getTooltipThemeColor=p,t.measureText=e,t.findDirection=b,t.Size=f,t.Rect=o,t.Side=k,t.CustomizeOption=a,t.TextOption=d,t.getElement=u,t.removeElement=s,t.drawSymbol=g,t.calculateShapes=nt,t.PathOption=tt,t.textElement=it,t.TooltipLocation=r,t.SvgRenderer=c,t.CanvasRenderer=et,t};sf.svgbase=sf.svgbase({})},"./single-bundle.js":function(n,t,i){"use strict";function s(n,t,i,r,u,f,e){try{var o=n[f](e),s=o.value}catch(n){return void i(n)}o.done?t(s):Promise.resolve(s).then(r,u)}function u(n){return function(){var t=this,i=arguments;return new Promise(function(r,u){function f(n){s(e,r,u,f,o,"next",n)}function o(n){s(e,r,u,f,o,"throw",n)}var e=n.apply(t,i);f(void 0)})}}i.r(t);i("./modules/base.js");i("./modules/spinner.js");i("./modules/popup.js");i("./modules/popupsbase.js");i("./modules/navigationsbase.js");i("./modules/splitbuttonsbase.js");i("./modules/svgbase.js");i("./modules/sortable.js");i("./syncfusion-blazor.js");i("./modules/sf-accordion.js");i("./modules/sf-accumulation-chart.js");i("./modules/sf-barcode.js");i("./modules/sf-bullet-chart.js");i("./modules/sf-calendarbase.js");i("./modules/sf-chart.js");i("./modules/sf-circulargauge.js");i("./modules/sf-colorpicker.js");i("./modules/sf-contextmenu.js");i("./modules/sf-dashboard-layout.js");i("./modules/sf-datepicker.js");i("./modules/sf-daterangepicker.js");i("./modules/sf-diagramcomponent.js");i("./modules/sf-dialog.js");i("./modules/sf-drop-down-button.js");i("./modules/sf-dropdownlist.js");i("./modules/sf-filemanager.js");i("./modules/sf-gantt.js");i("./modules/sf-grid.js");i("./modules/sf-heatmap.js");i("./modules/sf-inplaceeditor.js");i("./modules/sf-kanban.js");i("./modules/sf-lineargauge.js");i("./modules/sf-listbox.js");i("./modules/sf-listview.js");i("./modules/sf-maps.js");i("./modules/sf-maskedtextbox.js");i("./modules/sf-menu.js");i("./modules/sf-multiselect.js");i("./modules/sf-numerictextbox.js");i("./modules/sf-pivotview.js");i("./modules/sf-progressbar.js");i("./modules/sf-range-navigator.js");i("./modules/sf-richtexteditor.js");i("./modules/sf-schedule.js");i("./modules/sf-sidebar.js");i("./modules/sf-slider.js");i("./modules/sf-smith-chart.js");i("./modules/sf-sparkline.js");i("./modules/sf-spinner.js");i("./modules/sf-splitter.js");i("./modules/sf-stock-chart.js");var f,e,o,h=i("../node_modules/@babel/runtime/regenerator/index.js"),r=i.n(h);window.sfExport={exportToImage:(o=u(r.a.mark(function n(t,i,f,e){var o;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.sfExport.imageExport(t,i,f,e);case 2:if(!_instanceof(o=n.sent,Promise)){n.next=8;break}return n.next=6,o.then(function(){var n=u(r.a.mark(function n(t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t);case 1:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}());case 6:n.next=9;break;case 8:return n.abrupt("return",o);case 9:case"end":return n.stop()}},n)})),function(){return o.apply(this,arguments)}),validateExport:(e=u(r.a.mark(function n(t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!_instanceof(t,Promise)){n.next=3;break}return n.next=3,t.then(function(){var n=u(r.a.mark(function n(t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t);case 1:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}());case 3:case"end":return n.stop()}},n)})),function(){return e.apply(this,arguments)}),imageExport:(f=u(r.a.mark(function n(t,i,u,f){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){var e=document.getElementById(u),c='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e.outerHTML+"<\/svg>",s=window.URL.createObjectURL(new Blob("SVG"===t?[c]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"})),r,h,o;"SVG"===t?(f&&window.sfExport.triggerDownload(t,i,s),n(null)):(r=document.createElement("canvas"),r.height=e.clientHeight,r.width=e.clientWidth,h=r.getContext("2d"),o=new Image,o.onload=function(){if(h.drawImage(o,0,0),window.URL.revokeObjectURL(s),f)window.sfExport.triggerDownload(t,i,r.toDataURL("image/png").replace("image/png","image/octet-stream")),n(null);else{var u="JPEG"===t?r.toDataURL("image/jpeg"):"PNG"===t?r.toDataURL("image/png"):"";n(u)}},o.src=s)}));case 1:case"end":return n.stop()}},n)})),function(){return f.apply(this,arguments)}),triggerDownload:function(n,t,i){var r=document.createElement("a");r.download=t+"."+n.toLocaleLowerCase();r.href=i;r.click()},downloadPdf:function(n,t){for(var s,h,c,f=atob(n),e=[],i=0;i<f.length;i+=512){for(var u=f.slice(i,i+512),o=new Array(u.length),r=0;r<u.length;r++)o[r]=u.charCodeAt(r);s=new Uint8Array(o);e.push(s)}h=new Blob(e,{type:"application/pdf"});c=(URL||webkitURL).createObjectURL(h);sfExport.triggerDownload("PDF",t,c)},print:function(n){var t,i,r;(t=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no")).moveTo(0,0);t.resizeTo(screen.availWidth,screen.availHeight);i=document.createElement("div");i.appendChild(n.cloneNode(!0));t.document.write("<!DOCTYPE html> <html><head> <\/head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script><\/body><\/html>");t.document.close();t.focus();r=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(r))},500)}};i("./modules/sf-tab.js");i("./modules/sf-textbox.js");i("./modules/sf-timepicker.js");i("./modules/sf-toast.js");i("./modules/sf-toolbar.js");i("./modules/sf-tooltip.js");i("./modules/sf-treegrid.js");i("./modules/sf-treemap.js");i("./modules/sf-treeview.js");i("./modules/sf-uploader.js")},"./syncfusion-blazor.js":function(){var n={getElementByXpath:function(n){return document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(n,t,i){var r=null!=n&&null!=window[n]?window[n][t]:null;return null!=r?r:window.sfBlazor.getElementByXpath(i)},getAttribute:function(n,t,i,r){var u=window.sfBlazor.getElement(n,t,i);if(null!=u)return u.getAttribute(r)},setAttribute:function(n,t,i,r,u){window.sfBlazor.getElement(n,t,i).setAttribute(r,u)},addClass:function(n,t,i,r){sf.base.addClass([window.sfBlazor.getElement(n,t,i)],r)},removeClass:function(n,t,i,r){sf.base.removeClass([window.sfBlazor.getElement(n,t,i)],r)},getClassList:function(n,t,i){return Array.prototype.slice.call(window.sfBlazor.getElement(n,t,i).classList)},enableRipple:function(n){sf.base.enableRipple(n)},isDevice:function(n){return n&&this.enableRtl(n),sf.base.Browser.isDevice},animate:function(n,t){new sf.base.Animation(t).animate(n)},callRipple:function(n,t){sf.base.rippleEffect(n,t)},createXPathFromElement:function(n){for(var f,i,e,r,u=document.getElementsByTagName("*"),t=[];n&&1===n.nodeType;n=n.parentNode)if(n.hasAttribute("id")){for(f=0,i=0;i<u.length&&(u[i].hasAttribute("id")&&u[i].id===n.id&&f++,!(f>1));i++);if(1===f)return t.unshift('id("'+n.getAttribute("id")+'")'),t.join("/");t.unshift(n.localName.toLowerCase()+'[@id="'+n.getAttribute("id")+'"]')}else{for(e=1,r=n.previousSibling;r;r=r.previousSibling)r.localName===n.localName&&e++;t.unshift(n.localName.toLowerCase()+"["+e+"]")}return t.length?"/"+t.join("/"):null},getDomObject:function(n,t,i){var u=n+sf.base.getUniqueID(n),f={id:t.id,"class":t.className,xPath:window.sfBlazor.createXPathFromElement(t),domUUID:u},r=i&&i.elementID;return r&&(window[r]=sf.base.isNullOrUndefined(window[r])?{}:window[r],window[r][u]=t,f.elementID=r),f},focusButton:function(n){n.focus()},setProgress:function(n,t,i,r,u,f){return i=i.querySelector(".e-spinner"),window.requestAnimationFrame(function(){u&&(n.style[f?"height":"width"]=r+"%");t.parentElement.setAttribute("aria-valuenow",r.toString());100===r&&(t.classList.remove("e-cont-animate","e-animate-end"),i.style.width="auto",i.style.height="auto")})},setAnimation:function(n,t,i,r,u,f){t=t.querySelector(".e-spinner");new sf.base.Animation({}).animate(n,{duration:r,name:"Progress"+i,timingFunction:u,begin:function(){f&&(t.style.width=Math.max(t.offsetWidth,n.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,n.offsetHeight)+"px",n.classList.add("e-cont-animate"))},end:function(){n.classList.add("e-animate-end")}})},cancelAnimation:function(n){window.cancelAnimationFrame(n)}};sf.base.enableBlazorMode();window.sfBlazor=window.sfBlazor||{};Object.assign(window.sfBlazor,n)}})
